var TX=Object.defineProperty;var u=(o,e)=>TX(o,"name",{value:e,configurable:!0});import{bb as me,ax as xX,b as LX,o as EX,f as mP,d as kX,B as DX,e as MX}from"./index-348f88e2.js";import{u as AX}from"./useControlled-6e28c700.js";globalThis&&globalThis.__awaiter;let IX=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function NX(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(n,i)=>{const s=i[0],r=e[s];let a=n;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),IX&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}u(NX,"_format$1");function p(o,e,...t){return NX(e,t)}u(p,"localize");var ZT;const zg="en";let Yy=!1,Xy=!1,YC=!1,VH=!1,yI=!1,wI=!1,WH=!1,z0,XC=zg,bP=zg,RX,ur;const Ts=typeof self=="object"?self:typeof global=="object"?global:{};let Wi;typeof Ts.vscode<"u"&&typeof Ts.vscode.process<"u"?Wi=Ts.vscode.process:typeof process<"u"&&(Wi=process);const PX=typeof((ZT=Wi?.versions)===null||ZT===void 0?void 0:ZT.electron)=="string",FX=PX&&Wi?.type==="renderer";if(typeof navigator=="object"&&!FX)ur=navigator.userAgent,Yy=ur.indexOf("Windows")>=0,Xy=ur.indexOf("Macintosh")>=0,wI=(ur.indexOf("Macintosh")>=0||ur.indexOf("iPad")>=0||ur.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,YC=ur.indexOf("Linux")>=0,WH=ur?.indexOf("Mobi")>=0,yI=!0,p({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),z0=zg,XC=z0,bP=navigator.language;else if(typeof Wi=="object"){Yy=Wi.platform==="win32",Xy=Wi.platform==="darwin",YC=Wi.platform==="linux",YC&&Wi.env.SNAP&&Wi.env.SNAP_REVISION,Wi.env.CI||Wi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,z0=zg,XC=zg;const o=Wi.env.VSCODE_NLS_CONFIG;if(o)try{const e=JSON.parse(o),t=e.availableLanguages["*"];z0=e.locale,bP=e.osLocale,XC=t||zg,RX=e._translationsConfigFile}catch{}VH=!0}else console.error("Unable to resolve platform.");const li=Yy,Ye=Xy,bi=YC,Rr=VH,Ld=yI,OX=yI&&typeof Ts.importScripts=="function",Fa=wI,HX=WH,Oa=ur,VX=XC,WX=typeof Ts.postMessage=="function"&&!Ts.importScripts,BH=(()=>{if(WX){const o=[];Ts.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=o.length;n<i;n++){const s=o[n];if(s.id===t.data.vscodeScheduleAsyncWork){o.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;o.push({id:n,callback:t}),Ts.postMessage({vscodeScheduleAsyncWork:n},"*")}}return o=>setTimeout(o)})(),Us=Xy||wI?2:Yy?1:3;let _P=!0,vP=!1;function UH(){if(!vP){vP=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,_P=new Uint16Array(o.buffer)[0]===(2<<8)+1}return _P}u(UH,"isLittleEndian");const GH=!!(Oa&&Oa.indexOf("Chrome")>=0),BX=!!(Oa&&Oa.indexOf("Firefox")>=0),UX=!!(!GH&&Oa&&Oa.indexOf("Safari")>=0),GX=!!(Oa&&Oa.indexOf("Edg/")>=0);Oa&&Oa.indexOf("Android")>=0;var st;(function(o){function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}u(e,"is"),o.is=e;const t=Object.freeze([]);function n(){return t}u(n,"empty"),o.empty=n;function*i(C){yield C}u(i,"single"),o.single=i;function s(C){return e(C)?C:i(C)}u(s,"wrap"),o.wrap=s;function r(C){return C||t}u(r,"from"),o.from=r;function a(C){return!C||C[Symbol.iterator]().next().done===!0}u(a,"isEmpty"),o.isEmpty=a;function l(C){return C[Symbol.iterator]().next().value}u(l,"first"),o.first=l;function c(C,v){for(const y of C)if(v(y))return!0;return!1}u(c,"some"),o.some=c;function d(C,v){for(const y of C)if(v(y))return y}u(d,"find"),o.find=d;function*h(C,v){for(const y of C)v(y)&&(yield y)}u(h,"filter"),o.filter=h;function*g(C,v){let y=0;for(const w of C)yield v(w,y++)}u(g,"map"),o.map=g;function*f(...C){for(const v of C)for(const y of v)yield y}u(f,"concat"),o.concat=f;function m(C,v,y){let w=y;for(const x of C)w=v(w,x);return w}u(m,"reduce"),o.reduce=m;function*b(C,v,y=C.length){for(v<0&&(v+=C.length),y<0?y+=C.length:y>C.length&&(y=C.length);v<y;v++)yield C[v]}u(b,"slice"),o.slice=b;function _(C,v=Number.POSITIVE_INFINITY){const y=[];if(v===0)return[y,C];const w=C[Symbol.iterator]();for(let x=0;x<v;x++){const M=w.next();if(M.done)return[y,o.empty()];y.push(M.value)}return[y,{[Symbol.iterator](){return w}}]}u(_,"consume"),o.consume=_})(st||(st={}));let yn=u(class zL{constructor(e){this.element=e,this.next=zL.Undefined,this.prev=zL.Undefined}},"Node");yn.Undefined=new yn(void 0);class oi{constructor(){this._first=yn.Undefined,this._last=yn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===yn.Undefined}clear(){let e=this._first;for(;e!==yn.Undefined;){const t=e.next;e.prev=yn.Undefined,e.next=yn.Undefined,e=t}this._first=yn.Undefined,this._last=yn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new yn(e);if(this._first===yn.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==yn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==yn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==yn.Undefined&&e.next!==yn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===yn.Undefined&&e.next===yn.Undefined?(this._first=yn.Undefined,this._last=yn.Undefined):e.next===yn.Undefined?(this._last=this._last.prev,this._last.next=yn.Undefined):e.prev===yn.Undefined&&(this._first=this._first.next,this._first.prev=yn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==yn.Undefined;)yield e.element,e=e.next}}u(oi,"LinkedList");const zH="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function zX(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of zH)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}u(zX,"createWordRegExp");const SI=zX();function KH(o){let e=SI;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}u(KH,"ensureValidWordDefinition");const jH=new oi;jH.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function i_(o,e,t,n,i){if(i||(i=st.first(jH)),t.length>i.maxLen){let c=o-i.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,o+i.maxLen/2),i_(o,e,t,n,i)}const s=Date.now(),r=o-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-s>=i.timeBudget);c++){const d=r-i.windowSize*c;e.lastIndex=Math.max(0,d);const h=KX(e,t,r,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}u(i_,"getWordAtText");function KX(o,e,t,n){let i;for(;i=o.exec(e);){const s=i.index||0;if(s<=t&&o.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}u(KX,"_findRegexMatchEnclosingPosition");function lo(o,e=0){return o[o.length-(1+e)]}u(lo,"tail");function jX(o){if(o.length===0)throw new Error("Invalid tail call");return[o.slice(0,o.length-1),o[o.length-1]]}u(jX,"tail2");function pi(o,e,t=(n,i)=>n===i){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let n=0,i=o.length;n<i;n++)if(!t(o[n],e[n]))return!1;return!0}u(pi,"equals$1");function $X(o,e){const t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}u($X,"removeFastWithoutKeepingOrder");function s_(o,e,t){return qX(o.length,n=>t(o[n],e))}u(s_,"binarySearch");function qX(o,e){let t=0,n=o-1;for(;t<=n;){const i=(t+n)/2|0,s=e(i);if(s<0)t=i+1;else if(s>0)n=i-1;else return i}return-(t+1)}u(qX,"binarySearch2");function $H(o,e){let t=0,n=o.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(o[i])?n=i:t=i+1}return t}u($H,"findFirstInSorted");function KL(o,e,t){if(o=o|0,o>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],i=[],s=[],r=[];for(const a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):r.push(a)}return o<i.length?KL(o,i,t):o<i.length+r.length?r[0]:KL(o-(i.length+r.length),s,t)}u(KL,"quickSelect");function CP(o,e){const t=[];let n;for(const i of o.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}u(CP,"groupBy");function jp(o){return o.filter(e=>!!e)}u(jp,"coalesce");function yP(o){let e=0;for(let t=0;t<o.length;t++)o[t]&&(o[e]=o[t],e+=1);o.length=e}u(yP,"coalesceInPlace");function qH(o){return!Array.isArray(o)||o.length===0}u(qH,"isFalsyOrEmpty");function Ei(o){return Array.isArray(o)&&o.length>0}u(Ei,"isNonEmptyArray");function id(o,e=t=>t){const t=new Set;return o.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}u(id,"distinct");function YH(o,e){const t=YX(o,e);if(t!==-1)return o[t]}u(YH,"findLast");function YX(o,e){for(let t=o.length-1;t>=0;t--){const n=o[t];if(e(n))return t}return-1}u(YX,"lastIndex");function XH(o,e){return o.length>0?o[0]:e}u(XH,"firstOrDefault");function Hi(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}u(Hi,"range");function P1(o,e,t){const n=o.slice(0,e),i=o.slice(e);return n.concat(t,i)}u(P1,"arrayInsert");function JT(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}u(JT,"pushToStart");function K0(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}u(K0,"pushToEnd");function wP(o,e){for(const t of e)o.push(t)}u(wP,"pushMany");function TI(o){return Array.isArray(o)?o:[o]}u(TI,"asArray");function XX(o,e,t){const n=ZH(o,e),i=o.length,s=t.length;o.length=i+s;for(let r=i-1;r>=n;r--)o[r+s]=o[r];for(let r=0;r<s;r++)o[r+n]=t[r]}u(XX,"insertInto");function SP(o,e,t,n){const i=ZH(o,e),s=o.splice(i,t);return XX(o,i,n),s}u(SP,"splice$1");function ZH(o,e){return e<0?Math.max(e+o.length,0):Math.min(e,o.length)}u(ZH,"getActualStartIndex");var jL;(function(o){function e(i){return i<0}u(e,"isLessThan"),o.isLessThan=e;function t(i){return i>0}u(t,"isGreaterThan"),o.isGreaterThan=t;function n(i){return i===0}u(n,"isNeitherLessOrGreaterThan"),o.isNeitherLessOrGreaterThan=n,o.greaterThan=1,o.lessThan=-1,o.neitherLessOrGreaterThan=0})(jL||(jL={}));function Ab(o,e){return(t,n)=>e(o(t),o(n))}u(Ab,"compareBy");const ZX=u((o,e)=>o-e,"numberComparator");function JH(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>0&&(t=i)}return t}u(JH,"findMaxBy");function JX(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>=0&&(t=i)}return t}u(JX,"findLastMaxBy");function QX(o,e){return JH(o,(t,n)=>-e(t,n))}u(QX,"findMinBy");class th{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}u(th,"ArrayQueue");class Pr{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Pr(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Pr(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||jL.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}}u(Pr,"CallbackIterable");Pr.empty=new Pr(o=>{});function Ki(o){return typeof o=="string"}u(Ki,"isString$1");function as(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}u(as,"isObject");function eZ(o){const e=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof e}u(eZ,"isTypedArray");function sd(o){return typeof o=="number"&&!isNaN(o)}u(sd,"isNumber$1");function TP(o){return!!o&&typeof o[Symbol.iterator]=="function"}u(TP,"isIterable");function QH(o){return o===!0||o===!1}u(QH,"isBoolean");function ws(o){return typeof o>"u"}u(ws,"isUndefined");function tZ(o){return!Ws(o)}u(tZ,"isDefined");function Ws(o){return ws(o)||o===null}u(Ws,"isUndefinedOrNull");function Ct(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}u(Ct,"assertType");function Kg(o){if(Ws(o))throw new Error("Assertion Failed: argument is undefined or null");return o}u(Kg,"assertIsDefined");function Zy(o){return typeof o=="function"}u(Zy,"isFunction");function nZ(o,e){const t=Math.min(o.length,e.length);for(let n=0;n<t;n++)iZ(o[n],e[n])}u(nZ,"validateConstraints");function iZ(o,e){if(Ki(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Zy(e)){try{if(o instanceof e)return}catch{}if(!Ws(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}u(iZ,"validateConstraint");function si(o){return o===null?void 0:o}u(si,"withNullAsUndefined");function gl(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;const e=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?gl(n):n}),e}u(gl,"deepClone");function sZ(o){if(!o||typeof o!="object")return o;const e=[o];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(e5.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&!eZ(i)&&e.push(i)}}return o}u(sZ,"deepFreeze");const e5=Object.prototype.hasOwnProperty;function t5(o,e){return $L(o,e,new Set)}u(t5,"cloneAndChange");function $L(o,e,t){if(Ws(o))return o;const n=e(o);if(typeof n<"u")return n;if(Array.isArray(o)){const i=[];for(const s of o)i.push($L(s,e,t));return i}if(as(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);const i={};for(const s in o)e5.call(o,s)&&(i[s]=$L(o[s],e,t));return t.delete(o),i}return o}u($L,"_cloneAndChange");function bv(o,e,t=!0){return as(o)?(as(e)&&Object.keys(e).forEach(n=>{n in o?t&&(as(o[n])&&as(e[n])?bv(o[n],e[n],t):o[n]=e[n]):o[n]=e[n]}),o):e}u(bv,"mixin");function qs(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!qs(o[t],e[t]))return!1}else{const i=[];for(n in o)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!qs(i,s))return!1;for(t=0;t<i.length;t++)if(!qs(o[i[t]],e[i[t]]))return!1}return!0}u(qs,"equals");function oZ(o){let e=[],t=Object.getPrototypeOf(o);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}u(oZ,"getAllPropertyNames");function xI(o){const e=[];for(const t of oZ(o))typeof o[t]=="function"&&e.push(t);return e}u(xI,"getAllMethodNames");function rZ(o,e){const t=u(i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)},"createProxyMethod"),n={};for(const i of o)n[i]=t(i);return n}u(rZ,"createProxyObject$1");const xi={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},wc=8;class LI{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}u(LI,"ConfigurationChangedEvent");class EI{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}u(EI,"ComputeOptionsMemory");class Qt{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return F1(e,t)}compute(e,t,n){return n}}u(Qt,"BaseEditorOption");class uf{constructor(e,t){this.newValue=e,this.didChange=t}}u(uf,"ApplyUpdateResult");function F1(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new uf(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){const n=Array.isArray(o)&&Array.isArray(e)&&pi(o,e);return new uf(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=F1(o[n],e[n]);i.didChange&&(o[n]=i.newValue,t=!0)}return new uf(o,t)}u(F1,"applyUpdate");class $p{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return F1(e,t)}validate(e){return this.defaultValue}}u($p,"ComputedEditorOption");class zh{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return F1(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}u(zh,"SimpleEditorOption");function Te(o,e){return typeof o>"u"?e:o==="false"?!1:!!o}u(Te,"boolean");class rt extends zh{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Te(e,this.defaultValue)}}u(rt,"EditorBooleanOption");function qL(o,e,t,n){if(typeof o>"u")return e;let i=parseInt(o,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}u(qL,"clampedInt");class St extends zh{static clampedInt(e,t,n,i){return qL(e,t,n,i)}constructor(e,t,n,i,s,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=s),super(e,t,n,r),this.minimum=i,this.maximum=s}validate(e){return St.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}u(St,"EditorIntOption");class Dr extends zh{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,i,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}validate(e){return this.validationFn(Dr.float(e,this.defaultValue))}}u(Dr,"EditorFloatOption");class ss extends zh{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return ss.string(e,this.defaultValue)}}u(ss,"EditorStringOption");function Tn(o,e,t){return typeof o!="string"||t.indexOf(o)===-1?e:o}u(Tn,"stringSet");class ln extends zh{constructor(e,t,n,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return Tn(e,this.defaultValue,this._allowedValues)}}u(ln,"EditorStringEnumOption");class Ym extends Qt{constructor(e,t,n,i,s,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}u(Ym,"EditorEnumOption");function aZ(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}u(aZ,"_autoIndentFromString");class n5 extends Qt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached"),p("accessibilitySupport.on","Optimize for usage with a Screen Reader"),p("accessibilitySupport.off","Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:p("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}u(n5,"EditorAccessibilitySupport");class i5 extends Qt{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(21,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Te(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Te(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}u(i5,"EditorComments");function lZ(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}u(lZ,"_cursorBlinkingStyleFromString");var ti;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(ti||(ti={}));function cZ(o){switch(o){case"line":return ti.Line;case"block":return ti.Block;case"underline":return ti.Underline;case"line-thin":return ti.LineThin;case"block-outline":return ti.BlockOutline;case"underline-thin":return ti.UnderlineThin}}u(cZ,"_cursorStyleFromString");class s5 extends $p{constructor(){super(136)}compute(e,t,n){const i=["monaco-editor"];return t.get(37)&&i.push(t.get(37)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(71)==="default"?i.push("mouse-default"):t.get(71)==="copy"&&i.push("mouse-copy"),t.get(106)&&i.push("showUnused"),t.get(134)&&i.push("showDeprecated"),i.join(" ")}}u(s5,"EditorClassName");class o5 extends rt{constructor(){super(35,"emptySelectionClipboard",!0,{description:p("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}u(o5,"EditorEmptySelectionClipboard");class r5 extends Qt{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(39,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Ye},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:p("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Te(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Tn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Tn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Te(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Te(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Te(t.loop,this.defaultValue.loop)}}}u(r5,"EditorFind");class vs extends Qt{constructor(){super(49,"fontLigatures",vs.OFF,{anyOf:[{type:"boolean",description:p("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?vs.OFF:e==="true"?vs.ON:e:e?vs.ON:vs.OFF}}u(vs,"EditorFontLigatures");vs.OFF='"liga" off, "calt" off';vs.ON='"liga" on, "calt" on';class zo extends Qt{constructor(){super(52,"fontVariations",zo.OFF,{anyOf:[{type:"boolean",description:p("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:p("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:p("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?zo.OFF:e==="true"?zo.TRANSLATE:e:e?zo.TRANSLATE:zo.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}}u(zo,"EditorFontVariations");zo.OFF="normal";zo.TRANSLATE="translate";class a5 extends $p{constructor(){super(48)}compute(e,t,n){return e.fontInfo}}u(a5,"EditorFontInfo");class l5 extends zh{constructor(){super(50,"fontSize",xs.fontSize,{type:"number",minimum:6,maximum:100,default:xs.fontSize,description:p("fontSize","Controls the font size in pixels.")})}validate(e){const t=Dr.float(e,this.defaultValue);return t===0?xs.fontSize:Dr.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}u(l5,"EditorFontSize");class wr extends Qt{constructor(){super(51,"fontWeight",xs.fontWeight,{anyOf:[{type:"number",minimum:wr.MINIMUM_VALUE,maximum:wr.MAXIMUM_VALUE,errorMessage:p("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:wr.SUGGESTION_VALUES}],default:xs.fontWeight,description:p("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(St.clampedInt(e,xs.fontWeight,wr.MINIMUM_VALUE,wr.MAXIMUM_VALUE))}}u(wr,"EditorFontWeight");wr.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];wr.MINIMUM_VALUE=1;wr.MAXIMUM_VALUE=1e3;class c5 extends Qt{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),p("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),p("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(56,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:p("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:p("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:p("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:p("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:p("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:p("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:p("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:p("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Tn(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Tn(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Tn(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:Tn(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:Tn(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:Tn(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ss.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ss.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ss.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ss.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ss.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}u(c5,"EditorGoToLocation");class d5 extends Qt{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(58,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:p("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),delay:St.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Te(t.sticky,this.defaultValue.sticky),above:Te(t.above,this.defaultValue.above)}}}u(d5,"EditorHover");class Iu extends $p{constructor(){super(139)}compute(e,t,n){return Iu.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));const s=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let g=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,m=e.minimap.size,b=e.minimap.side,_=e.verticalScrollbarWidth,C=e.viewLineCount,v=e.remainingWidth,y=e.isViewportWrapping,w=h?2:3;let x=Math.floor(s*i);const M=x/s;let L=!1,E=!1,k=w*g,O=g/s,P=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:Ge,extraLinesBeforeFirstLine:ke,extraLinesBeyondLastLine:et,desiredRatio:Je,minimapLineCount:be}=Iu.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:s});if(C/be>1)L=!0,E=!0,g=1,k=1,O=g/s;else{let kt=!1,As=g+1;if(m==="fit"){const Yn=Math.ceil((ke+C+et)*k);y&&a&&v<=t.stableFitRemainingWidth?(kt=!0,As=t.stableFitMaxMinimapScale):kt=Yn>x}if(m==="fill"||kt){L=!0;const Yn=g;k=Math.min(l*s,Math.max(1,Math.floor(1/Je))),y&&a&&v<=t.stableFitRemainingWidth&&(As=t.stableFitMaxMinimapScale),g=Math.min(As,Math.max(1,Math.floor(k/w))),g>Yn&&(P=Math.min(2,g/Yn)),O=g/s/P,x=Math.ceil(Math.max(Ge,ke+C+et)*k),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const H=Math.floor(f*O),G=Math.min(H,Math.max(0,Math.floor((v-_-2)*O/(c+O)))+wc);let se=Math.floor(s*G);const fe=se/s;se=Math.floor(se*P);const Le=h?1:2,Fe=b==="left"?0:n-G-_;return{renderMinimap:Le,minimapLeft:Fe,minimapWidth:G,minimapHeightIsEditorHeight:L,minimapIsSampling:E,minimapScale:g,minimapLineHeight:k,minimapCanvasInnerWidth:se,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:fe,minimapCanvasOuterHeight:M}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(131),g=h==="inherit"?e.get(130):h,f=g==="inherit"?e.get(126):g,m=e.get(129),b=t.isDominatedByLongLines,_=e.get(55),C=e.get(65).renderType!==0,v=e.get(66),y=e.get(100),w=e.get(81),x=e.get(70),M=e.get(98),L=M.verticalScrollbarSize,E=M.verticalHasArrows,k=M.arrowSize,O=M.horizontalScrollbarSize,P=e.get(41),H=e.get(105)!=="never";let G=e.get(63);P&&H&&(G+=16);let se=0;if(C){const hc=Math.max(r,v);se=Math.round(hc*l)}let fe=0;_&&(fe=s);let Le=0,Fe=Le+fe,Ge=Fe+se,ke=Ge+G;const et=n-fe-se-G;let Je=!1,be=!1,we=-1;g==="inherit"&&b?(Je=!0,be=!0):f==="on"||f==="bounded"?be=!0:f==="wordWrapColumn"&&(we=m);const kt=Iu._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,paddingTop:w.top,paddingBottom:w.bottom,minimap:x,verticalScrollbarWidth:L,viewLineCount:d,remainingWidth:et,isViewportWrapping:be},t.memory||new EI);kt.renderMinimap!==0&&kt.minimapLeft===0&&(Le+=kt.minimapWidth,Fe+=kt.minimapWidth,Ge+=kt.minimapWidth,ke+=kt.minimapWidth);const As=et-kt.minimapWidth,Yn=Math.max(1,Math.floor((As-L-2)/a)),lr=E?k:0;return be&&(we=Math.max(1,Yn),f==="bounded"&&(we=Math.min(we,m))),{width:n,height:i,glyphMarginLeft:Le,glyphMarginWidth:fe,lineNumbersLeft:Fe,lineNumbersWidth:se,decorationsLeft:Ge,decorationsWidth:G,contentLeft:ke,contentWidth:As,minimap:kt,viewportColumn:Yn,isWordWrapMinified:Je,isViewportWrapping:be,wrappingColumn:we,verticalScrollbarWidth:L,horizontalScrollbarHeight:O,overviewRuler:{top:lr,width:L,height:i-2*lr,right:0}}}}u(Iu,"EditorLayoutInfoComputer");class u5 extends Qt{constructor(){super(133,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:p("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Tn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}}u(u5,"WrappingStrategy");class h5 extends Qt{constructor(){const e={enabled:!0};super(62,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:p("codeActions","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}u(h5,"EditorLightbulb");class g5 extends Qt{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel"};super(110,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:p("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),maxLineCount:St.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:Tn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"])}}}u(g5,"EditorStickyScroll");class f5 extends Qt{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(135,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p("editor.inlayHints.on","Inlay hints are enabled"),p("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Ye?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Ye?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Tn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:St.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ss.string(t.fontFamily,this.defaultValue.fontFamily),padding:Te(t.padding,this.defaultValue.padding)}}}u(f5,"EditorInlayHints");class p5 extends Qt{constructor(){super(63,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):St.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?St.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}u(p5,"EditorLineDecorationsWidth");class m5 extends Dr{constructor(){super(64,"lineHeight",xs.lineHeight,e=>Dr.clamp(e,0,150),{markdownDescription:p("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}u(m5,"EditorLineHeight");class b5 extends Qt{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(70,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:p("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),autohide:Te(t.autohide,this.defaultValue.autohide),size:Tn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Tn(t.side,this.defaultValue.side,["right","left"]),showSlider:Tn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Te(t.renderCharacters,this.defaultValue.renderCharacters),scale:St.clampedInt(t.scale,1,1,3),maxColumn:St.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}u(b5,"EditorMinimap");function dZ(o){return o==="ctrlCmd"?Ye?"metaKey":"ctrlKey":"altKey"}u(dZ,"_multiCursorModifierFromString");class _5 extends Qt{constructor(){super(81,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:St.clampedInt(t.top,0,0,1e3),bottom:St.clampedInt(t.bottom,0,0,1e3)}}}u(_5,"EditorPadding");class v5 extends Qt{constructor(){const e={enabled:!0,cycle:!0};super(82,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),cycle:Te(t.cycle,this.defaultValue.cycle)}}}u(v5,"EditorParameterHints");class C5 extends $p{constructor(){super(137)}compute(e,t,n){return e.pixelRatio}}u(C5,"EditorPixelRatio");class y5 extends Qt{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p("on","Quick suggestions show inside the suggest widget"),p("inline","Quick suggestions show as ghost text"),p("off","Quick suggestions are disabled")]}];super(85,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:p("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:p("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:p("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:i}=e,s=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=Tn(t,this.defaultValue.other,s),typeof n=="boolean"?a=n?"on":"off":a=Tn(n,this.defaultValue.comments,s),typeof i=="boolean"?l=i?"on":"off":l=Tn(i,this.defaultValue.strings,s),{other:r,comments:a,strings:l}}}u(y5,"EditorQuickSuggestions");class w5 extends Qt{constructor(){super(65,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p("lineNumbers.off","Line numbers are not rendered."),p("lineNumbers.on","Line numbers are rendered as absolute number."),p("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}u(w5,"EditorRenderLineNumbersOption");function Jy(o){const e=o.get(93);return e==="editable"?o.get(87):e!=="on"}u(Jy,"filterValidationDecorations");class S5 extends Qt{constructor(){const e=[],t={type:"number",description:p("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(97,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:p("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:St.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:St.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}u(S5,"EditorRulers");function xP(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}u(xP,"_scrollbarVisibilityFromString");let uZ=u(class extends Qt{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(98,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=St.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=St.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:St.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:xP(t.vertical,this.defaultValue.vertical),horizontal:xP(t.horizontal,this.defaultValue.horizontal),useShadows:Te(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Te(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Te(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Te(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Te(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:St.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:St.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Te(t.scrollByPage,this.defaultValue.scrollByPage)}}},"EditorScrollbar");const Fs="inUntrustedWorkspace",os={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class T5 extends Qt{constructor(){const e={nonBasicASCII:Fs,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Fs,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(120,"unicodeHighlight",e,{[os.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Fs],default:e.nonBasicASCII,description:p("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[os.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[os.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[os.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Fs],default:e.includeComments,description:p("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[os.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Fs],default:e.includeStrings,description:p("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[os.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[os.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(qs(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(qs(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const i=super.applyUpdate(e,t);return n?new uf(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:hf(t.nonBasicASCII,Fs,[!0,!1,Fs]),invisibleCharacters:Te(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Te(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:hf(t.includeComments,Fs,[!0,!1,Fs]),includeStrings:hf(t.includeStrings,Fs,[!0,!1,Fs]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,s]of Object.entries(e))s===!0&&(n[i]=!0);return n}}u(T5,"UnicodeHighlight");class x5 extends Qt{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1};super(60,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover"],enumDescriptions:[p("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),p("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:p("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),mode:Tn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Tn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:Te(t.suppressSuggestions,this.defaultValue.suppressSuggestions)}}}u(x5,"InlineEditorSuggest");class L5 extends Qt{constructor(){const e={enabled:xi.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:xi.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(13,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Te(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}u(L5,"BracketPairColorization");class E5 extends Qt{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(14,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairs.true","Enables bracket pair guides."),p("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:p("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:p("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),p("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),p("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:p("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:hf(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:hf(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Te(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Te(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:hf(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}u(E5,"GuideOptions");function hf(o,e,t){const n=t.indexOf(o);return n===-1?e:t[n]}u(hf,"primitiveSet");class k5 extends Qt{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(113,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:p("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),p("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:p("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Tn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Te(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Te(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Te(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Te(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Tn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Te(t.showIcons,this.defaultValue.showIcons),showStatusBar:Te(t.showStatusBar,this.defaultValue.showStatusBar),preview:Te(t.preview,this.defaultValue.preview),previewMode:Tn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Te(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Te(t.showMethods,this.defaultValue.showMethods),showFunctions:Te(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Te(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Te(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Te(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Te(t.showFields,this.defaultValue.showFields),showVariables:Te(t.showVariables,this.defaultValue.showVariables),showClasses:Te(t.showClasses,this.defaultValue.showClasses),showStructs:Te(t.showStructs,this.defaultValue.showStructs),showInterfaces:Te(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Te(t.showModules,this.defaultValue.showModules),showProperties:Te(t.showProperties,this.defaultValue.showProperties),showEvents:Te(t.showEvents,this.defaultValue.showEvents),showOperators:Te(t.showOperators,this.defaultValue.showOperators),showUnits:Te(t.showUnits,this.defaultValue.showUnits),showValues:Te(t.showValues,this.defaultValue.showValues),showConstants:Te(t.showConstants,this.defaultValue.showConstants),showEnums:Te(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Te(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Te(t.showKeywords,this.defaultValue.showKeywords),showWords:Te(t.showWords,this.defaultValue.showWords),showColors:Te(t.showColors,this.defaultValue.showColors),showFiles:Te(t.showFiles,this.defaultValue.showFiles),showReferences:Te(t.showReferences,this.defaultValue.showReferences),showFolders:Te(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Te(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Te(t.showSnippets,this.defaultValue.showSnippets),showUsers:Te(t.showUsers,this.defaultValue.showUsers),showIssues:Te(t.showIssues,this.defaultValue.showIssues)}}}u(k5,"EditorSuggest");class D5 extends Qt{constructor(){super(108,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Te(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}u(D5,"SmartSelect");class M5 extends Qt{constructor(){super(132,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}}u(M5,"WrappingIndentOption");class A5 extends $p{constructor(){super(140)}compute(e,t,n){const i=t.get(139);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}u(A5,"EditorWrappingInfoComputer");class I5 extends Qt{constructor(){const e={enabled:!0};super(34,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}u(I5,"EditorDropIntoEditor");const hZ="Consolas, 'Courier New', monospace",gZ="Menlo, Monaco, 'Courier New', monospace",fZ="'Droid Sans Mono', 'monospace', monospace",xs={fontFamily:Ye?gZ:bi?fZ:hZ,fontWeight:"normal",fontSize:Ye?12:14,lineHeight:0,letterSpacing:0},jg=[];function ne(o){return jg[o.id]=o,o}u(ne,"register$2");const qr={acceptSuggestionOnCommitCharacter:ne(new rt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ne(new ln(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ne(new n5),accessibilityPageSize:ne(new St(3,"accessibilityPageSize",10,1,1073741824,{description:p("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:ne(new ss(4,"ariaLabel",p("editorViewAccessibleLabel","Editor content"))),screenReaderAnnounceInlineSuggestion:ne(new rt(6,"screenReaderAnnounceInlineSuggestion",!1,{description:p("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader. Note that this does not work on macOS with VoiceOver."),tags:["accessibility"]})),autoClosingBrackets:ne(new ln(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:ne(new ln(7,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ne(new ln(8,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ne(new ln(9,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ne(new Ym(10,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],aZ,{enumDescriptions:[p("editor.autoIndent.none","The editor will not insert indentation automatically."),p("editor.autoIndent.keep","The editor will keep the current line's indentation."),p("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ne(new rt(11,"automaticLayout",!1)),autoSurround:ne(new ln(12,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p("editor.autoSurround.quotes","Surround with quotes but not brackets."),p("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ne(new L5),bracketPairGuides:ne(new E5),stickyTabStops:ne(new rt(111,"stickyTabStops",!1,{description:p("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ne(new rt(15,"codeLens",!0,{description:p("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ne(new ss(16,"codeLensFontFamily","",{description:p("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ne(new St(17,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ne(new rt(18,"colorDecorators",!0,{description:p("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorsLimit:ne(new St(19,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:ne(new rt(20,"columnSelection",!1,{description:p("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ne(new i5),contextmenu:ne(new rt(22,"contextmenu",!0)),copyWithSyntaxHighlighting:ne(new rt(23,"copyWithSyntaxHighlighting",!0,{description:p("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ne(new Ym(24,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],lZ,{description:p("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ne(new ln(25,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),p("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),p("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:p("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ne(new Ym(26,"cursorStyle",ti.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],cZ,{description:p("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ne(new St(27,"cursorSurroundingLines",0,0,1073741824,{description:p("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ne(new ln(28,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:p("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:ne(new St(29,"cursorWidth",0,0,1073741824,{markdownDescription:p("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ne(new rt(30,"disableLayerHinting",!1)),disableMonospaceOptimizations:ne(new rt(31,"disableMonospaceOptimizations",!1)),domReadOnly:ne(new rt(32,"domReadOnly",!1)),dragAndDrop:ne(new rt(33,"dragAndDrop",!0,{description:p("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ne(new o5),dropIntoEditor:ne(new I5),stickyScroll:ne(new g5),experimentalWhitespaceRendering:ne(new ln(36,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),p("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),p("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:p("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:ne(new ss(37,"extraEditorClassName","")),fastScrollSensitivity:ne(new Dr(38,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:p("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ne(new r5),fixedOverflowWidgets:ne(new rt(40,"fixedOverflowWidgets",!1)),folding:ne(new rt(41,"folding",!0,{description:p("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ne(new ln(42,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ne(new rt(43,"foldingHighlight",!0,{description:p("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ne(new rt(44,"foldingImportsByDefault",!1,{description:p("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ne(new St(45,"foldingMaximumRegions",5e3,10,65e3,{description:p("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ne(new rt(46,"unfoldOnClickAfterEndOfLine",!1,{description:p("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ne(new ss(47,"fontFamily",xs.fontFamily,{description:p("fontFamily","Controls the font family.")})),fontInfo:ne(new a5),fontLigatures2:ne(new vs),fontSize:ne(new l5),fontWeight:ne(new wr),fontVariations:ne(new zo),formatOnPaste:ne(new rt(53,"formatOnPaste",!1,{description:p("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ne(new rt(54,"formatOnType",!1,{description:p("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ne(new rt(55,"glyphMargin",!0,{description:p("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ne(new c5),hideCursorInOverviewRuler:ne(new rt(57,"hideCursorInOverviewRuler",!1,{description:p("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ne(new d5),inDiffEditor:ne(new rt(59,"inDiffEditor",!1)),letterSpacing:ne(new Dr(61,"letterSpacing",xs.letterSpacing,o=>Dr.clamp(o,-5,20),{description:p("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ne(new h5),lineDecorationsWidth:ne(new p5),lineHeight:ne(new m5),lineNumbers:ne(new w5),lineNumbersMinChars:ne(new St(66,"lineNumbersMinChars",5,1,300)),linkedEditing:ne(new rt(67,"linkedEditing",!1,{description:p("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:ne(new rt(68,"links",!0,{description:p("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ne(new ln(69,"matchBrackets","always",["always","near","never"],{description:p("matchBrackets","Highlight matching brackets.")})),minimap:ne(new b5),mouseStyle:ne(new ln(71,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ne(new Dr(72,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:p("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ne(new rt(73,"mouseWheelZoom",!1,{markdownDescription:p("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ne(new rt(74,"multiCursorMergeOverlapping",!0,{description:p("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ne(new Ym(75,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],dZ,{markdownEnumDescriptions:[p("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ne(new ln(76,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:ne(new St(77,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:ne(new rt(78,"occurrencesHighlight",!0,{description:p("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:ne(new rt(79,"overviewRulerBorder",!0,{description:p("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ne(new St(80,"overviewRulerLanes",3,0,3)),padding:ne(new _5),parameterHints:ne(new v5),peekWidgetDefaultFocus:ne(new ln(83,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:ne(new rt(84,"definitionLinkOpensInPeek",!1,{description:p("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ne(new y5),quickSuggestionsDelay:ne(new St(86,"quickSuggestionsDelay",10,0,1073741824,{description:p("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ne(new rt(87,"readOnly",!1)),renameOnType:ne(new rt(88,"renameOnType",!1,{description:p("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ne(new rt(89,"renderControlCharacters",!0,{description:p("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ne(new ln(90,"renderFinalNewline",bi?"dimmed":"on",["off","on","dimmed"],{description:p("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ne(new ln(91,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ne(new rt(92,"renderLineHighlightOnlyWhenFocus",!1,{description:p("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ne(new ln(93,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ne(new ln(94,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p("renderWhitespace.selection","Render whitespace characters only on selected text."),p("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ne(new St(95,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:ne(new rt(96,"roundedSelection",!0,{description:p("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ne(new S5),scrollbar:ne(new uZ),scrollBeyondLastColumn:ne(new St(99,"scrollBeyondLastColumn",4,0,1073741824,{description:p("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ne(new rt(100,"scrollBeyondLastLine",!0,{description:p("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ne(new rt(101,"scrollPredominantAxis",!0,{description:p("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ne(new rt(102,"selectionClipboard",!0,{description:p("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:bi})),selectionHighlight:ne(new rt(103,"selectionHighlight",!0,{description:p("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ne(new rt(104,"selectOnLineNumbers",!0)),showFoldingControls:ne(new ln(105,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p("showFoldingControls.always","Always show the folding controls."),p("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),p("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ne(new rt(106,"showUnused",!0,{description:p("showUnused","Controls fading out of unused code.")})),showDeprecated:ne(new rt(134,"showDeprecated",!0,{description:p("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ne(new f5),snippetSuggestions:ne(new ln(107,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p("snippetSuggestions.none","Do not show snippet suggestions.")],description:p("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ne(new D5),smoothScrolling:ne(new rt(109,"smoothScrolling",!1,{description:p("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ne(new St(112,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ne(new k5),inlineSuggest:ne(new x5),suggestFontSize:ne(new St(114,"suggestFontSize",0,0,1e3,{markdownDescription:p("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:ne(new St(115,"suggestLineHeight",0,0,1e3,{markdownDescription:p("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:ne(new rt(116,"suggestOnTriggerCharacters",!0,{description:p("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ne(new ln(117,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p("suggestSelection.first","Always select the first suggestion."),p("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ne(new ln(118,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p("tabCompletion.off","Disable tab completions."),p("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p("tabCompletion","Enables tab completions.")})),tabIndex:ne(new St(119,"tabIndex",0,-1,1073741824)),unicodeHighlight:ne(new T5),unusualLineTerminators:ne(new ln(121,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p("unusualLineTerminators.off","Unusual line terminators are ignored."),p("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ne(new rt(122,"useShadowDOM",!0)),useTabStops:ne(new rt(123,"useTabStops",!0,{description:p("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:ne(new ln(124,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p("wordBreak.normal","Use the default line break rule."),p("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:p("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:ne(new ss(125,"wordSeparators",zH,{description:p("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ne(new ln(126,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ne(new ss(127,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:ne(new ss(128,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:ne(new St(129,"wordWrapColumn",80,1,1073741824,{markdownDescription:p({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ne(new ln(130,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ne(new ln(131,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:ne(new s5),pixelRatio:ne(new C5),tabFocusMode:ne(new rt(138,"tabFocusMode",!1,{markdownDescription:p("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:ne(new Iu),wrappingInfo:ne(new A5),wrappingIndent:ne(new M5),wrappingStrategy:ne(new u5)};class N5{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?nh.isErrorNoTelemetry(e)?new nh(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}u(N5,"ErrorHandler");const R5=new N5;function He(o){Yr(o)||R5.onUnexpectedError(o)}u(He,"onUnexpectedError");function $n(o){Yr(o)||R5.onUnexpectedExternalError(o)}u($n,"onUnexpectedExternalError");function LP(o){if(o instanceof Error){const{name:e,message:t}=o,n=o.stacktrace||o.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:nh.isErrorNoTelemetry(o)}}return o}u(LP,"transformErrorForSerialization");const Qy="Canceled";function Yr(o){return o instanceof ec?!0:o instanceof Error&&o.name===Qy&&o.message===Qy}u(Yr,"isCancellationError");class ec extends Error{constructor(){super(Qy),this.name=this.message}}u(ec,"CancellationError");function pZ(){const o=new Error(Qy);return o.name=o.message,o}u(pZ,"canceled");function Ys(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}u(Ys,"illegalArgument");function kI(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}u(kI,"illegalState");class P5 extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}u(P5,"NotSupportedError");class nh extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof nh)return e;const t=new nh;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}u(nh,"ErrorNoTelemetry");class Xr extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Xr.prototype);debugger}}u(Xr,"BugIndicatingError");function Ha(o){const e=this;let t=!1,n;return function(){return t||(t=!0,n=o.apply(e,arguments)),n}}u(Ha,"once$1");function DI(o){return typeof o.dispose=="function"&&o.dispose.length===0}u(DI,"isDisposable");function mt(o){if(st.is(o)){const e=[];for(const t of o)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}u(mt,"dispose");function Jo(...o){return Oe(()=>mt(o))}u(Jo,"combinedDisposable");function Oe(o){return{dispose:Ha(()=>{o()})}}u(Oe,"toDisposable");class X{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{mt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?X.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}u(X,"DisposableStore");X.DISABLE_DISPOSED_WARNING=!1;class z{constructor(){this._store=new X,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}u(z,"Disposable");z.None=Object.freeze({dispose(){}});class Fn{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}u(Fn,"MutableDisposable");class F5{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}u(F5,"RefCountedDisposable");class O5{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}}u(O5,"SafeDisposable");class H5{constructor(e){this.object=e}dispose(){}}u(H5,"ImmortalReference");class O1{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{mt(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var i;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(i=this._store.get(e))===null||i===void 0||i.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}u(O1,"DisposableMap");const mZ=Ts.performance&&typeof Ts.performance.now=="function";class ji{static create(e=!0){return new ji(e)}constructor(e){this._highResolution=mZ&&e,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Ts.performance.now():Date.now()}}u(ji,"StopWatch");var pe;(function(o){o.None=()=>z.None;function e(E,k){return d(E,()=>{},0,void 0,!0,void 0,k)}u(e,"defer"),o.defer=e;function t(E){return(k,O=null,P)=>{let H=!1,G;return G=E(se=>{if(!H)return G?G.dispose():H=!0,k.call(O,se)},null,P),H&&G.dispose(),G}}u(t,"once"),o.once=t;function n(E,k,O){return c((P,H=null,G)=>E(se=>P.call(H,k(se)),null,G),O)}u(n,"map"),o.map=n;function i(E,k,O){return c((P,H=null,G)=>E(se=>{k(se),P.call(H,se)},null,G),O)}u(i,"forEach"),o.forEach=i;function s(E,k,O){return c((P,H=null,G)=>E(se=>k(se)&&P.call(H,se),null,G),O)}u(s,"filter"),o.filter=s;function r(E){return E}u(r,"signal"),o.signal=r;function a(...E){return(k,O=null,P)=>Jo(...E.map(H=>H(G=>k.call(O,G),null,P)))}u(a,"any"),o.any=a;function l(E,k,O,P){let H=O;return n(E,G=>(H=k(H,G),H),P)}u(l,"reduce"),o.reduce=l;function c(E,k){let O;const P={onWillAddFirstListener(){O=E(H.fire,H)},onDidRemoveLastListener(){O?.dispose()}},H=new F(P);return k?.add(H),H.event}u(c,"snapshot");function d(E,k,O=100,P=!1,H=!1,G,se){let fe,Le,Fe,Ge=0,ke;const et={leakWarningThreshold:G,onWillAddFirstListener(){fe=E(be=>{Ge++,Le=k(Le,be),P&&!Fe&&(Je.fire(Le),Le=void 0),ke=u(()=>{const we=Le;Le=void 0,Fe=void 0,(!P||Ge>1)&&Je.fire(we),Ge=0},"doFire"),typeof O=="number"?(clearTimeout(Fe),Fe=setTimeout(ke,O)):Fe===void 0&&(Fe=0,queueMicrotask(ke))})},onWillRemoveListener(){H&&Ge>0&&ke?.()},onDidRemoveLastListener(){ke=void 0,fe.dispose()}},Je=new F(et);return se?.add(Je),Je.event}u(d,"debounce"),o.debounce=d;function h(E,k=0,O){return o.debounce(E,(P,H)=>P?(P.push(H),P):[H],k,void 0,!0,void 0,O)}u(h,"accumulate"),o.accumulate=h;function g(E,k=(P,H)=>P===H,O){let P=!0,H;return s(E,G=>{const se=P||!k(G,H);return P=!1,H=G,se},O)}u(g,"latch"),o.latch=g;function f(E,k,O){return[o.filter(E,k,O),o.filter(E,P=>!k(P),O)]}u(f,"split"),o.split=f;function m(E,k=!1,O=[]){let P=O.slice(),H=E(fe=>{P?P.push(fe):se.fire(fe)});const G=u(()=>{P?.forEach(fe=>se.fire(fe)),P=null},"flush"),se=new F({onWillAddFirstListener(){H||(H=E(fe=>se.fire(fe)))},onDidAddFirstListener(){P&&(k?setTimeout(G):G())},onDidRemoveLastListener(){H&&H.dispose(),H=null}});return se.event}u(m,"buffer"),o.buffer=m;class b{constructor(k){this.event=k,this.disposables=new X}map(k){return new b(n(this.event,k,this.disposables))}forEach(k){return new b(i(this.event,k,this.disposables))}filter(k){return new b(s(this.event,k,this.disposables))}reduce(k,O){return new b(l(this.event,k,O,this.disposables))}latch(){return new b(g(this.event,void 0,this.disposables))}debounce(k,O=100,P=!1,H=!1,G){return new b(d(this.event,k,O,P,H,G,this.disposables))}on(k,O,P){return this.event(k,O,P)}once(k,O,P){return t(this.event)(k,O,P)}dispose(){this.disposables.dispose()}}u(b,"ChainableEvent");function _(E){return new b(E)}u(_,"chain"),o.chain=_;function C(E,k,O=P=>P){const P=u((...fe)=>se.fire(O(...fe)),"fn"),H=u(()=>E.on(k,P),"onFirstListenerAdd"),G=u(()=>E.removeListener(k,P),"onLastListenerRemove"),se=new F({onWillAddFirstListener:H,onDidRemoveLastListener:G});return se.event}u(C,"fromNodeEventEmitter"),o.fromNodeEventEmitter=C;function v(E,k,O=P=>P){const P=u((...fe)=>se.fire(O(...fe)),"fn"),H=u(()=>E.addEventListener(k,P),"onFirstListenerAdd"),G=u(()=>E.removeEventListener(k,P),"onLastListenerRemove"),se=new F({onWillAddFirstListener:H,onDidRemoveLastListener:G});return se.event}u(v,"fromDOMEventEmitter"),o.fromDOMEventEmitter=v;function y(E){return new Promise(k=>t(E)(k))}u(y,"toPromise"),o.toPromise=y;function w(E,k){return k(void 0),E(O=>k(O))}u(w,"runAndSubscribe"),o.runAndSubscribe=w;function x(E,k){let O=null;function P(G){O?.dispose(),O=new X,k(G,O)}u(P,"run"),P(void 0);const H=E(G=>P(G));return Oe(()=>{H.dispose(),O?.dispose()})}u(x,"runAndSubscribeWithStore"),o.runAndSubscribeWithStore=x;class M{constructor(k,O){this.obs=k,this._counter=0,this._hasChanged=!1;const P={onWillAddFirstListener:()=>{k.addObserver(this)},onDidRemoveLastListener:()=>{k.removeObserver(this)}};this.emitter=new F(P),O&&O.add(this.emitter)}beginUpdate(k){this._counter++}handleChange(k,O){this._hasChanged=!0}endUpdate(k){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}u(M,"EmitterObserver");function L(E,k){return new M(E,k).emitter.event}u(L,"fromObservable"),o.fromObservable=L})(pe||(pe={}));class ih{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${ih._idPool++}`,ih.all.add(this)}start(e){this._stopWatch=new ji(!0),this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}u(ih,"EventProfiling");ih.all=new Set;ih._idPool=0;let bZ=-1;class V5{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let s,r=0;for(const[a,l]of this._stacks)(!s||r<l)&&(s=a,r=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`),console.warn(s)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}}u(V5,"LeakageMonitor");class H1{static create(){var e;return new H1((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}u(H1,"Stacktrace");class W5{constructor(e,t,n){this.callback=e,this.callbackThis=t,this.stack=n,this.subscription=new O5}invoke(e){this.callback.call(this.callbackThis,e)}}u(W5,"Listener");let F=u(class{constructor(e){var t,n,i,s,r;this._disposed=!1,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new V5((i=(n=this._options)===null||n===void 0?void 0:n.leakWarningThreshold)!==null&&i!==void 0?i:bZ):void 0,this._perfMon=!((s=this._options)===null||s===void 0)&&s._profName?new ih(this._options._profName):void 0,this._deliveryQueue=(r=this._options)===null||r===void 0?void 0:r.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(this),(n=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||n===void 0||n.call(t),(i=this._leakageMon)===null||i===void 0||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,s,r;if(this._listeners||(this._listeners=new oi),this._leakageMon&&this._listeners.size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),z.None;const a=this._listeners.isEmpty();a&&(!((i=this._options)===null||i===void 0)&&i.onWillAddFirstListener)&&this._options.onWillAddFirstListener(this);let l,c;this._leakageMon&&this._listeners.size>=Math.ceil(this._leakageMon.threshold*.2)&&(c=H1.create(),l=this._leakageMon.check(c,this._listeners.size+1));const d=new W5(e,t,c),h=this._listeners.push(d);a&&(!((s=this._options)===null||s===void 0)&&s.onDidAddFirstListener)&&this._options.onDidAddFirstListener(this),!((r=this._options)===null||r===void 0)&&r.onDidAddListener&&this._options.onDidAddListener(this,e,t);const g=d.subscription.set(()=>{var f,m;l?.(),this._disposed||((m=(f=this._options)===null||f===void 0?void 0:f.onWillRemoveListener)===null||m===void 0||m.call(f,this),h(),this._options&&this._options.onDidRemoveLastListener&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this)))});return n instanceof X?n.add(g):Array.isArray(n)&&n.push(g),g}),this._event}fire(e){var t,n,i;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new B5((t=this._options)===null||t===void 0?void 0:t.onListenerError));for(const s of this._listeners)this._deliveryQueue.push(this,s,e);(n=this._perfMon)===null||n===void 0||n.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(i=this._perfMon)===null||i===void 0||i.stop()}}hasListeners(){return this._listeners?!this._listeners.isEmpty():!1}},"Emitter");class MI{constructor(e=He){this._onListenerError=e,this._queue=new oi}get size(){return this._queue.size}push(e,t,n){this._queue.push(new U5(e,t,n))}clear(e){const t=new oi;for(const n of this._queue)n.emitter!==e&&t.push(n);this._queue=t}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(t){this._onListenerError(t)}}}}u(MI,"EventDeliveryQueue");class B5 extends MI{clear(e){this._queue.clear()}}u(B5,"PrivateEventDeliveryQueue");class U5{constructor(e,t,n){this.emitter=e,this.listener=t,this.event=n}}u(U5,"EventDeliveryQueueElement");class sh extends F{constructor(e){super(e),this._isPaused=0,this._eventQueue=new oi,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}u(sh,"PauseableEmitter");class AI extends sh{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}u(AI,"DebounceEmitter");class G5 extends F{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}u(G5,"MicrotaskEmitter");class z5{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new F({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Oe(Ha(u(()=>{this.hasListeners&&this.unhook(t);const i=this.events.indexOf(t);this.events.splice(i,1)},"dispose")))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}u(z5,"EventMultiplexer");class V1{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}u(V1,"EventBufferer");class YL{constructor(){this.listening=!1,this.inputEvent=pe.None,this.inputEventListener=z.None,this.emitter=new F({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}u(YL,"Relay");const K5=Object.freeze(function(o,e){const t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ze;(function(o){function e(t){return t===o.None||t===o.Cancelled||t instanceof Ib?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}u(e,"isCancellationToken"),o.isCancellationToken=e,o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:pe.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:K5})})(Ze||(Ze={}));class Ib{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?K5:(this._emitter||(this._emitter=new F),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}u(Ib,"MutableToken");let ci=u(class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Ib),this._token}cancel(){this._token?this._token instanceof Ib&&this._token.cancel():this._token=Ze.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof Ib&&this._token.dispose():this._token=Ze.None}},"CancellationTokenSource");class W1{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}u(W1,"KeyCodeStrMap");const ZC=new W1,XL=new W1,ZL=new W1,j5=new Array(230),_Z=Object.create(null),vZ=Object.create(null),II=[];for(let o=0;o<=193;o++)II[o]=-1;(function(){const o="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[0,1,1,"Hyper",0,o,0,o,o,o],[0,1,2,"Super",0,o,0,o,o,o],[0,1,3,"Fn",0,o,0,o,o,o],[0,1,4,"FnLock",0,o,0,o,o,o],[0,1,5,"Suspend",0,o,0,o,o,o],[0,1,6,"Resume",0,o,0,o,o,o],[0,1,7,"Turbo",0,o,0,o,o,o],[0,1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[0,1,9,"WakeUp",0,o,0,o,o,o],[31,0,10,"KeyA",31,"A",65,"VK_A",o,o],[32,0,11,"KeyB",32,"B",66,"VK_B",o,o],[33,0,12,"KeyC",33,"C",67,"VK_C",o,o],[34,0,13,"KeyD",34,"D",68,"VK_D",o,o],[35,0,14,"KeyE",35,"E",69,"VK_E",o,o],[36,0,15,"KeyF",36,"F",70,"VK_F",o,o],[37,0,16,"KeyG",37,"G",71,"VK_G",o,o],[38,0,17,"KeyH",38,"H",72,"VK_H",o,o],[39,0,18,"KeyI",39,"I",73,"VK_I",o,o],[40,0,19,"KeyJ",40,"J",74,"VK_J",o,o],[41,0,20,"KeyK",41,"K",75,"VK_K",o,o],[42,0,21,"KeyL",42,"L",76,"VK_L",o,o],[43,0,22,"KeyM",43,"M",77,"VK_M",o,o],[44,0,23,"KeyN",44,"N",78,"VK_N",o,o],[45,0,24,"KeyO",45,"O",79,"VK_O",o,o],[46,0,25,"KeyP",46,"P",80,"VK_P",o,o],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[48,0,27,"KeyR",48,"R",82,"VK_R",o,o],[49,0,28,"KeyS",49,"S",83,"VK_S",o,o],[50,0,29,"KeyT",50,"T",84,"VK_T",o,o],[51,0,30,"KeyU",51,"U",85,"VK_U",o,o],[52,0,31,"KeyV",52,"V",86,"VK_V",o,o],[53,0,32,"KeyW",53,"W",87,"VK_W",o,o],[54,0,33,"KeyX",54,"X",88,"VK_X",o,o],[55,0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[22,0,36,"Digit1",22,"1",49,"VK_1",o,o],[23,0,37,"Digit2",23,"2",50,"VK_2",o,o],[24,0,38,"Digit3",24,"3",51,"VK_3",o,o],[25,0,39,"Digit4",25,"4",52,"VK_4",o,o],[26,0,40,"Digit5",26,"5",53,"VK_5",o,o],[27,0,41,"Digit6",27,"6",54,"VK_6",o,o],[28,0,42,"Digit7",28,"7",55,"VK_7",o,o],[29,0,43,"Digit8",29,"8",56,"VK_8",o,o],[30,0,44,"Digit9",30,"9",57,"VK_9",o,o],[21,0,45,"Digit0",21,"0",48,"VK_0",o,o],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[10,1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,o,0,o,o,o],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[59,1,64,"F1",59,"F1",112,"VK_F1",o,o],[60,1,65,"F2",60,"F2",113,"VK_F2",o,o],[61,1,66,"F3",61,"F3",114,"VK_F3",o,o],[62,1,67,"F4",62,"F4",115,"VK_F4",o,o],[63,1,68,"F5",63,"F5",116,"VK_F5",o,o],[64,1,69,"F6",64,"F6",117,"VK_F6",o,o],[65,1,70,"F7",65,"F7",118,"VK_F7",o,o],[66,1,71,"F8",66,"F8",119,"VK_F8",o,o],[67,1,72,"F9",67,"F9",120,"VK_F9",o,o],[68,1,73,"F10",68,"F10",121,"VK_F10",o,o],[69,1,74,"F11",69,"F11",122,"VK_F11",o,o],[70,1,75,"F12",70,"F12",123,"VK_F12",o,o],[0,1,76,"PrintScreen",0,o,0,o,o,o],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",o,o],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[14,1,80,"Home",14,"Home",36,"VK_HOME",o,o],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[13,1,83,"End",13,"End",35,"VK_END",o,o],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",o,o],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",o,o],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",o,o],[3,1,94,"NumpadEnter",3,o,0,o,o,o],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",o,o],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",o,o],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",o,o],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",o,o],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",o,o],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",o,o],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",o,o],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",o,o],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",o,o],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",o,o],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",o,o],[58,1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[0,1,108,"Power",0,o,0,o,o,o],[0,1,109,"NumpadEqual",0,o,0,o,o,o],[71,1,110,"F13",71,"F13",124,"VK_F13",o,o],[72,1,111,"F14",72,"F14",125,"VK_F14",o,o],[73,1,112,"F15",73,"F15",126,"VK_F15",o,o],[74,1,113,"F16",74,"F16",127,"VK_F16",o,o],[75,1,114,"F17",75,"F17",128,"VK_F17",o,o],[76,1,115,"F18",76,"F18",129,"VK_F18",o,o],[77,1,116,"F19",77,"F19",130,"VK_F19",o,o],[0,1,117,"F20",0,o,0,"VK_F20",o,o],[0,1,118,"F21",0,o,0,"VK_F21",o,o],[0,1,119,"F22",0,o,0,"VK_F22",o,o],[0,1,120,"F23",0,o,0,"VK_F23",o,o],[0,1,121,"F24",0,o,0,"VK_F24",o,o],[0,1,122,"Open",0,o,0,o,o,o],[0,1,123,"Help",0,o,0,o,o,o],[0,1,124,"Select",0,o,0,o,o,o],[0,1,125,"Again",0,o,0,o,o,o],[0,1,126,"Undo",0,o,0,o,o,o],[0,1,127,"Cut",0,o,0,o,o,o],[0,1,128,"Copy",0,o,0,o,o,o],[0,1,129,"Paste",0,o,0,o,o,o],[0,1,130,"Find",0,o,0,o,o,o],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",o,o],[0,1,136,"KanaMode",0,o,0,o,o,o],[0,0,137,"IntlYen",0,o,0,o,o,o],[0,1,138,"Convert",0,o,0,o,o,o],[0,1,139,"NonConvert",0,o,0,o,o,o],[0,1,140,"Lang1",0,o,0,o,o,o],[0,1,141,"Lang2",0,o,0,o,o,o],[0,1,142,"Lang3",0,o,0,o,o,o],[0,1,143,"Lang4",0,o,0,o,o,o],[0,1,144,"Lang5",0,o,0,o,o,o],[0,1,145,"Abort",0,o,0,o,o,o],[0,1,146,"Props",0,o,0,o,o,o],[0,1,147,"NumpadParenLeft",0,o,0,o,o,o],[0,1,148,"NumpadParenRight",0,o,0,o,o,o],[0,1,149,"NumpadBackspace",0,o,0,o,o,o],[0,1,150,"NumpadMemoryStore",0,o,0,o,o,o],[0,1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[0,1,152,"NumpadMemoryClear",0,o,0,o,o,o],[0,1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[0,1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",o,o],[0,1,156,"NumpadClearEntry",0,o,0,o,o,o],[5,1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[4,1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[6,1,0,o,6,"Alt",18,"VK_MENU",o,o],[57,1,0,o,57,"Meta",91,"VK_COMMAND",o,o],[5,1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[4,1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[6,1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[57,1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[5,1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[4,1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[6,1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[57,1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[0,1,165,"BrightnessUp",0,o,0,o,o,o],[0,1,166,"BrightnessDown",0,o,0,o,o,o],[0,1,167,"MediaPlay",0,o,0,o,o,o],[0,1,168,"MediaRecord",0,o,0,o,o,o],[0,1,169,"MediaFastForward",0,o,0,o,o,o],[0,1,170,"MediaRewind",0,o,0,o,o,o],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",o,o],[0,1,174,"Eject",0,o,0,o,o,o],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[0,1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[0,1,180,"SelectTask",0,o,0,o,o,o],[0,1,181,"LaunchScreenSaver",0,o,0,o,o,o],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[0,1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[0,1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[0,1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[0,1,189,"ZoomToggle",0,o,0,o,o,o],[0,1,190,"MailReply",0,o,0,o,o,o],[0,1,191,"MailForward",0,o,0,o,o,o],[0,1,192,"MailSend",0,o,0,o,o,o],[109,1,0,o,109,"KeyInComposition",229,o,o,o],[111,1,0,o,111,"ABNT_C2",194,"VK_ABNT_C2",o,o],[91,1,0,o,91,"OEM_8",223,"VK_OEM_8",o,o],[0,1,0,o,0,o,0,"VK_KANA",o,o],[0,1,0,o,0,o,0,"VK_HANGUL",o,o],[0,1,0,o,0,o,0,"VK_JUNJA",o,o],[0,1,0,o,0,o,0,"VK_FINAL",o,o],[0,1,0,o,0,o,0,"VK_HANJA",o,o],[0,1,0,o,0,o,0,"VK_KANJI",o,o],[0,1,0,o,0,o,0,"VK_CONVERT",o,o],[0,1,0,o,0,o,0,"VK_NONCONVERT",o,o],[0,1,0,o,0,o,0,"VK_ACCEPT",o,o],[0,1,0,o,0,o,0,"VK_MODECHANGE",o,o],[0,1,0,o,0,o,0,"VK_SELECT",o,o],[0,1,0,o,0,o,0,"VK_PRINT",o,o],[0,1,0,o,0,o,0,"VK_EXECUTE",o,o],[0,1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[0,1,0,o,0,o,0,"VK_HELP",o,o],[0,1,0,o,0,o,0,"VK_APPS",o,o],[0,1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[0,1,0,o,0,o,0,"VK_PACKET",o,o],[0,1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[0,1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[0,1,0,o,0,o,0,"VK_ATTN",o,o],[0,1,0,o,0,o,0,"VK_CRSEL",o,o],[0,1,0,o,0,o,0,"VK_EXSEL",o,o],[0,1,0,o,0,o,0,"VK_EREOF",o,o],[0,1,0,o,0,o,0,"VK_PLAY",o,o],[0,1,0,o,0,o,0,"VK_ZOOM",o,o],[0,1,0,o,0,o,0,"VK_NONAME",o,o],[0,1,0,o,0,o,0,"VK_PA1",o,o],[0,1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],n=[];for(const i of e){const[s,r,a,l,c,d,h,g,f,m]=i;if(n[a]||(n[a]=!0,_Z[l]=a,vZ[l.toLowerCase()]=a,r&&(II[a]=c)),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);ZC.define(c,d),XL.define(c,f||d),ZL.define(c,m||f||d)}h&&(j5[h]=c)}})();var bl;(function(o){function e(a){return ZC.keyCodeToStr(a)}u(e,"toString"),o.toString=e;function t(a){return ZC.strToKeyCode(a)}u(t,"fromString"),o.fromString=t;function n(a){return XL.keyCodeToStr(a)}u(n,"toUserSettingsUS"),o.toUserSettingsUS=n;function i(a){return ZL.keyCodeToStr(a)}u(i,"toUserSettingsGeneral"),o.toUserSettingsGeneral=i;function s(a){return XL.strToKeyCode(a)||ZL.strToKeyCode(a)}u(s,"fromUserSettings"),o.fromUserSettings=s;function r(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ZC.keyCodeToStr(a)}u(r,"toElectronAccelerator"),o.toElectronAccelerator=r})(bl||(bl={}));function Dn(o,e){const t=(e&65535)<<16>>>0;return(o|t)>>>0}u(Dn,"KeyChord");let gf;if(typeof Ts.vscode<"u"&&typeof Ts.vscode.process<"u"){const o=Ts.vscode.process;gf={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"?gf={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:gf={get platform(){return li?"win32":Ye?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const ew=gf.cwd,CZ=gf.env,yZ=gf.platform,wZ=65,SZ=97,TZ=90,xZ=122,zc=46,Ai=47,Ps=92,mc=58,LZ=63;class NI extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${s} ${i} of type ${t}`;r+=`. Received type ${typeof n}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}u(NI,"ErrorInvalidArgType");function EZ(o,e){if(o===null||typeof o!="object")throw new NI(e,"Object",o)}u(EZ,"validateObject");function Bn(o,e){if(typeof o!="string")throw new NI(e,"string",o)}u(Bn,"validateString");const Ed=yZ==="win32";function _t(o){return o===Ai||o===Ps}u(_t,"isPathSeparator$1");function JL(o){return o===Ai}u(JL,"isPosixPathSeparator");function bc(o){return o>=wZ&&o<=TZ||o>=SZ&&o<=xZ}u(bc,"isWindowsDeviceRoot");function tw(o,e,t,n){let i="",s=0,r=-1,a=0,l=0;for(let c=0;c<=o.length;++c){if(c<o.length)l=o.charCodeAt(c);else{if(n(l))break;l=Ai}if(n(l)){if(!(r===c-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==zc||i.charCodeAt(i.length-2)!==zc){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",s=0):(i=i.slice(0,d),s=i.length-1-i.lastIndexOf(t)),r=c,a=0;continue}else if(i.length!==0){i="",s=0,r=c,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${o.slice(r+1,c)}`:i=o.slice(r+1,c),s=c-r-1;r=c,a=0}else l===zc&&a!==-1?++a:a=-1}return i}u(tw,"normalizeString");function $5(o,e){EZ(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${o}${n}`:n}u($5,"_format");const Ss={resolve(...o){let e="",t="",n=!1;for(let i=o.length-1;i>=-1;i--){let s;if(i>=0){if(s=o[i],Bn(s,"path"),s.length===0)continue}else e.length===0?s=ew():(s=CZ[`=${e}`]||ew(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Ps)&&(s=`${e}\\`));const r=s.length;let a=0,l="",c=!1;const d=s.charCodeAt(0);if(r===1)_t(d)&&(a=1,c=!0);else if(_t(d))if(c=!0,_t(s.charCodeAt(1))){let h=2,g=h;for(;h<r&&!_t(s.charCodeAt(h));)h++;if(h<r&&h!==g){const f=s.slice(g,h);for(g=h;h<r&&_t(s.charCodeAt(h));)h++;if(h<r&&h!==g){for(g=h;h<r&&!_t(s.charCodeAt(h));)h++;(h===r||h!==g)&&(l=`\\\\${f}\\${s.slice(g,h)}`,a=h)}}}else a=1;else bc(d)&&s.charCodeAt(1)===mc&&(l=s.slice(0,2),a=2,r>2&&_t(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=tw(t,!n,"\\",_t),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){Bn(o,"path");const e=o.length;if(e===0)return".";let t=0,n,i=!1;const s=o.charCodeAt(0);if(e===1)return JL(s)?"\\":o;if(_t(s))if(i=!0,_t(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_t(o.charCodeAt(a));)a++;if(a<e&&a!==l){const c=o.slice(l,a);for(l=a;a<e&&_t(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_t(o.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${o.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${o.slice(l,a)}`,t=a)}}}else t=1;else bc(s)&&o.charCodeAt(1)===mc&&(n=o.slice(0,2),t=2,e>2&&_t(o.charCodeAt(2))&&(i=!0,t=3));let r=t<e?tw(o.slice(t),!i,"\\",_t):"";return r.length===0&&!i&&(r="."),r.length>0&&_t(o.charCodeAt(e-1))&&(r+="\\"),n===void 0?i?`\\${r}`:r:i?`${n}\\${r}`:`${n}${r}`},isAbsolute(o){Bn(o,"path");const e=o.length;if(e===0)return!1;const t=o.charCodeAt(0);return _t(t)||e>2&&bc(t)&&o.charCodeAt(1)===mc&&_t(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let s=0;s<o.length;++s){const r=o[s];Bn(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&_t(t.charCodeAt(0))){++i;const s=t.length;s>1&&_t(t.charCodeAt(1))&&(++i,s>2&&(_t(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&_t(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Ss.normalize(e)},relative(o,e){if(Bn(o,"from"),Bn(e,"to"),o===e)return"";const t=Ss.resolve(o),n=Ss.resolve(e);if(t===n||(o=t.toLowerCase(),e=n.toLowerCase(),o===e))return"";let i=0;for(;i<o.length&&o.charCodeAt(i)===Ps;)i++;let s=o.length;for(;s-1>i&&o.charCodeAt(s-1)===Ps;)s--;const r=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===Ps;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Ps;)l--;const c=l-a,d=r<c?r:c;let h=-1,g=0;for(;g<d;g++){const m=o.charCodeAt(i+g);if(m!==e.charCodeAt(a+g))break;m===Ps&&(h=g)}if(g!==d){if(h===-1)return n}else{if(c>d){if(e.charCodeAt(a+g)===Ps)return n.slice(a+g+1);if(g===2)return n.slice(a+g)}r>d&&(o.charCodeAt(i+g)===Ps?h=g:g===2&&(h=3)),h===-1&&(h=0)}let f="";for(g=i+h+1;g<=s;++g)(g===s||o.charCodeAt(g)===Ps)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Ps&&++a,n.slice(a,l))},toNamespacedPath(o){if(typeof o!="string"||o.length===0)return o;const e=Ss.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===Ps){if(e.charCodeAt(1)===Ps){const t=e.charCodeAt(2);if(t!==LZ&&t!==zc)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(bc(e.charCodeAt(0))&&e.charCodeAt(1)===mc&&e.charCodeAt(2)===Ps)return`\\\\?\\${e}`;return o},dirname(o){Bn(o,"path");const e=o.length;if(e===0)return".";let t=-1,n=0;const i=o.charCodeAt(0);if(e===1)return _t(i)?o:".";if(_t(i)){if(t=n=1,_t(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_t(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&_t(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_t(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=n=a+1)}}}}else bc(i)&&o.charCodeAt(1)===mc&&(t=e>2&&_t(o.charCodeAt(2))?3:2,n=t);let s=-1,r=!0;for(let a=e-1;a>=n;--a)if(_t(o.charCodeAt(a))){if(!r){s=a;break}}else r=!1;if(s===-1){if(t===-1)return".";s=t}return o.slice(0,s)},basename(o,e){e!==void 0&&Bn(e,"ext"),Bn(o,"path");let t=0,n=-1,i=!0,s;if(o.length>=2&&bc(o.charCodeAt(0))&&o.charCodeAt(1)===mc&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=t;--s){const l=o.charCodeAt(s);if(_t(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=t;--s)if(_t(o.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){Bn(o,"path");let e=0,t=-1,n=0,i=-1,s=!0,r=0;o.length>=2&&o.charCodeAt(1)===mc&&bc(o.charCodeAt(0))&&(e=n=2);for(let a=o.length-1;a>=e;--a){const l=o.charCodeAt(a);if(_t(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===zc?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===n+1?"":o.slice(t,i)},format:$5.bind(null,"\\"),parse(o){Bn(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.length;let n=0,i=o.charCodeAt(0);if(t===1)return _t(i)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(_t(i)){if(n=1,_t(o.charCodeAt(1))){let h=2,g=h;for(;h<t&&!_t(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&_t(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&!_t(o.charCodeAt(h));)h++;h===t?n=h:h!==g&&(n=h+1)}}}}else if(bc(i)&&o.charCodeAt(1)===mc){if(t<=2)return e.root=e.dir=o,e;if(n=2,_t(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;n=3}}n>0&&(e.root=o.slice(0,n));let s=-1,r=n,a=-1,l=!0,c=o.length-1,d=0;for(;c>=n;--c){if(i=o.charCodeAt(c),_t(i)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===zc?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return a!==-1&&(s===-1||d===0||d===1&&s===a-1&&s===r+1?e.base=e.name=o.slice(r,a):(e.name=o.slice(r,s),e.base=o.slice(r,a),e.ext=o.slice(s,a))),r>0&&r!==n?e.dir=o.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},kZ=(()=>{if(Ed){const o=/\\/g;return()=>{const e=ew().replace(o,"/");return e.slice(e.indexOf("/"))}}return()=>ew()})(),xn={resolve(...o){let e="",t=!1;for(let n=o.length-1;n>=-1&&!t;n--){const i=n>=0?o[n]:kZ();Bn(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Ai)}return e=tw(e,!t,"/",JL),t?`/${e}`:e.length>0?e:"."},normalize(o){if(Bn(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===Ai,t=o.charCodeAt(o.length-1)===Ai;return o=tw(o,!e,"/",JL),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return Bn(o,"path"),o.length>0&&o.charCodeAt(0)===Ai},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){const n=o[t];Bn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":xn.normalize(e)},relative(o,e){if(Bn(o,"from"),Bn(e,"to"),o===e||(o=xn.resolve(o),e=xn.resolve(e),o===e))return"";const t=1,n=o.length,i=n-t,s=1,r=e.length-s,a=i<r?i:r;let l=-1,c=0;for(;c<a;c++){const h=o.charCodeAt(t+c);if(h!==e.charCodeAt(s+c))break;h===Ai&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(s+c)===Ai)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else i>a&&(o.charCodeAt(t+c)===Ai?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||o.charCodeAt(c)===Ai)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(o){return o},dirname(o){if(Bn(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===Ai;let t=-1,n=!0;for(let i=o.length-1;i>=1;--i)if(o.charCodeAt(i)===Ai){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&Bn(e,"ext"),Bn(o,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=0;--s){const l=o.charCodeAt(s);if(l===Ai){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===Ai){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){Bn(o,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let r=o.length-1;r>=0;--r){const a=o.charCodeAt(r);if(a===Ai){if(!i){t=r+1;break}continue}n===-1&&(i=!1,n=r+1),a===zc?e===-1?e=r:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":o.slice(e,n)},format:$5.bind(null,"/"),parse(o){Bn(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.charCodeAt(0)===Ai;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,r=-1,a=!0,l=o.length-1,c=0;for(;l>=n;--l){const d=o.charCodeAt(l);if(d===Ai){if(!a){s=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===zc?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(r!==-1){const d=s===0&&t?1:s;i===-1||c===0||c===1&&i===r-1&&i===s+1?e.base=e.name=o.slice(d,r):(e.name=o.slice(d,i),e.base=o.slice(d,r),e.ext=o.slice(i,r))}return s>0?e.dir=o.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};xn.win32=Ss.win32=Ss;xn.posix=Ss.posix=xn;const q5=Ed?Ss.normalize:xn.normalize,DZ=Ed?Ss.resolve:xn.resolve,MZ=Ed?Ss.relative:xn.relative,Y5=Ed?Ss.dirname:xn.dirname,Kc=Ed?Ss.basename:xn.basename,AZ=Ed?Ss.extname:xn.extname,Fr=Ed?Ss.sep:xn.sep,IZ=/^\w[\w\d+.-]*$/,NZ=/^\//,RZ=/^\/\//;function EP(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!IZ.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!NZ.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(RZ.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}u(EP,"_validateUri");function PZ(o,e){return!o&&!e?"file":o}u(PZ,"_schemeFix");function FZ(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==vr&&(e=vr+e):e=vr;break}return e}u(FZ,"_referenceResolution");const un="",vr="/",OZ=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class ve{static isUri(e){return e instanceof ve?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,i,s,r=!1){typeof e=="object"?(this.scheme=e.scheme||un,this.authority=e.authority||un,this.path=e.path||un,this.query=e.query||un,this.fragment=e.fragment||un):(this.scheme=PZ(e,r),this.authority=t||un,this.path=FZ(this.scheme,n||un),this.query=i||un,this.fragment=s||un,EP(this,r))}get fsPath(){return nw(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=un),n===void 0?n=this.authority:n===null&&(n=un),i===void 0?i=this.path:i===null&&(i=un),s===void 0?s=this.query:s===null&&(s=un),r===void 0?r=this.fragment:r===null&&(r=un),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&r===this.fragment?this:new vg(t,n,i,s,r)}static parse(e,t=!1){const n=OZ.exec(e);return n?new vg(n[2]||un,j0(n[4]||un),j0(n[5]||un),j0(n[7]||un),j0(n[9]||un),t):new vg(un,un,un,un,un)}static file(e){let t=un;if(li&&(e=e.replace(/\\/g,vr)),e[0]===vr&&e[1]===vr){const n=e.indexOf(vr,2);n===-1?(t=e.substring(2),e=vr):(t=e.substring(2,n),e=e.substring(n)||vr)}return new vg("file",t,e,un,un)}static from(e){const t=new vg(e.scheme,e.authority,e.path,e.query,e.fragment);return EP(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return li&&e.scheme==="file"?n=ve.file(Ss.join(nw(e,!0),...t)).path:n=xn.join(e.path,...t),e.with({path:n})}toString(e=!1){return QL(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof ve)return e;{const t=new vg(e);return t._formatted=e.external,t._fsPath=e._sep===X5?e.fsPath:null,t}}else return e}}u(ve,"URI");const X5=li?1:void 0;let vg=u(class extends ve{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=nw(this,!1)),this._fsPath}toString(e=!1){return e?QL(this,!0):(this._formatted||(this._formatted=QL(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=X5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},"Uri");const Z5={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function kP(o,e,t){let n,i=-1;for(let s=0;s<o.length;s++){const r=o.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)i!==-1&&(n+=encodeURIComponent(o.substring(i,s)),i=-1),n!==void 0&&(n+=o.charAt(s));else{n===void 0&&(n=o.substr(0,s));const a=Z5[r];a!==void 0?(i!==-1&&(n+=encodeURIComponent(o.substring(i,s)),i=-1),n+=a):i===-1&&(i=s)}}return i!==-1&&(n+=encodeURIComponent(o.substring(i))),n!==void 0?n:o}u(kP,"encodeURIComponentFast");function HZ(o){let e;for(let t=0;t<o.length;t++){const n=o.charCodeAt(t);n===35||n===63?(e===void 0&&(e=o.substr(0,t)),e+=Z5[n]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}u(HZ,"encodeURIComponentMinimal");function nw(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,li&&(t=t.replace(/\//g,"\\")),t}u(nw,"uriToFsPath");function QL(o,e){const t=e?HZ:kP;let n="",{scheme:i,authority:s,path:r,query:a,fragment:l}=o;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=vr,n+=vr),s){let c=s.indexOf("@");if(c!==-1){const d=s.substr(0,c);s=s.substr(c+1),c=d.lastIndexOf(":"),c===-1?n+=t(d,!1,!1):(n+=t(d.substr(0,c),!1,!1),n+=":",n+=t(d.substr(c+1),!1,!0)),n+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?n+=t(s,!1,!0):(n+=t(s.substr(0,c),!1,!0),n+=s.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}n+=t(r,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:kP(l,!1,!1)),n}u(QL,"_asFormatted");function J5(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+J5(o.substr(3)):o}}u(J5,"decodeURIComponentGraceful");const DP=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function j0(o){return o.match(DP)?o.replace(DP,e=>J5(e)):o}u(j0,"percentDecode");let W=u(class Qd{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Qd(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Qd.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Qd.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Qd.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const s=e.column|0,r=t.column|0;return s-r}return n-i}clone(){return new Qd(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Qd(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}},"Position"),T=u(class Zn{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return Zn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Zn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Zn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Zn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Zn.plusRange(this,e)}static plusRange(e,t){let n,i,s,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new Zn(n,i,s,r)}intersectRanges(e){return Zn.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>c?(s=c,r=d):s===c&&(r=Math.min(r,d)),n>s||n===s&&i>r?null:new Zn(n,i,s,r)}equalsRange(e){return Zn.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Zn.getEndPosition(this)}static getEndPosition(e){return new W(e.endLineNumber,e.endColumn)}getStartPosition(){return Zn.getStartPosition(this)}static getStartPosition(e){return new W(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Zn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Zn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Zn.collapseToStart(this)}static collapseToStart(e){return new Zn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Zn.collapseToEnd(this)}static collapseToEnd(e){return new Zn(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Zn(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Zn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Zn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,r=t.startLineNumber|0;if(s===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const h=e.endColumn|0,g=t.endColumn|0;return h-g}return c-d}return a-l}return s-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},"Range"),ge=u(class Ho extends T{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ho.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ho(this.startLineNumber,this.startColumn,e,t):new Ho(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new W(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new W(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ho(e,t,this.endLineNumber,this.endColumn):new Ho(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ho(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ho(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ho(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ho(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new Ho(e,t,n,i):new Ho(n,i,e,t)}},"Selection");const eE=Object.create(null);function S(o,e){if(Ki(e)){const t=eE[e];if(t===void 0)throw new Error(`${o} references an unknown codicon: ${e}`);e=t}return eE[o]=e,{id:o}}u(S,"register$1");function Q5(){return eE}u(Q5,"getCodiconFontCharacters");const re={add:S("add",6e4),plus:S("plus",6e4),gistNew:S("gist-new",6e4),repoCreate:S("repo-create",6e4),lightbulb:S("lightbulb",60001),lightBulb:S("light-bulb",60001),repo:S("repo",60002),repoDelete:S("repo-delete",60002),gistFork:S("gist-fork",60003),repoForked:S("repo-forked",60003),gitPullRequest:S("git-pull-request",60004),gitPullRequestAbandoned:S("git-pull-request-abandoned",60004),recordKeys:S("record-keys",60005),keyboard:S("keyboard",60005),tag:S("tag",60006),tagAdd:S("tag-add",60006),tagRemove:S("tag-remove",60006),person:S("person",60007),personFollow:S("person-follow",60007),personOutline:S("person-outline",60007),personFilled:S("person-filled",60007),gitBranch:S("git-branch",60008),gitBranchCreate:S("git-branch-create",60008),gitBranchDelete:S("git-branch-delete",60008),sourceControl:S("source-control",60008),mirror:S("mirror",60009),mirrorPublic:S("mirror-public",60009),star:S("star",60010),starAdd:S("star-add",60010),starDelete:S("star-delete",60010),starEmpty:S("star-empty",60010),comment:S("comment",60011),commentAdd:S("comment-add",60011),alert:S("alert",60012),warning:S("warning",60012),search:S("search",60013),searchSave:S("search-save",60013),logOut:S("log-out",60014),signOut:S("sign-out",60014),logIn:S("log-in",60015),signIn:S("sign-in",60015),eye:S("eye",60016),eyeUnwatch:S("eye-unwatch",60016),eyeWatch:S("eye-watch",60016),circleFilled:S("circle-filled",60017),primitiveDot:S("primitive-dot",60017),closeDirty:S("close-dirty",60017),debugBreakpoint:S("debug-breakpoint",60017),debugBreakpointDisabled:S("debug-breakpoint-disabled",60017),debugHint:S("debug-hint",60017),primitiveSquare:S("primitive-square",60018),edit:S("edit",60019),pencil:S("pencil",60019),info:S("info",60020),issueOpened:S("issue-opened",60020),gistPrivate:S("gist-private",60021),gitForkPrivate:S("git-fork-private",60021),lock:S("lock",60021),mirrorPrivate:S("mirror-private",60021),close:S("close",60022),removeClose:S("remove-close",60022),x:S("x",60022),repoSync:S("repo-sync",60023),sync:S("sync",60023),clone:S("clone",60024),desktopDownload:S("desktop-download",60024),beaker:S("beaker",60025),microscope:S("microscope",60025),vm:S("vm",60026),deviceDesktop:S("device-desktop",60026),file:S("file",60027),fileText:S("file-text",60027),more:S("more",60028),ellipsis:S("ellipsis",60028),kebabHorizontal:S("kebab-horizontal",60028),mailReply:S("mail-reply",60029),reply:S("reply",60029),organization:S("organization",60030),organizationFilled:S("organization-filled",60030),organizationOutline:S("organization-outline",60030),newFile:S("new-file",60031),fileAdd:S("file-add",60031),newFolder:S("new-folder",60032),fileDirectoryCreate:S("file-directory-create",60032),trash:S("trash",60033),trashcan:S("trashcan",60033),history:S("history",60034),clock:S("clock",60034),folder:S("folder",60035),fileDirectory:S("file-directory",60035),symbolFolder:S("symbol-folder",60035),logoGithub:S("logo-github",60036),markGithub:S("mark-github",60036),github:S("github",60036),terminal:S("terminal",60037),console:S("console",60037),repl:S("repl",60037),zap:S("zap",60038),symbolEvent:S("symbol-event",60038),error:S("error",60039),stop:S("stop",60039),variable:S("variable",60040),symbolVariable:S("symbol-variable",60040),array:S("array",60042),symbolArray:S("symbol-array",60042),symbolModule:S("symbol-module",60043),symbolPackage:S("symbol-package",60043),symbolNamespace:S("symbol-namespace",60043),symbolObject:S("symbol-object",60043),symbolMethod:S("symbol-method",60044),symbolFunction:S("symbol-function",60044),symbolConstructor:S("symbol-constructor",60044),symbolBoolean:S("symbol-boolean",60047),symbolNull:S("symbol-null",60047),symbolNumeric:S("symbol-numeric",60048),symbolNumber:S("symbol-number",60048),symbolStructure:S("symbol-structure",60049),symbolStruct:S("symbol-struct",60049),symbolParameter:S("symbol-parameter",60050),symbolTypeParameter:S("symbol-type-parameter",60050),symbolKey:S("symbol-key",60051),symbolText:S("symbol-text",60051),symbolReference:S("symbol-reference",60052),goToFile:S("go-to-file",60052),symbolEnum:S("symbol-enum",60053),symbolValue:S("symbol-value",60053),symbolRuler:S("symbol-ruler",60054),symbolUnit:S("symbol-unit",60054),activateBreakpoints:S("activate-breakpoints",60055),archive:S("archive",60056),arrowBoth:S("arrow-both",60057),arrowDown:S("arrow-down",60058),arrowLeft:S("arrow-left",60059),arrowRight:S("arrow-right",60060),arrowSmallDown:S("arrow-small-down",60061),arrowSmallLeft:S("arrow-small-left",60062),arrowSmallRight:S("arrow-small-right",60063),arrowSmallUp:S("arrow-small-up",60064),arrowUp:S("arrow-up",60065),bell:S("bell",60066),bold:S("bold",60067),book:S("book",60068),bookmark:S("bookmark",60069),debugBreakpointConditionalUnverified:S("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:S("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:S("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:S("debug-breakpoint-data-unverified",60072),debugBreakpointData:S("debug-breakpoint-data",60073),debugBreakpointDataDisabled:S("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:S("debug-breakpoint-log-unverified",60074),debugBreakpointLog:S("debug-breakpoint-log",60075),debugBreakpointLogDisabled:S("debug-breakpoint-log-disabled",60075),briefcase:S("briefcase",60076),broadcast:S("broadcast",60077),browser:S("browser",60078),bug:S("bug",60079),calendar:S("calendar",60080),caseSensitive:S("case-sensitive",60081),check:S("check",60082),checklist:S("checklist",60083),chevronDown:S("chevron-down",60084),dropDownButton:S("drop-down-button",60084),chevronLeft:S("chevron-left",60085),chevronRight:S("chevron-right",60086),chevronUp:S("chevron-up",60087),chromeClose:S("chrome-close",60088),chromeMaximize:S("chrome-maximize",60089),chromeMinimize:S("chrome-minimize",60090),chromeRestore:S("chrome-restore",60091),circle:S("circle",60092),circleOutline:S("circle-outline",60092),debugBreakpointUnverified:S("debug-breakpoint-unverified",60092),circleSlash:S("circle-slash",60093),circuitBoard:S("circuit-board",60094),clearAll:S("clear-all",60095),clippy:S("clippy",60096),closeAll:S("close-all",60097),cloudDownload:S("cloud-download",60098),cloudUpload:S("cloud-upload",60099),code:S("code",60100),collapseAll:S("collapse-all",60101),colorMode:S("color-mode",60102),commentDiscussion:S("comment-discussion",60103),compareChanges:S("compare-changes",60157),creditCard:S("credit-card",60105),dash:S("dash",60108),dashboard:S("dashboard",60109),database:S("database",60110),debugContinue:S("debug-continue",60111),debugDisconnect:S("debug-disconnect",60112),debugPause:S("debug-pause",60113),debugRestart:S("debug-restart",60114),debugStart:S("debug-start",60115),debugStepInto:S("debug-step-into",60116),debugStepOut:S("debug-step-out",60117),debugStepOver:S("debug-step-over",60118),debugStop:S("debug-stop",60119),debug:S("debug",60120),deviceCameraVideo:S("device-camera-video",60121),deviceCamera:S("device-camera",60122),deviceMobile:S("device-mobile",60123),diffAdded:S("diff-added",60124),diffIgnored:S("diff-ignored",60125),diffModified:S("diff-modified",60126),diffRemoved:S("diff-removed",60127),diffRenamed:S("diff-renamed",60128),diff:S("diff",60129),discard:S("discard",60130),editorLayout:S("editor-layout",60131),emptyWindow:S("empty-window",60132),exclude:S("exclude",60133),extensions:S("extensions",60134),eyeClosed:S("eye-closed",60135),fileBinary:S("file-binary",60136),fileCode:S("file-code",60137),fileMedia:S("file-media",60138),filePdf:S("file-pdf",60139),fileSubmodule:S("file-submodule",60140),fileSymlinkDirectory:S("file-symlink-directory",60141),fileSymlinkFile:S("file-symlink-file",60142),fileZip:S("file-zip",60143),files:S("files",60144),filter:S("filter",60145),flame:S("flame",60146),foldDown:S("fold-down",60147),foldUp:S("fold-up",60148),fold:S("fold",60149),folderActive:S("folder-active",60150),folderOpened:S("folder-opened",60151),gear:S("gear",60152),gift:S("gift",60153),gistSecret:S("gist-secret",60154),gist:S("gist",60155),gitCommit:S("git-commit",60156),gitCompare:S("git-compare",60157),gitMerge:S("git-merge",60158),githubAction:S("github-action",60159),githubAlt:S("github-alt",60160),globe:S("globe",60161),grabber:S("grabber",60162),graph:S("graph",60163),gripper:S("gripper",60164),heart:S("heart",60165),home:S("home",60166),horizontalRule:S("horizontal-rule",60167),hubot:S("hubot",60168),inbox:S("inbox",60169),issueClosed:S("issue-closed",60324),issueReopened:S("issue-reopened",60171),issues:S("issues",60172),italic:S("italic",60173),jersey:S("jersey",60174),json:S("json",60175),bracket:S("bracket",60175),kebabVertical:S("kebab-vertical",60176),key:S("key",60177),law:S("law",60178),lightbulbAutofix:S("lightbulb-autofix",60179),linkExternal:S("link-external",60180),link:S("link",60181),listOrdered:S("list-ordered",60182),listUnordered:S("list-unordered",60183),liveShare:S("live-share",60184),loading:S("loading",60185),location:S("location",60186),mailRead:S("mail-read",60187),mail:S("mail",60188),markdown:S("markdown",60189),megaphone:S("megaphone",60190),mention:S("mention",60191),milestone:S("milestone",60192),mortarBoard:S("mortar-board",60193),move:S("move",60194),multipleWindows:S("multiple-windows",60195),mute:S("mute",60196),noNewline:S("no-newline",60197),note:S("note",60198),octoface:S("octoface",60199),openPreview:S("open-preview",60200),package_:S("package",60201),paintcan:S("paintcan",60202),pin:S("pin",60203),play:S("play",60204),run:S("run",60204),plug:S("plug",60205),preserveCase:S("preserve-case",60206),preview:S("preview",60207),project:S("project",60208),pulse:S("pulse",60209),question:S("question",60210),quote:S("quote",60211),radioTower:S("radio-tower",60212),reactions:S("reactions",60213),references:S("references",60214),refresh:S("refresh",60215),regex:S("regex",60216),remoteExplorer:S("remote-explorer",60217),remote:S("remote",60218),remove:S("remove",60219),replaceAll:S("replace-all",60220),replace:S("replace",60221),repoClone:S("repo-clone",60222),repoForcePush:S("repo-force-push",60223),repoPull:S("repo-pull",60224),repoPush:S("repo-push",60225),report:S("report",60226),requestChanges:S("request-changes",60227),rocket:S("rocket",60228),rootFolderOpened:S("root-folder-opened",60229),rootFolder:S("root-folder",60230),rss:S("rss",60231),ruby:S("ruby",60232),saveAll:S("save-all",60233),saveAs:S("save-as",60234),save:S("save",60235),screenFull:S("screen-full",60236),screenNormal:S("screen-normal",60237),searchStop:S("search-stop",60238),server:S("server",60240),settingsGear:S("settings-gear",60241),settings:S("settings",60242),shield:S("shield",60243),smiley:S("smiley",60244),sortPrecedence:S("sort-precedence",60245),splitHorizontal:S("split-horizontal",60246),splitVertical:S("split-vertical",60247),squirrel:S("squirrel",60248),starFull:S("star-full",60249),starHalf:S("star-half",60250),symbolClass:S("symbol-class",60251),symbolColor:S("symbol-color",60252),symbolCustomColor:S("symbol-customcolor",60252),symbolConstant:S("symbol-constant",60253),symbolEnumMember:S("symbol-enum-member",60254),symbolField:S("symbol-field",60255),symbolFile:S("symbol-file",60256),symbolInterface:S("symbol-interface",60257),symbolKeyword:S("symbol-keyword",60258),symbolMisc:S("symbol-misc",60259),symbolOperator:S("symbol-operator",60260),symbolProperty:S("symbol-property",60261),wrench:S("wrench",60261),wrenchSubaction:S("wrench-subaction",60261),symbolSnippet:S("symbol-snippet",60262),tasklist:S("tasklist",60263),telescope:S("telescope",60264),textSize:S("text-size",60265),threeBars:S("three-bars",60266),thumbsdown:S("thumbsdown",60267),thumbsup:S("thumbsup",60268),tools:S("tools",60269),triangleDown:S("triangle-down",60270),triangleLeft:S("triangle-left",60271),triangleRight:S("triangle-right",60272),triangleUp:S("triangle-up",60273),twitter:S("twitter",60274),unfold:S("unfold",60275),unlock:S("unlock",60276),unmute:S("unmute",60277),unverified:S("unverified",60278),verified:S("verified",60279),versions:S("versions",60280),vmActive:S("vm-active",60281),vmOutline:S("vm-outline",60282),vmRunning:S("vm-running",60283),watch:S("watch",60284),whitespace:S("whitespace",60285),wholeWord:S("whole-word",60286),window:S("window",60287),wordWrap:S("word-wrap",60288),zoomIn:S("zoom-in",60289),zoomOut:S("zoom-out",60290),listFilter:S("list-filter",60291),listFlat:S("list-flat",60292),listSelection:S("list-selection",60293),selection:S("selection",60293),listTree:S("list-tree",60294),debugBreakpointFunctionUnverified:S("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:S("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:S("debug-breakpoint-function-disabled",60296),debugStackframeActive:S("debug-stackframe-active",60297),circleSmallFilled:S("circle-small-filled",60298),debugStackframeDot:S("debug-stackframe-dot",60298),debugStackframe:S("debug-stackframe",60299),debugStackframeFocused:S("debug-stackframe-focused",60299),debugBreakpointUnsupported:S("debug-breakpoint-unsupported",60300),symbolString:S("symbol-string",60301),debugReverseContinue:S("debug-reverse-continue",60302),debugStepBack:S("debug-step-back",60303),debugRestartFrame:S("debug-restart-frame",60304),callIncoming:S("call-incoming",60306),callOutgoing:S("call-outgoing",60307),menu:S("menu",60308),expandAll:S("expand-all",60309),feedback:S("feedback",60310),groupByRefType:S("group-by-ref-type",60311),ungroupByRefType:S("ungroup-by-ref-type",60312),account:S("account",60313),bellDot:S("bell-dot",60314),debugConsole:S("debug-console",60315),library:S("library",60316),output:S("output",60317),runAll:S("run-all",60318),syncIgnored:S("sync-ignored",60319),pinned:S("pinned",60320),githubInverted:S("github-inverted",60321),debugAlt:S("debug-alt",60305),serverProcess:S("server-process",60322),serverEnvironment:S("server-environment",60323),pass:S("pass",60324),stopCircle:S("stop-circle",60325),playCircle:S("play-circle",60326),record:S("record",60327),debugAltSmall:S("debug-alt-small",60328),vmConnect:S("vm-connect",60329),cloud:S("cloud",60330),merge:S("merge",60331),exportIcon:S("export",60332),graphLeft:S("graph-left",60333),magnet:S("magnet",60334),notebook:S("notebook",60335),redo:S("redo",60336),checkAll:S("check-all",60337),pinnedDirty:S("pinned-dirty",60338),passFilled:S("pass-filled",60339),circleLargeFilled:S("circle-large-filled",60340),circleLarge:S("circle-large",60341),circleLargeOutline:S("circle-large-outline",60341),combine:S("combine",60342),gather:S("gather",60342),table:S("table",60343),variableGroup:S("variable-group",60344),typeHierarchy:S("type-hierarchy",60345),typeHierarchySub:S("type-hierarchy-sub",60346),typeHierarchySuper:S("type-hierarchy-super",60347),gitPullRequestCreate:S("git-pull-request-create",60348),runAbove:S("run-above",60349),runBelow:S("run-below",60350),notebookTemplate:S("notebook-template",60351),debugRerun:S("debug-rerun",60352),workspaceTrusted:S("workspace-trusted",60353),workspaceUntrusted:S("workspace-untrusted",60354),workspaceUnspecified:S("workspace-unspecified",60355),terminalCmd:S("terminal-cmd",60356),terminalDebian:S("terminal-debian",60357),terminalLinux:S("terminal-linux",60358),terminalPowershell:S("terminal-powershell",60359),terminalTmux:S("terminal-tmux",60360),terminalUbuntu:S("terminal-ubuntu",60361),terminalBash:S("terminal-bash",60362),arrowSwap:S("arrow-swap",60363),copy:S("copy",60364),personAdd:S("person-add",60365),filterFilled:S("filter-filled",60366),wand:S("wand",60367),debugLineByLine:S("debug-line-by-line",60368),inspect:S("inspect",60369),layers:S("layers",60370),layersDot:S("layers-dot",60371),layersActive:S("layers-active",60372),compass:S("compass",60373),compassDot:S("compass-dot",60374),compassActive:S("compass-active",60375),azure:S("azure",60376),issueDraft:S("issue-draft",60377),gitPullRequestClosed:S("git-pull-request-closed",60378),gitPullRequestDraft:S("git-pull-request-draft",60379),debugAll:S("debug-all",60380),debugCoverage:S("debug-coverage",60381),runErrors:S("run-errors",60382),folderLibrary:S("folder-library",60383),debugContinueSmall:S("debug-continue-small",60384),beakerStop:S("beaker-stop",60385),graphLine:S("graph-line",60386),graphScatter:S("graph-scatter",60387),pieChart:S("pie-chart",60388),bracketDot:S("bracket-dot",60389),bracketError:S("bracket-error",60390),lockSmall:S("lock-small",60391),azureDevops:S("azure-devops",60392),verifiedFilled:S("verified-filled",60393),newLine:S("newline",60394),layout:S("layout",60395),layoutActivitybarLeft:S("layout-activitybar-left",60396),layoutActivitybarRight:S("layout-activitybar-right",60397),layoutPanelLeft:S("layout-panel-left",60398),layoutPanelCenter:S("layout-panel-center",60399),layoutPanelJustify:S("layout-panel-justify",60400),layoutPanelRight:S("layout-panel-right",60401),layoutPanel:S("layout-panel",60402),layoutSidebarLeft:S("layout-sidebar-left",60403),layoutSidebarRight:S("layout-sidebar-right",60404),layoutStatusbar:S("layout-statusbar",60405),layoutMenubar:S("layout-menubar",60406),layoutCentered:S("layout-centered",60407),layoutSidebarRightOff:S("layout-sidebar-right-off",60416),layoutPanelOff:S("layout-panel-off",60417),layoutSidebarLeftOff:S("layout-sidebar-left-off",60418),target:S("target",60408),indent:S("indent",60409),recordSmall:S("record-small",60410),errorSmall:S("error-small",60411),arrowCircleDown:S("arrow-circle-down",60412),arrowCircleLeft:S("arrow-circle-left",60413),arrowCircleRight:S("arrow-circle-right",60414),arrowCircleUp:S("arrow-circle-up",60415),heartFilled:S("heart-filled",60420),map:S("map",60421),mapFilled:S("map-filled",60422),circleSmall:S("circle-small",60423),bellSlash:S("bell-slash",60424),bellSlashDot:S("bell-slash-dot",60425),commentUnresolved:S("comment-unresolved",60426),gitPullRequestGoToChanges:S("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:S("git-pull-request-new-changes",60428),searchFuzzy:S("search-fuzzy",60429),commentDraft:S("comment-draft",60430),send:S("send",60431),sparkle:S("sparkle",60432),insert:S("insert",60433),dialogError:S("dialog-error","error"),dialogWarning:S("dialog-warning","warning"),dialogInfo:S("dialog-info","info"),dialogClose:S("dialog-close","close"),treeItemExpanded:S("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:S("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:S("tree-filter-on-type-off","list-selection"),treeFilterClear:S("tree-filter-clear","close"),treeItemLoading:S("tree-item-loading","loading"),menuSelection:S("menu-selection","check"),menuSubmenu:S("menu-submenu","chevron-right"),menuBarMore:S("menubar-more","more"),scrollbarButtonLeft:S("scrollbar-button-left","triangle-left"),scrollbarButtonRight:S("scrollbar-button-right","triangle-right"),scrollbarButtonUp:S("scrollbar-button-up","triangle-up"),scrollbarButtonDown:S("scrollbar-button-down","triangle-down"),toolBarMore:S("toolbar-more","more"),quickInputBack:S("quick-input-back","arrow-left")};var tE=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let VZ=u(class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Oe(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const i=new eV(this,e,t);return this._factories.set(e,i),Oe(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}getOrCreate(e){return tE(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},"TokenizationRegistry");class eV extends z{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return tE(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return tE(this,void 0,void 0,function*(){const e=yield this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}u(eV,"TokenizationSupportFactoryData");let o_=u(class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}},"Token");class B1{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}u(B1,"TokenizationResult");class _v{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}u(_v,"EncodedTokenizationResult");var r_;(function(o){const e=new Map;e.set(0,re.symbolMethod),e.set(1,re.symbolFunction),e.set(2,re.symbolConstructor),e.set(3,re.symbolField),e.set(4,re.symbolVariable),e.set(5,re.symbolClass),e.set(6,re.symbolStruct),e.set(7,re.symbolInterface),e.set(8,re.symbolModule),e.set(9,re.symbolProperty),e.set(10,re.symbolEvent),e.set(11,re.symbolOperator),e.set(12,re.symbolUnit),e.set(13,re.symbolValue),e.set(15,re.symbolEnum),e.set(14,re.symbolConstant),e.set(15,re.symbolEnum),e.set(16,re.symbolEnumMember),e.set(17,re.symbolKeyword),e.set(27,re.symbolSnippet),e.set(18,re.symbolText),e.set(19,re.symbolColor),e.set(20,re.symbolFile),e.set(21,re.symbolReference),e.set(22,re.symbolCustomColor),e.set(23,re.symbolFolder),e.set(24,re.symbolTypeParameter),e.set(25,re.account),e.set(26,re.issues);function t(s){let r=e.get(s);return r||(console.info("No codicon found for CompletionItemKind "+s),r=re.symbolProperty),r}u(t,"toIcon"),o.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(s,r){let a=n.get(s);return typeof a>"u"&&!r&&(a=9),a}u(i,"fromString"),o.fromString=i})(r_||(r_={}));var Hs;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(Hs||(Hs={}));var Da;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(Da||(Da={}));var a_;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(a_||(a_={}));function WZ(o){return o&&ve.isUri(o.uri)&&T.isIRange(o.range)&&(T.isIRange(o.originSelectionRange)||T.isIRange(o.targetSelectionRange))}u(WZ,"isLocationLink");var nE;(function(o){const e=new Map;e.set(0,re.symbolFile),e.set(1,re.symbolModule),e.set(2,re.symbolNamespace),e.set(3,re.symbolPackage),e.set(4,re.symbolClass),e.set(5,re.symbolMethod),e.set(6,re.symbolProperty),e.set(7,re.symbolField),e.set(8,re.symbolConstructor),e.set(9,re.symbolEnum),e.set(10,re.symbolInterface),e.set(11,re.symbolFunction),e.set(12,re.symbolVariable),e.set(13,re.symbolConstant),e.set(14,re.symbolString),e.set(15,re.symbolNumber),e.set(16,re.symbolBoolean),e.set(17,re.symbolArray),e.set(18,re.symbolObject),e.set(19,re.symbolKey),e.set(20,re.symbolNull),e.set(21,re.symbolEnumMember),e.set(22,re.symbolStruct),e.set(23,re.symbolEvent),e.set(24,re.symbolOperator),e.set(25,re.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=re.symbolProperty),i}u(t,"toIcon"),o.toIcon=t})(nE||(nE={}));class Ni{static fromValue(e){switch(e){case"comment":return Ni.Comment;case"imports":return Ni.Imports;case"region":return Ni.Region}return new Ni(e)}constructor(e){this.value=e}}u(Ni,"FoldingRangeKind");Ni.Comment=new Ni("comment");Ni.Imports=new Ni("imports");Ni.Region=new Ni("region");var iE;(function(o){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}u(e,"is"),o.is=e})(iE||(iE={}));var iw;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(iw||(iw={}));class tV{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}u(tV,"LazyTokenizationSupport");const Yt=new VZ;var sE;(function(o){o[o.Unknown=0]="Unknown",o[o.Disabled=1]="Disabled",o[o.Enabled=2]="Enabled"})(sE||(sE={}));var oE;(function(o){o[o.Invoke=1]="Invoke",o[o.Auto=2]="Auto"})(oE||(oE={}));var rE;(function(o){o[o.None=0]="None",o[o.KeepWhitespace=1]="KeepWhitespace",o[o.InsertAsSnippet=4]="InsertAsSnippet"})(rE||(rE={}));var aE;(function(o){o[o.Method=0]="Method",o[o.Function=1]="Function",o[o.Constructor=2]="Constructor",o[o.Field=3]="Field",o[o.Variable=4]="Variable",o[o.Class=5]="Class",o[o.Struct=6]="Struct",o[o.Interface=7]="Interface",o[o.Module=8]="Module",o[o.Property=9]="Property",o[o.Event=10]="Event",o[o.Operator=11]="Operator",o[o.Unit=12]="Unit",o[o.Value=13]="Value",o[o.Constant=14]="Constant",o[o.Enum=15]="Enum",o[o.EnumMember=16]="EnumMember",o[o.Keyword=17]="Keyword",o[o.Text=18]="Text",o[o.Color=19]="Color",o[o.File=20]="File",o[o.Reference=21]="Reference",o[o.Customcolor=22]="Customcolor",o[o.Folder=23]="Folder",o[o.TypeParameter=24]="TypeParameter",o[o.User=25]="User",o[o.Issue=26]="Issue",o[o.Snippet=27]="Snippet"})(aE||(aE={}));var lE;(function(o){o[o.Deprecated=1]="Deprecated"})(lE||(lE={}));var cE;(function(o){o[o.Invoke=0]="Invoke",o[o.TriggerCharacter=1]="TriggerCharacter",o[o.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(cE||(cE={}));var dE;(function(o){o[o.EXACT=0]="EXACT",o[o.ABOVE=1]="ABOVE",o[o.BELOW=2]="BELOW"})(dE||(dE={}));var uE;(function(o){o[o.NotSet=0]="NotSet",o[o.ContentFlush=1]="ContentFlush",o[o.RecoverFromMarkers=2]="RecoverFromMarkers",o[o.Explicit=3]="Explicit",o[o.Paste=4]="Paste",o[o.Undo=5]="Undo",o[o.Redo=6]="Redo"})(uE||(uE={}));var hE;(function(o){o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(hE||(hE={}));var gE;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(gE||(gE={}));var fE;(function(o){o[o.None=0]="None",o[o.Keep=1]="Keep",o[o.Brackets=2]="Brackets",o[o.Advanced=3]="Advanced",o[o.Full=4]="Full"})(fE||(fE={}));var pE;(function(o){o[o.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",o[o.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",o[o.accessibilitySupport=2]="accessibilitySupport",o[o.accessibilityPageSize=3]="accessibilityPageSize",o[o.ariaLabel=4]="ariaLabel",o[o.autoClosingBrackets=5]="autoClosingBrackets",o[o.screenReaderAnnounceInlineSuggestion=6]="screenReaderAnnounceInlineSuggestion",o[o.autoClosingDelete=7]="autoClosingDelete",o[o.autoClosingOvertype=8]="autoClosingOvertype",o[o.autoClosingQuotes=9]="autoClosingQuotes",o[o.autoIndent=10]="autoIndent",o[o.automaticLayout=11]="automaticLayout",o[o.autoSurround=12]="autoSurround",o[o.bracketPairColorization=13]="bracketPairColorization",o[o.guides=14]="guides",o[o.codeLens=15]="codeLens",o[o.codeLensFontFamily=16]="codeLensFontFamily",o[o.codeLensFontSize=17]="codeLensFontSize",o[o.colorDecorators=18]="colorDecorators",o[o.colorDecoratorsLimit=19]="colorDecoratorsLimit",o[o.columnSelection=20]="columnSelection",o[o.comments=21]="comments",o[o.contextmenu=22]="contextmenu",o[o.copyWithSyntaxHighlighting=23]="copyWithSyntaxHighlighting",o[o.cursorBlinking=24]="cursorBlinking",o[o.cursorSmoothCaretAnimation=25]="cursorSmoothCaretAnimation",o[o.cursorStyle=26]="cursorStyle",o[o.cursorSurroundingLines=27]="cursorSurroundingLines",o[o.cursorSurroundingLinesStyle=28]="cursorSurroundingLinesStyle",o[o.cursorWidth=29]="cursorWidth",o[o.disableLayerHinting=30]="disableLayerHinting",o[o.disableMonospaceOptimizations=31]="disableMonospaceOptimizations",o[o.domReadOnly=32]="domReadOnly",o[o.dragAndDrop=33]="dragAndDrop",o[o.dropIntoEditor=34]="dropIntoEditor",o[o.emptySelectionClipboard=35]="emptySelectionClipboard",o[o.experimentalWhitespaceRendering=36]="experimentalWhitespaceRendering",o[o.extraEditorClassName=37]="extraEditorClassName",o[o.fastScrollSensitivity=38]="fastScrollSensitivity",o[o.find=39]="find",o[o.fixedOverflowWidgets=40]="fixedOverflowWidgets",o[o.folding=41]="folding",o[o.foldingStrategy=42]="foldingStrategy",o[o.foldingHighlight=43]="foldingHighlight",o[o.foldingImportsByDefault=44]="foldingImportsByDefault",o[o.foldingMaximumRegions=45]="foldingMaximumRegions",o[o.unfoldOnClickAfterEndOfLine=46]="unfoldOnClickAfterEndOfLine",o[o.fontFamily=47]="fontFamily",o[o.fontInfo=48]="fontInfo",o[o.fontLigatures=49]="fontLigatures",o[o.fontSize=50]="fontSize",o[o.fontWeight=51]="fontWeight",o[o.fontVariations=52]="fontVariations",o[o.formatOnPaste=53]="formatOnPaste",o[o.formatOnType=54]="formatOnType",o[o.glyphMargin=55]="glyphMargin",o[o.gotoLocation=56]="gotoLocation",o[o.hideCursorInOverviewRuler=57]="hideCursorInOverviewRuler",o[o.hover=58]="hover",o[o.inDiffEditor=59]="inDiffEditor",o[o.inlineSuggest=60]="inlineSuggest",o[o.letterSpacing=61]="letterSpacing",o[o.lightbulb=62]="lightbulb",o[o.lineDecorationsWidth=63]="lineDecorationsWidth",o[o.lineHeight=64]="lineHeight",o[o.lineNumbers=65]="lineNumbers",o[o.lineNumbersMinChars=66]="lineNumbersMinChars",o[o.linkedEditing=67]="linkedEditing",o[o.links=68]="links",o[o.matchBrackets=69]="matchBrackets",o[o.minimap=70]="minimap",o[o.mouseStyle=71]="mouseStyle",o[o.mouseWheelScrollSensitivity=72]="mouseWheelScrollSensitivity",o[o.mouseWheelZoom=73]="mouseWheelZoom",o[o.multiCursorMergeOverlapping=74]="multiCursorMergeOverlapping",o[o.multiCursorModifier=75]="multiCursorModifier",o[o.multiCursorPaste=76]="multiCursorPaste",o[o.multiCursorLimit=77]="multiCursorLimit",o[o.occurrencesHighlight=78]="occurrencesHighlight",o[o.overviewRulerBorder=79]="overviewRulerBorder",o[o.overviewRulerLanes=80]="overviewRulerLanes",o[o.padding=81]="padding",o[o.parameterHints=82]="parameterHints",o[o.peekWidgetDefaultFocus=83]="peekWidgetDefaultFocus",o[o.definitionLinkOpensInPeek=84]="definitionLinkOpensInPeek",o[o.quickSuggestions=85]="quickSuggestions",o[o.quickSuggestionsDelay=86]="quickSuggestionsDelay",o[o.readOnly=87]="readOnly",o[o.renameOnType=88]="renameOnType",o[o.renderControlCharacters=89]="renderControlCharacters",o[o.renderFinalNewline=90]="renderFinalNewline",o[o.renderLineHighlight=91]="renderLineHighlight",o[o.renderLineHighlightOnlyWhenFocus=92]="renderLineHighlightOnlyWhenFocus",o[o.renderValidationDecorations=93]="renderValidationDecorations",o[o.renderWhitespace=94]="renderWhitespace",o[o.revealHorizontalRightPadding=95]="revealHorizontalRightPadding",o[o.roundedSelection=96]="roundedSelection",o[o.rulers=97]="rulers",o[o.scrollbar=98]="scrollbar",o[o.scrollBeyondLastColumn=99]="scrollBeyondLastColumn",o[o.scrollBeyondLastLine=100]="scrollBeyondLastLine",o[o.scrollPredominantAxis=101]="scrollPredominantAxis",o[o.selectionClipboard=102]="selectionClipboard",o[o.selectionHighlight=103]="selectionHighlight",o[o.selectOnLineNumbers=104]="selectOnLineNumbers",o[o.showFoldingControls=105]="showFoldingControls",o[o.showUnused=106]="showUnused",o[o.snippetSuggestions=107]="snippetSuggestions",o[o.smartSelect=108]="smartSelect",o[o.smoothScrolling=109]="smoothScrolling",o[o.stickyScroll=110]="stickyScroll",o[o.stickyTabStops=111]="stickyTabStops",o[o.stopRenderingLineAfter=112]="stopRenderingLineAfter",o[o.suggest=113]="suggest",o[o.suggestFontSize=114]="suggestFontSize",o[o.suggestLineHeight=115]="suggestLineHeight",o[o.suggestOnTriggerCharacters=116]="suggestOnTriggerCharacters",o[o.suggestSelection=117]="suggestSelection",o[o.tabCompletion=118]="tabCompletion",o[o.tabIndex=119]="tabIndex",o[o.unicodeHighlighting=120]="unicodeHighlighting",o[o.unusualLineTerminators=121]="unusualLineTerminators",o[o.useShadowDOM=122]="useShadowDOM",o[o.useTabStops=123]="useTabStops",o[o.wordBreak=124]="wordBreak",o[o.wordSeparators=125]="wordSeparators",o[o.wordWrap=126]="wordWrap",o[o.wordWrapBreakAfterCharacters=127]="wordWrapBreakAfterCharacters",o[o.wordWrapBreakBeforeCharacters=128]="wordWrapBreakBeforeCharacters",o[o.wordWrapColumn=129]="wordWrapColumn",o[o.wordWrapOverride1=130]="wordWrapOverride1",o[o.wordWrapOverride2=131]="wordWrapOverride2",o[o.wrappingIndent=132]="wrappingIndent",o[o.wrappingStrategy=133]="wrappingStrategy",o[o.showDeprecated=134]="showDeprecated",o[o.inlayHints=135]="inlayHints",o[o.editorClassName=136]="editorClassName",o[o.pixelRatio=137]="pixelRatio",o[o.tabFocusMode=138]="tabFocusMode",o[o.layoutInfo=139]="layoutInfo",o[o.wrappingInfo=140]="wrappingInfo"})(pE||(pE={}));var mE;(function(o){o[o.TextDefined=0]="TextDefined",o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(mE||(mE={}));var bE;(function(o){o[o.LF=0]="LF",o[o.CRLF=1]="CRLF"})(bE||(bE={}));var _E;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(_E||(_E={}));var vE;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(vE||(vE={}));var CE;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(CE||(CE={}));var yE;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(yE||(yE={}));var wE;(function(o){o[o.DependsOnKbLayout=-1]="DependsOnKbLayout",o[o.Unknown=0]="Unknown",o[o.Backspace=1]="Backspace",o[o.Tab=2]="Tab",o[o.Enter=3]="Enter",o[o.Shift=4]="Shift",o[o.Ctrl=5]="Ctrl",o[o.Alt=6]="Alt",o[o.PauseBreak=7]="PauseBreak",o[o.CapsLock=8]="CapsLock",o[o.Escape=9]="Escape",o[o.Space=10]="Space",o[o.PageUp=11]="PageUp",o[o.PageDown=12]="PageDown",o[o.End=13]="End",o[o.Home=14]="Home",o[o.LeftArrow=15]="LeftArrow",o[o.UpArrow=16]="UpArrow",o[o.RightArrow=17]="RightArrow",o[o.DownArrow=18]="DownArrow",o[o.Insert=19]="Insert",o[o.Delete=20]="Delete",o[o.Digit0=21]="Digit0",o[o.Digit1=22]="Digit1",o[o.Digit2=23]="Digit2",o[o.Digit3=24]="Digit3",o[o.Digit4=25]="Digit4",o[o.Digit5=26]="Digit5",o[o.Digit6=27]="Digit6",o[o.Digit7=28]="Digit7",o[o.Digit8=29]="Digit8",o[o.Digit9=30]="Digit9",o[o.KeyA=31]="KeyA",o[o.KeyB=32]="KeyB",o[o.KeyC=33]="KeyC",o[o.KeyD=34]="KeyD",o[o.KeyE=35]="KeyE",o[o.KeyF=36]="KeyF",o[o.KeyG=37]="KeyG",o[o.KeyH=38]="KeyH",o[o.KeyI=39]="KeyI",o[o.KeyJ=40]="KeyJ",o[o.KeyK=41]="KeyK",o[o.KeyL=42]="KeyL",o[o.KeyM=43]="KeyM",o[o.KeyN=44]="KeyN",o[o.KeyO=45]="KeyO",o[o.KeyP=46]="KeyP",o[o.KeyQ=47]="KeyQ",o[o.KeyR=48]="KeyR",o[o.KeyS=49]="KeyS",o[o.KeyT=50]="KeyT",o[o.KeyU=51]="KeyU",o[o.KeyV=52]="KeyV",o[o.KeyW=53]="KeyW",o[o.KeyX=54]="KeyX",o[o.KeyY=55]="KeyY",o[o.KeyZ=56]="KeyZ",o[o.Meta=57]="Meta",o[o.ContextMenu=58]="ContextMenu",o[o.F1=59]="F1",o[o.F2=60]="F2",o[o.F3=61]="F3",o[o.F4=62]="F4",o[o.F5=63]="F5",o[o.F6=64]="F6",o[o.F7=65]="F7",o[o.F8=66]="F8",o[o.F9=67]="F9",o[o.F10=68]="F10",o[o.F11=69]="F11",o[o.F12=70]="F12",o[o.F13=71]="F13",o[o.F14=72]="F14",o[o.F15=73]="F15",o[o.F16=74]="F16",o[o.F17=75]="F17",o[o.F18=76]="F18",o[o.F19=77]="F19",o[o.NumLock=78]="NumLock",o[o.ScrollLock=79]="ScrollLock",o[o.Semicolon=80]="Semicolon",o[o.Equal=81]="Equal",o[o.Comma=82]="Comma",o[o.Minus=83]="Minus",o[o.Period=84]="Period",o[o.Slash=85]="Slash",o[o.Backquote=86]="Backquote",o[o.BracketLeft=87]="BracketLeft",o[o.Backslash=88]="Backslash",o[o.BracketRight=89]="BracketRight",o[o.Quote=90]="Quote",o[o.OEM_8=91]="OEM_8",o[o.IntlBackslash=92]="IntlBackslash",o[o.Numpad0=93]="Numpad0",o[o.Numpad1=94]="Numpad1",o[o.Numpad2=95]="Numpad2",o[o.Numpad3=96]="Numpad3",o[o.Numpad4=97]="Numpad4",o[o.Numpad5=98]="Numpad5",o[o.Numpad6=99]="Numpad6",o[o.Numpad7=100]="Numpad7",o[o.Numpad8=101]="Numpad8",o[o.Numpad9=102]="Numpad9",o[o.NumpadMultiply=103]="NumpadMultiply",o[o.NumpadAdd=104]="NumpadAdd",o[o.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",o[o.NumpadSubtract=106]="NumpadSubtract",o[o.NumpadDecimal=107]="NumpadDecimal",o[o.NumpadDivide=108]="NumpadDivide",o[o.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",o[o.ABNT_C1=110]="ABNT_C1",o[o.ABNT_C2=111]="ABNT_C2",o[o.AudioVolumeMute=112]="AudioVolumeMute",o[o.AudioVolumeUp=113]="AudioVolumeUp",o[o.AudioVolumeDown=114]="AudioVolumeDown",o[o.BrowserSearch=115]="BrowserSearch",o[o.BrowserHome=116]="BrowserHome",o[o.BrowserBack=117]="BrowserBack",o[o.BrowserForward=118]="BrowserForward",o[o.MediaTrackNext=119]="MediaTrackNext",o[o.MediaTrackPrevious=120]="MediaTrackPrevious",o[o.MediaStop=121]="MediaStop",o[o.MediaPlayPause=122]="MediaPlayPause",o[o.LaunchMediaPlayer=123]="LaunchMediaPlayer",o[o.LaunchMail=124]="LaunchMail",o[o.LaunchApp2=125]="LaunchApp2",o[o.Clear=126]="Clear",o[o.MAX_VALUE=127]="MAX_VALUE"})(wE||(wE={}));var SE;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(SE||(SE={}));var TE;(function(o){o[o.Unnecessary=1]="Unnecessary",o[o.Deprecated=2]="Deprecated"})(TE||(TE={}));var xE;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(xE||(xE={}));var LE;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.TEXTAREA=1]="TEXTAREA",o[o.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",o[o.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",o[o.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",o[o.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",o[o.CONTENT_TEXT=6]="CONTENT_TEXT",o[o.CONTENT_EMPTY=7]="CONTENT_EMPTY",o[o.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",o[o.CONTENT_WIDGET=9]="CONTENT_WIDGET",o[o.OVERVIEW_RULER=10]="OVERVIEW_RULER",o[o.SCROLLBAR=11]="SCROLLBAR",o[o.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",o[o.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(LE||(LE={}));var EE;(function(o){o[o.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",o[o.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",o[o.TOP_CENTER=2]="TOP_CENTER"})(EE||(EE={}));var kE;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(kE||(kE={}));var DE;(function(o){o[o.Left=0]="Left",o[o.Right=1]="Right",o[o.None=2]="None",o[o.LeftOfInjectedText=3]="LeftOfInjectedText",o[o.RightOfInjectedText=4]="RightOfInjectedText"})(DE||(DE={}));var ME;(function(o){o[o.Off=0]="Off",o[o.On=1]="On",o[o.Relative=2]="Relative",o[o.Interval=3]="Interval",o[o.Custom=4]="Custom"})(ME||(ME={}));var AE;(function(o){o[o.None=0]="None",o[o.Text=1]="Text",o[o.Blocks=2]="Blocks"})(AE||(AE={}));var IE;(function(o){o[o.Smooth=0]="Smooth",o[o.Immediate=1]="Immediate"})(IE||(IE={}));var NE;(function(o){o[o.Auto=1]="Auto",o[o.Hidden=2]="Hidden",o[o.Visible=3]="Visible"})(NE||(NE={}));var RE;(function(o){o[o.LTR=0]="LTR",o[o.RTL=1]="RTL"})(RE||(RE={}));var PE;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(PE||(PE={}));var FE;(function(o){o[o.File=0]="File",o[o.Module=1]="Module",o[o.Namespace=2]="Namespace",o[o.Package=3]="Package",o[o.Class=4]="Class",o[o.Method=5]="Method",o[o.Property=6]="Property",o[o.Field=7]="Field",o[o.Constructor=8]="Constructor",o[o.Enum=9]="Enum",o[o.Interface=10]="Interface",o[o.Function=11]="Function",o[o.Variable=12]="Variable",o[o.Constant=13]="Constant",o[o.String=14]="String",o[o.Number=15]="Number",o[o.Boolean=16]="Boolean",o[o.Array=17]="Array",o[o.Object=18]="Object",o[o.Key=19]="Key",o[o.Null=20]="Null",o[o.EnumMember=21]="EnumMember",o[o.Struct=22]="Struct",o[o.Event=23]="Event",o[o.Operator=24]="Operator",o[o.TypeParameter=25]="TypeParameter"})(FE||(FE={}));var OE;(function(o){o[o.Deprecated=1]="Deprecated"})(OE||(OE={}));var HE;(function(o){o[o.Hidden=0]="Hidden",o[o.Blink=1]="Blink",o[o.Smooth=2]="Smooth",o[o.Phase=3]="Phase",o[o.Expand=4]="Expand",o[o.Solid=5]="Solid"})(HE||(HE={}));var VE;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(VE||(VE={}));var WE;(function(o){o[o.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",o[o.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",o[o.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",o[o.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(WE||(WE={}));var BE;(function(o){o[o.None=0]="None",o[o.Same=1]="Same",o[o.Indent=2]="Indent",o[o.DeepIndent=3]="DeepIndent"})(BE||(BE={}));let vv=u(class{static chord(e,t){return Dn(e,t)}},"KeyMod");vv.CtrlCmd=2048;vv.Shift=1024;vv.Alt=512;vv.WinCtrl=256;function nV(){return{editor:void 0,languages:void 0,CancellationTokenSource:ci,Emitter:F,KeyCode:wE,KeyMod:vv,Position:W,Range:T,Selection:ge,SelectionDirection:RE,MarkerSeverity:SE,MarkerTag:TE,Uri:ve,Token:o_}}u(nV,"createMonacoBaseAPI");class iV{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}u(iV,"LRUCachedFunction");class UE{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}u(UE,"CachedFunction");class tc{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}u(tc,"Lazy");var sV;function oV(o){return!o||typeof o!="string"?!0:o.trim().length===0}u(oV,"isFalsyOrWhitespace");const BZ=/{(\d+)}/g;function mo(o,...e){return e.length===0?o:o.replace(BZ,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}u(mo,"format");function sw(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}u(sw,"escape");function Js(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}u(Js,"escapeRegExpCharacters");function UZ(o,e=" "){const t=Cv(o,e);return rV(t,e)}u(UZ,"trim");function Cv(o,e){if(!o||!e)return o;const t=e.length;if(t===0||o.length===0)return o;let n=0;for(;o.indexOf(e,n)===n;)n=n+t;return o.substring(n)}u(Cv,"ltrim");function rV(o,e){if(!o||!e)return o;const t=e.length,n=o.length;if(t===0||n===0)return o;let i=n,s=-1;for(;s=o.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return o.substring(0,i)}u(rV,"rtrim");function GZ(o){return o.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}u(GZ,"convertSimple2RegExpPattern");function zZ(o){return o.replace(/\*/g,"")}u(zZ,"stripWildcards");function aV(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=Js(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(o,n)}u(aV,"createRegExp");function KZ(o){return o.source==="^"||o.source==="^$"||o.source==="$"||o.source==="^\\s*$"?!1:!!(o.exec("")&&o.lastIndex===0)}u(KZ,"regExpLeadsToEndlessLoop");function QT(o){return(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")}u(QT,"regExpFlags");function Va(o){return o.split(/\r\n|\r|\n/)}u(Va,"splitLines");function Pi(o){for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}u(Pi,"firstNonWhitespaceIndex");function xt(o,e=0,t=o.length){for(let n=e;n<t;n++){const i=o.charCodeAt(n);if(i!==32&&i!==9)return o.substring(e,n)}return o.substring(e,t)}u(xt,"getLeadingWhitespace");function Or(o,e=o.length-1){for(let t=e;t>=0;t--){const n=o.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}u(Or,"lastNonWhitespaceIndex");function l_(o,e){return o<e?-1:o>e?1:0}u(l_,"compare");function RI(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){const l=o.charCodeAt(t),c=e.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(RI,"compareSubstring");function GE(o,e){return yv(o,e,0,o.length,0,e.length)}u(GE,"compareIgnoreCase");function yv(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=o.charCodeAt(t),c=e.charCodeAt(i);if(l===c)continue;if(l>=128||c>=128)return RI(o.toLowerCase(),e.toLowerCase(),t,n,i,s);Ic(l)&&(l-=32),Ic(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(yv,"compareSubstringIgnoreCase");function $0(o){return o>=48&&o<=57}u($0,"isAsciiDigit");function Ic(o){return o>=97&&o<=122}u(Ic,"isLowerAsciiLetter");function ua(o){return o>=65&&o<=90}u(ua,"isUpperAsciiLetter");function $g(o,e){return o.length===e.length&&yv(o,e)===0}u($g,"equalsIgnoreCase");function PI(o,e){const t=e.length;return e.length>o.length?!1:yv(o,e,0,t)===0}u(PI,"startsWithIgnoreCase");function oh(o,e){const t=Math.min(o.length,e.length);let n;for(n=0;n<t;n++)if(o.charCodeAt(n)!==e.charCodeAt(n))return n;return t}u(oh,"commonPrefixLength");function c_(o,e){const t=Math.min(o.length,e.length);let n;const i=o.length-1,s=e.length-1;for(n=0;n<t;n++)if(o.charCodeAt(i-n)!==e.charCodeAt(s-n))return n;return t}u(c_,"commonSuffixLength");function In(o){return 55296<=o&&o<=56319}u(In,"isHighSurrogate");function rh(o){return 56320<=o&&o<=57343}u(rh,"isLowSurrogate");function FI(o,e){return(o-55296<<10)+(e-56320)+65536}u(FI,"computeCodePoint");function ow(o,e,t){const n=o.charCodeAt(t);if(In(n)&&t+1<e){const i=o.charCodeAt(t+1);if(rh(i))return FI(n,i)}return n}u(ow,"getNextCodePoint");function jZ(o,e){const t=o.charCodeAt(e-1);if(rh(t)&&e>1){const n=o.charCodeAt(e-2);if(In(n))return FI(n,t)}return t}u(jZ,"getPrevCodePoint");class U1{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=jZ(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=ow(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}u(U1,"CodePointIterator");class d_{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new U1(e,t)}nextGraphemeLength(){const e=Sl.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(MP(i,r)){t.setOffset(s);break}i=r}return t.offset-n}prevGraphemeLength(){const e=Sl.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(MP(r,i)){t.setOffset(s);break}i=r}return n-t.offset}eol(){return this._iterator.eol()}}u(d_,"GraphemeIterator");function OI(o,e){return new d_(o,e).nextGraphemeLength()}u(OI,"nextCharLength");function lV(o,e){return new d_(o,e).prevGraphemeLength()}u(lV,"prevCharLength");function $Z(o,e){e>0&&rh(o.charCodeAt(e))&&e--;const t=e+OI(o,e);return[t-lV(o,t),t]}u($Z,"getCharContainingOffset");let ex;function qZ(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}u(qZ,"makeContainsRtl");function Vf(o){return ex||(ex=qZ()),ex.test(o)}u(Vf,"containsRTL");const YZ=/^[\t\n\r\x20-\x7E]*$/;function wv(o){return YZ.test(o)}u(wv,"isBasicASCII");const cV=/[\u2028\u2029]/;function dV(o){return cV.test(o)}u(dV,"containsUnusualLineTerminators");function od(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}u(od,"isFullWidthCharacter");function HI(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}u(HI,"isEmojiImprecise");const XZ=String.fromCharCode(65279);function VI(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}u(VI,"startsWithUTF8BOM");function ZZ(o,e=!1){return o?(e&&(o=o.replace(/\\./g,"")),o.toLowerCase()!==o):!1}u(ZZ,"containsUppercaseCharacter");function uV(o){return o=o%(2*26),o<26?String.fromCharCode(97+o):String.fromCharCode(65+o-26)}u(uV,"singleLetterHash");function MP(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}u(MP,"breakBetweenGraphemeBreakType");class Sl{static getInstance(){return Sl._INSTANCE||(Sl._INSTANCE=new Sl),Sl._INSTANCE}constructor(){this._data=JZ()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}u(Sl,"GraphemeBreakTree");Sl._INSTANCE=null;function JZ(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}u(JZ,"getGraphemeBreakRawData");function QZ(o,e){if(o===0)return 0;const t=eJ(o,e);if(t!==void 0)return t;const n=new U1(e,o);return n.prevCodePoint(),n.offset}u(QZ,"getLeftDeleteOffset");function eJ(o,e){const t=new U1(e,o);let n=t.prevCodePoint();for(;tJ(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!HI(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}u(eJ,"getOffsetBeforeLastEmojiComponent");function tJ(o){return 127995<=o&&o<=127999}u(tJ,"isEmojiModifier");const nJ=" ";class So{static getInstance(e){return So.cache.get(Array.from(e))}static getLocales(){return So._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}u(So,"AmbiguousCharacters");sV=So;So.ambiguousCharacterData=new tc(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));So.cache=new iV(o=>{function e(c){const d=new Map;for(let h=0;h<c.length;h+=2)d.set(c[h],c[h+1]);return d}u(e,"arrayToMap");function t(c,d){const h=new Map(c);for(const[g,f]of d)h.set(g,f);return h}u(t,"mergeMaps");function n(c,d){if(!c)return d;const h=new Map;for(const[g,f]of c)d.has(g)&&h.set(g,f);return h}u(n,"intersectMaps");const i=sV.ambiguousCharacterData.value;let s=o.filter(c=>!c.startsWith("_")&&c in i);s.length===0&&(s=["_default"]);let r;for(const c of s){const d=e(i[c]);r=n(r,d)}const a=e(i._common),l=t(a,r);return new So(l)});So._locales=new tc(()=>Object.keys(So.ambiguousCharacterData.value).filter(o=>!o.startsWith("_")));class Hr{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Hr.getRawData())),this._data}static isInvisibleCharacter(e){return Hr.getData().has(e)}static get codePoints(){return Hr.getData()}}u(Hr,"InvisibleCharacters");Hr._data=void 0;class rw{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}u(rw,"WindowManager");rw.INSTANCE=new rw;class hV extends z{constructor(){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}u(hV,"DevicePixelRatioMonitor");class gV extends z{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new hV);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}u(gV,"PixelRatioImpl");class fV{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new gV),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}u(fV,"PixelRatioFacade");function WI(o,e){typeof o=="string"&&(o=window.matchMedia(o)),o.addEventListener("change",e)}u(WI,"addMatchMediaChangeListener");const Wf=new fV;function pV(){return rw.INSTANCE.getZoomFactor()}u(pV,"getZoomFactor");const qp=navigator.userAgent,To=qp.indexOf("Firefox")>=0,jc=qp.indexOf("AppleWebKit")>=0,BI=qp.indexOf("Chrome")>=0,Gl=!BI&&qp.indexOf("Safari")>=0,UI=!BI&&!Gl&&jc,iJ=qp.indexOf("Electron/")>=0,mV=qp.indexOf("Android")>=0;let JC=!1;if(window.matchMedia){const o=window.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=window.matchMedia("(display-mode: fullscreen)");JC=o.matches,WI(o,({matches:t})=>{JC&&e.matches||(JC=t)})}function GI(){return JC}u(GI,"isStandalone");const sJ=Object.freeze(Object.defineProperty({__proto__:null,PixelRatio:Wf,addMatchMediaChangeListener:WI,getZoomFactor:pV,isAndroid:mV,isChrome:BI,isElectron:iJ,isFirefox:To,isSafari:Gl,isStandalone:GI,isWebKit:jc,isWebkitWebView:UI},Symbol.toStringTag,{value:"Module"}));class zI{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=dr(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=dr(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=dr(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=dr(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=dr(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=dr(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=dr(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=dr(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=dr(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=dr(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=dr(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}u(zI,"FastDomNode");function dr(o){return typeof o=="number"?`${o}px`:o}u(dr,"numberAsPixels");function dt(o){return new zI(o)}u(dt,"createFastDomNode");function ai(o,e){o instanceof zI?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setFontVariationSettings(e.fontVariationSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.fontVariationSettings=e.fontVariationSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}u(ai,"applyFontInfo");class bV{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}u(bV,"CharWidthRequest");class G1{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");ai(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");ai(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");ai(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");G1._render(l,r),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}u(G1,"DomCharWidthReader");function oJ(o,e){new G1(o,e).read()}u(oJ,"readCharWidths");const fo=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new F,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},rJ=Ye?1.5:1.35,tx=8;class $c{static createFromValidatedSettings(e,t,n){const i=e.get(47),s=e.get(51),r=e.get(50),a=e.get(49),l=e.get(52),c=e.get(64),d=e.get(61);return $c._create(i,s,r,a,l,c,d,t,n)}static _create(e,t,n,i,s,r,a,l,c){r===0?r=rJ*n:r<tx&&(r=r*n),r=Math.round(r),r<tx&&(r=tx);const d=1+(c?0:fo.getZoomLevel()*.1);return n*=d,r*=d,s===zo.TRANSLATE&&(t==="normal"||t==="bold"?s=zo.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new $c({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:s,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=xs.fontFamily,t=$c._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}u($c,"BareFontInfo");const aJ=2;class aw extends $c{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=aJ,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}u(aw,"FontInfo");class _V extends z{constructor(){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._cache=new zE,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new zE,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new aw({pixelRatio:Wf.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const s=new bV(e,t);return n.push(s),i?.push(s),s}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),s=this._createRequest("ｍ",0,t,null),r=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),c=this._createRequest("2",0,t,n),d=this._createRequest("3",0,t,n),h=this._createRequest("4",0,t,n),g=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),m=this._createRequest("7",0,t,n),b=this._createRequest("8",0,t,n),_=this._createRequest("9",0,t,n),C=this._createRequest("→",0,t,n),v=this._createRequest("￫",0,t,null),y=this._createRequest("·",0,t,n),w=this._createRequest(String.fromCharCode(11825),0,t,null),x="|/-_ilm%";for(let O=0,P=x.length;O<P;O++)this._createRequest(x.charAt(O),0,t,n),this._createRequest(x.charAt(O),1,t,n),this._createRequest(x.charAt(O),2,t,n);oJ(e,t);const M=Math.max(a.width,l.width,c.width,d.width,h.width,g.width,f.width,m.width,b.width,_.width);let L=e.fontFeatureSettings===vs.OFF;const E=n[0].width;for(let O=1,P=n.length;L&&O<P;O++){const H=E-n[O].width;if(H<-.001||H>.001){L=!1;break}}let k=!0;return L&&v.width!==E&&(k=!1),v.width>C.width&&(k=!1),new aw({pixelRatio:Wf.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:L,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:k,spaceWidth:r.width,middotWidth:y.width,wsmiddotWidth:w.width,maxDigitWidth:M},!0)}}u(_V,"FontMeasurementsImpl");class zE{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}u(zE,"FontMeasurementsCache");const KE=new _V;var Mr;(function(o){o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[o.DI_DEPENDENCIES]||[]}u(e,"getServiceDependencies"),o.getServiceDependencies=e})(Mr||(Mr={}));const Re=nt("instantiationService");function lJ(o,e,t){e[Mr.DI_TARGET]===e?e[Mr.DI_DEPENDENCIES].push({id:o,index:t}):(e[Mr.DI_DEPENDENCIES]=[{id:o,index:t}],e[Mr.DI_TARGET]=e)}u(lJ,"storeServiceDependency");function nt(o){if(Mr.serviceIds.has(o))return Mr.serviceIds.get(o);const e=u(function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");lJ(e,t,i)},"id");return e.toString=()=>o,Mr.serviceIds.set(o,e),e}u(nt,"createDecorator");const gt=nt("codeEditorService");function Nb(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}u(Nb,"ok");function z1(o,e="Unreachable"){throw new Error(e)}u(z1,"assertNever");function KI(o){if(!o()){debugger;o(),He(new Xr("Assertion Failed"))}}u(KI,"assertFn");function vV(o,e){let t=0;for(;t<o.length-1;){const n=o[t],i=o[t+1];if(!e(n,i))return!1;t++}return!0}u(vV,"checkAdjacentItems");const K1=nt("audioCue");class bt{static register(e){return new bt(e.fileName)}constructor(e){this.fileName=e}}u(bt,"Sound");bt.error=bt.register({fileName:"error.mp3"});bt.warning=bt.register({fileName:"warning.mp3"});bt.foldedArea=bt.register({fileName:"foldedAreas.mp3"});bt.break=bt.register({fileName:"break.mp3"});bt.quickFixes=bt.register({fileName:"quickFixes.mp3"});bt.taskCompleted=bt.register({fileName:"taskCompleted.mp3"});bt.taskFailed=bt.register({fileName:"taskFailed.mp3"});bt.terminalBell=bt.register({fileName:"terminalBell.mp3"});bt.diffLineInserted=bt.register({fileName:"diffLineInserted.mp3"});bt.diffLineDeleted=bt.register({fileName:"diffLineDeleted.mp3"});bt.diffLineModified=bt.register({fileName:"diffLineModified.mp3"});class pt{static register(e){const t=new pt(e.sound,e.name,e.settingsKey);return pt._audioCues.add(t),t}constructor(e,t,n){this.sound=e,this.name=t,this.settingsKey=n}}u(pt,"AudioCue");pt._audioCues=new Set;pt.error=pt.register({name:p("audioCues.lineHasError.name","Error on Line"),sound:bt.error,settingsKey:"audioCues.lineHasError"});pt.warning=pt.register({name:p("audioCues.lineHasWarning.name","Warning on Line"),sound:bt.warning,settingsKey:"audioCues.lineHasWarning"});pt.foldedArea=pt.register({name:p("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:bt.foldedArea,settingsKey:"audioCues.lineHasFoldedArea"});pt.break=pt.register({name:p("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:bt.break,settingsKey:"audioCues.lineHasBreakpoint"});pt.inlineSuggestion=pt.register({name:p("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:bt.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"});pt.terminalQuickFix=pt.register({name:p("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:bt.quickFixes,settingsKey:"audioCues.terminalQuickFix"});pt.onDebugBreak=pt.register({name:p("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:bt.break,settingsKey:"audioCues.onDebugBreak"});pt.noInlayHints=pt.register({name:p("audioCues.noInlayHints","No Inlay Hints on Line"),sound:bt.error,settingsKey:"audioCues.noInlayHints"});pt.taskCompleted=pt.register({name:p("audioCues.taskCompleted","Task Completed"),sound:bt.taskCompleted,settingsKey:"audioCues.taskCompleted"});pt.taskFailed=pt.register({name:p("audioCues.taskFailed","Task Failed"),sound:bt.taskFailed,settingsKey:"audioCues.taskFailed"});pt.terminalCommandFailed=pt.register({name:p("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:bt.error,settingsKey:"audioCues.terminalCommandFailed"});pt.terminalBell=pt.register({name:p("audioCues.terminalBell","Terminal Bell"),sound:bt.terminalBell,settingsKey:"audioCues.terminalBell"});pt.notebookCellCompleted=pt.register({name:p("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:bt.taskCompleted,settingsKey:"audioCues.notebookCellCompleted"});pt.notebookCellFailed=pt.register({name:p("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:bt.taskFailed,settingsKey:"audioCues.notebookCellFailed"});pt.diffLineInserted=pt.register({name:p("audioCues.diffLineInserted","Diff Line Inserted"),sound:bt.diffLineInserted,settingsKey:"audioCues.diffLineInserted"});pt.diffLineDeleted=pt.register({name:p("audioCues.diffLineDeleted","Diff Line Deleted"),sound:bt.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"});pt.diffLineModified=pt.register({name:p("audioCues.diffLineModified","Diff Line Modified"),sound:bt.diffLineModified,settingsKey:"audioCues.diffLineModified"});function nx(...o){switch(o.length){case 1:return p("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",o[0]);case 2:return p("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",o[0],o[1]);case 3:return p("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",o[0],o[1],o[2]);default:return}}u(nx,"hintDidYouMean");const cJ=p("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),dJ=p("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let du=u(class jE{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw kI(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(nx("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(nx("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(nx("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=jE._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(cJ);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(dJ);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!n){e++;break}else s===91?n=!0:s===92?t=!0:s===93&&(n=!1);e++}for(;e<this._input.length&&jE._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},"Scanner");du._regexFlags=new Set(["i","g","s","m","y","u"].map(o=>o.charCodeAt(0)));du._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const ki=new Map;ki.set("false",!1);ki.set("true",!0);ki.set("isMac",Ye);ki.set("isLinux",bi);ki.set("isWindows",li);ki.set("isWeb",Ld);ki.set("isMacNative",Ye&&!Ld);ki.set("isEdge",GX);ki.set("isFirefox",BX);ki.set("isChrome",GH);ki.set("isSafari",UX);const uJ=Object.prototype.hasOwnProperty,hJ={regexParsingWithErrorRecovery:!0},gJ=p("contextkey.parser.error.emptyString","Empty context key expression"),fJ=p("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),pJ=p("contextkey.parser.error.noInAfterNot","'in' after 'not'."),AP=p("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),mJ=p("contextkey.parser.error.unexpectedToken","Unexpected token"),bJ=p("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),_J=p("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),vJ=p("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let CV=u(class Xm{constructor(e=hJ){this._config=e,this._scanner=new du,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:gJ,offset:0,lexeme:"",additionalInfo:fJ});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),i=n.type===17?bJ:void 0;throw this._parsingErrors.push({message:mJ,offset:n.offset,lexeme:du.getLexeme(n),additionalInfo:i}),Xm._parseError}return t}catch(t){if(t!==Xm._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Z.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Z.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Fi.INSTANCE;case 12:return this._advance(),$i.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,AP),t?.negate()}case 17:return this._advance(),Dd.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Z.true();case 12:return this._advance(),Z.false();case 0:{this._advance();const t=this._expr();return this._consume(1,AP),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);const s=i.lexeme,r=s.lastIndexOf("/"),a=r===s.length-1?void 0:this._removeFlagsGY(s.substring(r+1));let l;try{l=new RegExp(s.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",i)}return Bf.create(t,l)}switch(i.type){case 10:case 19:{const s=[i.lexeme];this._advance();let r=this._peek(),a=0;for(let g=0;g<i.lexeme.length;g++)i.lexeme.charCodeAt(g)===40?a++:i.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<r.lexeme.length;g++)r.lexeme.charCodeAt(g)===40?a++:i.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;s.push(du.getLexeme(r)),this._advance(),r=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let h;try{h=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",i)}return Z.regex(t,h)}case 18:{const s=i.lexeme;this._advance();let r=null;if(!oV(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),d=s[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(r===null)throw this._errExpectedButGot("REGEX",i);return Bf.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,pJ);const i=this._value();return Z.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();const i=this._value();if(this._previous().type===18)return Z.equals(t,i);switch(i){case"true":return Z.has(t);case"false":return Z.not(t);default:return Z.equals(t,i)}}case 4:{this._advance();const i=this._value();if(this._previous().type===18)return Z.notEquals(t,i);switch(i){case"true":return Z.not(t);case"false":return Z.has(t);default:return Z.notEquals(t,i)}}case 5:return this._advance(),kv.create(t,this._value());case 6:return this._advance(),Dv.create(t,this._value());case 7:return this._advance(),Lv.create(t,this._value());case 8:return this._advance(),Ev.create(t,this._value());case 13:return this._advance(),Z.in(t,this._value());default:return Z.has(t)}}case 20:throw this._parsingErrors.push({message:_J,offset:e.offset,lexeme:"",additionalInfo:vJ}),Xm._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const i=p("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,du.getLexeme(t)),s=t.offset,r=du.getLexeme(t);return this._parsingErrors.push({message:i,offset:s,lexeme:r,additionalInfo:n}),Xm._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},"Parser");CV._parseError=new Error;class Z{static false(){return Fi.INSTANCE}static true(){return $i.INSTANCE}static has(e){return kd.create(e)}static equals(e,t){return Yp.create(e,t)}static notEquals(e,t){return xv.create(e,t)}static regex(e,t){return Bf.create(e,t)}static in(e,t){return Sv.create(e,t)}static notIn(e,t){return Tv.create(e,t)}static not(e){return Dd.create(e)}static and(...e){return Nc.create(e,null,!0)}static or(...e){return ma.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}u(Z,"ContextKeyExpr");Z._parser=new CV({regexParsingWithErrorRecovery:!1});function CJ(o,e){const t=o?o.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}u(CJ,"expressionsAreEqualWithConstantSubstitution");function Rb(o,e){return o.cmp(e)}u(Rb,"cmp");class Fi{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return $i.INSTANCE}}u(Fi,"ContextKeyFalseExpr");Fi.INSTANCE=new Fi;class $i{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Fi.INSTANCE}}u($i,"ContextKeyTrueExpr");$i.INSTANCE=new $i;class kd{static create(e,t=null){const n=ki.get(e);return typeof n=="boolean"?n?$i.INSTANCE:Fi.INSTANCE:new kd(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:wV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ki.get(this.key);return typeof e=="boolean"?e?$i.INSTANCE:Fi.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Dd.create(this.key,this)),this.negated}}u(kd,"ContextKeyDefinedExpr");class Yp{static create(e,t,n=null){if(typeof t=="boolean")return t?kd.create(e,n):Dd.create(e,n);const i=ki.get(e);return typeof i=="boolean"?t===(i?"true":"false")?$i.INSTANCE:Fi.INSTANCE:new Yp(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ki.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?$i.INSTANCE:Fi.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xv.create(this.key,this.value,this)),this.negated}}u(Yp,"ContextKeyEqualsExpr");class Sv{static create(e,t){return new Sv(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?uJ.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Tv.create(this.key,this.valueKey)),this.negated}}u(Sv,"ContextKeyInExpr");class Tv{static create(e,t){return new Tv(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=Sv.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}u(Tv,"ContextKeyNotInExpr");class xv{static create(e,t,n=null){if(typeof t=="boolean")return t?Dd.create(e,n):kd.create(e,n);const i=ki.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Fi.INSTANCE:$i.INSTANCE:new xv(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ki.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Fi.INSTANCE:$i.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Yp.create(this.key,this.value,this)),this.negated}}u(xv,"ContextKeyNotEqualsExpr");class Dd{static create(e,t=null){const n=ki.get(e);return typeof n=="boolean"?n?Fi.INSTANCE:$i.INSTANCE:new Dd(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:wV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ki.get(this.key);return typeof e=="boolean"?e?Fi.INSTANCE:$i.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kd.create(this.key,this)),this.negated}}u(Dd,"ContextKeyNotExpr");function j1(o,e){if(typeof o=="string"){const t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):Fi.INSTANCE}u(j1,"withFloatOrStr");class Lv{static create(e,t,n=null){return j1(t,i=>new Lv(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Dv.create(this.key,this.value,this)),this.negated}}u(Lv,"ContextKeyGreaterExpr");class Ev{static create(e,t,n=null){return j1(t,i=>new Ev(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kv.create(this.key,this.value,this)),this.negated}}u(Ev,"ContextKeyGreaterEqualsExpr");class kv{static create(e,t,n=null){return j1(t,i=>new kv(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Ev.create(this.key,this.value,this)),this.negated}}u(kv,"ContextKeySmallerExpr");class Dv{static create(e,t,n=null){return j1(t,i=>new Dv(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Kh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Lv.create(this.key,this.value,this)),this.negated}}u(Dv,"ContextKeySmallerEqualsExpr");class Bf{static create(e,t){return new Bf(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=$1.create(this)),this.negated}}u(Bf,"ContextKeyRegexExpr");class $1{static create(e){return new $1(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}u($1,"ContextKeyNotRegexExpr");function yV(o){let e=null;for(let t=0,n=o.length;t<n;t++){const i=o[t].substituteConstants();if(o[t]!==i&&e===null){e=[];for(let s=0;s<t;s++)e[s]=o[s]}e!==null&&(e[t]=i)}return e===null?o:e}u(yV,"eliminateConstantsInArray");class Nc{static create(e,t,n){return Nc._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Rb(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=yV(this.expr);return e===this.expr?this:Nc.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const i=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Fi.INSTANCE;if(r.type===6){i.push(...r.expr);continue}i.push(r)}if(i.length===0&&s)return $i.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(Rb);for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];for(;i.length>1;){const r=i[i.length-1];if(r.type!==9)break;i.pop();const a=i.pop(),l=i.length===0,c=ma.create(r.expr.map(d=>Nc.create([d,a],null,n)),null,l);c&&(i.push(c),i.sort(Rb))}if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return Fi.INSTANCE;if(i.length===1)return i[0]}return new Nc(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=ma.create(e,this,!0)}return this.negated}}u(Nc,"ContextKeyAndExpr");class ma{static create(e,t,n){return ma._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Rb(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=yV(this.expr);return e===this.expr?this:ma.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return $i.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&s)return Fi.INSTANCE;i.sort(Rb)}if(i.length!==0){if(i.length===1)return i[0];for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return $i.INSTANCE;if(i.length===1)return i[0]}return new ma(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const s of NP(t))for(const r of NP(n))i.push(Nc.create([s,r],null,!1));e.unshift(ma.create(i,null,!1))}this.negated=ma.create(e,this,!0)}return this.negated}}u(ma,"ContextKeyOrExpr");class ue extends kd{static all(){return ue._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?ue._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&ue._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Yp.create(this.key,e)}}u(ue,"RawContextKey");ue._info=[];const Me=nt("contextKeyService");function wV(o,e){return o<e?-1:o>e?1:0}u(wV,"cmp1");function Kh(o,e,t,n){return o<t?-1:o>t?1:e<n?-1:e>n?1:0}u(Kh,"cmp2");function $E(o,e){if(o.type===0||e.type===1)return!0;if(o.type===9)return e.type===9?IP(o.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if($E(o,t))return!0;return!1}if(o.type===6){if(e.type===6)return IP(e.expr,o.expr);for(const t of o.expr)if($E(t,e))return!0;return!1}return o.equals(e)}u($E,"implies");function IP(o,e){let t=0,n=0;for(;t<o.length&&n<e.length;){const i=o[t].cmp(e[n]);if(i<0)return!1;i===0&&t++,n++}return t===o.length}u(IP,"allElementsIncluded");function NP(o){return o.type===9?o.expr:[o]}u(NP,"getTerminals");const Md=nt("accessibilityService"),Mv=new ue("accessibilityModeEnabled",!1);var yJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ix=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const wJ={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0,findResultLoop:!0};let qE=u(class extends z{constructor(e,t={},n,i,s){super(),this._audioCueService=n,this._codeEditorService=i,this._accessibilityService=s,this._onDidUpdate=this._register(new F),this._editor=e,this._options=bv(t,wJ,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(r=>{this.ignoreSelectionChange||(this._updateAccessibilityState(r.position.lineNumber),this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(r=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new T(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new T(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new T(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>T.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){const r=this.ranges[i].range;n.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Nb(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t),this._updateAccessibilityState(i.lineNumber,!0)}finally{this.ignoreSelectionChange=!1}}_updateAccessibilityState(e,t){var n;const i=(n=this._editor.getModel())===null||n===void 0?void 0:n.modified;if(!i)return;const s=i.getLineDecorations(e).find(a=>a.options.className==="line-insert");if(s)this._audioCueService.playAudioCue(pt.diffLineModified,!0);else if(t)this._audioCueService.playAudioCue(pt.diffLineDeleted,!0);else return;const r=this._codeEditorService.getActiveCodeEditor();t&&r&&s&&this._accessibilityService.isScreenReaderOptimized()&&(r.setSelection({startLineNumber:e,startColumn:0,endLineNumber:e,endColumn:Number.MAX_VALUE}),r.writeScreenReaderContent("diff-navigation"))}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this.canNavigateNext()&&this._move(!0,e)}previous(e=0){this.canNavigatePrevious()&&this._move(!1,e)}canNavigateNext(){return this.canNavigateLoop()||this.nextIdx<this.ranges.length-1}canNavigatePrevious(){return this.canNavigateLoop()||this.nextIdx!==0}canNavigateLoop(){return!!this._options.findResultLoop}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}},"DiffNavigator");qE=yJ([ix(2,K1),ix(3,gt),ix(4,Md)],qE);const Av={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Qs;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(Qs||(Qs={}));var Xs;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(Xs||(Xs={}));var Ar;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(Ar||(Ar={}));class Pb{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&qs(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}u(Pb,"TextModelResolvedOptions");class Uf{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}u(Uf,"FindMatch");function SJ(o){return o&&typeof o.read=="function"}u(SJ,"isITextSnapshot");class QC{constructor(e,t,n,i,s,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}}u(QC,"ValidAnnotatedEditOperation");class SV{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}u(SV,"SearchData");class TV{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}u(TV,"ApplyEditsResult");function TJ(o){return!o.isTooLargeForSyncing()&&!o.isForSimpleWidget}u(TJ,"shouldSynchronizeModel");var vn;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(vn||(vn={}));class ey{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}u(ey,"StandardAutoClosingPairConditional");class xV{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)xm(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),xm(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),xm(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),xm(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&xm(this.autoClosingPairsCloseSingleChar,t.close,t)}}u(xV,"AutoClosingPairs");function xm(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}u(xm,"appendEntry");function q1(o,e){const t=o.getCount(),n=o.findTokenIndexAtOffset(e),i=o.getLanguageId(n);let s=n;for(;s+1<t&&o.getLanguageId(s+1)===i;)s++;let r=n;for(;r>0&&o.getLanguageId(r-1)===i;)r--;return new LV(o,i,r,s+1,o.getStartOffset(r),o.getEndOffset(s))}u(q1,"createScopedLineTokens");class LV{constructor(e,t,n,i,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}u(LV,"ScopedLineTokens");function sa(o){return(o&3)!==0}u(sa,"ignoreBracketsInToken");class ah{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new ey(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new ey({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new ey({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:ah.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:ah.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}u(ah,"CharacterPairSupport");ah.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;ah.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;const RP=typeof Buffer<"u";let sx;class Iv{static wrap(e){return RP&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new Iv(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return RP?this.buffer.toString():(sx||(sx=new TextDecoder),sx.decode(this.buffer))}}u(Iv,"VSBuffer");function xJ(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}u(xJ,"readUInt16LE");function LJ(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}u(LJ,"writeUInt16LE");function gr(o,e){return o[e]*Math.pow(2,24)+o[e+1]*Math.pow(2,16)+o[e+2]*Math.pow(2,8)+o[e+3]}u(gr,"readUInt32BE");function fr(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}u(fr,"writeUInt32BE");function PP(o,e){return o[e]}u(PP,"readUInt8");function FP(o,e,t){o[t]=e}u(FP,"writeUInt8");let ox;function EV(){return ox||(ox=new TextDecoder("UTF-16LE")),ox}u(EV,"getUTF16LE_TextDecoder");let rx;function EJ(){return rx||(rx=new TextDecoder("UTF-16BE")),rx}u(EJ,"getUTF16BE_TextDecoder");let ax;function kV(){return ax||(ax=UH()?EV():EJ()),ax}u(kV,"getPlatformTextDecoder");function kJ(o,e,t){const n=new Uint16Array(o.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?DJ(o,e,t):EV().decode(n)}u(kJ,"decodeUTF16LE");function DJ(o,e,t){const n=[];let i=0;for(let s=0;s<t;s++){const r=xJ(o,e);e+=2,n[i++]=String.fromCharCode(r)}return n.join("")}u(DJ,"compatDecodeUTF16LE");class jh{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return kV().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||In(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}u(jh,"StringBuilder");class u_{constructor(e,t,n,i,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=r,this._openSet=u_._toSet(this.open),this._closeSet=u_._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}u(u_,"RichEditBracket");function MJ(o){const e=o.length;o=o.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=u((r,a)=>{const[l,c]=r,[d,h]=a;return l===d||l===h||c===d||c===h},"areOverlapping"),i=u((r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)},"mergeGroups");for(let r=0;r<e;r++){const a=o[r];for(let l=r+1;l<e;l++){const c=o[l];n(a,c)&&i(t[r],t[l])}}const s=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,h]=o[c];a.push(d),l.push(h)}a.length>0&&s.push({open:a,close:l})}return s}u(MJ,"groupFuzzyBrackets");class DV{constructor(e,t){this._richEditBracketsBrand=void 0;const n=MJ(t);this.brackets=n.map((i,s)=>new u_(e,s,i.open,i.close,AJ(i.open,i.close,n,s),IJ(i.open,i.close,n,s))),this.forwardRegex=NJ(this.brackets),this.reversedRegex=RJ(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}u(DV,"RichEditBrackets");function MV(o,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const r=e[i];for(const a of r.open)a.indexOf(o)>=0&&n.push(a);for(const a of r.close)a.indexOf(o)>=0&&n.push(a)}}u(MV,"collectSuperstrings");function AV(o,e){return o.length-e.length}u(AV,"lengthcmp");function Y1(o){if(o.length<=1)return o;const e=[],t=new Set;for(const n of o)t.has(n)||(e.push(n),t.add(n));return e}u(Y1,"unique");function AJ(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)MV(i[s],t,n,i);return i=Y1(i),i.sort(AV),i.reverse(),X1(i)}u(AJ,"getRegexForBracketPair");function IJ(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)MV(i[s],t,n,i);return i=Y1(i),i.sort(AV),i.reverse(),X1(i.map(jI))}u(IJ,"getReversedRegexForBracketPair");function NJ(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Y1(e),X1(e)}u(NJ,"getRegexForBrackets");function RJ(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Y1(e),X1(e.map(jI))}u(RJ,"getReversedRegexForBrackets");function PJ(o){const e=/^[\w ]+$/.test(o);return o=Js(o),e?`\\b${o}\\b`:o}u(PJ,"prepareBracketForRegExp$1");function X1(o){const e=`(${o.map(PJ).join(")|(")})`;return aV(e,!0)}u(X1,"createBracketOrRegExp");const jI=function(){function o(n){const i=new Uint16Array(n.length);let s=0;for(let r=n.length-1;r>=0;r--)i[s++]=n.charCodeAt(r);return kV().decode(i)}u(o,"reverse");let e=null,t=null;return u(function(i){return e!==i&&(e=i,t=o(e)),t},"toReversedString")}();class uo{static _findPrevBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=n.length-(s.index||0),a=s[0].length,l=i+r;return new T(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=jI(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=s.index||0,a=s[0].length;if(a===0)return null;const l=i+r;return new T(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const r=n.substring(i,s);return this.findNextBracketInText(e,t,r,i)}}u(uo,"BracketsUtils");class IV{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return id(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(sa(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=uo.findPrevBracketInRange(s,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}u(IV,"BracketElectricCharacterSupport");function q0(o){return o.global&&(o.lastIndex=0),!0}u(q0,"resetGlobalRegex");class NV{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&q0(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&q0(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&q0(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&q0(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}u(NV,"IndentRulesSupport");class Cu{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Cu._createOpenBracketRegExp(t[0]),i=Cu._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:vn.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,r=this._brackets.length;s<r;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:vn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Js(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Cu._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Js(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Cu._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return He(t),null}}}u(Cu,"OnEnterSupport");const lt=nt("configurationService");function YE(o,e){const t=Object.create(null);for(const n in o)RV(t,n,o[n],e);return t}u(YE,"toValuesTree");function RV(o,e,t,n){const i=e.split("."),s=i.pop();let r=o;for(let a=0;a<i.length;a++){const l=i[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[s]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}u(RV,"addToValueTree");function FJ(o,e){const t=e.split(".");PV(o,t)}u(FJ,"removeFromValueTree");function PV(o,e){const t=e.shift();if(e.length===0){delete o[t];return}if(Object.keys(o).indexOf(t)!==-1){const n=o[t];typeof n=="object"&&!Array.isArray(n)&&(PV(n,e),Object.keys(n).length===0&&delete o[t])}}u(PV,"doRemoveFromValueTree");function OP(o,e,t){function n(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}u(n,"accessSetting");const i=e.split("."),s=n(o,i);return typeof s>"u"?t:s}u(OP,"getConfigurationValue");function OJ(o){return o.replace(/[\[\]]/g,"")}u(OJ,"getLanguageTagSettingPlainKey");const Wt=nt("languageService");class Cr{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}u(Cr,"SyncDescriptor");const FV=[];function at(o,e,t){e instanceof Cr||(e=new Cr(e,[],!!t)),FV.push([o,e])}u(at,"registerSingleton");function HP(){return FV}u(HP,"getSingletonServiceDescriptors");class OV{constructor(){this.data=new Map}add(e,t){Nb(Ki(e)),Nb(as(t)),Nb(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}u(OV,"RegistryImpl");const Kt=new OV,rs=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),Z1={JSONContribution:"base.contributions.json"};function HJ(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}u(HJ,"normalizeId");class HV{constructor(){this._onDidChangeSchema=new F,this.schemasById={}}registerSchema(e,t){this.schemasById[HJ(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}u(HV,"JSONContributionRegistry");const VJ=new HV;Kt.add(Z1.JSONContribution,VJ);const ja={Configuration:"base.contributions.configuration"},Lm="vscode://schemas/settings/resourceLanguage",VP=Kt.as(Z1.JSONContribution);class VV{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new F,this._onDidUpdateConfiguration=new F,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:p("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},VP.registerSchema(Lm,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),VP.registerSchema(Lm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var n;const i=[];for(const{overrides:s,source:r}of e)for(const a in s)if(t.add(a),rd.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(n=l?.valuesSources)!==null&&n!==void 0?n:new Map;if(r)for(const f of Object.keys(s[a]))c.set(f,r);const d=Object.assign(Object.assign({},l?.value||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:d,valuesSources:c});const h=OJ(a),g={type:"object",default:d,description:p("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",h),$ref:Lm,defaultDefaultValue:d,source:Ki(r)?void 0:r,defaultValueSource:r};i.push(...lw(a)),this.configurationProperties[a]=g,this.defaultLanguageConfigurationOverridesNode.properties[a]=g}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(i)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}validateAndRegisterProperties(e,t=!0,n,i,s=3,r){var a;s=Ws(e.scope)?s:e.scope;const l=e.properties;if(l)for(const d in l){const h=l[d];if(t&&UJ(d,h)){delete l[d];continue}if(h.source=n,h.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,h),rd.test(d)?h.scope=void 0:(h.scope=Ws(h.scope)?s:h.scope,h.restricted=Ws(h.restricted)?!!i?.includes(d):h.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((a=l[d].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),r.add(d)}const c=e.allOf;if(c)for(const d of c)this.validateAndRegisterProperties(d,t,n,i,s,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=u(n=>{const i=n.properties;if(i)for(const r in i)this.updateSchema(r,i[r]);const s=n.allOf;s?.forEach(t)},"register");t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Lm};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),p("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n?.value,s=n?.source;ws(i)&&(i=t.defaultDefaultValue,s=void 0),ws(i)&&(i=BJ(t.type)),t.default=i,t.defaultValueSource=s}}u(VV,"ConfigurationRegistry");const WV="\\[([^\\]]+)\\]",WP=new RegExp(WV,"g"),WJ=`^(${WV})+$`,rd=new RegExp(WJ);function lw(o){const e=[];if(rd.test(o)){let t=WP.exec(o);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=WP.exec(o)}}return id(e)}u(lw,"overrideIdentifiersFromKey");function BJ(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}u(BJ,"getDefaultValue");const ty=new VV;Kt.add(ja.Configuration,ty);function UJ(o,e){var t,n,i,s;return o.trim()?rd.test(o)?p("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):ty.getConfigurationProperties()[o]!==void 0?p("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):!((t=e.policy)===null||t===void 0)&&t.name&&ty.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?p("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,(i=e.policy)===null||i===void 0?void 0:i.name,ty.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:p("config.property.empty","Cannot register an empty property")}u(UJ,"validateProperty");const GJ={ModesRegistry:"editor.modesRegistry"};class BV{constructor(){this._onDidChangeLanguages=new F,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}u(BV,"EditorModesRegistry");const Gf=new BV;Kt.add(GJ.ModesRegistry,Gf);const Zs="plaintext",zJ=".txt";Gf.registerLanguage({id:Zs,extensions:[zJ],aliases:[p("plainText.alias","Plain Text"),"text"],mimetypes:[rs.text]});Kt.as(ja.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class UV{constructor(e,t){this.languageId=e;const n=t.brackets?BP(t.brackets):[],i=new UE(a=>{const l=new Set;return{info:new GV(this,a,l),closing:l}}),s=new UE(a=>{const l=new Set,c=new Set;return{info:new zV(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=i.get(a),d=s.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?BP(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=i.get(a),d=s.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}u(UV,"LanguageBracketsConfiguration");function BP(o){return o.filter(([e,t])=>e!==""&&t!=="")}u(BP,"filterValidBrackets");class $I{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}u($I,"BracketKindBase");class GV extends $I{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}u(GV,"OpeningBracketKind");class zV extends $I{constructor(e,t,n,i){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=i,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}u(zV,"ClosingBracketKind");var KJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UP=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class ny{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}u(ny,"LanguageConfigurationServiceChangeEvent");const zt=nt("languageConfigurationService");let XE=u(class extends z{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new qV),this.onDidChangeEmitter=this._register(new F),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(ZE));this._register(this.configurationService.onDidChangeConfiguration(i=>{const s=i.change.keys.some(a=>n.has(a)),r=i.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new ny(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new ny(a)))})),this._register(this._registry.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new ny(i.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=jJ(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}},"LanguageConfigurationService");XE=KJ([UP(0,lt),UP(1,Wt)],XE);function jJ(o,e,t,n){let i=e.getLanguageConfiguration(o);if(!i){if(!n.isRegisteredLanguageId(o))return new Nu(o,{});i=new Nu(o,{})}const s=$J(i.languageId,t),r=$V([i.underlyingConfig,s]);return new Nu(i.languageId,r)}u(jJ,"computeConfig");const ZE={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function $J(o,e){const t=e.getValue(ZE.brackets,{overrideIdentifier:o}),n=e.getValue(ZE.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:GP(t),colorizedBracketPairs:GP(n)}}u($J,"getCustomizedLanguageConfig");function GP(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}u(GP,"validateBracketPairs");function KV(o,e,t){const n=o.getLineContent(e);let i=xt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}u(KV,"getIndentationAtPosition");function ff(o,e,t){o.tokenization.forceTokenization(e);const n=o.tokenization.getLineTokens(e),i=typeof t>"u"?o.getLineMaxColumn(e)-1:t-1;return q1(n,i)}u(ff,"getScopedLineTokens");class jV{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new JE(e,t,++this._order);return this._entries.push(n),this._resolved=null,Oe(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Nu(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(JE.cmp),$V(this._entries.map(e=>e.configuration)))}}u(jV,"ComposedLanguageConfiguration");function $V(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}u($V,"combineLanguageConfigurations");class JE{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}u(JE,"LanguageConfigurationContribution");class QE{constructor(e){this.languageId=e}}u(QE,"LanguageConfigurationChangeEvent");class qV extends z{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._register(this.register(Zs,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new jV(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new QE(e)),Oe(()=>{s.dispose(),this._onDidChange.fire(new QE(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}u(qV,"LanguageConfigurationRegistry");class Nu{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Cu(this.underlyingConfig):null,this.comments=Nu._handleComments(this.underlyingConfig),this.characterPair=new ah(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||SI,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new NV(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new UV(e,this.underlyingConfig)}getWordDefinition(){return KH(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new DV(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new IV(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new xV(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}}u(Nu,"ResolvedLanguageConfiguration");at(zt,XE,1);const zf=new class{clone(){return this}equals(o){return this===o}};function qI(o,e){return new B1([new o_(0,"",o)],e)}u(qI,"nullTokenize");function J1(o,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new _v(t,e===null?zf:e)}u(J1,"nullTokenizeEncoded");const en=nt("modelService"),YV=Symbol("MicrotaskDelay");var ho=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Zm=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};function ek(o){return!!o&&typeof o.then=="function"}u(ek,"isThenable$1");function On(o){const e=new ci,t=o(e.token),n=new Promise((i,s)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),s(new ec)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),i(a)},a=>{r.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}u(On,"createCancelablePromise");function Q1(o,e,t){return new Promise((n,i)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(t)});o.then(n,i).finally(()=>s.dispose())})}u(Q1,"raceCancellation");class XV{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=u(()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n},"onComplete");this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}u(XV,"Throttler");const qJ=u((o,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},"timeoutDeferred"),YJ=u(o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},"microtaskDeferred");class tr{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=u(()=>{var i;this.deferred=null,(i=this.doResolve)===null||i===void 0||i.call(this,null)},"fn");return this.deferred=t===YV?YJ(n):qJ(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new ec),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}u(tr,"Delayer");class YI{constructor(e){this.delayer=new tr(e),this.throttler=new XV}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}u(YI,"ThrottledDelayer");function ad(o,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{s.dispose(),t()},o),s=e.onCancellationRequested(()=>{clearTimeout(i),s.dispose(),n(new ec)})}):On(t=>ad(o,t))}u(ad,"timeout");function lh(o,e=0){const t=setTimeout(o,e);return Oe(()=>clearTimeout(t))}u(lh,"disposableTimeout");function ZV(o,e=n=>!!n,t=null){let n=0;const i=o.length,s=u(()=>{if(n>=i)return Promise.resolve(t);const r=o[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):s())},"loop");return s()}u(ZV,"first");class io{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}u(io,"TimeoutTimer");class Xp{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}u(Xp,"IntervalTimer");class yt{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}u(yt,"RunOnceScheduler");let Tl;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Tl=u(o=>{BH(()=>{if(e)return;const t=Date.now()+15;o(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}},"runWhenIdle"):Tl=u((o,e)=>{const t=requestIdleCallback(o,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}},"runWhenIdle")})();class Fb{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Tl(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}u(Fb,"IdleValue");class eS{get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new ec),this.rejected=!0,e()})}}u(eS,"DeferredPromise");var tk;(function(o){function e(n){return ho(this,void 0,void 0,function*(){let i;const s=yield Promise.all(n.map(r=>r.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return s})}u(e,"settled"),o.settled=e;function t(n){return new Promise((i,s)=>ho(this,void 0,void 0,function*(){try{yield n(i,s)}catch(r){s(r)}}))}u(t,"withAsyncBody"),o.withAsyncBody=t})(tk||(tk={}));class gn{static fromArray(e){return new gn(t=>{t.emitMany(e)})}static fromPromise(e){return new gn(t=>ho(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new gn(t=>ho(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>ho(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new gn(t=>ho(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,s,r;return ho(this,void 0,void 0,function*(){var a,l,c,d;try{for(i=!0,s=Zm(n);r=yield s.next(),a=r.done,!a;){d=r.value,i=!1;try{const h=d;t.emitOne(h)}finally{i=!0}}}catch(h){l={error:h}}finally{try{!i&&!a&&(c=s.return)&&(yield c.call(s))}finally{if(l)throw l.error}}})}))}))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new F,queueMicrotask(()=>ho(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:()=>ho(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield pe.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new gn(n=>ho(this,void 0,void 0,function*(){var i,s,r,a;try{for(var l=!0,c=Zm(e),d;d=yield c.next(),i=d.done,!i;){a=d.value,l=!1;try{const h=a;n.emitOne(t(h))}finally{l=!0}}}catch(h){s={error:h}}finally{try{!l&&!i&&(r=c.return)&&(yield r.call(c))}finally{if(s)throw s.error}}}))}map(e){return gn.map(this,e)}static filter(e,t){return new gn(n=>ho(this,void 0,void 0,function*(){var i,s,r,a;try{for(var l=!0,c=Zm(e),d;d=yield c.next(),i=d.done,!i;){a=d.value,l=!1;try{const h=a;t(h)&&n.emitOne(h)}finally{l=!0}}}catch(h){s={error:h}}finally{try{!l&&!i&&(r=c.return)&&(yield r.call(c))}finally{if(s)throw s.error}}}))}filter(e){return gn.filter(this,e)}static coalesce(e){return gn.filter(e,t=>!!t)}coalesce(){return gn.coalesce(this)}static toPromise(e){var t,n,i,s,r,a,l;return ho(this,void 0,void 0,function*(){const c=[];try{for(t=!0,n=Zm(e);i=yield n.next(),s=i.done,!s;){l=i.value,t=!1;try{const d=l;c.push(d)}finally{t=!0}}}catch(d){r={error:d}}finally{try{!t&&!s&&(a=n.return)&&(yield a.call(n))}finally{if(r)throw r.error}}return c})}toPromise(){return gn.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}u(gn,"AsyncIterableObject");gn.EMPTY=gn.fromArray([]);class JV extends gn{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}u(JV,"CancelableAsyncIterableObject");function XJ(o){const e=new ci,t=o(e.token);return new JV(e,n=>ho(this,void 0,void 0,function*(){var i,s,r,a;const l=e.token.onCancellationRequested(()=>{l.dispose(),e.dispose(),n.reject(new ec)});try{try{for(var c=!0,d=Zm(t),h;h=yield d.next(),i=h.done,!i;){a=h.value,c=!1;try{const g=a;if(e.token.isCancellationRequested)return;n.emitOne(g)}finally{c=!0}}}catch(g){s={error:g}}finally{try{!c&&!i&&(r=d.return)&&(yield r.call(d))}finally{if(s)throw s.error}}l.dispose(),e.dispose()}catch(g){l.dispose(),e.dispose(),n.reject(g)}}))}u(XJ,"createCancelableAsyncIterable");const ZJ="$initialize";let zP=!1;function nk(o){Ld&&(zP||(zP=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(o.message))}u(nk,"logOnceWebWorkerWarning");class QV{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}u(QV,"RequestMessage");class ik{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}u(ik,"ReplyMessage");class e3{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}u(e3,"SubscribeEventMessage");class t3{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}u(t3,"EventMessage");class n3{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}u(n3,"UnsubscribeEventMessage");class i3{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new QV(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new F({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new e3(this._workerId,n,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new n3(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new ik(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=LP(i.detail)),this._send(new ik(this._workerId,t,void 0,LP(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new t3(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}u(i3,"SimpleWorkerProtocol");class s3 extends z{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{i?.(d)})),this._protocol=new i3({sendMessage:(d,h)=>{this._worker.postMessage(d,h)},handleMessage:(d,h)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,h))}catch(g){return Promise.reject(g)}},handleEvent:(d,h)=>{if(r3(d)){const g=n[d].call(n,h);if(typeof g!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return g}if(o3(d)){const g=n[d];if(typeof g!="function")throw new Error(`Missing event ${d} on main thread host.`);return g}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?s=r.getConfig():typeof globalThis.requirejs<"u"&&(s=globalThis.requirejs.s.contexts._.config);const a=xI(n);this._onModuleLoaded=this._protocol.sendMessage(ZJ,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,a]);const l=u((d,h)=>this._request(d,h),"proxyMethodRequest"),c=u((d,h)=>this._protocol.listen(d,h),"proxyListen");this._lazyProxy=new Promise((d,h)=>{i=h,this._onModuleLoaded.then(g=>{d(JJ(g,l,c))},g=>{h(g),this._onError("Worker failed to load "+t,g)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}u(s3,"SimpleWorkerClient");function o3(o){return o[0]==="o"&&o[1]==="n"&&ua(o.charCodeAt(2))}u(o3,"propertyIsEvent");function r3(o){return/^onDynamic/.test(o)&&ua(o.charCodeAt(9))}u(r3,"propertyIsDynamicEvent");function JJ(o,e,t){const n=u(r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},"createProxyMethod"),i=u(r=>function(a){return t(r,a)},"createProxyDynamicEvent"),s={};for(const r of o){if(r3(r)){s[r]=i(r);continue}if(o3(r)){s[r]=t(r,void 0);continue}s[r]=n(r)}return s}u(JJ,"createProxyObject");var lx;const KP=(lx=window.trustedTypes)===null||lx===void 0?void 0:lx.createPolicy("defaultWorkerFactory",{createScriptURL:o=>o});function QJ(o){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",o);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",o);return new Worker(KP?KP.createScriptURL(t):t,{name:o})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}u(QJ,"getWorker");function eQ(o){return typeof o.then=="function"}u(eQ,"isPromiseLike");class a3{constructor(e,t,n,i,s){this.id=t;const r=QJ(n);eQ(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(i=>i.postMessage(e,t))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}u(a3,"WebWorker");class Nv{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++Nv.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new a3(e,i,this._label||"anonymous"+i,t,s=>{nk(s),this._webWorkerFailedBeforeError=s,n(s)})}}u(Nv,"DefaultWorkerFactory");Nv.LAST_WORKER_ID=0;class ll{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}u(ll,"DiffChange");function l3(o){return tS(o,0)}u(l3,"hash");function tS(o,e){switch(typeof o){case"object":return o===null?xl(349,e):Array.isArray(o)?nQ(o,e):iQ(o,e);case"string":return XI(o,e);case"boolean":return tQ(o,e);case"number":return xl(o,e);case"undefined":return xl(937,e);default:return xl(617,e)}}u(tS,"doHash");function xl(o,e){return(e<<5)-e+o|0}u(xl,"numberHash");function tQ(o,e){return xl(o?433:863,e)}u(tQ,"booleanHash");function XI(o,e){e=xl(149417,e);for(let t=0,n=o.length;t<n;t++)e=xl(o.charCodeAt(t),e);return e}u(XI,"stringHash");function nQ(o,e){return e=xl(104579,e),o.reduce((t,n)=>tS(n,t),e)}u(nQ,"arrayHash");function iQ(o,e){return e=xl(181387,e),Object.keys(o).sort().reduce((t,n)=>(t=XI(n,t),tS(o[n],t)),e)}u(iQ,"objectHash");function cx(o,e,t=32){const n=t-e,i=~((1<<n)-1);return(o<<e|(i&o)>>>n)>>>0}u(cx,"leftRotate$2");function jP(o,e=0,t=o.byteLength,n=0){for(let i=0;i<t;i++)o[e+i]=n}u(jP,"fill");function sQ(o,e,t="0"){for(;o.length<e;)o=t+o;return o}u(sQ,"leftPad");function Em(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):sQ((o>>>0).toString(16),e/4)}u(Em,"toHexString");class Rv{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,r,a;for(s!==0?(r=s,a=-1,s=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(In(r))if(a+1<t){const c=e.charCodeAt(a+1);rh(c)?(a++,l=FI(r,c)):l=65533}else{s=r;break}else rh(r)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Em(this._h0)+Em(this._h1)+Em(this._h2)+Em(this._h3)+Em(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,jP(this._buff,this._buffLen),this._buffLen>56&&(this._step(),jP(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=Rv._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,cx(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,r=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=i&s|~i&r,c=1518500249):h<40?(l=i^s^r,c=1859775393):h<60?(l=i&s|i&r|s&r,c=2400959708):(l=i^s^r,c=3395469782),d=cx(n,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=r,r=s,s=cx(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}u(Rv,"StringSHA1");Rv._bigBlock32=new DataView(new ArrayBuffer(320));class sk{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}u(sk,"StringDiffSequence");function oQ(o,e,t){return new Sr(new sk(o),new sk(e)).ComputeDiff(t).changes}u(oQ,"stringDiff");class eu{static Assert(e,t){if(!e)throw new Error(t)}}u(eu,"Debug");class tu{static Copy(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}}u(tu,"MyArray");class ok{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ll(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}u(ok,"DiffChangeHelper");class Sr{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,r]=Sr._getElements(e),[a,l,c]=Sr._getElements(t);this._hasStrings=r&&c,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Sr._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=XI(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Sr._getStrictElement(this._originalSequence,e),i=Sr._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,r);return s&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(eu.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new ll(e,0,n,i-n+1)]):e<=t?(eu.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new ll(e,t-e+1,n,0)]):(eu.Assert(e===t+1,"originalStart should only be one more than originalEnd"),eu.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,r,a,s),c=r[0],d=a[0];if(l!==null)return l;if(!s[0]){const h=this.ComputeDiffRecursive(e,c,n,d,s);let g=[];return s[0]?g=[new ll(c+1,t-(c+1)+1,d+1,i-(d+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,d+1,i,s),this.ConcatenateChanges(h,g)}return[new ll(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b,_,C,v){let y=null,w=null,x=new ok,M=t,L=n,E=f[0]-_[0]-i,k=-1073741824,O=this.m_forwardHistory.length-1;do{const P=E+e;P===M||P<L&&c[P-1]<c[P+1]?(h=c[P+1],m=h-E-i,h<k&&x.MarkNextChange(),k=h,x.AddModifiedElement(h+1,m),E=P+1-e):(h=c[P-1]+1,m=h-E-i,h<k&&x.MarkNextChange(),k=h-1,x.AddOriginalElement(h,m+1),E=P-1-e),O>=0&&(c=this.m_forwardHistory[O],e=c[0],M=1,L=c.length-1)}while(--O>=-1);if(y=x.getReverseChanges(),v[0]){let P=f[0]+1,H=_[0]+1;if(y!==null&&y.length>0){const G=y[y.length-1];P=Math.max(P,G.getOriginalEnd()),H=Math.max(H,G.getModifiedEnd())}w=[new ll(P,g-P+1,H,b-H+1)]}else{x=new ok,M=r,L=a,E=f[0]-_[0]-l,k=1073741824,O=C?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const P=E+s;P===M||P<L&&d[P-1]>=d[P+1]?(h=d[P+1]-1,m=h-E-l,h>k&&x.MarkNextChange(),k=h+1,x.AddOriginalElement(h+1,m+1),E=P+1-s):(h=d[P-1],m=h-E-l,h>k&&x.MarkNextChange(),k=h,x.AddModifiedElement(h+1,m+1),E=P-1-s),O>=0&&(d=this.m_reverseHistory[O],s=d[0],M=1,L=d.length-1)}while(--O>=-1);w=x.getChanges()}return this.ConcatenateChanges(y,w)}ComputeRecursionPoint(e,t,n,i,s,r,a){let l=0,c=0,d=0,h=0,g=0,f=0;e--,n--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const m=t-e+(i-n),b=m+1,_=new Int32Array(b),C=new Int32Array(b),v=i-n,y=t-e,w=e-n,x=t-i,L=(y-v)%2===0;_[v]=e,C[y]=t,a[0]=!1;for(let E=1;E<=m/2+1;E++){let k=0,O=0;d=this.ClipDiagonalBound(v-E,E,v,b),h=this.ClipDiagonalBound(v+E,E,v,b);for(let H=d;H<=h;H+=2){H===d||H<h&&_[H-1]<_[H+1]?l=_[H+1]:l=_[H-1]+1,c=l-(H-v)-w;const G=l;for(;l<t&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[H]=l,l+c>k+O&&(k=l,O=c),!L&&Math.abs(H-y)<=E-1&&l>=C[H])return s[0]=l,r[0]=c,G<=C[H]&&1447>0&&E<=1447+1?this.WALKTRACE(v,d,h,w,y,g,f,x,_,C,l,t,s,c,i,r,L,a):null}const P=(k-e+(O-n)-E)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(k,P))return a[0]=!0,s[0]=k,r[0]=O,P>0&&1447>0&&E<=1447+1?this.WALKTRACE(v,d,h,w,y,g,f,x,_,C,l,t,s,c,i,r,L,a):(e++,n++,[new ll(e,t-e+1,n,i-n+1)]);g=this.ClipDiagonalBound(y-E,E,y,b),f=this.ClipDiagonalBound(y+E,E,y,b);for(let H=g;H<=f;H+=2){H===g||H<f&&C[H-1]>=C[H+1]?l=C[H+1]-1:l=C[H-1],c=l-(H-y)-x;const G=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(C[H]=l,L&&Math.abs(H-v)<=E&&l<=_[H])return s[0]=l,r[0]=c,G>=_[H]&&1447>0&&E<=1447+1?this.WALKTRACE(v,d,h,w,y,g,f,x,_,C,l,t,s,c,i,r,L,a):null}if(E<=1447){let H=new Int32Array(h-d+2);H[0]=v-d+1,tu.Copy2(_,d,H,1,h-d+1),this.m_forwardHistory.push(H),H=new Int32Array(f-g+2),H[0]=y-g+1,tu.Copy2(C,g,H,1,f-g+1),this.m_reverseHistory.push(H)}}return this.WALKTRACE(v,d,h,w,y,g,f,x,_,C,l,t,s,c,i,r,L,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,s=h.modifiedStart+h.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const g=n.originalStart-h,f=n.modifiedStart-h;if(g<i||f<s||r&&!this.OriginalElementsAreEqual(g,g+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const b=(g===i&&f===s?5:0)+this._boundaryScore(g,n.originalLength,f,n.modifiedLength);b>c&&(c=b,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],r=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,c=l-a,d=i.modifiedStart,h=s.modifiedStart+s.modifiedLength,g=h-d;if(r<5&&c<20&&g<20){const f=this._findBetterContiguousSequence(a,c,d,g,r);if(f){const[m,b]=f;(m!==i.originalStart+i.originalLength||b!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=m-i.originalStart,i.modifiedLength=b-i.modifiedStart,s.originalStart=m+r,s.modifiedStart=b+r,s.originalLength=l-s.originalStart,s.modifiedLength=h-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const r=e+t-s+1,a=n+i-s+1;let l=0,c=0,d=0;for(let h=e;h<r;h++)for(let g=n;g<a;g++){const f=this._contiguousSequenceScore(h,g,s);f>0&&f>l&&(l=f,c=h,d=g)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+r}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return tu.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],tu.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return tu.Copy(e,0,i,0,e.length),tu.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(eu.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),eu.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new ll(i,s,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,r=i-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?i-1:i-2}}}u(Sr,"LcsDiff");function cw(o){return o<0?0:o>255?255:o|0}u(cw,"toUint8");function Cg(o){return o<0?0:o>4294967295?4294967295:o|0}u(Cg,"toUint32");class c3{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Cg(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Cg(e),t=Cg(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Cg(e),t=Cg(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Cg(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],r=s-this.values[i],e<r)n=i-1;else if(e>=s)t=i+1;else break;return new ZI(i,e-r)}}u(c3,"PrefixSumComputer");class d3{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new ZI(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=P1(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let s=0;s<n;s++)this._indexBySum[i+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}u(d3,"ConstantTimePrefixSumComputer");class ZI{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}u(ZI,"PrefixSumIndexOfResult");class u3{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new W(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new c3(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=Va(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}u(u3,"MirrorTextModel");class $h{constructor(e){const t=cw(e);this._defaultValue=t,this._asciiMap=$h._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=cw(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}u($h,"CharacterClassifier");class h_{constructor(){this._actual=new $h(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}u(h_,"CharacterSet");class h3{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}u(h3,"Uint8Matrix");class g3{constructor(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const i=new h3(n,t,0);for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];i.set(a,l,c)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}u(g3,"StateMachine");let dx=null;function rQ(){return dx===null&&(dx=new g3([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),dx}u(rQ,"getStateMachine");let km=null;function aQ(){if(km===null){km=new $h(0);const o=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<o.length;t++)km.set(o.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)km.set(e.charCodeAt(t),2)}return km}u(aQ,"getClassifier");class g_{static _createLink(e,t,n,i,s){let r=s-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e,t=rQ()){const n=aQ(),i=[];for(let s=1,r=e.getLineCount();s<=r;s++){const a=e.getLineContent(s),l=a.length;let c=0,d=0,h=0,g=1,f=!1,m=!1,b=!1,_=!1;for(;c<l;){let C=!1;const v=a.charCodeAt(c);if(g===13){let y;switch(v){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:b=!0,m=!0,y=0;break;case 93:b=!1,y=m?0:1;break;case 123:_=!0,y=0;break;case 125:y=_?0:1;break;case 39:case 34:case 96:h===v?y=1:h===39||h===34||h===96?y=0:y=1;break;case 42:y=h===42?1:0;break;case 124:y=h===124?1:0;break;case 32:y=b?0:1;break;default:y=n.get(v)}y===1&&(i.push(g_._createLink(n,a,s,d,c)),C=!0)}else if(g===12){let y;v===91?(m=!0,y=0):y=n.get(v),y===1?C=!0:g=13}else g=t.nextState(g,v),g===0&&(C=!0);C&&(g=1,f=!1,m=!1,_=!1,d=c+1,h=v),c++}g===13&&i.push(g_._createLink(n,a,s,d,l))}return i}}u(g_,"LinkComputer");function lQ(o){return!o||typeof o.getLineCount!="function"||typeof o.getLineContent!="function"?[]:g_.computeLinks(o)}u(lQ,"computeLinks");class dw{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){const r=this.doNavigateValueSet(t,s);if(r)return{range:e,value:r}}if(n&&i){const r=this.doNavigateValueSet(i,s);if(r)return{range:n,value:r}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,r=e.length;i===null&&s<r;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}u(dw,"BasicInplaceReplace");dw.INSTANCE=new dw;class f3 extends $h{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}u(f3,"WordCharacterClassifier");function cQ(o){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=o(t)),e[t])}u(cQ,"once");const xo=cQ(o=>new f3(o)),dQ=999;class Lc{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=uQ(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=aV(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new SV(t,this.wordSeparators?xo(this.wordSeparators):null,n?this.searchString:null)}}u(Lc,"SearchParams");function uQ(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const i=o.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}u(uQ,"isMultilineRegexSource");function uu(o,e,t){if(!t)return new Uf(o,null);const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new Uf(o,n)}u(uu,"createFindMatch");class rk{constructor(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}u(rk,"LineFeedCounter");class Jm{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new yu(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(i){const f=i.findLineFeedCountBeforeOffset(s+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),h=e.getPositionAt(c);return new T(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new rk(a):null,c=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(c[d++]=uu(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,i),d>=s)return c;return c}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,r,i,s),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,i,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,r,i,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,f=g.length,m=t.length;let b=-f;for(;(b=t.indexOf(g,b+f))!==-1;)if((!c||JI(c,t,m,b,f))&&(r[s++]=new Uf(new T(n,b+1+i,n,b+1+f+i),null),s>=l))return s;return s}const d=new yu(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(r[s++]=uu(new T(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),s>=l))return s;while(h);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new yu(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new W(t.lineNumber,1),r=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new T(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new rk(l):null;n.reset(t.column-1);const d=n.next(l);return d?uu(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new W(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,i);if(l)return l;for(let c=1;c<=s;c++){const d=(r+c-1)%s,h=e.getLineContent(d+1),g=this._findFirstMatchInLine(n,h,d+1,1,i);if(g)return g}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?uu(new T(n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new yu(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new T(1,1,t.lineNumber,t.column),n,i,10*dQ);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new W(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,i);if(l)return l;for(let c=1;c<=s;c++){const d=(s+r-c-1)%s,h=e.getLineContent(d+1),g=this._findLastMatchInLine(n,h,d+1,i);if(g)return g}return null}static _findLastMatchInLine(e,t,n,i){let s=null,r;for(e.reset(0);r=e.next(t);)s=uu(new T(n,r.index+1,n,r.index+1+r[0].length),r,i);return s}}u(Jm,"TextModelSearch");function hQ(o,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n);if(o.get(r)!==0)return!0}return!1}u(hQ,"leftIsWordBounday");function gQ(o,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n+i-1);if(o.get(r)!==0)return!0}return!1}u(gQ,"rightIsWordBounday");function JI(o,e,t,n,i){return hQ(o,e,t,n,i)&&gQ(o,e,t,n,i)}u(JI,"isValidMatch");class yu{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){ow(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||JI(this._wordSeparators,e,t,i,s))return n}while(n);return null}}u(yu,"Searcher");class nS{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),r=new ak(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${fQ(Array.from(a))}`,"g");const c=new yu(null,l),d=[];let h=!1,g,f=0,m=0,b=0;e:for(let _=i,C=s;_<=C;_++){const v=e.getLineContent(_),y=v.length;c.reset(0);do if(g=c.next(v),g){let w=g.index,x=g.index+g[0].length;if(w>0){const k=v.charCodeAt(w-1);In(k)&&w--}if(x+1<y){const k=v.charCodeAt(x-1);In(k)&&x++}const M=v.substring(w,x);let L=i_(w+1,SI,v,0);L&&L.endColumn<=w+1&&(L=null);const E=r.shouldHighlightNonBasicASCII(M,L?L.word:null);if(E!==0){E===3?f++:E===2?m++:E===1?b++:z1();const k=1e3;if(d.length>=k){h=!0;break e}d.push(new T(_,w+1,_,x+1))}}while(g)}return{ranges:d,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:m,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const n=new ak(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(s),a=So.getLocales().filter(l=>!So.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}u(nS,"UnicodeTextModelHighlighter");function fQ(o,e){return`[${Js(o.map(n=>String.fromCodePoint(n)).join(""))}]`}u(fQ,"buildRegExpCharClassExpr");class ak{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=So.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Hr.codePoints)$P(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,s=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=wv(r);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Hr.isInvisibleCharacter(a)&&(s=!0)}return!i&&s?0:this.options.invisibleCharacters&&!$P(e)&&Hr.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}u(ak,"CodePointHighlighter");function $P(o){return o===" "||o===`
`||o==="	"}u($P,"isAllowedInvisibleCharacter");class QI{constructor(e,t){this.changes=e,this.hitTimeout=t}}u(QI,"LinesDiff");class ch{constructor(e,t,n){this.originalRange=e,this.modifiedRange=t,this.innerChanges=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}}u(ch,"LineRangeMapping");class Pv{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}}u(Pv,"RangeMapping");let bo=u(class Qm{static joinMany(e){if(e.length===0)return[];let t=e[0];for(let n=1;n<e.length;n++)t=this.join(t,e[n]);return t}static join(e,t){if(e.length===0)return t;if(t.length===0)return e;const n=[];let i=0,s=0,r=null;for(;i<e.length||s<t.length;){let a=null;if(i<e.length&&s<t.length){const l=e[i],c=t[s];l.startLineNumber<c.startLineNumber?(a=l,i++):(a=c,s++)}else i<e.length?(a=e[i],i++):(a=t[s],s++);r===null?r=a:r.endLineNumberExclusive>=a.startLineNumber?r=new Qm(r.startLineNumber,Math.max(r.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(r),r=a)}return r!==null&&n.push(r),n}constructor(e,t){if(e>t)throw new Xr(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Qm(this.startLineNumber+e,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Qm(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Qm(t,n)}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}},"LineRange");const pQ=3;class p3{computeDiff(e,t,n){var i;const r=new _3(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const c of r.changes){let d;c.originalEndLineNumber===0?d=new bo(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new bo(c.originalStartLineNumber,c.originalEndLineNumber+1);let h;c.modifiedEndLineNumber===0?h=new bo(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):h=new bo(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let g=new ch(d,h,(i=c.charChanges)===null||i===void 0?void 0:i.map(f=>new Pv(new T(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new T(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));l&&(l.modifiedRange.endLineNumberExclusive===g.modifiedRange.startLineNumber||l.originalRange.endLineNumberExclusive===g.originalRange.startLineNumber)&&(g=new ch(l.originalRange.join(g.originalRange),l.modifiedRange.join(g.modifiedRange),l.innerChanges&&g.innerChanges?l.innerChanges.concat(g.innerChanges):void 0),a.pop()),a.push(g),l=g}return KI(()=>vV(a,(c,d)=>d.originalRange.startLineNumber-c.originalRange.endLineNumberExclusive===d.modifiedRange.startLineNumber-c.modifiedRange.endLineNumberExclusive&&c.originalRange.endLineNumberExclusive<d.originalRange.startLineNumber&&c.modifiedRange.endLineNumberExclusive<d.modifiedRange.startLineNumber)),new QI(a,r.quitEarly)}}u(p3,"SmartLinesDiffComputer");function m3(o,e,t,n){return new Sr(o,e,t).ComputeDiff(n)}u(m3,"computeDiff");let qP=u(class{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=lk(e[i],1),n[i]=ck(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],r=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let g=d;g<h;g++)i[a]=c.charCodeAt(g-1),s[a]=l+1,r[a]=g,a++;!e&&l<n&&(i[a]=10,s[a]=l+1,r[a]=c.length+1,a++)}return new b3(i,s,r)}},"LineSequence");class b3{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}u(b3,"CharSequence");class Ru{constructor(e,t,n,i,s,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Ru(i,s,r,a,l,c,d,h)}}u(Ru,"CharChange");function mQ(o){if(o.length<=1)return o;const e=[o[0]];let t=e[0];for(let n=1,i=o.length;n<i;n++){const s=o[n],r=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<pQ?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}u(mQ,"postProcessCharChanges");class pf{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,r,a){let l,c,d,h,g;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,h=0):(d=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),m=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&m.getElements().length>0){let b=m3(f,m,s,!0).changes;a&&(b=mQ(b)),g=[];for(let _=0,C=b.length;_<C;_++)g.push(Ru.createFromDiffChange(b[_],f,m))}}return new pf(l,c,d,h,g)}}u(pf,"LineChange");class _3{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new qP(e),this.modified=new qP(t),this.continueLineDiff=YP(n.maxComputationTime),this.continueCharDiff=YP(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=m3(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(pf.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;s<d&&r<h;){const g=this.originalLines[s],f=this.modifiedLines[r];if(g!==f){{let m=lk(g,1),b=lk(f,1);for(;m>1&&b>1;){const _=g.charCodeAt(m-2),C=f.charCodeAt(b-2);if(_!==C)break;m--,b--}(m>1||b>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,m,r+1,1,b)}{let m=ck(g,1),b=ck(f,1);const _=g.length+1,C=f.length+1;for(;m<_&&b<C;){const v=g.charCodeAt(m-1),y=g.charCodeAt(b-1);if(v!==y)break;m++,b++}(m<_||b<C)&&this._pushTrimWhitespaceCharChange(i,s+1,m,_,r+1,b,C)}}s++,r++}c&&(i.push(pf.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new Ru(t,n,t,i,s,r,s,a)]),e.push(new pf(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Ru(t,n,t,i,s,r,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Ru(t,n,t,i,s,r,s,a)),!0):!1}}u(_3,"DiffComputer");function lk(o,e){const t=Pi(o);return t===-1?e:t+1}u(lk,"getFirstNonBlankColumn");function ck(o,e){const t=Or(o);return t===-1?e:t+2}u(ck,"getLastNonBlankColumn");function YP(o){if(o===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<o}u(YP,"createContinueProcessingPredicate");class Xt{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{const s=Math.min(e.start,t[n].start),r=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new Xt(s,r))}}static tryCreate(e,t){if(!(e>t))return new Xt(e,t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Xr(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Xt(this.start+e,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}join(e){return new Xt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new Xt(t,n)}}u(Xt,"OffsetRange");class Ma{static trivial(e,t){return new Ma([new Lo(new Xt(0,e.length),new Xt(0,t.length))],!1)}static trivialTimedOut(e,t){return new Ma([new Lo(new Xt(0,e.length),new Xt(0,t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}u(Ma,"DiffAlgorithmResult");class Lo{constructor(e,t){this.seq1Range=e,this.seq2Range=t}reverse(){return new Lo(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Lo(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}}u(Lo,"SequenceDiff");class Kf{isValid(){return!0}}u(Kf,"InfiniteTimeout");Kf.instance=new Kf;class v3{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Xr("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}u(v3,"DateTimeout");class iy{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}u(iy,"Array2D");class C3{compute(e,t,n=Kf.instance,i){if(e.length===0||t.length===0)return Ma.trivial(e,t);const s=new iy(e.length,t.length),r=new iy(e.length,t.length),a=new iy(e.length,t.length);for(let m=0;m<e.length;m++)for(let b=0;b<t.length;b++){if(!n.isValid())return Ma.trivialTimedOut(e,t);const _=m===0?0:s.get(m-1,b),C=b===0?0:s.get(m,b-1);let v;e.getElement(m)===t.getElement(b)?(m===0||b===0?v=0:v=s.get(m-1,b-1),m>0&&b>0&&r.get(m-1,b-1)===3&&(v+=a.get(m-1,b-1)),v+=i?i(m,b):1):v=-1;const y=Math.max(_,C,v);if(y===v){const w=m>0&&b>0?a.get(m-1,b-1):0;a.set(m,b,w+1),r.set(m,b,3)}else y===_?(a.set(m,b,0),r.set(m,b,1)):y===C&&(a.set(m,b,0),r.set(m,b,2));s.set(m,b,y)}const l=[];let c=e.length,d=t.length;function h(m,b){(m+1!==c||b+1!==d)&&l.push(new Lo(new Xt(m+1,c),new Xt(b+1,d))),c=m,d=b}u(h,"reportDecreasingAligningPositions");let g=e.length-1,f=t.length-1;for(;g>=0&&f>=0;)r.get(g,f)===3?(h(g,f),g--,f--):r.get(g,f)===1?g--:f--;return h(-1,-1),l.reverse(),new Ma(l,!1)}}u(C3,"DynamicProgrammingDiffing");function XP(o,e,t){let n=t;return n=_Q(o,e,n),n=vQ(o,e,n),n}u(XP,"optimizeSequenceDiffs");function bQ(o,e,t){const n=[];for(const i of t){const s=n[n.length-1];if(!s){n.push(i);continue}i.seq1Range.start-s.seq1Range.endExclusive<=2||i.seq2Range.start-s.seq2Range.endExclusive<=2?n[n.length-1]=new Lo(s.seq1Range.join(i.seq1Range),s.seq2Range.join(i.seq2Range)):n.push(i)}return n}u(bQ,"smoothenSequenceDiffs");function _Q(o,e,t){const n=[];t.length>0&&n.push(t[0]);for(let i=1;i<t.length;i++){const s=n[n.length-1],r=t[i];if(r.seq1Range.isEmpty){let a=!0;const l=r.seq1Range.start-s.seq1Range.endExclusive;for(let c=1;c<=l;c++)if(e.getElement(r.seq2Range.start-c)!==e.getElement(r.seq2Range.endExclusive-c)){a=!1;break}if(a){n[n.length-1]=new Lo(s.seq1Range,new Xt(s.seq2Range.start,r.seq2Range.endExclusive-l));continue}}n.push(r)}return n}u(_Q,"joinSequenceDiffs");function vQ(o,e,t){if(!o.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const i=t[n];if(i.seq1Range.isEmpty){const s=n>0?t[n-1].seq2Range.endExclusive:-1,r=n+1<t.length?t[n+1].seq2Range.start:e.length;t[n]=ZP(i,o,e,r,s)}else if(i.seq2Range.isEmpty){const s=n>0?t[n-1].seq1Range.endExclusive:-1,r=n+1<t.length?t[n+1].seq1Range.start:o.length;t[n]=ZP(i.reverse(),e,o,r,s).reverse()}}return t}u(vQ,"shiftSequenceDiffs");function ZP(o,e,t,n,i){let r=1;for(;o.seq2Range.start-r>i&&t.getElement(o.seq2Range.start-r)===t.getElement(o.seq2Range.endExclusive-r)&&r<20;)r++;r--;let a=0;for(;o.seq2Range.start+a<n&&t.getElement(o.seq2Range.start+a)===t.getElement(o.seq2Range.endExclusive+a)&&a<20;)a++;if(r===0&&a===0)return o;let l=0,c=-1;for(let d=-r;d<=a;d++){const h=o.seq2Range.start+d,g=o.seq2Range.endExclusive+d,f=o.seq1Range.start+d,m=e.getBoundaryScore(f)+t.getBoundaryScore(h)+t.getBoundaryScore(g);m>c&&(c=m,l=d)}return l!==0?new Lo(o.seq1Range.delta(l),o.seq2Range.delta(l)):o}u(ZP,"shiftDiffToBetterPosition");class y3{compute(e,t,n=Kf.instance){if(e.length===0||t.length===0)return Ma.trivial(e,t);function i(f,m){for(;f<e.length&&m<t.length&&e.getElement(f)===t.getElement(m);)f++,m++;return f}u(i,"getXAfterSnake");let s=0;const r=new w3;r.set(0,i(0,0));const a=new S3;a.set(0,r.get(0)===0?null:new dk(null,0,0,r.get(0)));let l=0;e:for(;;)for(s++,l=-s;l<=s;l+=2){if(!n.isValid())return Ma.trivialTimedOut(e,t);const f=l===s?-1:r.get(l+1),m=l===-s?-1:r.get(l-1)+1,b=Math.min(Math.max(f,m),e.length),_=b-l,C=i(b,_);r.set(l,C);const v=b===f?a.get(l+1):a.get(l-1);if(a.set(l,C!==b?new dk(v,b,_,C-b):v),r.get(l)===e.length&&r.get(l)-l===t.length)break e}let c=a.get(l);const d=[];let h=e.length,g=t.length;for(;;){const f=c?c.x+c.length:0,m=c?c.y+c.length:0;if((f!==h||m!==g)&&d.push(new Lo(new Xt(f,h),new Xt(m,g))),!c)break;h=c.x,g=c.y,c=c.prev}return d.reverse(),new Ma(d,!1)}}u(y3,"MyersDiffAlgorithm");class dk{constructor(e,t,n,i){this.prev=e,this.x=t,this.y=n,this.length=i}}u(dk,"SnakePath");class w3{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}u(w3,"FastInt32Array");class S3{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}u(S3,"FastArrayNegativeIndices");class T3{constructor(){this.dynamicProgrammingDiffing=new C3,this.myersDiffingAlgorithm=new y3}computeDiff(e,t,n){const i=n.maxComputationTimeMs===0?Kf.instance:new v3(n.maxComputationTimeMs),s=!n.ignoreTrimWhitespace,r=new Map;function a(w){let x=r.get(w);return x===void 0&&(x=r.size,r.set(w,x)),x}u(a,"getOrCreateHash");const l=e.map(w=>a(w.trim())),c=t.map(w=>a(w.trim())),d=new uk(l,e),h=new uk(c,t),g=(()=>d.length+h.length<1500?this.dynamicProgrammingDiffing.compute(d,h,i,(w,x)=>e[w]===t[x]?t[x].length===0?.1:1+Math.log(1+t[x].length):.99):this.myersDiffingAlgorithm.compute(d,h))();let f=g.diffs,m=g.hitTimeout;f=XP(d,h,f);const b=[],_=u(w=>{if(s)for(let x=0;x<w;x++){const M=C+x,L=v+x;if(e[M]!==t[L]){const E=this.refineDiff(e,t,new Lo(new Xt(M,M+1),new Xt(L,L+1)),i,s);for(const k of E.mappings)b.push(k);E.hitTimeout&&(m=!0)}}},"scanForWhitespaceChanges");let C=0,v=0;for(const w of f){KI(()=>w.seq1Range.start-C===w.seq2Range.start-v);const x=w.seq1Range.start-C;_(x),C=w.seq1Range.endExclusive,v=w.seq2Range.endExclusive;const M=this.refineDiff(e,t,w,i,s);M.hitTimeout&&(m=!0);for(const L of M.mappings)b.push(L)}_(e.length-C);const y=wQ(b,e,t);return new QI(y,m)}refineDiff(e,t,n,i,s){const r=new hk(e,n.seq1Range,s),a=new hk(t,n.seq2Range,s),l=r.length+a.length<500?this.dynamicProgrammingDiffing.compute(r,a,i):this.myersDiffingAlgorithm.compute(r,a,i);let c=l.diffs;return c=XP(r,a,c),c=CQ(r,a,c),c=bQ(r,a,c),{mappings:c.map(h=>new Pv(r.translateRange(h.seq1Range),a.translateRange(h.seq2Range))),hitTimeout:l.hitTimeout}}}u(T3,"StandardLinesDiffComputer");function CQ(o,e,t){const n=[];let i;function s(){if(!i)return;const a=i.s1Range.length-i.deleted;i.s2Range.length-i.added,Math.max(i.deleted,i.added)+(i.count-1)>a&&n.push(new Lo(i.s1Range,i.s2Range)),i=void 0}u(s,"maybePushWordToAdditional");for(const a of t){let l=function(f,m){var b,_,C,v;if(!i||!i.s1Range.containsRange(f)||!i.s2Range.containsRange(m))if(i&&!(i.s1Range.endExclusive<f.start&&i.s2Range.endExclusive<m.start)){const x=Xt.tryCreate(i.s1Range.endExclusive,f.start),M=Xt.tryCreate(i.s2Range.endExclusive,m.start);i.deleted+=(b=x?.length)!==null&&b!==void 0?b:0,i.added+=(_=M?.length)!==null&&_!==void 0?_:0,i.s1Range=i.s1Range.join(f),i.s2Range=i.s2Range.join(m)}else s(),i={added:0,deleted:0,count:0,s1Range:f,s2Range:m};const y=f.intersect(a.seq1Range),w=m.intersect(a.seq2Range);i.count++,i.deleted+=(C=y?.length)!==null&&C!==void 0?C:0,i.added+=(v=w?.length)!==null&&v!==void 0?v:0};u(l,"processWord");const c=o.findWordContaining(a.seq1Range.start-1),d=e.findWordContaining(a.seq2Range.start-1),h=o.findWordContaining(a.seq1Range.endExclusive),g=e.findWordContaining(a.seq2Range.endExclusive);c&&h&&d&&g&&c.equals(h)&&d.equals(g)?l(c,d):(c&&d&&l(c,d),h&&g&&l(h,g))}return s(),yQ(t,n)}u(CQ,"coverFullWords");function yQ(o,e){const t=[];for(;o.length>0||e.length>0;){const n=o[0],i=e[0];let s;n&&(!i||n.seq1Range.start<i.seq1Range.start)?s=o.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}u(yQ,"mergeSequenceDiffs");function wQ(o,e,t){const n=[];for(const i of TQ(o.map(s=>SQ(s,e,t)),(s,r)=>s.originalRange.overlapOrTouch(r.originalRange)||s.modifiedRange.overlapOrTouch(r.modifiedRange))){const s=i[0],r=i[i.length-1];n.push(new ch(s.originalRange.join(r.originalRange),s.modifiedRange.join(r.modifiedRange),i.map(a=>a.innerChanges[0])))}return KI(()=>vV(n,(i,s)=>s.originalRange.startLineNumber-i.originalRange.endLineNumberExclusive===s.modifiedRange.startLineNumber-i.modifiedRange.endLineNumberExclusive&&i.originalRange.endLineNumberExclusive<s.originalRange.startLineNumber&&i.modifiedRange.endLineNumberExclusive<s.modifiedRange.startLineNumber)),n}u(wQ,"lineRangeMappingFromRangeMappings");function SQ(o,e,t){let n=0,i=0;o.modifiedRange.startColumn-1>=t[o.modifiedRange.startLineNumber-1].length&&o.originalRange.startColumn-1>=e[o.originalRange.startLineNumber-1].length&&(n=1),o.modifiedRange.endColumn===1&&o.originalRange.endColumn===1&&o.originalRange.startLineNumber+n<=o.originalRange.endLineNumber&&o.modifiedRange.startLineNumber+n<=o.modifiedRange.endLineNumber&&(i=-1);const s=new bo(o.originalRange.startLineNumber+n,o.originalRange.endLineNumber+1+i),r=new bo(o.modifiedRange.startLineNumber+n,o.modifiedRange.endLineNumber+1+i);return new ch(s,r,[o])}u(SQ,"getLineRangeMapping");function*TQ(o,e){let t,n;for(const i of o)n!==void 0&&e(n,i)?t.push(i):(t&&(yield t),t=[i]),n=i;t&&(yield t)}u(TQ,"group");class uk{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:JP(this.lines[e-1]),n=e===this.lines.length?0:JP(this.lines[e]);return 1e3-(t+n)}}u(uk,"LineSequence");function JP(o){let e=0;for(;e<o.length&&(o.charCodeAt(e)===32||o.charCodeAt(e)===9);)e++;return e}u(JP,"getIndentation");class hk{constructor(e,t,n){this.lines=e,this.considerWhitespaceChanges=n,this.elements=[],this.firstCharOffsetByLineMinusOne=[],this.offsetByLine=[];let i=!1;t.start>0&&t.endExclusive>=e.length&&(t=new Xt(t.start-1,t.endExclusive),i=!0),this.lineRange=t;for(let s=this.lineRange.start;s<this.lineRange.endExclusive;s++){let r=e[s],a=0;if(i)a=r.length,r="",i=!1;else if(!n){const l=r.trimStart();a=r.length-l.length,r=l.trimEnd()}this.offsetByLine.push(a);for(let l=0;l<r.length;l++)this.elements.push(r.charCodeAt(l));s<e.length-1&&(this.elements.push(`
`.charCodeAt(0)),this.firstCharOffsetByLineMinusOne[s-this.lineRange.start]=this.elements.length)}this.offsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return[...this.elements].map(e=>String.fromCharCode(e)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=eF(e>0?this.elements[e-1]:-1),n=eF(e<this.elements.length?this.elements[e]:-1);if(t===6&&n===7)return 0;let i=0;return t!==n&&(i+=10,n===1&&(i+=1)),i+=QP(t),i+=QP(n),i}translateOffset(e){if(this.lineRange.isEmpty)return new W(this.lineRange.start+1,1);let t=0,n=this.firstCharOffsetByLineMinusOne.length;for(;t<n;){const s=Math.floor((t+n)/2);this.firstCharOffsetByLineMinusOne[s]>e?n=s:t=s+1}const i=t===0?0:this.firstCharOffsetByLineMinusOne[t-1];return new W(this.lineRange.start+t+1,e-i+1+this.offsetByLine[t])}translateRange(e){return T.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!ux(this.elements[e]))return;let t=e;for(;t>0&&ux(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&ux(this.elements[n]);)n++;return new Xt(t,n)}}u(hk,"Slice");function ux(o){return o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57}u(ux,"isWordChar");const xQ={[0]:0,[1]:0,[2]:0,[3]:10,[4]:2,[5]:3,[6]:10,[7]:10};function QP(o){return xQ[o]}u(QP,"getCategoryBoundaryScore");function eF(o){return o===10?7:o===13?6:LQ(o)?5:o>=97&&o<=122?0:o>=65&&o<=90?1:o>=48&&o<=57?2:o===-1?3:4}u(eF,"getCategory");function LQ(o){return o===32||o===9}u(LQ,"isSpace");const tF={smart:new p3,experimental:new T3};var zd=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class x3 extends u3{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=i_(e.column,KH(t),this._lines[e.lineNumber-1],0);return n?new T(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=s.substring(a[r].start,a[r].end);r+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),r=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const r of i)s.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)s.push(this._lines[r]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!W.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}}u(x3,"MirrorModel");class Fl{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new x3(ve.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return zd(this,void 0,void 0,function*(){const i=this._getModel(e);return i?nS.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return zd(this,void 0,void 0,function*(){const s=this._getModel(e),r=this._getModel(t);return!s||!r?null:Fl.computeDiff(s,r,n,i)})}static computeDiff(e,t,n,i){const s=i==="experimental"?tF.experimental:tF.smart,r=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(r,a,n);return{identical:l.changes.length>0?!1:this._modelsAreIdentical(e,t),quitEarly:l.hitTimeout,changes:l.changes.map(d=>{var h;return[d.originalRange.startLineNumber,d.originalRange.endLineNumberExclusive,d.modifiedRange.startLineNumber,d.modifiedRange.endLineNumberExclusive,(h=d.innerChanges)===null||h===void 0?void 0:h.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const r=e.getLineContent(s),a=t.getLineContent(s);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t,n){return zd(this,void 0,void 0,function*(){const i=this._getModel(e);if(!i)return t;const s=[];let r;t=t.slice(0).sort((a,l)=>{if(a.range&&l.range)return T.compareRangesUsingStarts(a.range,l.range);const c=a.range?0:1,d=l.range?0:1;return c-d});for(let{range:a,text:l,eol:c}of t){if(typeof c=="number"&&(r=c),T.isEmpty(a)&&!l)continue;const d=i.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,i.eol),d===l)continue;if(Math.max(l.length,d.length)>Fl._diffLimit){s.push({range:a,text:l});continue}const h=oQ(d,l,n),g=i.offsetAt(T.lift(a).getStartPosition());for(const f of h){const m=i.positionAt(g+f.originalStart),b=i.positionAt(g+f.originalStart+f.originalLength),_={text:l.substr(f.modifiedStart,f.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:b.lineNumber,endColumn:b.column}};i.getValueInRange(_.range)!==_.text&&s.push(_)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return zd(this,void 0,void 0,function*(){const t=this._getModel(e);return t?lQ(t):null})}textualSuggest(e,t,n,i){return zd(this,void 0,void 0,function*(){const s=new ji(!0),r=new RegExp(n,i),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>Fl._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return zd(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return zd(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return dw.INSTANCE.navigateValueSet(t,l,c,d,n)})}loadForeignModule(e,t,n){const r={host:rZ(n,u((a,l)=>this._host.fhr(a,l),"proxyMethodRequest")),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(xI(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}u(Fl,"EditorSimpleWorker");Fl._diffLimit=1e5;Fl._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=nV());const eN=nt("textResourceConfigurationService"),L3=nt("textResourcePropertiesService"),Mo=nt("logService");var Li;(function(o){o[o.Off=0]="Off",o[o.Trace=1]="Trace",o[o.Debug=2]="Debug",o[o.Info=3]="Info",o[o.Warning=4]="Warning",o[o.Error=5]="Error"})(Li||(Li={}));const E3=Li.Info;class tN extends z{constructor(){super(...arguments),this.level=E3,this._onDidChangeLogLevel=this._register(new F),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Li.Off&&this.level<=e}}u(tN,"AbstractLogger");class k3 extends tN{constructor(e=E3,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Li.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Li.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Li.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Li.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}dispose(){}}u(k3,"ConsoleLogger");class D3 extends tN{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose()}}u(D3,"MultiplexLogger");function EQ(o){switch(o){case Li.Trace:return"trace";case Li.Debug:return"debug";case Li.Info:return"info";case Li.Warning:return"warn";case Li.Error:return"error";case Li.Off:return"off"}}u(EQ,"LogLevelToString");new ue("logLevel",EQ(Li.Info));const he=nt("ILanguageFeaturesService");var kQ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uw=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const nF=60*1e3,iF=5*60*1e3;function hu(o,e){const t=o.getModel(e);return!(!t||t.isTooLargeForSyncing())}u(hu,"canSyncModel");let gk=u(class extends z{constructor(e,t,n,i,s){super(),this._modelService=e,this._workerManager=this._register(new A3(this._modelService,i)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>hu(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new M3(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return hu(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return uw(this,void 0,void 0,function*(){const s=yield this._workerManager.withWorker().then(a=>a.computeDiff(e,t,n,i));return s?{identical:s.identical,quitEarly:s.quitEarly,changes:s.changes.map(a=>{var l;return new ch(new bo(a[0],a[1]),new bo(a[2],a[3]),(l=a[4])===null||l===void 0?void 0:l.map(c=>new Pv(new T(c[0],c[1],c[2],c[3]),new T(c[4],c[5],c[6],c[7]))))})}:null})}computeMoreMinimalEdits(e,t,n=!1){if(Ei(t)){if(!hu(this._modelService,e))return Promise.resolve(t);const i=ji.create(!0),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t,n));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([s,ad(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return hu(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return hu(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}},"EditorWorkerService");gk=kQ([Dm(0,en),Dm(1,eN),Dm(2,Mo),Dm(3,zt),Dm(4,he)],gk);class M3{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return uw(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")hu(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())hu(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new T(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):T.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(i,r?.word,s);if(d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}}u(M3,"WordBasedCompletionItemProvider");class A3 extends z{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Xp).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(iF/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>iF&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new nN(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}u(A3,"WorkerManager");class I3 extends z{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new Xp;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(nF/2)),this._register(i)}}dispose(){for(const e in this._syncedModels)mt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>nF&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new X;s.add(n.onDidChangeContent(r=>{this._proxy.acceptModelChanged(i.toString(),r)})),s.add(n.onWillDispose(()=>{this._stopModelSync(i)})),s.add(Oe(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],mt(t)}}u(I3,"EditorModelManager");class fk{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}u(fk,"SynchronousWorkerClient");class sy{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}u(sy,"EditorWorkerHost");class nN extends z{constructor(e,t,n,i){super(),this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new Nv(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new s3(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new sy(this)))}catch(e){nk(e),this._worker=new fk(new Fl(new sy(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(nk(e),this._worker=new fk(new Fl(new sy(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new I3(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return uw(this,void 0,void 0,function*(){return this._disposed?Promise.reject(pZ()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeMoreMinimalEdits(e.toString(),t,n))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return uw(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,r=QT(n);return i.textualSuggest(e.map(a=>a.toString()),t,s,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=s.source,a=QT(s);return n.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=r.source,l=QT(r);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}u(nN,"EditorWorkerClient");function DQ(o,e,t){return new N3(o,e,t)}u(DQ,"createWebWorker$1");class N3 extends nN{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?xI(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=u((a,l)=>e.fmr(a,l),"proxyMethodRequest"),s=u((a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},"createProxyMethod"),r={};for(const a of n)r[a]=s(a,i);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}u(N3,"MonacoWebWorkerImpl");class ni{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;");let r="";return i&4&&(r+=" underline"),i&8&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}u(ni,"TokenMetadata");class En{static createEmpty(e,t){const n=En.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new En(i,e,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}equals(e){return e instanceof En?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let r=i;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=ni.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ni.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ni.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ni.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return ni.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return ni.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return En.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new iS(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),r=e[s<<1];if(r===t)return s+1;r<t?n=s+1:r>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];s.push(i.length,c),t++,r=a}else if(l){if(l.offset>r){i+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];s.push(i.length,c),r=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new En(new Uint32Array(s),i,this._languageIdCodec)}}u(En,"LineTokens");En.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class iS{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof iS?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}u(iS,"SliceLineTokens");class ls{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!ls._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,r=n-t,a=[];let l=0;for(const c of e)c.endColumn<=i||c.startColumn>=s||(a[l++]=new ls(Math.max(1,c.startColumn-i+1),Math.min(r+1,c.endColumn-i+1),c.className,c.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const s=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const h=d.startLineNumber===t?d.startColumn:n,g=d.endLineNumber===t?d.endColumn:i;s[r++]=new ls(h,g,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=ls._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}u(ls,"LineDecoration");class pk{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}u(pk,"DecorationSegment");class f_{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new pk(t,this.stopOffsets[i],this.classNames.join(" "),f_._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new pk(t,e-1,this.classNames.join(" "),f_._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}u(f_,"Stack");class R3{static normalize(e,t){if(t.length===0)return[];const n=[],i=new f_;let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const h=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const b=e.charCodeAt(c-2);In(b)&&c--}if(d>1){const b=e.charCodeAt(d-2);In(b)&&d--}const f=c-1,m=d-2;s=i.consumeLowerThan(f,s,n),i.count===0&&(s=f),i.insert(m,h,g)}return i.consumeLowerThan(1073741824,s,n),n}}u(R3,"LineDecorationsNormalizer");class Nn{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}u(Nn,"LinePart");class iN{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}u(iN,"LineRange");class nc{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b,_,C,v,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ls.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=g,this.stopRenderingLineAfter=b,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=C,this.fontLigatures=v,this.selectionsOnLine=y&&y.sort((M,L)=>M.startOffset<L.startOffset?-1:1);const w=Math.abs(m-g),x=Math.abs(f-g);w<x?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ls.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}u(nc,"RenderLineInput");class sS{constructor(e,t){this.partIndex=e,this.charIndex=t}}u(sS,"DomPosition");class yr{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=yr.getPartIndex(t),i=yr.getCharIndex(t);return new sS(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const b=s+r>>>1,_=this._data[b];if(_===i)return b;_>i?r=b:s=b}if(s===r)return s;const a=this._data[s],l=this._data[r];if(a===i)return s;if(l===i)return r;const c=yr.getPartIndex(a),d=yr.getCharIndex(a),h=yr.getPartIndex(l);let g;c!==h?g=t:g=yr.getCharIndex(l);const f=n-d,m=g-n;return f<=m?s:r}}u(yr,"CharacterMapping");class hw{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}u(hw,"RenderLineOutput");function Fv(o,e){if(o.lineContent.length===0){if(o.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,i=0;for(const r of o.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(i|=1,t++),r.type===2&&(i|=2,n++));e.appendString("</span>");const s=new yr(1,t+n);return s.setColumnInfo(1,t,0,0),new hw(s,!1,i)}return e.appendString("<span><span></span></span>"),new hw(new yr(0,0),!1,0)}return FQ(MQ(o),e)}u(Fv,"renderViewLine");class P3{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}u(P3,"RenderLineOutput2");function oS(o){const e=new jh(1e4),t=Fv(o,e);return new P3(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}u(oS,"renderViewLine2");class F3{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=g,this.spaceWidth=f,this.renderSpaceCharCode=m,this.renderWhitespace=b,this.renderControlCharacters=_}}u(F3,"ResolvedRenderLineInput");function MQ(o){const e=o.lineContent;let t,n,i;o.stopRenderingLineAfter!==-1&&o.stopRenderingLineAfter<e.length?(t=!0,n=e.length-o.stopRenderingLineAfter,i=o.stopRenderingLineAfter):(t=!1,n=0,i=e.length);let s=AQ(e,o.containsRTL,o.lineTokens,o.fauxIndentLength,i);o.renderControlCharacters&&!o.isBasicASCII&&(s=NQ(e,s)),(o.renderWhitespace===4||o.renderWhitespace===1||o.renderWhitespace===2&&o.selectionsOnLine||o.renderWhitespace===3&&!o.continuesWithWrappedLine)&&(s=RQ(o,e,i,s));let r=0;if(o.lineDecorations.length>0){for(let a=0,l=o.lineDecorations.length;a<l;a++){const c=o.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}s=PQ(e,i,s,o.lineDecorations)}return o.containsRTL||(s=IQ(e,s,!o.isBasicASCII||o.fontLigatures)),new F3(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,e,i,t,n,s,r,o.fauxIndentLength,o.tabSize,o.startVisibleColumn,o.containsRTL,o.spaceWidth,o.renderSpaceCharCode,o.renderWhitespace,o.renderControlCharacters)}u(MQ,"resolveRenderLineInput");function AQ(o,e,t,n,i){const s=[];let r=0;n>0&&(s[r++]=new Nn(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const h=t.getClassName(l);if(d>=i){const f=e?Vf(o.substring(a,i)):!1;s[r++]=new Nn(i,h,0,f);break}const g=e?Vf(o.substring(a,d)):!1;s[r++]=new Nn(d,h,0,g),a=d}return s}u(AQ,"transformAndRemoveOverflowing");function IQ(o,e,t){let n=0;const i=[];let s=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(n+50<c){const d=l.type,h=l.metadata,g=l.containsRTL;let f=-1,m=n;for(let b=n;b<c;b++)o.charCodeAt(b)===32&&(f=b),f!==-1&&b-m>=50&&(i[s++]=new Nn(f+1,d,h,g),m=f+1,f=-1);m!==c&&(i[s++]=new Nn(c,d,h,g))}else i[s++]=l;n=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-n;if(d>50){const h=l.type,g=l.metadata,f=l.containsRTL,m=Math.ceil(d/50);for(let b=1;b<m;b++){const _=n+b*50;i[s++]=new Nn(_,h,g,f)}i[s++]=new Nn(c,h,g,f)}else i[s++]=l;n=c}return i}u(IQ,"splitLargeTokens");function O3(o){return o<32?o!==9:o===127||o>=8234&&o<=8238||o>=8294&&o<=8297||o>=8206&&o<=8207||o===1564}u(O3,"isControlCharacter");function NQ(o,e){const t=[];let n=new Nn(0,"",0,!1),i=0;for(const s of e){const r=s.endIndex;for(;i<r;i++){const a=o.charCodeAt(i);O3(a)&&(i>n.endIndex&&(n=new Nn(i,s.type,s.metadata,s.containsRTL),t.push(n)),n=new Nn(i+1,"mtkcontrol",s.metadata,!1),t.push(n))}i>n.endIndex&&(n=new Nn(r,s.type,s.metadata,s.containsRTL),t.push(n))}return t}u(NQ,"extractControlCharacters");function RQ(o,e,t,n){const i=o.continuesWithWrappedLine,s=o.fauxIndentLength,r=o.tabSize,a=o.startVisibleColumn,l=o.useMonospaceOptimizations,c=o.selectionsOnLine,d=o.renderWhitespace===1,h=o.renderWhitespace===3,g=o.renderSpaceWidth!==o.spaceWidth,f=[];let m=0,b=0,_=n[b].type,C=n[b].containsRTL,v=n[b].endIndex;const y=n.length;let w=!1,x=Pi(e),M;x===-1?(w=!0,x=t,M=t):M=Or(e);let L=!1,E=0,k=c&&c[E],O=a%r;for(let H=s;H<t;H++){const G=e.charCodeAt(H);k&&H>=k.endOffset&&(E++,k=c&&c[E]);let se;if(H<x||H>M)se=!0;else if(G===9)se=!0;else if(G===32)if(d)if(L)se=!0;else{const fe=H+1<t?e.charCodeAt(H+1):0;se=fe===32||fe===9}else se=!0;else se=!1;if(se&&c&&(se=!!k&&k.startOffset<=H&&k.endOffset>H),se&&h&&(se=w||H>M),se&&C&&H>=x&&H<=M&&(se=!1),L){if(!se||!l&&O>=r){if(g){const fe=m>0?f[m-1].endIndex:s;for(let Le=fe+1;Le<=H;Le++)f[m++]=new Nn(Le,"mtkw",1,!1)}else f[m++]=new Nn(H,"mtkw",1,!1);O=O%r}}else(H===v||se&&H>s)&&(f[m++]=new Nn(H,_,0,C),O=O%r);for(G===9?O=r:od(G)?O+=2:O++,L=se;H===v&&(b++,b<y);)_=n[b].type,C=n[b].containsRTL,v=n[b].endIndex}let P=!1;if(L)if(i&&d){const H=t>0?e.charCodeAt(t-1):0,G=t>1?e.charCodeAt(t-2):0;H===32&&G!==32&&G!==9||(P=!0)}else P=!0;if(P)if(g){const H=m>0?f[m-1].endIndex:s;for(let G=H+1;G<=t;G++)f[m++]=new Nn(G,"mtkw",1,!1)}else f[m++]=new Nn(t,"mtkw",1,!1);else f[m++]=new Nn(t,_,0,C);return f}u(RQ,"_applyRenderWhitespace");function PQ(o,e,t,n){n.sort(ls.compare);const i=R3.normalize(o,n),s=i.length;let r=0;const a=[];let l=0,c=0;for(let h=0,g=t.length;h<g;h++){const f=t[h],m=f.endIndex,b=f.type,_=f.metadata,C=f.containsRTL;for(;r<s&&i[r].startOffset<m;){const v=i[r];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new Nn(c,b,_,C)),v.endOffset+1<=m)c=v.endOffset+1,a[l++]=new Nn(c,b+" "+v.className,_|v.metadata,C),r++;else{c=m,a[l++]=new Nn(c,b+" "+v.className,_|v.metadata,C);break}}m>c&&(c=m,a[l++]=new Nn(c,b,_,C))}const d=t[t.length-1].endIndex;if(r<s&&i[r].startOffset===d)for(;r<s&&i[r].startOffset===d;){const h=i[r];a[l++]=new Nn(c,h.className,h.metadata,!1),r++}return a}u(PQ,"_applyInlineDecorations");function FQ(o,e){const t=o.fontIsMonospace,n=o.canUseHalfwidthRightwardsArrow,i=o.containsForeignElements,s=o.lineContent,r=o.len,a=o.isOverflowing,l=o.overflowingCharCount,c=o.parts,d=o.fauxIndentLength,h=o.tabSize,g=o.startVisibleColumn,f=o.containsRTL,m=o.spaceWidth,b=o.renderSpaceCharCode,_=o.renderWhitespace,C=o.renderControlCharacters,v=new yr(r+1,c.length);let y=!1,w=0,x=g,M=0,L=0,E=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let k=0,O=c.length;k<O;k++){const P=c[k],H=P.endIndex,G=P.type,se=P.containsRTL,fe=_!==0&&P.isWhitespace(),Le=fe&&!t&&(G==="mtkw"||!i),Fe=w===H&&P.isPseudoAfter();if(M=0,e.appendString("<span "),se&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(Le?"mtkz":G),e.appendASCIICharCode(34),fe){let Ge=0;{let ke=w,et=x;for(;ke<H;ke++){const be=(s.charCodeAt(ke)===9?h-et%h:1)|0;Ge+=be,ke>=d&&(et+=be)}}for(Le&&(e.appendString(' style="width:'),e.appendString(String(m*Ge)),e.appendString('px"')),e.appendASCIICharCode(62);w<H;w++){v.setColumnInfo(w+1,k-E,M,L),E=0;const ke=s.charCodeAt(w);let et,Je;if(ke===9){et=h-x%h|0,Je=et,!n||Je>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let be=2;be<=Je;be++)e.appendCharCode(160)}else et=2,Je=1,e.appendCharCode(b),e.appendCharCode(8204);M+=et,L+=Je,w>=d&&(x+=Je)}}else for(e.appendASCIICharCode(62);w<H;w++){v.setColumnInfo(w+1,k-E,M,L),E=0;const Ge=s.charCodeAt(w);let ke=1,et=1;switch(Ge){case 9:ke=h-x%h,et=ke;for(let Je=1;Je<=ke;Je++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:C?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:od(Ge)&&et++,C&&Ge<32?e.appendCharCode(9216+Ge):C&&Ge===127?e.appendCharCode(9249):C&&O3(Ge)?(e.appendString("[U+"),e.appendString(OQ(Ge)),e.appendString("]"),ke=8,et=ke):e.appendCharCode(Ge)}M+=ke,L+=et,w>=d&&(x+=et)}Fe?E++:E=0,w>=r&&!y&&P.isPseudoAfter()&&(y=!0,v.setColumnInfo(w+1,k,M,L)),e.appendString("</span>")}return y||v.setColumnInfo(r+1,c.length-1,M,L),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(p("showMore","Show more ({0})",HQ(l))),e.appendString("</span>")),e.appendString("</span>"),new hw(v,f,i)}u(FQ,"_renderLine");function OQ(o){return o.toString(16).toUpperCase().padStart(4,"0")}u(OQ,"to4CharHex");function HQ(o){return o<1024?p("overflow.chars","{0} chars",o):o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/1024/1024).toFixed(1)} MB`}u(HQ,"renderOverflowingCharCount");class mk{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}u(mk,"Viewport");class H3{constructor(e,t){this.tabSize=e,this.data=t}}u(H3,"MinimapLinesRenderingData");class rS{constructor(e,t,n,i,s,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=a}}u(rS,"ViewLineData");class Ls{constructor(e,t,n,i,s,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=Ls.isBasicASCII(n,r),this.containsRTL=Ls.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?wv(e):!0}static containsRTL(e,t,n){return!t&&n?Vf(e):!1}}u(Ls,"ViewLineRenderingData");class mf{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}u(mf,"InlineDecoration");class V3{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new mf(new T(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}u(V3,"SingleLineInlineDecoration");class sN{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}u(sN,"ViewModelDecoration");class oN{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}u(oN,"OverviewRulerDecorationsGroup");function VQ(o){return Array.isArray(o)}u(VQ,"isFuzzyActionArr");function WQ(o){return!VQ(o)}u(WQ,"isFuzzyAction");function W3(o){return typeof o=="string"}u(W3,"isString");function sF(o){return!W3(o)}u(sF,"isIAction");function Pg(o){return!o}u(Pg,"empty");function qc(o,e){return o.ignoreCase&&e?e.toLowerCase():e}u(qc,"fixCase");function oF(o){return o.replace(/[&<>'"_]/g,"-")}u(oF,"sanitize$1");function BQ(o,e){console.log(`${o.languageId}: ${e}`)}u(BQ,"log");function Pt(o,e){return new Error(`${o.languageId}: ${e}`)}u(Pt,"createError");function kc(o,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(s,function(a,l,c,d,h,g,f,m,b){return Pg(c)?Pg(d)?!Pg(h)&&h<n.length?qc(o,n[h]):!Pg(f)&&o&&typeof o[f]=="string"?o[f]:(r===null&&(r=i.split("."),r.unshift(i)),!Pg(g)&&g<r.length?qc(o,r[g]):""):qc(o,t):"$"})}u(kc,"substituteMatches");function Y0(o,e){let t=e;for(;t&&t.length>0;){const n=o.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}u(Y0,"findRules");function UQ(o,e){let t=e;for(;t&&t.length>0;){if(o.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}u(UQ,"stateExists");var GQ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zQ=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const B3=5;class jf{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Pu(e,t);let n=Pu.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new Pu(e,t),this._entries[n]=i,i)}}u(jf,"MonarchStackElementFactory");jf._INSTANCE=new jf(B3);class Pu{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Pu._equals(this,e)}push(e){return jf.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return jf.create(this.parent,e)}}u(Pu,"MonarchStackElement");class wu{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new wu(this.languageId,this.state)}}u(wu,"EmbeddedLanguageData");class _l{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new bf(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new bf(e,t);const n=Pu.getStackElementId(e);let i=this._entries[n];return i||(i=new bf(e,null),this._entries[n]=i,i)}}u(_l,"MonarchLineStateFactory");_l._INSTANCE=new _l(B3);class bf{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:_l.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof bf)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}u(bf,"MonarchLineState");class U3{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new o_(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=Yt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenize(e,t,r);if(i!==0)for(const c of l.tokens)this._tokens.push(new o_(c.offset+i,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new B1(this._tokens,e)}}u(U3,"MonarchClassicTokensCollector");class p_{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,s=t.length,r=n!==null?n.length:0;if(i===0&&s===0&&r===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&r===0)return e;const a=new Uint32Array(i+s+r);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=Yt.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenizeEncoded(e,t,r);if(i!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=i;return this._prependTokens=p_._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new _v(p_._merge(this._prependTokens,this._tokens,null),e)}}u(p_,"MonarchModernTokensCollector");let m_=u(class G3{constructor(e,t,n,i,s){this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Yt.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const h=a.changedLanguages[c];if(this._embeddedLanguages[h]){l=!0;break}}l&&(r=!0,Yt.handleChange([this._languageId]),r=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Yt.get(t);if(n){if(n instanceof G3){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}Yt.isResolved(t)||e.push(Yt.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=jf.create(null,this._lexer.start);return _l.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return qI(this._languageId,n);const i=new U3,s=this._tokenize(e,t,n,i);return i.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return J1(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new p_(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i);return i.finalize(s)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=Y0(this._lexer,t.stack.state),!n))throw Pt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const r of n){if(!sF(r.action)||r.action.nextEmbedded!=="@pop")continue;s=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(i===-1||c<i)&&(i=c)}if(!s)throw Pt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){const r=this._findLeavingNestedLanguageOffset(e,n);if(r===-1){const c=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return _l.create(n.stack,new wu(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&s.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(r);return this._myTokenize(l,t,n,i+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,d=n.stack,h=0,g=null,f=!0;for(;f||h<l;){const m=h,b=d.depth,_=g?g.groups.length:0,C=d.state;let v=null,y=null,w=null,x=null,M=null;if(g){v=g.matches;const k=g.groups.shift();y=k.matched,w=k.action,x=g.rule,g.groups.length===0&&(g=null)}else{if(!f&&h>=l)break;f=!1;let k=this._lexer.tokenizer[C];if(!k&&(k=Y0(this._lexer,C),!k))throw Pt(this._lexer,"tokenizer state is not defined: "+C);const O=a.substr(h);for(const P of k)if((h===0||!P.matchOnlyAtLineStart)&&(v=O.match(P.regex),v)){y=v[0],w=P.action;break}}if(v||(v=[""],y=""),w||(h<l&&(v=[a.charAt(h)],y=v[0]),w=this._lexer.defaultToken),y===null)break;for(h+=y.length;WQ(w)&&sF(w)&&w.test;)w=w.test(y,v,C,h===l);let L=null;if(typeof w=="string"||Array.isArray(w))L=w;else if(w.group)L=w.group;else if(w.token!==null&&w.token!==void 0){if(w.tokenSubst?L=kc(this._lexer,w.token,y,v,C):L=w.token,w.nextEmbedded)if(w.nextEmbedded==="@pop"){if(!c)throw Pt(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Pt(this._lexer,"cannot enter embedded language from within an embedded language");M=kc(this._lexer,w.nextEmbedded,y,v,C)}if(w.goBack&&(h=Math.max(0,h-w.goBack)),w.switchTo&&typeof w.switchTo=="string"){let k=kc(this._lexer,w.switchTo,y,v,C);if(k[0]==="@"&&(k=k.substr(1)),Y0(this._lexer,k))d=d.switchTo(k);else throw Pt(this._lexer,"trying to switch to a state '"+k+"' that is undefined in rule: "+this._safeRuleName(x))}else{if(w.transform&&typeof w.transform=="function")throw Pt(this._lexer,"action.transform not supported");if(w.next)if(w.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Pt(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(C)}else if(w.next==="@pop"){if(d.depth<=1)throw Pt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));d=d.pop()}else if(w.next==="@popall")d=d.popall();else{let k=kc(this._lexer,w.next,y,v,C);if(k[0]==="@"&&(k=k.substr(1)),Y0(this._lexer,k))d=d.push(k);else throw Pt(this._lexer,"trying to set a next state '"+k+"' that is undefined in rule: "+this._safeRuleName(x))}}w.log&&typeof w.log=="string"&&BQ(this._lexer,this._lexer.languageId+": "+kc(this._lexer,w.log,y,v,C))}if(L===null)throw Pt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const E=u(k=>{const O=this._languageService.getLanguageIdByLanguageName(k)||this._languageService.getLanguageIdByMimeType(k)||k,P=this._getNestedEmbeddedLanguageData(O);if(h<l){const H=e.substr(h);return this._nestedTokenize(H,t,_l.create(d,P),i+h,s)}else return _l.create(d,P)},"computeNewStateForEmbeddedLanguage");if(Array.isArray(L)){if(g&&g.groups.length>0)throw Pt(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(v.length!==L.length+1)throw Pt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let k=0;for(let O=1;O<v.length;O++)k+=v[O].length;if(k!==y.length)throw Pt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));g={rule:x,matches:v,groups:[]};for(let O=0;O<L.length;O++)g.groups[O]={action:L[O],matched:v[O+1]};h-=y.length;continue}else{if(L==="@rematch"&&(h-=y.length,y="",v=null,L="",M!==null))return E(M);if(y.length===0){if(l===0||b!==d.depth||C!==d.state||(g?g.groups.length:0)!==_)continue;throw Pt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let k=null;if(W3(L)&&L.indexOf("@brackets")===0){const O=L.substr(9),P=KQ(this._lexer,y);if(!P)throw Pt(this._lexer,"@brackets token returned but no bracket defined as: "+y);k=oF(P.token+O)}else{const O=L===""?"":L+this._lexer.tokenPostfix;k=oF(O)}m<r&&s.emit(m+i,k)}if(M!==null)return E(M)}return _l.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new wu(e,zf);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Yt.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Yt.get(e);return t?new wu(e,t.getInitialState()):new wu(e,zf)}},"MonarchTokenizer");m_=GQ([zQ(4,lt)],m_);function KQ(o,e){if(!e)return null;e=qc(o,e);const t=o.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}u(KQ,"findBracket");var jQ=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},hx;const gx=(hx=window.trustedTypes)===null||hx===void 0?void 0:hx.createPolicy("standaloneColorizer",{createHTML:o=>o});class aS{static colorizeElement(e,t,n,i){i=i||{};const s=i.theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;const c=u(d=>{var h;const g=(h=gx?.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=g},"render");return this.colorize(t,l||"",a,i).then(c,d=>console.error(d))}static colorize(e,t,n,i){return jQ(this,void 0,void 0,function*(){const s=e.languageIdCodec;let r=4;i&&typeof i.tabSize=="number"&&(r=i.tabSize),VI(t)&&(t=t.substr(1));const a=Va(t);if(!e.isRegisteredLanguageId(n))return rF(a,r,s);const l=yield Yt.getOrCreate(n);return l?$Q(a,r,l,s):rF(a,r,s)})}static colorizeLine(e,t,n,i,s=4){const r=Ls.isBasicASCII(e,t),a=Ls.containsRTL(e,r,n);return oS(new nc(!1,!0,e,!1,r,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}}u(aS,"Colorizer");function $Q(o,e,t,n){return new Promise((i,s)=>{const r=u(()=>{const a=qQ(o,e,t,n);if(t instanceof m_){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,s);return}}i(a)},"execute");r()})}u($Q,"_colorize");function rF(o,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,a=o.length;r<a;r++){const l=o[r];s[0]=l.length;const c=new En(s,l,t),d=Ls.isBasicASCII(l,!0),h=Ls.containsRTL(l,d,!0),g=oS(new nc(!1,!0,l,!1,d,h,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(g.html),n.push("<br/>")}return n.join("")}u(rF,"_fakeColorize");function qQ(o,e,t,n){let i=[],s=t.getInitialState();for(let r=0,a=o.length;r<a;r++){const l=o[r],c=t.tokenizeEncoded(l,!0,s);En.convertToEndOffset(c.tokens,l.length);const d=new En(c.tokens,l,n),h=Ls.isBasicASCII(l,!0),g=Ls.containsRTL(l,h,!0),f=oS(new nc(!1,!0,l,!1,h,g,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(f.html),i.push("<br/>"),s=c.endState}return i.join("")}u(qQ,"_actualColorize");const rN={clipboard:{writeText:Rr||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Rr||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Rr||GI()?0:navigator.keyboard||Gl?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function bk(o,e){if(typeof o=="number"){if(o===0)return null;const t=(o&65535)>>>0,n=(o&4294901760)>>>16;return n!==0?new oy([X0(t,e),X0(n,e)]):new oy([X0(t,e)])}else{const t=[];for(let n=0;n<o.length;n++)t.push(X0(o[n],e));return new oy(t)}}u(bk,"decodeKeybinding");function X0(o,e){const t=!!(o&2048),n=!!(o&256),i=e===2?n:t,s=!!(o&1024),r=!!(o&512),a=e===2?t:n,l=o&255;return new Wa(i,s,r,a,l)}u(X0,"createSimpleKeybinding");class Wa{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return e instanceof Wa&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}u(Wa,"KeyCodeChord");class oy{constructor(e){if(e.length===0)throw Ys("chords");this.chords=e}}u(oy,"Keybinding");class z3{constructor(e,t,n,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=r}}u(z3,"ResolvedChord");class K3{}u(K3,"ResolvedKeybinding");function YQ(o){if(o.charCode){const t=String.fromCharCode(o.charCode).toUpperCase();return bl.fromString(t)}const e=o.keyCode;if(e===3)return 7;if(To)switch(e){case 59:return 80;case 107:return 104;case 109:return 106;case 224:if(Ye)return 57}else if(jc){if(Ye&&e===93)return 57;if(!Ye&&e===92)return 57}return j5[e]||0}u(YQ,"extractKeyCode");const XQ=Ye?256:2048,ZQ=512,JQ=1024,QQ=Ye?2048:256;class Et{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState("AltGraph"),this.keyCode=YQ(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=XQ),this.altKey&&(t|=ZQ),this.shiftKey&&(t|=JQ),this.metaKey&&(t|=QQ),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Wa(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}u(Et,"StandardKeyboardEvent");let aF=!1,Mm=null;function eee(o){if(!o.parent||o.parent===o)return null;try{const e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return aF=!0,null}catch{return aF=!0,null}return o.parent}u(eee,"getParentWindowIfSameOrigin");class j3{static getSameOriginWindowChain(){if(!Mm){Mm=[];let e=window,t;do t=eee(e),t?Mm.push({window:e,iframeElement:e.frameElement||null}):Mm.push({window:e,iframeElement:null}),e=t;while(e)}return Mm.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const s=this.getSameOriginWindowChain();for(const r of s){if(n+=r.window.scrollY,i+=r.window.scrollX,r.window===t||!r.iframeElement)break;const a=r.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}u(j3,"IframeUtils");class jo{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=j3.getPositionOfChildWindowRelativeToAncestorWindow(window,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}u(jo,"StandardMouseEvent");class ld{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const i=e,s=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?To&&!Ye?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")Gl&&li?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?To&&!Ye?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}}u(ld,"StandardWheelEvent");/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function tee(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)}u(tee,"_toConsumableArray");var nee=Object.hasOwnProperty,lF=Object.setPrototypeOf,iee=Object.isFrozen,see=Object.getPrototypeOf,oee=Object.getOwnPropertyDescriptor,Es=Object.freeze,zl=Object.seal,ree=Object.create,$3=typeof Reflect<"u"&&Reflect,gw=$3.apply,_k=$3.construct;gw||(gw=u(function(e,t,n){return e.apply(t,n)},"apply"));Es||(Es=u(function(e){return e},"freeze"));zl||(zl=u(function(e){return e},"seal"));_k||(_k=u(function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(tee(t))))},"construct"));var aee=Br(Array.prototype.forEach),cF=Br(Array.prototype.pop),Am=Br(Array.prototype.push),nu=Br(String.prototype.toLowerCase),dF=Br(String.prototype.match),_c=Br(String.prototype.replace),lee=Br(String.prototype.indexOf),cee=Br(String.prototype.trim),el=Br(RegExp.prototype.test),uF=dee(TypeError);function Br(o){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return gw(o,e,n)}}u(Br,"unapply");function dee(o){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return _k(o,t)}}u(dee,"unconstruct");function wt(o,e){lF&&lF(o,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=nu(n);i!==n&&(iee(e)||(e[t]=i),n=i)}o[n]=!0}return o}u(wt,"addToSet");function Kd(o){var e=ree(null),t=void 0;for(t in o)gw(nee,o,[t])&&(e[t]=o[t]);return e}u(Kd,"clone");function Z0(o,e){for(;o!==null;){var t=oee(o,e);if(t){if(t.get)return Br(t.get);if(typeof t.value=="function")return Br(t.value)}o=see(o)}function n(i){return console.warn("fallback value for",i),null}return u(n,"fallbackValue"),n}u(Z0,"lookupGetter");var hF=Es(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fx=Es(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),px=Es(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uee=Es(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mx=Es(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),hee=Es(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gF=Es(["#text"]),fF=Es(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),bx=Es(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pF=Es(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),J0=Es(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gee=zl(/\{\{[\s\S]*|[\s\S]*\}\}/gm),fee=zl(/<%[\s\S]*|[\s\S]*%>/gm),pee=zl(/^data-[\-\w.\u00B7-\uFFFF]/),mee=zl(/^aria-[\-\w]+$/),bee=zl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_ee=zl(/^(?:\w+script|data):/i),vee=zl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function ea(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)}u(ea,"_toConsumableArray$1");var Cee=u(function(){return typeof window>"u"?null:window},"getGlobal"),yee=u(function(e,t){if((typeof e>"u"?"undefined":eb(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:u(function(a){return a},"createHTML")})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},"_createTrustedTypesPolicy");function q3(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cee(),e=u(function(Y){return q3(Y)},"DOMPurify");if(e.version="2.3.1",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;var t=o.document,n=o.document,i=o.DocumentFragment,s=o.HTMLTemplateElement,r=o.Node,a=o.Element,l=o.NodeFilter,c=o.NamedNodeMap,d=c===void 0?o.NamedNodeMap||o.MozNamedAttrMap:c,h=o.Text,g=o.Comment,f=o.DOMParser,m=o.trustedTypes,b=a.prototype,_=Z0(b,"cloneNode"),C=Z0(b,"nextSibling"),v=Z0(b,"childNodes"),y=Z0(b,"parentNode");if(typeof s=="function"){var w=n.createElement("template");w.content&&w.content.ownerDocument&&(n=w.content.ownerDocument)}var x=yee(m,t),M=x&&_g?x.createHTML(""):"",L=n,E=L.implementation,k=L.createNodeIterator,O=L.createDocumentFragment,P=L.getElementsByTagName,H=t.importNode,G={};try{G=Kd(n).documentMode?n.documentMode:{}}catch{}var se={};e.isSupported=typeof y=="function"&&E&&typeof E.createHTMLDocument<"u"&&G!==9;var fe=gee,Le=fee,Fe=pee,Ge=mee,ke=_ee,et=vee,Je=bee,be=null,we=wt({},[].concat(ea(hF),ea(fx),ea(px),ea(mx),ea(gF))),kt=null,As=wt({},[].concat(ea(fF),ea(bx),ea(pF),ea(J0))),Yn=null,lr=null,hc=!0,Vd=!0,cr=!1,$e=!1,gc=!1,ym=!1,wm=!1,fc=!1,bg=!1,V0=!0,_g=!1,W0=!0,J=!0,j=!1,K={},I=null,R=wt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),B=null,V=wt({},["audio","video","img","source","image","track"]),Q=null,ce=wt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ye="http://www.w3.org/1998/Math/MathML",Ee="http://www.w3.org/2000/svg",ze="http://www.w3.org/1999/xhtml",We=ze,Mt=!1,vt=null,Ie=n.createElement("form"),Ln=u(function(Y){vt&&vt===Y||((!Y||(typeof Y>"u"?"undefined":eb(Y))!=="object")&&(Y={}),Y=Kd(Y),be="ALLOWED_TAGS"in Y?wt({},Y.ALLOWED_TAGS):we,kt="ALLOWED_ATTR"in Y?wt({},Y.ALLOWED_ATTR):As,Q="ADD_URI_SAFE_ATTR"in Y?wt(Kd(ce),Y.ADD_URI_SAFE_ATTR):ce,B="ADD_DATA_URI_TAGS"in Y?wt(Kd(V),Y.ADD_DATA_URI_TAGS):V,I="FORBID_CONTENTS"in Y?wt({},Y.FORBID_CONTENTS):R,Yn="FORBID_TAGS"in Y?wt({},Y.FORBID_TAGS):{},lr="FORBID_ATTR"in Y?wt({},Y.FORBID_ATTR):{},K="USE_PROFILES"in Y?Y.USE_PROFILES:!1,hc=Y.ALLOW_ARIA_ATTR!==!1,Vd=Y.ALLOW_DATA_ATTR!==!1,cr=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,$e=Y.SAFE_FOR_TEMPLATES||!1,gc=Y.WHOLE_DOCUMENT||!1,fc=Y.RETURN_DOM||!1,bg=Y.RETURN_DOM_FRAGMENT||!1,V0=Y.RETURN_DOM_IMPORT!==!1,_g=Y.RETURN_TRUSTED_TYPE||!1,wm=Y.FORCE_BODY||!1,W0=Y.SANITIZE_DOM!==!1,J=Y.KEEP_CONTENT!==!1,j=Y.IN_PLACE||!1,Je=Y.ALLOWED_URI_REGEXP||Je,We=Y.NAMESPACE||ze,$e&&(Vd=!1),bg&&(fc=!0),K&&(be=wt({},[].concat(ea(gF))),kt=[],K.html===!0&&(wt(be,hF),wt(kt,fF)),K.svg===!0&&(wt(be,fx),wt(kt,bx),wt(kt,J0)),K.svgFilters===!0&&(wt(be,px),wt(kt,bx),wt(kt,J0)),K.mathMl===!0&&(wt(be,mx),wt(kt,pF),wt(kt,J0))),Y.ADD_TAGS&&(be===we&&(be=Kd(be)),wt(be,Y.ADD_TAGS)),Y.ADD_ATTR&&(kt===As&&(kt=Kd(kt)),wt(kt,Y.ADD_ATTR)),Y.ADD_URI_SAFE_ATTR&&wt(Q,Y.ADD_URI_SAFE_ATTR),Y.FORBID_CONTENTS&&(I===R&&(I=Kd(I)),wt(I,Y.FORBID_CONTENTS)),J&&(be["#text"]=!0),gc&&wt(be,["html","head","body"]),be.table&&(wt(be,["tbody"]),delete Yn.tbody),Es&&Es(Y),vt=Y)},"_parseConfig"),tn=wt({},["mi","mo","mn","ms","mtext"]),ro=wt({},["foreignobject","desc","title","annotation-xml"]),rn=wt({},fx);wt(rn,px),wt(rn,uee);var Xn=wt({},mx);wt(Xn,hee);var Wd=u(function(Y){var Se=y(Y);(!Se||!Se.tagName)&&(Se={namespaceURI:ze,tagName:"template"});var Ke=nu(Y.tagName),an=nu(Se.tagName);if(Y.namespaceURI===Ee)return Se.namespaceURI===ze?Ke==="svg":Se.namespaceURI===ye?Ke==="svg"&&(an==="annotation-xml"||tn[an]):!!rn[Ke];if(Y.namespaceURI===ye)return Se.namespaceURI===ze?Ke==="math":Se.namespaceURI===Ee?Ke==="math"&&ro[an]:!!Xn[Ke];if(Y.namespaceURI===ze){if(Se.namespaceURI===Ee&&!ro[an]||Se.namespaceURI===ye&&!tn[an])return!1;var Qi=wt({},["title","style","font","a","script"]);return!Xn[Ke]&&(Qi[Ke]||!rn[Ke])}return!1},"_checkValidNamespace"),Is=u(function(Y){Am(e.removed,{element:Y});try{Y.parentNode.removeChild(Y)}catch{try{Y.outerHTML=M}catch{Y.remove()}}},"_forceRemove"),Qr=u(function(Y,Se){try{Am(e.removed,{attribute:Se.getAttributeNode(Y),from:Se})}catch{Am(e.removed,{attribute:null,from:Se})}if(Se.removeAttribute(Y),Y==="is"&&!kt[Y])if(fc||bg)try{Is(Se)}catch{}else try{Se.setAttribute(Y,"")}catch{}},"_removeAttribute"),pc=u(function(Y){var Se=void 0,Ke=void 0;if(wm)Y="<remove></remove>"+Y;else{var an=dF(Y,/^[\r\n\t ]+/);Ke=an&&an[0]}var Qi=x?x.createHTML(Y):Y;if(We===ze)try{Se=new f().parseFromString(Qi,"text/html")}catch{}if(!Se||!Se.documentElement){Se=E.createDocument(We,"template",null);try{Se.documentElement.innerHTML=Mt?"":Qi}catch{}}var es=Se.body||Se.documentElement;return Y&&Ke&&es.insertBefore(n.createTextNode(Ke),es.childNodes[0]||null),We===ze?P.call(Se,gc?"html":"body")[0]:gc?Se.documentElement:es},"_initDocument"),Bd=u(function(Y){return k.call(Y.ownerDocument||Y,Y,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},"_createIterator"),Ud=u(function(Y){return Y instanceof h||Y instanceof g?!1:typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof d)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"},"_isClobbered"),Gd=u(function(Y){return(typeof r>"u"?"undefined":eb(r))==="object"?Y instanceof r:Y&&(typeof Y>"u"?"undefined":eb(Y))==="object"&&typeof Y.nodeType=="number"&&typeof Y.nodeName=="string"},"_isNode"),ao=u(function(Y,Se,Ke){se[Y]&&aee(se[Y],function(an){an.call(e,Se,Ke,vt)})},"_executeHook"),B0=u(function(Y){var Se=void 0;if(ao("beforeSanitizeElements",Y,null),Ud(Y)||dF(Y.nodeName,/[\u0080-\uFFFF]/))return Is(Y),!0;var Ke=nu(Y.nodeName);if(ao("uponSanitizeElement",Y,{tagName:Ke,allowedTags:be}),!Gd(Y.firstElementChild)&&(!Gd(Y.content)||!Gd(Y.content.firstElementChild))&&el(/<[/\w]/g,Y.innerHTML)&&el(/<[/\w]/g,Y.textContent)||Ke==="select"&&el(/<template/i,Y.innerHTML))return Is(Y),!0;if(!be[Ke]||Yn[Ke]){if(J&&!I[Ke]){var an=y(Y)||Y.parentNode,Qi=v(Y)||Y.childNodes;if(Qi&&an)for(var es=Qi.length,ts=es-1;ts>=0;--ts)an.insertBefore(_(Qi[ts],!0),C(Y))}return Is(Y),!0}return Y instanceof a&&!Wd(Y)||(Ke==="noscript"||Ke==="noembed")&&el(/<\/no(script|embed)/i,Y.innerHTML)?(Is(Y),!0):($e&&Y.nodeType===3&&(Se=Y.textContent,Se=_c(Se,fe," "),Se=_c(Se,Le," "),Y.textContent!==Se&&(Am(e.removed,{element:Y.cloneNode()}),Y.textContent=Se)),ao("afterSanitizeElements",Y,null),!1)},"_sanitizeElements"),Sm=u(function(Y,Se,Ke){if(W0&&(Se==="id"||Se==="name")&&(Ke in n||Ke in Ie))return!1;if(!(Vd&&!lr[Se]&&el(Fe,Se))){if(!(hc&&el(Ge,Se))){if(!kt[Se]||lr[Se])return!1;if(!Q[Se]){if(!el(Je,_c(Ke,et,""))){if(!((Se==="src"||Se==="xlink:href"||Se==="href")&&Y!=="script"&&lee(Ke,"data:")===0&&B[Y])){if(!(cr&&!el(ke,_c(Ke,et,"")))){if(Ke)return!1}}}}}}return!0},"_isValidAttribute"),U0=u(function(Y){var Se=void 0,Ke=void 0,an=void 0,Qi=void 0;ao("beforeSanitizeAttributes",Y,null);var es=Y.attributes;if(es){var ts={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:kt};for(Qi=es.length;Qi--;){Se=es[Qi];var Qa=Se,Tm=Qa.name,pP=Qa.namespaceURI;if(Ke=cee(Se.value),an=nu(Tm),ts.attrName=an,ts.attrValue=Ke,ts.keepAttr=!0,ts.forceKeepAttr=void 0,ao("uponSanitizeAttribute",Y,ts),Ke=ts.attrValue,!ts.forceKeepAttr&&(Qr(Tm,Y),!!ts.keepAttr)){if(el(/\/>/i,Ke)){Qr(Tm,Y);continue}$e&&(Ke=_c(Ke,fe," "),Ke=_c(Ke,Le," "));var SX=Y.nodeName.toLowerCase();if(Sm(SX,an,Ke))try{pP?Y.setAttributeNS(pP,Tm,Ke):Y.setAttribute(Tm,Ke),cF(e.removed)}catch{}}}ao("afterSanitizeAttributes",Y,null)}},"_sanitizeAttributes"),G0=u(function Xe(Y){var Se=void 0,Ke=Bd(Y);for(ao("beforeSanitizeShadowDOM",Y,null);Se=Ke.nextNode();)ao("uponSanitizeShadowNode",Se,null),!B0(Se)&&(Se.content instanceof i&&Xe(Se.content),U0(Se));ao("afterSanitizeShadowDOM",Y,null)},"_sanitizeShadowDOM");return e.sanitize=function(Xe,Y){var Se=void 0,Ke=void 0,an=void 0,Qi=void 0,es=void 0;if(Mt=!Xe,Mt&&(Xe="<!-->"),typeof Xe!="string"&&!Gd(Xe)){if(typeof Xe.toString!="function")throw uF("toString is not a function");if(Xe=Xe.toString(),typeof Xe!="string")throw uF("dirty is not a string, aborting")}if(!e.isSupported){if(eb(o.toStaticHTML)==="object"||typeof o.toStaticHTML=="function"){if(typeof Xe=="string")return o.toStaticHTML(Xe);if(Gd(Xe))return o.toStaticHTML(Xe.outerHTML)}return Xe}if(ym||Ln(Y),e.removed=[],typeof Xe=="string"&&(j=!1),!j)if(Xe instanceof r)Se=pc("<!---->"),Ke=Se.ownerDocument.importNode(Xe,!0),Ke.nodeType===1&&Ke.nodeName==="BODY"||Ke.nodeName==="HTML"?Se=Ke:Se.appendChild(Ke);else{if(!fc&&!$e&&!gc&&Xe.indexOf("<")===-1)return x&&_g?x.createHTML(Xe):Xe;if(Se=pc(Xe),!Se)return fc?null:M}Se&&wm&&Is(Se.firstChild);for(var ts=Bd(j?Xe:Se);an=ts.nextNode();)an.nodeType===3&&an===Qi||B0(an)||(an.content instanceof i&&G0(an.content),U0(an),Qi=an);if(Qi=null,j)return Xe;if(fc){if(bg)for(es=O.call(Se.ownerDocument);Se.firstChild;)es.appendChild(Se.firstChild);else es=Se;return V0&&(es=H.call(t,es,!0)),es}var Qa=gc?Se.outerHTML:Se.innerHTML;return $e&&(Qa=_c(Qa,fe," "),Qa=_c(Qa,Le," ")),x&&_g?x.createHTML(Qa):Qa},e.setConfig=function(Xe){Ln(Xe),ym=!0},e.clearConfig=function(){vt=null,ym=!1},e.isValidAttribute=function(Xe,Y,Se){vt||Ln({});var Ke=nu(Xe),an=nu(Y);return Sm(Ke,an,Se)},e.addHook=function(Xe,Y){typeof Y=="function"&&(se[Xe]=se[Xe]||[],Am(se[Xe],Y))},e.removeHook=function(Xe){se[Xe]&&cF(se[Xe])},e.removeHooks=function(Xe){se[Xe]&&(se[Xe]=[])},e.removeAllHooks=function(){se={}},e}u(q3,"createDOMPurify");var $a=q3();$a.version;$a.isSupported;const Y3=$a.sanitize;$a.setConfig;$a.clearConfig;$a.isValidAttribute;const X3=$a.addHook,Z3=$a.removeHook;$a.removeHooks;$a.removeAllHooks;var Ue;(function(o){o.inMemory="inmemory",o.vscode="vscode",o.internal="private",o.walkThrough="walkThrough",o.walkThroughSnippet="walkThroughSnippet",o.http="http",o.https="https",o.file="file",o.mailto="mailto",o.untitled="untitled",o.data="data",o.command="command",o.vscodeRemote="vscode-remote",o.vscodeRemoteResource="vscode-remote-resource",o.vscodeUserData="vscode-userdata",o.vscodeCustomEditor="vscode-custom-editor",o.vscodeNotebookCell="vscode-notebook-cell",o.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",o.vscodeNotebookCellOutput="vscode-notebook-cell-output",o.vscodeInteractive="vscode-interactive",o.vscodeInteractiveInput="vscode-interactive-input",o.vscodeSettings="vscode-settings",o.vscodeWorkspaceTrust="vscode-workspace-trust",o.vscodeTerminal="vscode-terminal",o.webviewPanel="webview-panel",o.vscodeWebview="vscode-webview",o.extension="extension",o.vscodeFileResource="vscode-file",o.tmp="tmp",o.vsls="vsls",o.vscodeSourceControl="vscode-scm"})(Ue||(Ue={}));const wee="tkn";class J3{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Ue.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return He(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(r+=`&${wee}=${encodeURIComponent(s)}`),ve.from({scheme:Ld?this._preferredWebSchema:Ue.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:r})}}u(J3,"RemoteAuthoritiesImpl");const Q3=new J3;class $f{uriToBrowserUri(e){return e.scheme===Ue.vscodeRemote?Q3.rewrite(e):e.scheme===Ue.file&&(Rr||OX&&Ts.origin===`${Ue.vscodeFileResource}://${$f.FALLBACK_AUTHORITY}`)?e.with({scheme:Ue.vscodeFileResource,authority:e.authority||$f.FALLBACK_AUTHORITY,query:null,fragment:null}):e}}u($f,"FileAccessImpl");$f.FALLBACK_AUTHORITY="vscode-app";const e7=new $f;var mF;(function(o){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(s){let r;typeof s=="string"?r=new URL(s).searchParams:s instanceof URL?r=s.searchParams:ve.isUri(s)&&(r=new URL(s.toString(!0)).searchParams);const a=r?.get(t);if(a)return e.get(a)}u(n,"getHeadersFromQuery"),o.getHeadersFromQuery=n;function i(s,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}u(i,"addSearchParam"),o.addSearchParam=i})(mF||(mF={}));function kn(o){for(;o.firstChild;)o.firstChild.remove()}u(kn,"clearNode");function aN(o){var e;return(e=o?.isConnected)!==null&&e!==void 0?e:!1}u(aN,"isInDOM");class t7{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}u(t7,"DomListener");function $(o,e,t,n){return new t7(o,e,t,n)}u($,"addDisposableListener");function n7(o){return function(e){return o(new jo(e))}}u(n7,"_wrapAsStandardMouseEvent");function See(o){return function(e){return o(new Et(e))}}u(See,"_wrapAsStandardKeyboardEvent");const pn=u(function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=n7(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=See(n)),$(e,t,s,i)},"addStandardDisposableListener"),Tee=u(function(e,t,n){const i=n7(t);return xee(e,i,n)},"addStandardDisposableListener");function xee(o,e,t){return $(o,Fa&&rN.pointerEvents?ae.POINTER_DOWN:ae.MOUSE_DOWN,e,t)}u(xee,"addDisposableGenericMouseDownListener");let fw,Eo;class ry{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){He(e)}}static sort(e,t){return t.priority-e.priority}}u(ry,"AnimationFrameQueueItem");(function(){let o=[],e=null,t=!1,n=!1;const i=u(()=>{for(t=!1,e=o,o=[],n=!0;e.length>0;)e.sort(ry.sort),e.shift().execute();n=!1},"animationFrameRunner");Eo=u((s,r=0)=>{const a=new ry(s,r);return o.push(a),t||(t=!0,requestAnimationFrame(i)),a},"scheduleAtNextAnimationFrame"),fw=u((s,r)=>{if(n){const a=new ry(s,r);return e.push(a),a}else return Eo(s,r)},"runAtThisOrScheduleAtNextAnimationFrame")})();function lS(o){return document.defaultView.getComputedStyle(o,null)}u(lS,"getComputedStyle$1");function cS(o){if(o!==document.body)return new Lt(o.clientWidth,o.clientHeight);if(Fa&&window.visualViewport)return new Lt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Lt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Lt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Lt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}u(cS,"getClientArea");class sn{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=lS(e),s=i?i.getPropertyValue(t):"0";return sn.convertToPixels(e,s)}static getBorderLeftWidth(e){return sn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return sn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return sn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return sn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return sn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return sn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return sn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return sn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return sn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return sn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return sn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return sn.getDimension(e,"margin-bottom","marginBottom")}}u(sn,"SizeUtils");class Lt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Lt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Lt?e:new Lt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}u(Lt,"Dimension");Lt.None=new Lt(0,0);function i7(o){let e=o.offsetParent,t=o.offsetTop,n=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==document.body&&o!==document.documentElement;){t-=o.scrollTop;const i=o7(o)?null:lS(o);i&&(n-=i.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(n+=sn.getBorderLeftWidth(o),t+=sn.getBorderTopWidth(o),t+=o.offsetTop,n+=o.offsetLeft,e=o.offsetParent)}return{left:n,top:t}}u(i7,"getTopLeftOffset");function Lee(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}u(Lee,"size");function Kn(o){const e=o.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,width:e.width,height:e.height}}u(Kn,"getDomNodePagePosition");function Eee(o){let e=o,t=1;do{const n=lS(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}u(Eee,"getDomNodeZoomLevel");function Vo(o){const e=sn.getMarginLeft(o)+sn.getMarginRight(o);return o.offsetWidth+e}u(Vo,"getTotalWidth");function _x(o){const e=sn.getBorderLeftWidth(o)+sn.getBorderRightWidth(o),t=sn.getPaddingLeft(o)+sn.getPaddingRight(o);return o.offsetWidth-e-t}u(_x,"getContentWidth");function kee(o){const e=sn.getBorderTopWidth(o)+sn.getBorderBottomWidth(o),t=sn.getPaddingTop(o)+sn.getPaddingBottom(o);return o.offsetHeight-e-t}u(kee,"getContentHeight");function vk(o){const e=sn.getMarginTop(o)+sn.getMarginBottom(o);return o.offsetHeight+e}u(vk,"getTotalHeight");function vo(o,e){for(;o;){if(o===e)return!0;o=o.parentNode}return!1}u(vo,"isAncestor$1");function s7(o,e,t){for(;o&&o.nodeType===o.ELEMENT_NODE;){if(o.classList.contains(e))return o;if(t){if(typeof t=="string"){if(o.classList.contains(t))return null}else if(o===t)return null}o=o.parentNode}return null}u(s7,"findParentWithClass");function vx(o,e,t){return!!s7(o,e,t)}u(vx,"hasParentWithClass");function o7(o){return o&&!!o.host&&!!o.mode}u(o7,"isShadowRoot");function pw(o){return!!dh(o)}u(pw,"isInShadowDOM");function dh(o){for(;o.parentNode;){if(o===document.body)return null;o=o.parentNode}return o7(o)?o:null}u(dh,"getShadowRoot");function Yc(){let o=document.activeElement;for(;o?.shadowRoot;)o=o.shadowRoot.activeElement;return o}u(Yc,"getActiveElement");function ko(o=document.getElementsByTagName("head")[0],e){const t=document.createElement("style");return t.type="text/css",t.media="screen",e?.(t),o.appendChild(t),t}u(ko,"createStyleSheet");let Cx=null;function r7(){return Cx||(Cx=ko()),Cx}u(r7,"getSharedStyleSheet");function Dee(o){var e,t;return!((e=o?.sheet)===null||e===void 0)&&e.rules?o.sheet.rules:!((t=o?.sheet)===null||t===void 0)&&t.cssRules?o.sheet.cssRules:[]}u(Dee,"getDynamicStyleSheetRules");function Ck(o,e,t=r7()){!t||!e||t.sheet.insertRule(o+"{"+e+"}",0)}u(Ck,"createCSSRule");function bF(o,e=r7()){if(!e)return;const t=Dee(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(o)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}u(bF,"removeCSSRulesContainingSelector");function a7(o){return typeof HTMLElement=="object"?o instanceof HTMLElement:o&&typeof o=="object"&&o.nodeType===1&&typeof o.nodeName=="string"}u(a7,"isHTMLElement");const ae={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:jc?"webkitAnimationStart":"animationstart",ANIMATION_END:jc?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:jc?"webkitAnimationIteration":"animationiteration"};function Mee(o){const e=o;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}u(Mee,"isEventLike");const Be={stop:(o,e)=>(o.preventDefault(),e&&o.stopPropagation(),o)};function Aee(o){const e=[];for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)e[t]=o.scrollTop,o=o.parentNode;return e}u(Aee,"saveParentsScrollTop");function Iee(o,e){for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)o.scrollTop!==e[t]&&(o.scrollTop=e[t]),o=o.parentNode}u(Iee,"restoreParentsScrollTop");class b_ extends z{static hasFocusWithin(e){const t=dh(e),n=t?t.activeElement:document.activeElement;return vo(n,e)}constructor(e){super(),this._onDidFocus=this._register(new F),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new F),this.onDidBlur=this._onDidBlur.event;let t=b_.hasFocusWithin(e),n=!1;const i=u(()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},"onFocus"),s=u(()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))},"onBlur");this._refreshStateHandler=()=>{b_.hasFocusWithin(e)!==t&&(t?s():i())},this._register($(e,ae.FOCUS,i,!0)),this._register($(e,ae.BLUR,s,!0)),this._register($(e,ae.FOCUS_IN,()=>this._refreshStateHandler())),this._register($(e,ae.FOCUS_OUT,()=>this._refreshStateHandler()))}}u(b_,"FocusTracker");function Kl(o){return new b_(o)}u(Kl,"trackFocus");function q(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}u(q,"append$1");function Nee(o,e){return o.insertBefore(e,o.firstChild),e}u(Nee,"prepend$1");function nr(o,...e){o.innerText="",q(o,...e)}u(nr,"reset");const Ree=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var __;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.SVG="http://www.w3.org/2000/svg"})(__||(__={}));function l7(o,e,t,...n){const i=Ree.exec(e);if(!i)throw new Error("Bad use of emmet");const s=i[1]||"div";let r;return o!==__.HTML?r=document.createElementNS(o,s):r=document.createElement(s),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}u(l7,"_$");function ie(o,e,...t){return l7(__.HTML,o,e,...t)}u(ie,"$$d");ie.SVG=function(o,e,...t){return l7(__.SVG,o,e,...t)};function Pee(o,...e){o?Cs(...e):Ui(...e)}u(Pee,"setVisibility");function Cs(...o){for(const e of o)e.style.display="",e.removeAttribute("aria-hidden")}u(Cs,"show");function Ui(...o){for(const e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}u(Ui,"hide");function _F(o){const e=window.devicePixelRatio*o;return Math.max(1,Math.floor(e))/window.devicePixelRatio}u(_F,"computeScreenAwareSize");function c7(o){window.open(o,"_blank","noopener")}u(c7,"windowOpenNoOpener");function Fee(o){const e=u(()=>{o(),t=Eo(e)},"step");let t=Eo(e);return Oe(()=>t.dispose())}u(Fee,"animate");Q3.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function uh(o){return o?`url('${e7.uriToBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}u(uh,"asCSSUrl");function vF(o){return`'${o.replace(/'/g,"%27")}'`}u(vF,"asCSSPropertyValue");function Fu(o,e){if(o!==void 0){const t=o.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=Fu(n[1].trim(),e)),`var(${n[0]}, ${e})`}return o}return e}u(Fu,"asCssValueWithDefault");function Oee(o,e=!1){const t=document.createElement("a");return X3("afterSanitizeAttributes",n=>{for(const i of["href","src"])if(n.hasAttribute(i)){const s=n.getAttribute(i);if(i==="href"&&s.startsWith("#"))continue;if(t.href=s,!o.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),Oe(()=>{Z3("afterSanitizeAttributes")})}u(Oee,"hookDomPurifyHrefAndSrcSanitizer");const Hee=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class ya extends F{constructor(){super(),this._subscriptions=new X,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add($(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Et(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add($(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add($(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add($(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add($(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add($(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ya.instance||(ya.instance=new ya),ya.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}u(ya,"ModifierKeyEmitter");class d7 extends z{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register($(this.element,ae.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register($(this.element,ae.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register($(this.element,ae.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register($(this.element,ae.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register($(this.element,ae.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}u(d7,"DragAndDropObserver");const Vee=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function tb(o,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const i=Vee.exec(o);if(!i||!i.groups)throw new Error("Bad use of h");const s=i.groups.tag||"div",r=document.createElement(s);i.groups.id&&(r.id=i.groups.id);const a=[];if(i.groups.class)for(const c of i.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(i.groups.name&&(l[i.groups.name]=r),n)for(const c of n)c instanceof HTMLElement?r.appendChild(c):typeof c=="string"?r.append(c):(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,g]of Object.entries(d))r.style.setProperty(CF(h),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(CF(c),d.toString());return l.root=r,l}u(tb,"h");function CF(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}u(CF,"camelCaseToHyphenCase");const yF=2e4;let gu,ay,yk,ly,wk;function Wee(o){gu=document.createElement("div"),gu.className="monaco-aria-container";const e=u(()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),gu.appendChild(n),n},"createAlertContainer");ay=e(),yk=e();const t=u(()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),gu.appendChild(n),n},"createStatusContainer");ly=t(),wk=t(),o.appendChild(gu)}u(Wee,"setARIAContainer");function ri(o){gu&&(ay.textContent!==o?(kn(yk),bw(ay,o)):(kn(ay),bw(yk,o)))}u(ri,"alert");function mw(o){gu&&(Ye?ri(o):ly.textContent!==o?(kn(wk),bw(ly,o)):(kn(ly),bw(wk,o)))}u(mw,"status");function bw(o,e){kn(o),e.length>yF&&(e=e.substr(0,yF)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}u(bw,"insertMessage");const lN=nt("markerDecorationsService"),gs=nt("textModelService");var qf=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class cs extends z{constructor(e,t="",n="",i=!0,s){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return qf(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}u(cs,"Action");class hh extends z{constructor(){super(...arguments),this._onWillRun=this._register(new F),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new F),this.onDidRun=this._onDidRun.event}run(e,t){return qf(this,void 0,void 0,function*(){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return qf(this,void 0,void 0,function*(){yield e.run(t)})}}u(hh,"ActionRunner");class Pn{constructor(){this.id=Pn.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new Pn,...n]:t=n);return t}run(){return qf(this,void 0,void 0,function*(){})}}u(Pn,"Separator");Pn.ID="vs.actions.separator";class gh{get actions(){return this._actions}constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}run(){return qf(this,void 0,void 0,function*(){})}}u(gh,"SubmenuAction");class Ov extends cs{constructor(){super(Ov.ID,p("submenu.empty","(empty)"),void 0,!1)}}u(Ov,"EmptySubmenuAction");Ov.ID="vs.actions.empty";function Ob(o){var e,t;return{id:o.id,label:o.label,class:void 0,enabled:(e=o.enabled)!==null&&e!==void 0?e:!0,checked:(t=o.checked)!==null&&t!==void 0?t:!1,run:()=>qf(this,void 0,void 0,function*(){return o.run()}),tooltip:o.label}}u(Ob,"toAction");var Sk;(function(o){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}u(e,"isThemeColor"),o.isThemeColor=e})(Sk||(Sk={}));var xe;(function(o){o.iconNameSegment="[A-Za-z0-9]+",o.iconNameExpression="[A-Za-z0-9-]+",o.iconModifierExpression="~[A-Za-z]+",o.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${o.iconNameExpression})(${o.iconModifierExpression})?$`);function t(g){const f=e.exec(g.id);if(!f)return t(re.error);const[,m,b]=f,_=["codicon","codicon-"+m];return b&&_.push("codicon-modifier-"+b.substring(1)),_}u(t,"asClassNameArray"),o.asClassNameArray=t;function n(g){return t(g).join(" ")}u(n,"asClassName"),o.asClassName=n;function i(g){return"."+t(g).join(".")}u(i,"asCSSSelector"),o.asCSSSelector=i;function s(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||Sk.isThemeColor(g.color))}u(s,"isThemeIcon"),o.isThemeIcon=s;const r=new RegExp(`^\\$\\((${o.iconNameExpression}(?:${o.iconModifierExpression})?)\\)$`);function a(g){const f=r.exec(g);if(!f)return;const[,m]=f;return{id:m}}u(a,"fromString"),o.fromString=a;function l(g){return{id:g}}u(l,"fromId"),o.fromId=l;function c(g,f){let m=g.id;const b=m.lastIndexOf("~");return b!==-1&&(m=m.substring(0,b)),f&&(m=`${m}~${f}`),{id:m}}u(c,"modify"),o.modify=c;function d(g){const f=g.id.lastIndexOf("~");if(f!==-1)return g.id.substring(f+1)}u(d,"getModifier"),o.getModifier=d;function h(g,f){var m,b;return g.id===f.id&&((m=g.color)===null||m===void 0?void 0:m.id)===((b=f.color)===null||b===void 0?void 0:b.id)}u(h,"isEqual"),o.isEqual=h})(xe||(xe={}));const dn=nt("commandService"),ot=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new F,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.description){const r=[];for(const l of o.description.args)r.push(l.constraint);const a=o.handler;o.handler=function(l,...c){return nZ(c,r),a(l,...c)}}const{id:t}=o;let n=this._commands.get(t);n||(n=new oi,this._commands.set(t,n));const i=n.unshift(o),s=Oe(()=>{i();const r=this._commands.get(t);r?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(o,e){return ot.registerCommand(o,(t,...n)=>t.get(dn).executeCommand(e,...n))}getCommand(o){const e=this._commands.get(o);if(!(!e||e.isEmpty()))return st.first(e)}getCommands(){const o=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&o.set(e,t)}return o}};ot.registerCommand("noop",()=>{});class dS{constructor(){this._coreKeybindings=new oi,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Us===1){if(e&&e.win)return e.win}else if(Us===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=dS.bindToCurrentPlatform(e),n=new X;if(t&&t.primary){const i=bk(t.primary,Us);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const r=t.secondary[i],a=bk(r,Us);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Jo(this.registerKeybindingRule(e),ot.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,s,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:r,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Oe(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Uee)),this._cachedMergedKeybindings.slice(0)}}u(dS,"KeybindingsRegistryImpl");const us=new dS,Bee={EditorModes:"platform.keybindingsRegistry"};Kt.add(Bee.EditorModes,us);function Uee(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}u(Uee,"sorter");var Gee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wF=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zee=globalThis&&globalThis.__rest||function(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i])&&(t[n[i]]=o[n[i]]);return t};function qg(o){return o.command!==void 0}u(qg,"isIMenuItem");function Kee(o){return o.submenu!==void 0}u(Kee,"isISubmenuItem");class A{constructor(e){if(A._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);A._instances.set(e,this),this.id=e}}u(A,"MenuId");A._instances=new Map;A.CommandPalette=new A("CommandPalette");A.DebugBreakpointsContext=new A("DebugBreakpointsContext");A.DebugCallStackContext=new A("DebugCallStackContext");A.DebugConsoleContext=new A("DebugConsoleContext");A.DebugVariablesContext=new A("DebugVariablesContext");A.DebugWatchContext=new A("DebugWatchContext");A.DebugToolBar=new A("DebugToolBar");A.DebugToolBarStop=new A("DebugToolBarStop");A.EditorContext=new A("EditorContext");A.SimpleEditorContext=new A("SimpleEditorContext");A.EditorContent=new A("EditorContent");A.EditorLineNumberContext=new A("EditorLineNumberContext");A.EditorContextCopy=new A("EditorContextCopy");A.EditorContextPeek=new A("EditorContextPeek");A.EditorContextShare=new A("EditorContextShare");A.EditorTitle=new A("EditorTitle");A.EditorTitleRun=new A("EditorTitleRun");A.EditorTitleContext=new A("EditorTitleContext");A.EditorTitleContextShare=new A("EditorTitleContextShare");A.EmptyEditorGroup=new A("EmptyEditorGroup");A.EmptyEditorGroupContext=new A("EmptyEditorGroupContext");A.EditorTabsBarContext=new A("EditorTabsBarContext");A.ExplorerContext=new A("ExplorerContext");A.ExplorerContextShare=new A("ExplorerContextShare");A.ExtensionContext=new A("ExtensionContext");A.GlobalActivity=new A("GlobalActivity");A.CommandCenter=new A("CommandCenter");A.LayoutControlMenuSubmenu=new A("LayoutControlMenuSubmenu");A.LayoutControlMenu=new A("LayoutControlMenu");A.MenubarMainMenu=new A("MenubarMainMenu");A.MenubarAppearanceMenu=new A("MenubarAppearanceMenu");A.MenubarDebugMenu=new A("MenubarDebugMenu");A.MenubarEditMenu=new A("MenubarEditMenu");A.MenubarCopy=new A("MenubarCopy");A.MenubarFileMenu=new A("MenubarFileMenu");A.MenubarGoMenu=new A("MenubarGoMenu");A.MenubarHelpMenu=new A("MenubarHelpMenu");A.MenubarLayoutMenu=new A("MenubarLayoutMenu");A.MenubarNewBreakpointMenu=new A("MenubarNewBreakpointMenu");A.PanelAlignmentMenu=new A("PanelAlignmentMenu");A.PanelPositionMenu=new A("PanelPositionMenu");A.MenubarPreferencesMenu=new A("MenubarPreferencesMenu");A.MenubarRecentMenu=new A("MenubarRecentMenu");A.MenubarSelectionMenu=new A("MenubarSelectionMenu");A.MenubarShare=new A("MenubarShare");A.MenubarSwitchEditorMenu=new A("MenubarSwitchEditorMenu");A.MenubarSwitchGroupMenu=new A("MenubarSwitchGroupMenu");A.MenubarTerminalMenu=new A("MenubarTerminalMenu");A.MenubarViewMenu=new A("MenubarViewMenu");A.MenubarHomeMenu=new A("MenubarHomeMenu");A.OpenEditorsContext=new A("OpenEditorsContext");A.ProblemsPanelContext=new A("ProblemsPanelContext");A.SCMChangeContext=new A("SCMChangeContext");A.SCMResourceContext=new A("SCMResourceContext");A.SCMResourceFolderContext=new A("SCMResourceFolderContext");A.SCMResourceGroupContext=new A("SCMResourceGroupContext");A.SCMSourceControl=new A("SCMSourceControl");A.SCMTitle=new A("SCMTitle");A.SearchContext=new A("SearchContext");A.SearchActionMenu=new A("SearchActionContext");A.StatusBarWindowIndicatorMenu=new A("StatusBarWindowIndicatorMenu");A.StatusBarRemoteIndicatorMenu=new A("StatusBarRemoteIndicatorMenu");A.StickyScrollContext=new A("StickyScrollContext");A.TestItem=new A("TestItem");A.TestItemGutter=new A("TestItemGutter");A.TestPeekElement=new A("TestPeekElement");A.TestPeekTitle=new A("TestPeekTitle");A.TouchBarContext=new A("TouchBarContext");A.TitleBarContext=new A("TitleBarContext");A.TitleBarTitleContext=new A("TitleBarTitleContext");A.TunnelContext=new A("TunnelContext");A.TunnelPrivacy=new A("TunnelPrivacy");A.TunnelProtocol=new A("TunnelProtocol");A.TunnelPortInline=new A("TunnelInline");A.TunnelTitle=new A("TunnelTitle");A.TunnelLocalAddressInline=new A("TunnelLocalAddressInline");A.TunnelOriginInline=new A("TunnelOriginInline");A.ViewItemContext=new A("ViewItemContext");A.ViewContainerTitle=new A("ViewContainerTitle");A.ViewContainerTitleContext=new A("ViewContainerTitleContext");A.ViewTitle=new A("ViewTitle");A.ViewTitleContext=new A("ViewTitleContext");A.CommentEditorActions=new A("CommentEditorActions");A.CommentThreadTitle=new A("CommentThreadTitle");A.CommentThreadActions=new A("CommentThreadActions");A.CommentThreadAdditionalActions=new A("CommentThreadAdditionalActions");A.CommentThreadTitleContext=new A("CommentThreadTitleContext");A.CommentThreadCommentContext=new A("CommentThreadCommentContext");A.CommentTitle=new A("CommentTitle");A.CommentActions=new A("CommentActions");A.InteractiveToolbar=new A("InteractiveToolbar");A.InteractiveCellTitle=new A("InteractiveCellTitle");A.InteractiveCellDelete=new A("InteractiveCellDelete");A.InteractiveCellExecute=new A("InteractiveCellExecute");A.InteractiveInputExecute=new A("InteractiveInputExecute");A.NotebookToolbar=new A("NotebookToolbar");A.NotebookCellTitle=new A("NotebookCellTitle");A.NotebookCellDelete=new A("NotebookCellDelete");A.NotebookCellInsert=new A("NotebookCellInsert");A.NotebookCellBetween=new A("NotebookCellBetween");A.NotebookCellListTop=new A("NotebookCellTop");A.NotebookCellExecute=new A("NotebookCellExecute");A.NotebookCellExecutePrimary=new A("NotebookCellExecutePrimary");A.NotebookDiffCellInputTitle=new A("NotebookDiffCellInputTitle");A.NotebookDiffCellMetadataTitle=new A("NotebookDiffCellMetadataTitle");A.NotebookDiffCellOutputsTitle=new A("NotebookDiffCellOutputsTitle");A.NotebookOutputToolbar=new A("NotebookOutputToolbar");A.NotebookEditorLayoutConfigure=new A("NotebookEditorLayoutConfigure");A.NotebookKernelSource=new A("NotebookKernelSource");A.BulkEditTitle=new A("BulkEditTitle");A.BulkEditContext=new A("BulkEditContext");A.TimelineItemContext=new A("TimelineItemContext");A.TimelineTitle=new A("TimelineTitle");A.TimelineTitleContext=new A("TimelineTitleContext");A.TimelineFilterSubMenu=new A("TimelineFilterSubMenu");A.AccountsContext=new A("AccountsContext");A.PanelTitle=new A("PanelTitle");A.AuxiliaryBarTitle=new A("AuxiliaryBarTitle");A.TerminalInstanceContext=new A("TerminalInstanceContext");A.TerminalEditorInstanceContext=new A("TerminalEditorInstanceContext");A.TerminalNewDropdownContext=new A("TerminalNewDropdownContext");A.TerminalTabContext=new A("TerminalTabContext");A.TerminalTabEmptyAreaContext=new A("TerminalTabEmptyAreaContext");A.TerminalInlineTabContext=new A("TerminalInlineTabContext");A.WebviewContext=new A("WebviewContext");A.InlineCompletionsActions=new A("InlineCompletionsActions");A.NewFile=new A("NewFile");A.MergeInput1Toolbar=new A("MergeToolbar1Toolbar");A.MergeInput2Toolbar=new A("MergeToolbar2Toolbar");A.MergeBaseToolbar=new A("MergeBaseToolbar");A.MergeInputResultToolbar=new A("MergeToolbarResultToolbar");A.InlineSuggestionToolbar=new A("InlineSuggestionToolbar");A.InteractiveSessionContext=new A("InteractiveSessionContext");A.InteractiveSessionCodeBlock=new A("InteractiveSessionCodeblock");A.InteractiveSessionTitle=new A("InteractiveSessionTitle");A.InteractiveSessionExecute=new A("InteractiveSessionExecute");const qa=nt("menuService");class Ll{static for(e){let t=this._all.get(e);return t||(t=new Ll(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof Ll&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}u(Ll,"MenuRegistryChangeEvent");Ll._all=new Map;const Ri=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new G5({merge:Ll.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(o){return this._commands.set(o.id,o),this._onDidChangeMenu.fire(Ll.for(A.CommandPalette)),Oe(()=>{this._commands.delete(o.id)&&this._onDidChangeMenu.fire(Ll.for(A.CommandPalette))})}getCommand(o){return this._commands.get(o)}getCommands(){const o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){let t=this._menuItems.get(o);t||(t=new oi,this._menuItems.set(o,t));const n=t.push(e);return this._onDidChangeMenu.fire(Ll.for(o)),Oe(n)}appendMenuItems(o){const e=new X;for(const{id:t,item:n}of o)e.add(this.appendMenuItem(t,n));return e}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===A.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){const e=new Set;for(const t of o)qg(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||o.push({command:t})})}};class Yf extends gh{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}u(Yf,"SubmenuItemAction");let ir=u(class Tk{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,i,s,r){var a,l;this.hideActions=i,this._commandService=r,this.id=e.id,this.label=Tk.label(e,n),this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let c;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&xe.isThemeIcon(d.icon)&&(c=d.icon),d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}c||(c=xe.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Tk(t,void 0,n,i,s,r):void 0,this._options=n,this.class=c&&xe.asClassName(c)}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}},"MenuItemAction");ir=Gee([wF(4,Me),wF(5,dn)],ir);class Ya{constructor(e){this.desc=e}}u(Ya,"Action2");function Mn(o){const e=new X,t=new o,n=t.desc,{f1:i,menu:s,keybinding:r,description:a}=n,l=zee(n,["f1","menu","keybinding","description"]);if(e.add(ot.registerCommand({id:l.id,handler:(c,...d)=>t.run(c,...d),description:a})),Array.isArray(s))for(const c of s)e.add(Ri.appendMenuItem(c.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:c.precondition===null?void 0:l.precondition})},c)));else s&&e.add(Ri.appendMenuItem(s.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:s.precondition===null?void 0:l.precondition})},s)));if(i&&(e.add(Ri.appendMenuItem(A.CommandPalette,{command:l,when:l.precondition})),e.add(Ri.addCommand(l))),Array.isArray(r))for(const c of r)e.add(us.registerKeybindingRule(Object.assign(Object.assign({},c),{id:l.id,when:l.precondition?Z.and(l.precondition,c.when):c.when})));else r&&e.add(us.registerKeybindingRule(Object.assign(Object.assign({},r),{id:l.id,when:l.precondition?Z.and(l.precondition,r.when):r.when})));return e}u(Mn,"registerAction2");const Ao=nt("telemetryService");class Hv{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=Z.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};us.registerKeybindingRule(i)}}ot.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Ri.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}u(Hv,"Command");class qh extends Hv{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,s)=>s.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(Mo);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const s=i.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}u(qh,"MultiCommand");class cN extends Hv{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}u(cN,"ProxyCommand");class jn extends Hv{static bindToContribution(e){return u(class extends jn{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,s){const r=e(i);r&&this._callback(r,s)}},"EditorControllerCommandImpl")}static runEditorCommand(e,t,n,i){const s=e.get(gt),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Me).contextMatchesRules(si(n)))return i(a,r,t)})}runCommand(e,t){return jn.runEditorCommand(e,t,this.precondition,(n,i,s)=>this.runEditorCommand(n,i,s))}}u(jn,"EditorCommand");class de extends jn{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=A.EditorContext),i.title||(i.title=e.label),i.when=Z.and(e.precondition,i.when),i}return u(n,"withDefaults"),Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(de.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Ao).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}u(de,"EditorAction");class dN extends de{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}u(dN,"MultiEditorAction");class Yh extends Ya{run(e,...t){const n=e.get(gt),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(i)return i.invokeWithinContext(s=>{if(s.get(Me).contextMatchesRules(si(this.desc.precondition)))return this.runEditorCommand(s,i,...t)})}}u(Yh,"EditorAction2");function Xa(o,e){ot.registerCommand(o,function(t,...n){const i=t.get(Re),[s,r]=n;Ct(ve.isUri(s)),Ct(W.isIPosition(r));const a=t.get(en).getModel(s);if(a){const l=W.lift(r);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(gs).createModelReference(s).then(l=>new Promise((c,d)=>{try{const h=i.invokeFunction(e,l.object.textEditorModel,W.lift(r),n.slice(2));c(h)}catch(h){d(h)}}).finally(()=>{l.dispose()}))})}u(Xa,"registerModelAndPositionCommand");function oe(o){return Bs.INSTANCE.registerEditorCommand(o),o}u(oe,"registerEditorCommand");function ee(o){const e=new o;return Bs.INSTANCE.registerEditorAction(e),e}u(ee,"registerEditorAction");function u7(o){return Bs.INSTANCE.registerEditorAction(o),o}u(u7,"registerMultiEditorAction");function jee(o){Bs.INSTANCE.registerEditorAction(o)}u(jee,"registerInstantiatedEditorAction");function ct(o,e,t){Bs.INSTANCE.registerEditorContribution(o,e,t)}u(ct,"registerEditorContribution");var _f;(function(o){function e(r){return Bs.INSTANCE.getEditorCommand(r)}u(e,"getEditorCommand"),o.getEditorCommand=e;function t(){return Bs.INSTANCE.getEditorActions()}u(t,"getEditorActions"),o.getEditorActions=t;function n(){return Bs.INSTANCE.getEditorContributions()}u(n,"getEditorContributions"),o.getEditorContributions=n;function i(r){return Bs.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}u(i,"getSomeEditorContributions"),o.getSomeEditorContributions=i;function s(){return Bs.INSTANCE.getDiffEditorContributions()}u(s,"getDiffEditorContributions"),o.getDiffEditorContributions=s})(_f||(_f={}));const $ee={EditorCommonContributions:"editor.contributions"};class Bs{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}u(Bs,"EditorContributionRegistry");Bs.INSTANCE=new Bs;Kt.add($ee.EditorCommonContributions,Bs.INSTANCE);function Vv(o){return o.register(),o}u(Vv,"registerCommand$3");const h7=Vv(new qh({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:A.MenubarEditMenu,group:"1_do",title:p({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:A.CommandPalette,group:"",title:p("undo","Undo"),order:1}]}));Vv(new cN(h7,{id:"default:undo",precondition:void 0}));const g7=Vv(new qh({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:A.MenubarEditMenu,group:"1_do",title:p({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:A.CommandPalette,group:"",title:p("redo","Redo"),order:1}]}));Vv(new cN(g7,{id:"default:redo",precondition:void 0}));const qee=Vv(new qh({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:A.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:A.CommandPalette,group:"",title:p("selectAll","Select All"),order:1}]}));var Yee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xee=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let v_=u(class{constructor(e,t){}dispose(){}},"MarkerDecorationsContribution");v_.ID="editor.contrib.markerDecorations";v_=Yee([Xee(1,lN)],v_);ct(v_.ID,v_,0);class uN extends z{constructor(e,t){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}}u(uN,"ElementSizeObserver");class Ol{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Ol._read(e,this.key),n=u(s=>Ol._read(e,s),"read"),i=u((s,r)=>Ol._write(e,s,r),"write");this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);e[s]=e[s]||{},this._write(e[s],t.substring(i+1),n);return}e[t]=n}}u(Ol,"EditorSettingMigration");Ol.items=[];function Ad(o,e){Ol.items.push(new Ol(o,e))}u(Ad,"registerEditorSettingMigration");function Io(o,e){Ad(o,(t,n,i)=>{if(typeof t<"u"){for(const[s,r]of e)if(t===s){i(o,r);return}}})}u(Io,"registerSimpleEditorSettingMigration");function Zee(o){Ol.items.forEach(e=>e.apply(o))}u(Zee,"migrateOptions");Io("wordWrap",[[!0,"on"],[!1,"off"]]);Io("lineNumbers",[[!0,"on"],[!1,"off"]]);Io("cursorBlinking",[["visible","solid"]]);Io("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Io("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Io("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Io("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Io("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Io("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Io("autoIndent",[[!1,"advanced"],[!0,"full"]]);Io("matchBrackets",[[!0,"always"],[!1,"never"]]);Io("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Io("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Ad("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Ad("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});Ad("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});const Jee={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Ad("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(const n of Object.entries(Jee))o[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});Ad("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){const n=o?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});Ad("experimental.stickyScroll.enabled",(o,e,t)=>{typeof o=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",o))});Ad("experimental.stickyScroll.maxLineCount",(o,e,t)=>{typeof o=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",o))});class f7{constructor(){this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new F,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(e){return e==="terminalFocus"?this._tabFocusTerminal:this._tabFocusEditor}setTabFocusMode(e,t){t==="terminalFocus"?this._tabFocusTerminal=e:this._tabFocusEditor=e,this._onDidChangeTabFocus.fire()}}u(f7,"TabFocusImpl");const Ou=new f7;var Qee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ete=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let xk=u(class extends z{constructor(e,t,n,i){super(),this._accessibilityService=i,this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new F),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new EI,this.isSimpleWidget=e,this._containerObserver=this._register(new uN(n,t.dimension)),this._rawOptions=SF(t),this._validatedOptions=vl.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(11)&&this._containerObserver.startObserving(),this._register(fo.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Ou.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(KE.onDidChange(()=>this._recomputeOptions())),this._register(Wf.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=vl.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=$c.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Ou.getTabFocusMode("editorFocus"),accessibilitySupport:e.accessibilitySupport};return vl.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:nte(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:jc||To,pixelRatio:Wf.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return KE.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=SF(e);vl.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=vl.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=tte(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}},"EditorConfiguration");xk=Qee([ete(3,Md)],xk);function tte(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}u(tte,"digitCount");function nte(){let o="";return!Gl&&!UI&&(o+="no-user-select "),Gl&&(o+="no-minimap-shadow ",o+="enable-user-select "),Ye&&(o+="mac "),o}u(nte,"getExtraEditorClassName");class p7{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}u(p7,"ValidatedEditorOptions");class m7{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}u(m7,"ComputedEditorOptions");class vl{static validateOptions(e){const t=new p7;for(const n of jg){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new m7;for(const i of jg)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?pi(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!vl._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of jg){const r=!vl._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=r,r&&(i=!0)}return i?new LI(n):null}static applyUpdate(e,t){let n=!1;for(const i of jg)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}}u(vl,"EditorOptionsUtil");function SF(o){const e=gl(o);return Zee(e),e}u(SF,"deepCloneAndMigrateOptions");function mn(o,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,r)}),this[s]}}u(mn,"memoize");var ite=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dt;(function(o){o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"})(Dt||(Dt={}));class Tt extends z{constructor(){super(),this.dispatched=!1,this.targets=new oi,this.ignoreTargets=new oi,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register($(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register($(document,"touchend",e=>this.onTouchEnd(e))),this._register($(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){if(!Tt.isTouchDevice())return z.None;Tt.INSTANCE||(Tt.INSTANCE=new Tt);const t=Tt.INSTANCE.targets.push(e);return Oe(t)}static ignoreTarget(e){if(!Tt.isTouchDevice())return z.None;Tt.INSTANCE||(Tt.INSTANCE=new Tt);const t=Tt.INSTANCE.ignoreTargets.push(e);return Oe(t)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const r=this.newGestureEvent(Dt.Start,s.target);r.pageX=s.pageX,r.pageY=s.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<Tt.HOLD_DELAY&&Math.abs(a.initialPageX-lo(a.rollingPageX))<30&&Math.abs(a.initialPageY-lo(a.rollingPageY))<30){const c=this.newGestureEvent(Dt.Tap,a.initialTarget);c.pageX=lo(a.rollingPageX),c.pageY=lo(a.rollingPageY),this.dispatchEvent(c)}else if(l>=Tt.HOLD_DELAY&&Math.abs(a.initialPageX-lo(a.rollingPageX))<30&&Math.abs(a.initialPageY-lo(a.rollingPageY))<30){const c=this.newGestureEvent(Dt.Contextmenu,a.initialTarget);c.pageX=lo(a.rollingPageX),c.pageY=lo(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){const c=lo(a.rollingPageX),d=lo(a.rollingPageY),h=lo(a.rollingTimestamps)-a.rollingTimestamps[0],g=c-a.rollingPageX[0],f=d-a.rollingPageY[0],m=[...this.targets].filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(m,t,Math.abs(g)/h,g>0?1:-1,c,Math.abs(f)/h,f>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(Dt.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Dt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Tt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Dt.Change||e.type===Dt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(const t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,n,i,s,r,a,l){this.handle=Eo(()=>{const c=Date.now(),d=c-t;let h=0,g=0,f=!0;n+=Tt.SCROLL_FRICTION*d,r+=Tt.SCROLL_FRICTION*d,n>0&&(f=!1,h=i*n*d),r>0&&(f=!1,g=a*r*d);const m=this.newGestureEvent(Dt.Change);m.translationX=h,m.translationY=g,e.forEach(b=>b.dispatchEvent(m)),f||this.inertia(e,c,n,i,s+h,r,a,l+g)})}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],a=this.newGestureEvent(Dt.Change,r.initialTarget);a.translationX=s.pageX-lo(r.rollingPageX),a.translationY=s.pageY-lo(r.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(s.pageX),r.rollingPageY.push(s.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}u(Tt,"Gesture");Tt.SCROLL_FRICTION=-.005;Tt.HOLD_DELAY=700;Tt.CLEAR_TAP_COUNT_TIME=400;ite([mn],Tt,"isTouchDevice",null);class Xh{constructor(){this._hooks=new X,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(Oe(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=window}this._hooks.add($(r,ae.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add($(r,ae.POINTER_UP,a=>this.stopMonitoring(!0)))}}u(Xh,"GlobalPointerMoveMonitor");function Xc(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}u(Xc,"roundFloat");class tt{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}u(tt,"RGBA");class Bo{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Xc(Math.max(Math.min(1,t),0),3),this.l=Xc(Math.max(Math.min(1,n),0),3),this.a=Xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,c=0;const d=(a+r)/2,h=r-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),r){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new Bo(l,c,d,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let r,a,l;if(n===0)r=a=l=i;else{const c=i<.5?i*(1+n):i+n-i*n,d=2*i-c;r=Bo._hue2rgb(d,c,t+1/3),a=Bo._hue2rgb(d,c,t),l=Bo._hue2rgb(d,c,t-1/3)}return new tt(Math.round(r*255),Math.round(a*255),Math.round(l*255),s)}}u(Bo,"HSLA");class Ir{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Xc(Math.max(Math.min(1,t),0),3),this.v=Xc(Math.max(Math.min(1,n),0),3),this.a=Xc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=Math.min(t,n,i),a=s-r,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((n-i)/a%6+6)%6:s===n?c=(i-t)/a+2:c=(t-n)/a+4,new Ir(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,r=i*n,a=r*(1-Math.abs(t/60%2-1)),l=i-r;let[c,d,h]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,h=a):t<240?(d=a,h=r):t<300?(c=a,h=r):t<=360&&(c=r,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new tt(c,d,h,s)}}u(Ir,"HSVA");class U{static fromHex(e){return U.Format.CSS.parseHex(e)||U.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Bo.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Ir.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof tt)this.rgba=e;else if(e instanceof Bo)this._hsla=e,this.rgba=Bo.toRGBA(e);else if(e instanceof Ir)this._hsva=e,this.rgba=Ir.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&tt.equals(this.rgba,e.rgba)&&Bo.equals(this.hsla,e.hsla)&&Ir.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=U._relativeLuminanceForComponent(this.rgba.r),t=U._relativeLuminanceForComponent(this.rgba.g),n=U._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Xc(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new U(new Bo(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new U(new Bo(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new U(new tt(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new U(new tt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:i,a:s}=this.rgba;return new U(new tt(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-n),e.rgba.b-s*(e.rgba.b-i),1))}toString(){return this._toString||(this._toString=U.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}}u(U,"Color");U.white=new U(new tt(255,255,255,1));U.black=new U(new tt(0,0,0,1));U.red=new U(new tt(255,0,0,1));U.blue=new U(new tt(0,0,255,1));U.green=new U(new tt(0,255,0,1));U.cyan=new U(new tt(0,255,255,1));U.lightgrey=new U(new tt(211,211,211,1));U.transparent=new U(new tt(0,0,0,0));(function(o){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:o.Format.CSS.formatRGBA(f)}u(n,"formatRGB"),t.formatRGB=n;function i(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}u(i,"formatRGBA"),t.formatRGBA=i;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:o.Format.CSS.formatHSLA(f)}u(s,"formatHSL"),t.formatHSL=s;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}u(r,"formatHSLA"),t.formatHSLA=r;function a(f){const m=f.toString(16);return m.length!==2?"0"+m:m}u(a,"_toTwoDigitHex");function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}u(l,"formatHex"),t.formatHex=l;function c(f,m=!1){return m&&f.rgba.a===1?o.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}u(c,"formatHexA"),t.formatHexA=c;function d(f){return f.isOpaque()?o.Format.CSS.formatHex(f):o.Format.CSS.formatRGBA(f)}u(d,"format"),t.format=d;function h(f){const m=f.length;if(m===0||f.charCodeAt(0)!==35)return null;if(m===7){const b=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),_=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),C=16*g(f.charCodeAt(5))+g(f.charCodeAt(6));return new o(new tt(b,_,C,1))}if(m===9){const b=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),_=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),C=16*g(f.charCodeAt(5))+g(f.charCodeAt(6)),v=16*g(f.charCodeAt(7))+g(f.charCodeAt(8));return new o(new tt(b,_,C,v/255))}if(m===4){const b=g(f.charCodeAt(1)),_=g(f.charCodeAt(2)),C=g(f.charCodeAt(3));return new o(new tt(16*b+b,16*_+_,16*C+C))}if(m===5){const b=g(f.charCodeAt(1)),_=g(f.charCodeAt(2)),C=g(f.charCodeAt(3)),v=g(f.charCodeAt(4));return new o(new tt(16*b+b,16*_+_,16*C+C,(16*v+v)/255))}return null}u(h,"parseHex"),t.parseHex=h;function g(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}u(g,"_parseHexDigit")})(e.CSS||(e.CSS={}))})(o.Format||(o.Format={}))})(U||(U={}));function hN(o){return`--vscode-${o.replace(/\./g,"-")}`}u(hN,"asCssVariableName");function le(o){return`var(${hN(o)})`}u(le,"asCssVariable");function ste(o,e){return`var(${hN(o)}, ${e})`}u(ste,"asCssVariableWithDefault");const b7={ColorContribution:"base.contributions.colors"};class _7{constructor(){this._onDidChangeSchema=new F,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){const r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=r;const a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return hr(i,t)}}getColorSchema(){return this.colorSchema}toString(){const e=u((t,n)=>{const i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)},"sorter");return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}u(_7,"ColorRegistry");const uS=new _7;Kt.add(b7.ColorContribution,uS);function N(o,e,t,n,i){return uS.registerColor(o,e,t,n,i)}u(N,"registerColor");const te=N("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},p("foreground","Overall foreground color. This color is only used if not overridden by a component."));N("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},p("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const ote=N("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},p("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));N("descriptionForeground",{light:"#717171",dark:_e(te,.7),hcDark:_e(te,.7),hcLight:_e(te,.7)},p("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Q0=N("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},p("iconForeground","The default color for icons in the workbench.")),Gs=N("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},p("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Qe=N("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},p("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Ft=N("contrastActiveBorder",{light:null,dark:null,hcDark:Gs,hcLight:Gs},p("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));N("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},p("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));N("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:U.black,hcLight:"#292929"},p("textSeparatorForeground","Color for text separators."));const rte=N("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkForeground","Foreground color for links in text."));N("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},p("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));N("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},p("textPreformatForeground","Foreground color for preformatted text segments."));N("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},p("textBlockQuoteBackground","Background color for block quotes in text."));N("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:U.white,hcLight:"#292929"},p("textBlockQuoteBorder","Border color for block quotes in text."));N("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:U.black,hcLight:"#F2F2F2"},p("textCodeBlockBackground","Background color for code blocks in text."));const wa=N("widget.shadow",{dark:_e(U.black,.36),light:_e(U.black,.16),hcDark:null,hcLight:null},p("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),gN=N("widget.border",{dark:null,light:null,hcDark:Qe,hcLight:Qe},p("widgetBorder","Border color of widgets such as find/replace inside the editor.")),v7=N("input.background",{dark:"#3C3C3C",light:U.white,hcDark:U.black,hcLight:U.white},p("inputBoxBackground","Input box background.")),C7=N("input.foreground",{dark:te,light:te,hcDark:te,hcLight:te},p("inputBoxForeground","Input box foreground.")),y7=N("input.border",{dark:null,light:null,hcDark:Qe,hcLight:Qe},p("inputBoxBorder","Input box border.")),fN=N("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Qe,hcLight:Qe},p("inputBoxActiveOptionBorder","Border color of activated options in input fields."));N("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},p("inputOption.hoverBackground","Background color of activated options in input fields."));const pN=N("inputOption.activeBackground",{dark:_e(Gs,.4),light:_e(Gs,.2),hcDark:U.transparent,hcLight:U.transparent},p("inputOption.activeBackground","Background hover color of options in input fields.")),mN=N("inputOption.activeForeground",{dark:U.white,light:U.black,hcDark:te,hcLight:te},p("inputOption.activeForeground","Foreground color of activated options in input fields."));N("input.placeholderForeground",{light:_e(te,.5),dark:_e(te,.5),hcDark:_e(te,.7),hcLight:_e(te,.7)},p("inputPlaceholderForeground","Input box foreground color for placeholder text."));const ate=N("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:U.black,hcLight:U.white},p("inputValidationInfoBackground","Input validation background color for information severity.")),lte=N("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:te},p("inputValidationInfoForeground","Input validation foreground color for information severity.")),cte=N("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Qe,hcLight:Qe},p("inputValidationInfoBorder","Input validation border color for information severity.")),dte=N("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:U.black,hcLight:U.white},p("inputValidationWarningBackground","Input validation background color for warning severity.")),ute=N("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:te},p("inputValidationWarningForeground","Input validation foreground color for warning severity.")),hte=N("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Qe,hcLight:Qe},p("inputValidationWarningBorder","Input validation border color for warning severity.")),gte=N("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:U.black,hcLight:U.white},p("inputValidationErrorBackground","Input validation background color for error severity.")),fte=N("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:te},p("inputValidationErrorForeground","Input validation foreground color for error severity.")),pte=N("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Qe,hcLight:Qe},p("inputValidationErrorBorder","Input validation border color for error severity.")),Sa=N("dropdown.background",{dark:"#3C3C3C",light:U.white,hcDark:U.black,hcLight:U.white},p("dropdownBackground","Dropdown background.")),mte=N("dropdown.listBackground",{dark:null,light:null,hcDark:U.black,hcLight:U.white},p("dropdownListBackground","Dropdown list background.")),El=N("dropdown.foreground",{dark:"#F0F0F0",light:te,hcDark:U.white,hcLight:te},p("dropdownForeground","Dropdown foreground.")),Yg=N("dropdown.border",{dark:Sa,light:"#CECECE",hcDark:Qe,hcLight:Qe},p("dropdownBorder","Dropdown border.")),nb=N("button.foreground",{dark:U.white,light:U.white,hcDark:U.white,hcLight:U.white},p("buttonForeground","Button foreground color.")),bte=N("button.separator",{dark:_e(nb,.4),light:_e(nb,.4),hcDark:_e(nb,.4),hcLight:_e(nb,.4)},p("buttonSeparator","Button separator color.")),ib=N("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},p("buttonBackground","Button background color.")),_te=N("button.hoverBackground",{dark:Vr(ib,.2),light:Zh(ib,.2),hcDark:ib,hcLight:ib},p("buttonHoverBackground","Button background color when hovering.")),vte=N("button.border",{dark:Qe,light:Qe,hcDark:Qe,hcLight:Qe},p("buttonBorder","Button border color.")),Cte=N("button.secondaryForeground",{dark:U.white,light:U.white,hcDark:U.white,hcLight:te},p("buttonSecondaryForeground","Secondary button foreground color.")),Lk=N("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:U.white},p("buttonSecondaryBackground","Secondary button background color.")),yte=N("button.secondaryHoverBackground",{dark:Vr(Lk,.2),light:Zh(Lk,.2),hcDark:null,hcLight:null},p("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),cy=N("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:U.black,hcLight:"#0F4A85"},p("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),dy=N("badge.foreground",{dark:U.white,light:"#333",hcDark:U.white,hcLight:U.white},p("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),wte=N("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},p("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),sb=N("scrollbarSlider.background",{dark:U.fromHex("#797979").transparent(.4),light:U.fromHex("#646464").transparent(.4),hcDark:_e(Qe,.6),hcLight:_e(Qe,.4)},p("scrollbarSliderBackground","Scrollbar slider background color.")),ob=N("scrollbarSlider.hoverBackground",{dark:U.fromHex("#646464").transparent(.7),light:U.fromHex("#646464").transparent(.7),hcDark:_e(Qe,.8),hcLight:_e(Qe,.8)},p("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),rb=N("scrollbarSlider.activeBackground",{dark:U.fromHex("#BFBFBF").transparent(.4),light:U.fromHex("#000000").transparent(.6),hcDark:Qe,hcLight:Qe},p("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Ste=N("progressBar.background",{dark:U.fromHex("#0E70C0"),light:U.fromHex("#0E70C0"),hcDark:Qe,hcLight:Qe},p("progressBarBackground","Background color of the progress bar that can show for long running operations."));N("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ta=N("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},p("editorError.foreground","Foreground color of error squigglies in the editor.")),Tte=N("editorError.border",{dark:null,light:null,hcDark:U.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},p("errorBorder","Border color of error boxes in the editor."));N("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const zs=N("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},p("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),C_=N("editorWarning.border",{dark:null,light:null,hcDark:U.fromHex("#FFCC00").transparent(.8),hcLight:U.fromHex("#FFCC00").transparent(.8)},p("warningBorder","Border color of warning boxes in the editor."));N("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ks=N("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},p("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Ek=N("editorInfo.border",{dark:null,light:null,hcDark:U.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},p("infoBorder","Border color of info boxes in the editor.")),xte=N("editorHint.foreground",{dark:U.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},p("editorHint.foreground","Foreground color of hint squigglies in the editor."));N("editorHint.border",{dark:null,light:null,hcDark:U.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},p("hintBorder","Border color of hint boxes in the editor."));N("sash.hoverBorder",{dark:Gs,light:Gs,hcDark:Gs,hcLight:Gs},p("sashActiveBorder","Border color of active sashes."));const Rn=N("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:U.black,hcLight:U.white},p("editorBackground","Editor background color.")),$o=N("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:U.white,hcLight:te},p("editorForeground","Editor default foreground color."));N("editorStickyScroll.background",{light:Rn,dark:Rn,hcDark:Rn,hcLight:Rn},p("editorStickyScrollBackground","Sticky scroll background color for the editor"));N("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},p("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const Vt=N("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:U.white},p("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),xa=N("editorWidget.foreground",{dark:te,light:te,hcDark:te,hcLight:te},p("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),La=N("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Qe,hcLight:Qe},p("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Lte=N("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},p("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),TF=N("quickInput.background",{dark:Vt,light:Vt,hcDark:Vt,hcLight:Vt},p("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Ete=N("quickInput.foreground",{dark:xa,light:xa,hcDark:xa,hcLight:xa},p("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),kte=N("quickInputTitle.background",{dark:new U(new tt(255,255,255,.105)),light:new U(new tt(0,0,0,.06)),hcDark:"#000000",hcLight:U.white},p("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),w7=N("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:U.white,hcLight:"#0F4A85"},p("pickerGroupForeground","Quick picker color for grouping labels.")),Dte=N("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:U.white,hcLight:"#0F4A85"},p("pickerGroupBorder","Quick picker color for grouping borders.")),Mte=N("keybindingLabel.background",{dark:new U(new tt(128,128,128,.17)),light:new U(new tt(221,221,221,.4)),hcDark:U.transparent,hcLight:U.transparent},p("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Ate=N("keybindingLabel.foreground",{dark:U.fromHex("#CCCCCC"),light:U.fromHex("#555555"),hcDark:U.white,hcLight:te},p("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Ite=N("keybindingLabel.border",{dark:new U(new tt(51,51,51,.6)),light:new U(new tt(204,204,204,.4)),hcDark:new U(new tt(111,195,223)),hcLight:Qe},p("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Nte=N("keybindingLabel.bottomBorder",{dark:new U(new tt(68,68,68,.6)),light:new U(new tt(187,187,187,.4)),hcDark:new U(new tt(111,195,223)),hcLight:te},p("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Rc=N("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},p("editorSelectionBackground","Color of the editor selection.")),Rte=N("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:U.white},p("editorSelectionForeground","Color of the selected text for high contrast.")),S7=N("editor.inactiveSelectionBackground",{light:_e(Rc,.5),dark:_e(Rc,.5),hcDark:_e(Rc,.7),hcLight:_e(Rc,.5)},p("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),bN=N("editor.selectionHighlightBackground",{light:AF(Rc,Rn,.3,.6),dark:AF(Rc,Rn,.3,.6),hcDark:null,hcLight:null},p("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);N("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Ft,hcLight:Ft},p("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const Pte=N("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},p("editorFindMatch","Color of the current search match.")),kl=N("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},p("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Fte=N("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},p("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Ote=N("editor.findMatchBorder",{light:null,dark:null,hcDark:Ft,hcLight:Ft},p("editorFindMatchBorder","Border color of the current search match.")),Su=N("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Ft,hcLight:Ft},p("findMatchHighlightBorder","Border color of the other search matches.")),Hte=N("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:_e(Ft,.4),hcLight:_e(Ft,.4)},p("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);N("searchEditor.findMatchBackground",{light:_e(kl,.66),dark:_e(kl,.66),hcDark:kl,hcLight:kl},p("searchEditor.queryMatch","Color of the Search Editor query matches."));N("searchEditor.findMatchBorder",{light:_e(Su,.66),dark:_e(Su,.66),hcDark:Su,hcLight:Su},p("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));N("search.resultsInfoForeground",{light:te,dark:_e(te,.65),hcDark:te,hcLight:te},p("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));N("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},p("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const _w=N("editorHoverWidget.background",{light:Vt,dark:Vt,hcDark:Vt,hcLight:Vt},p("hoverBackground","Background color of the editor hover."));N("editorHoverWidget.foreground",{light:xa,dark:xa,hcDark:xa,hcLight:xa},p("hoverForeground","Foreground color of the editor hover."));const Vte=N("editorHoverWidget.border",{light:La,dark:La,hcDark:La,hcLight:La},p("hoverBorder","Border color of the editor hover."));N("editorHoverWidget.statusBarBackground",{dark:Vr(_w,.2),light:Zh(_w,.05),hcDark:Vt,hcLight:Vt},p("statusBarBackground","Background color of the editor hover status bar."));const Wte=N("editorLink.activeForeground",{dark:"#4E94CE",light:U.blue,hcDark:U.cyan,hcLight:"#292929"},p("activeLinkForeground","Color of active links.")),Dl=N("editorInlayHint.foreground",{dark:dy,light:dy,hcDark:U.black,hcLight:dy},p("editorInlayHintForeground","Foreground color of inline hints")),Ml=N("editorInlayHint.background",{dark:_e(cy,.8),light:_e(cy,.6),hcDark:"#f38518",hcLight:cy},p("editorInlayHintBackground","Background color of inline hints")),Bte=N("editorInlayHint.typeForeground",{dark:Dl,light:Dl,hcDark:Dl,hcLight:Dl},p("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Ute=N("editorInlayHint.typeBackground",{dark:Ml,light:Ml,hcDark:Ml,hcLight:Ml},p("editorInlayHintBackgroundTypes","Background color of inline hints for types")),Gte=N("editorInlayHint.parameterForeground",{dark:Dl,light:Dl,hcDark:Dl,hcLight:Dl},p("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),zte=N("editorInlayHint.parameterBackground",{dark:Ml,light:Ml,hcDark:Ml,hcLight:Ml},p("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));N("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},p("editorLightBulbForeground","The color used for the lightbulb actions icon."));N("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));const kk=new U(new tt(155,185,85,.2)),Dk=new U(new tt(255,0,0,.2)),Kte=N("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},p("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),jte=N("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},p("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);N("diffEditor.insertedLineBackground",{dark:kk,light:kk,hcDark:null,hcLight:null},p("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);N("diffEditor.removedLineBackground",{dark:Dk,light:Dk,hcDark:null,hcLight:null},p("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);N("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));N("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const $te=N("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),qte=N("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));N("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},p("diffEditorInsertedOutline","Outline color for the text that got inserted."));N("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},p("diffEditorRemovedOutline","Outline color for text that got removed."));N("diffEditor.border",{dark:null,light:null,hcDark:Qe,hcLight:Qe},p("diffEditorBorder","Border color between the two text editors."));const Yte=N("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},p("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Xte=N("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Zte=N("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Jte=N("list.focusOutline",{dark:Gs,light:Gs,hcDark:Ft,hcLight:Ft},p("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Qte=N("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Al=N("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},p("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ea=N("list.activeSelectionForeground",{dark:U.white,light:U.white,hcDark:null,hcLight:null},p("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ab=N("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ene=N("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:U.fromHex("#0F4A85").transparent(.1)},p("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tne=N("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nne=N("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ine=N("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),sne=N("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},p("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),T7=N("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:U.white.transparent(.1),hcLight:U.fromHex("#0F4A85").transparent(.1)},p("listHoverBackground","List/Tree background when hovering over items using the mouse.")),x7=N("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),one=N("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},p("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),qo=N("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Gs,hcLight:Gs},p("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),eC=N("list.focusHighlightForeground",{dark:qo,light:Rne(Al,qo,"#BBE7FF"),hcDark:qo,hcLight:qo},p("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));N("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},p("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));N("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},p("listErrorForeground","Foreground color of list items containing errors."));N("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},p("listWarningForeground","Foreground color of list items containing warnings."));const rne=N("listFilterWidget.background",{light:Zh(Vt,0),dark:Vr(Vt,0),hcDark:Vt,hcLight:Vt},p("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),ane=N("listFilterWidget.outline",{dark:U.transparent,light:U.transparent,hcDark:"#f38518",hcLight:"#007ACC"},p("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),lne=N("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Qe,hcLight:Qe},p("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),cne=N("listFilterWidget.shadow",{dark:wa,light:wa,hcDark:wa,hcLight:wa},p("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));N("list.filterMatchBackground",{dark:kl,light:kl,hcDark:null,hcLight:null},p("listFilterMatchHighlight","Background color of the filtered match."));N("list.filterMatchBorder",{dark:Su,light:Su,hcDark:Qe,hcLight:Ft},p("listFilterMatchHighlightBorder","Border color of the filtered match."));const lb=N("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},p("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),dne=N("tree.inactiveIndentGuidesStroke",{dark:_e(lb,.4),light:_e(lb,.4),hcDark:_e(lb,.4),hcLight:_e(lb,.4)},p("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),une=N("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},p("tableColumnsBorder","Table border color between columns.")),hne=N("tree.tableOddRowsBackground",{dark:_e(te,.04),light:_e(te,.04),hcDark:null,hcLight:null},p("tableOddRowsBackgroundColor","Background color for odd table rows."));N("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},p("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const gne=N("checkbox.background",{dark:Sa,light:Sa,hcDark:Sa,hcLight:Sa},p("checkbox.background","Background color of checkbox widget."));N("checkbox.selectBackground",{dark:Vt,light:Vt,hcDark:Vt,hcLight:Vt},p("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const fne=N("checkbox.foreground",{dark:El,light:El,hcDark:El,hcLight:El},p("checkbox.foreground","Foreground color of checkbox widget.")),pne=N("checkbox.border",{dark:Yg,light:Yg,hcDark:Yg,hcLight:Yg},p("checkbox.border","Border color of checkbox widget."));N("checkbox.selectBorder",{dark:Vt,light:Vt,hcDark:Vt,hcLight:Vt},p("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const xF=N("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,p("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Tu=N("quickInputList.focusForeground",{dark:Ea,light:Ea,hcDark:Ea,hcLight:Ea},p("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Xg=N("quickInputList.focusIconForeground",{dark:ab,light:ab,hcDark:ab,hcLight:ab},p("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),xu=N("quickInputList.focusBackground",{dark:y_(xF,Al),light:y_(xF,Al),hcDark:null,hcLight:null},p("quickInput.listFocusBackground","Quick picker background color for the focused item.")),mne=N("menu.border",{dark:null,light:null,hcDark:Qe,hcLight:Qe},p("menuBorder","Border color of menus.")),bne=N("menu.foreground",{dark:El,light:El,hcDark:El,hcLight:El},p("menuForeground","Foreground color of menu items.")),_ne=N("menu.background",{dark:Sa,light:Sa,hcDark:Sa,hcLight:Sa},p("menuBackground","Background color of menu items.")),vne=N("menu.selectionForeground",{dark:Ea,light:Ea,hcDark:Ea,hcLight:Ea},p("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Cne=N("menu.selectionBackground",{dark:Al,light:Al,hcDark:Al,hcLight:Al},p("menuSelectionBackground","Background color of the selected menu item in menus.")),yne=N("menu.selectionBorder",{dark:null,light:null,hcDark:Ft,hcLight:Ft},p("menuSelectionBorder","Border color of the selected menu item in menus.")),wne=N("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Qe,hcLight:Qe},p("menuSeparatorBackground","Color of a separator menu item in menus.")),Mk=N("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},p("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));N("toolbar.hoverOutline",{dark:null,light:null,hcDark:Ft,hcLight:Ft},p("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));N("toolbar.activeBackground",{dark:Vr(Mk,.1),light:Zh(Mk,.1),hcDark:null,hcLight:null},p("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));N("editor.snippetTabstopHighlightBackground",{dark:new U(new tt(124,124,124,.3)),light:new U(new tt(10,50,100,.2)),hcDark:new U(new tt(124,124,124,.3)),hcLight:new U(new tt(10,50,100,.2))},p("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));N("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));N("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));N("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new U(new tt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},p("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const Sne=N("breadcrumb.foreground",{light:_e(te,.8),dark:_e(te,.8),hcDark:_e(te,.8),hcLight:_e(te,.8)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Tne=N("breadcrumb.background",{light:Rn,dark:Rn,hcDark:Rn,hcLight:Rn},p("breadcrumbsBackground","Background color of breadcrumb items.")),LF=N("breadcrumb.focusForeground",{light:Zh(te,.2),dark:Vr(te,.1),hcDark:Vr(te,.1),hcLight:Vr(te,.1)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),xne=N("breadcrumb.activeSelectionForeground",{light:Zh(te,.2),dark:Vr(te,.1),hcDark:Vr(te,.1),hcLight:Vr(te,.1)},p("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));N("breadcrumbPicker.background",{light:Vt,dark:Vt,hcDark:Vt,hcLight:Vt},p("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const L7=.5,EF=U.fromHex("#40C8AE").transparent(L7),kF=U.fromHex("#40A6FF").transparent(L7),DF=U.fromHex("#606060").transparent(.4),Yo=.4,Xf=1,Zg=N("merge.currentHeaderBackground",{dark:EF,light:EF,hcDark:null,hcLight:null},p("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);N("merge.currentContentBackground",{dark:_e(Zg,Yo),light:_e(Zg,Yo),hcDark:_e(Zg,Yo),hcLight:_e(Zg,Yo)},p("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Jg=N("merge.incomingHeaderBackground",{dark:kF,light:kF,hcDark:null,hcLight:null},p("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);N("merge.incomingContentBackground",{dark:_e(Jg,Yo),light:_e(Jg,Yo),hcDark:_e(Jg,Yo),hcLight:_e(Jg,Yo)},p("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Qg=N("merge.commonHeaderBackground",{dark:DF,light:DF,hcDark:null,hcLight:null},p("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);N("merge.commonContentBackground",{dark:_e(Qg,Yo),light:_e(Qg,Yo),hcDark:_e(Qg,Yo),hcLight:_e(Qg,Yo)},p("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Zf=N("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},p("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));N("editorOverviewRuler.currentContentForeground",{dark:_e(Zg,Xf),light:_e(Zg,Xf),hcDark:Zf,hcLight:Zf},p("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));N("editorOverviewRuler.incomingContentForeground",{dark:_e(Jg,Xf),light:_e(Jg,Xf),hcDark:Zf,hcLight:Zf},p("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));N("editorOverviewRuler.commonContentForeground",{dark:_e(Qg,Xf),light:_e(Qg,Xf),hcDark:Zf,hcLight:Zf},p("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const _N=N("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},p("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),cb=N("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ef=N("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},p("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),hS=N("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),MF=N("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Lne=N("minimap.errorHighlight",{dark:new U(new tt(255,18,18,.7)),light:new U(new tt(255,18,18,.7)),hcDark:new U(new tt(255,50,50,1)),hcLight:"#B5200D"},p("minimapError","Minimap marker color for errors.")),Ene=N("minimap.warningHighlight",{dark:zs,light:zs,hcDark:C_,hcLight:C_},p("overviewRuleWarning","Minimap marker color for warnings.")),kne=N("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},p("minimapBackground","Minimap background color.")),Dne=N("minimap.foregroundOpacity",{dark:U.fromHex("#000f"),light:U.fromHex("#000f"),hcDark:U.fromHex("#000f"),hcLight:U.fromHex("#000f")},p("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));N("minimapSlider.background",{light:_e(sb,.5),dark:_e(sb,.5),hcDark:_e(sb,.5),hcLight:_e(sb,.5)},p("minimapSliderBackground","Minimap slider background color."));N("minimapSlider.hoverBackground",{light:_e(ob,.5),dark:_e(ob,.5),hcDark:_e(ob,.5),hcLight:_e(ob,.5)},p("minimapSliderHoverBackground","Minimap slider background color when hovering."));N("minimapSlider.activeBackground",{light:_e(rb,.5),dark:_e(rb,.5),hcDark:_e(rb,.5),hcLight:_e(rb,.5)},p("minimapSliderActiveBackground","Minimap slider background color when clicked on."));const Mne=N("problemsErrorIcon.foreground",{dark:Ta,light:Ta,hcDark:Ta,hcLight:Ta},p("problemsErrorIconForeground","The color used for the problems error icon.")),Ane=N("problemsWarningIcon.foreground",{dark:zs,light:zs,hcDark:zs,hcLight:zs},p("problemsWarningIconForeground","The color used for the problems warning icon.")),Ine=N("problemsInfoIcon.foreground",{dark:Ks,light:Ks,hcDark:Ks,hcLight:Ks},p("problemsInfoIconForeground","The color used for the problems info icon."));N("charts.foreground",{dark:te,light:te,hcDark:te,hcLight:te},p("chartsForeground","The foreground color used in charts."));N("charts.lines",{dark:_e(te,.5),light:_e(te,.5),hcDark:_e(te,.5),hcLight:_e(te,.5)},p("chartsLines","The color used for horizontal lines in charts."));N("charts.red",{dark:Ta,light:Ta,hcDark:Ta,hcLight:Ta},p("chartsRed","The red color used in chart visualizations."));N("charts.blue",{dark:Ks,light:Ks,hcDark:Ks,hcLight:Ks},p("chartsBlue","The blue color used in chart visualizations."));N("charts.yellow",{dark:zs,light:zs,hcDark:zs,hcLight:zs},p("chartsYellow","The yellow color used in chart visualizations."));N("charts.orange",{dark:ef,light:ef,hcDark:ef,hcLight:ef},p("chartsOrange","The orange color used in chart visualizations."));N("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},p("chartsGreen","The green color used in chart visualizations."));N("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("chartsPurple","The purple color used in chart visualizations."));function Nne(o,e){var t,n,i,s;switch(o.op){case 0:return(t=hr(o.value,e))===null||t===void 0?void 0:t.darken(o.factor);case 1:return(n=hr(o.value,e))===null||n===void 0?void 0:n.lighten(o.factor);case 2:return(i=hr(o.value,e))===null||i===void 0?void 0:i.transparent(o.factor);case 3:{const r=hr(o.background,e);return r?(s=hr(o.value,e))===null||s===void 0?void 0:s.makeOpaque(r):hr(o.value,e)}case 4:for(const r of o.values){const a=hr(r,e);if(a)return a}return;case 6:return hr(e.defines(o.if)?o.then:o.else,e);case 5:{const r=hr(o.value,e);if(!r)return;const a=hr(o.background,e);return a?r.isDarkerThan(a)?U.getLighterColor(r,a,o.factor).transparent(o.transparency):U.getDarkerColor(r,a,o.factor).transparent(o.transparency):r.transparent(o.factor*o.transparency)}default:throw z1()}}u(Nne,"executeTransform");function Zh(o,e){return{op:0,value:o,factor:e}}u(Zh,"darken");function Vr(o,e){return{op:1,value:o,factor:e}}u(Vr,"lighten");function _e(o,e){return{op:2,value:o,factor:e}}u(_e,"transparent");function y_(...o){return{op:4,values:o}}u(y_,"oneOf");function Rne(o,e,t){return{op:6,if:o,then:e,else:t}}u(Rne,"ifDefinedThenElse");function AF(o,e,t,n){return{op:5,value:o,background:e,factor:t,transparency:n}}u(AF,"lessProminent");function hr(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?U.fromHex(o):e.getColor(o);if(o instanceof U)return o;if(typeof o=="object")return Nne(o,e)}}u(hr,"resolveColorValue");const E7="vscode://schemas/workbench-colors",k7=Kt.as(Z1.JSONContribution);k7.registerSchema(E7,uS.getColorSchema());const IF=new yt(()=>k7.notifySchemaChanged(E7),200);uS.onDidChangeSchema(()=>{IF.isScheduled()||IF.schedule()});class Wv{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new vN(this.x-window.scrollX,this.y-window.scrollY)}}u(Wv,"PageCoordinates");class vN{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new Wv(this.clientX+window.scrollX,this.clientY+window.scrollY)}}u(vN,"ClientCoordinates");class D7{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}u(D7,"EditorPagePosition");class M7{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}u(M7,"CoordinatesRelativeToEditor");function CN(o){const e=Kn(o);return new D7(e.left,e.top,e.width,e.height)}u(CN,"createEditorPagePosition");function yN(o,e,t){const n=e.width/o.offsetWidth,i=e.height/o.offsetHeight,s=(t.x-e.x)/n,r=(t.y-e.y)/i;return new M7(s,r)}u(yN,"createCoordinatesRelativeToEditor");class jl extends jo{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new Wv(this.posx,this.posy),this.editorPos=CN(n),this.relativePos=yN(n,this.editorPos,this.pos)}}u(jl,"EditorMouseEvent");class A7{constructor(e){this._editorViewDomNode=e}_create(e){return new jl(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return $(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return $(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return $(e,ae.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return $(e,ae.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return $(e,ae.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return $(e,"mousemove",n=>t(this._create(n)))}}u(A7,"EditorMouseEventFactory");class I7{constructor(e){this._editorViewDomNode=e}_create(e){return new jl(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return $(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return $(e,ae.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return $(e,ae.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return $(e,"pointermove",n=>t(this._create(n)))}}u(I7,"EditorPointerEventFactory");class N7 extends z{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Xh),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=pn(document,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,r=>{i(new jl(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),s(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}u(N7,"GlobalEditorPointerMoveMonitor");class Zp{constructor(e){this._editor=e,this._instanceId=++Zp._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new yt(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new R7(t,`dyn-rule-${this._instanceId}-${i}`,pw(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}u(Zp,"DynamicCssRules");Zp._idPool=0;class R7{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=ko(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const s=t[i];let r;typeof s=="object"?r=le(s.id):r=s;const a=Pne(i);n+=`
	${a}: ${r};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}u(R7,"RefCountedCssRule");function Pne(o){return o.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}u(Pne,"camelToDashes");class Jp extends z{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}u(Jp,"ViewEventHandler");class Ds extends Jp{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}u(Ds,"ViewPart");class Ur{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=n[i-r-1];return s}}u(Ur,"PartFingerprints");class P7{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}u(P7,"RestrictedRenderingContext");class F7 extends P7{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}u(F7,"RenderingContext");class O7{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}u(O7,"LineVisibleRanges");class Bv{static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const s=e[n];t[n]=new Bv(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}u(Bv,"HorizontalRange");class Zc{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}u(Zc,"FloatHorizontalRange");class H7{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}u(H7,"HorizontalPosition");class Ak{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}u(Ak,"VisibleRanges");class Hb{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch{return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Zc.compare);const t=[];let n=0,i=e[0];for(let s=1,r=e.length;s<r;s++){const a=e[s];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i[s]=new Zc(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,s,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),i=Math.min(l,Math.max(0,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,r.clientRectDeltaLeft,r.clientRectScale)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let c=e.children[t].firstChild,d=e.children[i].firstChild;if((!c||!d)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!d&&s===0&&i>0&&(d=e.children[i-1].firstChild,s=1073741824)),!c||!d)return null;n=Math.min(c.textContent.length,Math.max(0,n)),s=Math.min(d.textContent.length,Math.max(0,s));const h=this._readClientRects(c,n,d,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}}u(Hb,"RangeUtil");var _o;(function(o){o.DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"})(_o||(_o={}));function Aa(o){return o===_o.HIGH_CONTRAST_DARK||o===_o.HIGH_CONTRAST_LIGHT}u(Aa,"isHighContrast");function w_(o){return o===_o.DARK||o===_o.HIGH_CONTRAST_DARK}u(w_,"isDark");const Fne=function(){return Rr?!0:!(bi||To||Gl)}();let vf=!0;class Ik{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(48);n.get(36)==="off"?this.renderWhitespace=n.get(94):this.renderWhitespace="none",this.renderControlCharacters=n.get(89),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(31),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(64),this.stopRenderingLineAfter=n.get(112),this.fontLigatures=n.get(49)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}u(Ik,"ViewLineOptions");class Tr{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=dt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Aa(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),r=this._options,a=ls.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(Aa(r.themeType)||this._options.renderWhitespace==="selection"){const g=n.selections;for(const f of g){if(f.endLineNumber<e||f.startLineNumber>e)continue;const m=f.startLineNumber===e?f.startColumn:s.minColumn,b=f.endLineNumber===e?f.endColumn:s.maxColumn;m<b&&(Aa(r.themeType)&&a.push(new ls(m,b,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(l||(l=[]),l.push(new iN(m-1,b-1))))}}const c=new nc(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==vs.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;i.appendString('<div style="top:'),i.appendString(String(t)),i.appendString("px;height:"),i.appendString(String(this._options.lineHeight)),i.appendString('px;" class="'),i.appendString(Tr.CLASS_NAME),i.appendString('">');const d=Fv(c,i);i.appendString("</div>");let h=null;return vf&&Fne&&s.isBasicASCII&&r.useMonospaceOptimizations&&d.containsForeignElements===0&&(h=new db(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),h||(h=W7(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof db:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof db?this._renderedViewLine.monospaceAssumptionsAreValid():vf}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof db&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&n>s+1)return new Ak(!0,[new Zc(this.getWidth(i),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return r&&r.length>0?new Ak(!1,r):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}u(Tr,"ViewLine");Tr.CLASS_NAME="view-line";class db{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const i=Math.floor(t.lineContent.length/300);if(i>0){this._keyColumnPixelOffsetCache=new Float32Array(i);for(let s=0;s<i;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return vf;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),vf=!1)}return vf}toSlowRenderedLine(){return W7(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getColumnPixelOffset(e,t,i),r=this._getColumnPixelOffset(e,n,i);return[new Zc(s,r-s)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const i=Math.floor((t-1)/300)-1,s=(i+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[i],r===-1&&(r=this._actualReadPixelOffset(e,s,n),this._keyColumnPixelOffsetCache[i]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const i=this._characterMapping.getDomPosition(t),s=Hb.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new sS(s,n),i)}}u(db,"FastRenderedViewLine");class wN{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,i);if(s===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return r===-1?null:[new Zc(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const r=this._readPixelOffset(e,t,n,s);return r===-1?null:[new Zc(r,0)]}else return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(i);const s=this._getReadingTarget(e);return s.firstChild?(i.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=Hb.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(i);const s=this._characterMapping.getDomPosition(n),r=Hb.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new Zc(0,this.getWidth(i))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return Hb.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,i)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new sS(s,n),i)}}u(wN,"RenderedViewLine");class V7 extends wN{_readVisibleRangesForRange(e,t,n,i,s){const r=super._readVisibleRangesForRange(e,t,n,i,s);if(!r||r.length===0||n===i||n===1&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,s);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}u(V7,"WebKitRenderedViewLine");const W7=function(){return jc?One:Hne}();function One(o,e,t,n,i){return new V7(o,e,t,n,i)}u(One,"createWebKitRenderedLine");function Hne(o,e,t,n,i){return new wN(o,e,t,n,i)}u(Hne,"createNormalRenderedLine");class Sn{static _nextVisibleColumn(e,t,n){return e===9?Sn.nextRenderTabStop(t,n):od(e)||HI(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),r=new d_(s);let a=0;for(;!r.eol();){const l=ow(s,i,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new d_(e);let r=0,a=1;for(;!s.eol();){const l=ow(e,i,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,n),d=s.offset+1;if(c>=t){const h=t-r;return c-t<h?d:a}r=c,a=d}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}u(Sn,"CursorColumns");class Jf{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,r=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[r,a,s];switch(s%n===0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Sn.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[r,a,l]=Jf.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(i){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(r===-1)return-1;let g=a;for(let f=r;f<s;++f){if(g===a+n)return r;switch(e.charCodeAt(f)){case 32:g+=1;break;case 9:g=Sn.nextRenderTabStop(g,n);break;default:return-1}}return g===a+n?r:-1}const d=Sn.nextRenderTabStop(l,n);let h=l;for(let g=t;g<s;g++){if(h===d)return g;switch(e.charCodeAt(g)){case 32:h+=1;break;case 9:h=Sn.nextRenderTabStop(h,n);break;default:return-1}}return h===d?s:-1}}u(Jf,"AtomicTabMoveOperations");class cl{constructor(e=null){this.hitTarget=e,this.type=0}}u(cl,"UnknownHitTestResult");class SN{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}u(SN,"ContentHitTestResult");var fu;(function(o){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new SN(s,n,null):new cl(n)}u(e,"createFromDOMInfo"),o.createFromDOMInfo=e})(fu||(fu={}));class B7{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}u(B7,"PointerHandlerLastRenderData");class wi{static _deduceRage(e,t=null){return!t&&e?new T(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,s,r){return{type:e,element:t,mouseColumn:n,position:i,range:s,detail:r}}static createViewZone(e,t,n,i,s){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:s}}static createContentText(e,t,n,i,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:s}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}u(wi,"MouseTarget");class co{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}u(co,"ElementPath");class fh{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(139),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(64),this.stickyTabStops=i.get(111),this.typicalHalfwidthCharacterWidth=i.get(48).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return fh.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==s&&(l=new W(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new W(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<i?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(i);return{range:new T(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new T(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return fh._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}u(fh,"HitTestContext");class U7{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Jn._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}u(U7,"BareHitTestRequest");class gS extends U7{constructor(e,t,n,i,s){super(e,t,n,i),this._ctx=e,s?(this.target=s,this.targetPath=Ur.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Sn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return wi.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return wi.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return wi.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return wi.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return wi.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return wi.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return wi.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return wi.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return wi.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new gS(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}u(gS,"HitTestRequest");const NF={isAfterLines:!0};function yx(o){return{isAfterLines:!1,horizontalDistanceToText:o}}u(yx,"createEmptyContentDataInLines");class Jn{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Ur.collect(t,this._viewHelper.viewDomNode);return!!(co.isChildOfContentWidgets(n)||co.isChildOfOverflowingContentWidgets(n)||co.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i,s){const r=new fh(this._context,this._viewHelper,e),a=new gS(r,t,n,i,s);try{const l=Jn._createMouseTarget(r,a,!1);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=Jn._snapToSoftTabBoundary(l.position,r.viewModel),d=T.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const r=Jn._doHitTest(e,t);return r.type===1?Jn.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const i=t;let s=null;return s=s||Jn._hitTestContentWidget(e,i),s=s||Jn._hitTestOverlayWidget(e,i),s=s||Jn._hitTestMinimap(e,i),s=s||Jn._hitTestScrollbarSlider(e,i),s=s||Jn._hitTestViewZone(e,i),s=s||Jn._hitTestMargin(e,i),s=s||Jn._hitTestViewCursor(e,i),s=s||Jn._hitTestTextArea(e,i),s=s||Jn._hitTestViewLines(e,i,n),s=s||Jn._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(co.isChildOfContentWidgets(t.targetPath)||co.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(co.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft||i>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=s&&s<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return co.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,r):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r)))}return null}static _hitTestViewLines(e,t,n){if(!co.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new W(1,1),NF);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new W(s,r),NF)}if(n){if(co.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const a=e.getLineWidth(s),l=yx(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new W(s,1),l)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const a=yx(t.mouseContentHorizontalOffset-r),l=new W(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const i=Jn._doHitTest(e,t);return i.type===1?Jn.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(co.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(co.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W(i,s))}}return null}static _hitTestScrollbar(e,t){if(co.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(139),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return Jn._getMouseColumn(i,t.get(48).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const r=i.lineNumber,a=i.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const C=yx(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,C)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(i);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!s,injectedText:s});const h=[];if(h.push({offset:c.left,column:a}),a>1){const C=e.visibleRangeForPosition(r,a-1);C&&h.push({offset:C.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const C=e.visibleRangeForPosition(r,a+1);C&&h.push({offset:C.left,column:a+1})}h.sort((C,v)=>C.offset-v.offset);const f=t.pos.toClientCoordinates(),m=n.getBoundingClientRect(),b=m.left<=f.clientX&&f.clientX<=m.right;let _=null;for(let C=1;C<h.length;C++){const v=h[C-1],y=h[C];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){_=new T(r,v.column,r,y.column);const w=Math.abs(v.offset-t.mouseContentHorizontalOffset),x=Math.abs(y.offset-t.mouseContentHorizontalOffset);i=w<x?new W(r,v.column):new W(r,y.column);break}}return t.fulfillContentText(i,_,{mightBeForeignElement:!b||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),s=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((i+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new Wv(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates());if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=dh(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=Vne(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new cl;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const r=s.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Tr.CLASS_NAME?fu.createFromDOMInfo(e,r,i.startOffset):new cl(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const r=s.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Tr.CLASS_NAME?fu.createFromDOMInfo(e,s,s.textContent.length):new cl(s)}return new cl}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,r=s?s.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Tr.CLASS_NAME?fu.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new cl(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,r=i?i.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(s===Tr.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return fu.createFromDOMInfo(e,l,0)}else if(a===Tr.CLASS_NAME)return fu.createFromDOMInfo(e,n.offsetNode,0)}return new cl(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),s=Jf.atomicPosition(n,e.column-1,i,2);return s!==-1?new W(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new cl;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),s=e.viewModel.normalizePosition(n.position,2);(i||!s.equals(n.position))&&(n=new SN(s,n.spanNode,i))}return n}}u(Jn,"MouseTargetFactory");function Vne(o,e,t){const n=document.createRange();let i=o.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),r=window.getComputedStyle(i,null).getPropertyValue("font-style"),a=window.getComputedStyle(i,null).getPropertyValue("font-variant"),l=window.getComputedStyle(i,null).getPropertyValue("font-weight"),c=window.getComputedStyle(i,null).getPropertyValue("font-size"),d=window.getComputedStyle(i,null).getPropertyValue("line-height"),h=window.getComputedStyle(i,null).getPropertyValue("font-family"),g=`${r} ${a} ${l} ${c}/${d} ${h}`,f=i.innerText;let m=s.left,b=0,_;if(e>s.left+s.width)b=f.length;else{const C=Pc.getInstance();for(let v=0;v<f.length+1;v++){if(_=C.getCharWidth(f.charAt(v),g)/2,m+=_,e<m){b=v;break}m+=_}}n.setStart(i.firstChild,b),n.setEnd(i.firstChild,b)}return n}u(Vne,"shadowCaretRangeFromPoint");class Pc{static getInstance(){return Pc._INSTANCE||(Pc._INSTANCE=new Pc),Pc._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const r=i.measureText(e).width;return this._cache[n]=r,r}}u(Pc,"CharWidthReader");Pc._INSTANCE=null;let No=u(class extends z{onclick(e,t){this._register($(e,ae.CLICK,n=>t(new jo(n))))}onmousedown(e,t){this._register($(e,ae.MOUSE_DOWN,n=>t(new jo(n))))}onmouseover(e,t){this._register($(e,ae.MOUSE_OVER,n=>t(new jo(n))))}onmouseleave(e,t){this._register($(e,ae.MOUSE_LEAVE,n=>t(new jo(n))))}onkeydown(e,t){this._register($(e,ae.KEY_DOWN,n=>t(new Et(n))))}onkeyup(e,t){this._register($(e,ae.KEY_UP,n=>t(new Et(n))))}oninput(e,t){this._register($(e,ae.INPUT,t))}onblur(e,t){this._register($(e,ae.BLUR,t))}onfocus(e,t){this._register($(e,ae.FOCUS,t))}ignoreGesture(e){return Tt.ignoreTarget(e)}},"Widget");const Qf=11;class G7 extends No{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...xe.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Qf+"px",this.domNode.style.height=Qf+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Xh),this._register(pn(this.bgDomNode,ae.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(pn(this.domNode,ae.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Xp),this._pointerdownScheduleRepeatTimer=this._register(new io)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=u(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)},"scheduleRepeater");this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}u(G7,"ScrollbarArrow");class z7 extends z{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new io)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}u(z7,"ScrollbarVisibilityController");const Wne=140;class TN extends No{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new z7(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Xh),this._shouldRender=!0,this.domNode=dt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register($(this.domNode.domNode,ae.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new G7(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=dt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register($(this.slider.domNode,ae.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const s=Kn(this.domNode.domNode);t=e.pageX-s.left,n=e.pageY-s.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const r=this._sliderOrthogonalPointerPosition(s),a=Math.abs(r-n);if(li&&a>Wne){this._setDesiredScrollPositionNow(i.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}u(TN,"AbstractScrollbar");const Bne=20;class ep{constructor(e,t,n,i,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ep(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(Bne,Math.floor(n*a/i))),d=(a-c)/(i-n),h=s*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=ep._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}u(ep,"ScrollbarState");class K7 extends TN{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ep(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-Qf)/2,a=(t.horizontalScrollbarSize-Qf)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new ld(null,1,0))}),this._createArrow({className:"scra",icon:re.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new ld(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}u(K7,"HorizontalScrollbar");class j7 extends TN{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ep(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-Qf)/2,a=(t.verticalScrollbarSize-Qf)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new ld(null,0,1))}),this._createArrow({className:"scra",icon:re.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new ld(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}u(j7,"VerticalScrollbar");class S_{constructor(e,t,n,i,s,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,s=s|0,r=r|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),s<0&&(s=0),a+s>r&&(a=r-s),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=s,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new S_(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new S_(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}u(S_,"ScrollState");class Qp extends z{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new F),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new S_(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new tp(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=tp.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}u(Qp,"Scrollable");class Nk{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}u(Nk,"SmoothScrollingUpdate");function wx(o,e){const t=e-o;return function(n){return o+t*zne(n)}}u(wx,"createEaseOutCubic");function Une(o,e,t){return function(n){return n<t?o(n/t):e((n-t)/(1-t))}}u(Une,"createComposed");class tp{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,r;return e<t?(s=e+.75*n,r=t-.75*n):(s=e-.75*n,r=t+.75*n),Une(wx(e,s),wx(r,t),.33)}return wx(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new Nk(n,i,!1)}return new Nk(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return tp.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new tp(e,t,i,n)}}u(tp,"SmoothScrollingOperation");function Gne(o){return Math.pow(o,3)}u(Gne,"easeInCubic");function zne(o){return 1-Gne(1-o)}u(zne,"easeOutCubic");const Kne=500,RF=50;class $7{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}u($7,"MouseWheelClassifierItem");class T_{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){const t=window.devicePixelRatio/pV();li||bi?this.accept(Date.now(),e.deltaX/t,e.deltaY/t):this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){const i=new $7(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}u(T_,"MouseWheelClassifier");T_.INSTANCE=new T_;class fS extends No{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new F),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new F),e.style.overflow="hidden",this._options=jne(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new j7(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new K7(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=dt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=dt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=dt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new io),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=mt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ye&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new ld(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=mt(this._mouseWheelToDispose),e)){const n=u(i=>{this._onMouseWheel(new ld(i))},"onMouseWheel");this._mouseWheelToDispose.push($(this._listenOnDomNode,ae.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=T_.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(r)?r=0:s=0),this._options.flipAxes&&([s,r]=[r,s]);const a=!Ye&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!r&&(r=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(r=r*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(s){const d=RF*s,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,h)}if(r){const d=RF*r,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,h)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Kne)}}u(fS,"AbstractScrollableElement");class xN extends fS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Qp({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Eo(i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}u(xN,"ScrollableElement");class pS extends fS{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}u(pS,"SmoothScrollableElement");class em extends fS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Qp({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Eo(i)});super(e,t,n),this._register(n),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}u(em,"DomScrollableElement");function jne(o){const e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,Ye&&(e.className+=" mac"),e}u(jne,"resolveOptions$1");class mS extends Jp{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Jn(this._context,n),this._mouseDownOperation=this._register(new q7(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(139).height;const i=new A7(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=$(document,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new jl(a,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let s=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{s=a})),this._register($(this.viewHelper.viewDomNode,ae.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=T_.INSTANCE;let t=0,n=fo.getZoomLevel(),i=!1,s=0;const r=u(l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(73))return;const c=new ld(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=fo.getZoomLevel(),h=c.deltaY>0?1:-1;fo.setZoomLevel(d+h),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=fo.getZoomLevel(),i=a(l),s=0),t=Date.now(),s+=c.deltaY,i&&(fo.setZoomLevel(n+s/5),c.preventDefault(),c.stopPropagation())},"onMouseWheel");this._register($(this.viewHelper.viewDomNode,ae.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return Ye?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}u(a,"hasMouseWheelZoomModifiers")}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(139)){const t=this._context.configuration.options.get(139).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const i=new vN(e,t).toPageCoordinates(),s=CN(this.viewHelper.viewDomNode);if(i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width)return null;const r=yN(this.viewHelper.viewDomNode,s,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=dh(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,s=n.type===2||n.type===3||n.type===4,r=n.type===3,a=this._context.configuration.options.get(104),l=n.type===8||n.type===5,c=n.type===9;let d=e.leftButton||e.middleButton;Ye&&e.leftButton&&e.ctrlKey&&(d=!1);const h=u(()=>{e.preventDefault(),this.viewHelper.focusTextArea()},"focus");if(d&&(i||r&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(l){const g=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}u(mS,"MouseHandler");class q7 extends z{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=i,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new N7(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Y7(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new Uv,this._currentSelection=new ge(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(87)&&s.get(33)&&!s.get(20)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(i.getCurrentScrollTop()-a,0),c=fh.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return wi.createOutsideEditor(s,h,"above",a)}const d=i.getLineNumberAtVerticalOffset(l);return wi.createOutsideEditor(s,new W(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=i.getCurrentScrollTop()+e.relativePos.y,c=fh.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return wi.createOutsideEditor(s,h,"below",a)}const d=i.getLineNumberAtVerticalOffset(l);return wi.createOutsideEditor(s,new W(d,n.getLineMaxColumn(d)),"below",a)}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return wi.createOutsideEditor(s,new W(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return wi.createOutsideEditor(s,new W(r,n.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const r=this._helpPositionJumpOverViewZone(i.detail);if(r)return wi.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new W(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}u(q7,"MouseDownOperation");class Y7 extends z{constructor(e,t,n,i){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new X7(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}u(Y7,"TopBottomDragScrolling");class X7 extends z{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=Eo(()=>this._execute())}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(64),t=this._context.configuration.options.get(139).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(64),t=this._getScrollSpeed(),n=this._tick(),i=t*(n/1e3)*e,s=this._position.outsidePosition==="above"?-i:i;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=CN(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(139).horizontalScrollbarHeight,h=new Wv(this._mouseEvent.pos.x,c.y+c.height-d-.1),g=yN(this._viewHelper.viewDomNode,c,h);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,h,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=wi.createOutsideEditor(this._position.mouseColumn,new W(a,1),"above",this._position.outsideDistance):l=wi.createOutsideEditor(this._position.mouseColumn,new W(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=Eo(()=>this._execute())}}u(X7,"TopBottomDragScrollingOperation");class Uv{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>Uv.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}u(Uv,"MouseDownState");Uv.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class qe{get event(){return this.emitter.event}constructor(e,t,n){const i=u(s=>this.emitter.fire(s),"fn");this.emitter=new F({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}}u(qe,"DomEmitter");var Fc;(function(o){const e={total:0,min:Number.MAX_VALUE,max:0},t=Object.assign({},e),n=Object.assign({},e),i=Object.assign({},e);let s=0;const r={keydown:0,input:0,render:0};function a(){C(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}u(a,"onKeyDown"),o.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}u(l,"markKeyDownEnd");function c(){performance.mark("input/start"),r.input=1,_()}u(c,"onBeforeInput"),o.onBeforeInput=c;function d(){r.input===0&&c(),queueMicrotask(h)}u(d,"onInput"),o.onInput=d;function h(){r.input===1&&(performance.mark("input/end"),r.input=2)}u(h,"markInputEnd");function g(){C()}u(g,"onKeyUp"),o.onKeyUp=g;function f(){C()}u(f,"onSelectionChange"),o.onSelectionChange=f;function m(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(b),_())}u(m,"onRenderStart"),o.onRenderStart=m;function b(){r.render===1&&(performance.mark("render/end"),r.render=2)}u(b,"markRenderEnd");function _(){setTimeout(C)}u(_,"scheduleRecordIfFinishedTask");function C(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",e),v("input",t),v("render",n),v("inputlatency",i),s++,y())}u(C,"recordIfFinished");function v(L,E){const k=performance.getEntriesByName(L)[0].duration;E.total+=k,E.min=Math.min(E.min,k),E.max=Math.max(E.max,k)}u(v,"addMeasure");function y(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}u(y,"reset");function w(){if(s===0)return;const L={keydown:x(e),input:x(t),render:x(n),total:x(i),sampleCount:s};return M(e),M(t),M(n),M(i),s=0,L}u(w,"getAndClearMeasurements"),o.getAndClearMeasurements=w;function x(L){return{average:L.total/s,max:L.max,min:L.min}}u(x,"cumulativeToFinalMeasurement");function M(L){L.total=0,L.min=Number.MAX_VALUE,L.max=0}u(M,"clearCumulativeMeasurement")})(Fc||(Fc={}));class Gn{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=i,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),i=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){const a=n.substring(0,i),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new Gn(n,i,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new Gn(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,n,i,s,r,a,l,c;if(e<=this.selectionStart){const g=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((n=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&n!==void 0?n:null,g,-1)}if(e>=this.selectionEnd){const g=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((s=(i=this.selection)===null||i===void 0?void 0:i.getEndPosition())!==null&&s!==void 0?s:null,g,1)}const d=this.value.substring(this.selectionStart,e);if(d.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((a=(r=this.selection)===null||r===void 0?void 0:r.getStartPosition())!==null&&a!==void 0?a:null,d,1);const h=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((c=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&c!==void 0?c:null,h,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(oh(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(c_(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-s);const r=t.value.substring(i,t.value.length-s),a=e.selectionStart-i,l=e.selectionEnd-i,c=t.selectionStart-i,d=t.selectionEnd-i;if(c===d){const g=e.selectionStart-i;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(oh(e.value,t.value),e.selectionEnd),i=Math.min(c_(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-r.length}}}u(Gn,"TextAreaState");Gn.EMPTY=new Gn("",0,0,null,void 0);class Lu{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new T(i,1,s+1,1)}static fromEditorSelection(e,t,n,i){const r=Lu._getPageOfLine(t.startLineNumber,n),a=Lu._getRangeForPage(r,n),l=Lu._getPageOfLine(t.endLineNumber,n),c=Lu._getRangeForPage(l,n);let d=a.intersectRanges(new T(1,1,t.startLineNumber,t.startColumn));if(i&&e.getValueLengthInRange(d,1)>500){const C=e.modifyPosition(d.getEndPosition(),-500);d=T.fromPositions(C,d.getEndPosition())}const h=e.getValueInRange(d,1),g=e.getLineCount(),f=e.getLineMaxColumn(g);let m=c.intersectRanges(new T(t.endLineNumber,t.endColumn,g,f));if(i&&e.getValueLengthInRange(m,1)>500){const C=e.modifyPosition(m.getStartPosition(),500);m=T.fromPositions(m.getStartPosition(),C)}const b=e.getValueInRange(m,1);let _;if(r===l||r+1===l)_=e.getValueInRange(t,1);else{const C=a.intersectRanges(t),v=c.intersectRanges(t);_=e.getValueInRange(C,1)+String.fromCharCode(8230)+e.getValueInRange(v,1)}return i&&_.length>2*500&&(_=_.substring(0,500)+String.fromCharCode(8230)+_.substring(_.length-500,_.length)),new Gn(h+_+b,h.length,h.length+_.length,t,d.endLineNumber-d.startLineNumber)}}u(Lu,"PagedScreenReaderStrategy");var vw;(function(o){o.Tap="-monaco-textarea-synthetic-tap"})(vw||(vw={}));const Rk={forceCopyWithSyntaxHighlighting:!1};class np{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}u(np,"InMemoryClipboardMetadataManager");np.INSTANCE=new np;class Z7{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}u(Z7,"CompositionContext");class J7 extends z{get textAreaState(){return this._textAreaState}constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new F),this.onFocus=this._onFocus.event,this._onBlur=this._register(new F),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new F),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new F),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new F),this.onCut=this._onCut.event,this._onPaste=this._register(new F),this.onPaste=this._onPaste.event,this._onType=this._register(new F),this.onType=this._onType.event,this._onCompositionStart=this._register(new F),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new F),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new F),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new F),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new yt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new yt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Gn.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(r=>{const a=new Et(r);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new Et(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new Z7;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&s&&s.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(s.code==="ArrowRight"||s.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=Gn.readFromTextArea(this._textArea,this._textAreaState),d=Gn.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Gn.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=Gn.readFromTextArea(this._textArea,this._textAreaState),d=Gn.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Gn.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Gn.readFromTextArea(this._textArea,this._textAreaState),l=Gn.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&(In(l.text.charCodeAt(0))||l.text.charCodeAt(0)===127)||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=Pk.getTextData(r.clipboardData);a&&(l=l||np.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return $(document,"selectionchange",t=>{if(Fc.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new ge(d.lineNumber,d.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};np.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&Pk.setTextData(e.clipboardData,t.text,t.html,n)}}u(J7,"TextAreaInput");class Pk{static getTextData(e){const t=e.getData(rs.text);let n=null;const i=e.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return t.length===0&&n===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(r=>r.name).join(`
`),null]:[t,n]}static setTextData(e,t,n,i){e.setData(rs.text,t),typeof n=="string"&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}}u(Pk,"ClipboardEventUtils");class Q7 extends z{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new qe(this._actual,"keydown")).event,this.onKeyUp=this._register(new qe(this._actual,"keyup")).event,this.onCompositionStart=this._register(new qe(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new qe(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new qe(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new qe(this._actual,"beforeinput")).event,this.onInput=this._register(new qe(this._actual,"input")).event,this.onCut=this._register(new qe(this._actual,"cut")).event,this.onCopy=this._register(new qe(this._actual,"copy")).event,this.onPaste=this._register(new qe(this._actual,"paste")).event,this.onFocus=this._register(new qe(this._actual,"focus")).event,this.onBlur=this._register(new qe(this._actual,"blur")).event,this._onSyntheticTap=this._register(new F),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Fc.onKeyDown())),this._register(this.onBeforeInput(()=>Fc.onBeforeInput())),this._register(this.onInput(()=>Fc.onInput())),this._register(this.onKeyUp(()=>Fc.onKeyUp())),this._register($(this._actual,vw.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=dh(this._actual);return e?e.activeElement===this._actual:aN(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const r=dh(i);r?s=r.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,c=i.selectionEnd;if(a&&l===t&&c===n){To&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),To&&window.parent!==window&&i.focus();return}try{const d=Aee(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),Iee(i,d)}catch{}}}u(Q7,"TextAreaWrapper");class e9 extends mS{constructor(e,t,n){super(e,t,n),this._register(Tt.addTarget(this.viewHelper.linesContentDomNode)),this._register($(this.viewHelper.linesContentDomNode,Dt.Tap,s=>this.onTap(s))),this._register($(this.viewHelper.linesContentDomNode,Dt.Change,s=>this.onChange(s))),this._register($(this.viewHelper.linesContentDomNode,Dt.Contextmenu,s=>this._onContextMenu(new jl(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register($(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const r=s.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new I7(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(s,r)=>this._onMouseDown(s,r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new jl(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}u(e9,"PointerEventHandler");class t9 extends mS{constructor(e,t,n){super(e,t,n),this._register(Tt.addTarget(this.viewHelper.linesContentDomNode)),this._register($(this.viewHelper.linesContentDomNode,Dt.Tap,i=>this.onTap(i))),this._register($(this.viewHelper.linesContentDomNode,Dt.Change,i=>this.onChange(i))),this._register($(this.viewHelper.linesContentDomNode,Dt.Contextmenu,i=>this._onContextMenu(new jl(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new jl(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(vw.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}u(t9,"TouchHandler");class n9 extends z{constructor(e,t,n){super(),Fa&&rN.pointerEvents?this.handler=this._register(new e9(e,t,n)):window.TouchEvent?this.handler=this._register(new t9(e,t,n)):this.handler=this._register(new mS(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}u(n9,"PointerHandler");class Id extends Jp{}u(Id,"DynamicViewOverlay");const qn=nt("themeService");function on(o){return{id:o}}u(on,"themeColorFromId");function Cw(o){switch(o){case _o.DARK:return"vs-dark";case _o.HIGH_CONTRAST_DARK:return"hc-black";case _o.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}u(Cw,"getThemeTypeSelector");const i9={ThemingContribution:"base.contributions.theming"};class s9{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new F}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Oe(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}u(s9,"ThemingRegistry");const o9=new s9;Kt.add(i9.ThemingContribution,o9);function or(o){return o9.onColorThemeChange(o)}u(or,"registerThemingParticipant");class r9 extends z{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}u(r9,"Themable");const a9=N("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},p("lineHighlight","Background color for the highlight of line at the cursor position.")),PF=N("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Qe},p("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));N("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},p("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);N("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Ft,hcLight:Ft},p("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0);N("editor.symbolHighlightBackground",{dark:kl,light:kl,hcDark:null,hcLight:null},p("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);N("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Ft,hcLight:Ft},p("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);const l9=N("editorCursor.foreground",{dark:"#AEAFAD",light:U.black,hcDark:U.white,hcLight:"#0F4A85"},p("caret","Color of the editor cursor.")),$ne=N("editorCursor.background",null,p("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Il=N("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},p("editorWhitespaces","Color of whitespace characters in the editor.")),bS=N("editorIndentGuide.background",{dark:Il,light:Il,hcDark:Il,hcLight:Il},p("editorIndentGuides","Color of the editor indentation guides.")),_S=N("editorIndentGuide.activeBackground",{dark:Il,light:Il,hcDark:Il,hcLight:Il},p("editorActiveIndentGuide","Color of the active editor indentation guides.")),qne=N("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:U.white,hcLight:"#292929"},p("editorLineNumbers","Color of editor line numbers.")),tC=N("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Ft,hcLight:Ft},p("editorActiveLineNumber","Color of editor active line number"),!1,p("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));N("editorLineNumber.activeForeground",{dark:tC,light:tC,hcDark:tC,hcLight:tC},p("editorActiveLineNumber","Color of editor active line number"));const Yne=N("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},p("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));N("editorRuler.foreground",{dark:"#5A5A5A",light:U.lightgrey,hcDark:U.white,hcLight:"#292929"},p("editorRuler","Color of the editor rulers."));N("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},p("editorCodeLensForeground","Foreground color of editor CodeLens"));N("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},p("editorBracketMatchBackground","Background color behind matching brackets"));N("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Qe,hcLight:Qe},p("editorBracketMatchBorder","Color for matching brackets boxes"));const Xne=N("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},p("editorOverviewRulerBorder","Color of the overview ruler border.")),Zne=N("editorOverviewRuler.background",null,p("editorOverviewRulerBackground","Background color of the editor overview ruler."));N("editorGutter.background",{dark:Rn,light:Rn,hcDark:Rn,hcLight:Rn},p("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));N("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:U.fromHex("#fff").transparent(.8),hcLight:Qe},p("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const Jne=N("editorUnnecessaryCode.opacity",{dark:U.fromHex("#000a"),light:U.fromHex("#0007"),hcDark:null,hcLight:null},p("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));N("editorGhostText.border",{dark:null,light:null,hcDark:U.fromHex("#fff").transparent(.8),hcLight:U.fromHex("#292929").transparent(.8)},p("editorGhostTextBorder","Border color of ghost text in the editor."));N("editorGhostText.foreground",{dark:U.fromHex("#ffffff56"),light:U.fromHex("#0007"),hcDark:null,hcLight:null},p("editorGhostTextForeground","Foreground color of the ghost text in the editor."));N("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},p("editorGhostTextBackground","Background color of the ghost text in the editor."));const nC=new U(new tt(0,122,204,.6)),c9=N("editorOverviewRuler.rangeHighlightForeground",{dark:nC,light:nC,hcDark:nC,hcLight:nC},p("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Qne=N("editorOverviewRuler.errorForeground",{dark:new U(new tt(255,18,18,.7)),light:new U(new tt(255,18,18,.7)),hcDark:new U(new tt(255,50,50,1)),hcLight:"#B5200D"},p("overviewRuleError","Overview ruler marker color for errors.")),eie=N("editorOverviewRuler.warningForeground",{dark:zs,light:zs,hcDark:C_,hcLight:C_},p("overviewRuleWarning","Overview ruler marker color for warnings.")),tie=N("editorOverviewRuler.infoForeground",{dark:Ks,light:Ks,hcDark:Ek,hcLight:Ek},p("overviewRuleInfo","Overview ruler marker color for infos.")),d9=N("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},p("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),u9=N("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},p("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),h9=N("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},p("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),g9=N("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),f9=N("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),p9=N("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),nie=N("editorBracketHighlight.unexpectedBracket.foreground",{dark:new U(new tt(255,18,18,.8)),light:new U(new tt(255,18,18,.8)),hcDark:new U(new tt(255,50,50,1)),hcLight:""},p("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),iie=N("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),sie=N("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),oie=N("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),rie=N("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),aie=N("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),lie=N("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),cie=N("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),die=N("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),uie=N("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),hie=N("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),gie=N("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),fie=N("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},p("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));N("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:"#CEA33D"},p("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));N("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:"#cea33d14"},p("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));or((o,e)=>{const t=o.getColor(Rn),n=o.getColor(a9),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});class tm extends Id{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new W(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(64);const t=e.get(65);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(90);const n=e.get(139);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=bi?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._context.viewModel.getLineCount(),r=[];for(let a=n;a<=i;a++){const l=a-n,c=this._getLineRenderLineNumber(a);if(!c){r[l]="";continue}let d="";if(a===s&&this._context.viewModel.getLineLength(a)===0){if(this._renderFinalNewline==="off"){r[l]="";continue}this._renderFinalNewline==="dimmed"&&(d=" dimmed-line-number")}a===this._activeLineNumber&&(d=" active-line-number"),r[l]=`<div class="${tm.CLASS_NAME}${t}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${c}</div>`}this._renderResult=r}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(tm,"LineNumbersOverlay");tm.CLASS_NAME="line-numbers";or((o,e)=>{const t=o.getColor(qne),n=o.getColor(Yne);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});class cd extends Ds{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(139);this._canUseLayerHinting=!t.get(30),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=dt(document.createElement("div")),this._domNode.setClassName(cd.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=dt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(cd.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(139);return this._canUseLayerHinting=!t.get(30),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}u(cd,"Margin");cd.CLASS_NAME="glyph-margin";cd.OUTER_CLASS_NAME="margin";const Hu="monaco-mouse-cursor-text";class m9{constructor(){this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}u(m9,"IMEImpl");const Vb=new m9;class b9{constructor(e,t,n,i,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new W(this.modelLineNumber,this.distanceToModelLineStart+1),n=new W(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}u(b9,"VisibleTextAreaData");const Sx=To;class _9 extends Ds{constructor(e,t,n){super(e),this._primaryCursorPosition=new W(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,s=i.get(139);this._setAccessibilityOptions(i),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=i.get(48),this._lineHeight=i.get(64),this._emptySelectionClipboard=i.get(35),this._copyWithSyntaxHighlighting=i.get(23),this._visibleTextArea=null,this._selections=[new ge(1,1,1,1)],this._modelSelections=[new ge(1,1,1,1)],this._lastRenderPosition=null,this.textArea=dt(document.createElement("textarea")),Ur.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Hu}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:r}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${r*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(119))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",p("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this._ensureReadOnlyAttribute(),this.textAreaCover=dt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const a={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:d=>this._context.viewModel.getLineMaxColumn(d),getValueInRange:(d,h)=>this._context.viewModel.getValueInRange(d,h),getValueLengthInRange:(d,h)=>this._context.viewModel.getValueLengthInRange(d,h),modifyPosition:(d,h)=>this._context.viewModel.modifyPosition(d,h)},l={getDataToCopy:()=>{const d=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,li),h=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),f=Array.isArray(d)?d:null,m=Array.isArray(d)?d.join(h):d;let b,_=null;if(Rk.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&m.length<65536){const C=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);C&&(b=C.html,_=C.mode)}return{isFromEmptySelection:g,multicursorText:f,text:m,html:b,mode:_}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(Ye&&d.isEmpty()){const g=d.getStartPosition();let f=this._getWordBeforePosition(g);if(f.length===0&&(f=this._getCharacterBeforePosition(g)),f.length>0)return new Gn(f,f.length,f.length,T.fromPositions(g),0)}const h=500;if(Ye&&!d.isEmpty()&&a.getValueLengthInRange(d,0)<h){const g=a.getValueInRange(d,0);return new Gn(g,0,g.length,d,0)}if(Gl&&!d.isEmpty()){const g="vscode-placeholder";return new Gn(g,0,g.length,null,void 0)}return Gn.EMPTY}if(mV){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition(),[g,f]=this._getAndroidWordAtPosition(h);if(g.length>0)return new Gn(g,f,f,T.fromPositions(h),0)}return Gn.EMPTY}return Lu.fromEditorSelection(a,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,h,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(d,h,g)},c=this._register(new Q7(this.textArea.domNode));this._textAreaInput=this._register(new J7(l,c,Us,sJ)),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let h=!1,g=null,f=null;d.metadata&&(h=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,g=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,f=d.metadata.mode),this._viewController.paste(d.text,h,g,f)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const h=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:f,widthOfHiddenTextBefore:m}=(()=>{const _=h.value.substring(0,Math.min(h.selectionStart,h.selectionEnd)),C=_.lastIndexOf(`
`),v=_.substring(C+1),y=v.lastIndexOf("	"),w=v.length-y-1,x=g.getStartPosition(),M=Math.min(x.column-1,w),L=x.column-1-M,E=v.substring(0,v.length-M),{tabSize:k}=this._context.viewModel.model.getOptions(),O=pie(E,this._fontInfo,k);return{distanceToModelLineStart:L,widthOfHiddenTextBefore:O}})(),{distanceToModelLineEnd:b}=(()=>{const _=h.value.substring(Math.max(h.selectionStart,h.selectionEnd)),C=_.indexOf(`
`),v=C===-1?_:_.substring(0,C),y=v.indexOf("	"),w=y===-1?v.length:v.length-y-1,x=g.getEndPosition(),M=Math.min(this._context.viewModel.model.getLineMaxColumn(x.lineNumber)-x.column,w);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(x.lineNumber)-x.column-M}})();this._context.viewModel.revealRange("keyboard",!0,T.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new b9(this._context,g.startLineNumber,f,m,b),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Hu} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Hu}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Vb.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=xo(t);let s=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&r<=1&&(s=!1),s){const d=n.charCodeAt(r-2);i.get(d)!==0?s=!1:r--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}c++}return[n.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=xo(this._context.configuration.options.get(125));let i=e.column,s=0;for(;i>1;){const r=t.charCodeAt(i-2);if(n.get(r)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!In(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?p("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",bi?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===qr.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(139).wrappingColumn;if(i!==-1&&this._accessibilitySupport!==1){const s=e.get(48);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=Sx?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(139);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(48),this._lineHeight=t.get(64),this._emptySelectionClipboard=t.get(35),this._copyWithSyntaxHighlighting=t.get(23),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:i}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${i*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(119))),(e.hasChanged(32)||e.hasChanged(87))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Vb.enabled||e.get(32)&&e.get(87)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new W(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(r&&a&&i&&s&&s.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,c=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let d=this._visibleTextArea.widthOfHiddenLineTextBefore,h=this._contentLeft+i.left-this._scrollLeft,g=s.left-i.left+1;if(h<this._contentLeft){const v=this._contentLeft-h;h+=v,d+=v,g-=v}g>this._contentWidth&&(g=this._contentWidth);const f=this._context.viewModel.getViewLineData(r.lineNumber),m=f.tokens.findTokenIndexAtOffset(r.column-1),b=f.tokens.findTokenIndexAtOffset(a.column-1),_=m===b,C=this._visibleTextArea.definePresentation(_?f.tokens.getPresentation(m):null);this.textArea.domNode.scrollTop=c*this._lineHeight,this.textArea.domNode.scrollLeft=d,this._doRender({lastRenderPosition:null,top:l,left:h,width:g,height:this._lineHeight,useCover:!1,color:(Yt.getColorMap()||[])[C.foreground],italic:C.italic,bold:C.bold,underline:C.underline,strikethrough:C.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(n<0||n>this._contentHeight){this._renderAtTopLeft();return}if(Ye){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:Sx?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:Sx?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;ai(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?U.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(55)?n.setClassName("monaco-editor-background textAreaCover "+cd.OUTER_CLASS_NAME):i.get(65).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+tm.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}u(_9,"TextAreaHandler");function pie(o,e,t){if(o.length===0)return 0;const n=document.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const i=document.createElement("span");ai(i,e),i.style.whiteSpace="pre",i.style.tabSize=`${t*e.spaceWidth}px`,i.append(o),n.appendChild(i),document.body.appendChild(n);const s=i.offsetWidth;return document.body.removeChild(n),s}u(pie,"measureText");function mie(o,e,t){let n=0;for(let s=0;s<o.length;s++)o.charAt(s)==="	"?n=Sn.nextIndentTabStop(n,e):n++;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let r=0;r<s;r++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}u(mie,"_normalizeIndentationFromWhitespace");function yw(o,e,t){let n=Pi(o);return n===-1&&(n=o.length),mie(o.substring(0,n),e,t)+o.substring(n)}u(yw,"normalizeIndentation");const bie=u(()=>!0,"autoCloseAlways"),_ie=u(()=>!1,"autoCloseNever"),vie=u(o=>o===" "||o==="	","autoCloseBeforeWhitespace");class iu{static shouldRecreate(e){return e.hasChanged(139)||e.hasChanged(125)||e.hasChanged(35)||e.hasChanged(74)||e.hasChanged(76)||e.hasChanged(77)||e.hasChanged(5)||e.hasChanged(9)||e.hasChanged(7)||e.hasChanged(8)||e.hasChanged(12)||e.hasChanged(123)||e.hasChanged(48)||e.hasChanged(87)}constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(139),a=s.get(48);this.readOnly=s.get(87),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(111),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(123),this.wordSeparators=s.get(125),this.emptySelectionClipboard=s.get(35),this.copyWithSyntaxHighlighting=s.get(23),this.multiCursorMergeOverlapping=s.get(74),this.multiCursorPaste=s.get(76),this.multiCursorLimit=s.get(77),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(9),this.autoClosingDelete=s.get(7),this.autoClosingOvertype=s.get(8),this.autoSurround=s.get(12),this.autoIndent=s.get(10),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const c of l)this.surroundingPairs[c.open]=c.close}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=q1(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return yw(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return vie;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return bie;case"never":return _ie}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return i=>n.indexOf(i)!==-1}visibleColumnFromColumn(e,t){return Sn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=Sn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(i<s)return s;const r=e.getLineMaxColumn(t);return i>r?r:i}}u(iu,"CursorConfiguration");let it=u(class v9{static fromModelState(e){return new C9(e)}static fromViewState(e){return new y9(e)}static fromModelSelection(e){const t=ge.liftSelection(e),n=new zn(T.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return v9.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},"CursorState");class C9{constructor(e){this.modelState=e,this.viewState=null}}u(C9,"PartialModelCursorState");class y9{constructor(e){this.modelState=null,this.viewState=e}}u(y9,"PartialViewCursorState");class zn{constructor(e,t,n,i,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=zn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new zn(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new W(t,n),i):new zn(new T(t,n,t,n),0,i,new W(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?ge.fromPositions(e.getStartPosition(),t):ge.fromPositions(e.getEndPosition(),t)}}u(zn,"SingleCursorState");class Oi{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}u(Oi,"EditOperationResult");function Sc(o){return o==="'"||o==='"'||o==="`"}u(Sc,"isQuote");class Dc{static columnSelect(e,t,n,i,s,r){const a=Math.abs(s-n)+1,l=n>s,c=i>r,d=i<r,h=[];for(let g=0;g<a;g++){const f=n+(l?-g:g),m=e.columnFromVisibleColumn(t,f,i),b=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new W(f,m)),C=e.visibleColumnFromColumn(t,new W(f,b));d&&(_>r||C<i)||c&&(C>i||_<r)||h.push(new zn(new T(f,m,f,m),0,0,new W(f,b),0))}if(h.length===0)for(let g=0;g<a;g++){const f=n+(l?-g:g),m=t.getLineMaxColumn(f);h.push(new zn(new T(f,m,f,m),0,0,new W(f,m),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,Dc.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new W(l,c));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}u(Dc,"ColumnSelection");class Qn{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ge.fromPositions(i.getEndPosition())}}u(Qn,"ReplaceCommand");class w9{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ge.fromRange(i,0)}}u(w9,"ReplaceCommandThatSelectsText");class ub{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ge.fromPositions(i.getStartPosition())}}u(ub,"ReplaceCommandWithoutChangingPosition");class Wb{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ge.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}u(Wb,"ReplaceCommandWithOffsetCursorState");class vS{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(vS,"ReplaceCommandThatPreservesSelection");class uy{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}u(uy,"CursorPosition");class ft{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-lV(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new W(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=Jf.atomicPosition(s,t.column-1,n,0);if(r!==-1&&r+1>=i)return new W(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?ft.leftPositionAtomicSoftTabs(t,n,e.tabSize):ft.leftPosition(t,n);return new uy(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),c=t.normalizePosition(ft.clipPositionColumn(l,t),0),d=ft.left(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static clipPositionColumn(e,t){return new W(e.lineNumber,ft.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+OI(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new W(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=Jf.atomicPosition(r,n-1,i,1);if(a!==-1)return new W(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?ft.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):ft.rightPosition(t,n.lineNumber,n.column);return new uy(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),c=t.normalizePosition(ft.clipPositionColumn(l,t),1),d=ft.right(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static vertical(e,t,n,i,s,r,a,l){const c=Sn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,d=t.getLineCount(),h=n===1&&i===1,g=n===d&&i===t.getLineMaxColumn(n),f=r<n?h:g;if(n=r,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,c),f?s=0:s=c-Sn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const m=new W(n,i),b=t.normalizePosition(m,l);s=s+(i-b.column),n=b.lineNumber,i=b.column}return new uy(n,i,s)}static down(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n+r,a,4)}static moveDown(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);const l=ft.down(e,t,r,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,s=ft.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=ft.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new zn(new T(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n-r,a,3)}static moveUp(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=ft.up(e,t,r,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,s=ft.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=ft.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new zn(new T(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let r=n.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const s=n.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;let l;return n.position.column===a?l=r:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(i,r,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return n.move(i,s,r,0)}}u(ft,"MoveOperations");class dd{static deleteRight(e,t,n,i){const s=[];let r=e!==3;for(let a=0,l=i.length;a<l;a++){const c=i[a];let d=c;if(d.isEmpty()){const h=c.getPosition(),g=ft.right(t,n,h);d=new T(g.lineNumber,g.column,h.lineNumber,h.column)}if(d.isEmpty()){s[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),s[a]=new Qn(d,"")}return[r,s]}static isAutoClosingPairDelete(e,t,n,i,s,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],h=d.getPosition();if(!d.isEmpty())return!1;const g=s.getLineContent(h.lineNumber);if(h.column<2||h.column>=g.length+1)return!1;const f=g.charAt(h.column-2),m=i.get(f);if(!m)return!1;if(Sc(f)){if(n==="never")return!1}else if(t==="never")return!1;const b=g.charAt(h.column-1);let _=!1;for(const C of m)C.open===f&&C.close===b&&(_=!0);if(!_)return!1;if(e==="auto"){let C=!1;for(let v=0,y=a.length;v<y;v++){const w=a[v];if(h.lineNumber===w.startLineNumber&&h.column===w.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].getPosition(),l=new T(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new Qn(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const r=[];let a=e!==2;for(let l=0,c=i.length;l<c;l++){const d=dd.getDeleteRange(i[l],n,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new Qn(d,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),r=Pi(s),a=r===-1?s.length+1:r+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),c=Sn.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,i.lineNumber,c);return new T(i.lineNumber,d,i.lineNumber,i.column)}}return T.fromPositions(dd.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=QZ(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new W(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let s=null;n.sort((r,a)=>W.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,h,g,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,g=c.lineNumber+1,f=1):c.lineNumber>1&&s?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,g=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const m=new T(d,h,g,f);s=m,m.isEmpty()?i[r]=null:i[r]=new Qn(m,"")}else i[r]=null;else i[r]=new Qn(l,"")}return new Oi(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}u(dd,"DeleteOperations");class ht{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const s=e.length;for(let r=i;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return r}return s}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const s=e.length;for(let r=n.column-1;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,r=n.column;r===1&&s>1&&(s=s-1,r=t.getLineMaxColumn(s));let a=ht._findPreviousWordOnLine(e,t,new W(s,r));if(i===0)return new W(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=ht._findPreviousWordOnLine(e,t,new W(s,a.start+1))),new W(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=ht._findPreviousWordOnLine(e,t,new W(s,a.start+1));return new W(s,a?a.start+1:1)}return a&&r<=a.end+1&&(a=ht._findPreviousWordOnLine(e,t,new W(s,a.start+1))),new W(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new W(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a===95&&l!==95)return new W(n,r);if(a===45&&l!==45)return new W(n,r);if((Ic(a)||$0(a))&&ua(l))return new W(n,r);if(ua(a)&&ua(l)&&r+1<i){const c=s.charCodeAt(r);if(Ic(c)||$0(c))return new W(n,r)}}return new W(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,r=1);let l=ht._findNextWordOnLine(e,t,new W(s,r));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=ht._findNextWordOnLine(e,t,new W(s,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(s);else if(i===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=ht._findNextWordOnLine(e,t,new W(s,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(s)}else l&&!a&&r>=l.start+1&&(l=ht._findNextWordOnLine(e,t,new W(s,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(s);return new W(s,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new W(n+1,1):t;const s=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a!==95&&l===95)return new W(n,r);if(a!==45&&l===45)return new W(n,r);if((Ic(a)||$0(a))&&ua(l))return new W(n,r);if(ua(a)&&ua(l)&&r+1<i){const c=s.charCodeAt(r);if(Ic(c)||$0(c))return new W(n,r)}}return new W(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=Or(n,i);return s+1<i?new T(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(dd.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new T(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new W(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let d=ht._findPreviousWordOnLine(n,i,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=ht._findPreviousWordOnLine(n,i,new W(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l))),new T(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new W(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new T(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new T(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new T(n.lineNumber,1,n.lineNumber+1,1):new T(n.lineNumber,1,n.lineNumber,1);const r=u(h=>h.start+1<=n.column&&n.column<=h.end+1,"touchesWord"),a=u((h,g)=>(h=Math.min(h,n.column),g=Math.max(g,n.column),new T(n.lineNumber,h,n.lineNumber,g)),"createRangeWithPosition"),l=u(h=>{let g=h.start+1,f=h.end+1,m=!1;for(;f-1<s&&this._charAtIsWhitespace(i,f-1);)m=!0,f++;if(!m)for(;g>1&&this._charAtIsWhitespace(i,g-2);)g--;return a(g,f)},"deleteWordAndAdjacentWhitespace"),c=ht._findPreviousWordOnLine(e,t,n);if(c&&r(c))return l(c);const d=ht._findNextWordOnLine(e,t,n);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=ht._moveWordPartLeft(e,n);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new T(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new W(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const d=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===d&&c===h)return null;if(r){const f=this._deleteWordRightWhitespace(i,a);if(f)return f}let g=ht._findNextWordOnLine(n,i,a);return t===2?g?c=g.end+1:c<h||l===d?c=h:(l++,g=ht._findNextWordOnLine(n,i,new W(l,1)),g?c=g.start+1:c=i.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=ht._findNextWordOnLine(n,i,new W(l,g.end+1))),g?c=g.start+1:c<h||l===d?c=h:(l++,g=ht._findNextWordOnLine(n,i,new W(l,1)),g?c=g.start+1:c=i.getLineMaxColumn(l))),new T(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=ht._moveWordPartRight(e,n);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new T(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=xo(t),s=ht._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return ht._createWordAtPosition(e,n.lineNumber,s);const r=ht._findNextWordOnLine(i,e,n);return r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end?ht._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,s){const r=xo(e.wordSeparators),a=ht._findPreviousWordOnLine(r,t,s),l=ht._findNextWordOnLine(r,t,s);if(!i){let f,m;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,m=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,m=l.end+1):(a?f=a.end+1:f=1,l?m=l.start+1:m=t.getLineMaxColumn(s.lineNumber)),new zn(new T(s.lineNumber,f,s.lineNumber,m),1,0,new W(s.lineNumber,m),0)}let c,d;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,d=l.end+1):(c=s.column,d=s.column);const h=s.lineNumber;let g;if(n.selectionStart.containsPosition(s))g=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){g=c;const f=new W(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.endColumn)}else{g=d;const f=new W(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.startColumn)}return n.move(!0,h,g,0)}}u(ht,"WordOperations");class Gv extends ht{static deleteWordPartLeft(e){const t=iC([ht.deleteWordLeft(e,0),ht.deleteWordLeft(e,2),ht._deleteWordPartLeft(e.model,e.selection)]);return t.sort(T.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=iC([ht.deleteWordRight(e,0),ht.deleteWordRight(e,2),ht._deleteWordPartRight(e.model,e.selection)]);return t.sort(T.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=iC([ht.moveWordLeft(e,t,n,0),ht.moveWordLeft(e,t,n,2),ht._moveWordPartLeft(t,n)]);return i.sort(W.compare),i[2]}static moveWordPartRight(e,t,n){const i=iC([ht.moveWordRight(e,t,n,0),ht.moveWordRight(e,t,n,2),ht._moveWordPartRight(t,n)]);return i.sort(W.compare),i[0]}}u(Gv,"WordPartOperations");function iC(o){return o.filter(e=>!!e)}u(iC,"enforceDefined");class Vn{static addCursorDown(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new it(l.modelState,l.viewState),n?i[s++]=it.fromModelState(ft.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=it.fromViewState(ft.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new it(l.modelState,l.viewState),n?i[s++]=it.fromModelState(ft.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=it.fromViewState(ft.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,r=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return it.fromViewState(ft.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return it.fromModelState(ft.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),a=s.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-s.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return it.fromViewState(ft.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return it.fromModelState(ft.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[i]=it.fromModelState(new zn(new T(a,1,a,1),0,0,new W(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=it.fromModelState(ft.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=it.fromModelState(ft.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return it.fromModelState(new zn(new T(1,1,1,1),0,0,new W(n,i),0))}static line(e,t,n,i,s){const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new W(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n){const c=e.model.getLineCount();let d=r.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),it.fromModelState(new zn(new T(r.lineNumber,1,d,h),2,0,new W(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return it.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),it.fromViewState(t.viewState.move(!0,d,h,0))}else{const c=t.modelState.selectionStart.getEndPosition();return it.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return it.fromModelState(ht.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new it(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return it.fromViewState(new zn(new T(n,i,n,i),0,0,new W(n,i),0))}static moveTo(e,t,n,i,s){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,i);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,i,s)}const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new W(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return it.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,r){switch(n){case 0:return r===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return r===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return r===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return r===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return r===2?t.map(a=>it.fromViewState(ft.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>it.fromModelState(ft.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return r===2?t.map(a=>it.fromViewState(ft.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>it.fromModelState(ft.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,r,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new it(t.modelState,t.viewState);{let r;s>n.endLineNumber-1?r=n.endLineNumber-1:s<n.startLineNumber?r=n.startLineNumber:r=s;const a=ft.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return it.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>it.fromViewState(ft.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=it.fromViewState(ft.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveRight(e,t,n,i){return t.map(s=>it.fromViewState(ft.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);i[s]=it.fromViewState(ft.moveRight(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveDownByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=it.fromViewState(ft.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=it.fromModelState(ft.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=it.fromViewState(ft.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=it.fromModelState(ft.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return it.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return it.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,c)}return i}}u(Vn,"CursorMoveCommands");var ww;(function(o){const e=u(function(n){if(!as(n))return!1;const i=n;return!(!Ki(i.to)||!ws(i.select)&&!QH(i.select)||!ws(i.by)&&!Ki(i.by)||!ws(i.value)&&!sd(i.value))},"isCursorMoveArgs");o.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},o.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case o.RawDirection.Left:i=0;break;case o.RawDirection.Right:i=1;break;case o.RawDirection.Up:i=2;break;case o.RawDirection.Down:i=3;break;case o.RawDirection.PrevBlankLine:i=4;break;case o.RawDirection.NextBlankLine:i=5;break;case o.RawDirection.WrappedLineStart:i=6;break;case o.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case o.RawDirection.WrappedLineColumnCenter:i=8;break;case o.RawDirection.WrappedLineEnd:i=9;break;case o.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case o.RawDirection.ViewPortTop:i=11;break;case o.RawDirection.ViewPortBottom:i=13;break;case o.RawDirection.ViewPortCenter:i=12;break;case o.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Character:s=3;break;case o.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}u(t,"parse"),o.parse=t})(ww||(ww={}));function Cf(o,e,t,n){const i=ff(e,t.startLineNumber,t.startColumn),s=n.getLanguageConfiguration(i.languageId);if(!s)return null;const r=i.getLineContent(),a=r.substr(0,t.startColumn-1-i.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-i.firstCharOffset):l=ff(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-i.firstCharOffset);let c="";if(t.startLineNumber>1&&i.firstCharOffset===0){const b=ff(e,t.startLineNumber-1);b.languageId===i.languageId&&(c=b.getLineContent())}const d=s.onEnter(o,c,a,l);if(!d)return null;const h=d.indentAction;let g=d.appendText;const f=d.removeText||0;g?h===vn.Indent&&(g="	"+g):h===vn.Indent||h===vn.IndentOutdent?g="	":g="";let m=KV(e,t.startLineNumber,t.startColumn);return f&&(m=m.substring(0,m.length-f)),{indentAction:h,appendText:g,removeText:f,indentation:m}}u(Cf,"getEnterAction");var Cie=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yie=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Tx=Object.create(null);function jd(o,e){if(e<=0)return"";Tx[o]||(Tx[o]=["",o]);const t=Tx[o];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+o;return t[e]}u(jd,"cachedStringRepeat");let po=u(class Fk{static unshiftIndent(e,t,n,i,s){const r=Sn.visibleColumnFromColumn(e,t,n);if(s){const a=jd(" ",i),c=Sn.prevIndentTabStop(r,i)/i;return jd(a,c)}else{const a="	",c=Sn.prevRenderTabStop(r,n)/n;return jd(a,c)}}static shiftIndent(e,t,n,i,s){const r=Sn.visibleColumnFromColumn(e,t,n);if(s){const a=jd(" ",i),c=Sn.nextIndentTabStop(r,i)/i;return jd(a,c)}else{const a="	",c=Sn.nextRenderTabStop(r,n)/n;return jd(a,c)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:r,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let h=n;h<=i;h++,c=d){d=0;const g=e.getLineContent(h);let f=Pi(g);if(this._opts.isUnshift&&(g.length===0||f===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(f===-1&&(f=g.length),h>1&&Sn.visibleColumnFromColumn(g,f+1,s)%r!==0&&e.tokenization.isCheapToTokenize(h-1)){const _=Cf(this._opts.autoIndent,e,new T(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(_){if(d=c,_.appendText)for(let C=0,v=_.appendText.length;C<v&&d<r&&_.appendText.charCodeAt(C)===32;C++)d++;_.removeText&&(d=Math.max(0,d-_.removeText));for(let C=0;C<d&&!(f===0||g.charCodeAt(f-1)!==32);C++)f--}}if(this._opts.isUnshift&&f===0)continue;let m;this._opts.isUnshift?m=Fk.unshiftIndent(g,f+1,s,r,a):m=Fk.shiftIndent(g,f+1,s,r,a),this._addEditOperation(t,new T(h,1,h,f+1),m),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?jd(" ",r):"	";for(let d=n;d<=i;d++){const h=e.getLineContent(d);let g=Pi(h);if(!(this._opts.isUnshift&&(h.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(g===-1&&(g=h.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let f=0;f<g;f++)if(h.charCodeAt(f)===9){g=f+1;break}this._addEditOperation(t,new T(d,1,d,g+1),"")}else this._addEditOperation(t,new T(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new ge(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new ge(n.startLineNumber,i,n.endLineNumber,n.endColumn):new ge(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}},"ShiftCommand");po=Cie([yie(2,zt)],po);class S9{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new T(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new T(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new ge(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}u(S9,"SurroundSelectionCommand");class T9{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new T(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new ge(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}}u(T9,"CompositionSurroundSelectionCommand");function wie(o,e,t){const n=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,s=-1;for(i=e-1;i>=1;i--){if(o.tokenization.getLanguageIdAtPosition(i,0)!==n)return s;const r=o.getLineContent(i);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){s=i;continue}return i}}return-1}u(wie,"getPrecedingValidLine");function CS(o,e,t,n=!0,i){if(o<4)return null;const s=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const r=wie(e,t,s);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:xt(a),action:vn.Indent,line:r};if(s.shouldDecrease(a))return{indentation:xt(a),action:null,line:r};{if(r===1)return{indentation:xt(e.getLineContent(r)),action:null,line:r};const l=r-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let h=l-1;h>0;h--)if(!s.shouldIndentNextLine(e.getLineContent(h))){d=h;break}return{indentation:xt(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:xt(e.getLineContent(r)),action:null,line:r};for(let d=r;d>0;d--){const h=e.getLineContent(d);if(s.shouldIncrease(h))return{indentation:xt(h),action:vn.Indent,line:d};if(s.shouldIndentNextLine(h)){let g=0;for(let f=d-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(d))){g=f;break}return{indentation:xt(e.getLineContent(g+1)),action:null,line:g+1}}else if(s.shouldDecrease(h))return{indentation:xt(h),action:null,line:d}}return{indentation:xt(e.getLineContent(1)),action:null,line:1}}}u(CS,"getInheritIndentForLine");function Bb(o,e,t,n,i,s){if(o<4)return null;const r=s.getLanguageConfiguration(t);if(!r)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=CS(o,e,n,void 0,s),c=e.getLineContent(n);if(l){const d=l.line;if(d!==void 0){let h=!0;for(let g=d;g<n-1;g++)if(!/^\s*$/.test(e.getLineContent(g))){h=!1;break}if(h){const g=r.onEnter(o,"",e.getLineContent(d),"");if(g){let f=xt(e.getLineContent(d));return g.removeText&&(f=f.substring(0,f.length-g.removeText)),g.indentAction===vn.Indent||g.indentAction===vn.IndentOutdent?f=i.shiftIndent(f):g.indentAction===vn.Outdent&&(f=i.unshiftIndent(f)),a.shouldDecrease(c)&&(f=i.unshiftIndent(f)),g.appendText&&(f+=g.appendText),xt(f)}}}return a.shouldDecrease(c)?l.action===vn.Indent?l.indentation:i.unshiftIndent(l.indentation):l.action===vn.Indent?i.shiftIndent(l.indentation):l.indentation}return null}u(Bb,"getGoodIndentForLine");function Sie(o,e,t,n,i){if(o<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),r=q1(s,t.startColumn-1),a=r.getLineContent();let l=!1,c;r.firstCharOffset>0&&s.getLanguageId(0)!==r.languageId?(l=!0,c=a.substr(0,t.startColumn-1-r.firstCharOffset)):c=s.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-r.firstCharOffset):d=ff(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const h=i.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!h)return null;const g=c,f=xt(c),m={tokenization:{getLineTokens:v=>e.tokenization.getLineTokens(v),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(v,y)=>e.getLanguageIdAtPosition(v,y)},getLineContent:v=>v===t.startLineNumber?g:e.getLineContent(v)},b=xt(s.getLineContent()),_=CS(o,m,t.startLineNumber+1,void 0,i);if(!_){const v=l?b:f;return{beforeEnter:v,afterEnter:v}}let C=l?b:_.indentation;return _.action===vn.Indent&&(C=n.shiftIndent(C)),h.shouldDecrease(d)&&(C=n.unshiftIndent(C)),{beforeEnter:l?b:f,afterEnter:C}}u(Sie,"getIndentForEnter");function Tie(o,e,t,n,i,s){if(o<4)return null;const r=ff(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=s.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),c=l.substr(0,t.startColumn-1-r.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-r.firstCharOffset):d=ff(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){const h=CS(o,e,t.startLineNumber,!1,s);if(!h)return null;let g=h.indentation;return h.action!==vn.Indent&&(g=i.unshiftIndent(g)),g}return null}u(Tie,"getIndentActionForType");function x9(o,e,t){const n=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!n||e<1||e>o.getLineCount()?null:n.getIndentMetadata(o.getLineContent(e))}u(x9,"getIndentMetadata");class Bt{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new po(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new po(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,po.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,po.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const s=[];for(let r=0,a=n.length;r<a;r++)s[r]=new Qn(n[r],i[r]);return new Oi(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){const h=new T(d.lineNumber,1,d.lineNumber,1);r[a]=new vS(h,i,c,!0)}else r[a]=new Qn(c,i)}return new Oi(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const r=Va(n);if(r.length===t.length)return r}return null}static paste(e,t,n,i,s,r){const a=this._distributePasteToCursors(e,n,i,s,r);return a?(n=n.sort(T.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const r=CS(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)i=r.action,s=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Or(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Cf(e.autoIndent,t,new T(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return i&&(i===vn.Indent&&(s=Bt.shiftIndent(e,s)),i===vn.Outdent&&(s=Bt.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)s+=" "}else s="	";return new Qn(n,s,i)}static tab(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){i[s]=new Qn(new T(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new po(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,s,r,a,l){const c=i.map(d=>this._compositionType(n,d,s,r,a,l));return new Oi(4,c,{shouldPushStackElementBefore:sC(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),d=new T(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&r===0?null:new Wb(d,n,0,r)}static _typeCommand(e,t,n){return n?new ub(e,t,!0):new Qn(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Bt._typeCommand(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),c=xt(l).substring(0,i.startColumn-1);return Bt._typeCommand(i,`
`+e.normalizeIndentation(c),n)}const s=Cf(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===vn.None)return Bt._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===vn.Indent)return Bt._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===vn.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),d=`
`+c+`
`+l;return n?new ub(i,d,!0):new Wb(i,d,-1,c.length-l.length,!0)}else if(s.indentAction===vn.Outdent){const l=Bt.unshiftIndent(e,s.indentation);return Bt._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const r=t.getLineContent(i.startLineNumber),a=xt(r).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=Sie(e.autoIndent,t,i,{unshiftIndent:c=>Bt.unshiftIndent(e,c),shiftIndent:c=>Bt.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,i.getEndPosition());const d=i.endColumn,h=t.getLineContent(i.endLineNumber),g=Pi(h);if(g>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,g+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new ub(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Wb(i,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Bt._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=KV(t,n.startLineNumber,n.startColumn),r=Tie(e.autoIndent,t,n,i,{shiftIndent:a=>Bt.shiftIndent(e,a),unshiftIndent:a=>Bt.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Bt._typeCommand(new T(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):Bt._typeCommand(new T(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==s)return!1;const g=Sc(s);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&g)return!1;if(e.autoClosingOvertype==="auto"){let m=!1;for(let b=0,_=i.length;b<_;b++){const C=i[b];if(c.lineNumber===C.startLineNumber&&c.column===C.startColumn){m=!0;break}}if(!m)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const d=i[a].getPosition(),h=new T(d.lineNumber,d.column,d.lineNumber,d.column+1);r[a]=new Qn(h,s)}return new Oi(4,r,{shouldPushStackElementBefore:sC(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let r=null;for(const a of s)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new T(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+i!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _getAutoClosingPairClose(e,t,n,i,s){const r=Sc(i),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const m of n)if(!m.isEmpty())return null;const c=n.map(m=>{const b=m.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-i.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(m=>new W(m.lineNumber,m.beforeColumn)),i);if(!d)return null;const h=this._findContainedAutoClosingPair(e,d),g=h?h.close:"";let f=!0;for(const m of c){const{lineNumber:b,beforeColumn:_,afterColumn:C}=m,v=t.getLineContent(b),y=v.substring(0,_-1),w=v.substring(C-1);if(w.startsWith(g)||(f=!1),w.length>0){const E=w.charAt(0);if(!Bt._isBeforeClosingBrace(e,w)&&!l(E))return null}if(d.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const E=xo(e.wordSeparators);if(y.length>0){const k=y.charCodeAt(y.length-1);if(E.get(k)===0)return null}}if(!t.tokenization.isCheapToTokenize(b))return null;t.tokenization.forceTokenization(b);const x=t.tokenization.getLineTokens(b),M=q1(x,_-1);if(!d.shouldAutoClose(M,_-M.firstCharOffset))return null;const L=d.findNeutralCharacter();if(L){const E=t.tokenization.getTokenTypeIfInsertingCharacter(b,_,L);if(!d.isOK(E))return null}}return f?d.close.substring(0,d.close.length-g.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,s,r,a){const l=[];for(let c=0,d=i.length;c<d;c++){const h=i[c];l[c]=new LN(h,s,!r,a)}return new Oi(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Sc(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Bt._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=Sc(i);for(const r of n){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,h=l===r.endLineNumber?r.endColumn-1:c.length,g=c.substring(d,h);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(Sc(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=t.surroundingPairs[s];r[a]=new S9(c,s,d)}return new Oi(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;const r=i.getPosition();n.tokenization.forceTokenization(r.lineNumber);const a=n.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(s,a,r.column)}catch(c){return He(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const h=n.getLineContent(d.startLineNumber),g=xt(h),f=t.normalizeIndentation(g),m=n.getLineContent(r.lineNumber),b=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=m.substring(b-1,r.column-1),C=f+_+s,v=new T(r.lineNumber,1,r.lineNumber,r.column),y=new Qn(v,C);return new Oi(xx(C,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,r){if(!i)return null;let a=null;for(const h of i)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of i)if(h.deletedText.length!==0){c=!0;break}if(c){if(!Bt._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=Sc(l);for(const m of i)if(m.deletedSelectionStart!==0||m.deletedSelectionEnd!==m.deletedText.length||/^[ \t]+$/.test(m.deletedText)||h&&Sc(m.deletedText))return null;const g=[];for(const m of s){if(!m.isEmpty())return null;g.push(m.getPosition())}if(g.length!==i.length)return null;const f=[];for(let m=0,b=g.length;m<b;m++)f.push(new T9(g[m],i[m].deletedText,t.surroundingPairs[l]));return new Oi(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,r,l)){const h=s.map(g=>new Qn(new T(g.positionLineNumber,g.positionColumn,g.positionLineNumber,g.positionColumn+1),"",!1));return new Oi(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,n,s,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,n,s,l,!0,d):null}static typeWithInterceptors(e,t,n,i,s,r,a){if(!e&&a===`
`){const d=[];for(let h=0,g=s.length;h<g;h++)d[h]=Bt._enter(n,i,!1,s[h]);return new Oi(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){const d=[];let h=!1;for(let g=0,f=s.length;g<f;g++)if(d[g]=this._runAutoIndentType(n,i,s[g],a),!d[g]){h=!0;break}if(!h)return new Oi(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,s,r,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const d=this._getAutoClosingPairClose(n,i,s,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,i,s,a,!1,d)}if(!e&&this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const d=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(d)return d}const l=[];for(let d=0,h=s.length;d<h;d++)l[d]=new Qn(s[d],a);const c=xx(a,t);return new Oi(c,l,{shouldPushStackElementBefore:sC(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){const r=[];for(let l=0,c=i.length;l<c;l++)r[l]=new Qn(i[l],s);const a=xx(s,e);return new Oi(a,r,{shouldPushStackElementBefore:sC(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new ub(new T(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new T(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].positionLineNumber,l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new T(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}u(Bt,"TypeOperations");class LN extends Wb{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new T(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new T(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}u(LN,"TypeWithAutoClosingCommand");class L9{constructor(e,t,n,i,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}u(L9,"CompositionOutcome");function xx(o,e){return o===" "?e===5||e===6?6:5:4}u(xx,"getTypingOperation");function sC(o,e){return OF(o)&&!OF(e)?!0:o===5?!1:FF(o)!==FF(e)}u(sC,"shouldPushStackElementBetween");function FF(o){return o===6||o===5?"space":o}u(FF,"normalizeOperationType");function OF(o){return o===4||o===5||o===6}u(OF,"isTypingOperation");var D;(function(o){o.editorSimpleInput=new ue("editorSimpleInput",!1,!0),o.editorTextFocus=new ue("editorTextFocus",!1,p("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),o.focus=new ue("editorFocus",!1,p("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),o.textInputFocus=new ue("textInputFocus",!1,p("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),o.readOnly=new ue("editorReadonly",!1,p("editorReadonly","Whether the editor is read only")),o.inDiffEditor=new ue("inDiffEditor",!1,p("inDiffEditor","Whether the context is a diff editor")),o.columnSelection=new ue("editorColumnSelection",!1,p("editorColumnSelection","Whether `editor.columnSelection` is enabled")),o.writable=o.readOnly.toNegated(),o.hasNonEmptySelection=new ue("editorHasSelection",!1,p("editorHasSelection","Whether the editor has text selected")),o.hasOnlyEmptySelection=o.hasNonEmptySelection.toNegated(),o.hasMultipleSelections=new ue("editorHasMultipleSelections",!1,p("editorHasMultipleSelections","Whether the editor has multiple selections")),o.hasSingleSelection=o.hasMultipleSelections.toNegated(),o.tabMovesFocus=new ue("editorTabMovesFocus",!1,p("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),o.tabDoesNotMoveFocus=o.tabMovesFocus.toNegated(),o.isInWalkThroughSnippet=new ue("isInEmbeddedEditor",!1,!0),o.canUndo=new ue("canUndo",!1,!0),o.canRedo=new ue("canRedo",!1,!0),o.hoverVisible=new ue("editorHoverVisible",!1,p("editorHoverVisible","Whether the editor hover is visible")),o.hoverFocused=new ue("editorHoverFocused",!1,p("editorHoverFocused","Whether the editor hover is focused")),o.stickyScrollFocused=new ue("stickyScrollFocused",!1,p("stickyScrollFocused","Whether the sticky scroll is focused")),o.stickyScrollVisible=new ue("stickyScrollVisible",!1,p("stickyScrollVisible","Whether the sticky scroll is visible")),o.inCompositeEditor=new ue("inCompositeEditor",void 0,p("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),o.notInCompositeEditor=o.inCompositeEditor.toNegated(),o.languageId=new ue("editorLangId","",p("editorLangId","The language identifier of the editor")),o.hasCompletionItemProvider=new ue("editorHasCompletionItemProvider",!1,p("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),o.hasCodeActionsProvider=new ue("editorHasCodeActionsProvider",!1,p("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),o.hasCodeLensProvider=new ue("editorHasCodeLensProvider",!1,p("editorHasCodeLensProvider","Whether the editor has a code lens provider")),o.hasDefinitionProvider=new ue("editorHasDefinitionProvider",!1,p("editorHasDefinitionProvider","Whether the editor has a definition provider")),o.hasDeclarationProvider=new ue("editorHasDeclarationProvider",!1,p("editorHasDeclarationProvider","Whether the editor has a declaration provider")),o.hasImplementationProvider=new ue("editorHasImplementationProvider",!1,p("editorHasImplementationProvider","Whether the editor has an implementation provider")),o.hasTypeDefinitionProvider=new ue("editorHasTypeDefinitionProvider",!1,p("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),o.hasHoverProvider=new ue("editorHasHoverProvider",!1,p("editorHasHoverProvider","Whether the editor has a hover provider")),o.hasDocumentHighlightProvider=new ue("editorHasDocumentHighlightProvider",!1,p("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),o.hasDocumentSymbolProvider=new ue("editorHasDocumentSymbolProvider",!1,p("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),o.hasReferenceProvider=new ue("editorHasReferenceProvider",!1,p("editorHasReferenceProvider","Whether the editor has a reference provider")),o.hasRenameProvider=new ue("editorHasRenameProvider",!1,p("editorHasRenameProvider","Whether the editor has a rename provider")),o.hasSignatureHelpProvider=new ue("editorHasSignatureHelpProvider",!1,p("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),o.hasInlayHintsProvider=new ue("editorHasInlayHintsProvider",!1,p("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),o.hasDocumentFormattingProvider=new ue("editorHasDocumentFormattingProvider",!1,p("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),o.hasDocumentSelectionFormattingProvider=new ue("editorHasDocumentSelectionFormattingProvider",!1,p("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),o.hasMultipleDocumentFormattingProvider=new ue("editorHasMultipleDocumentFormattingProvider",!1,p("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),o.hasMultipleDocumentSelectionFormattingProvider=new ue("editorHasMultipleDocumentSelectionFormattingProvider",!1,p("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(D||(D={}));const ut=0;class $t extends jn{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}u($t,"CoreEditorCommand");var ui;(function(o){const e=u(function(n){if(!as(n))return!1;const i=n;return!(!Ki(i.to)||!ws(i.by)&&!Ki(i.by)||!ws(i.value)&&!sd(i.value)||!ws(i.revealCursor)&&!QH(i.revealCursor))},"isEditorScrollArgs");o.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},o.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let i;switch(n.to){case o.RawDirection.Up:i=1;break;case o.RawDirection.Right:i=2;break;case o.RawDirection.Down:i=3;break;case o.RawDirection.Left:i=4;break;default:return null}let s;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Page:s=3;break;case o.RawUnit.HalfPage:s=4;break;case o.RawUnit.Editor:s=5;break;case o.RawUnit.Column:s=6;break;default:s=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:r,revealCursor:a,select:!!n.select}}u(t,"parse"),o.parse=t})(ui||(ui={}));var tf;(function(o){const e=u(function(t){if(!as(t))return!1;const n=t;return!(!sd(n.lineNumber)&&!Ki(n.lineNumber)||!ws(n.at)&&!Ki(n.at))},"isRevealLineArgs");o.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},o.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(tf||(tf={}));class Sw{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(gt).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(gt).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}u(Sw,"EditorOrNativeTextInputCommand");var Wn;(function(o){class e extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){if(!y.position)return;v.model.pushStackElement(),v.setCursorStates(y.source,3,[Vn.moveTo(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&y.revealType!==2&&v.revealPrimaryCursor(y.source,!0,!0)}}u(e,"BaseMoveToCommand"),o.MoveTo=oe(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),o.MoveToSelect=oe(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends $t{runCoreEditorCommand(v,y){v.model.pushStackElement();const w=this._getColumnSelectResult(v,v.getPrimaryCursorState(),v.getCursorColumnSelectData(),y);w!==null&&(v.setCursorStates(y.source,3,w.viewStates.map(x=>it.fromViewState(x))),v.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:w.fromLineNumber,fromViewVisualColumn:w.fromVisualColumn,toViewLineNumber:w.toLineNumber,toViewVisualColumn:w.toVisualColumn}),w.reversed?v.revealTopMostCursor(y.source):v.revealBottomMostCursor(y.source))}}u(t,"ColumnSelectCommand"),o.ColumnSelect=oe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(C,v,y,w){if(typeof w.position>"u"||typeof w.viewPosition>"u"||typeof w.mouseColumn>"u")return null;const x=C.model.validatePosition(w.position),M=C.coordinatesConverter.validateViewPosition(new W(w.viewPosition.lineNumber,w.viewPosition.column),x),L=w.doColumnSelect?y.fromViewLineNumber:M.lineNumber,E=w.doColumnSelect?y.fromViewVisualColumn:w.mouseColumn-1;return Dc.columnSelect(C.cursorConfig,C,L,E,M.lineNumber,w.mouseColumn-1)}}),o.CursorColumnSelectLeft=oe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(C,v,y,w){return Dc.columnSelectLeft(C.cursorConfig,C,y)}}),o.CursorColumnSelectRight=oe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(C,v,y,w){return Dc.columnSelectRight(C.cursorConfig,C,y)}});class n extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,y,w,x){return Dc.columnSelectUp(v.cursorConfig,v,w,this._isPaged)}}u(n,"ColumnSelectUpCommand"),o.CursorColumnSelectUp=oe(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3600,linux:{primary:0}}})),o.CursorColumnSelectPageUp=oe(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,y,w,x){return Dc.columnSelectDown(v.cursorConfig,v,w,this._isPaged)}}u(i,"ColumnSelectDownCommand"),o.CursorColumnSelectDown=oe(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3602,linux:{primary:0}}})),o.CursorColumnSelectPageDown=oe(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends $t{constructor(){super({id:"cursorMove",precondition:void 0,description:ww.description})}runCoreEditorCommand(v,y){const w=ww.parse(y);w&&this._runCursorMove(v,y.source,w)}_runCursorMove(v,y,w){v.model.pushStackElement(),v.setCursorStates(y,3,s._move(v,v.getCursorStates(),w)),v.revealPrimaryCursor(y,!0)}static _move(v,y,w){const x=w.select,M=w.value;switch(w.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Vn.simpleMove(v,y,w.direction,x,M,w.unit);case 11:case 13:case 12:case 14:return Vn.viewportMove(v,y,w.direction,x,M);default:return null}}}u(s,"CursorMoveImpl"),o.CursorMoveImpl=s,o.CursorMove=oe(new s);class r extends $t{constructor(v){super(v),this._staticArgs=v.args}runCoreEditorCommand(v,y){let w=this._staticArgs;this._staticArgs.value===-1&&(w={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||v.cursorConfig.pageSize}),v.model.pushStackElement(),v.setCursorStates(y.source,3,Vn.simpleMove(v,v.getCursorStates(),w.direction,w.select,w.value,w.unit)),v.revealPrimaryCursor(y.source,!0)}}u(r,"CursorMoveBasedCommand"),o.CursorLeft=oe(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),o.CursorLeftSelect=oe(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1039}})),o.CursorRight=oe(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),o.CursorRightSelect=oe(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1041}})),o.CursorUp=oe(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),o.CursorUpSelect=oe(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),o.CursorPageUp=oe(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:11}})),o.CursorPageUpSelect=oe(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1035}})),o.CursorDown=oe(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),o.CursorDownSelect=oe(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),o.CursorPageDown=oe(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:12}})),o.CursorPageDownSelect=oe(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1036}})),o.CreateCursor=oe(new class extends $t{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(C,v){if(!v.position)return;let y;v.wholeLine?y=Vn.line(C,C.getPrimaryCursorState(),!1,v.position,v.viewPosition):y=Vn.moveTo(C,C.getPrimaryCursorState(),!1,v.position,v.viewPosition);const w=C.getCursorStates();if(w.length>1){const x=y.modelState?y.modelState.position:null,M=y.viewState?y.viewState.position:null;for(let L=0,E=w.length;L<E;L++){const k=w[L];if(!(x&&!k.modelState.selection.containsPosition(x))&&!(M&&!k.viewState.selection.containsPosition(M))){w.splice(L,1),C.model.pushStackElement(),C.setCursorStates(v.source,3,w);return}}}w.push(y),C.model.pushStackElement(),C.setCursorStates(v.source,3,w)}}),o.LastCursorMoveToSelect=oe(new class extends $t{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(C,v){if(!v.position)return;const y=C.getLastAddedCursorIndex(),w=C.getCursorStates(),x=w.slice(0);x[y]=Vn.moveTo(C,w[y],!0,v.position,v.viewPosition),C.model.pushStackElement(),C.setCursorStates(v.source,3,x)}});class a extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,Vn.moveToBeginningOfLine(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(y.source,!0)}}u(a,"HomeCommand"),o.CursorHome=oe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),o.CursorHomeSelect=oe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,this._exec(v.getCursorStates())),v.revealPrimaryCursor(y.source,!0)}_exec(v){const y=[];for(let w=0,x=v.length;w<x;w++){const M=v[w],L=M.modelState.position.lineNumber;y[w]=it.fromModelState(M.modelState.move(this._inSelectionMode,L,1,0))}return y}}u(l,"LineStartCommand"),o.CursorLineStart=oe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:0,mac:{primary:287}}})),o.CursorLineStartSelect=oe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,Vn.moveToEndOfLine(v,v.getCursorStates(),this._inSelectionMode,y.sticky||!1)),v.revealPrimaryCursor(y.source,!0)}}u(c,"EndCommand"),o.CursorEnd=oe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ut,kbExpr:D.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),o.CursorEndSelect=oe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ut,kbExpr:D.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,this._exec(v,v.getCursorStates())),v.revealPrimaryCursor(y.source,!0)}_exec(v,y){const w=[];for(let x=0,M=y.length;x<M;x++){const L=y[x],E=L.modelState.position.lineNumber,k=v.model.getLineMaxColumn(E);w[x]=it.fromModelState(L.modelState.move(this._inSelectionMode,E,k,0))}return w}}u(d,"LineEndCommand"),o.CursorLineEnd=oe(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:0,mac:{primary:291}}})),o.CursorLineEndSelect=oe(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,Vn.moveToBeginningOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(y.source,!0)}}u(h,"TopCommand"),o.CursorTop=oe(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2062,mac:{primary:2064}}})),o.CursorTopSelect=oe(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,Vn.moveToEndOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealPrimaryCursor(y.source,!0)}}u(g,"BottomCommand"),o.CursorBottom=oe(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2061,mac:{primary:2066}}})),o.CursorBottomSelect=oe(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends $t{constructor(){super({id:"editorScroll",precondition:void 0,description:ui.description})}determineScrollMethod(v){const y=[6],w=[1,2,3,4,5,6],x=[4,2],M=[1,3];return y.includes(v.unit)&&x.includes(v.direction)?this._runHorizontalEditorScroll.bind(this):w.includes(v.unit)&&M.includes(v.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(v,y){const w=ui.parse(y);if(!w)return;const x=this.determineScrollMethod(w);x&&x(v,y.source,w)}_runVerticalEditorScroll(v,y,w){const x=this._computeDesiredScrollTop(v,w);if(w.revealCursor){const M=v.getCompletelyVisibleViewRangeAtScrollTop(x);v.setCursorStates(y,3,[Vn.findPositionInViewportIfOutside(v,v.getPrimaryCursorState(),M,w.select)])}v.viewLayout.setScrollPosition({scrollTop:x},0)}_computeDesiredScrollTop(v,y){if(y.unit===1){const M=v.viewLayout.getFutureViewport(),L=v.getCompletelyVisibleViewRangeAtScrollTop(M.top),E=v.coordinatesConverter.convertViewRangeToModelRange(L);let k;y.direction===1?k=Math.max(1,E.startLineNumber-y.value):k=Math.min(v.model.getLineCount(),E.startLineNumber+y.value);const O=v.coordinatesConverter.convertModelPositionToViewPosition(new W(k,1));return v.viewLayout.getVerticalOffsetForLineNumber(O.lineNumber)}if(y.unit===5){let M=0;return y.direction===3&&(M=v.model.getLineCount()-v.cursorConfig.pageSize),v.viewLayout.getVerticalOffsetForLineNumber(M)}let w;y.unit===3?w=v.cursorConfig.pageSize*y.value:y.unit===4?w=Math.round(v.cursorConfig.pageSize/2)*y.value:w=y.value;const x=(y.direction===1?-1:1)*w;return v.viewLayout.getCurrentScrollTop()+x*v.cursorConfig.lineHeight}_runHorizontalEditorScroll(v,y,w){const x=this._computeDesiredScrollLeft(v,w);v.viewLayout.setScrollPosition({scrollLeft:x},0)}_computeDesiredScrollLeft(v,y){const w=(y.direction===4?-1:1)*y.value;return v.viewLayout.getCurrentScrollLeft()+w*v.cursorConfig.typicalHalfwidthCharacterWidth}}u(f,"EditorScrollImpl"),o.EditorScrollImpl=f,o.EditorScroll=oe(new f),o.ScrollLineUp=oe(new class extends $t{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Up,by:ui.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollPageUp=oe(new class extends $t{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Up,by:ui.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollEditorTop=oe(new class extends $t{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Up,by:ui.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollLineDown=oe(new class extends $t{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Down,by:ui.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollPageDown=oe(new class extends $t{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Down,by:ui.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollEditorBottom=oe(new class extends $t{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Down,by:ui.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollLeft=oe(new class extends $t{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Left,by:ui.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}}),o.ScrollRight=oe(new class extends $t{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus}})}runCoreEditorCommand(C,v){o.EditorScroll.runCoreEditorCommand(C,{to:ui.RawDirection.Right,by:ui.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}});class m extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){y.position&&(v.model.pushStackElement(),v.setCursorStates(y.source,3,[Vn.word(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position)]),y.revealType!==2&&v.revealPrimaryCursor(y.source,!0,!0))}}u(m,"WordCommand"),o.WordSelect=oe(new m({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),o.WordSelectDrag=oe(new m({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),o.LastCursorWordSelect=oe(new class extends $t{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(C,v){if(!v.position)return;const y=C.getLastAddedCursorIndex(),w=C.getCursorStates(),x=w.slice(0),M=w[y];x[y]=Vn.word(C,M,M.modelState.hasSelection(),v.position),C.model.pushStackElement(),C.setCursorStates(v.source,3,x)}});class b extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){y.position&&(v.model.pushStackElement(),v.setCursorStates(y.source,3,[Vn.line(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),y.revealType!==2&&v.revealPrimaryCursor(y.source,!1,!0))}}u(b,"LineCommand"),o.LineSelect=oe(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),o.LineSelectDrag=oe(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends $t{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){if(!y.position)return;const w=v.getLastAddedCursorIndex(),x=v.getCursorStates(),M=x.slice(0);M[w]=Vn.line(v,x[w],this._inSelectionMode,y.position,y.viewPosition),v.model.pushStackElement(),v.setCursorStates(y.source,3,M)}}u(_,"LastCursorLineCommand"),o.LastCursorLineSelect=oe(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),o.LastCursorLineSelectDrag=oe(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),o.CancelSelection=oe(new class extends $t{constructor(){super({id:"cancelSelection",precondition:D.hasNonEmptySelection,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,v){C.model.pushStackElement(),C.setCursorStates(v.source,3,[Vn.cancelSelection(C,C.getPrimaryCursorState())]),C.revealPrimaryCursor(v.source,!0)}}),o.RemoveSecondaryCursors=oe(new class extends $t{constructor(){super({id:"removeSecondaryCursors",precondition:D.hasMultipleSelections,kbOpts:{weight:ut+1,kbExpr:D.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,v){C.model.pushStackElement(),C.setCursorStates(v.source,3,[C.getPrimaryCursorState()]),C.revealPrimaryCursor(v.source,!0),mw(p("removedCursor","Removed secondary cursors"))}}),o.RevealLine=oe(new class extends $t{constructor(){super({id:"revealLine",precondition:void 0,description:tf.description})}runCoreEditorCommand(C,v){const y=v,w=y.lineNumber||0;let x=typeof w=="number"?w+1:parseInt(w)+1;x<1&&(x=1);const M=C.model.getLineCount();x>M&&(x=M);const L=new T(x,1,x,C.model.getLineMaxColumn(x));let E=0;if(y.at)switch(y.at){case tf.RawAtArgument.Top:E=3;break;case tf.RawAtArgument.Center:E=1;break;case tf.RawAtArgument.Bottom:E=4;break}const k=C.coordinatesConverter.convertModelRangeToViewRange(L);C.revealRange(v.source,!1,k,E,0)}}),o.SelectAll=new class extends Sw{constructor(){super(qee)}runDOMCommand(){To&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(C,v,y){const w=v._getViewModel();w&&this.runCoreEditorCommand(w,y)}runCoreEditorCommand(C,v){C.model.pushStackElement(),C.setCursorStates("keyboard",3,[Vn.selectAll(C,C.getPrimaryCursorState())])}},o.SetSelection=oe(new class extends $t{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(C,v){v.selection&&(C.model.pushStackElement(),C.setCursorStates(v.source,3,[it.fromModelSelection(v.selection)]))}})})(Wn||(Wn={}));const xie=Z.and(D.textInputFocus,D.columnSelection);function nm(o,e){us.registerKeybindingRule({id:o,primary:e,when:xie,weight:ut+1})}u(nm,"registerColumnSelection");nm(Wn.CursorColumnSelectLeft.id,1039);nm(Wn.CursorColumnSelectRight.id,1041);nm(Wn.CursorColumnSelectUp.id,1040);nm(Wn.CursorColumnSelectPageUp.id,1035);nm(Wn.CursorColumnSelectDown.id,1042);nm(Wn.CursorColumnSelectPageDown.id,1036);function HF(o){return o.register(),o}u(HF,"registerCommand$2");var yf;(function(o){class e extends jn{runEditorCommand(n,i,s){const r=i._getViewModel();r&&this.runCoreEditingCommand(i,r,s||{})}}u(e,"CoreEditingCommand"),o.CoreEditingCommand=e,o.LineBreakInsert=oe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:D.writable,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Bt.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),o.Outdent=oe(new class extends e{constructor(){super({id:"outdent",precondition:D.writable,kbOpts:{weight:ut,kbExpr:Z.and(D.editorTextFocus,D.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Bt.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.Tab=oe(new class extends e{constructor(){super({id:"tab",precondition:D.writable,kbOpts:{weight:ut,kbExpr:Z.and(D.editorTextFocus,D.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Bt.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.DeleteLeft=oe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[s,r]=dd.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(2)}}),o.DeleteRight=oe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ut,kbExpr:D.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[s,r]=dd.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(3)}}),o.Undo=new class extends Sw{constructor(){super(h7)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(87)===!0))return n.getModel().undo()}},o.Redo=new class extends Sw{constructor(){super(g7)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(87)===!0))return n.getModel().redo()}}})(yf||(yf={}));class Ok extends Hv{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(gt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}u(Ok,"EditorHandlerCommand");function Jh(o,e){HF(new Ok("default:"+o,o)),HF(new Ok(o,o,e))}u(Jh,"registerOverwritableCommand");Jh("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Jh("replacePreviousChar");Jh("compositionType");Jh("compositionStart");Jh("compositionEnd");Jh("paste");Jh("cut");class E9{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Wn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new W(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(75)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(75)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=bi&&t.get(102),i=t.get(20);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Wn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Wn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Wn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Wn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Wn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Wn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Wn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Wn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Wn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Wn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Wn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Wn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Wn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}u(E9,"ViewController");class zv{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return zv.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}}u(zv,"ViewUserInputEvents");var Lx;class EN{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,r=0;for(let l=n;l<=i;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(s=c,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,r)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let a=e;a<=n;a++)a>=i&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const r=[];for(let h=0;h<n;h++)r[h]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,r=e.length;s<r;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}}u(EN,"RenderedLinesCollection");class kN{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new EN(()=>this._host.createVisibleLine())}_createDomNode(){const e=dt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(139)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new ba(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}u(kN,"VisibleLinesCollection");class ba{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let r=t;r<=n;r++)s.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const r=t,a=Math.min(n,s.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart<t){const r=Math.min(s.linesLength,t-s.rendLineNumberStart);r>0&&(this._removeLinesBefore(s,r),s.linesLength-=r)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const r=s.rendLineNumberStart+s.linesLength,a=n;r<=a&&(this._insertLinesAfter(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const r=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-r+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=r+l;a[l].layoutLine(c,i[c-s])}}_insertLinesBefore(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){ba._ttPolicy&&(n=ba._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");ba._ttPolicy&&(t=ba._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const r=e.lines[s];if(n[s]){const a=i.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,n){const i=ba._sb,s=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let c=!1;for(let d=0;d<s;d++){const h=r[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this.viewportData,i))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let c=!1;const d=[];for(let h=0;h<s;h++){const g=r[h];d[h]=!1,!(l[h]||!g.renderLine(h+a,n[h],this.viewportData,i))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,i.build(),d)}}}u(ba,"ViewLayerRenderer");ba._ttPolicy=(Lx=window.trustedTypes)===null||Lx===void 0?void 0:Lx.createPolicy("editorViewLayer",{createHTML:o=>o});ba._sb=new jh(1e5);class DN extends Ds{constructor(e){super(e),this._visibleLines=new kN(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(48);ai(this.domNode,n),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new k9(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);const s=this._context.configuration.options.get(48);return ai(this.domNode,s),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}u(DN,"ViewOverlays");class k9{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(64),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=dt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(64)}renderLine(e,t,n,i){let s="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++){const l=this._dynamicOverlays[r];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,i.appendString('<div style="position:absolute;top:'),i.appendString(String(t)),i.appendString("px;width:100%;height:"),i.appendString(String(this._lineHeight)),i.appendString('px;">'),i.appendString(s),i.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}u(k9,"ViewOverlayLine");class D9 extends DN{constructor(e){super(e);const n=this._context.configuration.options.get(139);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(139);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}u(D9,"ContentViewOverlays");class M9 extends DN{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(139);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),ai(this.domNode,t.get(48))}onConfigurationChanged(e){const t=this._context.configuration.options;ai(this.domNode,t.get(48));const n=t.get(139);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}u(M9,"MarginViewOverlays");class A9 extends Ds{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=dt(document.createElement("div")),Ur.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=dt(document.createElement("div")),Ur.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new I9(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i,s){this._widgets[e.getId()].setPosition(t,n,i,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}u(A9,"ViewContentWidgets");class I9{constructor(e,t,n){this._primaryAnchor=new Fg(null,null),this._secondaryAnchor=new Fg(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=dt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(139);this._fixedOverflowWidgets=i.get(40),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(64),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(64),e.hasChanged(139)){const n=t.get(139);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity);function i(s,r,a){if(!s)return new Fg(null,null);const l=r.model.validatePosition(s);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new Fg(s,c)}return new Fg(s,null)}u(i,"getValidPositionPair")}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i){const s=e.top,r=s,a=e.top+e.height,l=i.viewportHeight-a,c=s-n,d=r>=n,h=a,g=l>=n;let f=e.left;return f+t>i.scrollLeft+i.viewportWidth&&(f=i.scrollLeft+i.viewportWidth-t),f<i.scrollLeft&&(f=i.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:g,belowTop:h,left:f}}_layoutHorizontalSegmentInPage(e,t,n,i){const a=Math.max(15,t.left-i),l=Math.min(t.left+t.width+i,e.width-15);let c=t.left+n-window.scrollX;if(c+i>l){const d=c-(l-i);c-=d,n-=d}if(c<a){const d=c-a;c-=d,n-=d}return[n,c]}_layoutBoxInPage(e,t,n,i){const s=e.top-n,r=e.top+e.height,a=Kn(this._viewDomNode.domNode),l=a.top+s-window.scrollY,c=a.top+r-window.scrollY,d=cS(document.body),[h,g]=this._layoutHorizontalSegmentInPage(d,a,e.left-i.scrollLeft+this._contentLeft,t),f=22,m=22,b=l>=f,_=c+n<=d.height-m;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(l,f),fitsBelow:_,belowTop:c,left:g}:{fitsAbove:b,aboveTop:s,fitsBelow:_,belowTop:r,left:h}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Og(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,n;const i=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),s=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((n=this._primaryAnchor.viewPosition)===null||n===void 0?void 0:n.lineNumber)?this._secondaryAnchor.viewPosition:null,r=a(s,this._affinity,this._lineHeight);return{primary:i,secondary:r};function a(l,c,d){if(!l)return null;const h=e.visibleRangeForPosition(l);if(!h)return null;const g=l.column===1&&c===3?0:h.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new Hk(f,g,d)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const i=this._context.configuration.options.get(48);let s=t.left;return s<e.left?s=Math.max(s,e.left-n+i.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+n-i.typicalFullwidthCharacterWidth),new Hk(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=Ex(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const i=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new Og(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new Og(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Og(i.top,i.left)),position:0}:{coordinate:new Og(i.top,i.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Ex(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Ex(this._actual.afterRender,this._actual,this._renderData.position)}}u(I9,"Widget");class Fg{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}u(Fg,"PositionPair");class Og{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}u(Og,"Coordinate");class Hk{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}u(Hk,"AnchorCoordinate");function Ex(o,e,...t){try{return o.call(e,...t)}catch{return null}}u(Ex,"safeInvoke");class MN extends Id{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(139);this._lineHeight=t.get(64),this._renderLineHighlight=t.get(91),this._renderLineHighlightOnlyWhenFocus=t.get(92),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ge(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(i=>i.positionLineNumber);t.sort((i,s)=>i-s),pi(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(i=>i.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(139);return this._lineHeight=t.get(64),this._renderLineHighlight=t.get(91),this._renderLineHighlightOnlyWhenFocus=t.get(92),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=n;l<=i;l++){const c=l-n;for(;r<s&&this._cursorLineNumbers[r]<l;)r++;r<s&&this._cursorLineNumbers[r]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}u(MN,"AbstractLineHighlightOverlay");class N9 extends MN{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}u(N9,"CurrentLineHighlightOverlay");class R9 extends MN{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}u(R9,"CurrentLineMarginHighlightOverlay");or((o,e)=>{const t=o.getColor(a9);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||o.defines(PF)){const n=o.getColor(PF);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),Aa(o.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class P9 extends Id{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:T.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=r;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',h=Math.max(c.range.startLineNumber,s),g=Math.min(c.range.endLineNumber,r);for(let f=h;f<=g;f++){const m=f-s;n[m]+=d}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber;let r=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){const h=t[c];if(h.options.isWholeLine)continue;const g=h.options.className,f=!!h.options.showIfCollapsed;let m=h.range;if(f&&m.endColumn===1&&m.endLineNumber!==m.startLineNumber&&(m=new T(m.startLineNumber,m.startColumn,m.endLineNumber-1,this._context.viewModel.getLineMaxColumn(m.endLineNumber-1))),r===g&&a===f&&T.areIntersectingOrTouching(l,m)){l=T.plusRange(l,m);continue}r!==null&&this._renderNormalDecoration(e,l,r,a,i,s,n),r=g,a=f,l=m}r!==null&&this._renderNormalDecoration(e,l,r,a,i,s,n)}_renderNormalDecoration(e,t,n,i,s,r,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const h=l[c];if(h.outsideRenderedLine)continue;const g=h.lineNumber-r;if(i&&h.ranges.length===1){const f=h.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const m=Math.round(f.left+f.width/2),b=Math.max(0,Math.round(m-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new Bv(b,this._typicalHalfwidthCharacterWidth)}}for(let f=0,m=h.ranges.length;f<m;f++){const b=h.ranges[f],_='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+s+'px;"></div>';a[g]+=_}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(P9,"DecorationsOverlay");class F9 extends Ds{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,r=s.get(98),a=s.get(72),l=s.get(38),c=s.get(101),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+Cw(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new pS(t.domNode,d,this._context.viewLayout.getScrollable())),Ur.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=dt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=u((g,f,m)=>{const b={};if(f){const _=g.scrollTop;_&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,g.scrollTop=0)}if(m){const _=g.scrollLeft;_&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)},"onBrowserDesperateReveal");this._register($(n.domNode,"scroll",g=>h(n.domNode,!0,!0))),this._register($(t.domNode,"scroll",g=>h(t.domNode,!0,!1))),this._register($(i.domNode,"scroll",g=>h(i.domNode,!0,!1))),this._register($(this.scrollbarDomNode.domNode,"scroll",g=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(139);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(70).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(98)||e.hasChanged(72)||e.hasChanged(38)){const t=this._context.configuration.options,n=t.get(98),i=t.get(72),s=t.get(38),r=t.get(101),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(139)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+Cw(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}u(F9,"EditorScrollbar");class x_{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}u(x_,"DecorationToRender");class yS extends Id{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,r=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className;let h=Math.max(c.startLineNumber,e)-e;const g=Math.min(c.endLineNumber,t)-e;s===d?(h=Math.max(r+1,h),r=Math.max(r,g)):(s=d,r=g);for(let f=h;f<=r;f++)i[f].push(s)}return i}}u(yS,"DedupOverlay");class O9 extends yS{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(139);this._lineHeight=t.get(64),this._glyphMargin=t.get(55),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(139);return this._lineHeight=t.get(64),this._glyphMargin=t.get(55),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.glyphMarginClassName;l&&(n[i++]=new x_(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),r=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+r+"px;width:"+a+"px;height:"+s+'px;"></div>',c=[];for(let d=t;d<=n;d++){const h=d-t,g=i[h];g.length===0?c[h]="":c[h]='<div class="cgmr codicon '+g.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(O9,"GlyphMarginOverlay");class AN extends z{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}u(AN,"TextModelPart");function wS(o,e){let t=0,n=0;const i=o.length;for(;n<i;){const s=o.charCodeAt(n);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;n++}return n===i?-1:t}u(wS,"computeIndentLevel");var Vu;(function(o){o[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled"})(Vu||(Vu={}));class Oc{constructor(e,t,n,i,s,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}u(Oc,"IndentGuide");class wf{constructor(e,t){this.top=e,this.endColumn=t}}u(wf,"IndentGuideHorizontalLine");class H9 extends AN{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return wS(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide);let a=-2,l=-1,c=-2,d=-1;const h=u(L=>{if(a!==-1&&(a===-2||a>L-1)){a=-1,l=-1;for(let E=L-2;E>=0;E--){const k=this._computeIndentLevel(E);if(k>=0){a=E,l=k;break}}}if(c===-2){c=-1,d=-1;for(let E=L;E<i;E++){const k=this._computeIndentLevel(E);if(k>=0){c=E,d=k;break}}}},"up_resolveIndents");let g=-2,f=-1,m=-2,b=-1;const _=u(L=>{if(g===-2){g=-1,f=-1;for(let E=L-2;E>=0;E--){const k=this._computeIndentLevel(E);if(k>=0){g=E,f=k;break}}}if(m!==-1&&(m===-2||m<L-1)){m=-1,b=-1;for(let E=L;E<i;E++){const k=this._computeIndentLevel(E);if(k>=0){m=E,b=k;break}}}},"down_resolveIndents");let C=0,v=!0,y=0,w=!0,x=0,M=0;for(let L=0;v||w;L++){const E=e-L,k=e+L;L>1&&(E<1||E<t)&&(v=!1),L>1&&(k>i||k>n)&&(w=!1),L>5e4&&(v=!1,w=!1);let O=-1;if(v&&E>=1){const H=this._computeIndentLevel(E-1);H>=0?(c=E-1,d=H,O=Math.ceil(H/this.textModel.getOptions().indentSize)):(h(E),O=this._getIndentLevelForWhitespaceLine(r,l,d))}let P=-1;if(w&&k<=i){const H=this._computeIndentLevel(k-1);H>=0?(g=k-1,f=H,P=Math.ceil(H/this.textModel.getOptions().indentSize)):(_(k),P=this._getIndentLevelForWhitespaceLine(r,f,b))}if(L===0){M=O;continue}if(L===1){if(k<=i&&P>=0&&M+1===P){v=!1,C=k,y=k,x=P;continue}if(E>=1&&O>=0&&O-1===M){w=!1,C=E,y=E,x=O;continue}if(C=e,y=e,x=M,x===0)return{startLineNumber:C,endLineNumber:y,indent:x}}v&&(O>=x?C=E:v=!1),w&&(P>=x?y=k:w=!1)}return{startLineNumber:C,endLineNumber:y,indent:x}}getLinesBracketGuides(e,t,n,i){var s;const r=[];for(let g=e;g<=t;g++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new T(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let c;if(n&&l.length>0){const g=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(T.fromPositions(n)).toArray()).filter(f=>T.strictContainsPosition(f.range,n));c=(s=YH(g,f=>a))===null||s===void 0?void 0:s.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new IN;for(const g of l){if(!g.closingBracketRange)continue;const f=c&&g.range.equalsRange(c);if(!f&&!i.includeInactive)continue;const m=h.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,d)+(i.highlightActive&&f?" "+h.activeClassName:""),b=g.openingBracketRange.getStartPosition(),_=g.closingBracketRange.getStartPosition(),C=i.horizontalGuides===Vu.Enabled||i.horizontalGuides===Vu.EnabledForActive&&f;if(g.range.startLineNumber===g.range.endLineNumber){C&&r[g.range.startLineNumber-e].push(new Oc(-1,g.openingBracketRange.getEndPosition().column,m,new wf(!1,_.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(_),y=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),w=Math.min(y,v,g.minVisibleColumnIndentation+1);let x=!1;Pi(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(x=!0);const E=Math.max(b.lineNumber,e),k=Math.min(_.lineNumber,t),O=x?1:0;for(let P=E;P<k+O;P++)r[P-e].push(new Oc(w,-1,m,null,P===b.lineNumber?b.column:-1,P===_.lineNumber?_.column:-1));C&&(b.lineNumber>=e&&y>w&&r[b.lineNumber-e].push(new Oc(w,-1,m,new wf(!1,b.column),-1,-1)),_.lineNumber<=t&&v>w&&r[_.lineNumber-e].push(new Oc(w,-1,m,new wf(!x,_.column),-1,-1)))}for(const g of r)g.sort((f,m)=>f.visibleColumn-m.visibleColumn);return r}getVisibleColumnFromPosition(e){return Sn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,h=-1;for(let g=e;g<=t;g++){const f=g-e,m=this._computeIndentLevel(g-1);if(m>=0){l=g-1,c=m,a[f]=Math.ceil(m/i.indentSize);continue}if(l===-2){l=-1,c=-1;for(let b=g-2;b>=0;b--){const _=this._computeIndentLevel(b);if(_>=0){l=b,c=_;break}}}if(d!==-1&&(d===-2||d<g-1)){d=-1,h=-1;for(let b=g;b<n;b++){const _=this._computeIndentLevel(b);if(_>=0){d=b,h=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}u(H9,"GuidesTextModelPart");class IN{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}u(IN,"BracketPairGuidesClassNames");class V9 extends Id{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(140),i=t.get(48);this._lineHeight=t.get(64),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(14),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(140),i=t.get(48);return this._lineHeight=t.get(64),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(14),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(r,Math.min(a+1,this._context.viewModel.getLineCount()),d),g=[];for(let f=r;f<=a;f++){const m=f-r,b=h[m];let _="";const C=(n=(t=e.visibleRangeForPosition(new W(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const v of b){const y=v.column===-1?C+(v.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new W(f,v.column)).left;if(y>l||this._maxIndentLeft>0&&y>this._maxIndentLeft)break;const w=v.horizontalLine?v.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",x=v.horizontalLine?((s=(i=e.visibleRangeForPosition(new W(f,v.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&s!==void 0?s:y+this._spaceWidth)-y:this._spaceWidth;_+=`<div class="core-guide ${v.className} ${w}" style="left:${y}px;height:${c}px;width:${x}px"></div>`}g[m]=_}this._renderResult=g}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Vu.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Vu.EnabledForActive:Vu.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let h=e;h<=t;h++){const g=new Array;d.push(g);const f=i?i[h-e]:[],m=new th(f),b=s?s[h-e]:0;for(let _=1;_<=b;_++){const C=(_-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=h&&h<=a&&_===l;g.push(...m.takeWhile(w=>w.visibleColumn<C)||[]);const y=m.peek();(!y||y.visibleColumn!==C||y.horizontalLine)&&g.push(new Oc(C,-1,v?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}g.push(...m.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(V9,"IndentGuidesOverlay");function oC(o){if(!(o&&o.isTransparent()))return o}u(oC,"transparentToUndefined");or((o,e)=>{const t=[{bracketColor:d9,guideColor:iie,guideColorActive:cie},{bracketColor:u9,guideColor:sie,guideColorActive:die},{bracketColor:h9,guideColor:oie,guideColorActive:uie},{bracketColor:g9,guideColor:rie,guideColorActive:hie},{bracketColor:f9,guideColor:aie,guideColorActive:gie},{bracketColor:p9,guideColor:lie,guideColorActive:fie}],n=new IN,i=t.map(s=>{var r,a;const l=o.getColor(s.bracketColor),c=o.getColor(s.guideColor),d=o.getColor(s.guideColorActive),h=oC((r=oC(c))!==null&&r!==void 0?r:l?.transparent(.3)),g=oC((a=oC(d))!==null&&a!==void 0?a:l);if(!(!h||!g))return{guideColor:h,guideColorActive:g}}).filter(tZ);if(i.length>0){for(let s=0;s<30;s++){const r=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s).replace(/ /g,".")} { --guide-color: ${r.guideColor}; --guide-color-active: ${r.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class hy{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}u(hy,"DomReadingContext");class W9{constructor(){this._currentVisibleRange=new T(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}u(W9,"LastRenderedData");class B9{constructor(e,t,n,i,s,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}u(B9,"HorizontalRevealRangeRequest");class U9{constructor(e,t,n,i,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}u(U9,"HorizontalRevealSelectionsRequest");class Kv extends Ds{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new kN(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(48),r=i.get(140);this._lineHeight=i.get(64),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(95),this._cursorSurroundingLines=i.get(27),this._cursorSurroundingLinesStyle=i.get(28),this._canUseLayerHinting=!i.get(30),this._viewLineOptions=new Ik(n,this._context.theme.type),Ur.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Hu}`),ai(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new yt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new yt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new W9,this._horizontalRevealRequest=null,this._stickyScrollEnabled=i.get(110).enabled,this._maxNumberStickyLines=i.get(110).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Tr(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(140)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(48),i=t.get(140);return this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(95),this._cursorSurroundingLines=t.get(27),this._cursorSurroundingLinesStyle=t.get(28),this._canUseLayerHinting=!t.get(30),this._stickyScrollEnabled=t.get(110).enabled,this._maxNumberStickyLines=t.get(110).maxLineCount,ai(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(139)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Ik(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new B9(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new U9(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new W(i,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<s||i>r)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new W(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Tr.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const i=new hy(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=T.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const s=[];let r=0;const a=new hy(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(i.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<c||h>d)continue;const g=h===i.startLineNumber?i.startColumn:1,f=h===i.endLineNumber?i.endColumn:this._context.viewModel.getLineMaxColumn(h),m=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,g,f,a);if(m){if(t&&h<n){const b=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(h+1,1)).lineNumber,b!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new O7(m.outsideRenderedLine,h,Bv.from(m.ranges))}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:s}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const i=new hy(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new H7(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth(null))}return s&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),bi&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s,r){const a=e.top,l=e.height,c=a+l;let d,h,g;if(s&&s.length>0){let C=s[0].startLineNumber,v=s[0].endLineNumber;for(let y=1,w=s.length;y<w;y++){const x=s[y];C=Math.min(C,x.startLineNumber),v=Math.max(v,x.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(C),g=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(i)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let m=0,b=0;if(f)n||(m=this._lineHeight);else{const C=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?m=Math.max(C,this._maxNumberStickyLines)*this._lineHeight:m=C*this._lineHeight,b=Math.max(0,C-1)*this._lineHeight}n||(r===0||r===4)&&(b+=this._lineHeight),h-=m,g+=b;let _;if(g-h>l){if(!d)return-1;_=h}else if(r===5||r===6)if(r===6&&a<=h&&g<=c)_=a;else{const C=Math.max(5*this._lineHeight,l*.2),v=h-C,y=g-l;_=Math.max(y,v)}else if(r===1||r===2)if(r===2&&a<=h&&g<=c)_=a;else{const C=(h+g)/2;_=Math.max(0,C-l/2)}else _=this._computeMinimumScrolling(a,c,h,g,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(139),i=t.left,s=i+t.width-n.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const h of d.ranges)r=Math.min(r,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}return e.minimalReveal||(r=Math.max(0,r-Kv.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,s,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,i,s,r){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,r=!!r;const a=t-e;if(i-n<a){if(s)return n;if(r)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}u(Kv,"ViewLines");Kv.HORIZONTAL_EXTRA_PX=30;class G9 extends yS{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(139);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(139);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.linesDecorationsClassName;l&&(n[i++]=new x_(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(n[i++]=new x_(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,h=i[d];let g="";for(let f=0,m=h.length;f<m;f++)g+='<div class="cldr '+h[f]+a;l[d]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}u(G9,"LinesDecorationsOverlay");class z9 extends yS{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.marginClassName;l&&(n[i++]=new x_(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let r=t;r<=n;r++){const a=r-t,l=i[a];let c="";for(let d=0,h=l.length;d<h;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}u(z9,"MarginViewLineDecorationsOverlay");class js{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=js._clamp(e),this.g=js._clamp(t),this.b=js._clamp(n),this.a=js._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}u(js,"RGBA8");js.Empty=new js(0,0,0,0);class im extends z{static getInstance(){return this._INSTANCE||(this._INSTANCE=new im),this._INSTANCE}constructor(){super(),this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Yt.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Yt.getColorMap();if(!e){this._colors=[js.Empty],this._backgroundIsLight=!0;return}this._colors=[js.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new js(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}u(im,"MinimapTokensColorTracker");im._INSTANCE=null;const Lie=(()=>{const o=[];for(let e=32;e<=126;e++)o.push(e);return o.push(65533),o})(),Eie=u((o,e)=>(o-=32,o<0||o>96?e<=2?(o+96)%96:96-1:o),"getCharIndex");class ip{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=ip.soften(e,12/15),this.charDataLight=ip.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=cw(e[i]*t);return n}renderChar(e,t,n,i,s,r,a,l,c,d,h){const g=1*this.scale,f=2*this.scale,m=h?1:f;if(t+g>e.width||n+m>e.height){console.warn("bad render request outside image data");return}const b=d?this.charDataLight:this.charDataNormal,_=Eie(i,c),C=e.width*4,v=a.r,y=a.g,w=a.b,x=s.r-v,M=s.g-y,L=s.b-w,E=Math.max(r,l),k=e.data;let O=_*g*f,P=n*C+t*4;for(let H=0;H<m;H++){let G=P;for(let se=0;se<g;se++){const fe=b[O++]/255*(r/255);k[G++]=v+x*fe,k[G++]=y+M*fe,k[G++]=w+L*fe,k[G++]=E}P+=C}}blockRenderChar(e,t,n,i,s,r,a,l){const c=1*this.scale,d=2*this.scale,h=l?1:d;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,f=.5*(s/255),m=r.r,b=r.g,_=r.b,C=i.r-m,v=i.g-b,y=i.b-_,w=m+C*f,x=b+v*f,M=_+y*f,L=Math.max(s,a),E=e.data;let k=n*g+t*4;for(let O=0;O<h;O++){let P=k;for(let H=0;H<c;H++)E[P++]=w,E[P++]=x,E[P++]=M,E[P++]=L;k+=g}}}u(ip,"MinimapCharRenderer");const VF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},WF=u(o=>{const e=new Uint8ClampedArray(o.length/2);for(let t=0;t<o.length;t+=2)e[t>>1]=VF[o[t]]<<4|VF[o[t+1]]&15;return e},"decodeData"),BF={1:Ha(()=>WF("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Ha(()=>WF("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Sf{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return BF[e]?n=new ip(BF[e](),e):n=Sf.createFromSampleData(Sf.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(const s of Lie)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=Sf._downsample(e,t);return new ip(i,t)}static _downsampleChar(e,t,n,i,s){const r=1*s,a=2*s;let l=i,c=0;for(let d=0;d<a;d++){const h=d/a*16,g=(d+1)/a*16;for(let f=0;f<r;f++){const m=f/r*10,b=(f+1)/r*10;let _=0,C=0;for(let y=h;y<g;y++){const w=t+Math.floor(y)*3840,x=1-(y-Math.floor(y));for(let M=m;M<b;M++){const L=1-(M-Math.floor(M)),E=w+Math.floor(M)*4,k=L*x;C+=k,_+=e[E]*e[E+3]/255*k}}const v=_/C;c=Math.max(c,v),n[l++]=cw(v)}}return c}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,r,t)),r+=n,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<i;d++)s[d]*=c}return s}}u(Sf,"MinimapCharRendererFactory");const kie=140,Die=2;class sp{constructor(e,t,n){const i=e.options,s=i.get(137),r=i.get(139),a=r.minimap,l=i.get(48),c=i.get(70);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(100),this.paddingTop=i.get(81).top,this.paddingBottom=i.get(81).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(64),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Ha(()=>Sf.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=sp._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=sp._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(kne);return n?new js(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Dne);return t?js._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}u(sp,"MinimapOptions");class Tf{constructor(e,t,n,i,s,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,i,s,r,a,l,c,d,h){const g=e.pixelRatio,f=e.minimapLineHeight,m=Math.floor(e.canvasInnerHeight/f),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){let M=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(M+=Math.max(0,s-e.lineHeight-e.paddingBottom));const L=Math.max(1,Math.floor(s*s/M)),E=Math.max(0,e.minimapHeight-L),k=E/(d-s),O=c*k,P=E>0,H=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),G=Math.floor(e.paddingTop/e.lineHeight);return new Tf(c,d,P,k,O,L,G,1,Math.min(a,H))}let _;if(r&&n!==a){const M=n-t+1;_=Math.floor(M*f/g)}else{const M=s/b;_=Math.floor(M*f/g)}const C=Math.floor(e.paddingTop/b);let v=Math.floor(e.paddingBottom/b);if(e.scrollBeyondLastLine){const M=s/b;v=Math.max(v,M-1)}let y;if(v>0){const M=s/b;y=(C+a+v-M-1)*f/g}else y=Math.max(0,(C+a)*f/g-_);y=Math.min(e.minimapHeight-_,y);const w=y/(d-s),x=c*w;if(m>=C+a+v){const M=y>0;return new Tf(c,d,M,w,x,_,C,1,a)}else{let M;t>1?M=t+C:M=Math.max(1,c/b);let L,E=Math.max(1,Math.floor(M-x*g/f));E<C?(L=C-E+1,E=1):(L=0,E=Math.max(1,E-C)),h&&h.scrollHeight===d&&(h.scrollTop>c&&(E=Math.min(E,h.startLineNumber),L=Math.max(L,h.topPaddingLineCount)),h.scrollTop<c&&(E=Math.max(E,h.startLineNumber),L=Math.min(L,h.topPaddingLineCount)));const k=Math.min(a,E-L+m-1),O=(c-i)/b;let P;return c>e.paddingTop?P=(t-E+L+O)*f/g:P=c/e.paddingTop*(L+O)*f/g,new Tf(c,d,!0,w,P,_,L,E,k)}}}u(Tf,"MinimapLayout");class L_{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}u(L_,"MinimapLine");L_.INVALID=new L_(-1);class Vk{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new EN(()=>L_.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}u(Vk,"RenderData");class SS{constructor(e,t,n,i){this._backgroundFillData=SS._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=i,l[c+1]=s,l[c+2]=r,l[c+3]=a,c+=4;return l}}u(SS,"MinimapBuffers");class op{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:i}=Iu.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/i,r=s/2;if(!n||n.minimapLines.length===0){const _=[];if(_[0]=1,i>1){for(let C=0,v=i-1;C<v;C++)_[C]=Math.round(C*s+r);_[i-1]=t}return[new op(s,_),[]]}const a=n.minimapLines,l=a.length,c=[];let d=0,h=0,g=1;const f=10;let m=[],b=null;for(let _=0;_<i;_++){const C=Math.max(g,Math.round(_*s)),v=Math.max(C,Math.round((_+1)*s));for(;d<l&&a[d]<C;){if(m.length<f){const w=d+1+h;b&&b.type==="deleted"&&b._oldIndex===d-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:d,deleteFromLineNumber:w,deleteToLineNumber:w},m.push(b)),h--}d++}let y;if(d<l&&a[d]<=v)y=a[d],d++;else if(_===0?y=1:_+1===i?y=t:y=Math.round(_*s+r),m.length<f){const w=d+1+h;b&&b.type==="inserted"&&b._i===_-1?b.insertToLineNumber++:(b={type:"inserted",_i:_,insertFromLineNumber:w,insertToLineNumber:w},m.push(b)),h++}c[_]=y,g=y}if(m.length<f)for(;d<l;){const _=d+1+h;b&&b.type==="deleted"&&b._oldIndex===d-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},m.push(b)),h--,d++}else m=[{type:"flush"}];return[new op(s,c),m]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}u(op,"MinimapSamplingState");class K9 extends Ds{constructor(e){super(e),this.tokensColorTracker=im.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new sp(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=op.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new E_(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new sp(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=op.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let s=0,r=t-e+1;s<r;s++)n[s]?i[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ge(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new T(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new T(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getDecorationsInViewport(n,!0);if(this._samplingState){const s=[];for(const r of i){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new sN(new T(l,a.startColumn,c,a.endColumn),r.options))}return s}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new T(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}u(K9,"Minimap");class E_ extends z{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(MF),this._domNode=dt(document.createElement("div")),Ur.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=dt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=dt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=dt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=dt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=dt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=pn(this._domNode.domNode,ae.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=Kn(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(r/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new Xh,this._sliderPointerDownListener=pn(this._slider.domNode,ae.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Tt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=$(this._domNode.domNode,Dt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=$(this._domNode.domNode,Dt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=pn(this._domNode.domNode,Dt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const s=u((r,a)=>{const l=Kn(this._domNode.domNode),c=Math.min(Math.abs(a-i),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(li&&c>kie){this._model.setScrollTop(n.scrollTop);return}const d=r-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(d))},"handlePointerMove");e.pageY!==t&&s(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>s(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new SS(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(MF),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Tf.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(T.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((g,f)=>(g.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,i,s);const d=new Wk(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,n,d,e,r);const h=new Wk(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,r,l,a,i),this._renderDecorationsHighlights(c,n,h,e,r,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=i.intersectWithViewport(l);if(!c)continue;const[d,h]=c;for(let m=d;m<=h;m++)n.set(m,!0);const g=i.getYForLineNumber(d,s),f=i.getYForLineNumber(h,s);a>=g||(a>r&&e.fillRect(wc,r,e.canvas.width,a-r),r=g),a=f}a>r&&e.fillRect(wc,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,i,s){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Xs.Inline)continue;const d=i.intersectWithViewport(l.range);if(!d)continue;const[h,g]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let m=r.get(f.toString());m||(m=f.transparent(.5).toString(),r.set(f.toString(),m)),e.fillStyle=m;for(let b=h;b<=g;b++){if(n.has(b))continue;n.set(b,!0);const _=i.getYForLineNumber(h,s);e.fillRect(wc,_,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=i.intersectWithViewport(c);if(!d)continue;const[h,g]=d;for(let f=h;f<=g;f++)this.renderDecorationOnLine(e,n,c,this._selectionColor,i,f,s,s,r,a,l)}}_renderDecorationsHighlights(e,t,n,i,s,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const h=i.intersectWithViewport(c.range);if(!h)continue;const[g,f]=h,m=d.getColor(this._theme.value);if(!(!m||m.isTransparent()))for(let b=g;b<=f;b++)switch(d.position){case Xs.Inline:this.renderDecorationOnLine(e,n,c.range,m,i,b,s,s,r,a,l);continue;case Xs.Gutter:{const _=i.getYForLineNumber(b,s),C=2;this.renderDecoration(e,m,C,_,Die,s);continue}}}}renderDecorationOnLine(e,t,n,i,s,r,a,l,c,d,h){const g=s.getYForLineNumber(r,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:m}=n,b=f===r?n.startColumn:1,_=m===r?n.endColumn:this._model.getLineMaxColumn(r),C=this.getXOffsetForPosition(t,r,b,c,d,h),v=this.getXOffsetForPosition(t,r,_,c,d,h);this.renderDecoration(e,i,C,g,v-C,a)}getXOffsetForPosition(e,t,n,i,s,r){if(n===1)return wc;if((n-1)*s>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[wc];let d=wc;for(let h=1;h<c.length+1;h++){const g=c.charCodeAt(h-1),f=g===9?i*s:od(g)?2*s:s,m=d+f;if(m>=r){l[h]=r;break}l[h]=m,d=m}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,i,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,r)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const fe=this._lastRenderData._get();return new Vk(e,fe.imageData,fe.lines)}const s=this._getBuffer();if(!s)return null;const[r,a,l]=E_._renderUntouchedLines(s,e.topPaddingLineCount,t,n,i,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,m=this._model.tokensColorTracker,b=m.backgroundIsLight(),_=this._model.options.renderMinimap,C=this._model.options.charRenderer(),v=this._model.options.fontScale,y=this._model.options.minimapCharWidth,x=(_===1?2:2+1)*v,M=i>x?Math.floor((i-x)/2):0,L=g.a/255,E=new js(Math.round((g.r-h.r)*L+h.r),Math.round((g.g-h.g)*L+h.g),Math.round((g.b-h.b)*L+h.b),255);let k=e.topPaddingLineCount*i;const O=[];for(let fe=0,Le=n-t+1;fe<Le;fe++)l[fe]&&E_._renderLine(s,E,g.a,b,_,y,m,f,C,k,M,d,c[fe],v,i),O[fe]=new L_(k),k+=i;const P=r===-1?0:r,G=(a===-1?s.height:a)-P;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,P,s.width,G),new Vk(e,s,O)}static _renderUntouchedLines(e,t,n,i,s,r){const a=[];if(!r){for(let k=0,O=i-n+1;k<O;k++)a[k]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,h=l.lines,g=h.length,f=e.width,m=e.data,b=(i-n+1)*s*f*4;let _=-1,C=-1,v=-1,y=-1,w=-1,x=-1,M=t*s;for(let k=n;k<=i;k++){const O=k-n,P=k-d,H=P>=0&&P<g?h[P].dy:-1;if(H===-1){a[O]=!0,M+=s;continue}const G=H*f*4,se=(H+s)*f*4,fe=M*f*4,Le=(M+s)*f*4;y===G&&x===fe?(y=se,x=Le):(v!==-1&&(m.set(c.subarray(v,y),w),_===-1&&v===0&&v===w&&(_=y),C===-1&&y===b&&v===w&&(C=v)),v=G,y=se,w=fe,x=Le),a[O]=!1,M+=s}v!==-1&&(m.set(c.subarray(v,y),w),_===-1&&v===0&&v===w&&(_=y),C===-1&&y===b&&v===w&&(C=v));const L=_===-1?-1:_/(f*4),E=C===-1?-1:C/(f*4);return[L,E,a]}static _renderLine(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b){const _=f.content,C=f.tokens,v=e.width-r,y=b===1;let w=wc,x=0,M=0;for(let L=0,E=C.getCount();L<E;L++){const k=C.getEndOffset(L),O=C.getForeground(L),P=a.getColor(O);for(;x<k;x++){if(w>v)return;const H=_.charCodeAt(x);if(H===9){const G=g-(x+M)%g;M+=G-1,w+=G*r}else if(H===32)w+=r;else{const G=od(H)?2:1;for(let se=0;se<G;se++)if(s===2?c.blockRenderChar(e,w,d+h,P,l,t,n,y):c.renderChar(e,w,d+h,H,P,l,t,n,m,i,y),w+=r,w>v)return}}}}}u(E_,"InnerMinimap");class Wk{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}u(Wk,"ContiguousLineMap");class j9 extends Ds{constructor(e){super(e);const n=this._context.configuration.options.get(139);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=dt(document.createElement("div")),Ur.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(139);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=dt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}u(j9,"ViewOverlayWidgets");class $9{constructor(e,t){const n=e.options;this.lineHeight=n.get(64),this.pixelRatio=n.get(137),this.overviewRulerLanes=n.get(80),this.renderBorder=n.get(79);const i=t.getColor(Xne);this.borderColor=i?i.toString():null,this.hideCursor=n.get(57);const s=t.getColor(l9);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const r=n.get(70),a=r.enabled,l=r.side,c=t.getColor(Zne),d=Yt.getDefaultBackground();c?this.backgroundColor=c:a&&l==="right"?this.backgroundColor=d:this.backgroundColor=null;const g=n.get(139).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=m}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),r=Math.floor(i/3),a=i-s-r,l=e,c=l+s,d=l+s+a;return[[0,l,c,l,d,l,c,l],[0,s,a,s+a,r,s+a+r,a+r,s+a+r]]}else if(n===2){const s=Math.floor(i/2),r=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,r,s+r,s+r,s+r]]}else{const s=e,r=i;return[[0,s,s,s,s,s,s,s],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&U.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}u($9,"Settings");class q9 extends Ds{constructor(e){super(e),this._domNode=dt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Yt.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new $9(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(W.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?U.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const t=this._settings.canvasWidth,n=this._settings.canvasHeight,i=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),a=n/r,l=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),c=6*this._settings.pixelRatio|0,d=c/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=U.Format.CSS.formatHexA(e),h.fillRect(0,0,t,n)):(h.clearRect(0,0,t,n),h.fillStyle=U.Format.CSS.formatHexA(e),h.fillRect(0,0,t,n)):h.clearRect(0,0,t,n);const g=this._settings.x,f=this._settings.w;l.sort(oN.cmp);for(const m of l){const b=m.color,_=m.data;h.fillStyle=b;let C=0,v=0,y=0;for(let w=0,x=_.length/3;w<x;w++){const M=_[3*w],L=_[3*w+1],E=_[3*w+2];let k=s.getVerticalOffsetForLineNumber(L)*a|0,O=(s.getVerticalOffsetForLineNumber(E)+i)*a|0;if(O-k<c){let H=(k+O)/2|0;H<d?H=d:H+d>n&&(H=n-d),k=H-d,O=H+d}k>y+1||M!==C?(w!==0&&h.fillRect(g[C],v,f[C],y-v),C=M,v=k,y=O):O>y&&(y=O)}h.fillRect(g[C],v,f[C],y-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const m=2*this._settings.pixelRatio|0,b=m/2|0,_=this._settings.x[7],C=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let v=-100,y=-100;for(let w=0,x=this._cursorPositions.length;w<x;w++){const M=this._cursorPositions[w];let L=s.getVerticalOffsetForLineNumber(M.lineNumber)*a|0;L<b?L=b:L+b>n&&(L=n-b);const E=L-b,k=E+m;E>y+1?(w!==0&&h.fillRect(_,v,C,y-v),v=E,y=k):k>y&&(y=k)}h.fillRect(_,v,C,y-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,n),h.stroke(),h.moveTo(0,0),h.lineTo(t,0),h.stroke())}}u(q9,"DecorationsOverviewRuler");class Bk{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}u(Bk,"ColorZone");class rp{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}u(rp,"OverviewRulerZone");class Y9{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(rp.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const w=d.getColorZones();if(w){a.push(w);continue}}const h=this._getVerticalOffsetForLine(d.startLineNumber),g=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:h+d.heightInLines*t,f=Math.floor(s*h),m=Math.floor(s*g);let b=Math.floor((f+m)/2),_=m-b;_<r&&(_=r),b-_<0&&(b=_),b+_>n&&(b=n-_);const C=d.color;let v=this._color2Id[C];v||(v=++this._lastAssignedId,this._color2Id[C]=v,this._id2Color[v]=C);const y=new Bk(b-_,b+_,v);d.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(Bk.compare),a}}u(Y9,"OverviewZoneManager");class X9 extends Jp{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=dt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Y9(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(64)),this._zoneManager.setPixelRatio(n.get(137)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(64)&&(this._zoneManager.setLineHeight(t.get(64)),this._render()),e.hasChanged(137)&&(this._zoneManager.setPixelRatio(t.get(137)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,h=l.to;c!==s?(e.fillRect(0,r,i,a-r),s=c,e.fillStyle=n[s],r=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,r,i,a-r),r=d,a=h)}e.fillRect(0,r,i,a-r)}}u(X9,"OverviewRuler");class Z9 extends Ds{constructor(e){super(e),this.domNode=dt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(97),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(97),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),s=i;let r=t-e;for(;r>0;){const a=dt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}u(Z9,"Rulers");class J9 extends Ds{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(98);this._useShadows=n.useShadows,this._domNode=dt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(139);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(98);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}u(J9,"ScrollDecorationViewPart");class Q9{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}u(Q9,"HorizontalRangeWithStyle");class e8{constructor(e,t){this.lineNumber=e,this.ranges=t}}u(e8,"LineVisibleRangesWithStyle");function Mie(o){return new Q9(o)}u(Mie,"toStyledRange");function Aie(o){return new e8(o.lineNumber,o.ranges.map(Mie))}u(Aie,"toStyled");class nn extends Id{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(64),this._roundedSelection=t.get(96),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(64),this._roundedSelection=t.get(96),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<n.length;c++)n[c].lineNumber===a&&(s=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!r&&c>=0;c--)n[c].lineNumber===l&&(r=n[c].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,h=c.left+c.width,g={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const m=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;rC(d-m)<i?g.top=2:d>m&&(g.top=1),rC(h-b)<i?f.top=2:m<h&&h<b&&(f.top=1)}else s&&(g.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const m=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;rC(d-m)<i?g.bottom=2:m<d&&d<b&&(g.bottom=1),rC(h-b)<i?f.bottom=2:h<b&&(f.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=g,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(Aie);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,c=i[i.length-1].lineNumber;for(let d=0,h=i.length;d<h;d++){const g=i[d],f=g.lineNumber,m=f-t,b=n&&(f===c||f===l)?a:r,_=n&&f===l?1:0;let C="",v="";for(let y=0,w=g.ranges.length;y<w;y++){const x=g.ranges[y];if(s){const L=x.startStyle,E=x.endStyle;if(L.top===1||L.bottom===1){C+=this._createSelectionPiece(_,b,nn.SELECTION_CLASS_NAME,x.left-nn.ROUNDED_PIECE_WIDTH,nn.ROUNDED_PIECE_WIDTH);let k=nn.EDITOR_BACKGROUND_CLASS_NAME;L.top===1&&(k+=" "+nn.SELECTION_TOP_RIGHT),L.bottom===1&&(k+=" "+nn.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(_,b,k,x.left-nn.ROUNDED_PIECE_WIDTH,nn.ROUNDED_PIECE_WIDTH)}if(E.top===1||E.bottom===1){C+=this._createSelectionPiece(_,b,nn.SELECTION_CLASS_NAME,x.left+x.width,nn.ROUNDED_PIECE_WIDTH);let k=nn.EDITOR_BACKGROUND_CLASS_NAME;E.top===1&&(k+=" "+nn.SELECTION_TOP_LEFT),E.bottom===1&&(k+=" "+nn.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(_,b,k,x.left+x.width,nn.ROUNDED_PIECE_WIDTH)}}let M=nn.SELECTION_CLASS_NAME;if(s){const L=x.startStyle,E=x.endStyle;L.top===0&&(M+=" "+nn.SELECTION_TOP_LEFT),L.bottom===0&&(M+=" "+nn.SELECTION_BOTTOM_LEFT),E.top===0&&(M+=" "+nn.SELECTION_TOP_RIGHT),E.bottom===0&&(M+=" "+nn.SELECTION_BOTTOM_RIGHT)}v+=this._createSelectionPiece(_,b,M,x.left,x.width)}e[m][0]+=C,e[m][1]+=v}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){const a=r-n;t[a]=["",""]}const s=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){s[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(nn,"SelectionsOverlay");nn.SELECTION_CLASS_NAME="selected-text";nn.SELECTION_TOP_LEFT="top-left-radius";nn.SELECTION_BOTTOM_LEFT="bottom-left-radius";nn.SELECTION_TOP_RIGHT="top-right-radius";nn.SELECTION_BOTTOM_RIGHT="bottom-right-radius";nn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";nn.ROUNDED_PIECE_WIDTH=10;or((o,e)=>{const t=o.getColor(Rte);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function rC(o){return o<0?-o:o}u(rC,"abs");class Uk{constructor(e,t,n,i,s,r,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=i,this.height=s,this.textContent=r,this.textContentClassName=a}}u(Uk,"ViewCursorRenderData");class Gk{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(48);this._cursorStyle=t.get(26),this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(29),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=dt(document.createElement("div")),this._domNode.setClassName(`cursor ${Hu}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),ai(this._domNode,n),this._domNode.setDisplay("none"),this._position=new W(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(48);return this._cursorStyle=t.get(26),this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(29),this._typicalHalfwidthCharacterWidth),ai(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,s]=$Z(n,t-1);return[new W(e,i+1),n.substring(i,s)]}_prepareRender(e){let t="",n="";const[i,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===ti.Line||this._cursorStyle===ti.LineThin){const g=e.visibleRangeForPosition(i);if(!g||g.outsideRenderedLine)return null;let f;this._cursorStyle===ti.Line?(f=_F(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=s,n=this._getTokenClassName(i))):f=_F(1);let m=g.left,b=0;f>=2&&m>=1&&(b=1,m-=b);const _=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new Uk(_,m,b,f,this._lineHeight,t,n)}const r=e.linesVisibleRangesForRange(new T(i.lineNumber,i.column,i.lineNumber,i.column+s.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===ti.Block&&(t=s,n=this._getTokenClassName(i));let d=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===ti.Underline||this._cursorStyle===ti.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new Uk(d,l.left,0,c,h,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Hu} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}u(Gk,"ViewCursor");class ap extends Ds{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(87),this._cursorBlinking=t.get(24),this._cursorStyle=t.get(26),this._cursorSmoothCaretAnimation=t.get(25),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Gk(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=dt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new io,this._cursorFlatBlinkInterval=new Xp,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(87),this._cursorBlinking=t.get(24),this._cursorStyle=t.get(26),this._cursorSmoothCaretAnimation=t.get(25),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const i=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let r=0;r<s;r++){const a=new Gk(this._context);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let r=0;r<s;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],i)}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=u(n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1},"shouldRender");if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ap.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ap.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ti.Line:e+=" cursor-line-style";break;case ti.Block:e+=" cursor-block-style";break;case ti.Underline:e+=" cursor-underline-style";break;case ti.LineThin:e+=" cursor-line-thin-style";break;case ti.BlockOutline:e+=" cursor-block-outline-style";break;case ti.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}u(ap,"ViewCursors");ap.BLINK_INTERVAL=500;or((o,e)=>{const t=o.getColor(l9);if(t){let n=o.getColor($ne);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),Aa(o.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const kx=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc$1");class t8 extends Ds{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(139);this._lineHeight=t.get(64),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=dt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=dt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(139);return this._lineHeight=t.get(64),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(64)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new W(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),s=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};Iie(e,i),i.addZone=kx,i.removeZone=kx,i.layoutZone=kx}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:dt(t.domNode),marginDomNode:t.marginDomNode?dt(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){He(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){He(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l];let d=0,h=0,g="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(g))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}u(t8,"ViewZones");function Iie(o,e){try{return o(e)}catch(t){He(t)}}u(Iie,"safeInvoke1Arg");class n8{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}u(n8,"EditorTheme");class i8{constructor(e,t,n){this.configuration=e,this.theme=new n8(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}u(i8,"ViewContext");class s8{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new T(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}u(s8,"ViewportData");class o8 extends Ds{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=dt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(139),i=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);const s=n.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let n=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let r=this.blocks[n];r||(r=this.blocks[n]=dt(document.createElement("div")),this.domNode.appendChild(r));let a,l;s.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),l=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[c,d,h,g]=(t=s.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-g),r.setWidth(this.contentWidth+g+d),r.setTop(a-e.scrollTop-c),r.setHeight(l-a+c+h),n++}for(let s=n;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=n}}u(o8,"BlockDecorations");class r8 extends Id{constructor(e){super(),this._context=e,this._options=new zk(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new zk(this._context.configuration);return this._options.equals(t)?e.hasChanged(139):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,s=new Array(i);for(let a=0;a<i;a++)s[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const g of h){if(g.endLineNumber<a||g.startLineNumber>a)continue;const f=g.startLineNumber===a?g.startColumn:c.minColumn,m=g.endLineNumber===a?g.endColumn:c.maxColumn;f<m&&(d||(d=[]),d.push(new iN(f-1,m-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,n,i){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&i.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(Il),r=this._options.renderWithSVG,a=i.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=i.continuesWithWrappedLine,d=i.minColumn-1,h=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,m=this._options.middotWidth,b=this._options.wsmiddotWidth,_=this._options.spaceWidth,C=Math.abs(b-_),v=Math.abs(m-_),y=C<v?11825:183,w=this._options.canUseHalfwidthRightwardsArrow;let x="",M=!1,L=Pi(a),E;L===-1?(M=!0,L=l,E=l):E=Or(a);let k=0,O=n&&n[k],P=0;for(let H=d;H<l;H++){const G=a.charCodeAt(H);if(O&&H>=O.endOffset&&(k++,O=n&&n[k]),G!==9&&G!==32||g&&!M&&H<=E)continue;if(h&&H>=L&&H<=E&&G===32){const fe=H-1>=0?a.charCodeAt(H-1):0,Le=H+1<l?a.charCodeAt(H+1):0;if(fe!==32&&Le!==32)continue}if(h&&c&&H===l-1){const fe=H-1>=0?a.charCodeAt(H-1):0;if(G===32&&fe!==32&&fe!==9)continue}if(n&&(!O||O.startOffset>H||O.endOffset<=H))continue;const se=e.visibleRangeForPosition(new W(t,H+1));se&&(r?(P=Math.max(P,se.left),G===9?x+=this._renderArrow(f,_,se.left):x+=`<circle cx="${(se.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):G===9?x+=`<div class="mwh" style="left:${se.left}px;height:${f}px;">${w?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:x+=`<div class="mwh" style="left:${se.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return r?(P=Math.round(P+_),`<svg style="position:absolute;width:${P}px;height:${f}px" viewBox="0 0 ${P} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+x+"</svg>"):x}_renderArrow(e,t,n){const i=t/7,s=t,r=e/2,a=n,l={x:0,y:i/2},c={x:100/125*s,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},h={x:d.x+.1*c.x,y:d.y+.1*c.x},g={x:h.x+.35*c.x,y:h.y-.35*c.x},f={x:g.x,y:-g.y},m={x:h.x,y:-h.y},b={x:d.x,y:-d.y},_={x:c.x,y:-c.y},C={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,h,g,f,m,b,_,C].map(w=>`${(a+w.x).toFixed(2)} ${(r+w.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u(r8,"WhitespaceOverlay");class zk{constructor(e){const t=e.options,n=t.get(48),i=t.get(36);i==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):i==="svg"?(this.renderWhitespace=t.get(94),this.renderWithSVG=!0):(this.renderWhitespace=t.get(94),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(64),this.stopRenderingLineAfter=t.get(112)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}u(zk,"WhitespaceOptions");class a8 extends Jp{constructor(e,t,n,i,s,r){super(),this._selections=[new ge(1,1,1,1)],this._renderAnimationFrame=null;const a=new E9(t,i,s,e);this._context=new i8(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new _9(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=dt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=dt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=dt(document.createElement("div")),Ur.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new F9(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Kv(this._context,this._linesContent),this._viewZones=new t8(this._context),this._viewParts.push(this._viewZones);const l=new q9(this._context);this._viewParts.push(l);const c=new J9(this._context);this._viewParts.push(c);const d=new D9(this._context);this._viewParts.push(d),d.addDynamicOverlay(new N9(this._context)),d.addDynamicOverlay(new nn(this._context)),d.addDynamicOverlay(new V9(this._context)),d.addDynamicOverlay(new P9(this._context)),d.addDynamicOverlay(new r8(this._context));const h=new M9(this._context);this._viewParts.push(h),h.addDynamicOverlay(new R9(this._context)),h.addDynamicOverlay(new O9(this._context)),h.addDynamicOverlay(new z9(this._context)),h.addDynamicOverlay(new G9(this._context)),h.addDynamicOverlay(new tm(this._context));const g=new cd(this._context);g.getDomNode().appendChild(this._viewZones.marginDomNode),g.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(g),this._contentWidgets=new A9(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ap(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new j9(this._context),this._viewParts.push(this._overlayWidgets);const f=new Z9(this._context);this._viewParts.push(f);const m=new o8(this._context);this._viewParts.push(m);const b=new K9(this._context);if(this._viewParts.push(b),l){const _=this._scrollbar.getOverviewRulerLayoutInfo();_.parent.insertBefore(l.getDomNode(),_.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(b.getDomNode()),this._overflowGuardContainer.appendChild(m.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new n9(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){Fc.onRenderStart(),this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new B7(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new W(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(139);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(136)+" "+Cw(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=fw(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){Nie(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!aN(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new s8(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new F7(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new W(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?zv.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new X9(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,i,s,r,a,l,c;this._contentWidgets.setWidgetPosition(e.widget,(n=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&n!==void 0?n:null,(s=(i=e.position)===null||i===void 0?void 0:i.secondaryPosition)!==null&&s!==void 0?s:null,(a=(r=e.position)===null||r===void 0?void 0:r.preference)!==null&&a!==void 0?a:null,(c=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}u(a8,"View");function Nie(o){try{return o()}catch(e){He(e)}}u(Nie,"safeInvokeNoArg");class NN{constructor(e,t,n,i,s,r){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}u(NN,"InternalEditorAction");function ud(o){let e=0,t=0,n=0,i=0;for(let s=0,r=o.length;s<r;s++){const a=o.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<r&&o.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=o.length),[e,t,o.length-n,i]}u(ud,"countEOL");class Kk{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}u(Kk,"BracketInfo");class l8{constructor(e,t,n,i,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}u(l8,"BracketPairInfo");class c8 extends l8{constructor(e,t,n,i,s,r,a){super(e,t,n,i,s,r),this.minVisibleColumnIndentation=a}}u(c8,"BracketPairWithMinIndentationInfo");class Tw{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}u(Tw,"LengthObj");Tw.zero=new Tw(0,0);function Rie(o,e,t,n){return o!==t?fn(t-o,n):fn(0,n-e)}u(Rie,"lengthDiff");const zi=0;function xw(o){return o===0}u(xw,"lengthIsZero");const $s=Math.pow(2,26);function fn(o,e){return o*$s+e}u(fn,"toLength");function Co(o){const e=o,t=Math.floor(e/$s),n=e-t*$s;return new Tw(t,n)}u(Co,"lengthToObj");function Pie(o){return Math.floor(o/$s)}u(Pie,"lengthGetLineCount");function Zt(o,e){let t=o+e;return e>=$s&&(t=t-o%$s),t}u(Zt,"lengthAdd");function Fie(o,e){return o.reduce((t,n)=>Zt(t,e(n)),zi)}u(Fie,"sumLengths");function d8(o,e){return o===e}u(d8,"lengthEquals");function k_(o,e){const t=o,n=e;if(n-t<=0)return zi;const s=Math.floor(t/$s),r=Math.floor(n/$s),a=n-r*$s;if(s===r){const l=t-s*$s;return fn(0,a-l)}else return fn(r-s,a)}u(k_,"lengthDiffNonNegative");function xf(o,e){return o<e}u(xf,"lengthLessThan");function Lf(o,e){return o<=e}u(Lf,"lengthLessThanEqual");function hb(o,e){return o>=e}u(hb,"lengthGreaterThanEqual");function yg(o){return fn(o.lineNumber-1,o.column-1)}u(yg,"positionToLength");function Wu(o,e){const t=o,n=Math.floor(t/$s),i=t-n*$s,s=e,r=Math.floor(s/$s),a=s-r*$s;return new T(n+1,i+1,r+1,a+1)}u(Wu,"lengthsToRange");function Oie(o){const e=Va(o);return fn(e.length-1,e[e.length-1].length)}u(Oie,"lengthOfString");class Lw{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${Co(this.startOffset)}...${Co(this.endOffset)}) -> ${Co(this.newLength)}`}}u(Lw,"TextEditInfo");class u8{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>TS.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:k_(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?fn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):fn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Co(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?fn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):fn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Lf(n,e)){this.nextEditIdx++;const i=Co(n),s=Co(this.translateOldToCur(t.endOffsetBeforeObj)),r=i.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}u(u8,"BeforeEditPositionMapper");class TS{static from(e){return new TS(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=Co(t),this.endOffsetAfterObj=Co(Zt(e,n)),this.offsetObj=Co(e)}}u(TS,"TextEditInfoCache");const gy=[];class _n{static create(e,t){if(e<=128&&t.length===0){let n=_n.cache[e];return n||(n=new _n(e,t),_n.cache[e]=n),n}return new _n(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const r=1<<n|this.items;return r===this.items?this:_n.create(r,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(n&31),_n.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===gy&&e.additionalItems===gy)return t===this.items?this:t===e.items?e:_n.create(t,gy);const n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const s=this.additionalItems[i]||0,r=e.additionalItems[i]||0;n.push(s|r)}return _n.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}u(_n,"SmallImmutableSet");_n.cache=new Array(129);_n.empty=_n.create(0,gy);const UF={getKey(o){return o}};class RN{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}u(RN,"DenseKeyProvider");class xS{get length(){return this._length}constructor(e){this._length=e}}u(xS,"BaseAstNode");class lp extends xS{static create(e,t,n){let i=e.length;return t&&(i=Zt(i,t.length)),n&&(i=Zt(i,n.length)),new lp(i,e,t,n,t?t.missingOpeningBracketIds:_n.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new lp(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Zt(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}u(lp,"PairAstNode");class Gr extends xS{static create23(e,t,n,i=!1){let s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Zt(s,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=Zt(s,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new h8(s,e.listHeight+1,e,t,n,r):new cp(s,e.listHeight+1,e,t,n,r)}static getEmpty(){return new g8(zi,0,[],_n.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new Xr;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const s=this.getChild(i);t=Zt(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const r=this.getChild(s);r&&(n=Math.min(n,r.computeMinIndentation(i,t)),i=Zt(i,r.length))}return this.cachedMinIndentation=n,n}}u(Gr,"ListAstNode");class cp extends Gr{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,i,s,r){super(e,t,r),this._item1=n,this._item2=i,this._item3=s}deepClone(){return new cp(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}u(cp,"TwoThreeListAstNode");class h8 extends cp{toMutable(){return new cp(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}u(h8,"Immutable23ListAstNode");class D_ extends Gr{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,i){super(e,t,i),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new D_(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}u(D_,"ArrayListAstNode");class g8 extends D_{toMutable(){return new D_(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}u(g8,"ImmutableArrayListAstNode");const Hie=[];class LS extends xS{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return Hie}deepClone(){return this}}u(LS,"ImmutableLeafAstNode");class pu extends LS{get kind(){return 0}get missingOpeningBracketIds(){return _n.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Co(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=Pie(Zt(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Sn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}u(pu,"TextAstNode");class M_ extends LS{static create(e,t,n){return new M_(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return _n.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}u(M_,"BracketAstNode");class f8 extends LS{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}u(f8,"InvalidBracketAstNode");let Mc=u(class{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}},"Token");class PN{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new p8(this.textModel,this.bracketTokens),this._offset=zi,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return fn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Zt(this._offset,e);const t=Co(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Zt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}u(PN,"TextBufferTokenizer");class p8{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,r=s.getCount();let a=null;if(this.lineTokenOffset<r){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=ni.getTokenType(l)===0,d=ni.containsBalancedBrackets(l),h=s.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<h){const g=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),m=this.bracketTokens.getSingleLanguageBracketTokens(g),b=m.regExpGlobal;if(b){b.lastIndex=0;const _=b.exec(f);_&&(a=m.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=Rie(e,t,this.lineIdx,this.lineCharOffset);return new Mc(i,0,-1,_n.getEmpty(),new pu(i))}}u(p8,"NonPeekableTextBufferTokenizer");class m8{constructor(e,t){this.text=e,this._offset=zi,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,s=[];let r,a=0,l=0,c=0,d=0;const h=[];for(let m=0;m<60;m++)h.push(new Mc(fn(0,m),0,-1,_n.getEmpty(),new pu(fn(0,m))));const g=[];for(let m=0;m<60;m++)g.push(new Mc(fn(1,m),0,-1,_n.getEmpty(),new pu(fn(1,m))));if(i)for(i.lastIndex=0;(r=i.exec(e))!==null;){const m=r.index,b=r[0];if(b===`
`)a++,l=m+1;else{if(c!==m){let _;if(d===a){const C=m-c;if(C<h.length)_=h[C];else{const v=fn(0,C);_=new Mc(v,0,-1,_n.getEmpty(),new pu(v))}}else{const C=a-d,v=m-l;if(C===1&&v<g.length)_=g[v];else{const y=fn(C,v);_=new Mc(y,0,-1,_n.getEmpty(),new pu(y))}}s.push(_)}s.push(t.getToken(b)),c=m+b.length,d=a}}const f=e.length;if(c!==f){const m=d===a?fn(0,f-c):fn(a-d,f-l);s.push(new Mc(m,0,-1,_n.getEmpty(),new pu(m)))}this.length=fn(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new P5}}u(m8,"FastTokenizer");class ES{static createFromLanguage(e,t){function n(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}u(n,"getId");const i=new Map;for(const s of e.bracketsNew.openingBrackets){const r=fn(0,s.bracketText.length),a=n(s),l=_n.getEmpty().add(a,UF);i.set(s.bracketText,new Mc(r,1,a,l,M_.create(r,s,l)))}for(const s of e.bracketsNew.closingBrackets){const r=fn(0,s.bracketText.length);let a=_n.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(n(c),UF);i.set(s.bracketText,new Mc(r,2,n(l[0]),a,M_.create(r,s,a)))}return new ES(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Vie(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}u(ES,"BracketTokens");function Vie(o){let e=Js(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}u(Vie,"prepareBracketForRegExp");class FN{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=ES.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}u(FN,"LanguageAgnosticBracketTokens");function Wie(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;const r=e,a=o[r].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-r>=2?b8(r===0&&e===o.length?o:o.slice(r,e),!1):o[r]}u(t,"readNode");let n=t(),i=t();if(!i)return n;for(let r=t();r;r=t())GF(n,i)<=GF(i,r)?(n=Dx(n,i),i=r):i=Dx(i,r);return Dx(n,i)}u(Wie,"concat23Trees");function b8(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const s=i<<1;o[i]=Gr.create23(o[s],o[s+1],s+3===t?o[s+2]:null,e)}t=n}return Gr.create23(o[0],o[1],t>=3?o[2]:null,e)}u(b8,"concat23TreesOfSameHeight");function GF(o,e){return Math.abs(o.listHeight-e.listHeight)}u(GF,"heightDiff");function Dx(o,e){return o.listHeight===e.listHeight?Gr.create23(o,e,null,!1):o.listHeight>e.listHeight?Bie(o,e):Uie(e,o)}u(Dx,"concat$1");function Bie(o,e){o=o.toMutable();let t=o;const n=[];let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=Gr.create23(r.unappendChild(),i,null,!1):(r.appendChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Gr.create23(o,i,null,!1):o}u(Bie,"append");function Uie(o,e){o=o.toMutable();let t=o;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=Gr.create23(i,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Gr.create23(i,o,null,!1):o}u(Uie,"prepend");class _8{constructor(e){this.lastOffset=zi,this.nextNodes=[e],this.offsets=[zi],this.idxs=[]}readLongestNodeAt(e,t){if(xf(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Im(this.nextNodes);if(!n)return;const i=Im(this.offsets);if(xf(e,i))return;if(xf(i,e))if(Zt(i,n.length)<=e)this.nextNodeAfterCurrent();else{const s=Mx(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=Mx(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=Im(this.offsets),t=Im(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Im(this.nextNodes),i=Mx(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Zt(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}u(_8,"NodeReader");function Mx(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}u(Mx,"getNextChildIdx");function Im(o){return o.length>0?o[o.length-1]:void 0}u(Im,"lastOrUndefined");function jk(o,e,t,n){return new v8(o,e,t,n).parseDocument()}u(jk,"parseDocument");class v8{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new _8(n):void 0,this.positionMapper=new u8(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(_n.getEmpty());return e||(e=Gr.getEmpty()),e}parseList(e){const t=[];for(;;){let i=this.tryReadChildFromCache(e);if(!i){const s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;i=this.parseChild(e)}i.kind===4&&i.childrenLength===0||t.push(i)}return this.oldNodeReader?Wie(t):b8(t,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!xw(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!xf(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e){this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new f8(t.bracketIds,t.length);case 0:return t.astNode;case 1:{const n=e.merge(t.bracketIds),i=this.parseList(n),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===t.bracketId||s.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),lp.create(t.astNode,i,s.astNode)):lp.create(t.astNode,i,null)}default:throw new Error("unexpected")}}}u(v8,"Parser");function zF(o,e){if(o.length===0)return e;if(e.length===0)return o;const t=new th(KF(o)),n=KF(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function s(c){if(c===void 0){const h=t.takeWhile(g=>!0)||[];return i&&h.unshift(i),h}const d=[];for(;i&&!xw(c);){const[h,g]=i.splitAt(c);d.push(h),c=k_(h.lengthAfter,c),i=g??t.dequeue()}return xw(c)||d.push(new Nl(!1,c,c)),d}u(s,"nextS0ToS1MapWithS1LengthOf");const r=[];function a(c,d,h){if(r.length>0&&d8(r[r.length-1].endOffset,c)){const g=r[r.length-1];r[r.length-1]=new Lw(g.startOffset,d,Zt(g.newLength,h))}else r.push({startOffset:c,endOffset:d,newLength:h})}u(a,"pushEdit");let l=zi;for(const c of n){const d=s(c.lengthBefore);if(c.modified){const h=Fie(d,f=>f.lengthBefore),g=Zt(l,h);a(l,g,c.lengthAfter),l=g}else for(const h of d){const g=l;l=Zt(l,h.lengthBefore),h.modified&&a(g,l,h.lengthAfter)}}return r}u(zF,"combineTextEditInfos");class Nl{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=k_(e,this.lengthAfter);return d8(t,zi)?[this,void 0]:this.modified?[new Nl(this.modified,this.lengthBefore,e),new Nl(this.modified,zi,t)]:[new Nl(this.modified,e,e),new Nl(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Co(this.lengthBefore)} -> ${Co(this.lengthAfter)}`}}u(Nl,"LengthMapping");function KF(o){const e=[];let t=zi;for(const n of o){const i=k_(t,n.startOffset);xw(i)||e.push(new Nl(!1,i,i));const s=k_(n.startOffset,n.endOffset);e.push(new Nl(!0,s,n.newLength)),t=n.endOffset}return e}u(KF,"toLengthMapping");class C8 extends z{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new F,this.denseKeyProvider=new RN,this.brackets=new FN(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new m8(this.textModel.getValue(),n);this.initialAstWithoutTokens=jk(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new Lw(fn(n.fromLineNumber-1,0),fn(n.toLineNumber,0),fn(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=e.changes.map(n=>{const i=T.lift(n.range);return new Lw(yg(i.getStartPosition()),yg(i.getEndPosition()),Oie(n.text))}).reverse();this.handleEdits(t,!1)}handleEdits(e,t){const n=zF(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=zF(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const i=t,s=new PN(this.textModel,this.brackets);return jk(s,e,i,n)}getBracketsInRange(e,t){this.flushQueue();const n=fn(e.startLineNumber-1,e.startColumn-1),i=fn(e.endLineNumber-1,e.endColumn-1);return new Pr(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens;$k(r,zi,r.length,n,i,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=yg(e.getStartPosition()),i=yg(e.getEndPosition());return new Pr(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new S8(s,t,this.textModel);qk(r,zi,r.length,n,i,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return w8(t,zi,t.length,yg(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return y8(t,zi,t.length,yg(e))}}u(C8,"BracketPairsTree");function y8(o,e,t,n){if(o.kind===4||o.kind===2){const i=[];for(const s of o.children)t=Zt(e,s.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=i.length-1;s>=0;s--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=i[s];if(xf(r,n)){const l=y8(o.children[s],r,a,n);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=Wu(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(y8,"getFirstBracketBefore");function w8(o,e,t,n){if(o.kind===4||o.kind===2){for(const i of o.children){if(t=Zt(e,i.length),xf(n,t)){const s=w8(i,e,t,n);if(s)return s}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=Wu(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(w8,"getFirstBracketAfter");function $k(o,e,t,n,i,s,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(o.kind){case 4:{const h=o.childrenLength;for(let g=0;g<h;g++){const f=o.getChild(g);if(f){if(t=Zt(e,f.length),Lf(e,i)&&hb(t,n)){if(hb(t,i)){o=f;continue e}if(!$k(f,e,t,n,i,s,r,0,l,c))return!1}e=t}}return!0}case 2:{const h=!c||!o.closingBracket||o.closingBracket.bracketInfo.closesColorized(o.openingBracket.bracketInfo);let g=0;if(l){let m=l.get(o.openingBracket.text);m===void 0&&(m=0),g=m,h&&(m++,l.set(o.openingBracket.text,m))}const f=o.childrenLength;for(let m=0;m<f;m++){const b=o.getChild(m);if(b){if(t=Zt(e,b.length),Lf(e,i)&&hb(t,n)){if(hb(t,i)&&b.kind!==1){o=b,h?(r++,a=g+1):a=g;continue e}if((h||b.kind!==1||!o.closingBracket)&&!$k(b,e,t,n,i,s,h?r+1:r,h?g+1:g,l,c,!o.closingBracket))return!1}e=t}}return l?.set(o.openingBracket.text,g),!0}case 3:{const h=Wu(e,t);return s(new Kk(h,r-1,0,!0))}case 1:{const h=Wu(e,t);return s(new Kk(h,r-1,a-1,d))}case 0:return!0}}u($k,"collectBrackets");class S8{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}u(S8,"CollectBracketPairsContext");function qk(o,e,t,n,i,s,r,a){var l;if(r>200)return!0;let c=!0;if(o.kind===2){let d=0;if(a){let f=a.get(o.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(o.openingBracket.text,f)}const h=Zt(e,o.openingBracket.length);let g=-1;if(s.includeMinIndentation&&(g=o.computeMinIndentation(e,s.textModel)),c=s.push(new c8(Wu(e,t),Wu(e,h),o.closingBracket?Wu(Zt(h,((l=o.child)===null||l===void 0?void 0:l.length)||zi),t):void 0,r,d,o,g)),e=h,c&&o.child){const f=o.child;if(t=Zt(e,f.length),Lf(e,i)&&hb(t,n)&&(c=qk(f,e,t,n,i,s,r+1,a),!c))return!1}a?.set(o.openingBracket.text,d)}else{let d=e;for(const h of o.children){const g=d;if(d=Zt(d,h.length),Lf(g,i)&&Lf(n,d)&&(c=qk(h,g,d,n,i,s,r,a),!c))return!1}}return c}u(qk,"collectBracketPairs");class T8 extends z{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Fn),this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new X;this.bracketPairsTree.value=Gie(e.add(new C8(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||Pr.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||Pr.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getBracketsInRange(e,t))||Pr.empty}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(T.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?aC(this._findMatchingBracketUp(l,i,Ax(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(T.fromPositions(e,e)).filter(i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(e)||i.closingBracketRange.containsPosition(e))).findLastMaxBy(Ab(i=>i.openingBracketRange.containsPosition(e)?i.openingBracketRange:i.closingBracketRange,T.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=Ax(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=i-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(sa(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=i+1;c<s;c++){const d=t.getStartOffset(c);if(d>=l)break;if(sa(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(a&&!sa(i.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,i,a,r),d=null;for(;;){const h=uo.findNextBracketInRange(a.forwardRegex,n,s,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const g=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(f){if(f instanceof ha)return null;d=f}}l=h.endColumn-1}if(d)return d}if(r>0&&i.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(c&&!sa(i.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,i,c,l),g=uo.findPrevBracketInRange(c.reversedRegex,n,s,d,h);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const f=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),m=this._matchFoundBracket(g,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(m)return m instanceof ha?null:m}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof ha?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let r=-1,a=0;const l=u((c,d,h,g)=>{for(;;){if(n&&++a%100===0&&!n())return ha.INSTANCE;const f=uo.findPrevBracketInRange(s,c,d,h,g);if(!f)break;const m=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(m)?r++:e.isClose(m)&&r--,r===0)return f;g=f.startColumn-1}return null},"searchPrevMatchingBracketInRange");for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),h=d.getCount(),g=this.textModel.getLineContent(c);let f=h-1,m=g.length,b=g.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),m=t.column-1,b=t.column-1);let _=!0;for(;f>=0;f--){const C=d.getLanguageId(f)===i&&!sa(d.getStandardTokenType(f));if(C)_?m=d.getStartOffset(f):(m=d.getStartOffset(f),b=d.getEndOffset(f));else if(_&&m!==b){const v=l(c,g,m,b);if(v)return v}_=C}if(_&&m!==b){const C=l(c,g,m,b);if(C)return C}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let r=1,a=0;const l=u((d,h,g,f)=>{for(;;){if(n&&++a%100===0&&!n())return ha.INSTANCE;const m=uo.findNextBracketInRange(s,d,h,g,f);if(!m)break;const b=h.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(b)?r++:e.isClose(b)&&r--,r===0)return m;g=m.endColumn-1}return null},"searchNextMatchingBracketInRange"),c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const h=this.textModel.tokenization.getLineTokens(d),g=h.getCount(),f=this.textModel.getLineContent(d);let m=0,b=0,_=0;d===t.lineNumber&&(m=h.findTokenIndexAtOffset(t.column-1),b=t.column-1,_=t.column-1);let C=!0;for(;m<g;m++){const v=h.getLanguageId(m)===i&&!sa(h.getStandardTokenType(m));if(v)C||(b=h.getStartOffset(m)),_=h.getEndOffset(m);else if(C&&b!==_){const y=l(d,f,b,_);if(y)return y}C=v}if(C&&b!==_){const v=l(d,f,b,_);if(v)return v}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let i=null,s=null,r=null;for(let a=n.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let h=c-1,g=d.length,f=d.length;if(a===n.lineNumber){h=l.findTokenIndexAtOffset(n.column-1),g=n.column-1,f=n.column-1;const b=l.getLanguageId(h);i!==b&&(i=b,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let m=!0;for(;h>=0;h--){const b=l.getLanguageId(h);if(i!==b){if(s&&r&&m&&g!==f){const C=uo.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(C)return this._toFoundBracket(r,C);m=!1}i=b,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const _=!!s&&!sa(l.getStandardTokenType(h));if(_)m?g=l.getStartOffset(h):(g=l.getStartOffset(h),f=l.getEndOffset(h));else if(r&&s&&m&&g!==f){const C=uo.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(C)return this._toFoundBracket(r,C)}m=_}if(r&&s&&m&&g!==f){const b=uo.findPrevBracketInRange(s.reversedRegex,a,d,g,f);if(b)return this._toFoundBracket(r,b)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,r=null,a=null;for(let l=n.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),h=this.textModel.getLineContent(l);let g=0,f=0,m=0;if(l===n.lineNumber){g=c.findTokenIndexAtOffset(n.column-1),f=n.column-1,m=n.column-1;const _=c.getLanguageId(g);s!==_&&(s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let b=!0;for(;g<d;g++){const _=c.getLanguageId(g);if(s!==_){if(a&&r&&b&&f!==m){const v=uo.findNextBracketInRange(r.forwardRegex,l,h,f,m);if(v)return this._toFoundBracket(a,v);b=!1}s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const C=!!r&&!sa(c.getStandardTokenType(g));if(C)b||(f=c.getStartOffset(g)),m=c.getEndOffset(g);else if(a&&r&&b&&f!==m){const v=uo.findNextBracketInRange(r.forwardRegex,l,h,f,m);if(v)return this._toFoundBracket(a,v)}b=C}if(a&&r&&b&&f!==m){const _=uo.findNextBracketInRange(r.forwardRegex,l,h,f,m);if(_)return this._toFoundBracket(a,_)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=T.fromPositions(n),m=this.getBracketPairsInRange(T.fromPositions(n,n)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(f));return m?[m.openingBracketRange,m.closingBracketRange]:null}const i=Ax(t),s=this.textModel.getLineCount(),r=new Map;let a=[];const l=u((f,m)=>{if(!r.has(f)){const b=[];for(let _=0,C=m?m.brackets.length:0;_<C;_++)b[_]=0;r.set(f,b)}a=r.get(f)},"resetCounts");let c=0;const d=u((f,m,b,_,C)=>{for(;;){if(i&&++c%100===0&&!i())return ha.INSTANCE;const v=uo.findNextBracketInRange(f.forwardRegex,m,b,_,C);if(!v)break;const y=b.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),w=f.textIsBracket[y];if(w&&(w.isOpen(y)?a[w.index]++:w.isClose(y)&&a[w.index]--,a[w.index]===-1))return this._matchFoundBracket(v,w,!1,i);_=v.endColumn-1}return null},"searchInRange");let h=null,g=null;for(let f=n.lineNumber;f<=s;f++){const m=this.textModel.tokenization.getLineTokens(f),b=m.getCount(),_=this.textModel.getLineContent(f);let C=0,v=0,y=0;if(f===n.lineNumber){C=m.findTokenIndexAtOffset(n.column-1),v=n.column-1,y=n.column-1;const x=m.getLanguageId(C);h!==x&&(h=x,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g))}let w=!0;for(;C<b;C++){const x=m.getLanguageId(C);if(h!==x){if(g&&w&&v!==y){const L=d(g,f,_,v,y);if(L)return aC(L);w=!1}h=x,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g)}const M=!!g&&!sa(m.getStandardTokenType(C));if(M)w||(v=m.getStartOffset(C)),y=m.getEndOffset(C);else if(g&&w&&v!==y){const L=d(g,f,_,v,y);if(L)return aC(L)}w=M}if(g&&w&&v!==y){const x=d(g,f,_,v,y);if(x)return aC(x)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}u(T8,"BracketPairsTextModelPart");function Gie(o,e){return{object:o,dispose:()=>e?.dispose()}}u(Gie,"createDisposableRef$1");function Ax(o){if(typeof o>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=o}}u(Ax,"createTimeBasedContinueBracketSearchPredicate");class ha{constructor(){this._searchCanceledBrand=void 0}}u(ha,"BracketSearchCanceled");ha.INSTANCE=new ha;function aC(o){return o instanceof ha?null:o}u(aC,"stripBracketSearchCanceled");class x8 extends z{constructor(e){super(),this.textModel=e,this.colorProvider=new ON,this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,i){return i?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new T(1,1,this.textModel.getLineCount(),1),e,t):[]}}u(x8,"ColorizedBracketPairsDecorationProvider");class ON{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}u(ON,"ColorProvider");or((o,e)=>{const t=[d9,u9,h9,g9,f9,p9],n=new ON;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${o.getColor(nie)}; }`);const i=t.map(s=>o.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const r=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${r}; }`)}});function lC(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}u(lC,"escapeNewLine");class ei{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${lC(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${lC(this.oldText)}")`:`(replace@${this.oldPosition} "${lC(this.oldText)}" with "${lC(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;fr(e,i,n),n+=4;for(let s=0;s<i;s++)LJ(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=gr(e,t);return t+=4,kJ(e,t,n)}writeSize(){return 4+4+ei._writeStringSize(this.oldText)+ei._writeStringSize(this.newText)}write(e,t){return fr(e,this.oldPosition,t),t+=4,fr(e,this.newPosition,t),t+=4,t=ei._writeString(e,this.oldText,t),t=ei._writeString(e,this.newText,t),t}static read(e,t,n){const i=gr(e,t);t+=4;const s=gr(e,t);t+=4;const r=ei._readString(e,t);t+=ei._writeStringSize(r);const a=ei._readString(e,t);return t+=ei._writeStringSize(a),n.push(new ei(i,r,s,a)),t}}u(ei,"TextChange");function zie(o,e){return o===null||o.length===0?e:new pr(o,e).compress()}u(zie,"compressConsecutiveTextChanges");class pr{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[c,d]=pr._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(c),i=d;continue}if(n.newPosition<i.oldPosition){const[c,d]=pr._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[c,d]=pr._splitPrev(n,i.oldLength);a=c,l=i,n=d,i=this._getCurr(++t)}else{const[c,d]=pr._splitCurr(i,n.newLength);a=n,l=c,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new ei(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=pr._merge(this._result);return pr._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=pr._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=pr._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new ei(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new ei(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new ei(e.oldPosition,e.oldText,e.newPosition,n),new ei(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new ei(e.oldPosition,n,e.newPosition,e.newText),new ei(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new ei(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}u(pr,"TextChangeCompressor");function vc(o){return o===47||o===92}u(vc,"isPathSeparator");function L8(o){return o.replace(/[\\/]/g,xn.sep)}u(L8,"toSlashes");function Kie(o){return o.indexOf("/")===-1&&(o=L8(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}u(Kie,"toPosixPath");function jF(o,e=xn.sep){if(!o)return"";const t=o.length,n=o.charCodeAt(0);if(vc(n)){if(vc(o.charCodeAt(1))&&!vc(o.charCodeAt(2))){let s=3;const r=s;for(;s<t&&!vc(o.charCodeAt(s));s++);if(r!==s&&!vc(o.charCodeAt(s+1))){for(s+=1;s<t;s++)if(vc(o.charCodeAt(s)))return o.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(E8(n)&&o.charCodeAt(1)===58)return vc(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let i=o.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(vc(o.charCodeAt(i)))return o.slice(0,i+1)}return""}u(jF,"getRoot");function Yk(o,e,t,n=Fr){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!PI(o,e))return!1;if(e.length===o.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,o.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),o.indexOf(e)===0}u(Yk,"isEqualOrParent");function E8(o){return o>=65&&o<=90||o>=97&&o<=122}u(E8,"isWindowsDriveLetter");function jie(o,e=li){return e?E8(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}u(jie,"hasDriveLetter");function oa(o){return nw(o,!0)}u(oa,"originalFSPath");class k8{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:l_(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Ue.file)return Yk(oa(e),oa(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(qF(e.authority,t.authority))return Yk(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return ve.joinPath(e,...t)}basenameOrAuthority(e){return Do(e)||e.authority}basename(e){return xn.basename(e.path)}extname(e){return xn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Ue.file?t=ve.file(Y5(oa(e))).path:(t=xn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Ue.file?t=ve.file(q5(oa(e))).path:t=xn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!qF(e.authority,t.authority))return;if(e.scheme===Ue.file){const s=MZ(oa(e),oa(t));return li?L8(s):s}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const r=Math.min(n.length,i.length);s<r&&!(n.charCodeAt(s)!==i.charCodeAt(s)&&n.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);n=i.substr(0,s)+n.substr(s)}return xn.relative(n,i)}resolvePath(e,t){if(e.scheme===Ue.file){const n=ve.file(DZ(oa(e),t));return e.with({authority:n.authority,path:n.path})}return t=Kie(t),e.with({path:xn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&$g(e,t)}hasTrailingPathSeparator(e,t=Fr){if(e.scheme===Ue.file){const n=oa(e);return n.length>jF(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Fr){return YF(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Fr){let n=!1;if(e.scheme===Ue.file){const i=oa(e);n=i!==void 0&&i.length===jF(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!YF(e,t)?e.with({path:e.path+"/"}):e}}u(k8,"ExtUri");const Ot=new k8(()=>!1),kS=Ot.isEqual.bind(Ot);Ot.isEqualOrParent.bind(Ot);Ot.getComparisonKey.bind(Ot);const $ie=Ot.basenameOrAuthority.bind(Ot),Do=Ot.basename.bind(Ot),qie=Ot.extname.bind(Ot),DS=Ot.dirname.bind(Ot),Yie=Ot.joinPath.bind(Ot),Xie=Ot.normalizePath.bind(Ot),Zie=Ot.relativePath.bind(Ot),$F=Ot.resolvePath.bind(Ot);Ot.isAbsolutePath.bind(Ot);const qF=Ot.isEqualAuthority.bind(Ot),YF=Ot.hasTrailingPathSeparator.bind(Ot);Ot.removeTrailingPathSeparator.bind(Ot);Ot.addTrailingPathSeparator.bind(Ot);var hd;(function(o){o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(o.META_DATA_MIME,s),n}u(e,"parseMetaData"),o.parseMetaData=e})(hd||(hd={}));function wg(o){return o.toString()}u(wg,"uriGetComparisonKey");class An{static create(e,t){const n=e.getAlternativeVersionId(),i=Xk(e);return new An(n,n,i,i,t,t,[])}constructor(e,t,n,i,s,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=a}append(e,t,n,i,s){t.length>0&&(this.changes=zie(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(fr(e,t?t.length:0,n),n+=4,t)for(const i of t)fr(e,i.selectionStartLineNumber,n),n+=4,fr(e,i.selectionStartColumn,n),n+=4,fr(e,i.positionLineNumber,n),n+=4,fr(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=gr(e,t);t+=4;for(let s=0;s<i;s++){const r=gr(e,t);t+=4;const a=gr(e,t);t+=4;const l=gr(e,t);t+=4;const c=gr(e,t);t+=4,n.push(new ge(r,a,l,c))}return t}serialize(){let e=10+An._writeSelectionsSize(this.beforeCursorState)+An._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;fr(t,this.beforeVersionId,n),n+=4,fr(t,this.afterVersionId,n),n+=4,FP(t,this.beforeEOL,n),n+=1,FP(t,this.afterEOL,n),n+=1,n=An._writeSelections(t,this.beforeCursorState,n),n=An._writeSelections(t,this.afterCursorState,n),fr(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=gr(t,n);n+=4;const s=gr(t,n);n+=4;const r=PP(t,n);n+=1;const a=PP(t,n);n+=1;const l=[];n=An._readSelections(t,n,l);const c=[];n=An._readSelections(t,n,c);const d=gr(t,n);n+=4;const h=[];for(let g=0;g<d;g++)n=ei.read(t,n,h);return new An(i,s,r,a,l,c,h)}}u(An,"SingleModelEditStackData");class HN{get type(){return 0}get resource(){return ve.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=An.create(n,i)}toString(){return(this._data instanceof An?this._data:An.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(ve.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof An}append(e,t,n,i,s){this._data instanceof An&&this._data.append(e,t,n,i,s)}close(){this._data instanceof An&&(this._data=this._data.serialize())}open(){this._data instanceof An||(this._data=An.deserialize(this._data))}undo(){if(ve.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof An&&(this._data=this._data.serialize());const e=An.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(ve.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof An&&(this._data=this._data.serialize());const e=An.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof An&&(this._data=this._data.serialize()),this._data.byteLength+168}}u(HN,"SingleModelEditStackElement");class D8{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const s=wg(i.resource);this._editStackElementsMap.set(s,i)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=wg(e);return this._editStackElementsMap.has(t)}setModel(e){const t=wg(ve.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=wg(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const r=wg(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=wg(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${Do(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}u(D8,"MultiModelEditStackElement");function Xk(o){return o.getEOL()===`
`?0:1}u(Xk,"getModelEOL");function fl(o){return o?o instanceof HN||o instanceof D8:!1}u(fl,"isEditStackElement");class MS{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);fl(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);fl(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(fl(n)&&n.canAppend(this._model))return n;const i=new HN(p("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],Xk(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){const s=this._getOrCreateEditStackElement(e,i),r=this._model.applyEdits(t,!0),a=MS._computeCursorState(n,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),Xk(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return He(n),null}}}u(MS,"EditStack");class M8{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}u(M8,"SpacesDiffResult");function Jie(o,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){const g=o.charCodeAt(s),f=t.charCodeAt(s);if(g!==f)break}let r=0,a=0;for(let g=s;g<e;g++)o.charCodeAt(g)===32?r++:a++;let l=0,c=0;for(let g=s;g<n;g++)t.charCodeAt(g)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),h=Math.abs(r-l);if(d===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%d===0){i.spacesDiff=h/d;return}}u(Jie,"spacesDiff");function XF(o,e,t){const n=Math.min(o.getLineCount(),1e4);let i=0,s=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new M8;for(let m=1;m<=n;m++){const b=o.getLineLength(m),_=o.getLineContent(m),C=b<=65536;let v=!1,y=0,w=0,x=0;for(let L=0,E=b;L<E;L++){const k=C?_.charCodeAt(L):o.getLineCharCode(m,L);if(k===9)x++;else if(k===32)w++;else{v=!0,y=L;break}}if(!v||(x>0?i++:w>1&&s++,Jie(r,a,_,y,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const M=h.spacesDiff;M<=c&&d[M]++,r=_,a=y}let g=t;i!==s&&(g=i<s);let f=e;if(g){let m=g?0:.1*n;l.forEach(b=>{const _=d[b];_>m&&(m=_,f=b)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:g,tabSize:f}}u(XF,"guessIndentation");function is(o){return(o.metadata&1)>>>0}u(is,"getNodeColor");function Rt(o,e){o.metadata=o.metadata&254|e<<0}u(Rt,"setNodeColor");function mi(o){return(o.metadata&2)>>>1===1}u(mi,"getNodeIsVisited");function It(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}u(It,"setNodeIsVisited");function A8(o){return(o.metadata&4)>>>2===1}u(A8,"getNodeIsForValidation");function ZF(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}u(ZF,"setNodeIsForValidation");function Qie(o){return(o.metadata&24)>>>3}u(Qie,"getNodeStickiness");function JF(o,e){o.metadata=o.metadata&231|e<<3}u(JF,"_setNodeStickiness");function ese(o){return(o.metadata&32)>>>5===1}u(ese,"getCollapseOnReplaceEdit");function QF(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}u(QF,"setCollapseOnReplaceEdit");class VN{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Rt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,ZF(this,!1),JF(this,1),QF(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,It(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;ZF(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),JF(this,this.options.stickiness),QF(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}u(VN,"IntervalNode");const je=new VN(null,0,0);je.parent=je;je.left=je;je.right=je;Rt(je,0);class fy{constructor(){this.root=je,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===je?[]:lse(this,e,t,n,i,s)}search(e,t,n){return this.root===je?[]:ase(this,e,t,n)}collectNodesFromOwner(e){return ose(this,e)}collectNodesPostOrder(){return rse(this)}insert(e){eO(this,e),this._normalizeDeltaIfNecessary()}delete(e){tO(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,t)}acceptReplace(e,t,n,i){const s=ise(this,e,e+t);for(let r=0,a=s.length;r<a;r++){const l=s[r];tO(this,l)}this._normalizeDeltaIfNecessary(),sse(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=s.length;r<a;r++){const l=s[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,nse(l,e,e+t,n,i),l.maxEnd=l.end,eO(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,tse(this))}}u(fy,"IntervalTree");function tse(o){let e=o.root,t=0;for(;e!==je;){if(e.left!==je&&!mi(e.left)){e=e.left;continue}if(e.right!==je&&!mi(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,gd(e),It(e,!0),It(e.left,!1),It(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}It(o.root,!1)}u(tse,"normalizeDelta");function Sg(o,e,t,n){return o<t?!0:o>t||n===1?!1:n===2?!0:e}u(Sg,"adjustMarkerBeforeColumn");function nse(o,e,t,n,i){const s=Qie(o),r=s===0||s===2,a=s===1||s===2,l=t-e,c=n,d=Math.min(l,c),h=o.start;let g=!1;const f=o.end;let m=!1;e<=h&&f<=t&&ese(o)&&(o.start=e,g=!0,o.end=e,m=!0);{const _=i?1:l>0?2:0;!g&&Sg(h,r,e,_)&&(g=!0),!m&&Sg(f,a,e,_)&&(m=!0)}if(d>0&&!i){const _=l>c?2:0;!g&&Sg(h,r,e+d,_)&&(g=!0),!m&&Sg(f,a,e+d,_)&&(m=!0)}{const _=i?1:0;!g&&Sg(h,r,t,_)&&(o.start=e+c,g=!0),!m&&Sg(f,a,t,_)&&(o.end=e+c,m=!0)}const b=c-l;g||(o.start=Math.max(0,h+b)),m||(o.end=Math.max(0,f+b)),o.start>o.end&&(o.end=o.start)}u(nse,"nodeAcceptEdit");function ise(o,e,t){let n=o.root,i=0,s=0,r=0,a=0;const l=[];let c=0;for(;n!==je;){if(mi(n)){It(n.left,!1),It(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!mi(n.left)){if(s=i+n.maxEnd,s<e){It(n,!0);continue}if(n.left!==je){n=n.left;continue}}if(r=i+n.start,r>t){It(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[c++]=n),It(n,!0),n.right!==je&&!mi(n.right)){i+=n.delta,n=n.right;continue}}return It(o.root,!1),l}u(ise,"searchForEditing");function sse(o,e,t,n){let i=o.root,s=0,r=0,a=0;const l=n-(t-e);for(;i!==je;){if(mi(i)){It(i.left,!1),It(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),gd(i),i=i.parent;continue}if(!mi(i.left)){if(r=s+i.maxEnd,r<e){It(i,!0);continue}if(i.left!==je){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0),It(i,!0);continue}if(It(i,!0),i.right!==je&&!mi(i.right)){s+=i.delta,i=i.right;continue}}It(o.root,!1)}u(sse,"noOverlapReplace");function ose(o,e){let t=o.root;const n=[];let i=0;for(;t!==je;){if(mi(t)){It(t.left,!1),It(t.right,!1),t=t.parent;continue}if(t.left!==je&&!mi(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),It(t,!0),t.right!==je&&!mi(t.right)){t=t.right;continue}}return It(o.root,!1),n}u(ose,"collectNodesFromOwner");function rse(o){let e=o.root;const t=[];let n=0;for(;e!==je;){if(mi(e)){It(e.left,!1),It(e.right,!1),e=e.parent;continue}if(e.left!==je&&!mi(e.left)){e=e.left;continue}if(e.right!==je&&!mi(e.right)){e=e.right;continue}t[n++]=e,It(e,!0)}return It(o.root,!1),t}u(rse,"collectNodesPostOrder");function ase(o,e,t,n){let i=o.root,s=0,r=0,a=0;const l=[];let c=0;for(;i!==je;){if(mi(i)){It(i.left,!1),It(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(i.left!==je&&!mi(i.left)){i=i.left;continue}r=s+i.start,a=s+i.end,i.setCachedOffsets(r,a,n);let d=!0;if(e&&i.ownerId&&i.ownerId!==e&&(d=!1),t&&A8(i)&&(d=!1),d&&(l[c++]=i),It(i,!0),i.right!==je&&!mi(i.right)){s+=i.delta,i=i.right;continue}}return It(o.root,!1),l}u(ase,"search");function lse(o,e,t,n,i,s){let r=o.root,a=0,l=0,c=0,d=0;const h=[];let g=0;for(;r!==je;){if(mi(r)){It(r.left,!1),It(r.right,!1),r===r.parent.right&&(a-=r.parent.delta),r=r.parent;continue}if(!mi(r.left)){if(l=a+r.maxEnd,l<e){It(r,!0);continue}if(r.left!==je){r=r.left;continue}}if(c=a+r.start,c>t){It(r,!0);continue}if(d=a+r.end,d>=e){r.setCachedOffsets(c,d,s);let f=!0;n&&r.ownerId&&r.ownerId!==n&&(f=!1),i&&A8(r)&&(f=!1),f&&(h[g++]=r)}if(It(r,!0),r.right!==je&&!mi(r.right)){a+=r.delta,r=r.right;continue}}return It(o.root,!1),h}u(lse,"intervalSearch");function eO(o,e){if(o.root===je)return e.parent=je,e.left=je,e.right=je,Rt(e,0),o.root=e,o.root;cse(o,e),Tc(e.parent);let t=e;for(;t!==o.root&&is(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;is(n)===1?(Rt(t.parent,0),Rt(n,0),Rt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Ub(o,t)),Rt(t.parent,0),Rt(t.parent.parent,1),Gb(o,t.parent.parent))}else{const n=t.parent.parent.left;is(n)===1?(Rt(t.parent,0),Rt(n,0),Rt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Gb(o,t)),Rt(t.parent,0),Rt(t.parent.parent,1),Ub(o,t.parent.parent))}return Rt(o.root,0),e}u(eO,"rbTreeInsert");function cse(o,e){let t=0,n=o.root;const i=e.start,s=e.end;for(;;)if(use(i,s,n.start+t,n.end+t)<0)if(n.left===je){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===je){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=je,e.right=je,Rt(e,1)}u(cse,"treeInsert");function tO(o,e){let t,n;if(e.left===je?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===je?(t=e.left,n=e):(n=dse(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0)),n===o.root){o.root=t,Rt(t,0),e.detach(),Ix(),gd(t),o.root.parent=je;return}const i=is(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Rt(n,is(e)),e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==je&&(n.left.parent=n),n.right!==je&&(n.right.parent=n)),e.detach(),i){Tc(t.parent),n!==e&&(Tc(n),Tc(n.parent)),Ix();return}Tc(t),Tc(t.parent),n!==e&&(Tc(n),Tc(n.parent));let s;for(;t!==o.root&&is(t)===0;)t===t.parent.left?(s=t.parent.right,is(s)===1&&(Rt(s,0),Rt(t.parent,1),Ub(o,t.parent),s=t.parent.right),is(s.left)===0&&is(s.right)===0?(Rt(s,1),t=t.parent):(is(s.right)===0&&(Rt(s.left,0),Rt(s,1),Gb(o,s),s=t.parent.right),Rt(s,is(t.parent)),Rt(t.parent,0),Rt(s.right,0),Ub(o,t.parent),t=o.root)):(s=t.parent.left,is(s)===1&&(Rt(s,0),Rt(t.parent,1),Gb(o,t.parent),s=t.parent.left),is(s.left)===0&&is(s.right)===0?(Rt(s,1),t=t.parent):(is(s.left)===0&&(Rt(s.right,0),Rt(s,1),Ub(o,s),s=t.parent.left),Rt(s,is(t.parent)),Rt(t.parent,0),Rt(s.left,0),Gb(o,t.parent),t=o.root));Rt(t,0),Ix()}u(tO,"rbTreeDelete");function dse(o){for(;o.left!==je;)o=o.left;return o}u(dse,"leftest$1");function Ix(){je.parent=je,je.delta=0,je.start=0,je.end=0}u(Ix,"resetSentinel$1");function Ub(o,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==je&&(t.left.parent=e),t.parent=e.parent,e.parent===je?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,gd(e),gd(t)}u(Ub,"leftRotate$1");function Gb(o,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==je&&(t.right.parent=e),t.parent=e.parent,e.parent===je?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,gd(e),gd(t)}u(Gb,"rightRotate$1");function I8(o){let e=o.end;if(o.left!==je){const t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==je){const t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}u(I8,"computeMaxEnd");function gd(o){o.maxEnd=I8(o)}u(gd,"recomputeMaxEnd");function Tc(o){for(;o!==je;){const e=I8(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}u(Tc,"recomputeMaxEndWalkToRoot");function use(o,e,t,n){return o===t?e-n:o-t}u(use,"intervalCompare");class Ew{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Ne)return WN(this.right);let e=this;for(;e.parent!==Ne&&e.parent.left!==e;)e=e.parent;return e.parent===Ne?Ne:e.parent}prev(){if(this.left!==Ne)return N8(this.left);let e=this;for(;e.parent!==Ne&&e.parent.right!==e;)e=e.parent;return e.parent===Ne?Ne:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}u(Ew,"TreeNode");const Ne=new Ew(null,0);Ne.parent=Ne;Ne.left=Ne;Ne.right=Ne;Ne.color=0;function WN(o){for(;o.left!==Ne;)o=o.left;return o}u(WN,"leftest");function N8(o){for(;o.right!==Ne;)o=o.right;return o}u(N8,"righttest");function BN(o){return o===Ne?0:o.size_left+o.piece.length+BN(o.right)}u(BN,"calculateSize");function UN(o){return o===Ne?0:o.lf_left+o.piece.lineFeedCnt+UN(o.right)}u(UN,"calculateLF");function Nx(){Ne.parent=Ne}u(Nx,"resetSentinel");function zb(o,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Ne&&(t.left.parent=e),t.parent=e.parent,e.parent===Ne?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}u(zb,"leftRotate");function Kb(o,e){const t=e.left;e.left=t.right,t.right!==Ne&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Ne?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}u(Kb,"rightRotate");function cC(o,e){let t,n;if(e.left===Ne?(n=e,t=n.right):e.right===Ne?(n=e,t=n.left):(n=WN(e.right),t=n.right),n===o.root){o.root=t,t.color=0,e.detach(),Nx(),o.root.parent=Ne;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,gb(o,t)):(n.parent===e?t.parent=n:t.parent=n.parent,gb(o,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ne&&(n.left.parent=n),n.right!==Ne&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,gb(o,n)),e.detach(),t.parent.left===t){const r=BN(t),a=UN(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,al(o,t.parent,l,c)}}if(gb(o,t.parent),i){Nx();return}let s;for(;t!==o.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,zb(o,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,Kb(o,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,zb(o,t.parent),t=o.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,Kb(o,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,zb(o,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,Kb(o,t.parent),t=o.root));t.color=0,Nx()}u(cC,"rbDelete");function nO(o,e){for(gb(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,zb(o,e)),e.parent.color=0,e.parent.parent.color=1,Kb(o,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Kb(o,e)),e.parent.color=0,e.parent.parent.color=1,zb(o,e.parent.parent))}o.root.color=0}u(nO,"fixInsert");function al(o,e,t,n){for(;e!==o.root&&e!==Ne;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}u(al,"updateTreeMetadata");function gb(o,e){let t=0,n=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=BN(e.left)-e.size_left,n=UN(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==o.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}u(gb,"recomputeTreeMetadata");const tl=65535;function R8(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}u(R8,"createUintArray");class P8{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}u(P8,"LineStarts");function dl(o,e=!0){const t=[0];let n=1;for(let i=0,s=o.length;i<s;i++){const r=o.charCodeAt(i);r===13?i+1<s&&o.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:r===10&&(t[n++]=i+1)}return e?R8(t):t}u(dl,"createLineStartsFast");function hse(o,e){o.length=0,o[0]=0;let t=1,n=0,i=0,s=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,o[t++]=l+2,l++):(n++,o[t++]=l+1):d===10?(i++,o[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new P8(R8(o),n,i,s,r);return o.length=0,a}u(hse,"createLineStarts");class ns{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}u(ns,"Piece");class Ac{constructor(e,t){this.buffer=e,this.lineStarts=t}}u(Ac,"StringBuffer");class F8{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Ne&&e.iterate(e.root,n=>(n!==Ne&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}u(F8,"PieceTreeSnapshot");class O8{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}}u(O8,"PieceTreeSearchCache");class H8{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Ac("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Ne,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=dl(e[s].buffer));const a=new ns(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new O8(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=tl,n=t-Math.floor(t/3),i=n*2;let s="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=n||r+d<i)return s+=c,r+=d,!0;const h=s.replace(/\r\n|\r|\n/g,e);return a.push(new Ac(h,dl(h))),s=c,r=d,!0}),r>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new Ac(l,dl(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new F8(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Ne;)if(i.left!==Ne&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;const s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==Ne;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){const r=this.getOffsetAt(n+1,1),a=i-r;return new W(n+1,a+1)}return new W(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Ne){const s=this.getOffsetAt(n+1,1),r=i-e-s;return new W(n+1,r+1)}else t=t.right;return new W(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Ne;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Ne)return!0;const r=s.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,h=r.end.line;let g=c[d]+r.start.column;if(i&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(i=!0,n+=l.substr(g,a-1)):n+=l.substr(g,a),!0;n+=this._EOLNormalized?l.substring(g,Math.max(g,c[d+1]-this._EOLLength)):l.substring(g,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<h;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+r.end.column-1)===13?(i=!0,r.end.column===0?t--:n=l.substr(c[h],r.end.column-1)):n=l.substr(c[h],r.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,r,a,l,c,d,h){const g=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const C={line:0,column:0};let v,y;t._wordSeparators?(v=g.buffer.substring(m,b),y=u(w=>w+m,"offsetInBuffer"),t.reset(0)):(v=g.buffer,y=u(w=>w,"offsetInBuffer"),t.reset(m));do if(_=t.next(v),_){if(y(_.index)>=b)return d;this.positionInBuffer(e,y(_.index)-f,C);const w=this.getLineFeedCnt(e.piece.bufferIndex,s,C),x=C.line===s.line?C.column-s.column+i:C.column+1,M=x+_[0].length;if(h[d++]=uu(new T(n+w,x,n+w,M),_,l),y(_.index)+_[0].length>=b||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,n,i){const s=[];let r=0;const a=new yu(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,i,r,s),s;let g=e.startLineNumber,f=l.node;for(;f!==c.node;){const b=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(b>=1){const C=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=C[d.line+b],w=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,g,w,d,this.positionInBuffer(f,y-v),t,n,i,r,s),r>=i)return s;g+=b}const _=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const C=this.getLineContent(g).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,C,e.endLineNumber,_,r,s,n,i),s}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(_),g,_,r,s,n,i),r>=i)return s;g++,l=this.nodeAt2(g,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const b=g===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(g).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,b,r,s,n,i),s}const m=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,g,m,d,h,t,n,i,r,s),s}_findMatchesInLine(e,t,n,i,s,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,f=g.length,m=n.length;let b=-f;for(;(b=n.indexOf(g,b+f))!==-1;)if((!d||JI(d,n,m,b,f))&&(a[r++]=new Uf(new T(i,b+1+s,i,b+1+f+s),null),r>=c))return r;return r}let h;t.reset(0);do if(h=t.next(n),h&&(a[r++]=uu(new T(i,h.index+1+s,i,h.index+1+h[0].length+s),h,l),r>=c))return r;while(h);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Ne){const{node:i,remainder:s,nodeStartOffset:r}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,c=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<tl){this.appendToNode(i,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const d=[];let h=new ns(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){const b={line:h.start.line+1,column:0};h=new ns(h.bufferIndex,b,h.end,this.getLineFeedCnt(h.bufferIndex,b,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){const b=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,b),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,c);else this.deleteNodeTail(i,c);const g=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let f=i;for(let m=0;m<g.length;m++)f=this.rbInsertRight(f,g[m]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let s=this.rbInsertLeft(null,i[0]);for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Ne)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,r=i.node;if(s===r){const g=this.positionInBuffer(s,n.remainder),f=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const m=s.next();cC(this,s),this.validateCRLFWithPrevNode(m),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,g),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,g,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=s.next();for(let g=d;g!==Ne&&g!==r;g=g.next())a.push(g);const h=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new ns(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,al(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let s=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)s=this.rbInsertLeft(s,i[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let s=i;for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,l=r[i.start.line]+i.start.column+t;let c=i.start.line,d=i.end.line,h=0,g=0,f=0;for(;c<=d&&(h=c+(d-c)/2|0,f=r[h],h!==d);)if(g=r[h+1],l<f)d=h-1;else if(l>=g)c=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const s=i[n.line+1],r=i[n.line]+n.column;if(s>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)cC(this,e[t])}createNewPieces(e){if(e.length>tl){const d=[];for(;e.length>tl;){const g=e.charCodeAt(tl-1);let f;g===13||g>=55296&&g<=56319?(f=e.substring(0,tl-1),e=e.substring(tl-1)):(f=e.substring(0,tl),e=e.substring(tl));const m=dl(f);d.push(new ns(this._buffers.length,{line:0,column:0},{line:m.length-1,column:f.length-m[m.length-1]},m.length-1,f.length)),this._buffers.push(new Ac(f,m))}const h=dl(e);return d.push(new ns(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new Ac(e,h)),d}let t=this._buffers[0].buffer.length;const n=dl(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new ns(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,i="";const s=this._searchCache.get2(e);if(s){n=s.node;const r=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+r,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;n!==Ne;)if(n.left!==Ne&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Ne;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=r.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=r.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Ne;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(r!==s)return{index:r,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),c=l-i,d=a-s,h=n.length+d;e.piece=new ns(n.bufferIndex,n.start,r,l,h),al(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),c=a-i,d=s-l,h=n.length+d;e.piece=new ns(n.bufferIndex,r,n.end,a,h),al(this,e,d,c)}shrinkNode(e,t,n){const i=e.piece,s=i.start,r=i.end,a=i.length,l=i.lineFeedCnt,c=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,c),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new ns(i.bufferIndex,i.start,c,d,h),al(this,e,h-a,d-l);const g=new ns(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=dl(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),g=h-d;e.piece=new ns(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,al(this,e,t.length,g)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Ne;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Ne;)if(n.left!==Ne&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,r),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Ne;){if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:r}}else if(n.piece.length>=t-1){const s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Ne||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Ne||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new ns(e.piece.bufferIndex,e.piece.start,s,a,r),al(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new ns(t.piece.bufferIndex,l,t.piece.end,d,c),al(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let g=0;g<n.length;g++)cC(this,n[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)cC(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},r=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new ns(i.bufferIndex,s,i.end,a,r),al(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Ne)return t(Ne);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Ne)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new Ew(t,1);if(n.left=Ne,n.right=Ne,n.parent=Ne,n.size_left=0,n.lf_left=0,this.root===Ne)this.root=n,n.color=0;else if(e.right===Ne)e.right=n,n.parent=e;else{const s=WN(e.right);s.left=n,n.parent=s}return nO(this,n),n}rbInsertLeft(e,t){const n=new Ew(t,1);if(n.left=Ne,n.right=Ne,n.parent=Ne,n.size_left=0,n.lf_left=0,this.root===Ne)this.root=n,n.color=0;else if(e.left===Ne)e.left=n,n.parent=e;else{const i=N8(e.left);i.right=n,n.parent=i}return nO(this,n),n}}u(H8,"PieceTreeBase");class Bu extends z{constructor(e,t,n,i,s,r,a){super(),this._onDidChangeContent=this._register(new F),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new H8(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),s=this.getPositionAt(n);return new T(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return i-n+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let r=i;r<=s;r++){const a=this.getLineContent(r),l=r===i?e.startColumn-1:0,c=r===s?e.endColumn-1:a.length;for(let d=l;d<c;d++)In(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Pi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Or(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const _=e[b];a&&_._isTracked&&(a=!1);const C=_.range;if(_.text){let M=!0;r||(M=!wv(_.text),r=M),!i&&M&&(i=Vf(_.text)),!s&&M&&(s=dV(_.text))}let v="",y=0,w=0,x=0;if(_.text){let M;[y,w,x,M]=ud(_.text);const L=this.getEOL();M===0||M===(L===`\r
`?2:1)?v=_.text:v=_.text.replace(/\r\n|\r|\n/g,L)}l[b]={sortIndex:b,identifier:_.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:v,eolCount:y,firstLineLength:w,lastLineLength:x,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(Bu._sortOpsAscending);let c=!1;for(let b=0,_=l.length-1;b<_;b++){const C=l[b].range.getEndPosition(),v=l[b+1].range.getStartPosition();if(v.isBeforeOrEqual(C)){if(v.isBefore(C))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?Bu._getInverseEditRanges(l):[],h=[];if(t)for(let b=0;b<l.length;b++){const _=l[b],C=d[b];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let v=C.startLineNumber;v<=C.endLineNumber;v++){let y="";v===C.startLineNumber&&(y=this.getLineContent(_.range.startLineNumber),Pi(y)!==-1)||h.push({lineNumber:v,oldContent:y})}}let g=null;if(n){let b=0;g=[];for(let _=0;_<l.length;_++){const C=l[_],v=d[_],y=this.getValueInRange(C.range),w=C.rangeOffset+b;b+=C.text.length-y.length,g[_]={sortIndex:C.sortIndex,identifier:C.identifier,range:v,text:y,textChange:new ei(C.rangeOffset,y,w,C.text)}}c||g.sort((_,C)=>_.sortIndex-C.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let m=null;if(t&&h.length>0){h.sort((b,_)=>_.lineNumber-b.lineNumber),m=[];for(let b=0,_=h.length;b<_;b++){const C=h[b].lineNumber;if(b>0&&h[b-1].lineNumber===C)continue;const v=h[b].oldContent,y=this.getLineContent(C);y.length===0||y===v||Pi(y)!==-1||m.push(C)}}return this._onDidChangeContent.fire(),new TV(g,f,m)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new T(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,m=e.length;f<m;f++){const b=e[f],_=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new T(r,a,_.startLineNumber,_.startColumn))),b.text.length>0&&l.push(b.text),r=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,h,g]=ud(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:d,firstLineLength:h,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Bu._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=i.range.startLineNumber,r=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&r===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const c=new T(s,r,a,l);t.push({range:c,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,s=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;s?s.range.endLineNumber===l.range.startLineNumber?(c=n,d=i+(l.range.startColumn-s.range.endColumn)):(c=n+(l.range.startLineNumber-s.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const g=l.eolCount+1;g===1?h=new T(c,d,c,d+l.firstLineLength):h=new T(c,d,c+g-1,l.lastLineLength+1)}else h=new T(c,d,c,d);n=h.endLineNumber,i=h.endColumn,t.push(h),s=l}return t}static _sortOpsAscending(e,t){const n=T.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=T.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}u(Bu,"PieceTreeTextBuffer");class V8{constructor(e,t,n,i,s,r,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,r=n.length;s<r;s++){const a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=dl(a);n[s]=new Ac(a,l)}const i=new Bu(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}u(V8,"PieceTreeTextBufferFactory");class GN{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&VI(e)&&(this.BOM=XZ,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=hse(this._tmpLineStarts,e);this.chunks.push(new Ac(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Vf(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=dV(e)))}finish(e=!0){return this._finish(),new V8(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=dl(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}u(GN,"PieceTreeTextBufferBuilder");class W8{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const i=this._store.slice(0,e),s=this._store.slice(e+t),r=gse(n,this._default);this._store=i.concat(r,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=P1(this._store,e,n)}}u(W8,"FixedArray");function gse(o,e){const t=[];for(let n=0;n<o;n++)t[n]=e;return t}u(gse,"arrayFill");class B8{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}u(B8,"ContiguousMultilineTokens");class kw{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new B8(e,[t]))}finalize(){return this._tokens}}u(kw,"ContiguousMultilineTokensBuilder");class U8{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Dw(e)}getStartState(e){return e===1?this.initialState:this.store.getEndState(e-1)}}u(U8,"TokenizerWithStateStore");class G8 extends U8{constructor(e,t,n,i){super(e,t),this._textModel=n,this._languageIdCodec=i}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const i=this.store.getFirstInvalidEndStateLineNumber();if(!i||i>t)break;const s=this._textModel.getLineContent(i),r=this.getStartState(i),a=Nm(this._languageIdCodec,n,this.tokenizationSupport,s,!0,r);e.add(i,a.tokens),this.store.setEndState(i,a.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=Nm(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n),l=new En(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,s=e.column,r=this.getStartState(i);if(!r)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,s-1)+n+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(i,0),d=Nm(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new En(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let i=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=n;r++){const a=this._textModel.getLineContent(r),l=Nm(this._languageIdCodec,s,this.tokenizationSupport,a,!0,i);e.add(r,l.tokens),i=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let i=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,i=this.getStartState(a),i))break}i||(i=this.tokenizationSupport.getInitialState()),n.reverse();const s=this._textModel.getLanguageId();let r=i;for(const a of n)r=Nm(this._languageIdCodec,s,this.tokenizationSupport,a,!1,r).endState;return r}}u(G8,"TokenizerWithStateStoreAndTextModel");class Dw{constructor(e){this.lineCount=e,this.tokenizationStateStore=new z8,this._invalidEndStatesLineNumbers=new K8,this._invalidEndStatesLineNumbers.addRange(new Xt(1,e+1))}getEndState(e){return this.tokenizationStateStore.getEndState(e)}setEndState(e,t){for(;;){const i=this._invalidEndStatesLineNumbers.min;if(i!==null&&i<=e)this._invalidEndStatesLineNumbers.removeMin();else break}const n=this.tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Xt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this.tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Xt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=ud(t.text);this.acceptChange(new bo(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Xt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this._invalidEndStatesLineNumbers.min||Number.MAX_SAFE_INTEGER}isTokenizationComplete(){return this._invalidEndStatesLineNumbers.min===null}}u(Dw,"TrackingTokenizationStateStore");class z8{constructor(){this._lineEndStates=new W8(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}u(z8,"TokenizationStateStore");class K8{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;const e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new Xt(e.start+1,e.endExclusive),e.start}addRange(e){Xt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;const s=t-e.length;for(let r=i;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(n===i){const r=new Xt(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{const r=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new Xt(r,a+s);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}u(K8,"RangePriorityQueueImpl");function Nm(o,e,t,n,i,s){let r=null;if(t)try{r=t.tokenizeEncoded(n,i,s.clone())}catch(a){He(a)}return r||(r=J1(o.encodeLanguageId(e),s)),En.convertToEndOffset(r.tokens,n.length),r}u(Nm,"safeTokenize");class j8{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Tl(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=u(()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?BH(n):this._beginBackgroundTokenization())},"execute");n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new kw,n=ji.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.isTokenizationComplete():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizerWithStateStore||!this._hasLinesToTokenize())return this._tokenizerWithStateStore._textModel.getLineCount()+1;const t=this._tokenizerWithStateStore.store.getFirstInvalidEndStateLineNumber();return this._tokenizerWithStateStore.updateTokensUntilLine(e,t),t}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.isTokenizationComplete()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new bo(e,t))}}u(j8,"DefaultBackgroundTokenizer");const ul=new Uint32Array(0).buffer;class mr{static deleteBeginning(e,t){return e===null||e===ul?e:mr.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===ul)return e;const n=Cl(e),i=n[n.length-2];return mr.delete(e,t,i)}static delete(e,t,n){if(e===null||e===ul||t===n)return e;const i=Cl(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return ul;const r=En.findIndexInTokensArray(i,t),a=r>0?i[r-1<<1]:0,l=i[r<<1];if(n<l){const f=n-t;for(let m=r;m<s;m++)i[m<<1]-=f;return e}let c,d;a!==t?(i[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const h=n-t;for(let f=r+1;f<s;f++){const m=i[f<<1]-h;m>d&&(i[c++]=m,i[c++]=i[(f<<1)+1],d=m)}if(c===i.length)return e;const g=new Uint32Array(c);return g.set(i.subarray(0,c),0),g.buffer}static append(e,t){if(t===ul)return e;if(e===ul)return t;if(e===null)return e;if(t===null)return null;const n=Cl(e),i=Cl(t),s=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<s;c++)r[a++]=i[c<<1]+l,r[a++]=i[(c<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===ul)return e;const i=Cl(e),s=i.length>>>1;let r=En.findIndexInTokensArray(i,t);r>0&&i[r-1<<1]===t&&r--;for(let a=r;a<s;a++)i[a<<1]+=n;return e}}u(mr,"ContiguousTokensEditing");function Cl(o){return o instanceof Uint32Array?o:new Uint32Array(o)}u(Cl,"toUint32Array");class dp{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==ul)return new En(Cl(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=iO(this._languageIdCodec.encodeLanguageId(e)),new En(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?Cl(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=ni.getLanguageId(i[1])!==e),!s)return ul}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=iO(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=P1(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=dp._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,s?!dp._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Cl(e),i=Cl(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=mr.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=mr.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=mr.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=mr.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=mr.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=mr.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=mr.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}u(dp,"ContiguousTokensStore");function iO(o){return(o<<0|0<<8|0<<11|1<<15|2<<24|1024)>>>0}u(iO,"getDefaultMetadata");class AS{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),r=t[t.length-1].getRange();if(!s||!r)return e;n=e.plusRange(s).plusRange(r)}let i=null;for(let s=0,r=this._pieces.length;s<r;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,c]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,r++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=P1(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const i=AS._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const r=t.getCount(),a=s.getCount();let l=0;const c=[];let d=0,h=0;const g=u((f,m)=>{f!==h&&(h=f,c[d++]=f,c[d++]=m)},"emitToken");for(let f=0;f<a;f++){const m=s.getStartCharacter(f),b=s.getEndCharacter(f),_=s.getMetadata(f),C=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,v=~C>>>0;for(;l<r&&t.getEndOffset(l)<=m;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<m&&g(m,t.getMetadata(l));l<r&&t.getEndOffset(l)<b;)g(t.getEndOffset(l),t.getMetadata(l)&v|_&C),l++;if(l<r)g(b,t.getMetadata(l)&v|_&C),t.getEndOffset(l)===b&&l++;else{const y=Math.min(Math.max(0,l-1),r-1);g(b,t.getMetadata(y)&v|_&C)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new En(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}}u(AS,"SparseTokensStore");class A_ extends AN{constructor(e,t,n,i,s,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this._bracketPairsTextModelPart=i,this._languageId=s,this._attachedViews=r,this._semanticTokens=new AS(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new F),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new F),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new F),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new $8(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,i,s]=ud(t.text);this._semanticTokens.acceptEdit(t.range,n,i,s,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Xr("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this.grammarTokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this.getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,a]=A_._findLanguageBoundaries(i,s),l=i_(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&r===t.column-1){const[c,d]=A_._findLanguageBoundaries(i,s-1),h=i_(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new W(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}}u(A_,"TokenizationTextModelPart");class $8 extends z{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Fn),this._tokens=new dp(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Fn),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new F),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new F),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new O1),this._register(Yt.onDidChange(s=>{const r=this.getLanguageId();s.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:s,state:r})=>{if(r){let a=this._attachedViewStates.get(s);a||(a=new q8(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Dw(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const n=u(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=Yt.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return He(l),[null,null]}return[r,a]},"initializeTokenization"),[i,s]=n();if(i&&s?this._tokenizer=new G8(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var c,d,h;if(!l)throw new Xr;const g=(d=(c=this._tokenizer)===null||c===void 0?void 0:c.store.getFirstInvalidEndStateLineNumber())!==null&&d!==void 0?d:void 0;g!==void 0&&a>=g&&((h=this._tokenizer)===null||h===void 0||h.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),this._backgroundTokenizer.value||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new j8(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i?.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new dp(this._languageIdCodec),this._debugBackgroundStates=new Dw(this._textModel.getLineCount()),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)===null||c===void 0||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,n,i;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[r,a]=ud(s.text);this._tokens.acceptEdit(s.range,r,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(s.range,r,a)}(n=this._debugBackgroundStates)===null||n===void 0||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=bo.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var n,i;if(!this._tokenizer)return;e=Math.max(1,e),t=Math.min(this._textModel.getLineCount(),t);const s=new kw,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(s,e,t),a=this.setTokens(s.finalize());if(r)for(const l of a.changes)(n=this._backgroundTokenizer.value)===null||n===void 0||n.requestTokens(l.fromLineNumber,l.toLineNumber+1);(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()}forceTokenization(e){var t,n;const i=new kw;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(i,e),this.setTokens(i.finalize()),(n=this._defaultBackgroundTokenizer)===null||n===void 0||n.checkFinished()}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const n=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,n);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,n);!i.equals(s)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const i=this._textModel.validatePosition(new W(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const i=this._textModel.validatePosition(e);return this.forceTokenization(i.lineNumber),this._tokenizer.tokenizeLineWithEdit(i,t,n)}get hasTokens(){return this._tokens.hasTokens}}u($8,"GrammarTokens");class q8 extends z{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new yt(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){pi(this._computedLineRanges,this._lineRanges)||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}u(q8,"AttachedViewHandler");class Y8{constructor(){this.changeType=1}}u(Y8,"ModelRawFlush");class sr{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new sr(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new sr(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}}u(sr,"LineInjectedText");class Zk{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}u(Zk,"ModelRawLineChanged");class X8{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}u(X8,"ModelRawLinesDeleted");class Z8{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}u(Z8,"ModelRawLinesInserted");class J8{constructor(){this.changeType=5}}u(J8,"ModelRawEOLChanged");class Uu{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new Uu(n,i,s,r)}}u(Uu,"ModelRawContentChangedEvent");class zN{constructor(e){this.changes=e}}u(zN,"ModelInjectedTextChangedEvent");class Jc{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Uu.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Jc._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Jc(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:c,versionId:s,isUndoing:r,isRedoing:a,isFlush:l}}}u(Jc,"InternalModelContentChangeEvent");const IS=nt("undoRedoService");class KN{constructor(e,t){this.resource=e,this.elements=t}}u(KN,"ResourceEditStackSnapshot");class ph{constructor(){this.id=ph._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}u(ph,"UndoRedoGroup");ph._ID=0;ph.None=new ph;class xr{constructor(){this.id=xr._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}u(xr,"UndoRedoSource");xr._ID=0;xr.None=new xr;var fse=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Rx=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function pse(o){const e=new GN;return e.acceptChunk(o),e.finish()}u(pse,"createTextBufferFactory");function mse(o){const e=new GN;let t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}u(mse,"createTextBufferFactoryFromSnapshot");function sO(o,e){let t;return typeof o=="string"?t=pse(o):SJ(o)?t=mse(o):t=o,t.create(e)}u(sO,"createTextBuffer");let dC=0;const bse=999,_se=1e4;class Q8{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}u(Q8,"TextModelSnapshot");const Rm=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc");let $l=u(class fb extends z{static resolveOptions(e,t){if(t.detectIndentation){const n=XF(e,t.tabSize,t.insertSpaces);return new Pb({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Pb(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Jo(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,i=null,s,r,a){super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new F),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new nW(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new F),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new F),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new F),this._eventEmitter=this._register(new iW),this._languageSelectionListener=this._register(new Fn),this._deltaDecorationCallCnt=0,this._attachedViews=new sW,dC++,this.id="$model"+dC,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=ve.parse("inmemory://model/"+dC):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=sO(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=fb.resolveOptions(this._buffer,n);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new T8(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new H9(this,this._languageConfigurationService)),this._decorationProvider=this._register(new x8(this)),this._tokenizationTextModelPart=new A_(this._languageService,this._languageConfigurationService,this,this._bracketPairs,d,this._attachedViews);const h=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new T(1,1,h,this._buffer.getLineLength(h)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=g>fb.LARGE_FILE_SIZE_THRESHOLD||h>fb.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=g>fb._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=uV(dC),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Jk,this._commandManager=new MS(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Bu([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=z.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Jc(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw Ys();const{textBuffer:t,disposable:n}=sO(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Jk,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Uu([new Y8],this._versionId,!1,!1),this._createContentChanged2(new T(1,1,s,r),0,i,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Uu([new J8],this._versionId,!1,!1),this._createContentChanged2(new T(1,1,s,r),0,i,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],r=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,gd(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=_se?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Pb({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=XF(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),yw(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(cV.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new Q8(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const h=this.getLineMaxColumn(s);r>=h&&(r=h)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const h=this.getLineMaxColumn(c);d>=h&&(d=h)}return n===s&&i===r&&a===c&&l===d&&e instanceof T&&!(e instanceof ge)?e:new T(s,r,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const r=this._buffer.getLineCharCode(e,t-2);if(In(r))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(i<1)return new W(1,1);if(i>r)return new W(r,this.getLineMaxColumn(r));if(s<=1)return new W(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new W(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(In(l))return new W(i,s-1)}return new W(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof W&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,r,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,c=In(a),d=In(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof T&&!(e instanceof ge)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;{const c=r>1?this._buffer.getLineCharCode(s,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=In(c),g=In(d);return!h&&!g?new T(s,r,a,l):s===a&&r===l?new T(s,r-1,a,l-1):h&&g?new T(s,r-1,a,l+1):h?new T(s,r-1,a,l):new T(s,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new T(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r,a=bse){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>T.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,g)=>h.startLineNumber-g.startLineNumber||h.startColumn-g.startColumn);const c=[];c.push(l.reduce((h,g)=>T.areIntersecting(h,g)?h.plusRange(g):(c.push(h),g)));let d;if(!n&&e.indexOf(`
`)<0){const g=new Lc(e,n,i,s).parseSearchRequest();if(!g)return[];d=u(f=>this.findMatchesLineByLine(f,g,r,a),"matchMapper")}else d=u(h=>Jm.findMatches(this,new Lc(e,n,i,s),h,r,a),"matchMapper");return c.map(d).reduce((h,g)=>h.concat(g),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new Lc(e,n,i,s).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let h=new T(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),g=this.findMatchesLineByLine(h,c,r,1);return Jm.findNextMatch(this,new Lc(e,n,i,s),a,r),g.length>0||(h=new T(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(h,c,r,1),g.length>0)?g[0]:null}return Jm.findNextMatch(this,new Lc(e,n,i,s),a,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);return Jm.findPreviousMatch(this,new Lc(e,n,i,s),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof QC?e:new QC(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let h=0,g=s.length;h<g;h++){const f=s[h].range,m=f.startLineNumber>c.endLineNumber,b=c.startLineNumber>f.endLineNumber;if(!m&&!b){d=!0;break}}if(!d){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let h=!0;for(let g=0,f=s.length;g<f;g++){const m=s[g].range,b=s[g].text;if(!(c<m.startLineNumber||c>m.endLineNumber)&&!(c===m.startLineNumber&&m.startColumn===d&&m.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(c===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){h=!1;break}}if(h){const g=new T(c,1,c,d);t.push(new QC(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,i)}_applyUndo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new T(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new T(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const h=r[c];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,d=r.length;c<d;c++){const h=r[c],[g]=ud(h.text);this._onDidChangeDecorations.fire();const f=h.range.startLineNumber,m=h.range.endLineNumber,b=m-f,_=g,C=Math.min(b,_),v=_-b,y=s-l-v+f,w=y,x=y+_,M=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new W(w,1)),this.getOffsetAt(new W(x,this.getLineMaxColumn(x))),0),L=sr.fromDecorations(M),E=new th(L);for(let k=C;k>=0;k--){const O=f+k,P=y+k;E.takeFromEndWhile(G=>G.lineNumber>P);const H=E.takeFromEndWhile(G=>G.lineNumber===P);a.push(new Zk(O,this.getLineContent(P),H))}if(C<b){const k=f+C;a.push(new X8(k+1,m))}if(C<_){const k=new th(L),O=f+C,P=_-C,H=s-l-P+O+1,G=[],se=[];for(let fe=0;fe<P;fe++){const Le=H+fe;se[fe]=this.getLineContent(Le),k.takeWhile(Fe=>Fe.lineNumber<Le),G[fe]=k.takeWhile(Fe=>Fe.lineNumber===Le)}a.push(new Z8(O+1,f+_,se,G))}l+=v}this._emitContentChangedEvent(new Uu(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(i=>new Zk(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new zN(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(s,r)=>this._deltaDecorationsImpl(e,[],[{range:s,options:r}])[0],changeDecoration:(s,r)=>{this._changeDecorationImpl(s,r)},changeDecorationOptions:(s,r)=>{this._changeDecorationOptionsImpl(s,rO(r))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,r)=>s.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,s,r)};let i=null;try{i=t(n)}catch(s){He(s)}return n.addDecoration=Rm,n.changeDecoration=Rm,n.changeDecorationOptions=Rm,n.removeDecoration=Rm,n.deltaDecorations=Rm,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),He(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:oO[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,a,s),i.setOptions(oO[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){const s=this.getLineCount(),r=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new T(r,1,a,l),d=this._getDecorationsInRange(c,n,i);return wP(d,this._decorationProvider.getDecorationsInRange(c,n,i)),d}getDecorationsInRange(e,t=0,n=!1,i=!1){const s=this.validateRange(e),r=this._getDecorationsInRange(s,t,n);return wP(r,this._decorationProvider.getDecorationsInRange(s,t,n,i)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return sr.fromDecorations(i).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,s,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(n.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let r=0;const a=n.length;let l=0;this._onDidChangeDecorations.beginDeferredEmit();try{const c=new Array(a);for(;r<s||l<a;){let d=null;if(r<s){do d=this._decorations[t[r++]];while(!d&&r<s);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const _=++this._lastDecorationId,C=`${this._instanceId};${_}`;d=new VN(C,0,0),this._decorations[C]=d}const h=n[l],g=this._validateRangeRelaxedNoAllocations(h.range),f=rO(h.options),m=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),b=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);d.ownerId=e,d.reset(i,m,b,g),d.setOptions(f),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return vse(this.getLineContent(e))+1}},"TextModel");$l._MODEL_SYNC_LIMIT=50*1024*1024;$l.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;$l.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;$l.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:xi.tabSize,indentSize:xi.indentSize,insertSpaces:xi.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:xi.trimAutoWhitespace,largeFileOptimizations:xi.largeFileOptimizations,bracketPairColorizationOptions:xi.bracketPairColorizationOptions};$l=fse([Rx(4,IS),Rx(5,Wt),Rx(6,zt)],$l);function vse(o){let e=0;for(const t of o)if(t===" "||t==="	")e++;else break;return e}u(vse,"indentOfLine");function Px(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}u(Px,"isNodeInOverviewRuler");function Fx(o){return!!o.options.after||!!o.options.before}u(Fx,"isNodeInjectedText");class Jk{constructor(){this._decorationsTree0=new fy,this._decorationsTree1=new fy,this._injectedTextDecorationsTree=new fy}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s){const r=e.getVersionId(),a=this._intervalSearch(t,n,i,s,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,s){const r=this._decorationsTree0.intervalSearch(e,t,n,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,i,s),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s);return r.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,i){const s=e.getVersionId(),r=this._search(t,n,i,s);return this._ensureNodesHaveRanges(e,r)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const s=this._decorationsTree0.search(e,t,i),r=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return s.concat(r).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){Fx(e)?this._injectedTextDecorationsTree.insert(e):Px(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Fx(e)?this._injectedTextDecorationsTree.delete(e):Px(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Fx(e)?this._injectedTextDecorationsTree.resolveNode(e,t):Px(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}u(Jk,"DecorationsTrees");function nl(o){return o.replace(/[^a-z0-9\-_]/gi," ")}u(nl,"cleanClassName");class jN{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}u(jN,"DecorationOptions");class eW extends jN{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Qs.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}u(eW,"ModelDecorationOverviewRulerOptions");class tW extends jN{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?U.fromHex(e):t.getColor(e.id)}}u(tW,"ModelDecorationMinimapOptions");class ql{static from(e){return e instanceof ql?e:new ql(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}u(ql,"ModelDecorationInjectedTextOptions");class Pe{static register(e){return new Pe(e)}static createDynamic(e){return new Pe(e)}constructor(e){var t,n,i,s,r;this.description=e.description,this.blockClassName=e.blockClassName?nl(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(n=e.blockIsAfterEnd)!==null&&n!==void 0?n:null,this.blockPadding=(i=e.blockPadding)!==null&&i!==void 0?i:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?nl(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new eW(e.overviewRuler):null,this.minimap=e.minimap?new tW(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?nl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?nl(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?nl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?nl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?nl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?nl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?nl(e.afterContentClassName):null,this.after=e.after?ql.from(e.after):null,this.before=e.before?ql.from(e.before):null,this.hideInCommentTokens=(s=e.hideInCommentTokens)!==null&&s!==void 0?s:!1,this.hideInStringTokens=(r=e.hideInStringTokens)!==null&&r!==void 0?r:!1}}u(Pe,"ModelDecorationOptions");Pe.EMPTY=Pe.register({description:"empty"});const oO=[Pe.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Pe.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Pe.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Pe.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function rO(o){return o instanceof Pe?o:Pe.createDynamic(o)}u(rO,"_normalizeOptions");class nW extends z{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new F),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}}u(nW,"DidChangeDecorationsEmitter");class iW extends z{constructor(){super(),this._fastEmitter=this._register(new F),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new F),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}u(iW,"DidChangeContentEmitter");class sW{constructor(){this._onDidChangeVisibleRanges=new F,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new oW(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}u(sW,"AttachedViews");class oW{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(i=>new bo(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}u(oW,"AttachedViewImpl");class I_{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new zn(new T(1,1,1,1),0,0,new W(1,1),0),new zn(new T(1,1,1,1),0,0,new W(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new it(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?ge.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):ge.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),l=this._validatePositionWithCache(e,s,i,a);return n.equals(r)&&i.equals(a)&&s.equals(l)?t:new zn(T.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=I_._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new zn(i,t.selectionStartKind,s,r,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new zn(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new zn(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new T(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new zn(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}u(I_,"Cursor");class Qk{constructor(e){this.context=e,this.cursors=[new I_(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return QX(this.cursors,Ab(e=>e.viewState.position,W.compare)).viewState.position}getBottomMostViewPosition(){return JX(this.cursors,Ab(e=>e.viewState.position,W.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(it.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new I_(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(Ab(n=>n.selection,T.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],r=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=i.index<s.index?n:n+1,d=i.index<s.index?n+1:n,h=t[d].index,g=t[c].index,f=t[d].selection,m=t[c].selection;if(!f.equalsSelection(m)){const b=f.plusRange(m),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,C=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn;let v;h===this.lastAddedCursorIndex?(v=_,this.lastAddedCursorIndex=g):v=C;let y;v?y=new ge(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):y=new ge(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[c].selection=y;const w=it.fromModelSelection(y);e[g].setState(this.context,w.modelState,w.viewState)}for(const b of t)b.index>h&&b.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}u(Qk,"CursorCollection");class eD{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}u(eD,"CursorContext");class rW{constructor(){this.type=0}}u(rW,"ViewCompositionStartEvent");class aW{constructor(){this.type=1}}u(aW,"ViewCompositionEndEvent");class lW{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}u(lW,"ViewConfigurationChangedEvent");class cW{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}u(cW,"ViewCursorStateChangedEvent");class su{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}u(su,"ViewDecorationsChangedEvent");class pb{constructor(){this.type=5}}u(pb,"ViewFlushedEvent");class dW{constructor(e){this.type=6,this.isFocused=e}}u(dW,"ViewFocusChangedEvent");class uW{constructor(){this.type=7}}u(uW,"ViewLanguageConfigurationEvent");class mb{constructor(){this.type=8}}u(mb,"ViewLineMappingChangedEvent");class $N{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}u($N,"ViewLinesChangedEvent");class Mw{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}u(Mw,"ViewLinesDeletedEvent");class Aw{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}u(Aw,"ViewLinesInsertedEvent");class jb{constructor(e,t,n,i,s,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=r,this.scrollType=a,this.type=12}}u(jb,"ViewRevealRangeRequestEvent");class hW{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}u(hW,"ViewScrollChangedEvent");class gW{constructor(e){this.theme=e,this.type=14}}u(gW,"ViewThemeChangedEvent");class fW{constructor(e){this.type=15,this.ranges=e}}u(fW,"ViewTokensChangedEvent");class pW{constructor(){this.type=16}}u(pW,"ViewTokensColorsChangedEvent");let Cse=u(class{constructor(){this.type=17}},"ViewZonesChangedEvent");class mW extends z{constructor(){super(),this._onEvent=this._register(new F),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new bW),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}u(mW,"ViewModelEventDispatcher");class bW{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}u(bW,"ViewModelEventsCollector");class NS{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new NS(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}u(NS,"ContentSizeChangedEvent");class RS{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new RS(this.oldHasFocus,e.hasFocus)}}u(RS,"FocusChangedEvent");class PS{constructor(e,t,n,i,s,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new PS(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}u(PS,"ScrollChangedEvent");class _W{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(_W,"ViewZonesChangedEvent");class vW{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(vW,"HiddenAreasChangedEvent");class N_{constructor(e,t,n,i,s,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return N_._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new N_(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}u(N_,"CursorStateChangedEvent");class CW{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}u(CW,"ReadOnlyEditAttemptEvent");class yW{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}u(yW,"ModelDecorationsChangedEvent");class wW{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}u(wW,"ModelLanguageChangedEvent");class SW{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}u(SW,"ModelLanguageConfigurationChangedEvent");class TW{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}u(TW,"ModelContentChangedEvent");class xW{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}u(xW,"ModelOptionsChangedEvent");class LW{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}u(LW,"ModelTokensChangedEvent");class EW extends z{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new eD(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new Qk(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=mt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new eD(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;i!==null&&i.length>r&&(i=i.slice(0,r),s=!0);const a=Ef.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,s,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=T.fromPositions(a[0],a[0]),e.emitViewEvent(new jb(t,n,l,c,i,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,it.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof zN){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new Qk(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const s=it.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,it.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,it.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new tD(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=kW.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let s=0;s<e.commands.length;s++){const r=e.commands[s];r instanceof LN&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),i.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const r=Ef.from(this._model,this);if(r.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new cW(l,a,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(i.cursorState[d].modelState))){const c=i?i.cursorState.map(h=>h.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new N_(c,a,d,r.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const r=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=s.text.length-r[2].length-1,h=s.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(s)for(let h=0,g=s.length;h<g;h++){const[f,m]=s[h],b=c[h],_=b.range.startLineNumber,C=b.range.startColumn-1+f,v=b.range.startColumn-1+m;r.push(new T(_,v+1,_,v+2)),a.push(new T(_,C+1,_,v+2))}const d=i(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=Ef.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){He(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return tD.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new kf(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Bt.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const r=OI(t,s),a=t.substr(s,r);this._executeEditOperation(Bt.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=r}}else this._executeEditOperation(Bt.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,r){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new ge(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Bt.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,r)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(Bt.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(dd.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Oi(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Oi(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}u(EW,"CursorsController");class Ef{static from(e,t){return new Ef(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}u(Ef,"CursorModelState");class tD{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(T.compareRangesUsingStarts),e.sort(T.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}u(tD,"AutoClosedAction");class kW{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let r=0,a=i.trackedRanges.length;r<a;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=i.length;c<d;c++)s.hasOwnProperty(i[c].identifier.major.toString())||r.push(i[c]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const h=u((f,m)=>f.identifier.minor-m.identifier.minor,"minorBasedSorter"),g=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(h),g[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:m=>{const b=parseInt(m,10),_=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new ge(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new ge(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):g[f]=e.selectionsBefore[f];return g});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let s=0;const r=u((h,g,f=!1)=>{T.isEmpty(h)&&g===""||i.push({identifier:{major:t,minor:s++},range:h,text:g,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},"addEditOperation");let a=!1;const d={addEditOperation:r,addTrackedEditOperation:u((h,g,f)=>{a=!0,r(h,g,f)},"addTrackedEditOperation"),trackSelection:u((h,g)=>{const f=ge.liftSelection(h);let m;if(f.isEmpty())if(typeof g=="boolean")g?m=2:m=3;else{const C=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===C?m=2:m=3}else m=1;const b=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,m);return e.trackedRanges[b]=_,e.trackedRangesDirection[b]=f.getDirection(),b.toString()},"trackSelection")};try{n.getEditOperations(e.model,d)}catch(h){return He(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-T.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(T.getStartPosition(i.range).isBefore(T.getEndPosition(s.range))){let r;i.identifier.major>s.identifier.major?r=i.identifier.major:r=s.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}u(kW,"CommandExecutor");class DW{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}u(DW,"CompositionLineState");class kf{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new DW(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=kf._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=kf._capture(e,t);if(!n||this._original.length!==n.length)return null;const i=[];for(let s=0,r=this._original.length;s<r;s++)i.push(kf._deduceOutcome(this._original[s],n[s]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,oh(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,c_(e.text,t.text)),s=e.text.substring(n,e.text.length-i),r=t.text.substring(n,t.text.length-i);return new L9(s,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}}u(kf,"CompositionState");var yse=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const aO={getInitialState:()=>zf,tokenizeEncoded:(o,e,t)=>J1(0,t)};function wse(o,e,t){return yse(this,void 0,void 0,function*(){if(!t)return lO(e,o.languageIdCodec,aO);const n=yield Yt.getOrCreate(t);return lO(e,o.languageIdCodec,n||aO)})}u(wse,"tokenizeToString");function Sse(o,e,t,n,i,s,r){let a="<div>",l=n,c=0,d=!0;for(let h=0,g=e.getCount();h<g;h++){const f=e.getEndOffset(h);if(f<=n)continue;let m="";for(;l<f&&l<i;l++){const b=o.charCodeAt(l);switch(b){case 9:{let _=s-(l+c)%s;for(c+=_-1;_>0;)r&&d?(m+="&#160;",d=!1):(m+=" ",d=!0),_--;break}case 60:m+="&lt;",d=!1;break;case 62:m+="&gt;",d=!1;break;case 38:m+="&amp;",d=!1;break;case 0:m+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:m+="�",d=!1;break;case 13:m+="&#8203",d=!1;break;case 32:r&&d?(m+="&#160;",d=!1):(m+=" ",d=!0);break;default:m+=String.fromCharCode(b),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${m}</span>`,f>i||l>=i)break}return a+="</div>",a}u(Sse,"tokenizeLineToHTML");function lO(o,e,t){let n='<div class="monaco-tokenized-source">';const i=Va(o);let s=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r];r>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,s);En.convertToEndOffset(c.tokens,l.length);const h=new En(c.tokens,l,e).inflate();let g=0;for(let f=0,m=h.getCount();f<m;f++){const b=h.getClassName(f),_=h.getEndOffset(f);n+=`<span class="${b}">${sw(l.substring(g,_))}</span>`,g=_}s=c.endState}return n+="</div>",n}u(lO,"_tokenizeToString");class MW{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}u(MW,"PendingChanges");class AW{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}u(AW,"EditorWhitespace");class up{constructor(e,t,n,i){this._instanceId=uV(++up.INSTANCE_COUNT),this._pendingChanges=new MW,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const r=i+s>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?s=r:i=r+1:t<e[r].afterLineNumber?s=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,r,a)=>{t=!0,i=i|0,s=s|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new AW(l,i,s,r,a)),l},changeOneWhitespace:(i,s,r)=>{t=!0,s=s|0,r=r|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:r})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const r=u(l=>{const c=[];for(const d of l)if(!i.has(d.id)){if(s.has(d.id)){const h=s.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},"applyRemoveAndChange"),a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=up.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const r=(i-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const r=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)i=r+1;else{if(e>=a)return r;s=r}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=s,g=h;const f=5e5;let m=0;s>=f&&(m=Math.floor(s/f)*f,m=Math.floor(m/n)*n,g-=m);const b=[],_=e+(t-e)/2;let C=-1;for(let x=i;x<=r;x++){if(C===-1){const M=h,L=h+n;(M<=_&&_<L||M>_)&&(C=x)}for(h+=n,b[x-i]=g,g+=n;d===x;)g+=c,h+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){r=x;break}}C===-1&&(C=r);const v=this.getVerticalOffsetForLineNumber(r)|0;let y=i,w=r;return y<w&&s<e&&y++,y<w&&v+n>t&&w--,{bigNumbersDelta:m,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:C,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:w}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:r,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let r=n;r<=i;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}u(up,"LinesLayout");up.INSTANCE_COUNT=0;const Tse=125;class nf{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}u(nf,"EditorScrollDimensions");class IW extends z{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new F),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new nf(0,0,0,0),this._scrollable=this._register(new Qp({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new NS(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}u(IW,"EditorScrollable");class NW extends z{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(139),r=i.get(81);this._linesLayout=new up(t,i.get(64),r.top,r.bottom),this._scrollable=this._register(new IW(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new nf(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(109)?Tse:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(64)&&this._linesLayout.setLineHeight(t.get(64)),e.hasChanged(81)){const n=t.get(81);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(139)){const n=t.get(139),i=n.contentWidth,s=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new nf(i,r.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(109)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(98);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(100)?s+=Math.max(0,t-i.get(64)-i.get(81).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new nf(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new mk(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new mk(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(140),i=t.get(48),s=t.get(139);if(n.isViewportWrapping){const r=t.get(70);return e>s.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?e+s.verticalScrollbarWidth:e}else{const r=t.get(99)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r+s.verticalScrollbarWidth,a)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new nf(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}u(NW,"ViewLayout");class RW{constructor(e,t,n,i,s){this._cachedOnlyMinimapDecorations=null,this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let r;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new T(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new sN(r,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e,t=!1){let n=this._cachedModelDecorationsResolver!==null;return n=n&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),n=n&&this._cachedOnlyMinimapDecorations===t,n||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,t),this._cachedModelDecorationsResolverViewRange=e,this._cachedOnlyMinimapDecorations=t),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1){const n=new T(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t).inlineDecorations[0]}_getDecorationsInRange(e,t){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,Jy(this.configuration.options),t),i=e.startLineNumber,s=e.endLineNumber,r=[];let a=0;const l=[];for(let c=i;c<=s;c++)l[c-i]=[];for(let c=0,d=n.length;c<d;c++){const h=n[c],g=h.options;if(!qN(this.model,h))continue;const f=this._getOrCreateViewModelDecoration(h),m=f.range;if(r[a++]=f,g.inlineClassName){const b=new mf(m,g.inlineClassName,g.inlineClassNameAffectsLetterSpacing?3:0),_=Math.max(i,m.startLineNumber),C=Math.min(s,m.endLineNumber);for(let v=_;v<=C;v++)l[v-i].push(b)}if(g.beforeContentClassName&&i<=m.startLineNumber&&m.startLineNumber<=s){const b=new mf(new T(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),g.beforeContentClassName,1);l[m.startLineNumber-i].push(b)}if(g.afterContentClassName&&i<=m.endLineNumber&&m.endLineNumber<=s){const b=new mf(new T(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),g.afterContentClassName,2);l[m.endLineNumber-i].push(b)}}return{decorations:r,inlineDecorations:l}}}u(RW,"ViewModelDecorations");function qN(o,e){return!(e.options.hideInCommentTokens&&YN(o,e)||e.options.hideInStringTokens&&XN(o,e))}u(qN,"isModelDecorationVisible");function YN(o,e){return PW(o,e.range,t=>t===1)}u(YN,"isModelDecorationInComment");function XN(o,e){return PW(o,e.range,t=>t===2)}u(XN,"isModelDecorationInString");function PW(o,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=o.tokenization.getLineTokens(n),s=n===e.startLineNumber,r=n===e.endLineNumber;let a=s?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(r&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}u(PW,"testTokensInRange");function Ox(o,e){return o===null?e?R_.INSTANCE:P_.INSTANCE:new FW(o,e)}u(Ox,"createModelLineProjection");class FW{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new sr(0,0,c+1,this._projectionData.injectionOptions[d],0));r=sr.applyInjectedText(e.getLineContent(t),a).substring(i,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(r=cO(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let h=null;if(c){h=[];let f=0,m=0;for(let b=0;b<l.getOutputLineCount();b++){const _=new Array;h[b]=_;const C=b>0?l.breakOffsets[b-1]:0,v=l.breakOffsets[b];for(;m<c.length;){const y=d[m].content.length,w=c[m]+f,x=w+y;if(w>v)break;if(C<x){const M=d[m];if(M.inlineClassName){const L=b>0?l.wrappedTextIndentLength:0,E=L+Math.max(w-C,0),k=L+Math.min(x-C,v);E!==k&&_.push(new V3(E,k,M.inlineClassName,M.inlineClassNameAffectsLetterSpacing))}}if(x<=v)f+=y,m++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((f,m)=>({offset:f,text:d[m].content,tokenMetadata:En.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let f=n;f<n+i;f++){const m=s+f-n;if(!r[m]){a[m]=null;continue}a[m]=this._getViewLineData(g,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(r,a,s);let c=l.getLineContent();n>0&&(c=cO(i.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,g=n+1<this.getViewLineCount(),f=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new rS(c,g,d,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}u(FW,"ModelLineProjection");class R_{constructor(){}isVisible(){return!0}setVisible(e){return e?this:P_.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new rS(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,r,a){if(!r[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new W(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}u(R_,"IdentityModelLineProjection");R_.INSTANCE=new R_;class P_{constructor(){}isVisible(){return!1}setVisible(e){return e?R_.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}u(P_,"HiddenModelLineProjection");P_.INSTANCE=new P_;const Hx=[""];function cO(o){if(o>=Hx.length)for(let e=1;e<=o;e++)Hx[e]=xse(e);return Hx[o]}u(cO,"spaces");function xse(o){return new Array(o+1).join(" ")}u(xse,"_makeSpaces");class OW{constructor(e,t,n,i,s,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new HW(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,r=this.createLineBreaksComputer(),a=new th(sr.fromDecorations(i));for(let b=0;b<s;b++){const _=a.takeWhile(C=>C.lineNumber===b+1);r.addRequest(n[b],_,t?t[b]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(T.compareRangesUsingStarts);let h=1,g=0,f=-1,m=f+1<d.length?g+1:s+2;for(let b=0;b<s;b++){const _=b+1;_===m&&(f++,h=d[f].startLineNumber,g=d[f].endLineNumber,m=f+1<d.length?g+1:s+2);const C=_>=h&&_<=g,v=Ox(l[b],!C);c[b]=v.getViewLineCount(),this.modelLineProjections[b]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new d3(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),n=Lse(t),i=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(T.compareRangesUsingStarts);if(n.length===i.length){let g=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(i[f])){g=!0;break}if(!g)return!1}const s=n.map(g=>({range:g,options:Pe.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=n;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,h=!1;for(let g=0;g<this.modelLineProjections.length;g++){const f=g+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let m=!1;if(f>=a&&f<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),m=!0):(h=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),m=!0)),m){const b=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,b)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,s){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===i,d=this.wordBreak===s;if(r&&a&&l&&c&&d)return!1;const h=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=s;let g=null;if(h){g=[];for(let f=0,m=this.modelLineProjections.length;f<m;f++)g[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new Mw(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,h=i.length;d<h;d++){const g=Ox(i[d],!s);l.push(g);const f=g.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new Aw(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),r=this.modelLineProjections[i].isVisible(),a=Ox(n,r);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let c=!1,d=0,h=-1,g=0,f=-1,m=0,b=-1;s>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,m=h+1,b=m+(s-l)-1,c=!0):s<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+s-1,g=h+1,f=g+(l-s)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const _=d<=h?new $N(d,h-d+1):null,C=g<=f?new Aw(g,f):null,v=m<=b?new Mw(m,b):null;return[c,_,C,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new nD(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=d;g<h;g++)a.push(new nD(l,g))}if(!c.isVisible()&&r){const d=new W(l-1,this.model.getLineMaxColumn(l-1)+1),h=T.fromPositions(r,d);s.push(new iD(h,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new W(l,1))}if(r){const l=T.fromPositions(r,this.getModelEndPositionOfViewLine(i));s.push(new iD(l,a))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,i);for(const d of a.viewLines){const g=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let m=-1;if(f.column!==-1){const C=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(C.lineNumber===d.modelLineWrappedLineIdx)m=C.column;else if(C.lineNumber<d.modelLineWrappedLineIdx)m=this.getMinColumnOfViewLine(d);else if(C.lineNumber>d.modelLineWrappedLineIdx)return}const b=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new Oc(f.visibleColumn,m,f.className,new wf(f.horizontalLine.top,b.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Oc(f.visibleColumn,m,f.className,new wf(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(g.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],a=[],l=n.lineNumber-1,c=i.lineNumber-1;let d=null;for(let m=l;m<=c;m++){const b=this.modelLineProjections[m];if(b.isVisible()){const _=b.getViewLineNumberOfModelPosition(0,m===l?n.column:1),C=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(m+1)),v=C-_+1;let y=0;v>1&&b.getViewLineMinColumn(this.model,m+1,C)===1&&(y=_===0?1:2),r.push(v),a.push(y),d===null&&(d=new W(m+1,0))}else d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,m)),d=null)}d!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const h=t-e+1,g=new Array(h);let f=0;for(let m=0,b=s.length;m<b;m++){let _=s[m];const C=Math.min(h-f,r[m]),v=a[m];let y;v===2?y=0:v===1?y=1:y=C;for(let w=0;w<C;w++)w===y&&(_=0),g[f++]=_}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=i.index,a=i.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const h=this.modelLineProjections[c];if(!h.isVisible())continue;const g=c===r?a:0;let f=h.getViewLineCount()-g,m=!1;if(s+f>t&&(m=!0,f=t-s+1),h.getViewLinesData(this.model,c+1,g,f,s-e,n,l),s+=f,m)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,r=i.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,r),c=a.getViewLineMaxColumn(this.model,s+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new W(s+1,d)).equals(n)?new W(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new T(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new W(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new T(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new W(e,t)),s=i.lineNumber,r=i.column;let a=s-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new W(1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[s-1].getViewPositionOfModelPosition(c,r,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return T.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i){const s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new T(s.lineNumber,1,r.lineNumber,r.column),t,n,i);let a=[];const l=s.lineNumber-1,c=r.lineNumber-1;let d=null;for(let m=l;m<=c;m++)if(this.modelLineProjections[m].isVisible())d===null&&(d=new W(m+1,m===l?s.column:1));else if(d!==null){const _=this.model.getLineMaxColumn(m);a=a.concat(this.model.getDecorationsInRange(new T(d.lineNumber,d.column,m,_),t,n,i)),d=null}d!==null&&(a=a.concat(this.model.getDecorationsInRange(new T(d.lineNumber,d.column,r.lineNumber,r.column),t,n,i)),d=null),a.sort((m,b)=>{const _=T.compareRangesUsingStarts(m.range,b.range);return _===0?m.id<b.id?-1:m.id>b.id?1:0:_});const h=[];let g=0,f=null;for(const m of a){const b=m.id;f!==b&&(f=b,h[g++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}u(OW,"ViewModelLinesFromProjectedModel");function Lse(o){if(o.length===0)return[];const e=o.slice();e.sort(T.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let s=1,r=e.length;s<r;s++){const a=e[s];a.startLineNumber>i+1?(t.push(new T(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new T(n,1,i,1)),t}u(Lse,"normalizeLineRanges");class nD{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}u(nD,"ViewLineInfo");class iD{constructor(e,t){this.modelRange=e,this.viewLines=t}}u(iD,"ViewLineInfoGroupedByModelRange");class HW{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}u(HW,"CoordinatesConverter");class VW{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new WW(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new Mw(t,n)}onModelLinesInserted(e,t,n,i){return new Aw(t,n)}onModelLineChanged(e,t,n){return[!1,new $N(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new rS(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let r=e;r<=t;r++){const a=r-e;s[a]=n[a]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,n,i){return this.model.getDecorationsInRange(e,t,n,i)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}u(VW,"ViewModelLinesFromModelAsIs");class WW{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}u(WW,"IdentityCoordinatesConverter");class BW extends z{constructor(e,t,n,i,s,r,a,l,c){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this.hiddenAreasModel=new GW,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new mW,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new iu(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new yt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=FS.create(this.model),this.model.isTooLargeForTokenization())this._lines=new VW(this.model);else{const d=this._configuration.options,h=d.get(48),g=d.get(133),f=d.get(140),m=d.get(132),b=d.get(124);this._lines=new OW(this._editorId,this.model,i,s,h,this.model.getOptions().tabSize,g,f.wrappingColumn,m,b)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new EW(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new NW(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new hW(d)),this._eventDispatcher.emitOutgoingEvent(new PS(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new RW(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(im.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new pW)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new gW(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new T(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new dW(e)),this._eventDispatcher.emitOutgoingEvent(new RS(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new rW)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new aW)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new W(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new sD(t,this._viewportStart.startLineDelta)}return new sD(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),i=this._configuration.options,s=i.get(48),r=i.get(133),a=i.get(140),l=i.get(132),c=i.get(124);this._lines.setWrappingSettings(s,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new pb),e.emitViewEvent(new mb),e.emitViewEvent(new su(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(87)&&(this._decorations.reset(),e.emitViewEvent(new su(null))),e.emitViewEvent(new lW(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),iu.shouldRecreate(t)&&(this.cursorConfig=new iu(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let i=!1,s=!1;const r=e instanceof Jc?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Jc?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let g=0;g<h.detail.length;g++){const f=h.detail[g];let m=h.injectedTexts[g];m&&(m=m.filter(b=>!b.ownerId||b.ownerId===this._editorId)),l.addRequest(f,m,null)}break}case 2:{let g=null;h.injectedText&&(g=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,g,null);break}}const c=l.finalize(),d=new th(c);for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new pb),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);g!==null&&(n.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),i=!0;break}case 4:{const g=d.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,g);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),i=!0;break}case 2:{const g=d.dequeue(),[f,m,b,_]=this._lines.onModelLineChanged(a,h.lineNumber,g);s=f,m&&n.emitViewEvent(m),b&&(n.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),_&&(n.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!i&&s&&(n.emitViewEvent(new mb),n.emitViewEvent(new su(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const i=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof Jc&&n.emitOutgoingEvent(new TW(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new W(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new W(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new fW(t)),this._eventDispatcher.emitOutgoingEvent(new LW(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new uW),this.cursorConfig=new iu(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new SW(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new iu(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new wW(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new pb),t.emitViewEvent(new mb),t.emitViewEvent(new su(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new iu(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new xW(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new su(e)),this._eventDispatcher.emitOutgoingEvent(new yW(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const i=this._captureStableViewport();let s=!1;try{const r=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(n),s&&(r.emitViewEvent(new pb),r.emitViewEvent(new mb),r.emitViewEvent(new su(null)),this._cursor.onLineMappingChanged(r),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new vW)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(139),t=this._configuration.options.get(64),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new T(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let s=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,h=n.length;d<h;d++){const g=n[d].startLineNumber,f=n[d].endLineNumber;f<r||g>l||(r<g&&(i[s++]=new T(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(i[s++]=new T(r,a,l,c)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new T(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new T(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new W(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Pi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Or(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e,t=!1){return this._decorations.getDecorationsViewportData(e,t).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Ls(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new H3(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,Jy(this._configuration.options)),n=new UW;for(const i of t){const s=i.options,r=s.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,s.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n?.invalidateCachedColor();const i=t.options.minimap;i?.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(T.compareRangesUsingStarts);let s=!1,r=!1;for(const l of e)l.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+i);return c}if(s&&t){const l=[];let c=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),c=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===Zs||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new T(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const s=this._configuration.options.get(48),r=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===xs.fontFamily;let c;return l?c=xs.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${xs.fontFamily}`),{mode:n,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=s;c++){const d=this.model.tokenization.getLineTokens(c),h=d.getLineContent(),g=c===n?i-1:0,f=c===s?r-1:h.length;h===""?l+="<br>":l+=Sse(h,d.inflate(),t,g,f,a,li)}return l}_getColorMap(){const e=Yt.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=U.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new CW);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new T(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new jb(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new T(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new jb(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(r=>r.emitViewEvent(new jb(e,!1,n,null,i,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Cse),this._eventDispatcher.emitOutgoingEvent(new _W))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}u(BW,"ViewModel");class FS{static create(e){const t=e._setTrackedRange(null,new T(1,1,1,1),1);return new FS(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new W(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new T(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}u(FS,"ViewportStart");class UW{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=n){i>c&&(a[a.length-1]=i);return}a.push(s,n,i)}else{const a=new oN(e,t,[s,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}u(UW,"OverviewRulerDecorations");class GW{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&dO(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>Ese(t,n),[]);return dO(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}u(GW,"HiddenAreasModel");function Ese(o,e){const t=[];let n=0,i=0;for(;n<o.length&&i<e.length;){const s=o[n],r=e[i];if(s.endLineNumber<r.startLineNumber-1)t.push(o[n++]);else if(r.endLineNumber<s.startLineNumber-1)t.push(e[i++]);else{const a=Math.min(s.startLineNumber,r.startLineNumber),l=Math.max(s.endLineNumber,r.endLineNumber);t.push(new T(a,1,l,1)),n++,i++}}for(;n<o.length;)t.push(o[n++]);for(;i<e.length;)t.push(e[i++]);return t}u(Ese,"mergeLineRangeArray");function dO(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].equalsRange(e[t]))return!1;return!0}u(dO,"rangeArraysEqual");class sD{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}u(sD,"StableViewport");class jv{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}u(jv,"ServiceCollection");var F_;(function(o){o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error"})(F_||(F_={}));(function(o){const e="error",t="warning",n="warn",i="info",s="ignore";function r(l){return l?$g(e,l)?o.Error:$g(t,l)||$g(n,l)?o.Warning:$g(i,l)?o.Info:o.Ignore:o.Ignore}u(r,"fromValue"),o.fromValue=r;function a(l){switch(l){case o.Error:return e;case o.Warning:return t;case o.Info:return i;default:return s}}u(a,"toString"),o.toString=a})(F_||(F_={}));const cn=F_;var ZN=cn;const Cn=nt("notificationService");class zW{}u(zW,"NoOpNotification");class Df{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,s=0,r=0;for(;n<=i;){s=n+(i-n)/2|0;const l=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=r)i=s-1;else if(e>l)n=s+1;else break;else if(e<r)i=s-1;else if(e>=l)n=s+1;else break}let a=e-r;return s>0&&(a+=this.wrappedTextIndentLength),new bb(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new bb(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new bb(e+1,this.getMinOutputOffset(e+1))}return new bb(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&uO(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(hO(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let s=n.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[n.injectedTextIndex]&&!(uO(this.injectionOptions[s].cursorStops)||(i-=this.injectionOptions[s].content.length,hO(this.injectionOptions[s].cursorStops)));)s--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,s=n.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)i+=this.injectionOptions[s+1].content.length,s++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)i-=this.injectionOptions[s-1].content.length,s--;return i}z1()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let s=0;s<t.length;s++){const r=n[s].content.length,a=t[s]+i,l=t[s]+i+r;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:r};i+=r}}}}u(Df,"ModelLineProjectionData");function uO(o){return o==null?!0:o===Ar.Right||o===Ar.Both}u(uO,"hasRightCursorStop");function hO(o){return o==null?!0:o===Ar.Left||o===Ar.Both}u(hO,"hasLeftCursorStop");class bb{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new W(e+this.outputLineIndex,this.outputOffset+1)}}u(bb,"OutputPosition");class OS{static create(e){return new OS(e.get(128),e.get(127))}constructor(e,t){this.classifier=new KW(e,t)}createLineBreaksComputer(e,t,n,i,s){const r=[],a=[],l=[];return{addRequest:(c,d,h)=>{r.push(c),a.push(d),l.push(h)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let h=0,g=r.length;h<g;h++){const f=a[h],m=l[h];m&&!m.injectionOptions&&!f?d[h]=kse(this.classifier,m,r[h],t,n,c,i,s):d[h]=Dse(this.classifier,r[h],f,t,n,c,i,s)}return oD.length=0,rD.length=0,d}}}}u(OS,"MonospaceLineBreaksComputerFactory");class KW extends $h{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}u(KW,"WrappingCharacterClassifier");let oD=[],rD=[];function kse(o,e,t,n,i,s,r,a){if(i===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,h=e.breakOffsetsVisibleColumn,g=jW(t,n,i,s,r),f=i-g,m=oD,b=rD;let _=0,C=0,v=0,y=i;const w=d.length;let x=0;if(x>=0){let M=Math.abs(h[x]-y);for(;x+1<w;){const L=Math.abs(h[x+1]-y);if(L>=M)break;M=L,x++}}for(;x<w;){let M=x<0?0:d[x],L=x<0?0:h[x];C>M&&(M=C,L=v);let E=0,k=0,O=0,P=0;if(L<=y){let G=L,se=M===0?0:t.charCodeAt(M-1),fe=M===0?0:o.get(se),Le=!0;for(let Fe=M;Fe<l;Fe++){const Ge=Fe,ke=t.charCodeAt(Fe);let et,Je;if(In(ke)?(Fe++,et=0,Je=2):(et=o.get(ke),Je=$b(ke,G,n,s)),Ge>C&&aD(se,fe,ke,et,c)&&(E=Ge,k=G),G+=Je,G>y){Ge>C?(O=Ge,P=G-Je):(O=Fe+1,P=G),G-k>f&&(E=0),Le=!1;break}se=ke,fe=et}if(Le){_>0&&(m[_]=d[d.length-1],b[_]=h[d.length-1],_++);break}}if(E===0){let G=L,se=t.charCodeAt(M),fe=o.get(se),Le=!1;for(let Fe=M-1;Fe>=C;Fe--){const Ge=Fe+1,ke=t.charCodeAt(Fe);if(ke===9){Le=!0;break}let et,Je;if(rh(ke)?(Fe--,et=0,Je=2):(et=o.get(ke),Je=od(ke)?s:1),G<=y){if(O===0&&(O=Ge,P=G),G<=y-f)break;if(aD(ke,et,se,fe,c)){E=Ge,k=G;break}}G-=Je,se=ke,fe=et}if(E!==0){const Fe=f-(P-k);if(Fe<=n){const Ge=t.charCodeAt(O);let ke;In(Ge)?ke=2:ke=$b(Ge,P,n,s),Fe-ke<0&&(E=0)}}if(Le){x--;continue}}if(E===0&&(E=O,k=P),E<=C){const G=t.charCodeAt(C);In(G)?(E=C+2,k=v+2):(E=C+1,k=v+$b(G,v,n,s))}for(C=E,m[_]=E,v=k,b[_]=k,_++,y=k+f;x<0||x<w&&h[x]<k;)x++;let H=Math.abs(h[x]-y);for(;x+1<w;){const G=Math.abs(h[x+1]-y);if(G>=H)break;H=G,x++}}return _===0?null:(m.length=_,b.length=_,oD=e.breakOffsets,rD=e.breakOffsetsVisibleColumn,e.breakOffsets=m,e.breakOffsetsVisibleColumn=b,e.wrappedTextIndentLength=g,e)}u(kse,"createLineBreaksFromPreviousLineBreaks");function Dse(o,e,t,n,i,s,r,a){const l=sr.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(k=>k.options),d=t.map(k=>k.column-1)):(c=null,d=null),i===-1)return c?new Df(d,c,[l.length],[],0):null;const h=l.length;if(h<=1)return c?new Df(d,c,[l.length],[],0):null;const g=a==="keepAll",f=jW(l,n,i,s,r),m=i-f,b=[],_=[];let C=0,v=0,y=0,w=i,x=l.charCodeAt(0),M=o.get(x),L=$b(x,0,n,s),E=1;In(x)&&(L+=1,x=l.charCodeAt(1),M=o.get(x),E++);for(let k=E;k<h;k++){const O=k,P=l.charCodeAt(k);let H,G;In(P)?(k++,H=0,G=2):(H=o.get(P),G=$b(P,L,n,s)),aD(x,M,P,H,g)&&(v=O,y=L),L+=G,L>w&&((v===0||L-y>m)&&(v=O,y=L-G),b[C]=v,_[C]=y,C++,w=y+m,v=0),x=P,M=H}return C===0&&(!t||t.length===0)?null:(b[C]=h,_[C]=L,new Df(d,c,b,_,f))}u(Dse,"createLineBreaks$1");function $b(o,e,t,n){return o===9?t-e%t:od(o)||o<32?n:1}u($b,"computeCharWidth");function gO(o,e){return e-o%e}u(gO,"tabCharacterWidth");function aD(o,e,t,n,i){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!i&&e===3&&n!==2||!i&&n===3&&e!==1)}u(aD,"canBreak");function jW(o,e,t,n,i){let s=0;if(i!==0){const r=Pi(o);if(r!==-1){for(let l=0;l<r;l++){const c=o.charCodeAt(l)===9?gO(s,e):1;s+=c}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const c=gO(s,e);s+=c}s+n>t&&(s=0)}}return s}u(jW,"computeWrappedTextIndentLength");var Vx;const Wx=(Vx=window.trustedTypes)===null||Vx===void 0?void 0:Vx.createPolicy("domLineBreaksComputer",{createHTML:o=>o});class HS{static create(){return new HS}constructor(){}createLineBreaksComputer(e,t,n,i,s){const r=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),a.push(c)},finalize:()=>Mse(r,e,t,n,i,s,a)}}}u(HS,"DOMLineBreaksComputerFactory");function Mse(o,e,t,n,i,s,r){var a;function l(k){const O=r[k];if(O){const P=sr.applyInjectedText(o[k],O),H=O.map(se=>se.options),G=O.map(se=>se.column-1);return new Df(G,H,[P.length],[],0)}else return null}if(u(l,"createEmptyLineBreakWithPossiblyInjectedText"),n===-1){const k=[];for(let O=0,P=o.length;O<P;O++)k[O]=l(O);return k}const c=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(i===3?2:i===2?1:0)),g=Math.ceil(e.spaceWidth*h),f=document.createElement("div");ai(f,e);const m=new jh(1e4),b=[],_=[],C=[],v=[],y=[];for(let k=0;k<o.length;k++){const O=sr.applyInjectedText(o[k],r[k]);let P=0,H=0,G=c;if(i!==0)if(P=Pi(O),P===-1)P=0;else{for(let Fe=0;Fe<P;Fe++){const Ge=O.charCodeAt(Fe)===9?t-H%t:1;H+=Ge}const Le=Math.ceil(e.spaceWidth*H);Le+e.typicalFullwidthCharacterWidth>c?(P=0,H=0):G=c-Le}const se=O.substr(P),fe=Ase(se,H,t,G,m,g);b[k]=P,_[k]=H,C[k]=se,v[k]=fe[0],y[k]=fe[1]}const w=m.build(),x=(a=Wx?.createHTML(w))!==null&&a!==void 0?a:w;f.innerHTML=x,f.style.position="absolute",f.style.top="10000",s==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),document.body.appendChild(f);const M=document.createRange(),L=Array.prototype.slice.call(f.children,0),E=[];for(let k=0;k<o.length;k++){const O=L[k],P=Ise(M,O,C[k],v[k]);if(P===null){E[k]=l(k);continue}const H=b[k],G=_[k]+h,se=y[k],fe=[];for(let ke=0,et=P.length;ke<et;ke++)fe[ke]=se[P[ke]];if(H!==0)for(let ke=0,et=P.length;ke<et;ke++)P[ke]+=H;let Le,Fe;const Ge=r[k];Ge?(Le=Ge.map(ke=>ke.options),Fe=Ge.map(ke=>ke.column-1)):(Le=null,Fe=null),E[k]=new Df(Fe,Le,P,fe,G)}return document.body.removeChild(f),E}u(Mse,"createLineBreaks");function Ase(o,e,t,n,i,s){if(s!==0){const g=String(s);i.appendString('<div style="text-indent: -'),i.appendString(g),i.appendString("px; padding-left: "),i.appendString(g),i.appendString("px; box-sizing: border-box; width:")}else i.appendString('<div style="width:');i.appendString(String(n)),i.appendString('px;">');const r=o.length;let a=e,l=0;const c=[],d=[];let h=0<r?o.charCodeAt(0):0;i.appendString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&i.appendString("</span><span>"),c[g]=l,d[g]=a;const f=h;h=g+1<r?o.charCodeAt(g+1):0;let m=1,b=1;switch(f){case 9:m=t-a%t,b=m;for(let _=1;_<=m;_++)_<m?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 32:h===32?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 60:i.appendString("&lt;");break;case 62:i.appendString("&gt;");break;case 38:i.appendString("&amp;");break;case 0:i.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.appendCharCode(65533);break;default:od(f)&&b++,f<32?i.appendCharCode(9216+f):i.appendCharCode(f)}l+=m,a+=b}return i.appendString("</span>"),c[o.length]=l,d[o.length]=a,i.appendString("</div>"),[c,d]}u(Ase,"renderLine");function Ise(o,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{lD(o,i,n,0,null,t.length-1,null,s)}catch(r){return console.log(r),null}return s.length===0?null:(s.push(t.length),s)}u(Ise,"readLineBreaks");function lD(o,e,t,n,i,s,r,a){if(n===s||(i=i||Bx(o,e,t[n],t[n+1]),r=r||Bx(o,e,t[s],t[s+1]),Math.abs(i[0].top-r[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,c=Bx(o,e,t[l],t[l+1]);lD(o,e,t,n,i,l,c,a),lD(o,e,t,l,c,s,r,a)}u(lD,"discoverBreaks");function Bx(o,e,t,n){return o.setStart(e[t/16384|0].firstChild,t%16384),o.setEnd(e[n/16384|0].firstChild,n%16384),o.getClientRects()}u(Bx,"readClientRect");class $W extends z{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new O1),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const i of t){if(this._pending.has(i.id)){He(new Error(`Cannot have two contributions with the same id ${i.id}`));continue}this._pending.set(i.id,i)}this._instantiateSome(0),this._register(Tl(()=>{this._instantiateSome(1)})),this._register(Tl(()=>{this._instantiateSome(2)})),this._register(Tl(()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register(Tl(()=>{this._instantiateSome(1)},50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){He(n)}}}}u($W,"CodeEditorContributions");var Nse=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},il=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Rse=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Pse=0,Fse=u(class{constructor(e,t,n,i,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s,this.attachedView=r}dispose(){mt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},"ModelData"),hp=u(class Hg extends z{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(),this.languageConfigurationService=h,this._deliveryQueue=new MI,this._contributions=this._register(new $W),this._onDidDispose=this._register(new F),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new cD({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new cD({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new _i(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new _i(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new _i(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new _i(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new _i(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new _i(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new F({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Pse,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,f,d)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const C=this._configuration.options;if(_.hasChanged(139)){const v=C.get(139);this._onDidLayoutChange.fire(v)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=r,this._themeService=l,this._register(new qW(this,this._contextKeyService)),this._register(new YW(this,this._contextKeyService,g)),this._instantiationService=i.createChild(new jv([Me,this._contextKeyService])),this._modelData=null,this._focusTracker=new XW(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let m;Array.isArray(n.contributions)?m=n.contributions:m=_f.getEditorContributions(),this._contributions.initialize(this,m,this._instantiationService);for(const _ of _f.getEditorActions()){if(this._actions.has(_.id)){He(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const C=new NN(_.id,_.label,_.alias,si(_.precondition),()=>this._instantiationService.invokeFunction(v=>Promise.resolve(_.runEditorCommand(v,this,null))),this._contextKeyService);this._actions.set(C.id,C)}const b=u(()=>!this._configuration.options.get(87)&&this._configuration.options.get(34).enabled,"isDropIntoEnabled");this._register(new d7(this._domElement,{onDragEnter:()=>{},onDragOver:_=>{if(!b())return;const C=this.getTargetAtClientPoint(_.clientX,_.clientY);C?.position&&this.showDropIndicatorAt(C.position)},onDrop:_=>Rse(this,void 0,void 0,function*(){if(!b()||(this.removeDropIndicator(),!_.dataTransfer))return;const C=this.getTargetAtClientPoint(_.clientX,_.clientY);C?.position&&this._onDropIntoEditor.fire({position:C.position,event:_})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n){return new xk(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return Av.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ht.getWordAtPosition(this._modelData.model,this._configuration.options.get(125),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,i)}getTopForLineNumber(e,t=!1){return this._modelData?Hg._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Hg._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,i=!1){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,i)}getBottomForLineNumber(e,t=!1){return this._modelData?Hg._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var n;(n=this._modelData)===null||n===void 0||n.viewModel.setHiddenAreas(e.map(i=>T.lift(i)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Sn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!T.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new T(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new T(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=ge.isISelection(e),i=T.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new ge(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new T(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!T.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(T.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!ge.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run(n)).then(void 0,He);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,n,i,e);const l=r.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new T(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=_f.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,He)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(87)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(87)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(87))return!1;let i;return n?Array.isArray(n)?i=u(()=>n,"cursorStateComputer"):i=n:i=u(()=>null,"cursorStateComputer"),this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new ZW(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Jy(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,Jy(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(139)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(139),s=Hg._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:n.get(64)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){ai(e,this._configuration.options.get(48))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),i=new BW(this._id,this._configuration,e,HS.create(),OS.create(this._configuration.options),a=>Eo(a),this.languageConfigurationService,this._themeService,n);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const h=this.getOption(77),g=p("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",h);this._notificationService.prompt(ZN.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:p("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let h=0,g=a.selections.length;h<g;h++)l[h]=a.selections[h].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];s.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];s.addOverlayWidget(this._overlayWidgets[d])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Fse(e,i,s,r,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,r,a,l)=>{this._paste("keyboard",s,r,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,r,a,l)=>{this._compositionType("keyboard",s,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,r,a,l)=>{const c={text:s,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const r={text:s};this._commandService.executeCommand("type",r)},compositionType:(s,r,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new zv(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new a8(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),options:Hg.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}},"CodeEditorWidget");hp.dropIntoEditorDecorationOptions=Pe.register({description:"workbench-dnd-target",className:"dnd-target"});hp=Nse([il(3,Re),il(4,gt),il(5,dn),il(6,Me),il(7,qn),il(8,Cn),il(9,Md),il(10,zt),il(11,he)],hp);class cD extends z{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new F(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new F(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}u(cD,"BooleanEventEmitter");class _i extends F{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}u(_i,"InteractionEmitter");class qW extends z{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=D.editorSimpleInput.bindTo(t),this._editorFocus=D.focus.bindTo(t),this._textInputFocus=D.textInputFocus.bindTo(t),this._editorTextFocus=D.editorTextFocus.bindTo(t),this._editorTabMovesFocus=D.tabMovesFocus.bindTo(t),this._editorReadonly=D.readOnly.bindTo(t),this._inDiffEditor=D.inDiffEditor.bindTo(t),this._editorColumnSelection=D.columnSelection.bindTo(t),this._hasMultipleSelections=D.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=D.hasNonEmptySelection.bindTo(t),this._canUndo=D.canUndo.bindTo(t),this._canRedo=D.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Ou.onDidChangeTabFocus(()=>this._editorTabMovesFocus.set(Ou.getTabFocusMode("editorFocus")))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(Ou.getTabFocusMode("editorFocus")),this._editorReadonly.set(e.get(87)),this._inDiffEditor.set(e.get(59)),this._editorColumnSelection.set(e.get(20))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}u(qW,"EditorContextKeysManager");class YW extends z{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=D.languageId.bindTo(t),this._hasCompletionItemProvider=D.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=D.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=D.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=D.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=D.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=D.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=D.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=D.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=D.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=D.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=D.hasReferenceProvider.bindTo(t),this._hasRenameProvider=D.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=D.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=D.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=D.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=D.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=D.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=D.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=D.isInWalkThroughSnippet.bindTo(t);const i=u(()=>this._update(),"update");this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Ue.walkThroughSnippet)})}}u(YW,"EditorModeContext");class XW extends z{constructor(e){super(),this._onChange=this._register(new F),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Kl(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}u(XW,"CodeEditorWidgetFocusTracker");class ZW{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}}u(ZW,"EditorDecorationsCollection");const Ose=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Hse=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Ux(o){return Ose+encodeURIComponent(o.toString())+Hse}u(Ux,"getSquigglySVGData");const Vse=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Wse=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Bse(o){return Vse+encodeURIComponent(o.toString())+Wse}u(Bse,"getDotDotDotSVGData");or((o,e)=>{const t=o.getColor(Ta);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Ux(t)}") repeat-x bottom left; }`);const n=o.getColor(zs);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Ux(n)}") repeat-x bottom left; }`);const i=o.getColor(Ks);i&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Ux(i)}") repeat-x bottom left; }`);const s=o.getColor(xte);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Bse(s)}") no-repeat bottom left; }`);const r=o.getColor(Jne);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});var sm=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const Use=!1;var Iw;(function(o){o.North="north",o.South="south",o.East="east",o.West="west"})(Iw||(Iw={}));let Gse=4;const zse=new F;let Kse=300;const jse=new F;class VS{constructor(){this.disposables=new X}get onPointerMove(){return this.disposables.add(new qe(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new qe(window,"mouseup")).event}dispose(){this.disposables.dispose()}}u(VS,"MouseEventFactory");sm([mn],VS.prototype,"onPointerMove",null);sm([mn],VS.prototype,"onPointerUp",null);class WS{get onPointerMove(){return this.disposables.add(new qe(this.el,Dt.Change)).event}get onPointerUp(){return this.disposables.add(new qe(this.el,Dt.End)).event}constructor(e){this.el=e,this.disposables=new X}dispose(){this.disposables.dispose()}}u(WS,"GestureEventFactory");sm([mn],WS.prototype,"onPointerMove",null);sm([mn],WS.prototype,"onPointerUp",null);class O_{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}u(O_,"OrthogonalPointerEventFactory");sm([mn],O_.prototype,"onPointerMove",null);sm([mn],O_.prototype,"onPointerUp",null);const fO="pointer-events-disabled";class hi extends z{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=u(n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=q(this.el,ie(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Oe(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new qe(this._orthogonalStartDragHandle,"mouseenter")).event(()=>hi.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new qe(this._orthogonalStartDragHandle,"mouseleave")).event(()=>hi.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))},"onChange");this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=u(n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=q(this.el,ie(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Oe(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new qe(this._orthogonalEndDragHandle,"mouseenter")).event(()=>hi.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new qe(this._orthogonalEndDragHandle,"mouseleave")).event(()=>hi.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))},"onChange");this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}constructor(e,t,n){super(),this.hoverDelay=Kse,this.hoverDelayer=this._register(new tr(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new F),this._onDidStart=this._register(new F),this._onDidChange=this._register(new F),this._onDidReset=this._register(new F),this._onDidEnd=this._register(new F),this.orthogonalStartSashDisposables=this._register(new X),this.orthogonalStartDragHandleDisposables=this._register(new X),this.orthogonalEndSashDisposables=this._register(new X),this.orthogonalEndDragHandleDisposables=this._register(new X),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=q(e,ie(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Ye&&this.el.classList.add("mac");const i=this._register(new qe(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new VS),this));const s=this._register(new qe(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new qe(this.el,"mouseenter")).event;this._register(r(()=>hi.onMouseEnter(this)));const a=this._register(new qe(this.el,"mouseleave")).event;this._register(a(()=>hi.onMouseLeave(this))),this._register(Tt.addTarget(this.el));const l=this._register(new qe(this.el,Dt.Start)).event;this._register(l(h=>this.onPointerStart(h,new WS(this.el)),this));const c=this._register(new qe(this.el,Dt.Tap)).event;let d;this._register(c(h=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(h);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Gse,this._register(zse.event(h=>{this.size=h,this.layout()}))),this._register(jse.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",Use),this.layout()}onPointerStart(e,t){Be.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const m=this.getOrthogonalSash(e);m&&(n=!0,e.__orthogonalSashEvent=!0,m.onPointerStart(e,new O_(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new O_(t))),!this.state)return;const i=document.getElementsByTagName("iframe");for(const m of i)m.classList.add(fO);const s=e.pageX,r=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=ko(this.el),d=u(()=>{let m="";n?m="all-scroll":this.orientation===1?this.state===1?m="s-resize":this.state===2?m="n-resize":m=Ye?"row-resize":"ns-resize":this.state===1?m="e-resize":this.state===2?m="w-resize":m=Ye?"col-resize":"ew-resize",c.textContent=`* { cursor: ${m} !important; }`},"updateStyle"),h=new X;d(),n||this.onDidEnablementChange.event(d,null,h);const g=u(m=>{Be.stop(m,!1);const b={startX:s,currentX:m.pageX,startY:r,currentY:m.pageY,altKey:a};this._onDidChange.fire(b)},"onPointerMove"),f=u(m=>{Be.stop(m,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const b of i)b.classList.remove(fO)},"onPointerUp");t.onPointerMove(g,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&hi.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&hi.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){hi.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const n=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!n||!(n instanceof HTMLElement))&&n.classList.contains("orthogonal-drag-handle"))return n.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}u(hi,"Sash");class zr{static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new zr(t,n,e.getPosition())}constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}u(zr,"StableEditorScrollState");const $v={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:rs.text};var pO,mO;class JW{constructor(e,t){this.uri=e,this.value=t}}u(JW,"ResourceMapEntry");class fi{constructor(e,t){this[pO]="ResourceMap",e instanceof fi?(this.map=new Map(e.map),this.toKey=t??fi.defaultToKey):(this.map=new Map,this.toKey=e??fi.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new JW(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(pO=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}u(fi,"ResourceMap");fi.defaultToKey=o=>o.toString();class QW{constructor(){this[mO]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(mO=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}u(QW,"LinkedMap");class ic extends QW{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}u(ic,"LRUCache");function JN(...o){return function(e,t){for(let n=0,i=o.length;n<i;n++){const s=o[n](e,t);if(s)return s}return null}}u(JN,"or");eB.bind(void 0,!1);const BS=eB.bind(void 0,!0);function eB(o,e,t){if(!t||t.length<e.length)return null;let n;return o?n=PI(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}u(eB,"_matchesPrefix");function tB(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}u(tB,"matchesContiguousSubString");function nB(o,e){return dD(o.toLowerCase(),e.toLowerCase(),0,0)}u(nB,"matchesSubString");function dD(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]===e[n]){let i=null;return(i=dD(o,e,t+1,n+1))?t2({start:n,end:n+1},i):null}return dD(o,e,t,n+1)}u(dD,"_matchesSubString");function QN(o){return 97<=o&&o<=122}u(QN,"isLower");function US(o){return 65<=o&&o<=90}u(US,"isUpper");function e2(o){return 48<=o&&o<=57}u(e2,"isNumber");function iB(o){return o===32||o===9||o===10||o===13}u(iB,"isWhitespace");const sB=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>sB.add(o.charCodeAt(0)));function Nw(o){return iB(o)||sB.has(o)}u(Nw,"isWordSeparator");function $se(o,e){return o===e||Nw(o)&&Nw(e)}u($se,"charactersMatch");function oB(o){return QN(o)||US(o)||e2(o)}u(oB,"isAlphanumeric");function t2(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}u(t2,"join");function rB(o,e){for(let t=e;t<o.length;t++){const n=o.charCodeAt(t);if(US(n)||e2(n)||t>0&&!oB(o.charCodeAt(t-1)))return t}return o.length}u(rB,"nextAnchor");function uD(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=uD(o,e,t+1,n+1);!i&&(s=rB(e,s))<e.length;)i=uD(o,e,t+1,s),s++;return i===null?null:t2({start:n,end:n+1},i)}}u(uD,"_matchesCamelCase");function qse(o){let e=0,t=0,n=0,i=0,s=0;for(let d=0;d<o.length;d++)s=o.charCodeAt(d),US(s)&&e++,QN(s)&&t++,oB(s)&&n++,e2(s)&&i++;const r=e/o.length,a=t/o.length,l=n/o.length,c=i/o.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}u(qse,"analyzeCamelCaseWord");function Yse(o){const{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}u(Yse,"isUpperCaseWord");function Xse(o){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=o;return t>.2&&e<.8&&n>.6&&i<.2}u(Xse,"isCamelCaseWord");function Zse(o){let e=0,t=0,n=0,i=0;for(let s=0;s<o.length;s++)n=o.charCodeAt(s),US(n)&&e++,QN(n)&&t++,iB(n)&&i++;return(e===0||t===0)&&i===0?o.length<=30:e<=5}u(Zse,"isCamelCasePattern");function aB(o,e){if(!e||(e=e.trim(),e.length===0)||!Zse(o)||e.length>60)return null;const t=qse(e);if(!Xse(t)){if(!Yse(t))return null;e=e.toLowerCase()}let n=null,i=0;for(o=o.toLowerCase();i<e.length&&(n=uD(o,e,0,i))===null;)i=rB(e,i+1);return n}u(aB,"matchesCamelCase");function Jse(o,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(o=o.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=hD(o,e,0,i,t))===null;)i=lB(e,i+1);return n}u(Jse,"matchesWords");function hD(o,e,t,n,i){if(t===o.length)return[];if(n===e.length)return null;if($se(o.charCodeAt(t),e.charCodeAt(n))){let s=null,r=n+1;if(s=hD(o,e,t+1,n+1,i),!i)for(;!s&&(r=lB(e,r))<e.length;)s=hD(o,e,t+1,r,i),r++;return s?o.charCodeAt(t)!==e.charCodeAt(n)?s:t2({start:n,end:n+1},s):null}else return null}u(hD,"_matchesWords");function lB(o,e){for(let t=e;t<o.length;t++)if(Nw(o.charCodeAt(t))||t>0&&Nw(o.charCodeAt(t-1)))return t;return o.length}u(lB,"nextWord");const Qse=JN(BS,aB,tB),eoe=JN(BS,aB,nB),bO=new ic(1e4);function _O(o,e,t=!1){if(typeof o!="string"||typeof e!="string")return null;let n=bO.get(o);n||(n=new RegExp(GZ(o),"i"),bO.set(o,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?eoe(o,e):Qse(o,e)}u(_O,"matchesFuzzy");function toe(o,e,t,n,i,s){const r=Math.min(13,o.length);for(;t<r;t++){const a=gp(o,e,t,n,i,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,s]}u(toe,"anyScore");function GS(o){if(typeof o>"u")return[];const e=[],t=o[1];for(let n=o.length-1;n>1;n--){const i=o[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}u(GS,"createMatches");const Hc=128;function n2(){const o=[],e=[];for(let t=0;t<=Hc;t++)e[t]=0;for(let t=0;t<=Hc;t++)o.push(e.slice(0));return o}u(n2,"initTable");function cB(o){const e=[];for(let t=0;t<=o;t++)e[t]=0;return e}u(cB,"initArr");const dB=cB(2*Hc),gD=cB(2*Hc),sl=n2(),$d=n2(),uC=n2();function hC(o,e){if(e<0||e>=o.length)return!1;const t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!HI(t)}}u(hC,"isSeparatorAtPos");function vO(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}u(vO,"isWhitespaceAtPos");function py(o,e,t){return e[o]!==t[o]}u(py,"isUpperCaseAtPos");function noe(o,e,t,n,i,s,r=!1){for(;e<t&&i<s;)o[e]===n[i]&&(r&&(dB[e]=i),e+=1),i+=1;return e===t}u(noe,"isPatternInWord");var Wr;(function(o){o.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}u(e,"isDefault"),o.isDefault=e})(Wr||(Wr={}));class qv{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}u(qv,"FuzzyScoreOptions");qv.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function gp(o,e,t,n,i,s,r=qv.default){const a=o.length>Hc?Hc:o.length,l=n.length>Hc?Hc:n.length;if(t>=a||s>=l||a-t>l-s||!noe(e,t,a,i,s,l,!0))return;ioe(a,l,t,s,e,i);let c=1,d=1,h=t,g=s;const f=[!1];for(c=1,h=t;h<a;c++,h++){const v=dB[h],y=gD[h],w=h+1<a?gD[h+1]:l;for(d=v-s+1,g=v;g<w;d++,g++){let x=Number.MIN_SAFE_INTEGER,M=!1;g<=y&&(x=soe(o,e,h,t,n,i,g,l,s,sl[c-1][d-1]===0,f));let L=0;x!==Number.MAX_SAFE_INTEGER&&(M=!0,L=x+$d[c-1][d-1]);const E=g>v,k=E?$d[c][d-1]+(sl[c][d-1]>0?-5:0):0,O=g>v+1&&sl[c][d-1]>0,P=O?$d[c][d-2]+(sl[c][d-2]>0?-5:0):0;if(O&&(!E||P>=k)&&(!M||P>=L))$d[c][d]=P,uC[c][d]=3,sl[c][d]=0;else if(E&&(!M||k>=L))$d[c][d]=k,uC[c][d]=2,sl[c][d]=0;else if(M)$d[c][d]=L,uC[c][d]=1,sl[c][d]=sl[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const m=[$d[c][d],s];let b=0,_=0;for(;c>=1;){let v=d;do{const y=uC[c][v];if(y===3)v=v-2;else if(y===2)v=v-1;else break}while(v>=1);b>1&&e[t+c-1]===i[s+d-1]&&!py(v+s-1,n,i)&&b+1>sl[c][v]&&(v=d),v===d?b++:b=1,_||(_=v),c--,d=v-1,m.push(d)}l===a&&r.boostFullMatch&&(m[0]+=2);const C=_-a;return m[0]-=C,m}u(gp,"fuzzyScore");function ioe(o,e,t,n,i,s){let r=o-1,a=e-1;for(;r>=t&&a>=n;)i[r]===s[a]&&(gD[r]=a,r--),a--}u(ioe,"_fillInMaxWordMatchPos");function soe(o,e,t,n,i,s,r,a,l,c,d){if(e[t]!==s[r])return Number.MIN_SAFE_INTEGER;let h=1,g=!1;return r===t-n?h=o[t]===i[r]?7:5:py(r,i,s)&&(r===0||!py(r-1,i,s))?(h=o[t]===i[r]?7:5,g=!0):hC(s,r)&&(r===0||!hC(s,r-1))?h=5:(hC(s,r-1)||vO(s,r-1))&&(h=5,g=!0),h>1&&t===n&&(d[0]=!0),g||(g=py(r,i,s)||hC(s,r-1)||vO(s,r-1)),t===n?r>l&&(h-=g?3:5):c?h+=g?2:0:h+=g?0:1,r+1===a&&(h-=g?3:5),h}u(soe,"_doScore");function ooe(o,e,t,n,i,s,r){return roe(o,e,t,n,i,s,!0,r)}u(ooe,"fuzzyScoreGracefulAggressive");function roe(o,e,t,n,i,s,r,a){let l=gp(o,e,t,n,i,s,a);if(l&&!r)return l;if(o.length>=3){const c=Math.min(7,o.length-1);for(let d=t+1;d<c;d++){const h=aoe(o,d);if(h){const g=gp(h,h.toLowerCase(),t,n,i,s,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}u(roe,"fuzzyScoreWithPermutations");function aoe(o,e){if(e+1>=o.length)return;const t=o[e],n=o[e+1];if(t!==n)return o.slice(0,e)+n+t+o.slice(e+2)}u(aoe,"nextTypoPermutation");const loe="$(",i2=new RegExp(`\\$\\(${xe.iconNameExpression}(?:${xe.iconModifierExpression})?\\)`,"g"),coe=new RegExp(`(\\\\)?${i2.source}`,"g");function doe(o){return o.replace(coe,(e,t)=>t?e:`\\${e}`)}u(doe,"escapeIcons");const uoe=new RegExp(`\\\\${i2.source}`,"g");function hoe(o){return o.replace(uoe,e=>`\\${e}`)}u(hoe,"markdownEscapeEscapedIcons");const goe=new RegExp(`(\\s)?(\\\\)?${i2.source}(\\s)?`,"g");function s2(o){return o.indexOf(loe)===-1?o:o.replace(goe,(e,t,n,i)=>n?e:t||i||"")}u(s2,"stripIcons");function foe(o){return o?o.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}u(foe,"getCodiconAriaLabel");const Gx=new RegExp(`\\$\\(${xe.iconNameCharacter}+\\)`,"g");function Tg(o){Gx.lastIndex=0;let e="";const t=[];let n=0;for(;;){const i=Gx.lastIndex,s=Gx.exec(o),r=o.substring(i,s?.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(n)}if(!s)break;n+=s[0].length}return{text:e,iconOffsets:t}}u(Tg,"parseLabelWithIcons");function gC(o,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return _O(o,n,t);const s=Cv(n," "),r=n.length-s.length,a=_O(o,s,t);if(a)for(const l of a){const c=i[l.start+r]+r;l.start+=c,l.end+=c}return a}u(gC,"matchesFuzzyIconAware");class Gi{constructor(e="",t=!1){var n,i,s;if(this.value=e,typeof this.value!="string")throw Ys("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=moe(this.supportThemeIcons?doe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Js(t),"g");return e.replace(n,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}}u(Gi,"MarkdownString");function fp(o){return qb(o)?!o.value:Array.isArray(o)?o.every(fp):!0}u(fp,"isEmptyMarkdownString");function qb(o){return o instanceof Gi?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}u(qb,"isMarkdownString");function poe(o,e){return o===e?!0:!o||!e?!1:o.value===e.value&&o.isTrusted===e.isTrusted&&o.supportThemeIcons===e.supportThemeIcons&&o.supportHtml===e.supportHtml&&(o.baseUri===e.baseUri||!!o.baseUri&&!!e.baseUri&&kS(ve.from(o.baseUri),ve.from(e.baseUri)))}u(poe,"markdownStringEqual");function moe(o){return o.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}u(moe,"escapeMarkdownSyntaxTokens");function fC(o){return o.replace(/"/g,"&quot;")}u(fC,"escapeDoubleQuotes");function zx(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}u(zx,"removeMarkdownEscapes");function boe(o){const e=[],t=o.split("|").map(i=>i.trim());o=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),r=i?i[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:o,dimensions:e}}u(boe,"parseHrefAndDimensions");var fD=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function _oe(o,e){Ki(e)?o.title=s2(e):e?.markdownNotSupportedFallback?o.title=e.markdownNotSupportedFallback:o.removeAttribute("title")}u(_oe,"setupNativeHover");class uB{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var i;return fD(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Ki(e)||e instanceof HTMLElement)s=e;else if(!Zy(e.markdown))s=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(p("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new ci;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)})}show(e,t,n){const i=this._hoverWidget;if(this.hasContent(e)){const s=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i},n);this._hoverWidget=this.hoverDelegate.showHover(s,t)}i?.dispose()}hasContent(e){return e?qb(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}u(uB,"UpdatableHoverWidget");function hB(o,e,t,n){let i,s;const r=u((h,g)=>{var f;const m=s!==void 0;h&&(s?.dispose(),s=void 0),g&&(i?.dispose(),i=void 0),m&&((f=o.onDidHideHover)===null||f===void 0||f.call(o))},"hideHover"),a=u((h,g,f)=>new io(()=>fD(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new uB(o,f||e,h>0),yield s.update(t,g,n))}),h),"triggerShowHover"),l=u(()=>{if(i)return;const h=new X,g=u(b=>r(!1,b.fromElement===e),"onMouseLeave");h.add($(e,ae.MOUSE_LEAVE,g,!0));const f=u(()=>r(!0,!0),"onMouseDown");h.add($(e,ae.MOUSE_DOWN,f,!0));const m={targetElements:[e],dispose:()=>{}};if(o.placement===void 0||o.placement==="mouse"){const b=u(_=>{m.x=_.x+10,_.target instanceof HTMLElement&&_.target.classList.contains("action-label")&&r(!0,!0)},"onMouseMove");h.add($(e,ae.MOUSE_MOVE,b,!0))}h.add(a(o.delay,!1,m)),i=h},"onMouseOver"),c=$(e,ae.MOUSE_OVER,l,!0);return{show:h=>{r(!1,!0),a(0,h)},hide:()=>{r(!0,!0)},update:(h,g)=>fD(this,void 0,void 0,function*(){t=h,yield s?.update(t,void 0,g)}),dispose:()=>{c.dispose(),r(!0,!0)}}}u(hB,"setupCustomHover");function voe(o,e={}){const t=o2(e);return t.textContent=o,t}u(voe,"renderText");function gB(o,e={}){const t=o2(e);return pB(t,Coe(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}u(gB,"renderFormattedText");function o2(o){const e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}u(o2,"createElement");class fB{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}u(fB,"StringStream");function pB(o,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(pn(s,"click",r=>{t.callback(String(e.index),r)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=o);i&&o!==i&&o.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{pB(i,s,t,n)})}u(pB,"_renderFormattedText");function Coe(o,e){const t={type:1,children:[]};let n=0,i=t;const s=[],r=new fB(o);for(;!r.eos();){let a=r.next();const l=a==="\\"&&pD(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&yoe(a,e)&&a===r.peek()){r.advance(),i.type===2&&(i=s.pop());const c=pD(a,e);if(i.type===c||i.type===5&&c===6)i=s.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),i.children.push(d),s.push(i),i=d}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const c={type:2,content:a};i.children.push(c),s.push(i),i=c}else i.content+=a}return i.type===2&&(i=s.pop()),t}u(Coe,"parseFormattedText");function yoe(o,e){return pD(o,e)!==0}u(yoe,"isFormatTag");function pD(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}u(pD,"formatTagType");const woe=new RegExp(`(\\\\)?\\$\\((${xe.iconNameExpression}(?:${xe.iconModifierExpression})?)\\)`,"g");function Gu(o){const e=new Array;let t,n=0,i=0;for(;(t=woe.exec(o))!==null;){i=t.index||0,n<i&&e.push(o.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,r]=t;e.push(s?`$(${r})`:Soe({id:r}))}return n<o.length&&e.push(o.substring(n)),e}u(Gu,"renderLabelWithIcons");function Soe(o){const e=ie("span");return e.classList.add(...xe.asClassNameArray(o)),e}u(Soe,"renderIcon");class zS{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}u(zS,"IdGenerator");const mD=new zS("id#");let Xi={};(function(){function o(e,t){t(Xi)}u(o,"define"),o.amd=!0,function(e,t){typeof o=="function"&&o.amd?o(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(J,j){for(var K=0;K<j.length;K++){var I=j[K];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(J,I.key,I)}}u(t,"_defineProperties");function n(J,j,K){return j&&t(J.prototype,j),K&&t(J,K),Object.defineProperty(J,"prototype",{writable:!1}),J}u(n,"_createClass");function i(J,j){if(J){if(typeof J=="string")return s(J,j);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor&&(K=J.constructor.name),K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return s(J,j)}}u(i,"_unsupportedIterableToArray");function s(J,j){(j==null||j>J.length)&&(j=J.length);for(var K=0,I=new Array(j);K<j;K++)I[K]=J[K];return I}u(s,"_arrayLikeToArray");function r(J,j){var K=typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K)return(K=K.call(J)).next.bind(K);if(Array.isArray(J)||(K=i(J))||j&&J&&typeof J.length=="number"){K&&(J=K);var I=0;return function(){return I>=J.length?{done:!0}:{done:!1,value:J[I++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(r,"_createForOfIteratorHelperLoose");function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}u(a,"getDefaults"),e.defaults=a();function l(J){e.defaults=J}u(l,"changeDefaults");var c=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,g=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},m=u(function(j){return f[j]},"getEscapeReplacement");function b(J,j){if(j){if(c.test(J))return J.replace(d,m)}else if(h.test(J))return J.replace(g,m);return J}u(b,"escape");var _=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function C(J){return J.replace(_,function(j,K){return K=K.toLowerCase(),K==="colon"?":":K.charAt(0)==="#"?K.charAt(1)==="x"?String.fromCharCode(parseInt(K.substring(2),16)):String.fromCharCode(+K.substring(1)):""})}u(C,"unescape");var v=/(^|[^\[])\^/g;function y(J,j){J=typeof J=="string"?J:J.source,j=j||"";var K={replace:u(function(R,B){return B=B.source||B,B=B.replace(v,"$1"),J=J.replace(R,B),K},"replace"),getRegex:u(function(){return new RegExp(J,j)},"getRegex")};return K}u(y,"edit");var w=/[^\w:]/g,x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function M(J,j,K){if(J){var I;try{I=decodeURIComponent(C(K)).replace(w,"").toLowerCase()}catch{return null}if(I.indexOf("javascript:")===0||I.indexOf("vbscript:")===0||I.indexOf("data:")===0)return null}j&&!x.test(K)&&(K=P(j,K));try{K=encodeURI(K).replace(/%25/g,"%")}catch{return null}return K}u(M,"cleanUrl");var L={},E=/^[^:]+:\/*[^/]*$/,k=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;function P(J,j){L[" "+J]||(E.test(J)?L[" "+J]=J+"/":L[" "+J]=fe(J,"/",!0)),J=L[" "+J];var K=J.indexOf(":")===-1;return j.substring(0,2)==="//"?K?j:J.replace(k,"$1")+j:j.charAt(0)==="/"?K?j:J.replace(O,"$1")+j:J+j}u(P,"resolveUrl");var H={exec:u(function(){},"noopTest")};function G(J){for(var j=1,K,I;j<arguments.length;j++){K=arguments[j];for(I in K)Object.prototype.hasOwnProperty.call(K,I)&&(J[I]=K[I])}return J}u(G,"merge");function se(J,j){var K=J.replace(/\|/g,function(B,V,Q){for(var ce=!1,ye=V;--ye>=0&&Q[ye]==="\\";)ce=!ce;return ce?"|":" |"}),I=K.split(/ \|/),R=0;if(I[0].trim()||I.shift(),I.length>0&&!I[I.length-1].trim()&&I.pop(),I.length>j)I.splice(j);else for(;I.length<j;)I.push("");for(;R<I.length;R++)I[R]=I[R].trim().replace(/\\\|/g,"|");return I}u(se,"splitCells");function fe(J,j,K){var I=J.length;if(I===0)return"";for(var R=0;R<I;){var B=J.charAt(I-R-1);if(B===j&&!K)R++;else if(B!==j&&K)R++;else break}return J.slice(0,I-R)}u(fe,"rtrim");function Le(J,j){if(J.indexOf(j[1])===-1)return-1;for(var K=J.length,I=0,R=0;R<K;R++)if(J[R]==="\\")R++;else if(J[R]===j[0])I++;else if(J[R]===j[1]&&(I--,I<0))return R;return-1}u(Le,"findClosingBracket");function Fe(J){J&&J.sanitize&&!J.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u(Fe,"checkSanitizeDeprecation");function Ge(J,j){if(j<1)return"";for(var K="";j>1;)j&1&&(K+=J),j>>=1,J+=J;return K+J}u(Ge,"repeatString");function ke(J,j,K,I){var R=j.href,B=j.title?b(j.title):null,V=J[1].replace(/\\([\[\]])/g,"$1");if(J[0].charAt(0)!=="!"){I.state.inLink=!0;var Q={type:"link",raw:K,href:R,title:B,text:V,tokens:I.inlineTokens(V)};return I.state.inLink=!1,Q}return{type:"image",raw:K,href:R,title:B,text:b(V)}}u(ke,"outputLink");function et(J,j){var K=J.match(/^(\s+)(?:```)/);if(K===null)return j;var I=K[1];return j.split(`
`).map(function(R){var B=R.match(/^\s+/);if(B===null)return R;var V=B[0];return V.length>=I.length?R.slice(I.length):R}).join(`
`)}u(et,"indentCodeCompensation");var Je=function(){function J(K){this.options=K||e.defaults}u(J,"Tokenizer");var j=J.prototype;return j.space=u(function(I){var R=this.rules.block.newline.exec(I);if(R&&R[0].length>0)return{type:"space",raw:R[0]}},"space"),j.code=u(function(I){var R=this.rules.block.code.exec(I);if(R){var B=R[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:R[0],codeBlockStyle:"indented",text:this.options.pedantic?B:fe(B,`
`)}}},"code"),j.fences=u(function(I){var R=this.rules.block.fences.exec(I);if(R){var B=R[0],V=et(B,R[3]||"");return{type:"code",raw:B,lang:R[2]?R[2].trim():R[2],text:V}}},"fences"),j.heading=u(function(I){var R=this.rules.block.heading.exec(I);if(R){var B=R[2].trim();if(/#$/.test(B)){var V=fe(B,"#");(this.options.pedantic||!V||/ $/.test(V))&&(B=V.trim())}return{type:"heading",raw:R[0],depth:R[1].length,text:B,tokens:this.lexer.inline(B)}}},"heading"),j.hr=u(function(I){var R=this.rules.block.hr.exec(I);if(R)return{type:"hr",raw:R[0]}},"hr"),j.blockquote=u(function(I){var R=this.rules.block.blockquote.exec(I);if(R){var B=R[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:R[0],tokens:this.lexer.blockTokens(B,[]),text:B}}},"blockquote"),j.list=u(function(I){var R=this.rules.block.list.exec(I);if(R){var B,V,Q,ce,ye,Ee,ze,We,Mt,vt,Ie,Ln,tn=R[1].trim(),ro=tn.length>1,rn={type:"list",raw:"",ordered:ro,start:ro?+tn.slice(0,-1):"",loose:!1,items:[]};tn=ro?"\\d{1,9}\\"+tn.slice(-1):"\\"+tn,this.options.pedantic&&(tn=ro?tn:"[*+-]");for(var Xn=new RegExp("^( {0,3}"+tn+")((?:[	 ][^\\n]*)?(?:\\n|$))");I&&(Ln=!1,!(!(R=Xn.exec(I))||this.rules.block.hr.test(I)));){if(B=R[0],I=I.substring(B.length),We=R[2].split(`
`,1)[0],Mt=I.split(`
`,1)[0],this.options.pedantic?(ce=2,Ie=We.trimLeft()):(ce=R[2].search(/[^ ]/),ce=ce>4?1:ce,Ie=We.slice(ce),ce+=R[1].length),Ee=!1,!We&&/^ *$/.test(Mt)&&(B+=Mt+`
`,I=I.substring(Mt.length+1),Ln=!0),!Ln)for(var Wd=new RegExp("^ {0,"+Math.min(3,ce-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Is=new RegExp("^ {0,"+Math.min(3,ce-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Qr=new RegExp("^ {0,"+Math.min(3,ce-1)+"}(?:```|~~~)"),pc=new RegExp("^ {0,"+Math.min(3,ce-1)+"}#");I&&(vt=I.split(`
`,1)[0],We=vt,this.options.pedantic&&(We=We.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Qr.test(We)||pc.test(We)||Wd.test(We)||Is.test(I)));){if(We.search(/[^ ]/)>=ce||!We.trim())Ie+=`
`+We.slice(ce);else if(!Ee)Ie+=`
`+We;else break;!Ee&&!We.trim()&&(Ee=!0),B+=vt+`
`,I=I.substring(vt.length+1)}rn.loose||(ze?rn.loose=!0:/\n *\n *$/.test(B)&&(ze=!0)),this.options.gfm&&(V=/^\[[ xX]\] /.exec(Ie),V&&(Q=V[0]!=="[ ] ",Ie=Ie.replace(/^\[[ xX]\] +/,""))),rn.items.push({type:"list_item",raw:B,task:!!V,checked:Q,loose:!1,text:Ie}),rn.raw+=B}rn.items[rn.items.length-1].raw=B.trimRight(),rn.items[rn.items.length-1].text=Ie.trimRight(),rn.raw=rn.raw.trimRight();var Bd=rn.items.length;for(ye=0;ye<Bd;ye++){this.lexer.state.top=!1,rn.items[ye].tokens=this.lexer.blockTokens(rn.items[ye].text,[]);var Ud=rn.items[ye].tokens.filter(function(ao){return ao.type==="space"}),Gd=Ud.every(function(ao){for(var B0=ao.raw.split(""),Sm=0,U0=r(B0),G0;!(G0=U0()).done;){var Xe=G0.value;if(Xe===`
`&&(Sm+=1),Sm>1)return!0}return!1});!rn.loose&&Ud.length&&Gd&&(rn.loose=!0,rn.items[ye].loose=!0)}return rn}},"list"),j.html=u(function(I){var R=this.rules.block.html.exec(I);if(R){var B={type:"html",raw:R[0],pre:!this.options.sanitizer&&(R[1]==="pre"||R[1]==="script"||R[1]==="style"),text:R[0]};if(this.options.sanitize){var V=this.options.sanitizer?this.options.sanitizer(R[0]):b(R[0]);B.type="paragraph",B.text=V,B.tokens=this.lexer.inline(V)}return B}},"html"),j.def=u(function(I){var R=this.rules.block.def.exec(I);if(R){R[3]&&(R[3]=R[3].substring(1,R[3].length-1));var B=R[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:B,raw:R[0],href:R[2],title:R[3]}}},"def"),j.table=u(function(I){var R=this.rules.block.table.exec(I);if(R){var B={type:"table",header:se(R[1]).map(function(ze){return{text:ze}}),align:R[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:R[3]&&R[3].trim()?R[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(B.header.length===B.align.length){B.raw=R[0];var V=B.align.length,Q,ce,ye,Ee;for(Q=0;Q<V;Q++)/^ *-+: *$/.test(B.align[Q])?B.align[Q]="right":/^ *:-+: *$/.test(B.align[Q])?B.align[Q]="center":/^ *:-+ *$/.test(B.align[Q])?B.align[Q]="left":B.align[Q]=null;for(V=B.rows.length,Q=0;Q<V;Q++)B.rows[Q]=se(B.rows[Q],B.header.length).map(function(ze){return{text:ze}});for(V=B.header.length,ce=0;ce<V;ce++)B.header[ce].tokens=this.lexer.inline(B.header[ce].text);for(V=B.rows.length,ce=0;ce<V;ce++)for(Ee=B.rows[ce],ye=0;ye<Ee.length;ye++)Ee[ye].tokens=this.lexer.inline(Ee[ye].text);return B}}},"table"),j.lheading=u(function(I){var R=this.rules.block.lheading.exec(I);if(R)return{type:"heading",raw:R[0],depth:R[2].charAt(0)==="="?1:2,text:R[1],tokens:this.lexer.inline(R[1])}},"lheading"),j.paragraph=u(function(I){var R=this.rules.block.paragraph.exec(I);if(R){var B=R[1].charAt(R[1].length-1)===`
`?R[1].slice(0,-1):R[1];return{type:"paragraph",raw:R[0],text:B,tokens:this.lexer.inline(B)}}},"paragraph"),j.text=u(function(I){var R=this.rules.block.text.exec(I);if(R)return{type:"text",raw:R[0],text:R[0],tokens:this.lexer.inline(R[0])}},"text"),j.escape=u(function(I){var R=this.rules.inline.escape.exec(I);if(R)return{type:"escape",raw:R[0],text:b(R[1])}},"escape$1"),j.tag=u(function(I){var R=this.rules.inline.tag.exec(I);if(R)return!this.lexer.state.inLink&&/^<a /i.test(R[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(R[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(R[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(R[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:R[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(R[0]):b(R[0]):R[0]}},"tag"),j.link=u(function(I){var R=this.rules.inline.link.exec(I);if(R){var B=R[2].trim();if(!this.options.pedantic&&/^</.test(B)){if(!/>$/.test(B))return;var V=fe(B.slice(0,-1),"\\");if((B.length-V.length)%2===0)return}else{var Q=Le(R[2],"()");if(Q>-1){var ce=R[0].indexOf("!")===0?5:4,ye=ce+R[1].length+Q;R[2]=R[2].substring(0,Q),R[0]=R[0].substring(0,ye).trim(),R[3]=""}}var Ee=R[2],ze="";if(this.options.pedantic){var We=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ee);We&&(Ee=We[1],ze=We[3])}else ze=R[3]?R[3].slice(1,-1):"";return Ee=Ee.trim(),/^</.test(Ee)&&(this.options.pedantic&&!/>$/.test(B)?Ee=Ee.slice(1):Ee=Ee.slice(1,-1)),ke(R,{href:Ee&&Ee.replace(this.rules.inline._escapes,"$1"),title:ze&&ze.replace(this.rules.inline._escapes,"$1")},R[0],this.lexer)}},"link"),j.reflink=u(function(I,R){var B;if((B=this.rules.inline.reflink.exec(I))||(B=this.rules.inline.nolink.exec(I))){var V=(B[2]||B[1]).replace(/\s+/g," ");if(V=R[V.toLowerCase()],!V||!V.href){var Q=B[0].charAt(0);return{type:"text",raw:Q,text:Q}}return ke(B,V,B[0],this.lexer)}},"reflink"),j.emStrong=u(function(I,R,B){B===void 0&&(B="");var V=this.rules.inline.emStrong.lDelim.exec(I);if(V&&!(V[3]&&B.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Q=V[1]||V[2]||"";if(!Q||Q&&(B===""||this.rules.inline.punctuation.exec(B))){var ce=V[0].length-1,ye,Ee,ze=ce,We=0,Mt=V[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Mt.lastIndex=0,R=R.slice(-1*I.length+ce);(V=Mt.exec(R))!=null;)if(ye=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!!ye){if(Ee=ye.length,V[3]||V[4]){ze+=Ee;continue}else if((V[5]||V[6])&&ce%3&&!((ce+Ee)%3)){We+=Ee;continue}if(ze-=Ee,!(ze>0)){if(Ee=Math.min(Ee,Ee+ze+We),Math.min(ce,Ee)%2){var vt=I.slice(1,ce+V.index+Ee);return{type:"em",raw:I.slice(0,ce+V.index+Ee+1),text:vt,tokens:this.lexer.inlineTokens(vt)}}var Ie=I.slice(2,ce+V.index+Ee-1);return{type:"strong",raw:I.slice(0,ce+V.index+Ee+1),text:Ie,tokens:this.lexer.inlineTokens(Ie)}}}}}},"emStrong"),j.codespan=u(function(I){var R=this.rules.inline.code.exec(I);if(R){var B=R[2].replace(/\n/g," "),V=/[^ ]/.test(B),Q=/^ /.test(B)&&/ $/.test(B);return V&&Q&&(B=B.substring(1,B.length-1)),B=b(B,!0),{type:"codespan",raw:R[0],text:B}}},"codespan"),j.br=u(function(I){var R=this.rules.inline.br.exec(I);if(R)return{type:"br",raw:R[0]}},"br"),j.del=u(function(I){var R=this.rules.inline.del.exec(I);if(R)return{type:"del",raw:R[0],text:R[2],tokens:this.lexer.inlineTokens(R[2])}},"del"),j.autolink=u(function(I,R){var B=this.rules.inline.autolink.exec(I);if(B){var V,Q;return B[2]==="@"?(V=b(this.options.mangle?R(B[1]):B[1]),Q="mailto:"+V):(V=b(B[1]),Q=V),{type:"link",raw:B[0],text:V,href:Q,tokens:[{type:"text",raw:V,text:V}]}}},"autolink"),j.url=u(function(I,R){var B;if(B=this.rules.inline.url.exec(I)){var V,Q;if(B[2]==="@")V=b(this.options.mangle?R(B[0]):B[0]),Q="mailto:"+V;else{var ce;do ce=B[0],B[0]=this.rules.inline._backpedal.exec(B[0])[0];while(ce!==B[0]);V=b(B[0]),B[1]==="www."?Q="http://"+V:Q=V}return{type:"link",raw:B[0],text:V,href:Q,tokens:[{type:"text",raw:V,text:V}]}}},"url"),j.inlineText=u(function(I,R){var B=this.rules.inline.text.exec(I);if(B){var V;return this.lexer.state.inRawBlock?V=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(B[0]):b(B[0]):B[0]:V=b(this.options.smartypants?R(B[0]):B[0]),{type:"text",raw:B[0],text:V}}},"inlineText"),J}(),be={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:H,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};be._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,be._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,be.def=y(be.def).replace("label",be._label).replace("title",be._title).getRegex(),be.bullet=/(?:[*+-]|\d{1,9}[.)])/,be.listItemStart=y(/^( *)(bull) */).replace("bull",be.bullet).getRegex(),be.list=y(be.list).replace(/bull/g,be.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+be.def.source+")").getRegex(),be._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",be._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,be.html=y(be.html,"i").replace("comment",be._comment).replace("tag",be._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),be.paragraph=y(be._paragraph).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.blockquote=y(be.blockquote).replace("paragraph",be.paragraph).getRegex(),be.normal=G({},be),be.gfm=G({},be.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),be.gfm.table=y(be.gfm.table).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.gfm.paragraph=y(be._paragraph).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",be.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.pedantic=G({},be.normal,{html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",be._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H,paragraph:y(be.normal._paragraph).replace("hr",be.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",be.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var we={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:H,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:H,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};we._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",we.punctuation=y(we.punctuation).replace(/punctuation/g,we._punctuation).getRegex(),we.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,we.escapedEmSt=/\\\*|\\_/g,we._comment=y(be._comment).replace("(?:-->|$)","-->").getRegex(),we.emStrong.lDelim=y(we.emStrong.lDelim).replace(/punct/g,we._punctuation).getRegex(),we.emStrong.rDelimAst=y(we.emStrong.rDelimAst,"g").replace(/punct/g,we._punctuation).getRegex(),we.emStrong.rDelimUnd=y(we.emStrong.rDelimUnd,"g").replace(/punct/g,we._punctuation).getRegex(),we._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,we._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,we._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,we.autolink=y(we.autolink).replace("scheme",we._scheme).replace("email",we._email).getRegex(),we._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,we.tag=y(we.tag).replace("comment",we._comment).replace("attribute",we._attribute).getRegex(),we._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,we._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,we._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,we.link=y(we.link).replace("label",we._label).replace("href",we._href).replace("title",we._title).getRegex(),we.reflink=y(we.reflink).replace("label",we._label).replace("ref",be._label).getRegex(),we.nolink=y(we.nolink).replace("ref",be._label).getRegex(),we.reflinkSearch=y(we.reflinkSearch,"g").replace("reflink",we.reflink).replace("nolink",we.nolink).getRegex(),we.normal=G({},we),we.pedantic=G({},we.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",we._label).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",we._label).getRegex()}),we.gfm=G({},we.normal,{escape:y(we.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),we.gfm.url=y(we.gfm.url,"i").replace("email",we.gfm._extended_email).getRegex(),we.breaks=G({},we.gfm,{br:y(we.br).replace("{2,}","*").getRegex(),text:y(we.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function kt(J){return J.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}u(kt,"smartypants");function As(J){var j="",K,I,R=J.length;for(K=0;K<R;K++)I=J.charCodeAt(K),Math.random()>.5&&(I="x"+I.toString(16)),j+="&#"+I+";";return j}u(As,"mangle");var Yn=function(){function J(K){this.tokens=[],this.tokens.links=Object.create(null),this.options=K||e.defaults,this.options.tokenizer=this.options.tokenizer||new Je,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var I={block:be.normal,inline:we.normal};this.options.pedantic?(I.block=be.pedantic,I.inline=we.pedantic):this.options.gfm&&(I.block=be.gfm,this.options.breaks?I.inline=we.breaks:I.inline=we.gfm),this.tokenizer.rules=I}u(J,"Lexer"),J.lex=u(function(I,R){var B=new J(R);return B.lex(I)},"lex"),J.lexInline=u(function(I,R){var B=new J(R);return B.inlineTokens(I)},"lexInline");var j=J.prototype;return j.lex=u(function(I){I=I.replace(/\r\n|\r/g,`
`),this.blockTokens(I,this.tokens);for(var R;R=this.inlineQueue.shift();)this.inlineTokens(R.src,R.tokens);return this.tokens},"lex"),j.blockTokens=u(function(I,R){var B=this;R===void 0&&(R=[]),this.options.pedantic?I=I.replace(/\t/g,"    ").replace(/^ +$/gm,""):I=I.replace(/^( *)(\t+)/gm,function(ze,We,Mt){return We+"    ".repeat(Mt.length)});for(var V,Q,ce,ye;I;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(ze){return(V=ze.call({lexer:B},I,R))?(I=I.substring(V.raw.length),R.push(V),!0):!1}))){if(V=this.tokenizer.space(I)){I=I.substring(V.raw.length),V.raw.length===1&&R.length>0?R[R.length-1].raw+=`
`:R.push(V);continue}if(V=this.tokenizer.code(I)){I=I.substring(V.raw.length),Q=R[R.length-1],Q&&(Q.type==="paragraph"||Q.type==="text")?(Q.raw+=`
`+V.raw,Q.text+=`
`+V.text,this.inlineQueue[this.inlineQueue.length-1].src=Q.text):R.push(V);continue}if(V=this.tokenizer.fences(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.heading(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.hr(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.blockquote(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.list(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.html(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.def(I)){I=I.substring(V.raw.length),Q=R[R.length-1],Q&&(Q.type==="paragraph"||Q.type==="text")?(Q.raw+=`
`+V.raw,Q.text+=`
`+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=Q.text):this.tokens.links[V.tag]||(this.tokens.links[V.tag]={href:V.href,title:V.title});continue}if(V=this.tokenizer.table(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.lheading(I)){I=I.substring(V.raw.length),R.push(V);continue}if(ce=I,this.options.extensions&&this.options.extensions.startBlock&&function(){var ze=1/0,We=I.slice(1),Mt=void 0;B.options.extensions.startBlock.forEach(function(vt){Mt=vt.call({lexer:this},We),typeof Mt=="number"&&Mt>=0&&(ze=Math.min(ze,Mt))}),ze<1/0&&ze>=0&&(ce=I.substring(0,ze+1))}(),this.state.top&&(V=this.tokenizer.paragraph(ce))){Q=R[R.length-1],ye&&Q.type==="paragraph"?(Q.raw+=`
`+V.raw,Q.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q.text):R.push(V),ye=ce.length!==I.length,I=I.substring(V.raw.length);continue}if(V=this.tokenizer.text(I)){I=I.substring(V.raw.length),Q=R[R.length-1],Q&&Q.type==="text"?(Q.raw+=`
`+V.raw,Q.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Q.text):R.push(V);continue}if(I){var Ee="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(Ee);break}else throw new Error(Ee)}}return this.state.top=!0,R},"blockTokens"),j.inline=u(function(I,R){return R===void 0&&(R=[]),this.inlineQueue.push({src:I,tokens:R}),R},"inline"),j.inlineTokens=u(function(I,R){var B=this;R===void 0&&(R=[]);var V,Q,ce,ye=I,Ee,ze,We;if(this.tokens.links){var Mt=Object.keys(this.tokens.links);if(Mt.length>0)for(;(Ee=this.tokenizer.rules.inline.reflinkSearch.exec(ye))!=null;)Mt.includes(Ee[0].slice(Ee[0].lastIndexOf("[")+1,-1))&&(ye=ye.slice(0,Ee.index)+"["+Ge("a",Ee[0].length-2)+"]"+ye.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ee=this.tokenizer.rules.inline.blockSkip.exec(ye))!=null;)ye=ye.slice(0,Ee.index)+"["+Ge("a",Ee[0].length-2)+"]"+ye.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ee=this.tokenizer.rules.inline.escapedEmSt.exec(ye))!=null;)ye=ye.slice(0,Ee.index)+"++"+ye.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;I;)if(ze||(We=""),ze=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ie){return(V=Ie.call({lexer:B},I,R))?(I=I.substring(V.raw.length),R.push(V),!0):!1}))){if(V=this.tokenizer.escape(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.tag(I)){I=I.substring(V.raw.length),Q=R[R.length-1],Q&&V.type==="text"&&Q.type==="text"?(Q.raw+=V.raw,Q.text+=V.text):R.push(V);continue}if(V=this.tokenizer.link(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.reflink(I,this.tokens.links)){I=I.substring(V.raw.length),Q=R[R.length-1],Q&&V.type==="text"&&Q.type==="text"?(Q.raw+=V.raw,Q.text+=V.text):R.push(V);continue}if(V=this.tokenizer.emStrong(I,ye,We)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.codespan(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.br(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.del(I)){I=I.substring(V.raw.length),R.push(V);continue}if(V=this.tokenizer.autolink(I,As)){I=I.substring(V.raw.length),R.push(V);continue}if(!this.state.inLink&&(V=this.tokenizer.url(I,As))){I=I.substring(V.raw.length),R.push(V);continue}if(ce=I,this.options.extensions&&this.options.extensions.startInline&&function(){var Ie=1/0,Ln=I.slice(1),tn=void 0;B.options.extensions.startInline.forEach(function(ro){tn=ro.call({lexer:this},Ln),typeof tn=="number"&&tn>=0&&(Ie=Math.min(Ie,tn))}),Ie<1/0&&Ie>=0&&(ce=I.substring(0,Ie+1))}(),V=this.tokenizer.inlineText(ce,kt)){I=I.substring(V.raw.length),V.raw.slice(-1)!=="_"&&(We=V.raw.slice(-1)),ze=!0,Q=R[R.length-1],Q&&Q.type==="text"?(Q.raw+=V.raw,Q.text+=V.text):R.push(V);continue}if(I){var vt="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(vt);break}else throw new Error(vt)}}return R},"inlineTokens"),n(J,null,[{key:"rules",get:u(function(){return{block:be,inline:we}},"get")}]),J}(),lr=function(){function J(K){this.options=K||e.defaults}u(J,"Renderer");var j=J.prototype;return j.code=u(function(I,R,B){var V=(R||"").match(/\S*/)[0];if(this.options.highlight){var Q=this.options.highlight(I,V);Q!=null&&Q!==I&&(B=!0,I=Q)}return I=I.replace(/\n$/,"")+`
`,V?'<pre><code class="'+this.options.langPrefix+b(V,!0)+'">'+(B?I:b(I,!0))+`</code></pre>
`:"<pre><code>"+(B?I:b(I,!0))+`</code></pre>
`},"code"),j.blockquote=u(function(I){return`<blockquote>
`+I+`</blockquote>
`},"blockquote"),j.html=u(function(I){return I},"html"),j.heading=u(function(I,R,B,V){if(this.options.headerIds){var Q=this.options.headerPrefix+V.slug(B);return"<h"+R+' id="'+Q+'">'+I+"</h"+R+`>
`}return"<h"+R+">"+I+"</h"+R+`>
`},"heading"),j.hr=u(function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},"hr"),j.list=u(function(I,R,B){var V=R?"ol":"ul",Q=R&&B!==1?' start="'+B+'"':"";return"<"+V+Q+`>
`+I+"</"+V+`>
`},"list"),j.listitem=u(function(I){return"<li>"+I+`</li>
`},"listitem"),j.checkbox=u(function(I){return"<input "+(I?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},"checkbox"),j.paragraph=u(function(I){return"<p>"+I+`</p>
`},"paragraph"),j.table=u(function(I,R){return R&&(R="<tbody>"+R+"</tbody>"),`<table>
<thead>
`+I+`</thead>
`+R+`</table>
`},"table"),j.tablerow=u(function(I){return`<tr>
`+I+`</tr>
`},"tablerow"),j.tablecell=u(function(I,R){var B=R.header?"th":"td",V=R.align?"<"+B+' align="'+R.align+'">':"<"+B+">";return V+I+("</"+B+`>
`)},"tablecell"),j.strong=u(function(I){return"<strong>"+I+"</strong>"},"strong"),j.em=u(function(I){return"<em>"+I+"</em>"},"em"),j.codespan=u(function(I){return"<code>"+I+"</code>"},"codespan"),j.br=u(function(){return this.options.xhtml?"<br/>":"<br>"},"br"),j.del=u(function(I){return"<del>"+I+"</del>"},"del"),j.link=u(function(I,R,B){if(I=M(this.options.sanitize,this.options.baseUrl,I),I===null)return B;var V='<a href="'+b(I)+'"';return R&&(V+=' title="'+R+'"'),V+=">"+B+"</a>",V},"link"),j.image=u(function(I,R,B){if(I=M(this.options.sanitize,this.options.baseUrl,I),I===null)return B;var V='<img src="'+I+'" alt="'+B+'"';return R&&(V+=' title="'+R+'"'),V+=this.options.xhtml?"/>":">",V},"image"),j.text=u(function(I){return I},"text"),J}(),hc=function(){function J(){}u(J,"TextRenderer");var j=J.prototype;return j.strong=u(function(I){return I},"strong"),j.em=u(function(I){return I},"em"),j.codespan=u(function(I){return I},"codespan"),j.del=u(function(I){return I},"del"),j.html=u(function(I){return I},"html"),j.text=u(function(I){return I},"text"),j.link=u(function(I,R,B){return""+B},"link"),j.image=u(function(I,R,B){return""+B},"image"),j.br=u(function(){return""},"br"),J}(),Vd=function(){function J(){this.seen={}}u(J,"Slugger");var j=J.prototype;return j.serialize=u(function(I){return I.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},"serialize"),j.getNextSafeSlug=u(function(I,R){var B=I,V=0;if(this.seen.hasOwnProperty(B)){V=this.seen[I];do V++,B=I+"-"+V;while(this.seen.hasOwnProperty(B))}return R||(this.seen[I]=V,this.seen[B]=0),B},"getNextSafeSlug"),j.slug=u(function(I,R){R===void 0&&(R={});var B=this.serialize(I);return this.getNextSafeSlug(B,R.dryrun)},"slug"),J}(),cr=function(){function J(K){this.options=K||e.defaults,this.options.renderer=this.options.renderer||new lr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new hc,this.slugger=new Vd}u(J,"Parser"),J.parse=u(function(I,R){var B=new J(R);return B.parse(I)},"parse"),J.parseInline=u(function(I,R){var B=new J(R);return B.parseInline(I)},"parseInline");var j=J.prototype;return j.parse=u(function(I,R){R===void 0&&(R=!0);var B="",V,Q,ce,ye,Ee,ze,We,Mt,vt,Ie,Ln,tn,ro,rn,Xn,Wd,Is,Qr,pc,Bd=I.length;for(V=0;V<Bd;V++){if(Ie=I[V],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ie.type]&&(pc=this.options.extensions.renderers[Ie.type].call({parser:this},Ie),pc!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ie.type))){B+=pc||"";continue}switch(Ie.type){case"space":continue;case"hr":{B+=this.renderer.hr();continue}case"heading":{B+=this.renderer.heading(this.parseInline(Ie.tokens),Ie.depth,C(this.parseInline(Ie.tokens,this.textRenderer)),this.slugger);continue}case"code":{B+=this.renderer.code(Ie.text,Ie.lang,Ie.escaped);continue}case"table":{for(Mt="",We="",ye=Ie.header.length,Q=0;Q<ye;Q++)We+=this.renderer.tablecell(this.parseInline(Ie.header[Q].tokens),{header:!0,align:Ie.align[Q]});for(Mt+=this.renderer.tablerow(We),vt="",ye=Ie.rows.length,Q=0;Q<ye;Q++){for(ze=Ie.rows[Q],We="",Ee=ze.length,ce=0;ce<Ee;ce++)We+=this.renderer.tablecell(this.parseInline(ze[ce].tokens),{header:!1,align:Ie.align[ce]});vt+=this.renderer.tablerow(We)}B+=this.renderer.table(Mt,vt);continue}case"blockquote":{vt=this.parse(Ie.tokens),B+=this.renderer.blockquote(vt);continue}case"list":{for(Ln=Ie.ordered,tn=Ie.start,ro=Ie.loose,ye=Ie.items.length,vt="",Q=0;Q<ye;Q++)Xn=Ie.items[Q],Wd=Xn.checked,Is=Xn.task,rn="",Xn.task&&(Qr=this.renderer.checkbox(Wd),ro?Xn.tokens.length>0&&Xn.tokens[0].type==="paragraph"?(Xn.tokens[0].text=Qr+" "+Xn.tokens[0].text,Xn.tokens[0].tokens&&Xn.tokens[0].tokens.length>0&&Xn.tokens[0].tokens[0].type==="text"&&(Xn.tokens[0].tokens[0].text=Qr+" "+Xn.tokens[0].tokens[0].text)):Xn.tokens.unshift({type:"text",text:Qr}):rn+=Qr),rn+=this.parse(Xn.tokens,ro),vt+=this.renderer.listitem(rn,Is,Wd);B+=this.renderer.list(vt,Ln,tn);continue}case"html":{B+=this.renderer.html(Ie.text);continue}case"paragraph":{B+=this.renderer.paragraph(this.parseInline(Ie.tokens));continue}case"text":{for(vt=Ie.tokens?this.parseInline(Ie.tokens):Ie.text;V+1<Bd&&I[V+1].type==="text";)Ie=I[++V],vt+=`
`+(Ie.tokens?this.parseInline(Ie.tokens):Ie.text);B+=R?this.renderer.paragraph(vt):vt;continue}default:{var Ud='Token with "'+Ie.type+'" type was not found.';if(this.options.silent){console.error(Ud);return}else throw new Error(Ud)}}}return B},"parse"),j.parseInline=u(function(I,R){R=R||this.renderer;var B="",V,Q,ce,ye=I.length;for(V=0;V<ye;V++){if(Q=I[V],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q.type]&&(ce=this.options.extensions.renderers[Q.type].call({parser:this},Q),ce!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Q.type))){B+=ce||"";continue}switch(Q.type){case"escape":{B+=R.text(Q.text);break}case"html":{B+=R.html(Q.text);break}case"link":{B+=R.link(Q.href,Q.title,this.parseInline(Q.tokens,R));break}case"image":{B+=R.image(Q.href,Q.title,Q.text);break}case"strong":{B+=R.strong(this.parseInline(Q.tokens,R));break}case"em":{B+=R.em(this.parseInline(Q.tokens,R));break}case"codespan":{B+=R.codespan(Q.text);break}case"br":{B+=R.br();break}case"del":{B+=R.del(this.parseInline(Q.tokens,R));break}case"text":{B+=R.text(Q.text);break}default:{var Ee='Token with "'+Q.type+'" type was not found.';if(this.options.silent){console.error(Ee);return}else throw new Error(Ee)}}}return B},"parseInline"),J}();function $e(J,j,K){if(typeof J>"u"||J===null)throw new Error("marked(): input parameter is undefined or null");if(typeof J!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(J)+", string expected");if(typeof j=="function"&&(K=j,j=null),j=G({},$e.defaults,j||{}),Fe(j),K){var I=j.highlight,R;try{R=Yn.lex(J,j)}catch(ye){return K(ye)}var B=u(function(Ee){var ze;if(!Ee)try{j.walkTokens&&$e.walkTokens(R,j.walkTokens),ze=cr.parse(R,j)}catch(We){Ee=We}return j.highlight=I,Ee?K(Ee):K(null,ze)},"done");if(!I||I.length<3||(delete j.highlight,!R.length))return B();var V=0;$e.walkTokens(R,function(ye){ye.type==="code"&&(V++,setTimeout(function(){I(ye.text,ye.lang,function(Ee,ze){if(Ee)return B(Ee);ze!=null&&ze!==ye.text&&(ye.text=ze,ye.escaped=!0),V--,V===0&&B()})},0))}),V===0&&B();return}function Q(ye){if(ye.message+=`
Please report this to https://github.com/markedjs/marked.`,j.silent)return"<p>An error occurred:</p><pre>"+b(ye.message+"",!0)+"</pre>";throw ye}u(Q,"onError");try{var ce=Yn.lex(J,j);if(j.walkTokens){if(j.async)return Promise.all($e.walkTokens(ce,j.walkTokens)).then(function(){return cr.parse(ce,j)}).catch(Q);$e.walkTokens(ce,j.walkTokens)}return cr.parse(ce,j)}catch(ye){Q(ye)}}u($e,"marked"),$e.options=$e.setOptions=function(J){return G($e.defaults,J),l($e.defaults),$e},$e.getDefaults=a,$e.defaults=e.defaults,$e.use=function(){for(var J=arguments.length,j=new Array(J),K=0;K<J;K++)j[K]=arguments[K];var I=G.apply(void 0,[{}].concat(j)),R=$e.defaults.extensions||{renderers:{},childTokens:{}},B;j.forEach(function(V){if(V.extensions&&(B=!0,V.extensions.forEach(function(ce){if(!ce.name)throw new Error("extension name required");if(ce.renderer){var ye=R.renderers?R.renderers[ce.name]:null;ye?R.renderers[ce.name]=function(){for(var Ee=arguments.length,ze=new Array(Ee),We=0;We<Ee;We++)ze[We]=arguments[We];var Mt=ce.renderer.apply(this,ze);return Mt===!1&&(Mt=ye.apply(this,ze)),Mt}:R.renderers[ce.name]=ce.renderer}if(ce.tokenizer){if(!ce.level||ce.level!=="block"&&ce.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");R[ce.level]?R[ce.level].unshift(ce.tokenizer):R[ce.level]=[ce.tokenizer],ce.start&&(ce.level==="block"?R.startBlock?R.startBlock.push(ce.start):R.startBlock=[ce.start]:ce.level==="inline"&&(R.startInline?R.startInline.push(ce.start):R.startInline=[ce.start]))}ce.childTokens&&(R.childTokens[ce.name]=ce.childTokens)})),V.renderer&&function(){var ce=$e.defaults.renderer||new lr,ye=u(function(We){var Mt=ce[We];ce[We]=function(){for(var vt=arguments.length,Ie=new Array(vt),Ln=0;Ln<vt;Ln++)Ie[Ln]=arguments[Ln];var tn=V.renderer[We].apply(ce,Ie);return tn===!1&&(tn=Mt.apply(ce,Ie)),tn}},"_loop");for(var Ee in V.renderer)ye(Ee);I.renderer=ce}(),V.tokenizer&&function(){var ce=$e.defaults.tokenizer||new Je,ye=u(function(We){var Mt=ce[We];ce[We]=function(){for(var vt=arguments.length,Ie=new Array(vt),Ln=0;Ln<vt;Ln++)Ie[Ln]=arguments[Ln];var tn=V.tokenizer[We].apply(ce,Ie);return tn===!1&&(tn=Mt.apply(ce,Ie)),tn}},"_loop2");for(var Ee in V.tokenizer)ye(Ee);I.tokenizer=ce}(),V.walkTokens){var Q=$e.defaults.walkTokens;I.walkTokens=function(ce){var ye=[];return ye.push(V.walkTokens.call(this,ce)),Q&&(ye=ye.concat(Q.call(this,ce))),ye}}B&&(I.extensions=R),$e.setOptions(I)})},$e.walkTokens=function(J,j){for(var K=[],I=u(function(){var Q=B.value;switch(K=K.concat(j.call($e,Q)),Q.type){case"table":{for(var ce=r(Q.header),ye;!(ye=ce()).done;){var Ee=ye.value;K=K.concat($e.walkTokens(Ee.tokens,j))}for(var ze=r(Q.rows),We;!(We=ze()).done;)for(var Mt=We.value,vt=r(Mt),Ie;!(Ie=vt()).done;){var Ln=Ie.value;K=K.concat($e.walkTokens(Ln.tokens,j))}break}case"list":{K=K.concat($e.walkTokens(Q.items,j));break}default:$e.defaults.extensions&&$e.defaults.extensions.childTokens&&$e.defaults.extensions.childTokens[Q.type]?$e.defaults.extensions.childTokens[Q.type].forEach(function(tn){K=K.concat($e.walkTokens(Q[tn],j))}):Q.tokens&&(K=K.concat($e.walkTokens(Q.tokens,j)))}},"_loop3"),R=r(J),B;!(B=R()).done;)I();return K},$e.parseInline=function(J,j){if(typeof J>"u"||J===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof J!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(J)+", string expected");j=G({},$e.defaults,j||{}),Fe(j);try{var K=Yn.lexInline(J,j);return j.walkTokens&&$e.walkTokens(K,j.walkTokens),cr.parseInline(K,j)}catch(I){if(I.message+=`
Please report this to https://github.com/markedjs/marked.`,j.silent)return"<p>An error occurred:</p><pre>"+b(I.message+"",!0)+"</pre>";throw I}},$e.Parser=cr,$e.parser=cr.parse,$e.Renderer=lr,$e.TextRenderer=hc,$e.Lexer=Yn,$e.lexer=Yn.lex,$e.Tokenizer=Je,$e.Slugger=Vd,$e.parse=$e;var gc=$e.options,ym=$e.setOptions,wm=$e.use,fc=$e.walkTokens,bg=$e.parseInline,V0=$e,_g=cr.parse,W0=Yn.lex;e.Lexer=Yn,e.Parser=cr,e.Renderer=lr,e.Slugger=Vd,e.TextRenderer=hc,e.Tokenizer=Je,e.getDefaults=a,e.lexer=W0,e.marked=$e,e.options=gc,e.parse=V0,e.parseInline=bg,e.parser=_g,e.setOptions=ym,e.use=wm,e.walkTokens=fc,Object.defineProperty(e,"__esModule",{value:!0})})})();Xi.Lexer||exports.Lexer;Xi.Parser||exports.Parser;Xi.Renderer||exports.Renderer;Xi.Slugger||exports.Slugger;Xi.TextRenderer||exports.TextRenderer;Xi.Tokenizer||exports.Tokenizer;Xi.getDefaults||exports.getDefaults;Xi.lexer||exports.lexer;var Lr=Xi.marked||exports.marked;Xi.options||exports.options;Xi.parse||exports.parse;Xi.parseInline||exports.parseInline;Xi.parser||exports.parser;Xi.setOptions||exports.setOptions;Xi.use||exports.use;Xi.walkTokens||exports.walkTokens;function Rw(o){let e=JSON.parse(o);return e=bD(e),e}u(Rw,"parse$1");function bD(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return ve.revive(o);case 2:return new RegExp(o.source,o.flags);case 16:return new Date(o.source)}if(o instanceof Iv||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=bD(o[t],e+1);else for(const t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=bD(o[t],e+1))}return o}u(bD,"revive");const Kx=Object.freeze({image:(o,e,t)=>{let n=[],i=[];return o&&({href:o,dimensions:n}=boe(o),i.push(`src="${fC(o)}"`)),t&&i.push(`alt="${fC(t)}"`),e&&i.push(`title="${fC(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph:o=>`<p>${o}</p>`,link:(o,e,t)=>typeof o!="string"?"":(o===t&&(t=zx(t)),e=typeof e=="string"?fC(zx(e)):"",o=zx(o),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${o}" title="${e||o}">${t}</a>`)});function r2(o,e={},t={}){var n,i;const s=new X;let r=!1;const a=o2(e),l=u(function(C){let v;try{v=Rw(decodeURIComponent(C))}catch{}return v?(v=t5(v,y=>{if(o.uris&&o.uris[y])return ve.revive(o.uris[y])}),encodeURIComponent(JSON.stringify(v))):C},"_uriMassage"),c=u(function(C,v){const y=o.uris&&o.uris[C];let w=ve.revive(y);return v?C.startsWith(Ue.data+":")?C:(w||(w=ve.parse(C)),e7.uriToBrowserUri(w).toString(!0)):!w||ve.parse(C).toString()===w.toString()?C:(w.query&&(w=w.with({query:l(w.query)})),w.toString())},"_href"),d=new Lr.Renderer;d.image=Kx.image,d.link=Kx.link,d.paragraph=Kx.paragraph;const h=[],g=[];if(e.codeBlockRendererSync?d.code=(C,v)=>{const y=mD.nextId(),w=e.codeBlockRendererSync(CO(v),C);return g.push([y,w]),`<div class="code" data-code="${y}">${sw(C)}</div>`}:e.codeBlockRenderer&&(d.code=(C,v)=>{const y=mD.nextId(),w=e.codeBlockRenderer(CO(v),C);return h.push(w.then(x=>[y,x])),`<div class="code" data-code="${y}">${sw(C)}</div>`}),e.actionHandler){const C=u(function(w){let x=w.target;if(!(x.tagName!=="A"&&(x=x.parentElement,!x||x.tagName!=="A")))try{let M=x.dataset.href;M&&(o.baseUri&&(M=jx(ve.from(o.baseUri),M)),e.actionHandler.callback(M,w))}catch(M){He(M)}finally{w.preventDefault()}},"_activateLink"),v=e.actionHandler.disposables.add(new qe(a,"click")),y=e.actionHandler.disposables.add(new qe(a,"auxclick"));e.actionHandler.disposables.add(pe.any(v.event,y.event)(w=>{const x=new jo(w);!x.leftButton&&!x.middleButton||C(x)})),e.actionHandler.disposables.add($(a,"keydown",w=>{const x=new Et(w);!x.equals(10)&&!x.equals(3)||C(x)}))}o.supportHtml||(t.sanitizer=C=>(o.isTrusted?C.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?C:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(n=o.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),o.supportThemeIcons&&(f=hoe(f));let m;if(e.fillInIncompleteTokens){const C=Object.assign(Object.assign({},Lr.defaults),t),v=Lr.lexer(f,C),y=Aoe(v);m=Lr.parser(y,C)}else m=Lr.parse(f,t);o.supportThemeIcons&&(m=Gu(m).map(v=>typeof v=="string"?v:v.outerHTML).join(""));const _=new DOMParser().parseFromString(_D(o,m),"text/html");if(_.body.querySelectorAll("img").forEach(C=>{const v=C.getAttribute("src");if(v){let y=v;try{o.baseUri&&(y=jx(ve.from(o.baseUri),y))}catch{}C.src=c(y,!0)}}),_.body.querySelectorAll("a").forEach(C=>{const v=C.getAttribute("href");if(C.setAttribute("href",""),!v||/^data:|javascript:/i.test(v)||/^command:/i.test(v)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(v))C.replaceWith(...C.childNodes);else{let y=c(v,!1);o.baseUri&&(y=jx(ve.from(o.baseUri),v)),C.dataset.href=y}}),a.innerHTML=_D(o,_.body.innerHTML),h.length>0)Promise.all(h).then(C=>{var v,y;if(r)return;const w=new Map(C),x=a.querySelectorAll("div[data-code]");for(const M of x){const L=w.get((v=M.dataset.code)!==null&&v!==void 0?v:"");L&&nr(M,L)}(y=e.asyncRenderCallback)===null||y===void 0||y.call(e)});else if(g.length>0){const C=new Map(g),v=a.querySelectorAll("div[data-code]");for(const y of v){const w=C.get((i=y.dataset.code)!==null&&i!==void 0?i:"");w&&nr(y,w)}}if(e.asyncRenderCallback)for(const C of a.getElementsByTagName("img")){const v=s.add($(C,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,s.dispose()}}}u(r2,"renderMarkdown");function CO(o){if(!o)return"";const e=o.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:o}u(CO,"postProcessCodeBlockLanguageId");function jx(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?$F(o,e).toString():$F(DS(o),e).toString()}u(jx,"resolveWithBaseUri");function _D(o,e){const{config:t,allowedSchemes:n}=xoe(o);X3("uponSanitizeAttribute",(s,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(s.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const i=Oee(n);try{return Y3(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{Z3("uponSanitizeAttribute"),i.dispose()}}u(_D,"sanitizeRenderedMarkdown");const Toe=["align","autoplay","alt","class","controls","data-code","data-href","height","href","loop","muted","playsinline","poster","src","style","target","title","width","start"];function xoe(o){const e=[Ue.http,Ue.https,Ue.mailto,Ue.data,Ue.file,Ue.vscodeFileResource,Ue.vscodeRemote,Ue.vscodeRemoteResource];return o.isTrusted&&e.push(Ue.command),{config:{ALLOWED_TAGS:[...Hee],ALLOWED_ATTR:Toe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}u(xoe,"getSanitizerOptions");function Loe(o){return typeof o=="string"?o:Eoe(o)}u(Loe,"renderStringAsPlaintext");function Eoe(o){var e;let t=(e=o.value)!==null&&e!==void 0?e:"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=Lr.parse(t,{renderer:Doe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>{var s;return(s=koe.get(i))!==null&&s!==void 0?s:i});return _D({isTrusted:!1},n).toString()}u(Eoe,"renderMarkdownAsPlaintext");const koe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),Doe=new tc(()=>{const o=new Lr.Renderer;return o.code=e=>e,o.blockquote=e=>e,o.html=e=>"",o.heading=(e,t,n)=>e+`
`,o.hr=()=>"",o.list=(e,t)=>e,o.listitem=e=>e+`
`,o.paragraph=e=>e+`
`,o.table=(e,t)=>e+t+`
`,o.tablerow=e=>e,o.tablecell=(e,t)=>e+" ",o.strong=e=>e,o.em=e=>e,o.codespan=e=>e,o.br=()=>`
`,o.del=e=>e,o.image=(e,t,n)=>"",o.text=e=>e,o.link=(e,t,n)=>n,o});function KS(o){let e="";return o.forEach(t=>{e+=t.raw}),e}u(KS,"mergeRawTokenText");function mB(o){const e=o.tokens[0];if(e.type==="text"){const t=e.raw.split(`
`),n=t[t.length-1];if(n.includes("`"))return Noe(o);if(n.includes("**"))return Hoe(o);if(n.match(/\*\w/))return Roe(o);if(n.match(/(^|\s)__\w/))return Voe(o);if(n.match(/(^|\s)_\w/))return Poe(o);if(n.match(/(^|\s)\[.*\]\(\w*/))return Foe(o);if(n.match(/(^|\s)\[\w/))return Ooe(o)}}u(mB,"completeSingleLinePattern");function Moe(o){const e=o.items[o.items.length-1],t=mB(e);if(!t||t.type!=="list")return;const n=Lr.lexer(KS(o.items.slice(0,o.items.length-1))+t.items[0].raw);if(n.length===1&&n[0].type==="list")return n[0]}u(Moe,"completeListItemPattern");function Aoe(o){let e,t;for(e=0;e<o.length;e++){const n=o[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)```/)){t=Ioe(o.slice(e));break}if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=Woe(o.slice(e));break}if(e===o.length-1&&n.type==="list"){const i=Moe(n);if(i){t=[i];break}}if(e===o.length-1&&n.type==="paragraph"){const i=mB(n);if(i){t=[i];break}}}if(t){const n=[...o.slice(0,e),...t];return n.links=o.links,n}return o}u(Aoe,"fillInIncompleteTokens");function Ioe(o){const e=KS(o);return Lr.lexer(e+"\n```")}u(Ioe,"completeCodeBlock");function Noe(o){return Qh(o,"`")}u(Noe,"completeCodespan");function Roe(o){return Qh(o,"*")}u(Roe,"completeStar");function Poe(o){return Qh(o,"_")}u(Poe,"completeUnderscore");function Foe(o){return Qh(o,")")}u(Foe,"completeLinkTarget");function Ooe(o){return Qh(o,"](about:blank)")}u(Ooe,"completeLinkText");function Hoe(o){return Qh(o,"**")}u(Hoe,"completeDoublestar");function Voe(o){return Qh(o,"__")}u(Voe,"completeDoubleUnderscore");function Qh(o,e){const t=KS(Array.isArray(o)?o:[o]);return Lr.lexer(t+e)[0]}u(Qh,"completeWithString");function Woe(o){const e=KS(o),t=e.split(`
`);let n,i=!1;for(let s=0;s<t.length;s++){const r=t[s].trim();if(typeof n>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(r.match(/^\s*\|/)){if(s!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){const s=i?t.slice(0,-1).join(`
`):e,r=!!s.match(/\|\s*$/),a=s+(r?"":"|")+`
|${" --- |".repeat(n)}`;return Lr.lexer(a)}}u(Woe,"completeTable");class bB{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}u(bB,"CombinedSpliceable");function ms(o,e,t){return Math.min(Math.max(o,e),t)}u(ms,"clamp");class a2{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}u(a2,"MovingAverage");class _B{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}u(_B,"SlidingWindowAverage");class ou extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}u(ou,"ListError");var Ci;(function(o){function e(s,r){if(s.start>=r.end||r.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,r.start),l=Math.min(s.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}u(e,"intersect"),o.intersect=e;function t(s){return s.end-s.start<=0}u(t,"isEmpty"),o.isEmpty=t;function n(s,r){return!t(e(s,r))}u(n,"intersects"),o.intersects=n;function i(s,r){const a=[],l={start:s.start,end:Math.min(r.start,s.end)},c={start:Math.max(r.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}u(i,"relativeComplement"),o.relativeComplement=i})(Ci||(Ci={}));function yO(o,e){const t=[];for(const n of e){if(o.start>=n.range.end)continue;if(o.end<n.range.start)break;const i=Ci.intersect(o,n.range);Ci.isEmpty(i)||t.push({range:i,size:n.size})}return t}u(yO,"groupIntersect");function vD({start:o,end:e},t){return{start:o+t,end:e+t}}u(vD,"shift");function Boe(o){const e=[];let t=null;for(const n of o){const i=n.range.start,s=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:r},e.push(t)}return e}u(Boe,"consolidate");function Uoe(...o){return Boe(o.reduce((e,t)=>e.concat(t),[]))}u(Uoe,"concat");class CD{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,s=yO({start:0,end:e},this.groups),r=yO({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:vD(l.range,i),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=Uoe(s,a,r),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=s,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s;if(e<r)return t+(e-n)*i.size;t+=s*i.size,n=r}return-1}}u(CD,"RangeMap");function Goe(o){var e;try{(e=o.parentElement)===null||e===void 0||e.removeChild(o)}catch{}}u(Goe,"removeFromParent");class vB{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const i=ie(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),Goe(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}u(vB,"RowCache");var sc=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const qd={CurrentDragAndDropData:void 0},ta={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class om{constructor(e){this.elements=e}update(){}getData(){return this.elements}}u(om,"ElementsDragAndDropData");class CB{constructor(e){this.elements=e}update(){}getData(){return this.elements}}u(CB,"ExternalElementsDragAndDropData");class yB{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}u(yB,"NativeDragAndDropData");function zoe(o,e){return Array.isArray(o)&&Array.isArray(e)?pi(o,e):o===e}u(zoe,"equalsDragFeedback");class wB{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}u(wB,"ListViewAccessibilityProvider");class so{get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:_x(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,i=ta){var s,r,a,l,c,d,h,g,f,m,b,_;if(this.virtualDelegate=t,this.domId=`list_id_${++so.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new tr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=z.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=z.None,this.onDragLeaveTimeout=z.None,this.disposables=new X,this._onDidChangeContentHeight=new F,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new CD;for(const v of n)this.renderers.set(v.templateId,v);this.cache=this.disposables.add(new vB(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=(s=i.horizontalScrolling)!==null&&s!==void 0?s:ta.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new wB(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((r=i.transformOptimization)!==null&&r!==void 0?r:ta.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Tt.addTarget(this.rowsContainer)),this.scrollable=new Qp({forceIntegerValues:!0,smoothScrollDuration:(a=i.smoothScrolling)!==null&&a!==void 0&&a?125:0,scheduleAtNextAnimationFrame:v=>Eo(v)}),this.scrollableElement=this.disposables.add(new pS(this.rowsContainer,{alwaysConsumeMouseWheel:(l=i.alwaysConsumeMouseWheel)!==null&&l!==void 0?l:ta.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=i.verticalScrollMode)!==null&&c!==void 0?c:ta.verticalScrollMode,useShadows:(d=i.useShadows)!==null&&d!==void 0?d:ta.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add($(this.rowsContainer,Dt.Change,v=>this.onTouchChange(v))),this.disposables.add($(this.scrollableElement.getDomNode(),"scroll",v=>v.target.scrollTop=0)),this.disposables.add($(this.domNode,"dragover",v=>this.onDragOver(this.toDragEvent(v)))),this.disposables.add($(this.domNode,"drop",v=>this.onDrop(this.toDragEvent(v)))),this.disposables.add($(this.domNode,"dragleave",v=>this.onDragLeave(this.toDragEvent(v)))),this.disposables.add($(this.domNode,"dragend",v=>this.onDragEnd(v))),this.setRowLineHeight=(h=i.setRowLineHeight)!==null&&h!==void 0?h:ta.setRowLineHeight,this.setRowHeight=(g=i.setRowHeight)!==null&&g!==void 0?g:ta.setRowHeight,this.supportDynamicHeights=(f=i.supportDynamicHeights)!==null&&f!==void 0?f:ta.supportDynamicHeights,this.dnd=(m=i.dnd)!==null&&m!==void 0?m:ta.dnd,this.layout((b=i.initialSize)===null||b===void 0?void 0:b.height,(_=i.initialSize)===null||_===void 0?void 0:_.width)}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;e.scrollByPage!==void 0&&(t=Object.assign(Object.assign({},t??{}),{scrollByPage:e.scrollByPage})),e.mouseWheelScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),e.fastScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=Ci.intersect(i,s),a=new Map;for(let M=r.end-1;M>=r.start;M--){const L=this.items[M];if(L.dragStartDisposable.dispose(),L.checkedDisposable.dispose(),L.row){let E=a.get(L.templateId);E||(E=[],a.set(L.templateId,E));const k=this.renderers.get(L.templateId);k&&k.disposeElement&&k.disposeElement(L.element,M,L.row.templateData,L.size),E.push(L.row)}L.row=null}const l={start:e+t,end:this.items.length},c=Ci.intersect(l,i),d=Ci.relativeComplement(l,i),h=n.map(M=>({id:String(this.itemId++),element:M,templateId:this.virtualDelegate.getTemplateId(M),size:this.virtualDelegate.getHeight(M),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(M),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:z.None,checkedDisposable:z.None}));let g;e===0&&t>=this.items.length?(this.rangeMap=new CD,this.rangeMap.splice(0,0,h),g=this.items,this.items=h):(this.rangeMap.splice(e,t,h),g=this.items.splice(e,t,...h));const f=n.length-t,m=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=vD(c,f),_=Ci.intersect(m,b);for(let M=_.start;M<_.end;M++)this.updateItemInDOM(this.items[M],M);const C=Ci.relativeComplement(b,m);for(const M of C)for(let L=M.start;L<M.end;L++)this.removeItemFromDOM(L);const v=d.map(M=>vD(M,f)),w=[{start:e,end:e+n.length},...v].map(M=>Ci.intersect(m,M)),x=this.getNextToLastElement(w);for(const M of w)for(let L=M.start;L<M.end;L++){const E=this.items[L],k=a.get(E.templateId),O=k?.pop();this.insertItemInDOM(L,x,O)}for(const M of a.values())for(const L of M)this.cache.release(L);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(M=>M.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Eo(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),t=this.rangeMap.positionAt(e.start),n=this.rangeMap.positionAt(e.start+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e.start+1:e.start}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:kee(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:_x(this.domNode)})}render(e,t,n,i,s,r=!1){const a=this.getRenderRange(t,n),l=Ci.relativeComplement(a,e),c=Ci.relativeComplement(e,a),d=this.getNextToLastElement(l);if(r){const h=Ci.intersect(e,a);for(let g=h.start;g<h.end;g++)this.updateItemInDOM(this.items[g],g)}this.cache.transact(()=>{for(const h of c)for(let g=h.start;g<h.end;g++)this.removeItemFromDOM(g);for(const h of l)for(let g=h.start;g<h.end;g++)this.insertItemInDOM(g,d)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];let s=!1;if(!i.row)if(n)i.row=n;else{const d=this.cache.alloc(i.templateId);i.row=d.row,s=d.isReusingConnectedDomNode}const r=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",r);const a=this.accessibilityProvider.isChecked(i.element);if(typeof a=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!a));else if(a){const d=u(h=>i.row.domNode.setAttribute("aria-checked",String(!!h)),"update");d(a.value),i.checkedDisposable=a.onDidChange(d)}(s||!i.row.domNode.parentElement)&&(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const l=this.renderers.get(i.templateId);if(!l)throw new Error(`No renderer found for template id ${i.templateId}`);l?.renderElement(i.element,e,i.row.templateData,i.size);const c=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!c,c&&(i.dragStartDisposable=$(i.row.domNode,"dragstart",d=>this.onDragStart(i.element,c,d))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=_x(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return pe.map(this.disposables.add(new qe(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return pe.map(this.disposables.add(new qe(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return pe.filter(pe.map(this.disposables.add(new qe(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return pe.map(this.disposables.add(new qe(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return pe.map(this.disposables.add(new qe(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return pe.map(this.disposables.add(new qe(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return pe.any(pe.map(this.disposables.add(new qe(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),pe.map(this.disposables.add(new qe(this.domNode,Dt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return pe.map(this.disposables.add(new qe(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return pe.map(this.disposables.add(new qe(this.rowsContainer,Dt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var i,s;if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData($v.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,n)),typeof a>"u"&&(a=String(r.length));const l=ie(".monaco-drag-image");l.textContent=a;const d=u(h=>{for(;h&&!h.classList.contains("monaco-workbench");)h=h.parentElement;return h||document.body},"getDragImageContainer")(this.domNode);d.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>d.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new om(r),qd.CurrentDragAndDropData=new CB(r),(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),qd.CurrentDragAndDropData&&qd.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(qd.CurrentDragAndDropData)this.currentDragData=qd.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new yB}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let i;if(typeof n!="boolean"&&n.feedback?i=n.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=id(i).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),i=i[0]===-1?[-1]:i,zoe(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Oe(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of i){const r=this.items[s];r.dropTarget=!0,(t=r.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Oe(()=>{var s;for(const r of i){const a=this.items[r];a.dropTarget=!1,(s=a.row)===null||s===void 0||s.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=lh(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,qd.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,qd.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=z.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=i7(this.domNode).top;this.dragOverAnimationDisposable=Fee(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=lh(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,r;e===this.elementTop(i.start)?(s=i.start,r=0):i.end-i.start>1&&(s=i.start+1,r=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Ci.relativeComplement(i,l);for(const g of d)for(let f=g.start;f<g.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=Ci.relativeComplement(l,i);for(const g of h)for(let f=g.start;f<g.end;f++){const m=f+1,b=m<this.items.length?this.items[m].row:null,_=b?b.domNode:null;this.insertItemInDOM(f,_)}for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof s=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-r+g;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,i;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(s.element);if(c!==null){const d=s.size;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const r=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,s.lastDynamicHeightWidth=this.renderWidth,s.size-r;const{row:a}=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);if(!l)throw new Xr("Missing renderer for templateId: "+s.templateId);return l.renderElement(s.element,e,a.templateData,void 0),s.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0),(i=(n=this.virtualDelegate).setDynamicHeight)===null||i===void 0||i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const n=this.renderers.get(t.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,t.element,-1,t.row.templateData,void 0),n.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),mt(this.disposables)}}u(so,"ListView");so.InstanceCount=0;sc([mn],so.prototype,"onMouseClick",null);sc([mn],so.prototype,"onMouseDblClick",null);sc([mn],so.prototype,"onMouseMiddleClick",null);sc([mn],so.prototype,"onMouseDown",null);sc([mn],so.prototype,"onMouseOver",null);sc([mn],so.prototype,"onMouseOut",null);sc([mn],so.prototype,"onContextMenu",null);sc([mn],so.prototype,"onTouchStart",null);sc([mn],so.prototype,"onTap",null);var eg=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class SB{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}u(SB,"TraitRenderer");let Pw=u(class{get name(){return this._trait}get renderer(){return new SB(this)}constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new F,this.onChange=this._onChange.event}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,r=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,d)=>c?d+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=r).map(c=>c+s)],l=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(i=this.sortedIndexes.find(d=>d>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(TO),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=yD(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return s_(this.sortedIndexes,e,TO)>=0}dispose(){mt(this._onChange)}},"Trait");eg([mn],Pw.prototype,"renderer",null);class TB extends Pw{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}u(TB,"SelectionTrait");class my{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(r=>this.identityProvider.getId(this.view.element(r)).toString()),s=n.map(r=>i.indexOf(this.identityProvider.getId(r).toString())>-1);this.trait.splice(e,t,s)}}u(my,"TraitSpliceable");function Qc(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}u(Qc,"isInputElement");function sf(o){return o.classList.contains("monaco-editor")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:sf(o.parentElement)}u(sf,"isMonacoEditor");function xB(o){return o.tagName==="A"&&o.classList.contains("monaco-button")||o.tagName==="DIV"&&o.classList.contains("monaco-button-dropdown")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:xB(o.parentElement)}u(xB,"isButton");class l2{get onKeyDown(){return this.disposables.add(pe.chain(this.disposables.add(new qe(this.view.domNode,"keydown")).event).filter(e=>!Qc(e.target)).map(e=>new Et(e)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new X,this.multipleSelectionDisposables=new X,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(Ye?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(Ye?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Hi(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}u(l2,"KeyboardController");eg([mn],l2.prototype,"onKeyDown",null);var _a;(function(o){o[o.Automatic=0]="Automatic",o[o.Trigger=1]="Trigger"})(_a||(_a={}));var of;(function(o){o[o.Idle=0]="Idle",o[o.Typing=1]="Typing"})(of||(of={}));const Koe=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=93&&o.keyCode<=102||o.keyCode>=80&&o.keyCode<=90}};class LB{constructor(e,t,n,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=s,this.enabled=!1,this.state=of.Idle,this.mode=_a.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new X,this.disposables=new X,this.updateOptions(e.options)}updateOptions(e){var t,n;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(n=e.typeNavigationMode)!==null&&n!==void 0?n:_a.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(pe.chain(this.enabledDisposables.add(new qe(this.view.domNode,"keydown")).event)).filter(s=>!Qc(s.target)).filter(()=>this.mode===_a.Automatic||this.triggered).map(s=>new Et(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>Be.stop(s,!0)).map(s=>s.browserEvent.key).event,n=pe.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);pe.reduce(pe.any(t,n),(s,r)=>r===null?null:(s||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&ri(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=of.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===of.Idle?1:0;this.state=of.Typing;for(let s=0;s<this.list.length;s++){const r=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(typeof l>"u"||BS(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}u(LB,"TypeNavigationController");class EB{constructor(e,t){this.list=e,this.view=t,this.disposables=new X,this.disposables.add(pe.chain(this.disposables.add(new qe(t.domNode,"keydown")).event)).filter(i=>!Qc(i.target)).map(i=>new Et(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}u(EB,"DOMFocusController");function kB(o){return Ye?o.browserEvent.metaKey:o.browserEvent.ctrlKey}u(kB,"isSelectionSingleChangeEvent");function DB(o){return o.browserEvent.shiftKey}u(DB,"isSelectionRangeChangeEvent");function joe(o){return o instanceof MouseEvent&&o.button===2}u(joe,"isMouseRightClick");const SO={isSelectionSingleChangeEvent:kB,isSelectionRangeChangeEvent:DB};class c2{constructor(e){this.list=e,this.disposables=new X,this._onPointer=new F,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||SO),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Tt.addTarget(e.getHTMLElement()))),pe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||SO))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){sf(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Qc(e.browserEvent.target)||sf(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Qc(e.browserEvent.target)||sf(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),joe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Qc(e.browserEvent.target)||sf(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),r=Hi(i,s+1),a=this.list.getSelection(),l=Yoe(yD(a,[n]),n);if(l.length===0)return;const c=yD(r,Xoe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}u(c2,"MouseController");class d2{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,n;const i=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&s.push(`.monaco-list${i} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(s.push(`.monaco-list${i}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${i}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${i}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${i}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${i} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${i} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${i} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${i} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${i} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${i} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${i} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${i} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${i}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${i}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=Fu(e.listFocusAndSelectionOutline,Fu(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));r&&s.push(`.monaco-list${i}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=Fu(e.listSelectionOutline,(n=e.listInactiveFocusOutline)!==null&&n!==void 0?n:"");a&&s.push(`.monaco-list${i} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&s.push(`.monaco-list${i} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&s.push(`.monaco-list${i} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${i} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&s.push(`
				.monaco-list${i}.drop-target,
				.monaco-list${i} .monaco-list-rows.drop-target,
				.monaco-list${i} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&s.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&s.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=s.join(`
`)}}u(d2,"DefaultStyleController");const $oe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropBackground:"#383B3D",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:U.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:U.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:U.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},qoe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Yoe(o,e){const t=o.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&o[i]===e-(t-i);)n.push(o[i--]);for(n.reverse(),i=t;i<o.length&&o[i]===e+(i-t);)n.push(o[i++]);return n}u(Yoe,"getContiguousRangeContaining");function yD(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){t.push(o[n]),n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):t.push(e[i++]);return t}u(yD,"disjunction");function Xoe(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):i++;return t}u(Xoe,"relativeComplement");const TO=u((o,e)=>o-e,"numericSort");class MB{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const r of this.renderers)r.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){var s;let r=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,n[r],i),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}u(MB,"PipelineRenderer");class AB{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}u(AB,"AccessibiltyRenderer");class IB{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,r;(r=(s=this.dnd).onDragLeave)===null||r===void 0||r.call(s,e,t,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}u(IB,"ListViewDragAndDrop");class Ro{get onDidChangeFocus(){return pe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return pe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(pe.chain(this.disposables.add(new qe(this.view.domNode,"keydown")).event)).map(s=>new Et(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Be.stop(s,!0)).filter(()=>!1).event,n=this.disposables.add(pe.chain(this.disposables.add(new qe(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(s=>new Et(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Be.stop(s,!0)).map(({browserEvent:s})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:s}}).event,i=this.disposables.add(pe.chain(this.view.onContextMenu)).filter(s=>!e).map(({element:s,index:r,browserEvent:a})=>({element:s,index:r,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return pe.any(t,n,i)}get onKeyDown(){return this.disposables.add(new qe(this.view.domNode,"keydown")).event}get onDidFocus(){return pe.signal(this.disposables.add(new qe(this.view.domNode,"focus",!0)).event)}constructor(e,t,n,i,s=qoe){var r,a,l,c;this.user=e,this._options=s,this.focus=new Pw("focused"),this.anchor=new Pw("anchor"),this.eventBufferer=new V1,this._ariaLabel="",this.disposables=new X,this._onDidDispose=new F,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new TB(d!=="listbox");const h=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(h.push(new AB(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(f=>new MB(f.templateId,[...h,f]));const g=Object.assign(Object.assign({},s),{dnd:s.dnd&&new IB(this,s.dnd)});if(this.view=this.createListView(t,n,i,g),this.view.domNode.setAttribute("role",d),s.styleController)this.styleController=s.styleController(this.view.domId);else{const f=ko(this.view.domNode);this.styleController=new d2(f,this.view.domId)}if(this.spliceable=new bB([new my(this.focus,this.view,s.identityProvider),new my(this.selection,this.view,s.identityProvider),new my(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new EB(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new l2(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const f=s.keyboardNavigationDelegate||Koe;this.typeNavigationController=new LB(this,this.view,s.keyboardNavigationLabelProvider,(c=s.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,i){return new so(e,t,n,i)}createMouseController(e){return new c2(this)}updateOptions(e={}){var t,n;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)===null||n===void 0||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ou(this.user,`Invalid start index: ${e}`);if(t<0)throw new ou(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new ou(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ou(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return XH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new ou(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}focusNextPage(e,t){return wO(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){const s=this.findPreviousIndex(n,!1,t);s>-1&&i!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;n>i&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),yield ad(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return wO(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const r=this.findNextIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield ad(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new ou(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(sd(t)){const r=s-this.view.renderHeight;this.view.setScrollTop(r*ms(t,0,1)+i)}else{const r=i+s,a=n+this.view.renderHeight;i<n&&r>=a||(i<n||r>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}u(Ro,"List");eg([mn],Ro.prototype,"onDidChangeFocus",null);eg([mn],Ro.prototype,"onDidChangeSelection",null);eg([mn],Ro.prototype,"onContextMenu",null);eg([mn],Ro.prototype,"onKeyDown",null);eg([mn],Ro.prototype,"onDidFocus",null);const Eu=ie,NB="selectOption.entry.template";class RB{get templateId(){return NB}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=q(e,Eu(".option-text")),t.detail=q(e,Eu(".option-detail")),t.decoratorRight=q(e,Eu(".option-decorator-right")),t}renderElement(e,t,n){const i=n,s=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=s,i.detail.textContent=r||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}}u(RB,"SelectListRenderer");class Er extends z{constructor(e,t,n,i,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=i,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Er.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new F,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return NB}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ie(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=q(this.selectDropDownContainer,Eu(".select-box-details-pane"));const t=q(this.selectDropDownContainer,Eu(".select-box-dropdown-container-width-control")),n=q(t,Eu(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",q(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=ko(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register($(this.selectDropDownContainer,ae.DRAG_START,i=>{Be.stop(i,!0)}))}registerListeners(){this._register(pn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)})),this._register($(this.selectElement,ae.CLICK,t=>{Be.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register($(this.selectElement,ae.MOUSE_DOWN,t=>{Be.stop(t)}));let e;this._register($(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register($(this.selectElement,"touchend",t=>{Be.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register($(this.selectElement,ae.KEY_DOWN,t=>{const n=new Et(t);let i=!1;Ye?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),Be.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){pi(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,n;const i=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",r=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"";this.selectElement.style.backgroundColor=i,this.selectElement.style.color=s,this.selectElement.style.borderColor=r}styleList(){var e,t;const n=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",i=Fu(this.styles.selectListBackground,n);this.selectDropDownListContainer.style.backgroundColor=i,this.selectionDetailsPane.style.backgroundColor=i;const s=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Kn(this.selectElement),n=getComputedStyle(this.selectElement),i=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),s=window.innerHeight-t.top-t.height-(this.selectBoxOptions.minBottomMargin||0),r=t.top-Er.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),c=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,g=d+i+h,f=Math.floor((s-i-h)/this.getHeight()),m=Math.floor((r-i-h)/this.getHeight());if(e)return t.top+t.height>window.innerHeight-22||t.top<Er.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&m<1?!1:(f<Er.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(t.top+t.height>window.innerHeight-22||t.top<Er.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+m<1)return this.hideSelectDropDown(!0),!1;g>s&&(d=f*this.getHeight())}else g>r&&(d=m*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+i+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+i+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((s,r)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>i&&(n=r,i=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Vo(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=q(e,Eu(".select-box-dropdown-list-container")),this.listRenderer=new RB,this.selectList=new Ro("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let s=i.text;return i.detail&&(s+=`. ${i.detail}`),i.decoratorRight&&(s+=`. ${i.decoratorRight}`),i.description&&(s+=`. ${i.description}`),s},getWidgetAriaLabel:()=>p({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new qe(this.selectDropDownListContainer,"keydown")),n=pe.chain(t.event).filter(()=>this.selectList.length>0).map(i=>new Et(i));this._register(n.filter(i=>i.keyCode===3).on(i=>this.onEnter(i),this)),this._register(n.filter(i=>i.keyCode===2).on(i=>this.onEnter(i),this)),this._register(n.filter(i=>i.keyCode===9).on(i=>this.onEscape(i),this)),this._register(n.filter(i=>i.keyCode===16).on(i=>this.onUpArrow(i),this)),this._register(n.filter(i=>i.keyCode===18).on(i=>this.onDownArrow(i),this)),this._register(n.filter(i=>i.keyCode===12).on(this.onPageDown,this)),this._register(n.filter(i=>i.keyCode===11).on(this.onPageUp,this)),this._register(n.filter(i=>i.keyCode===14).on(this.onHome,this)),this._register(n.filter(i=>i.keyCode===13).on(this.onEnd,this)),this._register(n.filter(i=>i.keyCode>=21&&i.keyCode<=56||i.keyCode>=80&&i.keyCode<=108).on(this.onCharacter,this)),this._register($(this.selectList.getHTMLElement(),ae.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register($(this.selectDropDownContainer,ae.FOCUS_OUT,i=>{!this._isVisible||vo(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Be.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const i=Number(n.getAttribute("data-index")),s=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!s&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=u(s=>{for(let r=0;r<s.childNodes.length;r++){const a=s.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?s.removeChild(a):n(a)}},"cleanRenderedMarkdown"),i=r2({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,n;this.selectionDetailsPane.innerText="";const i=this.options[e],s=(t=i?.description)!==null&&t!==void 0?t:"",r=(n=i?.descriptionIsMarkdown)!==null&&n!==void 0?n:!1;if(s){if(r){const a=i.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(s,a))}else this.selectionDetailsPane.innerText=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Be.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Be.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Be.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Be.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Be.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Be.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Be.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Be.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=bl.toString(e.keyCode);let n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Be.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}u(Er,"SelectBoxList");Er.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;Er.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;Er.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class PB extends z{constructor(e,t,n,i){super(),this.selected=0,this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new F),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Tt.addTarget(this.selectElement)),[Dt.Tap].forEach(e=>{this._register($(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(pn(this.selectElement,"click",e=>{Be.stop(e,!0)})),this._register(pn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(pn(this.selectElement,"keydown",e=>{let t=!1;Ye?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!pi(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,n;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"")}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}}u(PB,"SelectBoxNative");class FB extends No{constructor(e,t,n,i,s){super(),Ye&&!s?.useCustomDrawn?this.selectBoxDelegate=new PB(e,t,i,s):this.selectBoxDelegate=new Er(e,t,n,i,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}u(FB,"SelectBox");class Uo extends z{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof cs&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new hh)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Tt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,To&&this._register($(e,ae.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData($v.TEXT,this._action.label)}))),this._register($(t,Dt.Tap,i=>this.onClick(i,!0))),this._register($(t,ae.MOUSE_DOWN,i=>{n||Be.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),Ye&&this._register($(t,ae.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register($(t,ae.CLICK,i=>{Be.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register($(t,ae.DBLCLICK,i=>{Be.stop(i,!0)})),[ae.MOUSE_UP,ae.MOUSE_OUT].forEach(i=>{this._register($(t,i,s=>{Be.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Be.stop(e,!0);const i=Ws(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.action.tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=hB(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}u(Uo,"BaseActionViewItem");class pp extends Uo{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=q(this.element,ie("a.action-label"))),this.label&&(this._action.id===Pn.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(q(this.element,ie("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=p({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.action.class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}u(pp,"ActionViewItem");class OB extends Uo{constructor(e,t,n,i,s,r,a){super(e,t),this.selectBox=new FB(n,i,s,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}}u(OB,"SelectActionViewItem");var Zoe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class eo extends z{constructor(e,t={}){var n,i,s,r,a,l;super(),this._actionRunnerDisposables=this._register(new X),this.viewItemDisposables=this._register(new O1),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new F),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new F({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new F),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new F),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(r=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new hh,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(h=>this._onWillRun.fire(h))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register($(this.domNode,ae.KEY_DOWN,h=>{const g=new Et(h);let f=!0;const m=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(g.equals(c[0])||g.equals(c[1]))?f=this.focusPrevious():d&&(g.equals(d[0])||g.equals(d[1]))?f=this.focusNext():g.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():g.equals(14)?f=this.focusFirst():g.equals(13)?f=this.focusLast():g.equals(2)&&m instanceof Uo&&m.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(g)?this._triggerKeys.keyDown?this.doTrigger(g):this.triggerKeyDown=!0:f=!1,f&&(g.preventDefault(),g.stopPropagation())})),this._register($(this.domNode,ae.KEY_UP,h=>{const g=new Et(h);this.isTriggerKeyEvent(g)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(g)),g.preventDefault(),g.stopPropagation()):(g.equals(2)||g.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Kl(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Yc()===this.domNode||!vo(Yc(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Uo&&n.isEnabled());t instanceof Uo&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Uo&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(vo(Yc(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=sd(t.index)?t.index:null;n.forEach(s=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l=Object.assign({hoverDelegate:this.options.hoverDelegate},t);this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new pp(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,$(r,ae.CONTEXT_MENU,c=>{Be.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Uo&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=mt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),kn(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Pn.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Pn.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let r=!0;Zy(s.focus)||(r=!1),this.options.focusOnlyEnabledItems&&Zy(s.isEnabled)&&!s.isEnabled()&&(r=!1),s.action.id===Pn.ID&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Uo){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return Zoe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){this._context=void 0,this.viewItems=mt(this.viewItems),this.getContainer().remove(),super.dispose()}}u(eo,"ActionBar");const Joe={IconContribution:"base.contributions.icons"};var xO;(function(o){function e(t,n){let i=t.defaults;for(;xe.isThemeIcon(i);){const s=tg.getIcon(i.id);if(!s)return;i=s.defaults}return i}u(e,"getDefinition"),o.getDefinition=e})(xO||(xO={}));var LO;(function(o){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}u(e,"toJSONObject"),o.toJSONObject=e;function t(n){const i=u(s=>Ki(s)?s:void 0,"stringOrUndef");if(n&&Array.isArray(n.src)&&n.src.every(s=>Ki(s.format)&&Ki(s.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(s=>({format:s.format,location:ve.parse(s.location)}))}}u(t,"fromJSONObject"),o.fromJSONObject=t})(LO||(LO={}));class HB{constructor(){this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:p("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${xe.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}const r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=u((s,r)=>s.id.localeCompare(r.id),"sorter"),t=u(s=>{for(;xe.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},"classNames"),n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${xe.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(r=>!xe.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}u(HB,"IconRegistry");const tg=new HB;Kt.add(Joe.IconContribution,tg);function bn(o,e,t,n){return tg.registerIcon(o,e,t,n)}u(bn,"registerIcon");function VB(){return tg}u(VB,"getIconRegistry");function Qoe(){const o=Q5();for(const e in o){const t="\\"+o[e].toString(16);tg.registerIcon(e,{fontCharacter:t})}}u(Qoe,"initialize");Qoe();const WB="vscode://schemas/icons",BB=Kt.as(Z1.JSONContribution);BB.registerSchema(WB,tg.getIconSchema());const EO=new yt(()=>BB.notifySchemaChanged(WB),200);tg.onDidChange(()=>{EO.isScheduled()||EO.schedule()});const UB=bn("widget-close",re.close,p("widgetClose","Icon for the close action in widgets."));bn("goto-previous-location",re.arrowUp,p("previousChangeIcon","Icon for goto previous editor location."));bn("goto-next-location",re.arrowDown,p("nextChangeIcon","Icon for goto next editor location."));xe.modify(re.sync,"spin");xe.modify(re.loading,"spin");var ere=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},kO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},tre=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},$x;const pC=3;class Vg{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}u(Vg,"DiffEntry");class by{constructor(e){this.entries=e}}u(by,"Diff");const nre=bn("diff-review-insert",re.add,p("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),ire=bn("diff-review-remove",re.remove,p("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),sre=bn("diff-review-close",re.close,p("diffReviewCloseIcon","Icon for 'Close' in diff review."));let Fw=u(class ru extends z{constructor(e,t,n){super(),this._languageService=t,this._audioCueService=n,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=dt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=dt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new eo(this.actionBarContainer.domNode)),this._actionBar.push(new cs("diffreview.close",p("label.close","Close"),"close-diff-review "+xe.asClassName(sre),!0,()=>tre(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=dt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=dt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new em(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(pn(this.domNode.domNode,"click",i=>{i.preventDefault();const s=s7(i.target,"diff-review-row");s&&this._goToRow(s)})),this._register(pn(this.domNode.domNode,"keydown",i=>{(i.equals(18)||i.equals(2066)||i.equals(530))&&(i.preventDefault(),this._goToRow(this._getNextRow(),"next")),(i.equals(16)||i.equals(2064)||i.equals(528))&&(i.preventDefault(),this._goToRow(this._getPrevRow(),"previous")),(i.equals(9)||i.equals(2057)||i.equals(521)||i.equals(1033)||i.equals(10)||i.equals(3))&&(i.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getPrevRow(),"previous")}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow(),"next")}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new W(e,1)),this._diffEditor.revealPosition(new W(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e,t){const n=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),n&&n!==e&&(n.tabIndex=-1);const i=t?t==="next"?n?.nextElementSibling:n?.previousElementSibling:n;i?.classList.contains("line-insert")?this._audioCueService.playAudioCue(pt.diffLineInserted,!0):i?.classList.contains("line-delete")&&this._audioCueService.playAudioCue(pt.diffLineDeleted,!0),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:ru._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];const i=[];let s=0;for(let c=0,d=e.length;c<d;c++){const h=e[c],g=h.originalStartLineNumber,f=h.originalEndLineNumber,m=h.modifiedStartLineNumber,b=h.modifiedEndLineNumber,_=[];let C=0;{const v=f===0?g:g-1,y=b===0?m:m-1;let w=1,x=1;if(c>0){const E=e[c-1];E.originalEndLineNumber===0?w=E.originalStartLineNumber+1:w=E.originalEndLineNumber+1,E.modifiedEndLineNumber===0?x=E.modifiedStartLineNumber+1:x=E.modifiedEndLineNumber+1}let M=v-pC+1,L=y-pC+1;if(M<w){const E=w-M;M=M+E,L=L+E}if(L<x){const E=x-L;M=M+E,L=L+E}_[C++]=new Vg(M,v,L,y)}f!==0&&(_[C++]=new Vg(g,f,0,0)),b!==0&&(_[C++]=new Vg(0,0,m,b));{const v=f===0?g+1:f+1,y=b===0?m+1:b+1;let w=t,x=n;if(c+1<d){const E=e[c+1];E.originalEndLineNumber===0?w=E.originalStartLineNumber:w=E.originalStartLineNumber-1,E.modifiedEndLineNumber===0?x=E.modifiedStartLineNumber:x=E.modifiedStartLineNumber-1}let M=v+pC-1,L=y+pC-1;if(M>w){const E=w-M;M=M+E,L=L+E}if(L>x){const E=x-L;M=M+E,L=L+E}_[C++]=new Vg(v,M,y,L)}i[s++]=new by(_)}let r=i[0].entries;const a=[];let l=0;for(let c=1,d=i.length;c<d;c++){const h=i[c].entries,g=r[r.length-1],f=h[0];if(g.getType()===0&&f.getType()===0&&f.originalLineStart<=g.originalLineEnd){r[r.length-1]=new Vg(g.originalLineStart,f.originalLineEnd,g.modifiedLineStart,f.modifiedLineEnd),r=r.concat(h.slice(1));continue}a[l++]=new by(r),r=h}return a[l++]=new by(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,r=s[s.length-1].modifiedLineEnd;if(t<=r)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),r=i.getOptions();if(!this._isVisible||!n||!i){kn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),ai(c,t.get(48));let d=0,h=0,g=0,f=0;for(let L=0,E=l.length;L<E;L++){const k=l[L],O=k.originalLineStart,P=k.originalLineEnd,H=k.modifiedLineStart,G=k.modifiedLineEnd;O!==0&&(d===0||O<d)&&(d=O),P!==0&&(h===0||P>h)&&(h=P),H!==0&&(g===0||H<g)&&(g=H),G!==0&&(f===0||G>f)&&(f=G)}const m=document.createElement("div");m.className="diff-review-row";const b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const _=h-d+1,C=f-g+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${_} +${g},${C} @@`)),m.setAttribute("data-line",String(g));const v=u(L=>L===0?p("no_lines_changed","no lines changed"):L===1?p("one_line_changed","1 line changed"):p("more_lines_changed","{0} lines changed",L),"getAriaLines"),y=v(_),w=v(C);m.setAttribute("aria-label",p({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,y,g,w)),m.appendChild(b),m.setAttribute("role","listitem"),c.appendChild(m);const x=t.get(64);let M=g;for(let L=0,E=l.length;L<E;L++){const k=l[L];ru._renderSection(c,k,M,x,this._width,e,n,s,t,i,r,this._languageService.languageIdCodec),k.modifiedLineStart!==0&&(M=k.modifiedLineEnd)}kn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,r,a,l,c,d,h,g){const f=t.getType();let m="diff-review-row",b="";const _="diff-review-spacer";let C=null;switch(f){case 1:m="diff-review-row line-insert",b=" char-insert",C=nre;break;case 2:m="diff-review-row line-delete",b=" char-delete",C=ire;break}const v=t.originalLineStart,y=t.originalLineEnd,w=t.modifiedLineStart,x=t.modifiedLineEnd,M=Math.max(x-w,y-v),L=r.get(139),E=L.glyphMarginWidth+L.lineNumbersWidth,k=c.get(139),O=10+k.glyphMarginWidth+k.lineNumbersWidth;for(let P=0;P<=M;P++){const H=v===0?0:v+P,G=w===0?0:w+P,se=document.createElement("div");se.style.minWidth=s+"px",se.className=m,se.setAttribute("role","listitem"),G!==0&&(n=G),se.setAttribute("data-line",String(n));const fe=document.createElement("div");fe.className="diff-review-cell",fe.style.height=`${i}px`,se.appendChild(fe);const Le=document.createElement("span");Le.style.width=E+"px",Le.style.minWidth=E+"px",Le.className="diff-review-line-number"+b,H!==0?Le.appendChild(document.createTextNode(String(H))):Le.innerText=" ",fe.appendChild(Le);const Fe=document.createElement("span");Fe.style.width=O+"px",Fe.style.minWidth=O+"px",Fe.style.paddingRight="10px",Fe.className="diff-review-line-number"+b,G!==0?Fe.appendChild(document.createTextNode(String(G))):Fe.innerText=" ",fe.appendChild(Fe);const Ge=document.createElement("span");if(Ge.className=_,C){const Je=document.createElement("span");Je.className=xe.asClassName(C),Je.innerText="  ",Ge.appendChild(Je)}else Ge.innerText="  ";fe.appendChild(Ge);let ke;if(G!==0){let Je=this._renderLine(d,c,h.tabSize,G,g);ru._ttPolicy&&(Je=ru._ttPolicy.createHTML(Je)),fe.insertAdjacentHTML("beforeend",Je),ke=d.getLineContent(G)}else{let Je=this._renderLine(a,r,l.tabSize,H,g);ru._ttPolicy&&(Je=ru._ttPolicy.createHTML(Je)),fe.insertAdjacentHTML("beforeend",Je),ke=a.getLineContent(H)}ke.length===0&&(ke=p("blankLine","blank"));let et="";switch(f){case 0:H===G?et=p({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",ke,H):et=p("equalLine","{0} original line {1} modified line {2}",ke,H,G);break;case 1:et=p("insertLine","+ {0} modified line {1}",ke,G);break;case 2:et=p("deleteLine","- {0} original line {1}",ke,H);break}se.setAttribute("aria-label",et),e.appendChild(se)}}static _renderLine(e,t,n,i,s){const r=e.getLineContent(i),a=t.get(48),l=En.createEmpty(r,s),c=Ls.isBasicASCII(r,e.mightContainNonBasicASCII()),d=Ls.containsRTL(r,c,e.mightContainRTL());return oS(new nc(a.isMonospace&&!t.get(31),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(112),t.get(94),t.get(89),t.get(49)!==vs.OFF,null)).html}},"DiffReview");Fw._ttPolicy=($x=window.trustedTypes)===null||$x===void 0?void 0:$x.createPolicy("diffReview",{createHTML:o=>o});Fw=ere([kO(1,Wt),kO(2,K1)],Fw);class GB extends de{constructor(){super({id:"editor.action.diffReview.next",label:p("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:Z.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=KB(e);n?.diffReviewNext()}}u(GB,"DiffReviewNext");class zB extends de{constructor(){super({id:"editor.action.diffReview.prev",label:p("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:Z.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=KB(e);n?.diffReviewPrev()}}u(zB,"DiffReviewPrev");function KB(o){const e=o.get(gt),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,s=t.length;i<s;i++){const r=t[i];if(r.getModifiedEditor().getId()===n.getId()||r.getOriginalEditor().getId()===n.getId())return r}return null}u(KB,"findFocusedDiffEditor");ee(GB);ee(zB);var qx=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class jB extends z{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}constructor(e,t,n,i,s,r){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=xe.asClassName(re.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(64),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],d=i.modifiedEndLineNumber===0;c.push(new cs("diff.clipboard.copyDeletedContent",d?i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):p("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):p("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>qx(this,void 0,void 0,function*(){const b=new T(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),_=i.originalModel.getValueInRange(b);yield this._clipboardService.writeText(_)})));let h=0,g;i.originalEndLineNumber>i.modifiedStartLineNumber&&(g=new cs("diff.clipboard.copyDeletedLineContent",d?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>qx(this,void 0,void 0,function*(){const b=i.originalModel.getLineContent(i.originalStartLineNumber+h);if(b===""){const _=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(_===0?`
`:`\r
`)}else yield this._clipboardService.writeText(b)})),c.push(g)),n.getOption(87)||c.push(new cs("diff.inline.revertChange",p("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>qx(this,void 0,void 0,function*(){const b=new T(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),_=i.originalModel.getValueInRange(b);if(i.modifiedEndLineNumber===0){const C=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new T(i.modifiedStartLineNumber,C,i.modifiedStartLineNumber,C),text:l+_}])}else{const C=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new T(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,C),text:_}])}})));const m=u((b,_)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:b,y:_}),getActions:()=>(g&&(g.label=d?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+h)),c),autoSelectFirstItem:!0})},"showContextMenu");this._register(pn(this._diffActions,"mousedown",b=>{const{top:_,height:C}=Kn(this._diffActions),v=Math.floor(a/3);b.preventDefault(),m(b.posx,_+C+v)})),this._register(n.onMouseMove(b=>{b.target.type===8||b.target.type===5?b.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(b=>{b.event.rightButton&&(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._viewZoneId&&(b.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a),m(b.event.posx,b.event.posy+a))}))}_updateLightBulbPosition(e,t,n){const{top:i}=Kn(e),s=t-i,r=Math.floor(s/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],r<l)return c}return r}}u(jB,"InlineDiffMargin");const rr=nt("editorWorkerService");var ore=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rre=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},are=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let wD=u(class{constructor(e,t){this.editorWorkerService=t,this.onDidChangeEventEmitter=new F,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="smart",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}computeDiff(e,t,n){return are(this,void 0,void 0,function*(){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n);const i=yield this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm);if(!i)throw new Error("no diff result available");return i})}setOptions(e){var t;let n=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),n=!0),n&&this.onDidChangeEventEmitter.fire()}},"WorkerBasedDocumentDiffProvider");wD=ore([rre(1,rr)],wD);const oc=nt("clipboardService"),rc=nt("contextViewService"),Zr=nt("contextMenuService"),u2=nt("progressService");class Nd{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}u(Nd,"Progress");Nd.None=Object.freeze({report(){}});const Rd=nt("editorProgressService");var lre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cc=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Yx;class SD{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,n,i){const s=i?zr.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){const d=n.zones[l];d.suppressMouseDown=!0;const h=r.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new jB(h,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),s?.restore(e),e.changeDecorations(r=>{this._decorations=r.deltaDecorations(this._decorations,n.decorations)}),t?.setZones(n.overviewZones)}}u(SD,"VisualEditorState");let cre=0;const dre=bn("diff-insert",re.add,p("diffInsertIcon","Line decoration for inserts in the diff editor.")),$B=bn("diff-remove",re.remove,p("diffRemoveIcon","Line decoration for removals in the diff editor.")),DO=(Yx=window.trustedTypes)===null||Yx===void 0?void 0:Yx.createPolicy("diffEditorWidget",{createHTML:o=>o}),MO=p("diff-aria-navigation-tip"," use Shift + F7 to navigate changes");let fd=u(class vi extends z{constructor(e,t,n,i,s,r,a,l,c,d,h){super(),this._editorProgressService=h,this._onDidDispose=this._register(new F),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModel=this._register(new F),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidUpdateDiff=this._register(new F),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new F),this._lastOriginalWarning=null,this._lastModifiedWarning=null,a.willCreateDiffEditor(),this._documentDiffProvider=this._register(r.createInstance(wD,t)),this._register(this._documentDiffProvider.onDidChange(f=>this._beginUpdateDecorationsSoon())),this._codeEditorService=a,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=r.createChild(new jv([Me,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=l,this._notificationService=c,this._id=++cre,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=AO(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"smart"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new yt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=vi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=dt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(pn(this._overviewDomElement,ae.POINTER_DOWN,f=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(f)})),this._register($(this._overviewDomElement,ae.MOUSE_WHEEL,f=>{this._modifiedEditor.delegateScrollFromMouseWheelEvent(f)},{passive:!1})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new SD(d,i),this._modifiedEditorState=new SD(d,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new uN(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=r.createInstance(Fw,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new va(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new xD(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(l.onDidColorThemeChange(f=>{this._strategy&&this._strategy.applyColors(f)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=vi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const g=_f.getDiffEditorContributions();for(const f of g)try{this._register(r.createInstance(f.ctor,this))}catch(m){He(m)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=Cw(e.type),n}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(Nb(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(48)&&this._updateDecorationsRunner.schedule(),s.hasChanged(140)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+vi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(48)&&this._updateDecorationsRunner.schedule(),s.hasChanged(140)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+vi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),this._register(n.onMouseDown(s=>{var r,a;if(!s.event.rightButton&&s.target.position&&(!((r=s.target.element)===null||r===void 0)&&r.className.includes("arrow-revert-change"))){const l=s.target.position.lineNumber,c=s.target,d=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(h=>c?.detail.afterLineNumber===h.modifiedStartLineNumber||h.modifiedEndLineNumber>0&&h.modifiedStartLineNumber===l);d&&this.revertChange(d),s.event.stopPropagation(),this._updateDecorations();return}})),n}revertChange(e){const t=this._modifiedEditor,n=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!n||!i||!t)return;const s=e.originalEndLineNumber>0?new T(e.originalStartLineNumber,1,e.originalEndLineNumber,n.getLineMaxColumn(e.originalEndLineNumber)):null,r=s?n.getValueInRange(s):null,a=e.modifiedEndLineNumber>0?new T(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,i.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=i.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,i.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<i.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&r!==null){const c=e.modifiedStartLineNumber<i.getLineCount()?new W(e.modifiedStartLineNumber+1,1):new W(e.modifiedStartLineNumber,i.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:T.fromPositions(c,c),text:e.modifiedStartLineNumber<i.getLineCount()?r+l:l+r}])}else a&&r!==null&&t.executeEdits("diffEditor",[{range:a,text:r}])}_createInnerEditor(e,t,n,i){return e.createInstance(hp,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return Av.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=AO(e,this._options),n=gre(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators||n.renderMarginRevertIcon,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);this._documentDiffProvider.setOptions(t),i?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new va(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new xD(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=vi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport(),this._onDidChangeModel.fire()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=vi.ENTIRE_DIFF_OVERVIEW_WIDTH-2*vi.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:vi.ONE_OVERVIEW_WIDTH,right:n+vi.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:vi.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),vi.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1);const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,s=u(r=>{const a=r.getValueLength();return i===0||a<=i},"canSyncModelForDiff");if(!s(e)||!s(t)){(!vi._equals(e.uri,this._lastOriginalWarning)||!vi._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(p("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._documentDiffProvider.computeDiff(e,t,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace,maxComputationTimeMs:this._options.maxComputationTime}).then(r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult={identical:r.identical,quitEarly:r.quitEarly,changes:r.changes.map(a=>{let l,c,d,h,g=a.innerChanges;return a.originalRange.isEmpty?(l=a.originalRange.startLineNumber-1,c=0,g=void 0):(l=a.originalRange.startLineNumber,c=a.originalRange.endLineNumberExclusive-1),a.modifiedRange.isEmpty?(d=a.modifiedRange.startLineNumber-1,h=0,g=void 0):(d=a.modifiedRange.startLineNumber,h=a.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:l,originalEndLineNumber:c,modifiedStartLineNumber:d,modifiedEndLineNumber:h,charChanges:g?.map(f=>({originalStartLineNumber:f.originalRange.startLineNumber,originalStartColumn:f.originalRange.startColumn,originalEndLineNumber:f.originalRange.endLineNumber,originalEndColumn:f.originalRange.endColumn,modifiedStartLineNumber:f.modifiedRange.startLineNumber,modifiedStartColumn:f.modifiedRange.startColumn,modifiedEndLineNumber:f.modifiedRange.endLineNumber,modifiedEndColumn:f.modifiedRange.endColumn}))}})},this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._options.renderMarginRevertIcon&&!this._modifiedEditor.getOption(87),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,i,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.ariaLabel+=MO,t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.ariaLabel+=MO,t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=qr.revealHorizontalRightPadding.defaultValue+vi.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=vi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-vi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(vi.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?vi.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),r=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){var t;(t=this._strategy)===null||t===void 0||t.dispose(),this._strategy=e,this._boundarySashes&&e.setBoundarySashes(this._boundarySashes),e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,s=n.length-1;for(;i<s;){const r=Math.floor((i+s)/2),a=t(n[r]),l=r+1<=s?t(n[r+1]):1073741824;e<a?s=r-1:e>=l?i=r+1:(i=r,s=r)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,r):i+r-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=r?n+Math.min(a,s):n+s-r+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}},"DiffEditorWidget");fd.ONE_OVERVIEW_WIDTH=15;fd.ENTIRE_DIFF_OVERVIEW_WIDTH=30;fd.UPDATE_DIFF_DECORATIONS_DELAY=200;fd=lre([Cc(3,oc),Cc(4,Me),Cc(5,Re),Cc(6,gt),Cc(7,qn),Cc(8,Cn),Cc(9,Zr),Cc(10,Rd)],fd);class h2 extends z{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor($te)||(e.getColor(Kte)||kk).transparent(2),n=e.getColor(qte)||(e.getColor(jte)||Dk).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s,r){r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),s=s.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);const a=this._getViewZones(e,s,r,n),l=this._getOriginalEditorDecorations(a,e,t,n),c=this._getModifiedEditorDecorations(a,e,t,n,i);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}setBoundarySashes(e){}}u(h2,"DiffEditorWidgetStyle");class TD{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}u(TD,"ForeignViewZonesIterator");class Vc{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const r=H_(i,s,t,n);return r.endLineNumber-r.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(64),t=this._modifiedEditor.getOption(64),n=this._originalEditor.getOption(140).wrappingColumn!==-1,i=this._modifiedEditor.getOption(140).wrappingColumn!==-1,s=n||i,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let d=0,h=0,g=0,f=0,m=0,b=0;const _=u((M,L)=>M.afterLineNumber-L.afterLineNumber,"sortMyViewZones"),C=u((M,L)=>{if(L.domNode===null&&M.length>0){const E=M[M.length-1];if(E.afterLineNumber===L.afterLineNumber&&E.domNode===null){E.heightInLines+=L.heightInLines;return}}M.push(L)},"addAndCombineIfPossible"),v=new TD(this._modifiedForeignVZ),y=new TD(this._originalForeignVZ);let w=1,x=1;for(let M=0,L=this._lineChanges.length;M<=L;M++){const E=M<L?this._lineChanges[M]:null;E!==null?(g=E.originalStartLineNumber+(E.originalEndLineNumber>0?-1:0),f=E.modifiedStartLineNumber+(E.modifiedEndLineNumber>0?-1:0),h=E.originalEndLineNumber>0?Vc._getViewLineCount(this._originalEditor,E.originalStartLineNumber,E.originalEndLineNumber):0,d=E.modifiedEndLineNumber>0?Vc._getViewLineCount(this._modifiedEditor,E.modifiedStartLineNumber,E.modifiedEndLineNumber):0,m=Math.max(E.originalStartLineNumber,E.originalEndLineNumber),b=Math.max(E.modifiedStartLineNumber,E.modifiedEndLineNumber)):(g+=1e7+h,f+=1e7+d,m=g,b=f);let k=[],O=[];if(s){let G;E?E.originalEndLineNumber>0?G=E.originalStartLineNumber-w:G=E.modifiedStartLineNumber-x:G=r.getLineCount()-w+1;for(let se=0;se<G;se++){const fe=w+se,Le=x+se,Fe=a.getModelLineViewLineCount(fe),Ge=l.getModelLineViewLineCount(Le);Fe<Ge?k.push({afterLineNumber:fe,heightInLines:Ge-Fe,domNode:null,marginDomNode:null}):Fe>Ge&&O.push({afterLineNumber:Le,heightInLines:Fe-Ge,domNode:null,marginDomNode:null})}E&&(w=(E.originalEndLineNumber>0?E.originalEndLineNumber:E.originalStartLineNumber)+1,x=(E.modifiedEndLineNumber>0?E.modifiedEndLineNumber:E.modifiedStartLineNumber)+1)}for(;v.current&&v.current.afterLineNumber<=b;){let G;v.current.afterLineNumber<=f?G=g-f+v.current.afterLineNumber:G=m;let se=null;E&&E.modifiedStartLineNumber<=v.current.afterLineNumber&&v.current.afterLineNumber<=E.modifiedEndLineNumber&&(se=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),k.push({afterLineNumber:G,heightInLines:v.current.height/t,domNode:null,marginDomNode:se}),v.advance()}for(;y.current&&y.current.afterLineNumber<=m;){let G;y.current.afterLineNumber<=g?G=f-g+y.current.afterLineNumber:G=b,O.push({afterLineNumber:G,heightInLines:y.current.height/e,domNode:null}),y.advance()}if(E!==null&&Ow(E)){const G=this._produceOriginalFromDiff(E,h,d);G&&k.push(G)}if(E!==null&&Hw(E)){const G=this._produceModifiedFromDiff(E,h,d);G&&O.push(G)}let P=0,H=0;for(k=k.sort(_),O=O.sort(_);P<k.length&&H<O.length;){const G=k[P],se=O[H],fe=G.afterLineNumber-g,Le=se.afterLineNumber-f;fe<Le?(C(c.original,G),P++):Le<fe?(C(c.modified,se),H++):G.shouldNotShrink?(C(c.original,G),P++):se.shouldNotShrink?(C(c.modified,se),H++):G.heightInLines>=se.heightInLines?(G.heightInLines-=se.heightInLines,H++):(se.heightInLines-=G.heightInLines,P++)}for(;P<k.length;)C(c.original,k[P]),P++;for(;H<O.length;)C(c.modified,O[H]),H++}return{original:Vc._ensureDomNodes(c.original),modified:Vc._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=JB()),t))}}u(Vc,"ViewZonesComputer");function pl(o,e,t,n,i){return{range:new T(o,e,t,n),options:i}}u(pl,"createDecoration");const Vi={arrowRevertChange:Pe.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+xe.asClassName(re.arrowRight)}),charDelete:Pe.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Pe.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Pe.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Pe.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Pe.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Pe.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+xe.asClassName(dre),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Pe.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Pe.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+xe.asClassName($B),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Pe.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class va extends h2{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new hi(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?fd.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return i=this._disableSash?s:i||s,n>va.MINIMUM_EDITOR_WIDTH*2?(i<va.MINIMUM_EDITOR_WIDTH&&(i=va.MINIMUM_EDITOR_WIDTH),i>n-va.MINIMUM_EDITOR_WIDTH&&(i=n-va.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?fd.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new qB(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=s.getModel(),c=s._getViewModel();for(const d of t)if(Hw(d)){a.decorations.push({range:new T(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:i?Vi.lineDeleteWithSign:Vi.lineDelete}),(!Ow(d)||!d.charChanges)&&a.decorations.push(pl(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,Vi.charDeleteWholeLine));const h=H_(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new rp(h.startLineNumber,h.endLineNumber,0,r)),d.charChanges){for(const g of d.charChanges)if(ZB(g))if(n)for(let f=g.originalStartLineNumber;f<=g.originalEndLineNumber;f++){let m,b;f===g.originalStartLineNumber?m=g.originalStartColumn:m=l.getLineFirstNonWhitespaceColumn(f),f===g.originalEndLineNumber?b=g.originalEndColumn:b=l.getLineLastNonWhitespaceColumn(f),a.decorations.push(pl(f,m,f,b,Vi.charDelete))}else a.decorations.push(pl(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn,Vi.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const h of t){if(s)if(h.modifiedEndLineNumber>0)l.decorations.push({range:new T(h.modifiedStartLineNumber,1,h.modifiedStartLineNumber,1),options:Vi.arrowRevertChange});else{const g=e.modified.find(f=>f.afterLineNumber===h.modifiedStartLineNumber);g&&(g.marginDomNode=hre())}if(Ow(h)){l.decorations.push({range:new T(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Vi.lineInsertWithSign:Vi.lineInsert}),(!Hw(h)||!h.charChanges)&&l.decorations.push(pl(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Vi.charInsertWholeLine));const g=H_(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new rp(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(XB(f))if(n)for(let m=f.modifiedStartLineNumber;m<=f.modifiedEndLineNumber;m++){let b,_;m===f.modifiedStartLineNumber?b=f.modifiedStartColumn:b=c.getLineFirstNonWhitespaceColumn(m),m===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=c.getLineLastNonWhitespaceColumn(m),l.decorations.push(pl(m,b,m,_,Vi.charInsert))}else l.decorations.push(pl(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Vi.charInsert))}}}return l}}u(va,"DiffEditorWidgetSideBySide");va.MINIMUM_EDITOR_WIDTH=100;class qB extends Vc{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}u(qB,"SideBySideViewZonesComputer");class xD extends h2{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new YB(e,t,n,s,r,i).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel();let d=0;for(const h of t)if(Hw(h)){for(r.decorations.push({range:new T(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Vi.lineDeleteMargin});d<e.modified.length;){const m=e.modified[d];if(m.diff&&m.diff.originalStartLineNumber>=h.originalStartLineNumber)break;d++}let g=0;if(d<e.modified.length){const m=e.modified[d];m.diff&&m.diff.originalStartLineNumber===h.originalStartLineNumber&&m.diff.originalEndLineNumber===h.originalEndLineNumber&&m.diff.modifiedStartLineNumber===h.modifiedStartLineNumber&&m.diff.modifiedEndLineNumber===h.modifiedEndLineNumber&&(g=m.heightInLines)}const f=H_(l,c,h.originalStartLineNumber,h.originalEndLineNumber);r.overviewZones.push(new rp(f.startLineNumber,f.endLineNumber,g,s))}return r}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const h of t)if(Ow(h)){l.decorations.push({range:new T(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Vi.lineInsertWithSign:Vi.lineInsert});const g=H_(c,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new rp(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(XB(f))if(n)for(let m=f.modifiedStartLineNumber;m<=f.modifiedEndLineNumber;m++){let b,_;m===f.modifiedStartLineNumber?b=f.modifiedStartColumn:b=c.getLineFirstNonWhitespaceColumn(m),m===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=c.getLineLastNonWhitespaceColumn(m),l.decorations.push(pl(m,b,m,_,Vi.charInsert))}else l.decorations.push(pl(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Vi.charInsert))}else l.decorations.push(pl(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Vi.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}}u(xD,"DiffEditorWidgetInline");class YB extends Vc{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._originalModel=i.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${Hu}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(48),s=t.get(31),r=i.typicalHalfwidthCharacterWidth,a=t.get(99),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(64),g=t.get(139).decorationsWidth,f=t.get(112),m=t.get(94),b=t.get(89),_=t.get(49),C=this._lineBreaksComputer.finalize();let v=0;for(let y=0;y<this._pendingLineChange.length;y++){const w=this._pendingLineChange[y],x=this._pendingViewZones[y],M=x.domNode;ai(M,i);const L=x.marginDomNode;ai(L,i);const E=[];if(w.charChanges)for(const Le of w.charChanges)ZB(Le)&&E.push(new mf(new T(Le.originalStartLineNumber,Le.originalStartColumn,Le.originalEndLineNumber,Le.originalEndColumn),"char-delete",0));const k=E.length>0,O=new jh(1e4);let P=0,H=0,G=null;for(let Le=w.originalStartLineNumber;Le<=w.originalEndLineNumber;Le++){const Fe=Le-w.originalStartLineNumber,Ge=this._originalModel.tokenization.getLineTokens(Le),ke=Ge.getLineContent(),et=C[v++],Je=ls.filter(E,Le,1,ke.length+1);if(et){let be=0;for(const kt of et.breakOffsets){const As=Ge.sliceAndInflate(be,kt,0),Yn=ke.substring(be,kt);P=Math.max(P,this._renderOriginalLine(H++,Yn,As,ls.extractWrapped(Je,be,kt),k,l,c,i,s,d,g,f,m,b,_,n,O,L)),be=kt}for(G||(G=[]);G.length<Fe;)G[G.length]=1;G[Fe]=et.breakOffsets.length,x.heightInLines+=et.breakOffsets.length-1;const we=document.createElement("div");we.className="gutter-delete",e.original.push({afterLineNumber:Le,afterColumn:0,heightInLines:et.breakOffsets.length-1,domNode:JB(),marginDomNode:we})}else P=Math.max(P,this._renderOriginalLine(H++,ke,Ge,Je,k,l,c,i,s,d,g,f,m,b,_,n,O,L))}P+=a;const se=O.build(),fe=DO?DO.createHTML(se):se;if(M.innerHTML=fe,x.minWidthInPx=P*r,G){const Le=w.originalEndLineNumber-w.originalStartLineNumber;for(;G.length<=Le;)G[G.length]=1}x.diff.viewLineCounts=G}e.original.sort((y,w)=>y.afterLineNumber-w.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b,_,C,v){C.appendString('<div class="view-line'),s||C.appendString(" char-delete"),C.appendString('" style="top:'),C.appendString(String(e*d)),C.appendString('px;width:1000000px;">');const y=Ls.isBasicASCII(t,r),w=Ls.containsRTL(t,y,a),x=Fv(new nc(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,y,w,0,n,i,_,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,g,f,m,b!==vs.OFF,null),C);if(C.appendString("</div>"),this._renderIndicators){const M=document.createElement("div");M.className=`delete-sign ${xe.asClassName($B)}`,M.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),v.appendChild(M)}return x.characterMapping.getHorizontalOffset(x.characterMapping.length)}}u(YB,"InlineViewZonesComputer");function ure(o,e){return Tn(o,e,["off","on","inherit"])}u(ure,"validateDiffWordWrap");function Ow(o){return o.modifiedEndLineNumber>0}u(Ow,"isChangeOrInsert");function Hw(o){return o.originalEndLineNumber>0}u(Hw,"isChangeOrDelete");function XB(o){return o.modifiedStartLineNumber===o.modifiedEndLineNumber?o.modifiedEndColumn-o.modifiedStartColumn>0:o.modifiedEndLineNumber-o.modifiedStartLineNumber>0}u(XB,"isCharChangeOrInsert");function ZB(o){return o.originalStartLineNumber===o.originalEndLineNumber?o.originalEndColumn-o.originalStartColumn>0:o.originalEndLineNumber-o.originalStartLineNumber>0}u(ZB,"isCharChangeOrDelete");function JB(){const o=document.createElement("div");return o.className="diagonal-fill",o}u(JB,"createFakeLinesDiv");function hre(){const o=document.createElement("div");return o.className="arrow-revert-change "+xe.asClassName(re.arrowRight),ie("div",{},o)}u(hre,"createViewZoneMarginArrow");function H_(o,e,t,n){const i=o.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new T(t,o.getLineMinColumn(t),n,o.getLineMaxColumn(n)))}u(H_,"getViewRange");function AO(o,e){return{enableSplitViewResizing:Te(o.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Te(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Te(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:qL(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:qL(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Te(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Te(o.renderIndicators,e.renderIndicators),originalEditable:Te(o.originalEditable,e.originalEditable),diffCodeLens:Te(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Te(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:ure(o.diffWordWrap,e.diffWordWrap),diffAlgorithm:Tn(o.diffAlgorithm,e.diffAlgorithm,["smart","experimental"])}}u(AO,"validateDiffEditorOptions");function gre(o,e){return{enableSplitViewResizing:o.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:o.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:o.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:o.maxComputationTime!==e.maxComputationTime,maxFileSize:o.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:o.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:o.renderIndicators!==e.renderIndicators,originalEditable:o.originalEditable!==e.originalEditable,diffCodeLens:o.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:o.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:o.diffWordWrap!==e.diffWordWrap,diffAlgorithm:o.diffAlgorithm!==e.diffAlgorithm}}u(gre,"changedDiffEditorOptions");or((o,e)=>{const t=o.getColor(Yte);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${t} 12.5%,
			#0000 12.5%, #0000 50%,
			${t} 50%, ${t} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var fre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pre=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},mre=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let LD=u(class extends z{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new F),this._onCodeEditorAdd=this._register(new F),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new F),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new F),this._onDiffEditorAdd=this._register(new F),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new F),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new oi,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}openCodeEditor(e,t,n){return mre(this,void 0,void 0,function*(){for(const i of this._codeEditorOpenHandlers){const s=yield i(e,t,n);if(s!==null)return s}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Oe(t)}},"AbstractCodeEditorService");LD=fre([pre(0,qn)],LD);var bre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},IO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},_re=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Vw=u(class extends LD{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((n,i,s)=>_re(this,void 0,void 0,function*(){return i?this.doOpenEditor(i,n):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Ue.http||s===Ue.https)return c7(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}},"StandaloneCodeEditorService");Vw=bre([IO(0,Me),IO(1,qn)],Vw);at(gt,Vw,0);const rm=nt("layoutService");var QB=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},e6=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ww=u(class{get dimension(){return this._dimension||(this._dimension=cS(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayout=pe.None,this.offset={top:0,quickPickTop:0}}},"StandaloneLayoutService");Ww=QB([e6(0,gt)],Ww);let ED=u(class extends Ww{get hasContainer(){return!1}get container(){return this._container}constructor(e,t){super(t),this._container=e}},"EditorScopedLayoutService");ED=QB([e6(1,gt)],ED);at(rm,Ww,1);const Yv=nt("dialogService");var vre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},mC=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function bC(o){return o.scheme===Ue.file?o.fsPath:o.path}u(bC,"getResourceLabel");let t6=0;class _b{constructor(e,t,n,i,s,r,a){this.id=++t6,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}u(_b,"ResourceStackElement");class kD{constructor(e,t){this.resourceLabel=e,this.reason=t}}u(kD,"ResourceReasonPair");class DD{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);const n=[];return e.length>0&&n.push(p({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(p({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}u(DD,"RemovedResources");class n6{constructor(e,t,n,i,s,r,a){this.id=++t6,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new DD),this.removedResources.has(t)||this.removedResources.set(t,new kD(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new DD),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new kD(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}u(n6,"WorkspaceStackElement");class g2{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new KN(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const c=this._past[a];n&&(i>=t||c.id!==e.elements[i])&&(n=!1,s=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,r=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}u(g2,"ResourceEditStack");class _y{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}u(_y,"EditStackSnapshot");const i6=new g2("","");i6.locked=!0;let MD=u(class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=ph.None,n=xr.None){if(e.type===0){const i=bC(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new _b(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],r=[];for(const a of e.resources){const l=bC(a),c=this.getUriComparisonKey(a);i.has(c)||(i.add(c),s.push(l),r.push(c))}s.length===1?this._pushElement(new _b(e,s[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new n6(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let r;this._editStacks.has(s)?r=this._editStacks.get(s):(r=new g2(i,s),this._editStacks.set(s,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=bC(s.resource),a=this.getUriComparisonKey(s.resource),l=new _b(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=bC(s.resource),a=this.getUriComparisonKey(s.resource),l=new _b(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new KN(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i)}return[t,n]}canUndo(e){if(e instanceof xr){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){He(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const r=this._acquireLocks(n);let a;try{a=t()}catch(l){return r(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),i.dispose(),s()),l=>(r(),i.dispose(),this._onError(l,e))):(r(),i.dispose(),s())}_invokeWorkspacePrepare(e){return mC(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return z.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?z.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(z.None);const n=e.actual.prepareUndoRedo();return n?DI(n)?t(n):n.then(i=>t(i)):t(z.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||i6);return new _y(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new vb(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new vb}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return mC(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=yield this._dialogService.prompt({type:cn.Info,message:p("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:p({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:p({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=p({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new _y([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof xr){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return mC(this,void 0,void 0,function*(){if((yield this._dialogService.confirm({message:p("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:p({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:p("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i)}return[t,n]}canRedo(e){if(e instanceof xr){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new vb(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new vb}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return mC(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const r of n.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=p({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new _y([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof xr){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}},"UndoRedoService");MD=vre([NO(0,Yv),NO(1,Cn)],MD);class vb{constructor(e){this.returnValue=e}}u(vb,"WorkspaceVerificationError");at(IS,MD,1);const Ms=nt("openerService");function f2(o,e){return ve.isUri(o)?$g(o.scheme,e):PI(o,e+":")}u(f2,"matchesScheme");function RO(o,...e){return e.some(t=>f2(o,t))}u(RO,"matchesSomeScheme");function s6(o){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}u(s6,"extractSelection");var Cre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yre=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Po=nt("ILanguageFeatureDebounceService");var Bw;(function(o){const e=new WeakMap;let t=0;function n(i){let s=e.get(i);return s===void 0&&(s=++t,e.set(i,s)),s}u(n,"of"),o.of=n})(Bw||(Bw={}));class o6{constructor(e,t,n,i,s,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=s,this._max=r,this._cache=new ic(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>tS(Bw.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?ms(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new _B(6),this._cache.set(n,i));const s=ms(i.update(t),this._min,this._max);return f2(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new a2;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ms(e,this._min,this._max)}}u(o6,"FeatureDebounceInformation");let AD=u(class{constructor(e){this._logService=e,this._data=new Map}for(e,t,n){var i,s,r;const a=(i=n?.min)!==null&&i!==void 0?i:50,l=(s=n?.max)!==null&&s!==void 0?s:Math.pow(a,2),c=(r=n?.key)!==null&&r!==void 0?r:void 0,d=`${Bw.of(e)},${a}${c?","+c:""}`;let h=this._data.get(d);return h||(h=new o6(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(d,h)),h}_overallAverage(){const e=new a2;for(const t of this._data.values())e.update(t.default());return e.value}},"LanguageFeatureDebounceService");AD=Cre([yre(0,Mo)],AD);at(Po,AD,1);class Mf{static create(e,t){return new Mf(e,new V_(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new T(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,s,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new Mf(this._startLineNumber,i),new Mf(this._startLineNumber+r,s)]}applyEdit(e,t){const[n,i,s]=ud(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,s)}}u(Mf,"SparseMultilineTokens");class V_{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new T(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new ID(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new ID(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const h=4*d,g=s[h],f=s[h+1],m=s[h+2],b=s[h+3];if((g>e||g===e&&m>=t)&&(g<n||g===n&&f<=i))l=!0;else{if(a===0&&(c=g),l){const _=4*a;s[_]=g-c,s[_+1]=f,s[_+2]=m,s[_+3]=b}a++}}return this._tokenCount=a,c}split(e,t,n,i){const s=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,h=0;for(let g=0;g<r;g++){const f=4*g,m=s[f],b=s[f+1],_=s[f+2],C=s[f+3];if(m>e||m===e&&_>=t){if(m<n||m===n&&b<=i)continue;c!==l&&(c=l,d=0,h=m)}c[d++]=m-h,c[d++]=b,c[d++]=_,c[d++]=C}return[new V_(new Uint32Array(a)),new V_(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,s){const r=this._tokens,a=this._tokenCount,l=i-t;let c=0,d=!1;for(let h=0;h<a;h++){const g=4*h;let f=r[g],m=r[g+1],b=r[g+2];const _=r[g+3];if(f<t||f===t&&b<=n){c++;continue}else if(f===t&&m<n)f===i&&b>s?b-=s-n:b=n;else if(f===t&&m===n)if(f===i&&b>s)b-=s-n;else{d=!0;continue}else if(f<i||f===i&&m<s)if(f===i&&b>s)f===t?(m=n,b=m+(b-s)):(m=0,b=m+(b-s));else{d=!0;continue}else if(f>i){if(l===0&&!d){c=a;break}f-=l}else if(f===i&&m>=s)e&&f===0&&(m+=e,b+=e),f-=l,m-=s-n,b-=s-n;else throw new Error("Not possible!");const C=4*c;r[C]=f,r[C+1]=m,r[C+2]=b,r[C+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,n,i,s,r){const a=n===0&&i===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const h=4*d;let g=l[h],f=l[h+1],m=l[h+2];if(!(g<e||g===e&&m<t)){if(g===e&&m===t)if(a)m+=1;else continue;else if(g===e&&f<t&&t<m)n===0?m+=i:m=t;else{if(g===e&&f===t&&a)continue;if(g===e)if(g+=n,n===0)f+=i,m+=i;else{const b=m-f;f=s+(f-t),m=f+b}else g+=n}l[h]=g,l[h+1]=f,l[h+2]=m}}}}u(V_,"SparseMultilineTokensStorage");class ID{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}u(ID,"SparseLineTokens");var wre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xx=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let ND=u(class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new ga}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let r;if(s)r=s.metadata,this._logService.getLevel()===Li.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${ni.getForeground(r)}, fontStyle ${ni.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let h=0;c>0&&h<this._legend.tokenModifiers.length;h++)c&1&&l.push(this._legend.tokenModifiers[h]),c=c>>1;c>0&&this._logService.getLevel()===Li.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const h=(d.italic?1:0)<<11;r|=h|1}if(typeof d.bold<"u"){const h=(d.bold?2:0)<<11;r|=h|2}if(typeof d.underline<"u"){const h=(d.underline?4:0)<<11;r|=h|4}if(typeof d.strikethrough<"u"){const h=(d.strikethrough?8:0)<<11;r|=h|8}if(d.foreground){const h=d.foreground<<15;r|=h|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===Li.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,r),this._logService.getLevel()===Li.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${ni.getForeground(r)}, fontStyle ${ni.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,i,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${s}).`))}},"SemanticTokensProviderStyling");ND=wre([Xx(1,qn),Xx(2,Wt),Xx(3,Mo)],ND);function r6(o,e,t){const n=o.data,i=o.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),r=[];let a=0,l=1,c=0;for(;a<i;){const d=a;let h=Math.min(d+s,i);if(h<i){let v=h;for(;v-1>d&&n[5*v]===0;)v--;if(v-1===d){let y=h;for(;y+1<i&&n[5*y]===0;)y++;h=y}else h=v}let g=new Uint32Array((h-d)*4),f=0,m=0,b=0,_=0;for(;a<h;){const v=5*a,y=n[v],w=n[v+1],x=l+y|0,M=y===0?c+w|0:w,L=n[v+2],E=M+L|0,k=n[v+3],O=n[v+4];if(E<=M)e.warnInvalidLengthSemanticTokens(x,M+1);else if(b===x&&_>M)e.warnOverlappingSemanticTokens(x,M+1);else{const P=e.getMetadata(k,O,t);P!==2147483647&&(m===0&&(m=x),g[f]=x-m,g[f+1]=M,g[f+2]=E,g[f+3]=P,f+=4,b=x,_=E)}l=x,c=M,a++}f!==g.length&&(g=g.subarray(0,f));const C=Mf.create(m,g);r.push(C)}return r}u(r6,"toMultilineTokens2");class a6{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}u(a6,"HashTableEntry");class ga{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=ga._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ga._SIZES.length?2/3*this._currentLength:0),this._elements=[],ga._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=ga._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ga._SIZES.length?2/3*this._currentLength:0),this._elements=[],ga._nullOutEntries(this._elements,this._currentLength);for(const r of s){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new a6(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}u(ga,"HashTable");ga._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const jS=nt("semanticTokensStylingService");var Sre=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zx=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let RD=u(class extends z{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new ND(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}},"SemanticTokensStylingService");RD=Sre([Zx(0,qn),Zx(1,Mo),Zx(2,Wt)],RD);at(jS,RD,1);var PO=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const _C="**",FO="/",vy="[/\\\\]",Cy="[^/\\\\]",Tre=/\//g;function OO(o,e){switch(o){case 0:return"";case 1:return`${Cy}*?`;default:return`(?:${vy}|${Cy}+${vy}${e?`|${vy}${Cy}+`:""})*?`}}u(OO,"starsToRegExp");function HO(o,e){if(!o)return[];const t=[];let n=!1,i=!1,s="";for(const r of o){switch(r){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=r}return s&&t.push(s),t}u(HO,"splitGlobAware");function l6(o){if(!o)return"";let e="";const t=HO(o,FO);if(t.every(n=>n===_C))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===_C){if(n)return;e+=OO(2,s===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of i){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===FO?h="":h=Js(d),c+=h;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${HO(a,",").map(f=>l6(f)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=Cy;continue;case"*":e+=OO(1);continue;default:e+=Js(d)}}s<t.length-1&&(t[s+1]!==_C||s+2<t.length)&&(e+=vy)}n=i===_C})}return e}u(l6,"parseRegExp");const xre=/^\*\*\/\*\.[\w\.-]+$/,Lre=/^\*\*\/([\w\.-]+)\/?$/,Ere=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,kre=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Dre=/^\*\*((\/[\w\.-]+)+)\/?$/,Mre=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,VO=new ic(1e4),WO=u(function(){return!1},"FALSE"),Ia=u(function(){return null},"NULL");function p2(o,e){if(!o)return Ia;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=VO.get(n);if(i)return BO(i,o);let s;return xre.test(t)?i=Are(t.substr(4),t):(s=Lre.exec(Jx(t,e)))?i=Ire(s[1],t):(e.trimForExclusions?kre:Ere).test(t)?i=Nre(t,e):(s=Dre.exec(Jx(t,e)))?i=UO(s[1].substr(1),t,!0):(s=Mre.exec(Jx(t,e)))?i=UO(s[1],t,!1):i=Rre(t),VO.set(n,i),BO(i,o)}u(p2,"parsePattern");function BO(o,e){if(typeof e=="string")return o;const t=u(function(n,i){return Yk(n,e.base,!bi)?o(Cv(n.substr(e.base.length),Fr),i):null},"wrappedPattern");return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}u(BO,"wrapRelativePattern");function Jx(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}u(Jx,"trimForExclusions");function Are(o,e){return function(t,n){return typeof t=="string"&&t.endsWith(o)?e:null}}u(Are,"trivia1");function Ire(o,e){const t=`/${o}`,n=`\\${o}`,i=u(function(r,a){return typeof r!="string"?null:a?a===o?e:null:r===o||r.endsWith(t)||r.endsWith(n)?e:null},"parsedPattern"),s=[o];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}u(Ire,"trivia2");function Nre(o,e){const t=d6(o.slice(1,-1).split(",").map(a=>p2(a,e)).filter(a=>a!==Ia),o),n=t.length;if(!n)return Ia;if(n===1)return t[0];const i=u(function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return o;return null},"parsedPattern"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(Nre,"trivia3");function UO(o,e,t){const n=Fr===xn.sep,i=n?o:o.replace(Tre,Fr),s=Fr+i,r=xn.sep+o;let a;return t?a=u(function(l,c){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===o||l.endsWith(r)))?e:null},"parsedPattern"):a=u(function(l,c){return typeof l=="string"&&(l===i||!n&&l===o)?e:null},"parsedPattern"),a.allPaths=[(t?"*/":"./")+o],a}u(UO,"trivia4and5");function Rre(o){try{const e=new RegExp(`^${l6(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return Ia}}u(Rre,"toRegExp");function Pre(o,e,t){return!o||typeof e!="string"?!1:c6(o)(e,void 0,t)}u(Pre,"match");function c6(o,e={}){if(!o)return WO;if(typeof o=="string"||Fre(o)){const t=p2(o,e);if(t===Ia)return WO;const n=u(function(i,s){return!!t(i,s)},"resultPattern");return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return Ore(o,e)}u(c6,"parse");function Fre(o){const e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}u(Fre,"isRelativePattern");function Ore(o,e){const t=d6(Object.getOwnPropertyNames(o).map(a=>Hre(a,o[a],e)).filter(a=>a!==Ia)),n=t.length;if(!n)return Ia;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=u(function(d,h){let g;for(let f=0,m=t.length;f<m;f++){const b=t[f](d,h);if(typeof b=="string")return b;ek(b)&&(g||(g=[]),g.push(b))}return g?(()=>PO(this,void 0,void 0,function*(){for(const f of g){const m=yield f;if(typeof m=="string")return m}return null}))():null},"resultExpression"),l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const i=u(function(a,l,c){let d,h;for(let g=0,f=t.length;g<f;g++){const m=t[g];m.requiresSiblings&&c&&(l||(l=Kc(a)),d||(d=l.substr(0,l.length-AZ(a).length)));const b=m(a,l,d,c);if(typeof b=="string")return b;ek(b)&&(h||(h=[]),h.push(b))}return h?(()=>PO(this,void 0,void 0,function*(){for(const g of h){const f=yield g;if(typeof f=="string")return f}return null}))():null},"resultExpression"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(Ore,"parsedExpression");function Hre(o,e,t){if(e===!1)return Ia;const n=p2(o,t);if(n===Ia)return Ia;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=u((r,a,l,c)=>{if(!c||!n(r,a))return null;const d=i.replace("$(basename)",()=>l),h=c(d);return ek(h)?h.then(g=>g?o:null):h?o:null},"result");return s.requiresSiblings=!0,s}}return n}u(Hre,"parseExpressionPattern");function d6(o,e){const t=o.filter(a=>!!a.basenames);if(t.length<2)return o;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=u(function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?i[c]:null},"aggregate");s.basenames=n,s.patterns=i,s.allBasenames=n;const r=o.filter(a=>!a.basenames);return r.push(s),r}u(d6,"aggregateBasenameMatches");function u6(o,e,t,n,i,s){if(Array.isArray(o)){let r=0;for(const a of o){const l=u6(a,e,t,n,i,s);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof o=="string")return n?o==="*"?5:o===t?10:0:0;if(o){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=o;if(!n&&!c)return 0;d&&i&&(e=i);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(r)if(r===t)h=10;else if(r==="*")h=Math.max(h,5);else return 0;if(d)if(d===s)h=10;else if(d==="*"&&s!==void 0)h=Math.max(h,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g=Object.assign(Object.assign({},a),{base:q5(a.base)}),g===e.fsPath||Pre(g,e.fsPath))h=10;else return 0}return h}else return 0}}u(u6,"score");function h6(o){return typeof o=="string"?!1:Array.isArray(o)?o.every(h6):!!o.exclusive}u(h6,"isExclusive");class PD{constructor(e,t,n,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}}u(PD,"MatchCandidate");class qt{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new F,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Oe(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const i=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=i?new PD(e.uri,e.getLanguageId(),i.uri,i.type):new PD(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(s))){this._lastCandidate=s;for(const r of this._entries)if(r._score=u6(r.selector,s.uri,s.languageId,TJ(e),s.notebookUri,s.notebookType),h6(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort(qt._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}u(qt,"LanguageFeatureRegistry");class g6{constructor(){this.referenceProvider=new qt(this._score.bind(this)),this.renameProvider=new qt(this._score.bind(this)),this.codeActionProvider=new qt(this._score.bind(this)),this.definitionProvider=new qt(this._score.bind(this)),this.typeDefinitionProvider=new qt(this._score.bind(this)),this.declarationProvider=new qt(this._score.bind(this)),this.implementationProvider=new qt(this._score.bind(this)),this.documentSymbolProvider=new qt(this._score.bind(this)),this.inlayHintsProvider=new qt(this._score.bind(this)),this.colorProvider=new qt(this._score.bind(this)),this.codeLensProvider=new qt(this._score.bind(this)),this.documentFormattingEditProvider=new qt(this._score.bind(this)),this.documentRangeFormattingEditProvider=new qt(this._score.bind(this)),this.onTypeFormattingEditProvider=new qt(this._score.bind(this)),this.signatureHelpProvider=new qt(this._score.bind(this)),this.hoverProvider=new qt(this._score.bind(this)),this.documentHighlightProvider=new qt(this._score.bind(this)),this.selectionRangeProvider=new qt(this._score.bind(this)),this.foldingRangeProvider=new qt(this._score.bind(this)),this.linkProvider=new qt(this._score.bind(this)),this.inlineCompletionsProvider=new qt(this._score.bind(this)),this.completionProvider=new qt(this._score.bind(this)),this.linkedEditingRangeProvider=new qt(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new qt(this._score.bind(this)),this.documentSemanticTokensProvider=new qt(this._score.bind(this)),this.documentOnDropEditProvider=new qt(this._score.bind(this)),this.documentPasteEditProvider=new qt(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}u(g6,"LanguageFeaturesService");at(he,g6,1);const Xv=nt("IWorkspaceEditService");class $S{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Na.is(t))return Na.lift(t);if(zu.is(t))return zu.lift(t);throw new Error("Unsupported edit")})}}u($S,"ResourceEdit");class Na extends $S{static is(e){return e instanceof Na?!0:as(e)&&ve.isUri(e.resource)&&as(e.textEdit)}static lift(e){return e instanceof Na?e:new Na(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}}u(Na,"ResourceTextEdit");class zu extends $S{static is(e){return e instanceof zu?!0:as(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof zu?e:new zu(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},i){super(i),this.oldResource=e,this.newResource=t,this.options=n}}u(zu,"ResourceFileEdit");const m2=Object.freeze({id:"editor",order:5,type:"object",title:p("editorConfigurationTitle","Editor"),scope:5}),Uw=Object.assign(Object.assign({},m2),{properties:{"editor.tabSize":{type:"number",default:xi.tabSize,minimum:1,markdownDescription:p("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:p("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:xi.insertSpaces,markdownDescription:p("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:xi.detectIndentation,markdownDescription:p("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:xi.trimAutoWhitespace,description:p("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:xi.largeFileOptimizations,description:p("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:p("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[p("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),p("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),p("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:p("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[p("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),p("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),p("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:p("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:p("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:p("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only.")},"editor.language.brackets":{type:["array","null"],default:null,description:p("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:p("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:p("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:p("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:p("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:p("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:p("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:p("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:p("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["smart","experimental"],default:"smart",markdownEnumDescriptions:[p("diffAlgorithm.smart","Uses the default diffing algorithm."),p("diffAlgorithm.experimental","Uses an experimental diffing algorithm.")]}}});function Vre(o){return typeof o.type<"u"||typeof o.anyOf<"u"}u(Vre,"isConfigurationPropertySchema");for(const o of jg){const e=o.schema;if(typeof e<"u")if(Vre(e))Uw.properties[`editor.${o.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(Uw.properties[t]=e[t])}let vC=null;function f6(){return vC===null&&(vC=Object.create(null),Object.keys(Uw.properties).forEach(o=>{vC[o]=!0})),vC}u(f6,"getEditorConfigurationKeys");function Wre(o){return f6()[`editor.${o}`]||!1}u(Wre,"isEditorConfigurationKey");function Bre(o){return f6()[`diffEditor.${o}`]||!1}u(Bre,"isDiffEditorConfigurationKey");const Ure=Kt.as(ja.Configuration);Ure.registerConfiguration(Uw);class Ht{static insert(e,t){return{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}u(Ht,"EditOperation");function Qx(o){return Object.isFrozen(o)?o:sZ(o)}u(Qx,"freeze");class gi{constructor(e={},t=[],n=[],i){this._contents=e,this._keys=t,this._overrides=n,this.raw=i,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(n=>{if(n instanceof gi)return n;const i=new p6("");return i.parseRaw(n),i.configurationModel});this._rawConfiguration=t.reduce((n,i)=>i===n?i:n.merge(i),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?OP(this.contents,e):this.contents}inspect(e,t){const n=this.rawConfiguration.getValue(e),i=t?this.rawConfiguration.getOverrideValue(e,t):void 0,s=t?this.rawConfiguration.override(t).getValue(e):n;return{value:n,override:i,merged:s}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?OP(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,n;const i=gl(this.contents),s=gl(this.overrides),r=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((n=l.raw)===null||n===void 0)&&n.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(i,l.contents);for(const c of l.overrides){const[d]=s.filter(h=>pi(h.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=id(d.keys)):s.push(gl(c))}for(const c of l.keys)r.indexOf(c)===-1&&r.push(c)}return new gi(i,r,s,a.every(l=>l instanceof gi)?void 0:a)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const i of id([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i];const r=t[i];r&&(typeof s=="object"&&typeof r=="object"?(s=gl(s),this.mergeContents(s,r)):s=r),n[i]=s}return new gi(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&as(e[n])&&as(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=gl(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=u(s=>{s&&(n?this.mergeContents(n,s):n=gl(s))},"mergeContents");for(const s of this.overrides)pi(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),FJ(this.contents,e),rd.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>pi(n.identifiers,lw(e))),1))}updateValue(e,t,n){RV(this.contents,e,t,i=>console.error(i)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),rd.test(e)&&this.overrides.push({identifiers:lw(e),keys:Object.keys(this.contents[e]),contents:YE(this.contents[e],i=>console.error(i))})}}u(gi,"ConfigurationModel");class p6{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new gi}parseRaw(e,t){this._raw=e;const{contents:n,keys:i,overrides:s,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new gi(n,i,s,a?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const n=Kt.as(ja.Configuration).getConfigurationProperties(),i=this.filter(e,n,!0,t);e=i.raw;const s=YE(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:r,overrides:a,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}filter(e,t,n,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted)return{raw:e,restricted:[],hasExcludedProperties:s};const r={},a=[];for(const l in e)if(rd.test(l)&&n){const c=this.filter(e[l],t,!1,i);r[l]=c.raw,s=s||c.hasExcludedProperties,a.push(...c.restricted)}else{const c=t[l],d=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&a.push(l),(d===void 0||i.scopes===void 0||i.scopes.includes(d))&&!(i.skipRestricted&&c?.restricted)?r[l]=e[l]:s=!0}return{raw:r,restricted:a,hasExcludedProperties:s}}toOverrides(e,t){const n=[];for(const i of Object.keys(e))if(rd.test(i)){const s={};for(const r in e[i])s[r]=e[i][r];n.push({identifiers:lw(i),keys:Object.keys(s),contents:YE(s,t)})}return n}}u(p6,"ConfigurationModelParser");class m6{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=i,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=h,this.folderConfigurationModel=g,this.memoryConfigurationModel=f}inspect(e,t,n){const i=e.inspect(t,n);return{get value(){return Qx(i.value)},get override(){return Qx(i.override)},get merged(){return Qx(i.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}u(m6,"ConfigurationInspectValue");class Zv{constructor(e,t,n,i,s=new gi,r=new gi,a=new fi,l=new gi,c=new fi){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new fi,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new gi,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of i.overrides)for(const c of l.identifiers)i.getOverrideValue(e,c)!==void 0&&a.add(c);return new m6(e,t,i.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),i=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(ve.revive(c[0]),this.parseConfigurationModel(c[1])),l),new fi);return new Zv(t,n,i,s,new gi,r,a,new gi,new fi)}static parseConfigurationModel(e){return new gi(e.contents,e.keys,e.overrides)}}u(Zv,"Configuration");class b6{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const r of s)this.affectedKeys.add(r);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Zv.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const r=s+i.length;if(r>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(r);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!qs(l,c)}return!0}}u(b6,"ConfigurationChangeEvent");const Gre=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class _6 extends z{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:pe.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new F),this._currentChords=[],this._currentChordChecker=new Xp,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=ku.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new io,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),null;const[i]=n.getDispatchChords();if(i===null)return this._log("\\ Keyboard event cannot be dispatched"),null;const s=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,r,i)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw kI("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(p("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:i})=>i).join(", ");this._currentChordStatusMessage=this._notificationService.status(p("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),Vb.enabled&&Vb.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Vb.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchChords();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=ku.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=ku.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getChords();return this._ignoreSingleModifiers=new ku(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){var i;let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,a=null;if(n){const[h]=e.getSingleModifierDispatchChords();r=h,a=h?[h]:[]}else[r]=e.getDispatchChords(),a=this._currentChords.map(({keypress:h})=>h);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const l=this._contextKeyService.getContext(t),c=e.getLabel(),d=this._getResolver().resolve(l,a,r);switch(d.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const h=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${h}, ${c}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",h,c),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${d.commandId} ]`),d.commandId===null){if(this.inChordMode){const h=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${h}, ${c}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",h,c),{hideAfter:10*1e3}),this._leaveChordMode()}s=!0}else this.inChordMode&&this._leaveChordMode(),d.isBubble||(s=!0),this._log(`+ Invoking command ${d.commandId}.`),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,h=>this._notificationService.warn(h)),Gre.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding",detail:(i=e.getUserSettingsLabel())!==null&&i!==void 0?i:void 0});return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}u(_6,"AbstractKeybindingService");class ku{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}u(ku,"KeybindingModifierSet");ku.EMPTY=new ku(null);const jt=nt("keybindingService"),GO={kind:0},zre={kind:1};function Kre(o,e,t){return{kind:2,commandId:o,commandArgs:e,isBubble:t}}u(Kre,"KbFound");class Af{constructor(e,t,n){var i;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const r=s.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Af.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(i=a.when)===null||i===void 0?void 0:i.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1}return!(n&&n.type!==1&&(!e.when||!CJ(n,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.command===t.command)continue;let r=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){r=!1;break}r&&Af.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:$E(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){const i=[...t,n];this._log(`| Resolving ${i}`);const s=this._map.get(i[0]);if(s===void 0)return this._log("\\ No keybinding entries."),GO;let r=null;if(i.length<2)r=s;else{r=[];for(let l=0,c=s.length;l<c;l++){const d=s[l];if(i.length>d.chords.length)continue;let h=!0;for(let g=1;g<i.length;g++)if(d.chords[g]!==i[g]){h=!1;break}h&&r.push(d)}}const a=this._findCommand(e,r);return a?i.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-i.length} more chord(s), when: ${zO(a.when)}, source: ${KO(a)}.`),zre):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${zO(a.when)}, source: ${KO(a)}.`),Kre(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),GO)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(Af._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}u(Af,"KeybindingResolver");function zO(o){return o?`${o.serialize()}`:"no when condition"}u(zO,"printWhenExplanation");function KO(o){return o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}u(KO,"printSourceExplanation");class FD{constructor(e,t,n,i,s,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?OD(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=OD(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=a}}u(FD,"ResolvedKeybindingItem");function OD(o){const e=[];for(let t=0,n=o.length;t<n;t++){const i=o[t];if(!i)return[];e.push(i)}return e}u(OD,"toEmptyArrayIfContainsNull");class Jv{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=Yre(a,l,this.modifierLabels[e])}return i.join(" ")}}u(Jv,"ModifierLabelProvider");const b2=new Jv({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),jre=new Jv({ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),$re=new Jv({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),qre=new Jv({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function Yre(o,e,t){if(e===null)return"";const n=[];return o.ctrlKey&&n.push(t.ctrlKey),o.shiftKey&&n.push(t.shiftKey),o.altKey&&n.push(t.altKey),o.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}u(Yre,"_simpleAsString");class v6 extends K3{constructor(e,t){if(super(),t.length===0)throw Ys("chords");this._os=e,this._chords=t}getLabel(){return b2.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return jre.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:$re.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return qre.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new z3(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}u(v6,"BaseResolvedKeybinding");class mp extends v6{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return bl.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":bl.toString(e.keyCode)}_getElectronAccelerator(e){return bl.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=bl.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return mp.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=bl.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=II[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Wa)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Wa(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=OD(e.chords.map(i=>this._toKeyCodeChord(i)));return n.length>0?[new mp(n,t)]:[]}}u(mp,"USLayoutResolvedKeybinding");const bp=nt("labelService");class C6{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}u(C6,"StringIterator");class y6{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?RI(e,this._value,0,e.length,this._from,this._to):yv(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}u(y6,"ConfigKeysIterator");class w6{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?RI(e,this._value,0,e.length,this._from,this._to):yv(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}u(w6,"PathIterator");class S6{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new w6(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return GE(e,this._value.scheme);if(this._states[this._stateIdx]===2)return GE(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return l_(e,this._value.query);if(this._states[this._stateIdx]===5)return l_(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}u(S6,"UriIterator");class Cb{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}u(Cb,"TernarySearchTreeNode");class Ku{static forUris(e=()=>!1,t=()=>!1){return new Ku(new S6(e,t))}static forStrings(){return new Ku(new C6)}static forConfigKeys(){return new Ku(new y6)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new Cb,this._root.segment=n.value());const s=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new Cb,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new Cb,i.right.segment=n.value()),s.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Cb,i.mid.segment=n.value()),s.push([0,i]),i=i.mid;else break}const r=i.value;i.value=t,i.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=s[a][0],h=s[a+1][0];if(d===1&&h===1)s[a][1]=l.rotateLeft();else if(d===-1&&h===-1)s[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let r=this._root;for(;r;){const a=i.cmp(r.segment);if(a>0)s.push([-1,r]),r=r.left;else if(a<0)s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right);if(a.key){const{key:l,value:c,segment:d}=a;this._delete(a.key,!1),r.key=l,r.value=c,r.segment=d}}else{const a=(n=r.left)!==null&&n!==void 0?n:r.right;if(s.length>0){const[l,c]=s[s.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let i=this._root;for(;i;){const s=n.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(n.hasNext())n.next(),i=i.mid;else return i.mid?this._entries(i.mid):t?i.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}u(Ku,"TernarySearchTree");const _p=nt("contextService");function HD(o){const e=o;return typeof e?.id=="string"&&ve.isUri(e.uri)}u(HD,"isSingleFolderWorkspaceIdentifier");function Xre(o){const e=o;return typeof e?.id=="string"&&!HD(o)&&!eae(o)}u(Xre,"isEmptyWorkspaceIdentifier");const Zre={id:"ext-dev"},Jre={id:"empty-window"};function Qre(o,e){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:Kc(o)}:e?Zre:Jre;const t=o;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}u(Qre,"toWorkspaceIdentifier");function eae(o){const e=o;return typeof e?.id=="string"&&ve.isUri(e.configPath)}u(eae,"isWorkspaceIdentifier");class T6{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}u(T6,"WorkspaceFolder");const VD="code-workspace";p("codeWorkspace","Code Workspace");const x6="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function tae(o){return o.id===x6}u(tae,"isStandaloneEditorWorkspace");var wn;(function(o){o.noSelection=p("noSelection","No selection"),o.singleSelectionRange=p("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),o.singleSelection=p("singleSelection","Line {0}, Column {1}"),o.multiSelectionRange=p("multiSelectionRange","{0} selections ({1} characters selected)"),o.multiSelection=p("multiSelection","{0} selections"),o.emergencyConfOn=p("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),o.openingDocs=p("openingDocs","Now opening the Editor Accessibility documentation page."),o.readonlyDiffEditor=p("readonlyDiffEditor"," in a read-only pane of a diff editor."),o.editableDiffEditor=p("editableDiffEditor"," in a pane of a diff editor."),o.readonlyEditor=p("readonlyEditor"," in a read-only code editor"),o.editableEditor=p("editableEditor"," in a code editor"),o.changeConfigToOnMac=p("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),o.changeConfigToOnWinLinux=p("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),o.auto_on=p("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),o.auto_off=p("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),o.tabFocusModeOnMsg=p("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),o.tabFocusModeOnMsgNoKb=p("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),o.tabFocusModeOffMsg=p("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),o.tabFocusModeOffMsgNoKb=p("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),o.openDocMac=p("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),o.openDocWinLinux=p("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),o.outroMsg=p("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),o.showAccessibilityHelpAction=p("showAccessibilityHelpAction","Show Accessibility Help")})(wn||(wn={}));var WD;(function(o){o.inspectTokensAction=p("inspectTokens","Developer: Inspect Tokens")})(WD||(WD={}));var Gw;(function(o){o.gotoLineActionLabel=p("gotoLineActionLabel","Go to Line/Column...")})(Gw||(Gw={}));var BD;(function(o){o.helpQuickAccessActionLabel=p("helpQuickAccess","Show all Quick Access Providers")})(BD||(BD={}));var zw;(function(o){o.quickCommandActionLabel=p("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=p("quickCommandActionHelp","Show And Run Commands")})(zw||(zw={}));var W_;(function(o){o.quickOutlineActionLabel=p("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=p("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(W_||(W_={}));var Kw;(function(o){o.editorViewAccessibleLabel=p("editorViewAccessibleLabel","Editor content"),o.accessibilityHelpMessage=p("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(Kw||(Kw={}));var UD;(function(o){o.toggleHighContrast=p("toggleHighContrast","Toggle High Contrast Theme")})(UD||(UD={}));var GD;(function(o){o.bulkEditServiceSummary=p("bulkEditServiceSummary","Made {0} edits in {1} files")})(GD||(GD={}));const L6=nt("workspaceTrustManagementService");var Wc;(function(o){o[o.AVOID=0]="AVOID",o[o.ALIGN=1]="ALIGN"})(Wc||(Wc={}));function rf(o,e,t){const n=t.mode===Wc.ALIGN?t.offset:t.offset+t.size,i=t.mode===Wc.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=o-n?n:e<=i?i-e:Math.max(o-e,0):e<=i?i-e:e<=o-n?n:0}u(rf,"layout");class mh extends z{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=z.None,this.toDisposeOnSetContainer=z.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ie(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Ui(this.view),this.setContainer(e,t),this._register(Oe(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ie(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=nae,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ie("slot"))}else this.container.appendChild(this.view);const i=new X;mh.BUBBLE_UP_EVENTS.forEach(s=>{i.add(pn(this.container,s,r=>{this.onDOMEvent(r,!1)}))}),mh.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(pn(this.container,s,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){var t,n;this.isVisible()&&this.hide(),kn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Cs(this.view),this.toDisposeOnClean=e.render(this.view)||z.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Fa&&rN.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(a7(e)){const h=Kn(e),g=Eee(e);t={top:h.top*g,left:h.left*g,width:h.width*g,height:h.height*g}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Vo(this.view),i=vk(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const h={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},g={offset:t.left,size:t.width,position:r===0?0:1,mode:Wc.ALIGN};l=rf(window.innerHeight,i,h)+window.pageYOffset,Ci.intersects({start:l,end:l+i},{start:h.offset,end:h.offset+h.size})&&(g.mode=Wc.AVOID),c=rf(window.innerWidth,n,g)}else{const h={offset:t.left,size:t.width,position:r===0?0:1},g={offset:t.top,size:t.height,position:s===0?0:1,mode:Wc.ALIGN};c=rf(window.innerWidth,n,h),Ci.intersects({start:c,end:c+n},{start:h.offset,end:h.offset+h.size})&&(g.mode=Wc.AVOID),l=rf(window.innerHeight,i,g)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=Kn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Kn(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Kn(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Ui(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!vo(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}u(mh,"ContextView");mh.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];mh.BUBBLE_DOWN_EVENTS=["click"];const nae=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var iae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sae=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let zD=u(class extends z{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=z.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new mh(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?(t!==this.container||this.shadowRoot!==n)&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=n,this.contextView.show(e);const i=Oe(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}},"ContextViewService");zD=iae([sae(0,rm)],zD);let vp=[],_2=[],E6=[];function CC(o,e=!1){oae(o,!1,e)}u(CC,"registerPlatformLanguageAssociation");function oae(o,e,t){const n=rae(o,e);vp.push(n),n.userConfigured?E6.push(n):_2.push(n),t&&!n.userConfigured&&vp.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}u(oae,"_registerLanguageAssociation");function rae(o,e){return{id:o.id,mime:o.mime,filename:o.filename,extension:o.extension,filepattern:o.filepattern,firstline:o.firstline,userConfigured:e,filenameLowercase:o.filename?o.filename.toLowerCase():void 0,extensionLowercase:o.extension?o.extension.toLowerCase():void 0,filepatternLowercase:o.filepattern?c6(o.filepattern.toLowerCase()):void 0,filepatternOnPath:o.filepattern?o.filepattern.indexOf(xn.sep)>=0:!1}}u(rae,"toLanguageAssociationItem");function aae(){vp=vp.filter(o=>o.userConfigured),_2=[]}u(aae,"clearPlatformLanguageAssociations");function lae(o,e){return cae(o,e).map(t=>t.id)}u(lae,"getLanguageIds");function cae(o,e){let t;if(o)switch(o.scheme){case Ue.file:t=o.fsPath;break;case Ue.data:{t=hd.parseMetaData(o).get(hd.META_DATA_LABEL);break}case Ue.vscodeNotebookCell:t=void 0;break;default:t=o.path}if(!t)return[{id:"unknown",mime:rs.unknown}];t=t.toLowerCase();const n=Kc(t),i=jO(t,n,E6);if(i)return[i,{id:Zs,mime:rs.text}];const s=jO(t,n,_2);if(s)return[s,{id:Zs,mime:rs.text}];if(e){const r=dae(e);if(r)return[r,{id:Zs,mime:rs.text}]}return[{id:"unknown",mime:rs.unknown}]}u(cae,"getAssociations");function jO(o,e,t){var n;let i,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?o:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(i)return i;if(s)return s;if(r)return r}u(jO,"getAssociationByPath");function dae(o){if(VI(o)&&(o=o.substr(1)),o.length>0)for(let e=vp.length-1;e>=0;e--){const t=vp[e];if(!t.firstline)continue;const n=o.match(t.firstline);if(n&&n.length>0)return t}}u(dae,"getAssociationByFirstline");const yC=Object.prototype.hasOwnProperty,$O="vs.editor.nullLanguage";class k6{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register($O,0),this._register(Zs,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||$O}}u(k6,"LanguageIdCodec");class Cp extends z{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,Cp.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new k6,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Gf.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){Cp.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},aae();const e=[].concat(Gf.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),Kt.as(ja.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;yC.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)CC({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)CC({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)CC({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);KZ(l)||CC({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const r=s!==null&&s.length>0;if(!(r&&s[0]===null)){const a=(r?s[0]:null)||n;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?yC.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return yC.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&yC.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:lae(e,t)}}u(Cp,"LanguagesRegistry");Cp.instanceCount=0;class yp extends z{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new F),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new F),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new F({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,yp.instanceCount++,this._registry=this._register(new Cp(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){yp.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return XH(n,null)}createById(e){return new KD(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new KD(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Zs),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Yt.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}u(yp,"LanguageService");yp.instanceCount=0;class KD{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new F({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}u(KD,"LanguageSelection");class D6 extends hh{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new F),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=q(e,ie(".monaco-dropdown")),this._label=q(this._element,ie(".dropdown-label"));let n=t.labelRenderer;n||(n=u(s=>(s.textContent=t.label||"",null),"labelRenderer"));for(const s of[ae.CLICK,ae.MOUSE_DOWN,Dt.Tap])this._register($(this.element,s,r=>Be.stop(r,!0)));for(const s of[ae.MOUSE_DOWN,Dt.Tap])this._register($(this._label,s,r=>{r instanceof MouseEvent&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register($(this._label,ae.KEY_UP,s=>{const r=new Et(s);(r.equals(3)||r.equals(10))&&(Be.stop(s,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(Tt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}u(D6,"BaseDropdown");class M6 extends D6{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}u(M6,"DropdownMenu");class B_ extends Uo{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new F),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=u(s=>{this.element=q(s,ie("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},"labelRenderer"),n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new M6(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const n=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}u(B_,"DropdownMenuActionViewItem");function uae(o){return o?o.condition!==void 0:!1}u(uae,"isICommandActionToggleInfo");var yb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Yb;(function(o){o[o.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",o[o.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Yb||(Yb={}));var af;(function(o){o[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed"})(af||(af={}));class ju extends z{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new F),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=af.None,this.cache=new Map,this.flushDelayer=new YI(ju.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.accept(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===af.Closed)return;let n=!1;Ws(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Ws(n)?t:n}getBoolean(e,t){const n=this.get(e);return Ws(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Ws(n)?t:parseInt(n,10)}set(e,t){return yb(this,void 0,void 0,function*(){if(this.state===af.Closed)return;if(Ws(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return yb(this,void 0,void 0,function*(){if(!(this.state===af.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return yb(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return yb(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}u(ju,"Storage");ju.DEFAULT_FLUSH_DELAY=100;class yy{constructor(){this.onDidChangeItemsExternal=pe.None,this.items=new Map}updateItems(e){var t,n;return yb(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((i,s)=>this.items.set(s,i)),(n=e.delete)===null||n===void 0||n.forEach(i=>this.items.delete(i))})}}u(yy,"InMemoryStorageDatabase");const wy="__$__targetStorageMarker",ar=nt("storageService");var jw;(function(o){o[o.NONE=0]="NONE",o[o.SHUTDOWN=1]="SHUTDOWN"})(jw||(jw={}));function hae(o){const e=o.get(wy);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}u(hae,"loadKeyTargets");class Qv extends z{constructor(e={flushInterval:Qv.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new sh),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new sh),this._onWillSaveState=this._register(new F),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(e,t){if(t===wy){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(Ws(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,i),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,s;const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(wy,JSON.stringify(r))):typeof r[e]=="number"&&(delete r[e],(s=this.getStorage(t))===null||s===void 0||s.set(wy,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?hae(t):Object.create(null)}}u(Qv,"AbstractStorageService");Qv.DEFAULT_FLUSH_INTERVAL=60*1e3;class A6 extends Qv{constructor(){super(),this.applicationStorage=this._register(new ju(new yy,{hint:Yb.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new ju(new yy,{hint:Yb.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new ju(new yy,{hint:Yb.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}u(A6,"InMemoryStorageService");function gae(o,e){const t=Object.assign({},e);for(const n in o){const i=o[n];t[n]=i!==void 0?le(i):void 0}return t}u(gae,"overrideStyles");const fae={keybindingLabelBackground:le(Mte),keybindingLabelForeground:le(Ate),keybindingLabelBorder:le(Ite),keybindingLabelBottomBorder:le(Nte),keybindingLabelShadow:le(wa)},pae={buttonForeground:le(nb),buttonSeparator:le(bte),buttonBackground:le(ib),buttonHoverBackground:le(_te),buttonSecondaryForeground:le(Cte),buttonSecondaryBackground:le(Lk),buttonSecondaryHoverBackground:le(yte),buttonBorder:le(vte)},mae={progressBarBackground:le(Ste)},$w={inputActiveOptionBorder:le(fN),inputActiveOptionForeground:le(mN),inputActiveOptionBackground:le(pN)};le(gne),le(pne),le(fne);le(Vt),le(xa),le(wa),le(Qe),le(Mne),le(Ane),le(Ine),le(rte);const qw={inputBackground:le(v7),inputForeground:le(C7),inputBorder:le(y7),inputValidationInfoBorder:le(cte),inputValidationInfoBackground:le(ate),inputValidationInfoForeground:le(lte),inputValidationWarningBorder:le(hte),inputValidationWarningBackground:le(dte),inputValidationWarningForeground:le(ute),inputValidationErrorBorder:le(pte),inputValidationErrorBackground:le(gte),inputValidationErrorForeground:le(fte)},bae={listFilterWidgetBackground:le(rne),listFilterWidgetOutline:le(ane),listFilterWidgetNoMatchesOutline:le(lne),listFilterWidgetShadow:le(cne),inputBoxStyles:qw,toggleStyles:$w},I6={badgeBackground:le(cy),badgeForeground:le(dy),badgeBorder:le(Qe)};le(Tne),le(Sne),le(LF),le(LF),le(xne);const ng={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:le(Xte),listFocusForeground:le(Zte),listFocusOutline:le(Jte),listActiveSelectionBackground:le(Al),listActiveSelectionForeground:le(Ea),listActiveSelectionIconForeground:le(ab),listFocusAndSelectionOutline:le(Qte),listFocusAndSelectionBackground:le(Al),listFocusAndSelectionForeground:le(Ea),listInactiveSelectionBackground:le(ene),listInactiveSelectionIconForeground:le(nne),listInactiveSelectionForeground:le(tne),listInactiveFocusBackground:le(ine),listInactiveFocusOutline:le(sne),listHoverBackground:le(T7),listHoverForeground:le(x7),listDropBackground:le(one),listSelectionOutline:le(Ft),listHoverOutline:le(Ft),treeIndentGuidesStroke:le(lb),treeInactiveIndentGuidesStroke:le(dne),tableColumnsBorder:le(une),tableOddRowsBackgroundColor:le(hne)};function am(o){return gae(o,ng)}u(am,"getListStyles");const _ae={selectBackground:le(Sa),selectListBackground:le(mte),selectForeground:le(El),decoratorRightForeground:le(w7),selectBorder:le(Yg),focusBorder:le(Gs),listFocusBackground:le(xu),listInactiveSelectionIconForeground:le(Xg),listFocusForeground:le(Tu),listFocusOutline:ste(Ft,U.transparent.toString()),listHoverBackground:le(T7),listHoverForeground:le(x7),listHoverOutline:le(Ft),selectListBorder:le(La),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},vae={shadowColor:le(wa),borderColor:le(mne),foregroundColor:le(bne),backgroundColor:le(_ne),selectionForegroundColor:le(vne),selectionBackgroundColor:le(Cne),selectionBorderColor:le(yne),separatorColor:le(wne),scrollbarShadow:le(wte),scrollbarSliderBackground:le(sb),scrollbarSliderHoverBackground:le(ob),scrollbarSliderActiveBackground:le(rb)};var qS=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bs=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},N6=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Cae(o,e,t,n){const i=o.getActions(e),s=ya.getInstance(),r=s.keyStatus.altKey||(li||bi)&&s.keyStatus.shiftKey;P6(i,t,r,n?a=>a===n:a=>a==="navigation")}u(Cae,"createAndFillInContextMenuActions");function R6(o,e,t,n,i,s){const r=o.getActions(e);P6(r,t,!1,typeof n=="string"?l=>l===n:n,i,s)}u(R6,"createAndFillInActionBarActions");function P6(o,e,t,n=r=>r==="navigation",i=()=>!1,s=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of o){let h;n(c)?(h=r,h.length>0&&s&&h.push(new Pn)):(h=a,h.length>0&&h.push(new Pn));for(let g of d){t&&(g=g instanceof ir&&g.alt?g.alt:g);const f=h.push(g);g instanceof gh&&l.add({group:c,action:g,index:f-1})}}for(const{group:c,action:d,index:h}of l){const g=n(c)?r:a,f=d.actions;f.length<=1&&i(d,c,g.length)&&g.splice(h,1,...f)}}u(P6,"fillInActions");let bh=u(class extends pp{constructor(e,t,n,i,s,r,a){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._themeService=r,this._contextMenuService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Fn),this._altKey=ya.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return N6(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(li||bi)&&this._altKey.keyStatus.shiftKey;const i=u(()=>{var s;const r=t&&n&&!!(!((s=this._commandAction.alt)===null||s===void 0)&&s.enabled);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())},"updateAltState");this._menuItemAction.alt&&this._register(this._altKey.event(s=>{n=s.altKey||(li||bi)&&s.shiftKey,i()})),this._register($(e,"mouseleave",s=>{t=!1,i()})),this._register($(e,"mouseenter",s=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=n?p("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?p("titleAndKb","{0} ({1})",r,l):r;s=p("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,b2.modifierLabels[Us].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const i=this._commandAction.checked&&uae(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(i)if(xe.isThemeIcon(i)){const s=xe.asClassNameArray(i);n.classList.add(...s),this._itemClassDispose.value=Oe(()=>{n.classList.remove(...s)})}else n.style.backgroundImage=w_(this._themeService.getColorTheme().type)?uh(i.dark):uh(i.light),n.classList.add("icon"),this._itemClassDispose.value=Jo(Oe(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}},"MenuEntryActionViewItem");bh=qS([bs(2,jt),bs(3,Cn),bs(4,Me),bs(5,qn),bs(6,Zr)],bh);let jD=u(class extends B_{constructor(e,t,n,i,s){var r,a,l;const c=Object.assign(Object.assign({},t),{menuAsChild:(r=t?.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(a=t?.classNames)!==null&&a!==void 0?a:xe.isThemeIcon(e.item.icon)?xe.asClassName(e.item.icon):void 0,keybindingProvider:(l=t?.keybindingProvider)!==null&&l!==void 0?l:d=>n.lookupKeybinding(d.id)});super(e,{getActions:()=>e.actions},i,c),this._keybindingService=n,this._contextMenuService=i,this._themeService=s}render(e){super.render(e),Ct(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!xe.isThemeIcon(n)){this.element.classList.add("icon");const i=u(()=>{this.element&&(this.element.style.backgroundImage=w_(this._themeService.getColorTheme().type)?uh(n.dark):uh(n.light))},"setBackgroundImage");i(),this._register(this._themeService.onDidColorThemeChange(()=>{i()}))}}},"SubmenuEntryActionViewItem");jD=qS([bs(2,jt),bs(3,Zr),bs(4,qn)],jD);let $D=u(class extends Uo{constructor(e,t,n,i,s,r,a,l){var c,d,h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let g;const f=l.get(this._storageKey,1);f&&(g=e.actions.find(b=>f===b.id)),g||(g=e.actions[0]),this._defaultAction=this._instaService.createInstance(bh,g,{keybinding:this._getDefaultActionKeybindingLabel(g)});const m=Object.assign({},t??Object.create(null),{menuAsChild:(c=t?.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t?.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(h=t?.actionRunner)!==null&&h!==void 0?h:new hh});this._dropdown=new B_(e,e.actions,this._contextMenuService,m),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof ir&&this.update(b.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(bh,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends hh{runAction(t,n){return N6(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(Nee(this._container,ie(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ie(".action-container");this._defaultAction.render(q(this._container,t)),this._register($(t,ae.KEY_DOWN,i=>{const s=new Et(i);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=ie(".dropdown-action-container");this._dropdown.render(q(this._container,n)),this._register($(n,ae.KEY_DOWN,i=>{var s;const r=new Et(i);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}},"DropdownWithDefaultActionViewItem");$D=qS([bs(2,jt),bs(3,Cn),bs(4,Zr),bs(5,qa),bs(6,Re),bs(7,ar)],$D);let qD=u(class extends OB{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===Pn.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,_ae,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=le(Yg)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}},"SubmenuEntrySelectActionViewItem");qD=qS([bs(1,rc)],qD);function yae(o,e,t){return e instanceof ir?o.createInstance(bh,e,t):e instanceof Yf?e.item.isSelection?o.createInstance(qD,e):e.item.rememberDefaultAction?o.createInstance($D,e,t):o.createInstance(jD,e,t):void 0}u(yae,"createActionViewItem");const YD=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,eL=/(&amp;)?(&amp;)([^\s&])/g;var Yw;(function(o){o[o.Right=0]="Right",o[o.Left=1]="Left"})(Yw||(Yw={}));class $u extends eo{constructor(e,t,n,i){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:l=>this.doGetActionViewItem(l,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Ye||bi?[10]:[]],keyDown:!0}}),this.menuStyles=i,this.menuElement=s,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new X),this.initializeOrUpdateStyleSheet(e,i),this._register(Tt.addTarget(s)),$(s,ae.KEY_DOWN,l=>{new Et(l).equals(2)&&l.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add($(s,ae.KEY_DOWN,l=>{const c=l.key.toLocaleLowerCase();if(this.mnemonics.has(c)){Be.stop(l,!0);const d=this.mnemonics.get(c);if(d.length===1&&(d[0]instanceof XD&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(l)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(c,d)}}})),bi&&this._register($(s,ae.KEY_DOWN,l=>{const c=new Et(l);c.equals(14)||c.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Be.stop(l,!0)):(c.equals(13)||c.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Be.stop(l,!0))})),this._register($(this.domNode,ae.MOUSE_OUT,l=>{const c=l.relatedTarget;vo(c,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),l.stopPropagation())})),this._register($(this.actionsList,ae.MOUSE_OVER,l=>{let c=l.target;if(!(!c||!vo(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Tt.addTarget(this.actionsList)),this._register($(this.actionsList,Dt.Tap,l=>{let c=l.initialTarget;if(!(!c||!vo(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new em(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,i),this._register($(s,Dt.Change,l=>{Be.stop(l,!0);const c=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:c-l.translationY})})),this._register($(a,ae.MOUSE_UP,l=>{l.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(l=>{var c;return!((c=n.submenuIds)===null||c===void 0)&&c.has(l.id)?(console.warn(`Found submenu cycle: ${l.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(l=>!(l instanceof ZD)).forEach((l,c,d)=>{l.updatePositionInSet(c+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(pw(e)?this.styleSheet=ko(e):($u.globalStyleSheet||($u.globalStyleSheet=ko()),this.styleSheet=$u.globalStyleSheet)),this.styleSheet.textContent=Sae(t,pw(e))}styleScrollElement(e,t){var n,i;const s=(n=t.foregroundColor)!==null&&n!==void 0?n:"",r=(i=t.backgroundColor)!==null&&i!==void 0?i:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",c=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=s,e.style.backgroundColor=r,e.style.boxShadow=c}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Pn)return new ZD(t.context,e,{icon:!0},this.menuStyles);if(e instanceof gh){const i=new XD(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}),this.menuStyles);if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let r=[];this.mnemonics.has(s)&&(r=this.mnemonics.get(s)),r.push(i),this.mnemonics.set(s,r)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(i.keybinding=a)}}const s=new v2(t.context,e,i,this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(s),this.mnemonics.set(r,a)}}return s}}}u($u,"Menu");class v2 extends Uo{constructor(e,t,n,i){if(n.isMenu=!0,super(t,t,n),this.menuStyle=i,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const s=this.action.label;if(s){const r=YD.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new yt(()=>{this.element&&(this._register($(this.element,ae.MOUSE_UP,s=>{if(Be.stop(s,!0),To){if(new jo(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register($(this.element,ae.CONTEXT_MENU,s=>{Be.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=q(this.element,ie("a.action-menu-item")),this._action.id===Pn.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=q(this.item,ie("span.menu-item-check"+xe.asCSSSelector(re.menuSelection))),this.check.setAttribute("role","none"),this.label=q(this.item,ie("span.action-label")),this.options.label&&this.options.keybinding&&(q(this.item,ie("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){kn(this.label);let t=s2(this.action.label);if(t){const n=wae(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=YD.exec(t);if(i){t=sw(t),eL.lastIndex=0;let s=eL.exec(t);for(;s&&s[1];)s=eL.exec(t);const r=u(a=>a.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");s?this.label.append(Cv(r(t.substr(0,s.index))," "),ie("u",{"aria-hidden":"true"},s[3]),rV(r(t.substr(s.index+s[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=i,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}u(v2,"BaseMenuActionViewItem");class XD extends v2{constructor(e,t,n,i,s){super(e,e,i,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new X),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:Yw.Right,this.showScheduler=new yt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new yt(()=>{this.element&&!vo(Yc(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=q(this.item,ie("span.submenu-indicator"+xe.asCSSSelector(re.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register($(this.element,ae.KEY_UP,t=>{const n=new Et(t);(n.equals(17)||n.equals(3))&&(Be.stop(t,!0),this.createSubmenu(!0))})),this._register($(this.element,ae.KEY_DOWN,t=>{const n=new Et(t);Yc()===this.item&&(n.equals(17)||n.equals(3))&&Be.stop(t,!0)})),this._register($(this.element,ae.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register($(this.element,ae.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register($(this.element,ae.FOCUS_OUT,t=>{this.element&&!vo(Yc(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Be.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=rf(e.width,t.width,{position:i===Yw.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=rf(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=q(this.element,ie("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new $u(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Ov],this.submenuOptions,this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Lt(window.innerWidth,window.innerHeight),Lt.lift(r),s,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add($(this.submenuContainer,ae.KEY_UP,c=>{new Et(c).equals(15)&&(Be.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add($(this.submenuContainer,ae.KEY_DOWN,c=>{new Et(c).equals(15)&&Be.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}u(XD,"SubmenuMenuActionViewItem");class ZD extends pp{constructor(e,t,n,i){super(e,t,n),this.menuStyles=i}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}u(ZD,"MenuSeparatorActionViewItem");function wae(o){const e=YD,t=e.exec(o);if(!t)return o;const n=!t[1];return o.replace(e,n?"$2$3":"").trim()}u(wae,"cleanMnemonic");function qO(o){const e=Q5()[o.id];return`.codicon-${o.id}:before { content: '\\${e.toString(16)}'; }`}u(qO,"formatRule");function Sae(o,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${qO(re.menuSelection)}
${qO(re.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=o.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=o.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const s=o.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const r=o.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}u(Sae,"getMenuWidgetCSS");class F6{constructor(e,t,n,i){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n;const i=a7(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var r;this.lastContainer=s;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(s.className+=" "+a),this.options.blockMouse&&(this.block=s.appendChild(ie(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(r=this.blockDisposable)===null||r===void 0||r.dispose(),this.blockDisposable=$(this.block,ae.MOUSE_DOWN,d=>d.stopPropagation()));const l=new X,c=e.actionRunner||new hh;return c.onWillRun(d=>this.onActionRun(d,!e.skipTelemetry),this,l),c.onDidRun(this.onDidActionRun,this,l),n=new $u(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:c,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)},vae),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l),l.add($(window,ae.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add($(window,ae.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;const h=new jo(d);let g=h.target;if(!h.rightButton){for(;g;){if(g===s)return;g=g.parentElement}this.contextViewService.hideContextView(!0)}})),Jo(l,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:s=>{var r,a,l;(r=e.onHide)===null||r===void 0||r.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Yc()===this.lastContainer||vo(Yc(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},i,!!i)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Yr(e.error)&&this.notificationService.error(e.error)}}u(F6,"ContextMenuHandler");var Tae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let JD=u(class extends z{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new F6(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,i,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=i,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new F),this._onDidHideContextMenu=this._store.add(new F)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=QD.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var n;(n=e.onHide)===null||n===void 0||n.call(e,t),this._onDidHideContextMenu.fire()}})),ya.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}},"ContextMenuService");JD=Tae([xg(0,Ao),xg(1,Cn),xg(2,rc),xg(3,jt),xg(4,qa),xg(5,Me)],JD);var QD;(function(o){function e(n){return n&&n.menuId instanceof A}u(e,"is");function t(n,i,s){if(!e(n))return n;const{menuId:r,menuActionOptions:a,contextKeyService:l}=n;return Object.assign(Object.assign({},n),{getActions:()=>{const c=[];if(r){const d=i.createMenu(r,l??s);Cae(d,a,c),d.dispose()}return n.getActions?Pn.join(n.getActions(),c):c}})}u(t,"transform"),o.transform=t})(QD||(QD={}));var Xw;(function(o){o[o.API=0]="API",o[o.USER=1]="USER"})(Xw||(Xw={}));var C2=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zw=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},mu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let eM=u(class{constructor(e){this._commandService=e}open(e,t){return mu(this,void 0,void 0,function*(){if(!f2(e,Ue.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=ve.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=Rw(decodeURIComponent(e.query))}catch{try{n=Rw(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}},"CommandOpener");eM=C2([Zw(0,dn)],eM);let tM=u(class{constructor(e){this._editorService=e}open(e,t){return mu(this,void 0,void 0,function*(){typeof e=="string"&&(e=ve.parse(e));const{selection:n,uri:i}=s6(e);return e=i,e.scheme===Ue.file&&(e=Xie(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t?.fromUserGesture?Xw.USER:Xw.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}},"EditorOpener");tM=C2([Zw(0,gt)],tM);let nM=u(class{constructor(e,t){this._openers=new oi,this._validators=new oi,this._resolvers=new oi,this._resolvedUriTargets=new fi(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new oi,this._defaultExternalOpener={openExternal:n=>mu(this,void 0,void 0,function*(){return RO(n,Ue.http,Ue.https)?c7(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>mu(this,void 0,void 0,function*(){return i?.openExternal||RO(n,Ue.mailto,Ue.http,Ue.https,Ue.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new eM(t)),this._openers.push(new tM(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}open(e,t){var n;return mu(this,void 0,void 0,function*(){const i=typeof e=="string"?ve.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const r of this._validators)if(!(yield r.shouldOpen(s,t)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return mu(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return mu(this,void 0,void 0,function*(){const n=typeof e=="string"?ve.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t?.allowContributedOpeners){const r=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:r},Ze.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},Ze.None)})}dispose(){this._validators.clear()}},"OpenerService");nM=C2([Zw(0,gt),Zw(1,dn)],nM);var Jt;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(Jt||(Jt={}));(function(o){function e(r,a){return a-r}u(e,"compare"),o.compare=e;const t=Object.create(null);t[o.Error]=p("sev.error","Error"),t[o.Warning]=p("sev.warning","Warning"),t[o.Info]=p("sev.info","Info");function n(r){return t[r]||""}u(n,"toString"),o.toString=n;function i(r){switch(r){case cn.Error:return o.Error;case cn.Warning:return o.Warning;case cn.Info:return o.Info;case cn.Ignore:return o.Hint}}u(i,"fromSeverity"),o.fromSeverity=i;function s(r){switch(r){case o.Error:return cn.Error;case o.Warning:return cn.Warning;case o.Info:return cn.Info;case o.Hint:return cn.Ignore}}u(s,"toSeverity"),o.toSeverity=s})(Jt||(Jt={}));var Jw;(function(o){const e="";function t(i){return n(i,!0)}u(t,"makeKey"),o.makeKey=t;function n(i,s){const r=[e];return i.source?r.push(i.source.replace("¦","\\¦")):r.push(e),i.code?typeof i.code=="string"?r.push(i.code.replace("¦","\\¦")):r.push(i.code.value.replace("¦","\\¦")):r.push(e),i.severity!==void 0&&i.severity!==null?r.push(Jt.toString(i.severity)):r.push(e),i.message&&s?r.push(i.message.replace("¦","\\¦")):r.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?r.push(i.startLineNumber.toString()):r.push(e),i.startColumn!==void 0&&i.startColumn!==null?r.push(i.startColumn.toString()):r.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?r.push(i.endLineNumber.toString()):r.push(e),i.endColumn!==void 0&&i.endColumn!==null?r.push(i.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}u(n,"makeKeyOptionalMessage"),o.makeKeyOptionalMessage=n})(Jw||(Jw={}));const Za=nt("markerService");var xae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},YO=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class O6 extends z{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Oe(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}u(O6,"MarkerDecorations");let iM=u(class extends z{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new F),this._markerDecorations=new fi,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new O6(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Ue.inMemory||e.uri.scheme===Ue.internal||e.uri.scheme===Ue.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=T.lift(t);if(t.severity===Jt.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const s=e.getWordAtPosition(n.getStartPosition());s&&(n=new T(n.startLineNumber,s.startColumn,n.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new T(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,r;switch(e.severity){case Jt.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Jt.Warning:t="squiggly-warning",n=on(eie),i=20,r={color:on(Ene),position:Xs.Inline};break;case Jt.Info:t="squiggly-info",n=on(tie),i=10;break;case Jt.Error:default:t="squiggly-error",n=on(Qne),i=30,r={color:on(Lne),position:Xs.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Qs.Right},minimap:r,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}},"MarkerDecorationsService");iM=xae([YO(0,en),YO(1,Za)],iM);var Lae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Pm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function Yd(o){return o.toString()}u(Yd,"MODEL_ID");function XO(o){const e=new Rv,t=o.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}u(XO,"computeModelSha1");class H6{constructor(e,t,n){this.model=e,this._modelEventListeners=new X,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}dispose(){this._modelEventListeners.dispose()}}u(H6,"ModelData");const Eae=bi||Ye?1:2;class V6{constructor(e,t,n,i,s,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}u(V6,"DisposedModelInfo");let Qw=u(class wb extends z{constructor(e,t,n,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._languageService=i,this._languageConfigurationService=s,this._onModelAdded=this._register(new F),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new F),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new F),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var n;let i=xi.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let r=xi.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=Eae;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=xi.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=xi.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=xi.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let g=xi.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:r,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:h,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:Us===3||Us===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const i=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[i+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),a=this._getEOL(t,i);s=wb._readModelOptions({editor:r,eol:a},n),this._modelCreationOptionsByLanguageAndResource[i+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let i=0,s=n.length;i<s;i++){const r=n[i],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],h=this.getCreationOptions(l,c,a.model.isForSimpleWidget);wb._setModelOptionsForModel(a.model,h,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&qs(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Yd(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Yd(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Yd(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),r=new $l(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(Yd(n))){const c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=XO(r)===c.sha1;if(h||c.sharesUndoRedoStack){for(const g of d.past)fl(g)&&g.matchesResource(n)&&g.setModel(r);for(const g of d.future)fl(g)&&g.matchesResource(n)&&g.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,g=>fl(g)&&g.matchesResource(n)),h&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Yd(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new H6(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?s=this._createModelData(e,t,n,i):s=this._createModelData(e,Zs,n,i),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=Yd(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Ue.file||e.scheme===Ue.vscodeRemote||e.scheme===Ue.vscodeUserData||e.scheme===Ue.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Yd(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)fl(c)&&c.matchesResource(e.uri)&&(s=!0,r+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)fl(c)&&c.matchesResource(e.uri)&&(s=!0,r+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=wb.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&r>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>fl(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new V6(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,XO(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);wb._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}},"ModelService");Qw.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;Qw=Lae([Pm(0,lt),Pm(1,L3),Pm(2,IS),Pm(3,Wt),Pm(4,zt)],Qw);class W6{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:z.None}}renderElement(e,t,n,i){var s;if((s=n.disposable)===null||s===void 0||s.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,i);const a=new ci,l=r.resolve(e,a.token);n.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,n.data),l.then(c=>this.renderer.renderElement(c,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}u(W6,"PagedRenderer");class B6{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}u(B6,"PagedAccessibilityProvider");function kae(o,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new B6(o,e.accessibilityProvider)})}u(kae,"fromPagedListOptions");class U6{constructor(e,t,n,i,s={}){const r=u(()=>this.model,"modelProvider"),a=i.map(l=>new W6(l,r));this.list=new Ro(e,t,n,a,kae(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return pe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return pe.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return pe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Hi(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}u(U6,"PagedList");const Dae={separatorBorder:U.transparent};class y2{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,i;e!==this.visible&&(e?(this.size=ms(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(i=(n=this.view).setVisible)===null||i===void 0||i.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}u(y2,"ViewItem");class G6 extends y2{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}u(G6,"VerticalViewItem");class z6 extends y2{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}u(z6,"HorizontalViewItem");var hl;(function(o){o[o.Idle=0]="Idle",o[o.Busy=1]="Busy"})(hl||(hl={}));var e1;(function(o){o.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}u(e,"Split"),o.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}u(t,"Invisible"),o.Invisible=t})(e1||(e1={}));class w2 extends z{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var n,i,s,r,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=hl.Idle,this._onDidSashChange=this._register(new F),this._onDidSashReset=this._register(new F),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=q(this.el,ie(".sash-container")),this.viewContainer=ie(".split-view-container"),this.scrollable=new Qp({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:Eo}),this.scrollableElement=this._register(new pS(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new qe(this.viewContainer,"scroll")).event;this._register(l(c=>{const d=this.scrollableElement.getScrollPosition(),h=Math.abs(this.viewContainer.scrollLeft-d.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,g=Math.abs(this.viewContainer.scrollTop-d.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(h!==void 0||g!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:h,scrollTop:g})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(c=>{c.scrollTopChanged&&(this.viewContainer.scrollTop=c.scrollTop),c.scrollLeftChanged&&(this.viewContainer.scrollLeft=c.scrollLeft)})),q(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Dae),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((c,d)=>{const h=ws(c.visible)||c.visible?c.size:{type:"invisible",cachedVisibleSize:c.size},g=c.view;this.doAddView(g,h,d,!0)}),this.contentSize=this.viewItems.reduce((c,d)=>c+d.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"?i+=a:e-=r.size}for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&(r.size=ms(Math.round(a*e/i),r.minimumSize,r.maximumSize))}}else{const i=Hi(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout?e.size/this.contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=Jo($(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),$(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=u((a,l)=>{const c=this.viewItems.map(m=>m.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const b=this.viewItems[i];d=(b.minimumSize-b.size)/2,h=(b.maximumSize-b.size)/2}else{const b=this.viewItems[i+1];d=(b.size-b.maximumSize)/2,h=(b.size-b.minimumSize)/2}let g,f;if(!l){const m=Hi(i,-1),b=Hi(i+1,this.viewItems.length),_=m.reduce((E,k)=>E+(this.viewItems[k].minimumSize-c[k]),0),C=m.reduce((E,k)=>E+(this.viewItems[k].viewMaximumSize-c[k]),0),v=b.length===0?Number.POSITIVE_INFINITY:b.reduce((E,k)=>E+(c[k]-this.viewItems[k].minimumSize),0),y=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((E,k)=>E+(c[k]-this.viewItems[k].viewMaximumSize),0),w=Math.max(_,y),x=Math.min(v,C),M=this.findFirstSnapIndex(m),L=this.findFirstSnapIndex(b);if(typeof M=="number"){const E=this.viewItems[M],k=Math.floor(E.viewMinimumSize/2);g={index:M,limitDelta:E.visible?w-k:w+k,size:E.size}}if(typeof L=="number"){const E=this.viewItems[L],k=Math.floor(E.viewMinimumSize/2);f={index:L,limitDelta:E.visible?x+k:x-k,size:E.size}}}this.sashDragState={start:a,current:a,index:i,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:g,snapAfter:f,disposable:s}},"resetSashDragState");r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,i,void 0,void 0,r,a,l,c);if(s){const g=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),m=g?t:t+1,b=this.viewItems[m],_=b.size-b.maximumSize,C=b.size-b.minimumSize,v=g?t-1:t+1;this.resize(v,-h,f,void 0,void 0,_,C)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ms(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==hl.Idle)throw new Error("Cant modify splitview");if(this.state=hl.Busy,e<0||e>=this.viewItems.length)return;const n=Hi(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=ms(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,s),this.state=hl.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=ms(n,a.minimumSize,a.maximumSize);const i=Hi(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==hl.Idle)throw new Error("Cant modify splitview");this.state=hl.Busy;const s=ie(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const r=e.onDidChange(g=>this.onViewChange(d,g)),a=Oe(()=>this.viewContainer.removeChild(s)),l=Jo(r,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const d=this.orientation===0?new G6(s,e,c,l):new z6(s,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new hi(this.sashContainer,{getHorizontalSashTop:E=>this.getSashPosition(E),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:1})):new hi(this.sashContainer,{getVerticalSashLeft:E=>this.getSashPosition(E),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:0})),m=this.orientation===0?E=>({sash:f,start:E.startY,current:E.currentY,alt:E.altKey}):E=>({sash:f,start:E.startX,current:E.currentX,alt:E.altKey}),_=pe.map(f.onDidStart,m)(this.onSashStart,this),v=pe.map(f.onDidChange,m)(this.onSashChange,this),w=pe.map(f.onDidEnd,()=>this.sashItems.findIndex(E=>E.sash===f))(this.onSashEnd,this),x=f.onDidReset(()=>{const E=this.sashItems.findIndex(G=>G.sash===f),k=Hi(E,-1),O=Hi(E+1,this.viewItems.length),P=this.findFirstSnapIndex(k),H=this.findFirstSnapIndex(O);typeof P=="number"&&!this.viewItems[P].visible||typeof H=="number"&&!this.viewItems[H].visible||this._onDidSashReset.fire(E)}),M=Jo(_,v,w,x,f),L={sash:f,disposable:M};this.sashItems.splice(n-1,0,L)}s.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),this.state=hl.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,s,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=Hi(e,-1),h=Hi(e+1,this.viewItems.length);if(s)for(const L of s)JT(d,L),JT(h,L);if(i)for(const L of i)K0(d,L),K0(h,L);const g=d.map(L=>this.viewItems[L]),f=d.map(L=>n[L]),m=h.map(L=>this.viewItems[L]),b=h.map(L=>n[L]),_=d.reduce((L,E)=>L+(this.viewItems[E].minimumSize-n[E]),0),C=d.reduce((L,E)=>L+(this.viewItems[E].maximumSize-n[E]),0),v=h.length===0?Number.POSITIVE_INFINITY:h.reduce((L,E)=>L+(n[E]-this.viewItems[E].minimumSize),0),y=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((L,E)=>L+(n[E]-this.viewItems[E].maximumSize),0),w=Math.max(_,y,r),x=Math.min(v,C,a);let M=!1;if(l){const L=this.viewItems[l.index],E=t>=l.limitDelta;M=E!==L.visible,L.setVisible(E,l.size)}if(!M&&c){const L=this.viewItems[c.index],E=t<c.limitDelta;M=E!==L.visible,L.setVisible(E,c.size)}if(M)return this.resize(e,t,n,i,s,r,a);t=ms(t,w,x);for(let L=0,E=t;L<g.length;L++){const k=g[L],O=ms(f[L]+E,k.minimumSize,k.maximumSize),P=O-f[L];E-=P,k.size=O}for(let L=0,E=t;L<m.length;L++){const k=m[L],O=ms(b[L]-E,k.minimumSize,k.maximumSize),P=O-b[L];E+=P,k.size=O}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=Hi(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);for(const a of r)JT(i,a);for(const a of s)K0(i,a);typeof e=="number"&&K0(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],c=ms(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&r[l+1]),g=!(n[l]&&s[l+1]);if(h&&g){const f=Hi(l,-1),m=Hi(l+1,this.viewItems.length),b=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(m),C=typeof b=="number"&&!this.viewItems[b].visible,v=typeof _=="number"&&!this.viewItems[_].visible;C&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:v&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!g?c.state=1:!h&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),mt(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}u(w2,"SplitView");class lm{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=lm.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const r=i.get(s.templateId);if(!r)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=q(e,ie(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=q(t,ie(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const l=this.columns[s].project(e);r.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);kn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}u(lm,"TableListRenderer");lm.TemplateId="row";function Mae(o){return{getHeight(e){return o.getHeight(e)},getTemplateId(){return lm.TemplateId}}}u(Mae,"asListVirtualDelegate");class K6{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:pe.None}constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new F,this.onDidLayout=this._onDidLayout.event,this.element=ie(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}layout(e){this._onDidLayout.fire([this.index,e])}}u(K6,"ColumnHeader");class e0{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,i,s,r){this.virtualDelegate=n,this.domId=`table_id_${++e0.InstanceCount}`,this.disposables=new X,this.cachedWidth=0,this.cachedHeight=0,this.domNode=q(t,ie(`.monaco-table.${this.domId}`));const a=i.map((d,h)=>new K6(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new w2(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new lm(i,s,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Ro(e,this.domNode,Mae(n),[c],r)),pe.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=i.reduce((f,m)=>f+m.weight,0),g=i[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,g)},null,this.disposables),this.styleElement=ko(this.domNode),this.style($oe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}u(e0,"Table");e0.InstanceCount=0;class ig extends No{constructor(e){super(),this._onChange=this._register(new F),this.onChange=this._onChange.event,this._onKeyDown=this._register(new F),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...xe.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}u(ig,"Toggle");const Aae=p("caseDescription","Match Case"),Iae=p("wordsDescription","Match Whole Word"),Nae=p("regexDescription","Use Regular Expression");class S2 extends ig{constructor(e){super({icon:re.caseSensitive,title:Aae+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(S2,"CaseSensitiveToggle");class T2 extends ig{constructor(e){super({icon:re.wholeWord,title:Iae+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(T2,"WholeWordsToggle");class x2 extends ig{constructor(e){super({icon:re.regex,title:Nae+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(x2,"RegexToggle");class j6{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}u(j6,"ArrayNavigator");class $6{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()===this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new j6(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}u($6,"HistoryNavigator");const Fm=ie;let Rae=u(class extends No{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new F),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new F),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=q(e,Fm(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=q(this.element,Fm(".ibwrapper"));if(this.input=q(r,Fm(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=q(r,Fm("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new xN(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),q(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new qe(document,"selectionchange")),l=pe.filter(a.event,()=>{const c=document.getSelection();return c?.anchorNode===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new eo(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:vk(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&qs(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Fu(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=u(()=>e.style.width=Vo(this.element)+"px","layout");this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{var s,r;if(!this.message)return null;e=q(i,Fm(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?gB(this.message.content,a):voe(this.message.content,a);l.classList.add(this.classForType(this.message.type));const c=this.stylesForType(this.message.type);return l.style.backgroundColor=(s=c.background)!==null&&s!==void 0?s:"",l.style.color=(r=c.foreground)!==null&&r!==void 0?r:"",l.style.border=c.border?`1px solid ${c.border}`:"",q(e,l),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=p("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=p("alertWarningMessage","Warning: {0}",this.message.content):n=p("alertInfoMessage","Info: {0}",this.message.content),ri(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){var e,t,n;const i=this.options.inputBoxStyles,s=(e=i.inputBackground)!==null&&e!==void 0?e:"",r=(t=i.inputForeground)!==null&&t!==void 0?t:"",a=(n=i.inputBorder)!==null&&n!==void 0?n:"";this.element.style.backgroundColor=s,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border=`1px solid ${Fu(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=vk(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}},"InputBox");class L2 extends Rae{constructor(e,t,n){const i=p({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or ⇅ ${i}`,r=` (⇅ ${i})`;super(e,t,n),this._onDidFocus=this._register(new F),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new F),this.onDidBlur=this._onDidBlur.event,this.history=new $6(n.history,100);const a=u(()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:r,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}},"addSuffix");this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=u(c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1},"resetPlaceholder");l(r)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,mw(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,mw(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}u(L2,"HistoryInputBox");const Pae=p("defaultLabel","input");class E2 extends No{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=new X,this.additionalToggles=[],this._onDidOptionChange=this._register(new F),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new F),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new F),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new F),this._onKeyUp=this._register(new F),this._onCaseSensitiveKeyDown=this._register(new F),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new F),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||Pae,this.showCommonFindToggles=!!n.showCommonFindToggles;const i=n.appendCaseSensitiveLabel||"",s=n.appendWholeWordsLabel||"",r=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,d=n.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new L2(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:n.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new x2(Object.assign({appendTitle:r,isChecked:!1},n.toggleStyles))),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new T2(Object.assign({appendTitle:s,isChecked:!1},n.toggleStyles))),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new S2(Object.assign({appendTitle:i,isChecked:!1},n.toggleStyles))),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const f=h.indexOf(document.activeElement);if(f>=0){let m=-1;g.equals(17)?m=(f+1)%h.length:g.equals(15)&&(f===0?m=h.length-1:m=f-1),g.equals(9)?(h[f].blur(),this.inputBox.focus()):m>=0&&h[m].focus(),Be.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register($(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register($(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(n=this.caseSensitive)===null||n===void 0||n.enable();for(const i of this.additionalToggles)i.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(n=this.caseSensitive)===null||n===void 0||n.disable();for(const i of this.additionalToggles)i.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.dispose(),this.additionalTogglesDisposables=new X;for(const t of e??[])this.additionalTogglesDisposables.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,i,s,r,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((n=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&n!==void 0?n:0)+((s=(i=this.wholeWords)===null||i===void 0?void 0:i.width())!==null&&s!==void 0?s:0)+((a=(r=this.regex)===null||r===void 0?void 0:r.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,c)=>l+c.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}u(E2,"FindInput");var la;(function(o){o[o.Expanded=0]="Expanded",o[o.Collapsed=1]="Collapsed",o[o.PreserveOrExpanded=2]="PreserveOrExpanded",o[o.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(la||(la={}));var Du;(function(o){o[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter"})(Du||(Du={}));class ys extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}u(ys,"TreeError");class YS{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}u(YS,"WeakMapper");function k2(o){return typeof o=="object"&&"visibility"in o&&"data"in o}u(k2,"isFilterResult");function U_(o){switch(o){case!0:return 1;case!1:return 0;default:return o}}u(U_,"getVisibleState");function tL(o){return typeof o.collapsible=="boolean"}u(tL,"isCollapsibleStateUpdate");class q6{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new V1,this._onDidChangeCollapseState=new F,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new F,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new F,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new tr(YV),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=st.empty(),i={}){if(e.length===0)throw new ys(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,r){var a;i===void 0&&(i=st.empty()),r===void 0&&(r=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,s);const c=[...i],d=t[t.length-1],h=new Sr({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+n)].map(_=>e.getId(_.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,s);const g=t.slice(0,-1),f=u((_,C,v)=>{if(r>0)for(let y=0;y<v;y++)_--,C--,this.spliceSmart(e,[...g,_,0],Number.MAX_SAFE_INTEGER,c[C].children,s,r-1)},"recurseSplice");let m=Math.min(l.children.length,d+n),b=c.length;for(const _ of h.changes.sort((C,v)=>v.originalStart-C.originalStart))f(m,b,m-(_.originalStart+_.originalLength)),m=_.originalStart,b=_.modifiedStart-d,this.spliceSimple([...g,m],_.originalLength,st.slice(c,b,b+_.modifiedLength),s);f(m,b,m)}spliceSimple(e,t,n=st.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],g=st.map(n,L=>this.createTreeNode(L,a,a.visible?1:0,c,h,i)),f=e[e.length-1],m=a.children.length>0;let b=0;for(let L=f;L>=0&&L<a.children.length;L--){const E=a.children[L];if(E.visible){b=E.visibleChildIndex;break}}const _=[];let C=0,v=0;for(const L of g)_.push(L),v+=L.renderNodeCount,L.visible&&(L.visibleChildIndex=b+C++);const y=SP(a.children,f,t,_);r?a.lastDiffIds?SP(a.lastDiffIds,f,t,_.map(L=>r.getId(L.element).toString())):a.lastDiffIds=a.children.map(L=>r.getId(L.element).toString()):a.lastDiffIds=void 0;let w=0;for(const L of y)L.visible&&w++;if(w!==0)for(let L=f+_.length;L<a.children.length;L++){const E=a.children[L];E.visible&&(E.visibleChildIndex-=w)}if(a.visibleChildrenCount+=C-w,c&&d){const L=y.reduce((E,k)=>E+(k.visible?k.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,v-L),this.list.splice(l,L,h)}if(y.length>0&&s){const L=u(E=>{s(E),E.children.forEach(L)},"visit");y.forEach(L)}this._onDidSplice.fire({insertedNodes:_,deletedNodes:y});const x=a.children.length>0;m!==x&&this.setCollapsible(e.slice(0,-1),x);let M=a;for(;M;){if(M.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}M=M.parent}}rerender(e){if(e.length===0)throw new ys(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!tL(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(tL(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!tL(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,s,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const c=e.children||st.empty(),d=i&&l!==0&&!a.collapsed;let h=0,g=1;for(const f of c){const m=this.createTreeNode(f,a,l,d,s,r);a.children.push(m),g+=m.renderNodeCount,m.visible&&(m.visibleChildIndex=h++)}return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=h,a.visible=l===2?h>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,i&&s.pop()),r?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,n,i&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):k2(n)?(e.filterData=n.data,U_(n.visibility)):(e.filterData=void 0,U_(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new ys(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new ys(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new ys(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[r],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:jX(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}u(q6,"IndexTreeModel");class Y6{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}u(Y6,"SetMap");globalThis&&globalThis.__awaiter;class X6 extends om{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}u(X6,"TreeElementsDragAndDropData");function nL(o){return o instanceof om?new X6(o):o}u(nL,"asTreeDragAndDropData");class Z6{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=z.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,nL(e),t)}onDragOver(e,t,n,i,s=!0){const r=this.dnd.onDragOver(nL(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=lh(()=>{const g=this.modelProvider(),f=g.getNodeLocation(t);g.isCollapsed(f)&&g.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!s){const g=typeof r=="boolean"?r:r.accept,f=typeof r=="boolean"?void 0:r.effect;return{accept:g,effect:f,feedback:[n]}}return r}if(r.bubble===1){const g=this.modelProvider(),f=g.getNodeLocation(t),m=g.getParentNodeLocation(f),b=g.getNode(m),_=m&&g.getListIndex(m);return this.onDragOver(e,b,_,i,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),h=l.getListRenderCount(c);return Object.assign(Object.assign({},r),{feedback:Hi(d,d+h)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(nL(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}u(Z6,"TreeNodeListDragAndDrop");function Fae(o,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new Z6(o,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=o(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}u(Fae,"asListOptions");class XS{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;(i=(n=this.delegate).setDynamicHeight)===null||i===void 0||i.call(n,e.element,t)}}u(XS,"ComposedTreeDelegate");var G_;(function(o){o.None="none",o.OnHover="onHover",o.Always="always"})(G_||(G_={}));class J6{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new X,this.onDidChange=pe.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}u(J6,"EventCollection");class wp{constructor(e,t,n,i,s,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=wp.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=z.None,this.disposables=new X,this.templateId=e.templateId,this.updateOptions(r),pe.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=ms(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,i]of this.renderedNodes)this.renderTreeElement(n,i)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==G_.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,i]of this.renderedNodes)this._renderIndentGuides(n,i);if(this.indentGuidesDisposable.dispose(),t){const n=new X;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=q(e,ie(".monaco-tl-row")),n=q(t,ie(".monaco-tl-indent")),i=q(t,ie(".monaco-tl-twistie")),s=q(t,ie(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:z.None,templateData:r}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var s,r;n.indentGuidesDisposable.dispose(),(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=wp.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...xe.asClassNameArray(re.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...xe.asClassNameArray(re.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(kn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new X,i=this.modelProvider();for(;;){const s=i.getNodeLocation(e),r=i.getParentNodeLocation(s);if(!r)break;const a=i.getNode(r),l=ie(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(Oe(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const r=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(n.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),mt(this.disposables)}}u(wp,"TreeRenderer");wp.DefaultIndent=8;class Q6{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new X,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?n=r?1:0:k2(r)?n=U_(r.visibility):n=r,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Wr.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const r of s){const a=r&&r.toString();if(typeof a>"u")return{data:Wr.Default,visibility:n};let l;if(this.tree.findMatchType===_h.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=gp(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===ka.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Wr.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){mt(this.disposables)}}u(Q6,"FindFilter");var ka;(function(o){o[o.Highlight=0]="Highlight",o[o.Filter=1]="Filter"})(ka||(ka={}));var _h;(function(o){o[o.Fuzzy=0]="Fuzzy",o[o.Contiguous=1]="Contiguous"})(_h||(_h={}));let Oae=u(class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,i,s,r={}){var a,l;this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new F,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new F,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new F,this._onDidChangeOpenState=new F,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new X,this.disposables=new X,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:ka.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:_h.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,n,i;const s=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&s?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:p("not found","No elements found.")}):(n=this.widget)===null||n===void 0||n.showMessage({type:2}):(i=this.widget)===null||i===void 0||i.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===ka.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Wr.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}},"FindController");function ZO(o){let e=Du.Unknown;return vx(o.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Du.Twistie:vx(o.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Du.Element:vx(o.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Du.Filter),{browserEvent:o.browserEvent,element:o.element?o.element.element:null,target:e}}u(ZO,"asTreeMouseEvent$1");function Sy(o,e){e(o),o.children.forEach(t=>Sy(t,e))}u(Sy,"dfs$1");class Ty{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new F,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&pi(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u(d=>l.delete(d),"visit");t.forEach(d=>Sy(d,c)),this.set([...l.values()]);return}const n=new Set,i=u(l=>n.add(this.identityProvider.getId(l.element).toString()),"deletedNodesVisitor");t.forEach(l=>Sy(l,i));const s=new Map,r=u(l=>s.set(this.identityProvider.getId(l.element).toString(),l),"insertedNodesVisitor");e.forEach(l=>Sy(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const h=s.get(c);h&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}u(Ty,"Trait");class eU extends c2{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(xB(e.browserEvent.target)||Qc(e.browserEvent.target)||sf(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.getNodeLocation(t),a=e.browserEvent.altKey;if(this.tree.setFocus([r]),this.tree.toggleCollapsed(r,a),s&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}u(eU,"TreeNodeListMouseController");class tU extends Ro{constructor(e,t,n,i,s,r,a,l){super(e,t,n,i,l),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new eU(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),i.length>0&&super.setFocus(id([...super.getFocus(),...i])),s.length>0&&super.setSelection(id([...super.getSelection(),...s])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}u(tU,"TreeNodeList");class D2{get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return pe.filter(pe.map(this.view.onMouseDblClick,ZO),e=>e.target!==Du.Filter)}get onPointer(){return pe.map(this.view.onPointer,ZO)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return pe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:ka.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:_h.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,i,s={}){var r;this._user=e,this._options=s,this.eventBufferer=new V1,this.onDidChangeFindOpenState=pe.None,this.disposables=new X,this._onWillRefilter=new F,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new F;const a=new XS(n),l=new YL,c=new YL,d=this.disposables.add(new J6(c.event)),h=new Y6;this.renderers=i.map(m=>new wp(m,()=>this.model,l.event,d,h,s));for(const m of this.renderers)this.disposables.add(m);let g;s.keyboardNavigationLabelProvider&&(g=new Q6(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:g}),this.disposables.add(g)),this.focus=new Ty(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new Ty(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new Ty(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new tU(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Fae(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),l.input=this.model.onDidChangeCollapseState;const f=pe.forEach(this.model.onDidSplice,m=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(m),this.selection.onDidModelSplice(m)})},this.disposables);if(f(()=>null,null,this.disposables),c.input=pe.chain(pe.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const m=new Set;for(const b of this.focus.getNodes())m.add(b);for(const b of this.selection.getNodes())m.add(b);return[...m.values()]}).event,s.keyboardSupport!==!1){const m=pe.chain(this.view.onKeyDown).filter(b=>!Qc(b.target)).map(b=>new Et(b));m.filter(b=>b.keyCode===15).on(this.onLeftArrow,this,this.disposables),m.filter(b=>b.keyCode===17).on(this.onRightArrow,this,this.disposables),m.filter(b=>b.keyCode===10).on(this.onSpace,this,this.disposables)}if((!((r=s.findWidgetEnabled)!==null&&r!==void 0)||r)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const m=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Oae(this,this.model,this.view,g,s.contextViewProvider,m),this.focusNavigationFilter=b=>this.findController.shouldAllowFocus(b),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=pe.None,this.onDidChangeFindMatchType=pe.None;this.styleElement=ko(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===G_.Always)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e);for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===G_.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),sd(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const r=this.model.getParentNodeLocation(i);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){mt(this.disposables),this.view.dispose()}}u(D2,"AbstractTree");class ZS{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new q6(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=st.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=st.empty(),n){const i=new Set,s=new Set,r=u(l=>{var c;if(l.element===null)return;const d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.add(h),this.nodesByIdentity.set(h,d)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,d)},"onDidCreateNode"),a=u(l=>{var c;if(l.element===null)return;const d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();s.has(h)||this.nodesByIdentity.delete(h)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,d)},"onDidDeleteNode");this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=st.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),st.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===la.Collapsed||t.collapsed===la.PreserveOrCollapsed?r=!0:t.collapsed===la.Expanded||t.collapsed===la.PreserveOrExpanded?r=!1:r=!!t.collapsed,Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children),collapsed:r})}const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===la.PreserveOrCollapsed||t.collapsed===la.PreserveOrExpanded?s=n.collapsed:t.collapsed===la.Collapsed?s=!0:t.collapsed===la.Expanded?s=!1:s=!!t.collapsed,Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new ys(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new ys(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new ys(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new ys(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}u(ZS,"ObjectTreeModel");function xy(o){const e=[o.element],t=o.incompressible||!1;return{element:{elements:e,incompressible:t},children:st.map(st.from(o.children),xy),collapsible:o.collapsible,collapsed:o.collapsed}}u(xy,"noCompress");function Ly(o){const e=[o.element],t=o.incompressible||!1;let n,i;for(;[i,n]=st.consume(st.from(o.children),2),!(i.length!==1||i[0].incompressible);)o=i[0],e.push(o.element);return{element:{elements:e,incompressible:t},children:st.map(st.concat(i,n),Ly),collapsible:o.collapsible,collapsed:o.collapsed}}u(Ly,"compress");function sM(o,e=0){let t;return e<o.element.elements.length-1?t=[sM(o,e+1)]:t=st.map(st.from(o.children),n=>sM(n,0)),e===0&&o.element.incompressible?{element:o.element.elements[e],children:t,incompressible:!0,collapsible:o.collapsible,collapsed:o.collapsed}:{element:o.element.elements[e],children:t,collapsible:o.collapsible,collapsed:o.collapsed}}u(sM,"_decompress");function JO(o){return sM(o,0)}u(JO,"decompress");function nU(o,e,t){return o.element===e?Object.assign(Object.assign({},o),{children:t}):Object.assign(Object.assign({},o),{children:st.map(st.from(o.children),n=>nU(n,e,t))})}u(nU,"splice");const Hae=u(o=>({getId(e){return e.elements.map(t=>o.getId(t).toString()).join("\0")}}),"wrapIdentityProvider");class iU{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new ZS(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=st.empty(),n){const i=n.diffIdentityProvider&&Hae(n.diffIdentityProvider);if(e===null){const f=st.map(t,this.enabled?Ly:xy);this._setChildren(null,f,{diffIdentityProvider:i,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new ys(this.user,"Unknown compressed tree node");const r=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=JO(r),d=nU(c,e,t),h=(this.enabled?Ly:xy)(d),g=l.children.map(f=>f===r?h:f);this._setChildren(l.element,g,{diffIdentityProvider:i,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=st.map(n,JO),s=st.map(i,e?Ly:xy);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,s=u(a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},"onDidCreateNode"),r=u(a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)},"onDidDeleteNode");this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new ys(this.user,`Tree element not found: ${e}`);return t}}u(iU,"CompressedObjectTreeModel");const Vae=u(o=>o[o.length-1],"DefaultElementMapper");class JS{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new JS(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}u(JS,"CompressedTreeNodeWrapper");function Wae(o,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>o.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}u(Wae,"mapList");function Bae(o,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(o(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(o(t),n)}}})}u(Bae,"mapOptions");class sU{get onDidSplice(){return pe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return pe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return pe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Vae;const i=u(s=>this.elementMapper(s.elements),"compressedNodeUnwrapper");this.nodeMapper=new YS(s=>new JS(i,s)),this.model=new iU(e,Wae(this.nodeMapper,t),Bae(i,n))}setChildren(e,t=st.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}u(sU,"CompressibleObjectTreeModel");var Uae=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class QS extends D2{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,i,s={}){super(e,t,n,i,s),this.user=e}setChildren(e,t=st.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new ZS(e,t,n)}}u(QS,"ObjectTree");class M2{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){var s,r,a,l;n.compressedTreeNode?(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,n.compressedTreeNode,t,n.data,i):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}u(M2,"CompressibleRenderer");Uae([mn],M2.prototype,"compressedTreeNodeProvider",null);function Gae(o,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=o().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}u(Gae,"asObjectTreeOptions$1");class A2 extends QS{constructor(e,t,n,i,s={}){const r=u(()=>this,"compressedTreeNodeProvider"),a=i.map(l=>new M2(r,l));super(e,t,n,a,Gae(r,s))}setChildren(e,t=st.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new sU(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}u(A2,"CompressibleObjectTree");var yc=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function iL(o){return Object.assign(Object.assign({},o),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}u(iL,"createAsyncDataTreeNode");function oM(o,e){return e.parent?e.parent===o?!0:oM(o,e.parent):!1}u(oM,"isAncestor");function zae(o,e){return o===e||oM(o,e)||oM(e,o)}u(zae,"intersects");class eT{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new eT(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}u(eT,"AsyncDataTreeNodeWrapper");class oU{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...xe.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...xe.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}u(oU,"AsyncDataTreeRenderer");function QO(o){return{browserEvent:o.browserEvent,elements:o.elements.map(e=>e.element)}}u(QO,"asTreeEvent");function e4(o){return{browserEvent:o.browserEvent,element:o.element&&o.element.element,target:o.target}}u(e4,"asTreeMouseEvent");class rU extends om{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}u(rU,"AsyncDataTreeElementsDragAndDropData");function sL(o){return o instanceof om?new rU(o):o}u(sL,"asAsyncDataTreeDragAndDropData");class aU{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,sL(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(sL(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(sL(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}}u(aU,"AsyncDataTreeNodeListDragAndDrop");function lU(o){return o&&Object.assign(Object.assign({},o),{collapseByDefault:!0,identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new aU(o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:o.accessibilityProvider&&Object.assign(Object.assign({},o.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:o.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=o.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider.getAriaLevel&&(e=>o.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))}),filter:o.filter&&{filter(e,t){return o.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},o.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof o.expandOnlyOnTwistieClick>"u"?void 0:typeof o.expandOnlyOnTwistieClick!="function"?o.expandOnlyOnTwistieClick:e=>o.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof o.defaultFindVisibility=="number"?o.defaultFindVisibility:typeof o.defaultFindVisibility>"u"?2:o.defaultFindVisibility(e.element)})}u(lU,"asObjectTreeOptions");function rM(o,e){e(o),o.children.forEach(t=>rM(t,e))}u(rM,"dfs");class I2{get onDidChangeFocus(){return pe.map(this.tree.onDidChangeFocus,QO)}get onDidChangeSelection(){return pe.map(this.tree.onDidChangeSelection,QO)}get onMouseDblClick(){return pe.map(this.tree.onMouseDblClick,e4)}get onPointer(){return pe.map(this.tree.onPointer,e4)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,i,s,r={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new F,this._onDidChangeNodeSlowState=new F,this.nodeMapper=new YS(a=>new eT(a)),this.disposables=new X,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,n,i,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=iL({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,i,s){const r=new XS(n),a=i.map(c=>new oU(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=lU(s)||{};return new QS(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return yc(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return yc(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new ys(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield pe.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,i,s),n)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return yc(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new ys(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield pe.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield pe.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield pe.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new ys(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return yc(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return yc(this,void 0,void 0,function*(){let i;if(this.subTreeRefreshPromises.forEach((s,r)=>{!i&&zae(r,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return yc(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield tk.settled(s.map(r=>this.doRefreshSubTree(r,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return yc(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(st.empty());else{const s=this.doGetChildren(e);if(TP(s))i=Promise.resolve(s);else{const r=ad(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=s.finally(()=>r.cancel())}}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Yr(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return TP(n)?this.processChildren(n):(t=On(()=>yc(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(He))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)if(r.set(d.element,d),this.identityProvider){const h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}const l=[],c=s.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const b=iL({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(b.collapsedByDefault=!1,l.push(b)),b}const g=this.identityProvider.getId(d).toString(),f=a.get(g);if(f){const b=f.node;return r.delete(b.element),this.nodes.delete(b.element),this.nodes.set(d,b),b.element=d,b.hasChildren=h,n?f.collapsed?(b.children.forEach(_=>rM(_,C=>this.nodes.delete(C.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(b.collapsedByDefault=!1,l.push(b)),b}const m=iL({element:d,parent:e,id:g,hasChildren:h});return i&&i.viewState.focus&&i.viewState.focus.indexOf(g)>-1&&i.focus.push(m),i&&i.viewState.selection&&i.viewState.selection.indexOf(g)>-1&&i.selection.push(m),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(g)>-1?l.push(m):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(m.collapsedByDefault=!1,l.push(m)),m});for(const d of r.values())rM(d,h=>this.nodes.delete(h.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const i=e.children.map(r=>this.asTreeElement(r,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?st.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}u(I2,"AsyncDataTree");class tT{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new tT(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}u(tT,"CompressibleAsyncDataTreeNodeWrapper");class cU{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...xe.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...xe.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var s,r;(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=mt(this.disposables)}}u(cU,"CompressibleAsyncDataTreeRenderer");function Kae(o){const e=o&&lU(o);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}u(Kae,"asCompressibleObjectTreeOptions");class dU extends I2{constructor(e,t,n,i,s,r,a={}){super(e,t,n,s,r,a),this.compressionDelegate=i,this.compressibleNodeMapper=new YS(l=>new tT(l)),this.filter=a.filter}createTree(e,t,n,i,s){const r=new XS(n),a=i.map(c=>new cU(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Kae(s)||{};return new A2(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=u(g=>this.identityProvider.getId(g).toString(),"getId"),i=u(g=>{const f=new Set;for(const m of g){const b=this.tree.getCompressedTreeNode(m===this.root?null:m);if(b.element)for(const _ of b.element.elements)f.add(n(_.element))}return f},"getUncompressedIds"),s=i(this.tree.getSelection()),r=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const h=u(g=>{const f=g.element;if(f)for(let m=0;m<f.elements.length;m++){const b=n(f.elements[m].element),_=f.elements[f.elements.length-1].element;s.has(b)&&a.indexOf(_)===-1&&(a.push(_),l=!0),r.has(b)&&c.indexOf(_)===-1&&(c.push(_),d=!0)}g.children.forEach(h)},"visit");h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=st.filter(e,t=>{const n=this.filter.filter(t,1),i=jae(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}u(dU,"CompressibleAsyncDataTree");function jae(o){return typeof o=="boolean"?o?1:0:k2(o)?U_(o.visibility):U_(o)}u(jae,"getVisibility");class uU extends D2{constructor(e,t,n,i,s,r={}){super(e,t,n,i,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,n){return new ZS(e,t,n)}}u(uU,"DataTree");new ue("isMac",Ye,p("isMac","Whether the operating system is macOS"));new ue("isLinux",bi,p("isLinux","Whether the operating system is Linux"));const nT=new ue("isWindows",li,p("isWindows","Whether the operating system is Windows"));new ue("isWeb",Ld,p("isWeb","Whether the platform is a web browser"));new ue("isMacNative",Ye&&!Ld,p("isMacNative","Whether the operating system is macOS on a non-browser platform"));new ue("isIOS",Fa,p("isIOS","Whether the operating system is iOS"));new ue("isMobile",HX,p("isMobile","Whether the platform is a mobile web browser"));new ue("isDevelopment",!1,!0);new ue("productQualityType","",p("productQualityType","Quality type of VS Code"));const hU="inputFocus";new ue(hU,!1,p("inputFocus","Whether keyboard focus is inside an input box"));var ac=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nt=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Fo=nt("listService");class gU{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new X,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new d2(ko(),"").style(ng)),this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),Jo(e.onDidFocus(()=>this.setLastFocusedList(e)),Oe(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}u(gU,"ListService");const fU=new ue("listFocus",!0),iT=new ue("listSupportsMultiselect",!0),pU=Z.and(fU,Z.not(hU)),N2=new ue("listHasSelectionOrFocus",!1),R2=new ue("listDoubleSelection",!1),P2=new ue("listMultiSelection",!1),sT=new ue("listSelectionNavigation",!1),$ae=new ue("listSupportsFind",!0),F2=new ue("treeElementCanCollapse",!1),qae=new ue("treeElementHasParent",!1),O2=new ue("treeElementCanExpand",!1),Yae=new ue("treeElementHasChild",!1),Xae=new ue("treeFindOpen",!1),mU="listTypeNavigationMode",bU="listAutomaticKeyboardNavigation";function oT(o,e){const t=o.createScoped(e.getHTMLElement());return fU.bindTo(t),t}u(oT,"createScopedContextKeyService");const sg="workbench.list.multiSelectModifier",Ey="workbench.list.openMode",yo="workbench.list.horizontalScrolling",H2="workbench.list.defaultFindMode",V2="workbench.list.typeNavigationMode",t1="workbench.list.keyboardNavigation",Kr="workbench.list.scrollByPage",W2="workbench.list.defaultFindMatchType",z_="workbench.tree.indent",n1="workbench.tree.renderIndentGuides",jr="workbench.list.smoothScrolling",Ba="workbench.list.mouseWheelScrollSensitivity",Ua="workbench.list.fastScrollSensitivity",i1="workbench.tree.expandMode";function Ga(o){return o.getValue(sg)==="alt"}u(Ga,"useAltAsMultipleSelectionModifier");class _U extends z{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Ga(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(sg)&&(this.useAltAsMultipleSelectionModifier=Ga(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:kB(e)}isSelectionRangeChangeEvent(e){return DB(e)}}u(_U,"MultipleSelectionController");function rT(o,e){var t;const n=o.get(lt),i=o.get(jt),s=new X;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return i.mightProducePrintableCharacter(a)}},smoothScrolling:!!n.getValue(jr),mouseWheelScrollSensitivity:n.getValue(Ba),fastScrollSensitivity:n.getValue(Ua),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new _U(n)),keyboardNavigationEventFilter:Zae(i),scrollByPage:!!n.getValue(Kr)}),s]}u(rT,"toWorkbenchListOptions");let aM=u(class extends Ro{constructor(e,t,n,i,s,r,a,l,c){const d=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(yo),[h,g]=c.invokeFunction(rT,s);super(e,t,n,i,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:d})),this.disposables.add(g),this.contextKeyService=oT(r,this),this.listSupportsMultiSelect=iT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),sT.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=N2.bindTo(this.contextKeyService),this.listDoubleSelection=R2.bindTo(this.contextKeyService),this.listMultiSelection=P2.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Ga(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||b.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||b.length>0)})),this.disposables.add(l.onDidChangeConfiguration(m=>{m.affectsConfiguration(sg)&&(this._useAltAsMultipleSelectionModifier=Ga(l));let b={};if(m.affectsConfiguration(yo)&&this.horizontalScrolling===void 0){const _=!!l.getValue(yo);b=Object.assign(Object.assign({},b),{horizontalScrolling:_})}if(m.affectsConfiguration(Kr)){const _=!!l.getValue(Kr);b=Object.assign(Object.assign({},b),{scrollByPage:_})}if(m.affectsConfiguration(jr)){const _=!!l.getValue(jr);b=Object.assign(Object.assign({},b),{smoothScrolling:_})}if(m.affectsConfiguration(Ba)){const _=l.getValue(Ba);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:_})}if(m.affectsConfiguration(Ua)){const _=l.getValue(Ua);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:_})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new B2(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?am(e):ng)}},"WorkbenchList");aM=ac([Nt(5,Me),Nt(6,Fo),Nt(7,lt),Nt(8,Re)],aM);let t4=u(class extends U6{constructor(e,t,n,i,s,r,a,l,c){const d=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(yo),[h,g]=c.invokeFunction(rT,s);super(e,t,n,i,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:d})),this.disposables=new X,this.disposables.add(g),this.contextKeyService=oT(r,this),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=iT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),sT.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=Ga(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(m=>{m.affectsConfiguration(sg)&&(this._useAltAsMultipleSelectionModifier=Ga(l));let b={};if(m.affectsConfiguration(yo)&&this.horizontalScrolling===void 0){const _=!!l.getValue(yo);b=Object.assign(Object.assign({},b),{horizontalScrolling:_})}if(m.affectsConfiguration(Kr)){const _=!!l.getValue(Kr);b=Object.assign(Object.assign({},b),{scrollByPage:_})}if(m.affectsConfiguration(jr)){const _=!!l.getValue(jr);b=Object.assign(Object.assign({},b),{smoothScrolling:_})}if(m.affectsConfiguration(Ba)){const _=l.getValue(Ba);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:_})}if(m.affectsConfiguration(Ua)){const _=l.getValue(Ua);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:_})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new B2(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?am(e):ng)}dispose(){this.disposables.dispose(),super.dispose()}},"WorkbenchPagedList");t4=ac([Nt(5,Me),Nt(6,Fo),Nt(7,lt),Nt(8,Re)],t4);let n4=u(class extends e0{constructor(e,t,n,i,s,r,a,l,c,d){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(yo),[g,f]=d.invokeFunction(rT,r);super(e,t,n,i,s,Object.assign(Object.assign({keyboardSupport:!1},g),{horizontalScrolling:h})),this.disposables.add(f),this.contextKeyService=oT(a,this),this.listSupportsMultiSelect=iT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),sT.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=N2.bindTo(this.contextKeyService),this.listDoubleSelection=R2.bindTo(this.contextKeyService),this.listMultiSelection=P2.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Ga(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||_.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(b=>{b.affectsConfiguration(sg)&&(this._useAltAsMultipleSelectionModifier=Ga(c));let _={};if(b.affectsConfiguration(yo)&&this.horizontalScrolling===void 0){const C=!!c.getValue(yo);_=Object.assign(Object.assign({},_),{horizontalScrolling:C})}if(b.affectsConfiguration(Kr)){const C=!!c.getValue(Kr);_=Object.assign(Object.assign({},_),{scrollByPage:C})}if(b.affectsConfiguration(jr)){const C=!!c.getValue(jr);_=Object.assign(Object.assign({},_),{smoothScrolling:C})}if(b.affectsConfiguration(Ba)){const C=c.getValue(Ba);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:C})}if(b.affectsConfiguration(Ua)){const C=c.getValue(Ua);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:C})}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new vU(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?am(e):ng)}dispose(){this.disposables.dispose(),super.dispose()}},"WorkbenchTable");n4=ac([Nt(6,Me),Nt(7,Fo),Nt(8,lt),Nt(9,Re)],n4);class aT extends z{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new F),this.onDidOpen=this._onDidOpen.event,this._register(pe.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(Ey)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(Ey)&&(this.openOnSingleClick=t?.configurationService.getValue(Ey)!=="doubleClick")}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,r=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}u(aT,"ResourceNavigator");class B2 extends aT{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}u(B2,"ListResourceNavigator");class vU extends aT{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}u(vU,"TableResourceNavigator");class CU extends aT{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}u(CU,"TreeResourceNavigator");function Zae(o){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=o.softDispatch(t,t.target);return n?.kind===1?(e=!0,!1):(e=!1,!n)}}u(Zae,"createKeyboardNavigationEventFilter");let i4=u(class extends QS{constructor(e,t,n,i,s,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:g}=r.invokeFunction(t0,s);super(e,t,n,i,d),this.disposables.add(g),this.internals=new vh(this,s,h,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchObjectTree");i4=ac([Nt(5,Re),Nt(6,Me),Nt(7,Fo),Nt(8,lt)],i4);let s4=u(class extends A2{constructor(e,t,n,i,s,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:g}=r.invokeFunction(t0,s);super(e,t,n,i,d),this.disposables.add(g),this.internals=new vh(this,s,h,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchCompressibleObjectTree");s4=ac([Nt(5,Re),Nt(6,Me),Nt(7,Fo),Nt(8,lt)],s4);let o4=u(class extends uU{constructor(e,t,n,i,s,r,a,l,c,d){const{options:h,getTypeNavigationMode:g,disposable:f}=a.invokeFunction(t0,r);super(e,t,n,i,s,h),this.disposables.add(f),this.internals=new vh(this,r,g,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchDataTree");o4=ac([Nt(6,Re),Nt(7,Me),Nt(8,Fo),Nt(9,lt)],o4);let lM=u(class extends I2{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,s,r,a,l,c,d){const{options:h,getTypeNavigationMode:g,disposable:f}=a.invokeFunction(t0,r);super(e,t,n,i,s,h),this.disposables.add(f),this.internals=new vh(this,r,g,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchAsyncDataTree");lM=ac([Nt(6,Re),Nt(7,Me),Nt(8,Fo),Nt(9,lt)],lM);let r4=u(class extends dU{constructor(e,t,n,i,s,r,a,l,c,d,h){const{options:g,getTypeNavigationMode:f,disposable:m}=l.invokeFunction(t0,a);super(e,t,n,i,s,r,g),this.disposables.add(m),this.internals=new vh(this,a,f,a.overrideStyles,c,d,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchCompressibleAsyncDataTree");r4=ac([Nt(7,Re),Nt(8,Me),Nt(9,Fo),Nt(10,lt)],r4);function yU(o){const e=o.getValue(H2);if(e==="highlight")return ka.Highlight;if(e==="filter")return ka.Filter;const t=o.getValue(t1);if(t==="simple"||t==="highlight")return ka.Highlight;if(t==="filter")return ka.Filter}u(yU,"getDefaultTreeFindMode");function wU(o){const e=o.getValue(W2);if(e==="fuzzy")return _h.Fuzzy;if(e==="contiguous")return _h.Contiguous}u(wU,"getDefaultTreeFindMatchType");function t0(o,e){var t;const n=o.get(lt),i=o.get(rc),s=o.get(Me),r=o.get(Re),a=u(()=>{const f=s.getContextKeyValue(mU);if(f==="automatic")return _a.Automatic;if(f==="trigger"||s.getContextKeyValue(bU)===!1)return _a.Trigger;const b=n.getValue(V2);if(b==="automatic")return _a.Automatic;if(b==="trigger")return _a.Trigger},"getTypeNavigationMode"),l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(yo),[c,d]=r.invokeFunction(rT,e),h=e.additionalScrollHeight,g=e.renderIndentGuides!==void 0?e.renderIndentGuides:n.getValue(n1);return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof n.getValue(z_)=="number"?n.getValue(z_):void 0,renderIndentGuides:g,smoothScrolling:!!n.getValue(jr),defaultFindMode:yU(n),defaultFindMatchType:wU(n),horizontalScrolling:l,scrollByPage:!!n.getValue(Kr),additionalScrollHeight:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(i1)==="doubleClick",contextViewProvider:i,findWidgetStyles:bae})}}u(t0,"workbenchTreeDataPreamble");let vh=u(class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,s,r,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=oT(s,e),this.listSupportsMultiSelect=iT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),sT.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=$ae.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=N2.bindTo(this.contextKeyService),this.hasDoubleSelection=R2.bindTo(this.contextKeyService),this.hasMultiSelection=P2.bindTo(this.contextKeyService),this.treeElementCanCollapse=F2.bindTo(this.contextKeyService),this.treeElementHasParent=qae.bindTo(this.contextKeyService),this.treeElementCanExpand=O2.bindTo(this.contextKeyService),this.treeElementHasChild=Yae.bindTo(this.contextKeyService),this.treeFindOpen=Xae.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Ga(a),this.updateStyleOverrides(i);const d=u(()=>{const g=e.getFocus()[0];if(!g)return;const f=e.getNode(g);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(g)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(g))},"updateCollapseContextKeys"),h=new Set;h.add(mU),h.add(bU),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const g=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(g.length>0||f.length>0),this.hasMultiSelection.set(g.length>1),this.hasDoubleSelection.set(g.length===2)})}),e.onDidChangeFocus(()=>{const g=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(g.length>0||f.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(g=>this.treeFindOpen.set(g)),a.onDidChangeConfiguration(g=>{let f={};if(g.affectsConfiguration(sg)&&(this._useAltAsMultipleSelectionModifier=Ga(a)),g.affectsConfiguration(z_)){const m=a.getValue(z_);f=Object.assign(Object.assign({},f),{indent:m})}if(g.affectsConfiguration(n1)&&t.renderIndentGuides===void 0){const m=a.getValue(n1);f=Object.assign(Object.assign({},f),{renderIndentGuides:m})}if(g.affectsConfiguration(jr)){const m=!!a.getValue(jr);f=Object.assign(Object.assign({},f),{smoothScrolling:m})}if(g.affectsConfiguration(H2)||g.affectsConfiguration(t1)){const m=yU(a);f=Object.assign(Object.assign({},f),{defaultFindMode:m})}if(g.affectsConfiguration(V2)||g.affectsConfiguration(t1)){const m=n();f=Object.assign(Object.assign({},f),{typeNavigationMode:m})}if(g.affectsConfiguration(W2)){const m=wU(a);f=Object.assign(Object.assign({},f),{defaultFindMatchType:m})}if(g.affectsConfiguration(yo)&&t.horizontalScrolling===void 0){const m=!!a.getValue(yo);f=Object.assign(Object.assign({},f),{horizontalScrolling:m})}if(g.affectsConfiguration(Kr)){const m=!!a.getValue(Kr);f=Object.assign(Object.assign({},f),{scrollByPage:m})}if(g.affectsConfiguration(i1)&&t.expandOnlyOnTwistieClick===void 0&&(f=Object.assign(Object.assign({},f),{expandOnlyOnTwistieClick:a.getValue(i1)==="doubleClick"})),g.affectsConfiguration(Ba)){const m=a.getValue(Ba);f=Object.assign(Object.assign({},f),{mouseWheelScrollSensitivity:m})}if(g.affectsConfiguration(Ua)){const m=a.getValue(Ua);f=Object.assign(Object.assign({},f),{fastScrollSensitivity:m})}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(g=>{g.affectsSome(h)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new CU(e,Object.assign({configurationService:a},t)),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?am(e):ng)}dispose(){this.disposables=mt(this.disposables)}},"WorkbenchTreeInternals");vh=ac([Nt(4,Me),Nt(5,Fo),Nt(6,lt)],vh);const Jae=Kt.as(ja.Configuration);Jae.registerConfiguration({id:"workbench",order:7,title:p("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[sg]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[p("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:p({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Ey]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[yo]:{type:"boolean",default:!1,description:p("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Kr]:{type:"boolean",default:!1,description:p("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[z_]:{type:"number",default:8,minimum:4,maximum:40,description:p("tree indent setting","Controls tree indentation in pixels.")},[n1]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:p("render tree indent guides","Controls whether the tree should render indent guides.")},[jr]:{type:"boolean",default:!1,description:p("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Ba]:{type:"number",default:1,markdownDescription:p("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Ua]:{type:"number",default:5,markdownDescription:p("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[H2]:{type:"string",enum:["highlight","filter"],enumDescriptions:[p("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),p("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:p("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[t1]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[p("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),p("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),p("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:p("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:p("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[W2]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[p("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),p("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:p("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[i1]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[V2]:{type:"string",enum:["automatic","trigger"],default:"automatic",description:p("typeNavigationMode","Controls the how type navigation works in lists and trees in the workbench. When set to 'trigger', type navigation begins once the 'list.triggerTypeNavigation' command is run.")}}});var cM;(function(o){o[o.PRESERVE=0]="PRESERVE",o[o.LAST=1]="LAST"})(cM||(cM={}));const og={Quickaccess:"workbench.contributions.quickaccess"};class SU{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Oe(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return jp([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}u(SU,"QuickAccessRegistry");Kt.add(og.Quickaccess,new SU);const Qae={ctrlCmd:!1,alt:!1};var K_;(function(o){o[o.Blur=1]="Blur",o[o.Gesture=2]="Gesture",o[o.Other=3]="Other"})(K_||(K_={}));var br;(function(o){o[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST"})(br||(br={}));const Ja=nt("quickInputService");var ele=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},a4=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let dM=u(class extends z{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Kt.as(og.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a?.descriptor;if(a&&r&&l===r){e!==r.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,n);return}if(r&&!n?.preserveValue){let f;if(a&&l&&l!==r){const m=a.value.substr(l.prefix.length);m&&(f=`${r.prefix}${m}`)}if(!f){const m=s?.defaultFilterValue;m===cM.LAST?f=this.lastAcceptedPickerValues.get(r):typeof m=="string"&&(f=`${r.prefix}${m}`)}typeof f=="string"&&(e=f)}const c=new X,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,r,n),d.placeholder=r?.placeholder,d.quickNavigate=n?.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(d.itemActivation=(i=n?.itemActivation)!==null&&i!==void 0?i:br.SECOND),d.contextKey=r?.contextKey,d.filterValue=f=>f.substring(r?r.prefix.length:0),r?.placeholder&&(d.ariaLabel=r?.placeholder);let h;t&&(h=new eS,c.add(Ha(d.onWillAccept)(f=>{f.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,s,r,e,n?.providerOptions));const g=c.add(new ci);if(s&&c.add(s.provide(d,g.token,n?.providerOptions)),Ha(d.onDidHide)(()=>{d.selectedItems.length===0&&g.cancel(),c.dispose(),h?.complete(d.selectedItems.slice(0))}),d.show(),t)return h?.p}adjustValueSelection(e,t,n){var i;let s;n?.preserveValue?s=[e.value.length,e.value.length]:s=[(i=t?.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i,s){const r=new X,a=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return r.add(Oe(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l);c!==t?this.show(l,{preserveValue:!0,providerOptions:s}):a.value=l})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}},"QuickAccessController");dM=ele([a4(0,Ja),a4(1,Re)],dM);U.white.toString(),U.white.toString();class uM extends z{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new F),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button");const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),e.appendChild(this._element),this._register(Tt.addTarget(this._element)),[ae.CLICK,Dt.Tap].forEach(s=>{this._register($(this._element,s,r=>{if(!this.enabled){Be.stop(r);return}this._onDidClick.fire(r)}))}),this._register($(this._element,ae.KEY_DOWN,s=>{const r=new Et(s);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(s),a=!0):r.equals(9)&&(this._element.blur(),a=!0),a&&Be.stop(r,!0)})),this._register($(this._element,ae.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register($(this._element,ae.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(Kl(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}getContentElements(e){const t=[];for(let n of Gu(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||qb(this._label)&&qb(e)&&poe(this._label,e))return;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(qb(e)){const i=r2(e,{inline:!0});i.dispose();const s=(t=i.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(s){const r=Y3(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=r}else nr(n)}else this.options.supportIcons?nr(n,...this.getContentElements(e)):n.textContent=e;typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=Loe(e)),this._label=e}get label(){return this._label}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}u(uM,"Button");class s1{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=q(e,ie(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=mo(this.countFormat,this.count),this.element.title=mo(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}u(s1,"CountBadge");const l4="done",c4="active",oL="infinite",rL="infinite-long-running",d4="discrete";class n0 extends z{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new yt(()=>Cs(this.element),0)),this.longRunningScheduler=this._register(new yt(()=>this.infiniteLongRunning(),n0.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(c4,oL,rL,d4),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(l4),this.element.classList.contains(oL)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(d4,l4,rL),this.element.classList.add(c4,oL),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(rL)}getContainer(){return this.element}}u(n0,"ProgressBar");n0.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const tle=ie;class TU extends z{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=s=>$(this.findInput.inputBox.inputElement,ae.KEY_DOWN,r=>{s(new Et(r))}),this.onMouseDown=s=>$(this.findInput.inputBox.inputElement,ae.MOUSE_DOWN,r=>{s(new jo(r))}),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=q(this.parent,tle(".quick-input-box")),this.findInput=this._register(new E2(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const i=this.findInput.inputBox.inputElement;i.role="combobox",i.ariaHasPopup="menu",i.ariaAutoComplete="list",i.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===cn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===cn.Info?1:e===cn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===cn.Info?1:e===cn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}u(TU,"QuickInputBox");class Hl{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=q(e,ie("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=Hl.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&qs(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const r=this.text.substring(t,n.start);this.supportIcons?e.push(...Gu(r)):e.push(r),t=n.start}const i=this.text.substring(t,n.end),s=ie("span.highlight",void 0,...this.supportIcons?Gu(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...Gu(n)):e.push(n)}nr(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,r)=>{i=s===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=i),a.end>=r&&(a.end+=i));return n+=i,"⏎"})}}u(Hl,"HighlightedLabel");class ky{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}u(ky,"FastLabelNode");class j_ extends z{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new ky(q(e,ie(".monaco-icon-label")))),this.labelContainer=q(this.domNode.element,ie(".monaco-icon-label-container"));const n=q(this.labelContainer,ie("span.monaco-icon-name-container"));t?.supportHighlights||t?.supportIcons?this.nameNode=new LU(n,!!t.supportIcons):this.nameNode=new xU(n),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"],s=["monaco-icon-label-container"];if(n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough"),n.disabledCommand&&s.push("disabled")),this.domNode.className=i.join(" "),this.labelContainer.className=s.join(" "),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const r=this.getOrCreateDescriptionNode();r instanceof Hl?(r.set(t||"",n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines),this.setupHover(r.element,n?.descriptionTitle)):(r.textContent=t&&n?.labelEscapeNewLines?Hl.escapeNewLines(t,[]):t||"",this.setupHover(r.element,n?.descriptionTitle||""),r.empty=!t)}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)_oe(e,t);else{const i=hB(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new ky(q(this.labelContainer,ie("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=new Hl(q(t.element,ie("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new ky(q(t.element,ie("span.label-description"))))}return this.descriptionNode}}u(j_,"IconLabel");class xU{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&qs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=q(this.container,ie("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=t?.domId&&`${t?.domId}_${n}`;q(this.container,ie("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&q(this.container,ie("span.label-separator",void 0,t?.separator||"/"))}}}}u(xU,"Label");function nle(o,e,t){if(!t)return;let n=0;return o.map(i=>{const s={start:n,end:n+i.length},r=t.map(a=>Ci.intersect(s,a)).filter(a=>!Ci.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,r})}u(nle,"splitMatches");class LU{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&qs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Hl(q(this.container,ie("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",i=nle(e,n,t?.matches);for(let s=0;s<e.length;s++){const r=e[s],a=i?i[s]:void 0,l=t?.domId&&`${t?.domId}_${s}`,c=ie("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new Hl(q(this.container,c),{supportIcons:this.supportIcons}).set(r,a,void 0,t?.labelEscapeNewLines),s<e.length-1&&q(c,ie("span.label-separator",void 0,n))}}}}u(LU,"LabelWithHighlights");const wC=ie,ile={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class cm{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const i=this.options.keybindingLabelForeground;this.domNode=q(e,wC(".monaco-keybinding")),i&&(this.domNode.style.color=i),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&cm.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let i=1;i<t.length;i++)q(this.domNode,wC("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[i],this.matches?this.matches.chordPart:null);const n=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;n!==void 0?this.domNode.title=n:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){kn(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const i=b2.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!n?.ctrlKey,i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!n?.shiftKey,i.separator),t.altKey&&this.renderKey(e,i.altKey,!!n?.altKey,i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!n?.metaKey,i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!n?.keyCode,"")}renderKey(e,t,n,i){q(e,this.createKeyElement(t,n?".highlight":"")),i&&q(e,wC("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){q(e,this.createKeyElement(p("unbound","Unbound")))}createKeyElement(e,t=""){const n=wC("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&qs(e.firstPart,t.firstPart)&&qs(e.chordPart,t.chordPart)}}u(cm,"KeybindingLabel");const u4=new tc(()=>{const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}});function sle(o,e,t=!1){const n=o||"",i=e||"",s=u4.value.collator.compare(n,i);return u4.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}u(sle,"compareFileNames");function ole(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=rle(o,e,t);if(s)return s;const r=n.endsWith(t),a=i.endsWith(t);if(r!==a)return r?-1:1;const l=sle(n,i);return l!==0?l:n.localeCompare(i)}u(ole,"compareAnything");function rle(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),r=i.startsWith(t);if(s!==r)return s?-1:1;if(s&&r){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}u(rle,"compareByPrefix");var ale=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class U2{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}u(U2,"LinkedText");ale([mn],U2.prototype,"toString",null);const lle=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function cle(o){const e=[];let t=0,n;for(;n=lle.exec(o);){n.index-t>0&&e.push(o.substring(t,n.index));const[,i,s,,r]=n;r?e.push({label:i,href:s,title:r}):e.push({label:i,href:s}),t=n.index+n[0].length}return t<o.length&&e.push(o.substring(t)),new U2(e)}u(cle,"parseLinkedText");const aL={},dle=new zS("quick-input-button-icon-");function hM(o){if(!o)return;let e;const t=o.dark.toString();return aL[t]?e=aL[t]:(e=dle.nextId(),Ck(`.${e}, .hc-light .${e}`,`background-image: ${uh(o.light||o.dark)}`),Ck(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${uh(o.dark)}`),aL[t]=e),e}u(hM,"getIconClass");function ule(o,e,t){nr(e);const n=cle(o);let i=0;for(const s of n.nodes)if(typeof s=="string")e.append(...Gu(s));else{let r=s.title;!r&&s.href.startsWith("command:")?r=p("executeCommand","Click to execute command '{0}'",s.href.substring(8)):r||(r=s.href);const a=ie("a",{href:s.href,title:r,tabIndex:i++},s.label);a.style.textDecoration="underline";const l=u(f=>{Mee(f)&&Be.stop(f,!0),t.callback(s.href)},"handleOpen"),c=t.disposables.add(new qe(a,ae.CLICK)).event,d=t.disposables.add(new qe(a,ae.KEY_DOWN)).event,h=t.disposables.add(pe.chain(d)).filter(f=>{const m=new Et(f);return m.equals(10)||m.equals(3)}).event;t.disposables.add(Tt.addTarget(a));const g=t.disposables.add(new qe(a,Dt.Tap)).event;pe.any(c,g,h)(l,null,t.disposables),e.appendChild(a)}}u(ule,"renderQuickInputDescription");var EU=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},h4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const ra=ie;class kU{get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}constructor(e){this.hidden=!1,this._onChecked=new F,this.onChecked=this._onChecked.event,Object.assign(this,e)}dispose(){this._onChecked.dispose()}}u(kU,"ListElement");class dm{get templateId(){return dm.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=q(e,ra(".quick-input-list-entry"));const n=q(t.entry,ra("label.quick-input-list-label"));t.toDisposeTemplate.push(pn(n,ae.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=q(n,ra("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(pn(t.checkbox,ae.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const i=q(n,ra(".quick-input-list-rows")),s=q(i,ra(".quick-input-list-row")),r=q(i,ra(".quick-input-list-row"));t.label=new j_(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=q(s,ra(".quick-input-list-entry-keybinding"));t.keybinding=new cm(a,Us);const l=q(r,ra(".quick-input-list-label-meta"));return t.detail=new j_(l,{supportHighlights:!0,supportIcons:!0}),t.separator=q(t.entry,ra(".quick-input-list-separator")),t.actionBar=new eo(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.element=e,e.element=si(n.entry);const i=e.item?e.item:e.separator;n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(d=>n.checkbox.checked=d));const{labelHighlights:s,descriptionHighlights:r,detailHighlights:a}=e,l=Object.create(null);l.matches=s||[],l.descriptionTitle=e.saneDescription,l.descriptionMatches=r||[],i.type!=="separator"?(l.extraClasses=i.iconClasses,l.italic=i.italic,l.strikethrough=i.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item")):n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(e.saneLabel,e.saneDescription,l),n.keybinding.set(i.type==="separator"?void 0:i.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:a,title:e.saneDetail}),e.item&&e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);const c=i.buttons;c&&c.length?(n.actionBar.push(c.map((d,h)=>{let g=d.iconClass||(d.iconPath?hM(d.iconPath):void 0);return d.alwaysVisible&&(g=g?`${g} always-visible`:"always-visible"),{id:`id-${h}`,class:g,enabled:!0,label:"",tooltip:d.tooltip||"",run:()=>{i.type!=="separator"?e.fireButtonTriggered({button:d,item:i}):e.fireSeparatorButtonTriggered({button:d,separator:i})}}}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=mt(n.toDisposeElement),n.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=mt(e.toDisposeElement),e.toDisposeTemplate=mt(e.toDisposeTemplate)}}u(dm,"ListElementRenderer");dm.ID="listelement";class DU{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return dm.ID}}u(DU,"ListElementDelegate");var Un;(function(o){o[o.First=1]="First",o[o.Second=2]="Second",o[o.Last=3]="Last",o[o.Next=4]="Next",o[o.Previous=5]="Previous",o[o.NextPage=6]="NextPage",o[o.PreviousPage=7]="PreviousPage"})(Un||(Un={}));class lT{constructor(e,t,n){this.parent=e,this.options=n,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new F,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new F,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new F,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new F,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new F,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new F,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new F,this.onKeyDown=this._onKeyDown.event,this._onLeave=new F,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=q(this.parent,ra(".quick-input-list"));const i=new DU,s=new MU;this.list=n.createList("QuickInput",this.container,i,[new dm],{identityProvider:{getId:a=>a.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(a=>{const l=new Et(a);switch(l.keyCode){case 10:this.toggleCheckbox();break;case 31:(Ye?a.metaKey:a.ctrlKey)&&this.list.setFocus(Hi(this.list.length));break;case 16:{const c=this.list.getFocus();c.length===1&&c[0]===0&&this._onLeave.fire();break}case 18:{const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(l)})),this.disposables.push(this.list.onMouseDown(a=>{a.browserEvent.button!==2&&a.browserEvent.preventDefault()})),this.disposables.push($(this.container,ae.CLICK,a=>{(a.x||a.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(a=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(a=>{typeof a.index=="number"&&(a.browserEvent.preventDefault(),this.list.setSelection([a.index]))}));const r=new YI(n.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(a=>h4(this,void 0,void 0,function*(){var l;if(a.browserEvent.target instanceof HTMLAnchorElement){r.cancel();return}if(!(!(a.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&vo(a.browserEvent.relatedTarget,(l=a.element)===null||l===void 0?void 0:l.element)))try{yield r.trigger(()=>h4(this,void 0,void 0,function*(){a.element&&this.showHover(a.element)}))}catch(c){if(!Yr(c))throw c}}))),this.disposables.push(this.list.onMouseOut(a=>{var l;vo(a.browserEvent.relatedTarget,(l=a.element)===null||l===void 0?void 0:l.element)||r.cancel()})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown,r)}get onDidChangeFocus(){return pe.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return pe.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=mt(this.elementDisposables);const t=u(i=>this.fireButtonTriggered(i),"fireButtonTriggered"),n=u(i=>this.fireSeparatorButtonTriggered(i),"fireSeparatorButtonTriggered");this.inputElements=e,this.elements=e.reduce((i,s,r)=>{var a,l,c;const d=r&&e[r-1],h=s.label?s.label.replace(/\r?\n/g," "):"",g=Tg(h).text.trim();let f,m,b,_,C,v,y;s.type!=="separator"&&(f=s.meta&&s.meta.replace(/\r?\n/g," "),m=s.description&&s.description.replace(/\r?\n/g," "),b=s.detail&&s.detail.replace(/\r?\n/g," "),_=(a=s.highlights)===null||a===void 0?void 0:a.label,C=(l=s.highlights)===null||l===void 0?void 0:l.description,v=(c=s.highlights)===null||c===void 0?void 0:c.detail,y=s.tooltip);const w=s.ariaLabel||[h,m,b].map(E=>foe(E)).filter(E=>!!E).join(", "),x=this.parent.classList.contains("show-checkboxes");let M;if(s.type==="separator"){if(!s.buttons)return i;M=s}else d&&d.type==="separator"&&!d.buttons&&(M=d);const L=new kU({hasCheckbox:x,index:r,item:s.type!=="separator"?s:void 0,saneLabel:h,saneSortLabel:g,saneMeta:f,saneAriaLabel:w,saneDescription:m,saneDetail:b,saneTooltip:y,labelHighlights:_,descriptionHighlights:C,detailHighlights:v,checked:!1,separator:M,fireButtonTriggered:t,fireSeparatorButtonTriggered:n});return this.elementDisposables.push(L),this.elementDisposables.push(L.onChecked(()=>this.fireCheckedEvents())),i.push(L),i},[]),this.elementsToIndexes=this.elements.reduce((i,s,r)=>{var a;return i.set((a=s.item)!==null&&a!==void 0?a:s.separator,r),i},new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item).filter(e=>!!e)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Un.Second&&this.list.length<2&&(e=Un.First),e){case Un.First:this.list.scrollTop=0,this.list.focusFirst(void 0,n=>!!n.item);break;case Un.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,n=>!!n.item);break;case Un.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,n=>!!n.item);break;case Un.Next:{this.list.focusNext(void 0,!0,void 0,i=>!!i.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case Un.Previous:{this.list.focusPrevious(void 0,!0,void 0,i=>!!i.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case Un.NextPage:this.list.focusNextPage(void 0,n=>!!n.item);break;case Un.PreviousPage:this.list.focusPreviousPage(void 0,n=>!!n.item);break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,n,i;this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.options.hoverDelegate).onDidHideHover)===null||n===void 0||n.call(t),(i=this._lastHover)===null||i===void 0||i.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.options.linkOpenerDelegate(s)},showPointer:!0,container:this.container,hoverPosition:1},!1))}layout(e){this.list.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this.inputElements[i.index-1];i.item&&(i.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let i;this.elements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?si(gC(e,Tg(s.saneLabel))):void 0:r=this.matchOnLabel?si(hle(t,Tg(s.saneLabel))):void 0;const a=this.matchOnDescription?si(gC(e,Tg(s.saneDescription||""))):void 0,l=this.matchOnDetail?si(gC(e,Tg(s.saneDetail||""))):void 0,c=this.matchOnMeta?si(gC(e,Tg(s.saneMeta||""))):void 0;if(r||a||l||c?(s.labelHighlights=r,s.descriptionHighlights=a,s.detailHighlights=l,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),!this.sortByLabel){const d=s.index&&this.inputElements[s.index-1];i=d&&d.type==="separator"?d:i,i&&!s.hidden&&(s.separator=i,i=void 0)}})}const n=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){const i=e.toLowerCase();n.sort((s,r)=>gle(s,r,i))}return this.elementsToIndexes=n.reduce((i,s,r)=>{var a;return i.set((a=s.item)!==null&&a!==void 0?a:s.separator,r),i},new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=mt(this.elementDisposables),this.disposables=mt(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){if(!this.list.getFocusedElements()[0].saneTooltip)return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}const t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);const n=new X;n.add(this.list.onDidChangeFocus(i=>{i.indexes.length&&this.showHover(i.elements[0])})),this._lastHover&&n.add(this._lastHover),this._toggleHover=n,this.elementDisposables.push(this._toggleHover)}}u(lT,"QuickInputList");EU([mn],lT.prototype,"onDidChangeFocus",null);EU([mn],lT.prototype,"onDidChangeSelection",null);function hle(o,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return g4(o,t);const i=Cv(t," "),s=t.length-i.length,r=g4(o,i);if(r)for(const a of r){const l=n[a.start+s]+s;a.start+=l,a.end+=l}return r}u(hle,"matchesContiguousIconAware");function g4(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t!==-1?[{start:t,end:t+o.length}]:null}u(g4,"matchesContiguous");function gle(o,e,t){const n=o.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:ole(o.saneSortLabel,e.saneSortLabel,t)}u(gle,"compareEntries");class MU{getWidgetAriaLabel(){return p("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}u(MU,"QuickInputAccessibilityProvider");var f4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Ns=ie,gM={iconClass:xe.asClassName(re.quickInputBack),tooltip:p("quickInput.back","Back"),handle:-1};class um extends z{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=um.noPromptMessage,this._severity=cn.Ignore,this.onDidTriggerButtonEmitter=this._register(new F),this.onDidHideEmitter=this._register(new F),this.onDisposeEmitter=this._register(new F),this.visibleDisposables=this._register(new X),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Fa;this._ignoreFocusOut=e&&!Fa,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=K_.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const n=this.getTitle();n&&this.ui.title.textContent!==n?this.ui.title.textContent=n:!n&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const i=this.getDescription();if(this.ui.description1.textContent!==i&&(this.ui.description1.textContent=i),this.ui.description2.textContent!==i&&(this.ui.description2.textContent=i),this.busy&&!this.busyDelay&&(this.busyDelay=new io,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(l=>l===gM);this.ui.leftActionBar.push(r.map((l,c)=>{const d=new cs(`id-${c}`,"",l.iconClass||hM(l.iconPath),!0,()=>f4(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==gM);this.ui.rightActionBar.push(a.map((l,c)=>{const d=new cs(`id-${c}`,"",l.iconClass||hM(l.iconPath),!0,()=>f4(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof ig))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,nr(this.ui.message),ule(s,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?p("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==cn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}u(um,"QuickInput");um.noPromptMessage=p("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class Sp extends um{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new F),this.onWillAcceptEmitter=this._register(new F),this.onDidAcceptEmitter=this._register(new F),this.onDidCustomEmitter=this._register(new F),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=br.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new F),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new F),this.onDidTriggerItemButtonEmitter=this._register(new F),this.onDidTriggerSeparatorButtonEmitter=this._register(new F),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?Qae:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Un.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Un.Next),this.canSelectMany&&this.ui.list.domFocus(),Be.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Un.Previous):this.ui.list.focus(Un.Last),this.canSelectMany&&this.ui.list.domFocus(),Be.stop(e,!0);break;case 12:this.ui.list.focus(Un.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Be.stop(e,!0);break;case 11:this.ui.list.focus(Un.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Be.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Un.First),Be.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Un.Last),Be.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&pi(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&pi(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&pi(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return $(this.ui.container,ae.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Et(e),n=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;if(i||(i=this.placeholder||Sp.DEFAULT_ARIA_LABEL,this.title&&(i+=` - ${this.title}`)),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case br.NONE:this._itemActivation=br.FIRST;break;case br.SECOND:this.ui.list.focus(Un.Second),this._itemActivation=br.FIRST;break;case br.LAST:this.ui.list.focus(Un.Last),this._itemActivation=br.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Un.First)),this.keepScrollPosition&&(this.scrollTop=e)}}u(Sp,"QuickPick");Sp.DEFAULT_ARIA_LABEL=p("quickInputBox.ariaLabel","Type to narrow down results.");class AU extends um{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new F),this.onDidAcceptEmitter=this._register(new F),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}u(AU,"InputBox");class i0 extends z{constructor(e){super(),this.options=e,this.enabled=!0,this.onDidAcceptEmitter=this._register(new F),this.onDidCustomEmitter=this._register(new F),this.onDidTriggerButtonEmitter=this._register(new F),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new F),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new F),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=u(t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey},"listener");this._register($(window,ae.KEY_DOWN,e,!0)),this._register($(window,ae.KEY_UP,e,!0)),this._register($(window,ae.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=q(this.parentElement,Ns(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=ko(e),n=q(e,Ns(".quick-input-titlebar")),i=this._register(new eo(n));i.domNode.classList.add("quick-input-left-action-bar");const s=q(n,Ns(".quick-input-title")),r=this._register(new eo(n));r.domNode.classList.add("quick-input-right-action-bar");const a=q(e,Ns(".quick-input-description")),l=q(e,Ns(".quick-input-header")),c=q(l,Ns("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",p("quickInput.checkAll","Toggle all checkboxes")),this._register(pn(c,ae.CHANGE,P=>{const H=c.checked;k.setAllVisibleChecked(H)})),this._register($(c,ae.CLICK,P=>{(P.x||P.y)&&f.setFocus()}));const d=q(l,Ns(".quick-input-description")),h=q(l,Ns(".quick-input-and-message")),g=q(h,Ns(".quick-input-filter")),f=this._register(new TU(g,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const m=q(g,Ns(".quick-input-visible-count"));m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true");const b=new s1(m,{countFormat:p({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=q(g,Ns(".quick-input-count"));_.setAttribute("aria-live","polite");const C=new s1(_,{countFormat:p({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),v=q(l,Ns(".quick-input-action")),y=new uM(v,this.styles.button);y.label=p("ok","OK"),this._register(y.onDidClick(P=>{this.onDidAcceptEmitter.fire()}));const w=q(l,Ns(".quick-input-action")),x=new uM(w,this.styles.button);x.label=p("custom","Custom"),this._register(x.onDidClick(P=>{this.onDidCustomEmitter.fire()}));const M=q(h,Ns(`#${this.idPrefix}message.quick-input-message`)),L=new n0(e,this.styles.progressBar);L.getContainer().classList.add("quick-input-progress");const E=this.idPrefix+"list",k=this._register(new lT(e,E,this.options));f.setAttribute("aria-controls",E),this._register(k.onDidChangeFocus(()=>{var P;f.setAttribute("aria-activedescendant",(P=k.getActiveDescendant())!==null&&P!==void 0?P:"")})),this._register(k.onChangedAllVisibleChecked(P=>{c.checked=P})),this._register(k.onChangedVisibleCount(P=>{b.setCount(P)})),this._register(k.onChangedCheckedCount(P=>{C.setCount(P)})),this._register(k.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof Sp&&this.controller.canSelectMany&&k.clearFocus()},0)}));const O=Kl(e);return this._register(O),this._register($(e,ae.FOCUS,P=>{this.previousFocusElement=P.relatedTarget instanceof HTMLElement?P.relatedTarget:void 0},!0)),this._register(O.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(K_.Blur),this.previousFocusElement=void 0})),this._register($(e,ae.FOCUS,P=>{f.setFocus()})),this._register($(e,ae.KEY_DOWN,P=>{const H=new Et(P);switch(H.keyCode){case 3:Be.stop(P,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Be.stop(P,!0),this.hide(K_.Gesture);break;case 2:if(!H.altKey&&!H.ctrlKey&&!H.metaKey){const G=[".action-label.codicon"];e.classList.contains("show-checkboxes")?G.push("input"):G.push("input[type=text]"),this.getUI().list.isDisplayed()&&G.push(".monaco-list"),this.getUI().message&&G.push(".quick-input-message a");const se=e.querySelectorAll(G.join(", "));H.shiftKey&&H.target===se[0]?(Be.stop(P,!0),k.clearFocus()):!H.shiftKey&&H.target===se[se.length-1]&&(Be.stop(P,!0),se[0].focus())}break;case 10:H.ctrlKey&&(Be.stop(P,!0),this.getUI().list.toggleHover());break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:s,description1:a,description2:d,rightActionBar:r,checkAll:c,filterContainer:g,inputBox:f,visibleCountContainer:m,visibleCount:b,countContainer:_,count:C,okContainer:v,ok:y,message:M,customButtonContainer:w,customButton:x,list:k,progressBar:L,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:P=>this.show(P),hide:()=>this.hide(),setVisibilities:P=>this.setVisibilities(P),setEnabled:P=>this.setEnabled(P),setContextKey:P=>this.options.setContextKey(P),linkOpenerDelegate:P=>this.options.linkOpenerDelegate(P)},this.updateStyles(),this.ui}pick(e,t={},n=Ze.None){return new Promise((i,s)=>{let r=u(d=>{var h;r=i,(h=t.onKeyMods)===null||h===void 0||h.call(t,a.keyMods),i(d)},"resolve");if(n.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const h=d[0];h&&(r(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const h=a.items.indexOf(d.item);if(h!==-1){const g=a.items.slice(),f=g.splice(h,1),m=a.activeItems.filter(_=>_!==f[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,m&&(a.activeItems=m),a.keepScrollPosition=b}}}))),a.onDidTriggerSeparatorButton(d=>{var h;return(h=t.onDidTriggerSeparatorButton)===null||h===void 0?void 0:h.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{mt(c),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{s(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new Sp(e)}createInputBox(){const e=this.getUI();return new AU(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(cn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),nr(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const i=this.options.backKeybindingLabel();gM.tooltip=i?p("quickInput.backWithKeybinding","Back ({0})",i):p("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=si(s.parentElement);s?.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isDisplayed()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,i0.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator-as-item { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}isDisplayed(){return this.ui&&this.ui.container.style.display!=="none"}}u(i0,"QuickInputController");i0.MAX_WIDTH=600;var fle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},SC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let fM=u(class extends r9{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(dM))),this._quickAccess}constructor(e,t,n,i){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=i,this._onShow=this._register(new F),this._onHide=this._register(new F),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(r=>{r.get(Ms).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),createList:(s,r,a,l,c)=>this.instantiationService.createInstance(aM,s,r,a,l,c),hoverDelegate:{showHover(s,r){},delay:200},styles:this.computeStyles()},i=this._register(new i0(Object.assign(Object.assign({},n),t)));return i.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(s=>i.layout(s,e.offset.quickPickTop))),this._register(i.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(i.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new ue(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Ze.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:le(TF),quickInputForeground:le(Ete),quickInputTitleBackground:le(kte),widgetBorder:le(gN),widgetShadow:le(wa)},inputBox:qw,toggle:$w,countBadge:I6,button:pae,progressBar:mae,keybindingLabel:fae,list:am({listBackground:TF,listFocusBackground:xu,listFocusForeground:Tu,listInactiveFocusForeground:Tu,listInactiveSelectionIconForeground:Xg,listInactiveFocusBackground:xu,listFocusOutline:Ft,listInactiveFocusOutline:Ft}),pickerGroup:{pickerGroupBorder:le(Dte),pickerGroupForeground:le(w7)}}}},"QuickInputService");fM=fle([SC(0,Re),SC(1,Me),SC(2,qn),SC(3,rm)],fM);var IU=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let pM=u(class extends fM{constructor(e,t,n,i,s){super(t,n,i,new ED(e.getContainerDomNode(),s)),this.host=void 0;const r=Ch.get(e);if(r){const a=r.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return a.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}},"EditorScopedQuickInputService");pM=IU([lf(1,Re),lf(2,Me),lf(3,qn),lf(4,gt)],pM);let mM=u(class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(pM,e);this.mapEditorToService.set(e,t),Ha(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},n=Ze.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}},"StandaloneQuickInputService");mM=IU([lf(0,Re),lf(1,gt)],mM);class Ch{static get(e){return e.getContribution(Ch.ID)}constructor(e){this.editor=e,this.widget=new s0(this.editor)}dispose(){this.widget.dispose()}}u(Ch,"QuickInputEditorContribution");Ch.ID="editor.controller.quickInput";class s0{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return s0.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}u(s0,"QuickInputEditorWidget");s0.ID="editor.contrib.quickInputWidget";ct(Ch.ID,Ch,4);class NU{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}u(NU,"ParsedTokenThemeRule");function ple(o){if(!o||!Array.isArray(o))return[];const e=[];let t=0;for(let n=0,i=o.length;n<i;n++){const s=o[n];let r=-1;if(typeof s.fontStyle=="string"){r=0;const c=s.fontStyle.split(" ");for(let d=0,h=c.length;d<h;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new NU(s.token||"",n,r,a,l)}return e}u(ple,"parseTokenTheme");function mle(o,e){o.sort((d,h)=>{const g=Cle(d.token,h.token);return g!==0?g:d.index-h.index});let t=0,n="000000",i="ffffff";for(;o.length>=1&&o[0].token==="";){const d=o.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}const s=new RU;for(const d of e)s.getId(d);const r=s.getId(n),a=s.getId(i),l=new cT(t,r,a),c=new dT(l);for(let d=0,h=o.length;d<h;d++){const g=o[d];c.insert(g.token,g.fontStyle,s.getId(g.foreground),s.getId(g.background))}return new G2(s,c)}u(mle,"resolveParsedTokenThemeRules");const ble=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class RU{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(ble);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=U.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}u(RU,"ColorMap");class G2{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(ple(e),t)}static createFromParsedTokenTheme(e,t){return mle(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),s=vle(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}u(G2,"TokenTheme");const _le=/\b(comment|string|regex|regexp)\b/;function vle(o){const e=o.match(_le);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}u(vle,"toStandardTokenType");function Cle(o,e){return o<e?-1:o>e?1:0}u(Cle,"strcmp");class cT{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new cT(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}u(cT,"ThemeTrieElementRule");class dT{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const s=this._children.get(n);return typeof s<"u"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const s=e.indexOf(".");let r,a;s===-1?(r=e,a=""):(r=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(r);typeof l>"u"&&(l=new dT(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,n,i)}}u(dT,"ThemeTrieElement");function yle(o){const e=[];for(let t=1,n=o.length;t<n;t++){const i=o[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}u(yle,"generateTokensCSSForColorMap");const wle={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Rn]:"#FFFFFE",[$o]:"#000000",[S7]:"#E5EBF1",[bS]:"#D3D3D3",[_S]:"#939393",[bN]:"#ADD6FF4D"}},Sle={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Rn]:"#1E1E1E",[$o]:"#D4D4D4",[S7]:"#3A3D41",[bS]:"#404040",[_S]:"#707070",[bN]:"#ADD6FF26"}},Tle={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Rn]:"#000000",[$o]:"#FFFFFF",[bS]:"#FFFFFF",[_S]:"#FFFFFF"}},xle={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Rn]:"#FFFFFF",[$o]:"#292929",[bS]:"#292929",[_S]:"#292929"}};function Lle(o){const e=new F,t=VB();return t.onDidChange(()=>e.fire()),o?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const n=o?o.getProductIconTheme():new z2,i={},s=u(a=>{const l=n.getIcon(a);if(!l)return;const c=l.font;return c?(i[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${vF(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},"formatIconRule"),r=[];for(const a of t.getIcons()){const l=s(a);l&&r.push(l)}for(const a in i){const l=i[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",h=l.src.map(g=>`${uh(g.location)} format('${g.format}')`).join(", ");r.push(`@font-face { src: ${h}; font-family: ${vF(a)};${c}${d} font-display: block; }`)}return r.join(`
`)}}}u(Lle,"getIconsStyleSheet");class z2{getIcon(e){const t=VB();let n=e.defaults;for(;xe.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}u(z2,"UnthemedProductIconTheme");const yl="vs",If="vs-dark",qu="hc-black",Yu="hc-light",PU=Kt.as(b7.ColorContribution),Ele=Kt.as(i9.ThemingContribution);class K2{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(Dy(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,U.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=bM(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,U.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=PU.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case yl:return _o.LIGHT;case qu:return _o.HIGH_CONTRAST_DARK;case Yu:return _o.HIGH_CONTRAST_LIGHT;default:return _o.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=bM(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const s={token:""};n&&(s.foreground=n),i&&(s.background=i),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=G2.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=ni.getForeground(s),a=ni.getFontStyle(s);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}u(K2,"StandaloneTheme");function Dy(o){return o===yl||o===If||o===qu||o===Yu}u(Dy,"isBuiltinTheme");function bM(o){switch(o){case yl:return wle;case If:return Sle;case qu:return Tle;case Yu:return xle}}u(bM,"getBuiltinRules");function TC(o){const e=bM(o);return new K2(o,e)}u(TC,"newBuiltInTheme");class FU extends z{constructor(){super(),this._onColorThemeChange=this._register(new F),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new F),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new z2,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(yl,TC(yl)),this._knownThemes.set(If,TC(If)),this._knownThemes.set(qu,TC(qu)),this._knownThemes.set(Yu,TC(Yu));const e=Lle(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(yl),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),WI("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return pw(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=ko(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),z.None}_registerShadowDomContainer(e){const t=ko(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Dy(t.base)&&!Dy(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new K2(e,t)),Dy(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(yl),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==Aa(this._theme.type)){let t;w_(this._theme.type)?t=e?qu:If:t=e?Yu:yl,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};Ele.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const i=[];for(const r of PU.getColors()){const a=this._theme.getColor(r.id,!0);a&&i.push(`${hN(r.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(yle(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Yt.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}u(FU,"StandaloneThemeService");const oo=nt("themeService");var kle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let _M=u(class extends z{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new F,this._onDidChangeReducedMotion=new F,this._accessibilityModeEnabledContext=Mv.bindTo(this._contextKeyService);const i=u(()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized()),"updateContextKey");this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),i(),this._register(this.onDidChangeScreenReaderOptimized(()=>i()));const s=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register($(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=u(()=>{const n=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",n),this._layoutService.container.classList.toggle("enable-motion",!n)},"updateRootClasses");t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}},"AccessibilityService");_M=kle([lL(0,Me),lL(1,rm),lL(2,lt)],_M);var uT=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let vM=u(class{constructor(e,t){this._commandService=e,this._hiddenStates=new o1(t)}createMenu(e,t,n){return new yM(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}},"MenuService");vM=uT([yh(0,dn),yh(1,ar)],vM);let o1=u(class Sb{constructor(e){this._storageService=e,this._disposables=new X,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Sb._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(t=>{if(t.key===Sb._key){if(!this._ignoreChangeEvent)try{const n=e.get(Sb._key,0,"{}");this._data=JSON.parse(n)}catch(n){console.log("FAILED to read storage after UPDATE",n)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var n;return(n=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&n!==void 0?n:!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var n,i;const s=this._isHiddenByDefault(e,t),r=(i=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&i!==void 0?i:!1;return s?!r:r}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const s=this._data[e.id];if(n)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const r=s.indexOf(t);r>=0&&$X(s,r),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Sb._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},"PersistedMenuHideState");o1._key="menu.hiddenCommands";o1=uT([yh(0,ar)],o1);let CM=u(class au{constructor(e,t,n,i,s){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=n,this._commandService=i,this._contextKeyService=s,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Ri.getMenuItems(this._id);let t;e.sort(au._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(au._fillInKbExprKeys(e.when,this._structureContextKeys),qg(e)){if(e.command.precondition&&au._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;au._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Ri.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[i,s]=n,r=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=qg(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=Dle(this._id,l?a.command:a,this._hiddenStates);if(l)r.push(new ir(a.command,a.alt,e,c,this._contextKeyService,this._commandService));else{const d=new au(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),h=Pn.join(...d.map(g=>g[1]));h.length>0&&r.push(new Yf(a,c,h))}}r.length>0&&t.push([i,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;const a=n.localeCompare(i);if(a!==0)return a}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:au._compareTitles(qg(e)?e.command.title:e.title,qg(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}},"MenuInfo");CM=uT([yh(3,dn),yh(4,Me)],CM);let yM=u(class{constructor(e,t,n,i,s){this._disposables=new X,this._menuInfo=new CM(e,t,n.emitEventsForSubmenuChanges,i,s);const r=new yt(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Ri.onDidChangeMenu(d=>{d.has(e)&&r.schedule()}));const a=this._disposables.add(new X),l=u(d=>{let h=!1,g=!1,f=!1;for(const m of d)if(h=h||m.isStructuralChange,g=g||m.isEnablementChange,f=f||m.isToggleChange,h&&g&&f)break;return{menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:f}},"merge"),c=u(()=>{a.add(s.onDidChangeContext(d=>{const h=d.affectsSome(this._menuInfo.structureContextKeys),g=d.affectsSome(this._menuInfo.preconditionContextKeys),f=d.affectsSome(this._menuInfo.toggledContextKeys);(h||g||f)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:f})})),a.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},"startLazyListener");this._onDidChange=new AI({onWillAddFirstListener:c,onDidRemoveLastListener:a.clear.bind(a),delay:n.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}},"MenuImpl");yM=uT([yh(3,dn),yh(4,Me)],yM);function Dle(o,e,t){const n=Kee(e)?e.submenu.id:e.id,i=typeof e.title=="string"?e.title:e.title.value,s=Ob({id:`hide/${o.id}/${n}`,label:p("hide.label","Hide '{0}'",i),run(){t.updateHidden(o,n,!0)}}),r=Ob({id:`toggle/${o.id}/${n}`,label:i,get checked(){return!t.isHidden(o,n)},run(){t.updateHidden(o,n,!!this.checked)}});return{hide:s,toggle:r,get isHidden(){return!r.checked}}}u(Dle,"createMenuHide");var Mle=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},p4=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Lg=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let wM=u(class extends z{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(Gl||UI)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=u(()=>{const t=new eS;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>Lg(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))},"handler");this.layoutService.hasContainer&&(this._register($(this.layoutService.container,"click",e)),this._register($(this.layoutService.container,"keydown",e)))}writeText(e,t){return Lg(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(ie("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return Lg(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Lg(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Lg(this,void 0,void 0,function*(){this.findText=e})}readResources(){return Lg(this,void 0,void 0,function*(){return this.resources})}},"BrowserClipboardService");wM=Mle([p4(0,rm),p4(1,Mo)],wM);var Ale=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ile=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Xb="data-keybinding-context";let j2=u(class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}},"Context");class wh extends j2{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}u(wh,"NullContext");wh.INSTANCE=new wh;class Tp extends j2{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Ku.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===7){const s=Array.from(this._values,([r])=>r);this._values.clear(),n.fire(new TM(s))}else{const s=[];for(const r of i.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...st.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new TM(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Tp._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(Tp._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}u(Tp,"ConfigAwareContextValuesContainer");Tp._keyPrefix="config.";class OU{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}u(OU,"ContextKey");class SM{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}u(SM,"SimpleContextKeyChangeEvent");class TM{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}u(TM,"ArrayContextKeyChangeEvent");class HU{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}u(HU,"CompositeContextKeyChangeEvent");function Nle(o,e){return o.allKeysContainedIn(new Set(Object.keys(e)))}u(Nle,"allEventKeysInContext");class $2{constructor(e){this._onDidChangeContext=new sh({merge:t=>new HU(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new OU(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new VU(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new SM(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new SM(e))}getContext(e){return this._isDisposed?wh.INSTANCE:this.getContextValuesContainer(Rle(e))}}u($2,"AbstractContextKeyService");let xM=u(class extends $2{constructor(e){super(0),this._contexts=new Map,this._toDispose=new X,this._lastContextId=0;const t=new Tp(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?wh.INSTANCE:this._contexts.get(e)||wh.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new j2(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}},"ContextKeyService");xM=Ale([Ile(0,lt)],xM);class VU extends $2{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Fn,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Xb)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Xb,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;Nle(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Xb),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?wh.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}u(VU,"ScopedContextKeyService");function Rle(o){for(;o;){if(o.hasAttribute(Xb)){const e=o.getAttribute(Xb);return e?parseInt(e,10):NaN}o=o.parentElement}return 0}u(Rle,"findContextAttr");function Ple(o,e,t){o.get(Me).createKey(String(e),Fle(t))}u(Ple,"setContext");function Fle(o){return t5(o,e=>{if(typeof e=="object"&&e.$mid===1)return ve.revive(e).toString();if(e instanceof ve)return e.toString()})}u(Fle,"stringifyURIs");ot.registerCommand("_setContext",Ple);ot.registerCommand({id:"getContextKeyInfo",handler(){return[...ue.all()].sort((o,e)=>o.key.localeCompare(e.key))},description:{description:p("getContextKeyInfo","A command that returns information about context keys"),args:[]}});ot.registerCommand("_generateContextKeyInfo",function(){const o=[],e=new Set;for(const t of ue.all())e.has(t.key)||(e.add(t.key),o.push(t));o.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(o,void 0,2))});let Ole=u(class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},"Node");class LM{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new Ole(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}}u(LM,"Graph");const Hle=!1;class EM extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}u(EM,"CyclicDependencyError");class $_{constructor(e=new jv,t=!1,n,i=Hle){var s;this._services=e,this._strict=t,this._parent=n,this._enableTracing=i,this._activeInstantiations=new Set,this._services.set(Re,this),this._globalGraph=i?(s=n?._globalGraph)!==null&&s!==void 0?s:new LM(r=>r):void 0}createChild(e){return new $_(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const n=Bi.traceInvocation(this._enableTracing,e);let i=!1;try{return e({get:r=>{if(i)throw kI("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof Cr?(n=Bi.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Bi.traceCreation(this._enableTracing,e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=Mr.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const r=i.length>0?i[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof Cr)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof Cr?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var i;const s=new LM(l=>l.id.toString());let r=0;const a=[{id:e,desc:t,_trace:n}];for(;a.length;){const l=a.pop();if(s.lookupOrInsertNode(l),r++>1e3)throw new EM(s);for(const c of Mr.getServiceDependencies(l.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(c.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),(i=this._globalGraph)===null||i===void 0||i.insertEdge(String(l.id),String(c.id)),d instanceof Cr){const h={id:c.id,desc:d,_trace:l._trace.branch(c.id,!0)};s.insertEdge(l,h),a.push(h)}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new EM(s);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Cr){const h=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,h)}s.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof Cr)return this._createServiceInstance(e,t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],i,s){if(i){const r=new $_(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const a=new Map,l=new Fb(()=>{const c=r._createInstance(t,n,s);for(const[d,h]of a){const g=c[d];if(typeof g=="function")for(const f of h)g.apply(c,f)}return a.clear(),c});return new Proxy(Object.create(null),{get(c,d){if(!l.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let f=a.get(d);return f||(f=new oi,a.set(d,f)),u((b,_,C)=>{const v=f.push([b,_,C]);return Oe(v)},"event")}if(d in c)return c[d];const h=l.value;let g=h[d];return typeof g!="function"||(g=g.bind(h),c[d]=g),g},set(c,d,h){return l.value[d]=h,!0},getPrototypeOf(c){return t.prototype}})}else return this._createInstance(t,n,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}u($_,"InstantiationService");class Bi{static traceInvocation(e,t){return e?new Bi(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Bi._None}static traceCreation(e,t){return e?new Bi(1,t.name):Bi._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new Bi(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Bi._totals+=e;let t=!1;function n(s,r){const a=[],l=new Array(s+1).join("	");for(const[c,d,h]of r._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);const g=n(s+1,h);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}u(n,"printChild");const i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Bi._totals.toFixed(2)}ms)`];(e>2||t)&&Bi.all.add(i.join(`
`))}}u(Bi,"Trace");Bi.all=new Set;Bi._None=new class extends Bi{constructor(){super(0,null)}stop(){}branch(){return this}};Bi._totals=0;const Vle=new Set([Ue.inMemory,Ue.vscodeSourceControl,Ue.walkThrough,Ue.walkThroughSnippet]);class WU{constructor(){this._byResource=new fi,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new fi,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,i=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:st.empty():ve.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:st.empty():st.map(st.concat(...this._byOwner.values()),r=>r[1])}}u(WU,"DoubleResourceMap");class BU{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new fi,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(Vle.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===Jt.Error?t.errors+=1:n===Jt.Warning?t.warnings+=1:n===Jt.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}u(BU,"MarkerStats");class ml{constructor(){this._onMarkerChanged=new AI({delay:0,merge:ml._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new WU,this._stats=new BU(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(qH(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const r=ml._toMarker(e,t,s);r&&i.push(r)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:g,tags:f}=n;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,h=h>0?h:c,{resource:t,owner:e,code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:g,tags:f}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const s of i){const r=st.first(s);r&&(n.push(r.resource),this._data.delete(r.resource,e))}if(Ei(t)){const s=new fi;for(const{resource:r,marker:a}of t){const l=ml._toMarker(e,r,a);if(!l)continue;const c=s.get(r);c?c.push(l):(s.set(r,[l]),n.push(r))}for(const[r,a]of s)this._data.set(r,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const r=this._data.get(n,t);if(r){const a=[];for(const l of r)if(ml._accept(l,i)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!n){const r=[];for(const a of this._data.values())for(const l of a)if(ml._accept(l,i)){const c=r.push(l);if(s>0&&c===s)return r}return r}else{const r=this._data.values(n??t),a=[];for(const l of r)for(const c of l)if(ml._accept(c,i)){const d=a.push(c);if(s>0&&d===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new fi;for(const n of e)for(const i of n)t.set(i,!0);return Array.from(t.keys())}}u(ml,"MarkerService");class UU extends z{constructor(){super(...arguments),this._configurationModel=new gi}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new gi;const e=Kt.as(ja.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const i of e){const s=n[i],r=t[i];s!==void 0?this._configurationModel.addValue(i,s):r?this._configurationModel.addValue(i,r.default):this._configurationModel.removeValue(i)}}}u(UU,"DefaultConfiguration");class GU extends z{constructor(e,t=[]){super(),this.logger=new D3([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}u(GU,"LogService");const zU=[];function Wle(o){zU.push(o)}u(Wle,"registerEditorFeature");function Ble(){return zU.slice(0)}u(Ble,"getEditorFeatures");var Pd=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ii=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Nf=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class KU{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new F}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}u(KU,"SimpleModel");let kM=u(class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new H5(new KU(t))):Promise.reject(new Error("Model not found"))}},"StandaloneTextModelService");kM=Pd([ii(0,en)],kM);class o0{show(){return o0.NULL_PROGRESS_RUNNER}showWhile(e,t){return Nf(this,void 0,void 0,function*(){yield e})}}u(o0,"StandaloneEditorProgressService");o0.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class jU{withProgress(e,t,n){return t({report:()=>{}})}}u(jU,"StandaloneProgressService");class $U{confirm(e){return Nf(this,void 0,void 0,function*(){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}})}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),window.confirm(n)}prompt(e){var t,n;return Nf(this,void 0,void 0,function*(){let i;if(this.doConfirm(e.message,e.detail)){const r=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),i=yield(n=r[0])===null||n===void 0?void 0:n.run({checkboxChecked:!1})}return{result:i}})}error(e,t){return Nf(this,void 0,void 0,function*(){yield this.prompt({type:cn.Error,message:e,detail:t})})}}u($U,"StandaloneDialogService");class xp{info(e){return this.notify({severity:cn.Info,message:e})}warn(e){return this.notify({severity:cn.Warning,message:e})}error(e){return this.notify({severity:cn.Error,message:e})}notify(e){switch(e.severity){case cn.Error:console.error(e.message);break;case cn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return xp.NO_OP}prompt(e,t,n,i){return xp.NO_OP}status(e,t){return z.None}}u(xp,"StandaloneNotificationService");xp.NO_OP=new zW;let DM=u(class{constructor(e){this._onWillExecuteCommand=new F,this._onDidExecuteCommand=new F,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=ot.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}},"StandaloneCommandService");DM=Pd([ii(0,Re)],DM);let Lp=u(class extends _6{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=u(f=>{const m=new X;m.add($(f,ae.KEY_DOWN,b=>{const _=new Et(b);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),m.add($(f,ae.KEY_UP,b=>{const _=new Et(b);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new qU(f,m))},"addContainer"),l=u(f=>{for(let m=0;m<this._domNodeListeners.length;m++){const b=this._domNodeListeners[m];b.domNode===f&&(this._domNodeListeners.splice(m,1),b.dispose())}},"removeContainer"),c=u(f=>{f.getOption(59)||a(f.getContainerDomNode())},"addCodeEditor"),d=u(f=>{f.getOption(59)||l(f.getContainerDomNode())},"removeCodeEditor");this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const h=u(f=>{a(f.getContainerDomNode())},"addDiffEditor"),g=u(f=>{l(f.getContainerDomNode())},"removeDiffEditor");this._register(r.onDiffEditorAdd(h)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,n,i){return Jo(ot.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map(n=>{var i;return{keybinding:bk(n.keybinding,Us),command:(i=n.command)!==null&&i!==void 0?i:null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Oe(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(us.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Af(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const s of e){const r=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new FD(void 0,s.command,s.commandArgs,r,t,null,!1);else{const l=mp.resolveKeybinding(a,Us);for(const c of l)n[i++]=new FD(c,s.command,s.commandArgs,r,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new Wa(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new mp([t],Us)}},"StandaloneKeybindingService");Lp=Pd([ii(0,Me),ii(1,dn),ii(2,Ao),ii(3,Cn),ii(4,Mo),ii(5,gt)],Lp);class qU extends z{constructor(e,t){super(),this.domNode=e,this._register(t)}}u(qU,"DomNodeListeners");function m4(o){return o&&typeof o=="object"&&(!o.overrideIdentifier||typeof o.overrideIdentifier=="string")&&(!o.resource||o.resource instanceof ve)}u(m4,"isConfigurationOverrides");class q2{constructor(){this._onDidChangeConfiguration=new F,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new UU;this._configuration=new Zv(e.reload(),new gi,new gi,new gi),e.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,i=m4(e)?e:m4(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[s,r]=i;this.getValue(s)!==r&&(this._configuration.updateValue(s,r),n.push(s))}if(n.length>0){const i=new b6({keys:n,overrides:[]},t,this._configuration);i.source=8,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}u(q2,"StandaloneConfigurationService");let MM=u(class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new F,this.configurationService.onDidChangeConfiguration(i=>{this._onDidChangeConfiguration.fire({affectedKeys:i.affectedKeys,affectsConfiguration:(s,r)=>i.affectsConfiguration(r)})})}getValue(e,t,n){const i=W.isIPosition(t)?t:null,s=i?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,i):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}},"StandaloneResourceConfigurationService");MM=Pd([ii(0,lt),ii(1,en),ii(2,Wt)],MM);let AM=u(class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:bi||Ye?`
`:`\r
`}},"StandaloneResourcePropertiesService");AM=Pd([ii(0,lt)],AM);class YU{publicLog2(){}}u(YU,"StandaloneTelemetryService");class Ep{constructor(){const e=ve.from({scheme:Ep.SCHEME,authority:"model",path:"/"});this.workspace={id:x6,folders:[new T6({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Ep.SCHEME?this.workspace.folders[0]:null}}u(Ep,"StandaloneWorkspaceContextService");Ep.SCHEME="inmemory";function r1(o,e,t){if(!e||!(o instanceof q2))return;const n=[];Object.keys(e).forEach(i=>{Wre(i)&&n.push([`editor.${i}`,e[i]]),t&&Bre(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&o.updateValues(n)}u(r1,"updateConfigurationService");let IM=u(class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Nf(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:$S.convert(e),i=new Map;for(const a of n){if(!(a instanceof Na))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=i.get(l);c||(c=[],i.set(l,c)),c.push(Ht.replaceMove(T.lift(a.textEdit.range),a.textEdit.text))}let s=0,r=0;for(const[a,l]of i)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,s+=l.length;return{ariaSummary:mo(GD.bulkEditServiceSummary,s,r),isApplied:s>0}})}},"StandaloneBulkEditService");IM=Pd([ii(0,en)],IM);class XU{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return Do(e)}}u(XU,"StandaloneUriLabelService");let NM=u(class extends zD{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}},"StandaloneContextViewService");NM=Pd([ii(0,rm),ii(1,gt)],NM);class ZU{constructor(){this._neverEmitter=new F,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}u(ZU,"StandaloneWorkspaceTrustManagementService");class JU extends yp{constructor(){super()}}u(JU,"StandaloneLanguageService");class QU extends GU{constructor(){super(new k3)}}u(QU,"StandaloneLogService");let RM=u(class extends JD{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r),this.configure({blockMouse:!1})}},"StandaloneContextMenuService");RM=Pd([ii(0,Ao),ii(1,Cn),ii(2,rc),ii(3,jt),ii(4,qa),ii(5,Me)],RM);class eG{playAudioCue(e,t){return Nf(this,void 0,void 0,function*(){})}}u(eG,"StandaloneAudioService");at(lt,q2,0);at(eN,MM,0);at(L3,AM,0);at(_p,Ep,0);at(bp,XU,0);at(Ao,YU,0);at(Yv,$U,0);at(Cn,xp,0);at(Za,ml,0);at(Wt,JU,0);at(oo,FU,0);at(Mo,QU,0);at(en,Qw,0);at(lN,iM,0);at(Me,xM,0);at(u2,jU,0);at(Rd,o0,0);at(ar,A6,0);at(rr,gk,0);at(Xv,IM,0);at(L6,ZU,0);at(gs,kM,0);at(Md,_M,0);at(Fo,gU,0);at(dn,DM,0);at(jt,Lp,0);at(Ja,mM,0);at(rc,NM,0);at(Ms,nM,0);at(oc,wM,0);at(Zr,RM,0);at(qa,vM,0);at(K1,eG,0);var De;(function(o){const e=new jv;for(const[r,a]of HP())e.set(r,a);const t=new $_(e,!0);e.set(Re,t);function n(r){const a=e.get(r);if(!a)throw new Error("Missing service "+r);return a instanceof Cr?t.invokeFunction(l=>l.get(r)):a}u(n,"get"),o.get=n;let i=!1;function s(r){if(i)return t;i=!0;for(const[l,c]of HP())e.get(l)||e.set(l,c);for(const l in r)if(r.hasOwnProperty(l)){const c=nt(l);e.get(c)instanceof Cr&&e.set(c,r[l])}const a=Ble();for(const l of a)try{t.createInstance(l)}catch(c){He(c)}return t}u(s,"initialize"),o.initialize=s})(De||(De={}));var Y2=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ut=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ule=0,b4=!1;function Gle(o){if(!o){if(b4)return;b4=!0}Wee(o||document.body)}u(Gle,"createAriaDomNode");let a1=u(class extends hp{constructor(e,t,n,i,s,r,a,l,c,d,h,g){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||Kw.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+Kw.accessibilityHelpMessage,super(e,f,{},n,i,s,r,l,c,d,h,g),a instanceof Lp?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,Gle(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++Ule,s=Z.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),z.None;const t=e.id,n=e.label,i=Z.and(Z.equals("editorId",this.getId()),Z.deserialize(e.precondition)),s=e.keybindings,r=Z.and(i,Z.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=u((f,...m)=>Promise.resolve(e.run(this,...m)),"run"),d=new X,h=this.getId()+":"+t;if(d.add(ot.registerCommand(h,c)),a){const f={command:{id:h,title:n},when:i,group:a,order:l};d.add(Ri.appendMenuItem(A.EditorContext,f))}if(Array.isArray(s))for(const f of s)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,c,r));const g=new NN(h,n,n,i,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,g),d.add(Oe(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof Vw)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}},"StandaloneCodeEditor");a1=Y2([Ut(2,Re),Ut(3,gt),Ut(4,dn),Ut(5,Me),Ut(6,jt),Ut(7,qn),Ut(8,Cn),Ut(9,Md),Ut(10,zt),Ut(11,he)],a1);let PM=u(class extends a1{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f,m,b){const _=Object.assign({},t);r1(d,_,!1);const C=l.registerEditorContainer(e);typeof _.theme=="string"&&l.setTheme(_.theme),typeof _.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(!!_.autoDetectHighContrast);const v=_.model;delete _.model,super(e,_,n,i,s,r,a,l,c,h,m,b),this._configurationService=d,this._standaloneThemeService=l,this._register(C);let y;if(typeof v>"u"){const w=f.getLanguageIdByMimeType(_.language)||_.language||Zs;y=tG(g,f,_.value||"",w,void 0),this._ownsModel=!0}else y=v,this._ownsModel=!1;if(this._attachModel(y),y){const w={oldModelUrl:null,newModelUrl:y.uri};this._onDidChangeModel.fire(w)}}dispose(){super.dispose()}updateOptions(e){r1(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}},"StandaloneEditor");PM=Y2([Ut(2,Re),Ut(3,gt),Ut(4,dn),Ut(5,Me),Ut(6,jt),Ut(7,oo),Ut(8,Cn),Ut(9,lt),Ut(10,Md),Ut(11,en),Ut(12,Wt),Ut(13,zt),Ut(14,he)],PM);let FM=u(class extends fd{constructor(e,t,n,i,s,r,a,l,c,d,h){const g=Object.assign({},t);r1(l,g,!0);const f=r.registerEditorContainer(e);typeof g.theme=="string"&&r.setTheme(g.theme),typeof g.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!g.autoDetectHighContrast),super(e,g,{},h,i,n,s,r,a,c,d),this._configurationService=l,this._standaloneThemeService=r,this._register(f)}dispose(){super.dispose()}updateOptions(e){r1(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(a1,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}},"StandaloneDiffEditor");FM=Y2([Ut(2,Re),Ut(3,Me),Ut(4,gt),Ut(5,oo),Ut(6,Cn),Ut(7,lt),Ut(8,Zr),Ut(9,Rd),Ut(10,oc)],FM);function tG(o,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let r=t;return s!==-1&&(r=t.substring(0,s)),_4(o,t,e.createByFilepathOrFirstLine(i||null,r),i)}return _4(o,t,e.createById(n),i)}u(tG,"createTextModel");function _4(o,e,t,n){return o.createModel(e,t,n)}u(_4,"doCreateModel");var zle=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Kle(o,e,t){return De.initialize(t||{}).createInstance(PM,o,e)}u(Kle,"create");function jle(o){return De.get(gt).onCodeEditorAdd(t=>{o(t)})}u(jle,"onDidCreateEditor");function $le(o){return De.get(gt).onDiffEditorAdd(t=>{o(t)})}u($le,"onDidCreateDiffEditor");function qle(){return De.get(gt).listCodeEditors()}u(qle,"getEditors");function Yle(){return De.get(gt).listDiffEditors()}u(Yle,"getDiffEditors");function Xle(o,e,t){return De.initialize(t||{}).createInstance(FM,o,e)}u(Xle,"createDiffEditor");function Zle(o,e){return De.initialize({}).createInstance(qE,o,e)}u(Zle,"createDiffNavigator");function Jle(o){if(typeof o.id!="string"||typeof o.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return ot.registerCommand(o.id,o.run)}u(Jle,"addCommand");function Qle(o){if(typeof o.id!="string"||typeof o.label!="string"||typeof o.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Z.deserialize(o.precondition),t=u((i,...s)=>jn.runEditorCommand(i,s,e,(r,a,l)=>Promise.resolve(o.run(a,...l))),"run"),n=new X;if(n.add(ot.registerCommand(o.id,t)),o.contextMenuGroupId){const i={command:{id:o.id,title:o.label},when:e,group:o.contextMenuGroupId,order:o.contextMenuOrder||0};n.add(Ri.appendMenuItem(A.EditorContext,i))}if(Array.isArray(o.keybindings)){const i=De.get(jt);if(!(i instanceof Lp))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=Z.and(e,Z.deserialize(o.keybindingContext));n.add(i.addDynamicKeybindings(o.keybindings.map(r=>({keybinding:r,command:o.id,when:s}))))}}return n}u(Qle,"addEditorAction");function ece(o){return nG([o])}u(ece,"addKeybindingRule");function nG(o){const e=De.get(jt);return e instanceof Lp?e.addDynamicKeybindings(o.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Z.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),z.None)}u(nG,"addKeybindingRules");function tce(o,e,t){const n=De.get(Wt),i=n.getLanguageIdByMimeType(e)||e;return tG(De.get(en),n,o,i,t)}u(tce,"createModel");function nce(o,e){const t=De.get(Wt),n=t.getLanguageIdByMimeType(e)||e||Zs;o.setLanguage(t.createById(n))}u(nce,"setModelLanguage");function ice(o,e,t){o&&De.get(Za).changeOne(e,o.uri,t)}u(ice,"setModelMarkers");function sce(o){De.get(Za).changeAll(o,[])}u(sce,"removeAllMarkers");function oce(o){return De.get(Za).read(o)}u(oce,"getModelMarkers");function rce(o){return De.get(Za).onMarkerChanged(o)}u(rce,"onDidChangeMarkers");function ace(o){return De.get(en).getModel(o)}u(ace,"getModel");function lce(){return De.get(en).getModels()}u(lce,"getModels");function cce(o){return De.get(en).onModelAdded(o)}u(cce,"onDidCreateModel");function dce(o){return De.get(en).onModelRemoved(o)}u(dce,"onWillDisposeModel");function uce(o){return De.get(en).onModelLanguageChanged(t=>{o({model:t.model,oldLanguage:t.oldLanguageId})})}u(uce,"onDidChangeModelLanguage");function hce(o){return DQ(De.get(en),De.get(zt),o)}u(hce,"createWebWorker");function gce(o,e){const t=De.get(Wt),n=De.get(oo);return n.registerEditorContainer(o),aS.colorizeElement(n,t,o,e)}u(gce,"colorizeElement");function fce(o,e,t){const n=De.get(Wt);return De.get(oo).registerEditorContainer(document.body),aS.colorize(n,o,e,t)}u(fce,"colorize");function pce(o,e,t=4){return De.get(oo).registerEditorContainer(document.body),aS.colorizeModelLine(o,e,t)}u(pce,"colorizeModelLine");function mce(o){const e=Yt.get(o);return e||{getInitialState:()=>zf,tokenize:(t,n,i)=>qI(o,i)}}u(mce,"getSafeTokenizationSupport$1");function bce(o,e){Yt.getOrCreate(e);const t=mce(e),n=Va(o),i=[];let s=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenize(l,!0,s);i[r]=c.tokens,s=c.endState}return i}u(bce,"tokenize");function _ce(o,e){De.get(oo).defineTheme(o,e)}u(_ce,"defineTheme");function vce(o){De.get(oo).setTheme(o)}u(vce,"setTheme");function Cce(){KE.clearAllFontInfos()}u(Cce,"remeasureFonts");function yce(o,e){return ot.registerCommand({id:o,handler:e})}u(yce,"registerCommand$1");function wce(o){return De.get(Ms).registerOpener({open(t){return zle(this,void 0,void 0,function*(){return typeof t=="string"&&(t=ve.parse(t)),o.open(t)})}})}u(wce,"registerLinkOpener");function Sce(){return{create:Kle,getEditors:qle,getDiffEditors:Yle,onDidCreateEditor:jle,onDidCreateDiffEditor:$le,createDiffEditor:Xle,createDiffNavigator:Zle,addCommand:Jle,addEditorAction:Qle,addKeybindingRule:ece,addKeybindingRules:nG,createModel:tce,setModelLanguage:nce,setModelMarkers:ice,getModelMarkers:oce,removeAllMarkers:sce,onDidChangeMarkers:rce,getModels:lce,getModel:ace,onDidCreateModel:cce,onWillDisposeModel:dce,onDidChangeModelLanguage:uce,createWebWorker:hce,colorizeElement:gce,colorize:fce,colorizeModelLine:pce,tokenize:bce,defineTheme:_ce,setTheme:vce,remeasureFonts:Cce,registerCommand:yce,registerLinkOpener:wce,AccessibilitySupport:sE,ContentWidgetPositionPreference:dE,CursorChangeReason:uE,DefaultEndOfLine:hE,EditorAutoIndentStrategy:fE,EditorOption:pE,EndOfLinePreference:mE,EndOfLineSequence:bE,MinimapPosition:xE,MouseTargetType:LE,OverlayWidgetPositionPreference:EE,OverviewRulerLane:kE,RenderLineNumbersType:ME,RenderMinimap:AE,ScrollbarVisibility:NE,ScrollType:IE,TextEditorCursorBlinkingStyle:HE,TextEditorCursorStyle:VE,TrackedRangeStickiness:WE,WrappingIndent:BE,InjectedTextCursorStops:vE,PositionAffinity:DE,ConfigurationChangedEvent:LI,BareFontInfo:$c,FontInfo:aw,TextModelResolvedOptions:Pb,FindMatch:Uf,ApplyUpdateResult:uf,LineRange:bo,LineRangeMapping:ch,RangeMapping:Pv,EditorZoom:fo,EditorType:Av,EditorOptions:qr}}u(Sce,"createMonacoEditorAPI");function Tce(o,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!o(t))return!1;return!0}u(Tce,"isArrayOf");function xC(o,e){return typeof o=="boolean"?o:e}u(xC,"bool");function v4(o,e){return typeof o=="string"?o:e}u(v4,"string");function xce(o){const e={};for(const t of o)e[t]=!0;return e}u(xce,"arrayToHash");function C4(o,e=!1){e&&(o=o.map(function(n){return n.toLowerCase()}));const t=xce(o);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}u(C4,"createKeywordMatcher");function OM(o,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,r){n=!0;let a="";if(typeof o[r]=="string")a=o[r];else if(o[r]&&o[r]instanceof RegExp)a=o[r].source;else throw o[r]===void 0?Pt(o,"language definition does not contain attribute '"+r+"', used at: "+e):Pt(o,"attribute reference '"+r+"' must be a string, used at: "+e);return Pg(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const i=(o.ignoreCase?"i":"")+(o.unicode?"u":"");return new RegExp(e,i)}u(OM,"compileRegExp");function Lce(o,e,t,n){if(n<0)return o;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}u(Lce,"selectScrutinee");function Ece(o,e,t,n){let i=-1,s=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(i=parseInt(r[3]),r[2]&&(i=i+100)),s=r[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=C4(l.split("|"),o.ignoreCase);c=u(function(h){return a==="~"?d(h):!d(h)},"tester")}else if(a==="@"||a==="!@"){const d=o[l];if(!d)throw Pt(o,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Tce(function(g){return typeof g=="string"},d))throw Pt(o,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const h=C4(d,o.ignoreCase);c=u(function(g){return a==="@"?h(g):!h(g)},"tester")}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=OM(o,"^"+l+"$");c=u(function(h){return a==="~"?d.test(h):!d.test(h)},"tester")}else c=u(function(d,h,g,f){return OM(o,"^"+kc(o,l,h,g,f)+"$").test(d)},"tester");else if(l.indexOf("$")<0){const d=qc(o,l);c=u(function(h){return a==="=="?h===d:h!==d},"tester")}else{const d=qc(o,l);c=u(function(h,g,f,m,b){const _=kc(o,d,g,f,m);return a==="=="?h===_:h!==_},"tester")}return i===-1?{name:t,value:n,test:function(d,h,g,f){return c(d,d,h,g,f)}}:{name:t,value:n,test:function(d,h,g,f){const m=Lce(d,h,g,i);return c(m||"",d,h,g,f)}}}u(Ece,"createGuard");function HM(o,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Pt(o,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Pt(o,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Pt(o,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!UQ(o,kc(o,i,"",[],""))))throw Pt(o,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,o.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,s=t.length;i<s;i++)n[i]=HM(o,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const r=HM(o,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:r,name:s}):s==="@eos"?n.push({test:function(a,l,c,d){return d},value:r,name:s}):n.push(Ece(o,e,s,r))}const i=o.defaultToken;return{test:function(s,r,a,l){for(const c of n)if(!c.test||c.test(s,r,a,l))return c.value;return i}}}else throw Pt(o,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}u(HM,"compileAction");class iG{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Pt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=OM(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=HM(e,this.name,t)}}u(iG,"Rule");function sG(o,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=o,t.includeLF=xC(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=xC(e.ignoreCase,!1),t.unicode=xC(e.unicode,!1),t.tokenPostfix=v4(e.tokenPostfix,"."+t.languageId),t.defaultToken=v4(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=o,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Pt(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Pt(t,"include target '"+d+"' is not defined at: "+r);i(r+"."+d,a,e.tokenizer[d])}else{const h=new iG(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],h.setAction(n,g)}else throw Pt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else h.setAction(n,c[1]);else{if(!c.regex)throw Pt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=xC(c.matchOnlyAtLineStart,!1)),h.setRegex(n,c.regex),h.setAction(n,c.action)}a.push(h)}}}if(u(i,"addRules"),!e.tokenizer||typeof e.tokenizer!="object")throw Pt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,i("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Pt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Pt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:qc(t,a.open),close:qc(t,a.close)});else throw Pt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}u(sG,"compile");var kce=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Dce(o){Gf.registerLanguage(o)}u(Dce,"register");function Mce(){let o=[];return o=o.concat(Gf.getLanguages()),o}u(Mce,"getLanguages");function Ace(o){return De.get(Wt).languageIdCodec.encodeLanguageId(o)}u(Ace,"getEncodedLanguageId");function Ice(o,e){const n=De.get(Wt).onDidRequestRichLanguageFeatures(i=>{i===o&&(n.dispose(),e())});return n}u(Ice,"onLanguage");function Nce(o,e){const n=De.get(Wt).onDidRequestBasicLanguageFeatures(i=>{i===o&&(n.dispose(),e())});return n}u(Nce,"onLanguageEncountered");function Rce(o,e){if(!De.get(Wt).isRegisteredLanguageId(o))throw new Error(`Cannot set configuration for unknown language ${o}`);return De.get(zt).register(o,e,100)}u(Rce,"setLanguageConfiguration");class oG{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return kp.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new _v(i.tokens,i.endState)}}u(oG,"EncodedTokenizationSupportAdapter");class kp{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let s=0,r=e.length;s<r;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<i&&(l=i),n[s]=new o_(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const s=t.tokenize(n,i),r=kp._toClassicTokens(s.tokens,e);let a;return s.endState.equals(i)?a=i:a=s.endState,new B1(r,a)}tokenize(e,t,n){return kp.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const h=t[c],g=i.match(n,h.scopes)|1024;if(r>0&&s[r-1]===g)continue;let f=h.startIndex;c===0?f=0:f<a&&(f=a),s[r++]=f,s[r++]=g,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return i.endState.equals(n)?r=n:r=i.endState,new _v(s,r)}}u(kp,"TokenizationSupportAdapter");function Pce(o){return typeof o.getInitialState=="function"}u(Pce,"isATokensProvider");function Fce(o){return"tokenizeEncoded"in o}u(Fce,"isEncodedTokensProvider");function rG(o){return o&&typeof o.then=="function"}u(rG,"isThenable");function Oce(o){const e=De.get(oo);if(o){const t=[null];for(let n=1,i=o.length;n<i;n++)t[n]=U.fromHex(o[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}u(Oce,"setColorMap");function aG(o,e){return Fce(e)?new oG(o,e):new kp(o,e,De.get(Wt),De.get(oo))}u(aG,"createTokenizationSupportAdapter");function X2(o,e){const t=new tV(()=>kce(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?Pce(n)?aG(o,n):new m_(De.get(Wt),De.get(oo),o,sG(o,n),De.get(lt)):null}));return Yt.registerFactory(o,t)}u(X2,"registerTokensProviderFactory");function Hce(o,e){if(!De.get(Wt).isRegisteredLanguageId(o))throw new Error(`Cannot set tokens provider for unknown language ${o}`);return rG(e)?X2(o,{create:()=>e}):Yt.register(o,aG(o,e))}u(Hce,"setTokensProvider");function Vce(o,e){const t=u(n=>new m_(De.get(Wt),De.get(oo),o,sG(o,n),De.get(lt)),"create");return rG(e)?X2(o,{create:()=>e}):Yt.register(o,t(e))}u(Vce,"setMonarchTokensProvider");function Wce(o,e){return De.get(he).referenceProvider.register(o,e)}u(Wce,"registerReferenceProvider");function Bce(o,e){return De.get(he).renameProvider.register(o,e)}u(Bce,"registerRenameProvider");function Uce(o,e){return De.get(he).signatureHelpProvider.register(o,e)}u(Uce,"registerSignatureHelpProvider");function Gce(o,e){return De.get(he).hoverProvider.register(o,{provideHover:(n,i,s)=>{const r=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,s)).then(a=>{if(a)return!a.range&&r&&(a.range=new T(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),a.range||(a.range=new T(i.lineNumber,i.column,i.lineNumber,i.column)),a})}})}u(Gce,"registerHoverProvider");function zce(o,e){return De.get(he).documentSymbolProvider.register(o,e)}u(zce,"registerDocumentSymbolProvider");function Kce(o,e){return De.get(he).documentHighlightProvider.register(o,e)}u(Kce,"registerDocumentHighlightProvider");function jce(o,e){return De.get(he).linkedEditingRangeProvider.register(o,e)}u(jce,"registerLinkedEditingRangeProvider");function $ce(o,e){return De.get(he).definitionProvider.register(o,e)}u($ce,"registerDefinitionProvider");function qce(o,e){return De.get(he).implementationProvider.register(o,e)}u(qce,"registerImplementationProvider");function Yce(o,e){return De.get(he).typeDefinitionProvider.register(o,e)}u(Yce,"registerTypeDefinitionProvider");function Xce(o,e){return De.get(he).codeLensProvider.register(o,e)}u(Xce,"registerCodeLensProvider");function Zce(o,e,t){return De.get(he).codeActionProvider.register(o,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(i,s,r,a)=>{const c=De.get(Za).read({resource:i.uri}).filter(d=>T.areIntersectingOrTouching(d,s));return e.provideCodeActions(i,s,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}u(Zce,"registerCodeActionProvider");function Jce(o,e){return De.get(he).documentFormattingEditProvider.register(o,e)}u(Jce,"registerDocumentFormattingEditProvider");function Qce(o,e){return De.get(he).documentRangeFormattingEditProvider.register(o,e)}u(Qce,"registerDocumentRangeFormattingEditProvider");function ede(o,e){return De.get(he).onTypeFormattingEditProvider.register(o,e)}u(ede,"registerOnTypeFormattingEditProvider");function tde(o,e){return De.get(he).linkProvider.register(o,e)}u(tde,"registerLinkProvider");function nde(o,e){return De.get(he).completionProvider.register(o,e)}u(nde,"registerCompletionItemProvider");function ide(o,e){return De.get(he).colorProvider.register(o,e)}u(ide,"registerColorProvider");function sde(o,e){return De.get(he).foldingRangeProvider.register(o,e)}u(sde,"registerFoldingRangeProvider");function ode(o,e){return De.get(he).declarationProvider.register(o,e)}u(ode,"registerDeclarationProvider");function rde(o,e){return De.get(he).selectionRangeProvider.register(o,e)}u(rde,"registerSelectionRangeProvider");function ade(o,e){return De.get(he).documentSemanticTokensProvider.register(o,e)}u(ade,"registerDocumentSemanticTokensProvider");function lde(o,e){return De.get(he).documentRangeSemanticTokensProvider.register(o,e)}u(lde,"registerDocumentRangeSemanticTokensProvider");function cde(o,e){return De.get(he).inlineCompletionsProvider.register(o,e)}u(cde,"registerInlineCompletionsProvider");function dde(o,e){return De.get(he).inlayHintsProvider.register(o,e)}u(dde,"registerInlayHintsProvider");function ude(){return{register:Dce,getLanguages:Mce,onLanguage:Ice,onLanguageEncountered:Nce,getEncodedLanguageId:Ace,setLanguageConfiguration:Rce,setColorMap:Oce,registerTokensProviderFactory:X2,setTokensProvider:Hce,setMonarchTokensProvider:Vce,registerReferenceProvider:Wce,registerRenameProvider:Bce,registerCompletionItemProvider:nde,registerSignatureHelpProvider:Uce,registerHoverProvider:Gce,registerDocumentSymbolProvider:zce,registerDocumentHighlightProvider:Kce,registerLinkedEditingRangeProvider:jce,registerDefinitionProvider:$ce,registerImplementationProvider:qce,registerTypeDefinitionProvider:Yce,registerCodeLensProvider:Xce,registerCodeActionProvider:Zce,registerDocumentFormattingEditProvider:Jce,registerDocumentRangeFormattingEditProvider:Qce,registerOnTypeFormattingEditProvider:ede,registerLinkProvider:tde,registerColorProvider:ide,registerFoldingRangeProvider:sde,registerDeclarationProvider:ode,registerSelectionRangeProvider:rde,registerDocumentSemanticTokensProvider:ade,registerDocumentRangeSemanticTokensProvider:lde,registerInlineCompletionsProvider:cde,registerInlayHintsProvider:dde,DocumentHighlightKind:gE,CompletionItemKind:aE,CompletionItemTag:lE,CompletionItemInsertTextRule:rE,SymbolKind:FE,SymbolTag:OE,IndentAction:_E,CompletionTriggerKind:cE,SignatureHelpTriggerKind:PE,InlayHintKind:CE,InlineCompletionTriggerKind:yE,CodeActionTriggerType:oE,FoldingRangeKind:Ni}}u(ude,"createMonacoLanguagesAPI");const Z2=nt("IEditorCancelService"),lG=new ue("cancellableOperation",!1,p("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));at(Z2,class{constructor(){this._tokens=new WeakMap}add(o,e){let t=this._tokens.get(o);t||(t=o.invokeWithinContext(i=>{const s=lG.bindTo(i.get(Me)),r=new oi;return{key:s,tokens:r}}),this._tokens.set(o,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(o){const e=this._tokens.get(o);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class cG extends ci{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(Z2).add(e,this))}dispose(){this._unregister(),super.dispose()}}u(cG,"EditorKeybindingCancellationTokenSource");oe(new class extends jn{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:lG})}runEditorCommand(o,e){o.get(Z2).cancel(e)}});let dG=u(class VM{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?mo("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof VM))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new VM(e,this.flags))}},"EditorState");class pd extends cG{constructor(e,t,n,i){super(e,i),this._listener=new X,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!T.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!T.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}u(pd,"EditorStateCancellationTokenSource");class hT extends ci{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}u(hT,"TextModelCancellationTokenSource");function za(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===Av.ICodeEditor:!1}u(za,"isCodeEditor");function uG(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===Av.IDiffEditor:!1}u(uG,"isDiffEditor");function hde(o){return!!o&&typeof o=="object"&&typeof o.onDidChangeActiveEditor=="function"}u(hde,"isCompositeEditor");function hG(o){return za(o)?o:uG(o)?o.getModifiedEditor():hde(o)&&za(o.activeCodeEditor)?o.activeCodeEditor:null}u(hG,"getCodeEditor");class Sh{static _handleEolEdits(e,t){let n;const i=[];for(const s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&i.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=zr.capture(e),s=Sh._handleEolEdits(e,t);s.length===1&&Sh._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(r=>Ht.replace(T.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",s.map(r=>Ht.replaceMove(T.lift(r.range),r.text))),n&&e.pushUndoStop(),i.restoreRelativeVerticalPositionOfCursor(e)}}u(Sh,"FormattingEdit");class WM{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}u(WM,"ExtensionIdentifier");class gG{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(WM.toKey(e))}has(e){return this._set.has(WM.toKey(e))}}u(gG,"ExtensionIdentifierSet");var $r=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function J2(o){if(o=o.filter(i=>i.range),!o.length)return;let{range:e}=o[0];for(let i=1;i<o.length;i++)e=T.plusRange(e,o[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?o.length===1?ri(p("hint11","Made 1 formatting edit on line {0}",t)):ri(p("hintn1","Made {0} formatting edits on line {1}",o.length,t)):o.length===1?ri(p("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):ri(p("hintnn","Made {0} formatting edits between lines {1} and {2}",o.length,t,n))}u(J2,"alertFormattingEdits");function fG(o,e,t){const n=[],i=new gG,s=o.ordered(t);for(const a of s)n.push(a),a.extensionId&&i.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(i.has(a.extensionId))continue;i.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}u(fG,"getRealAndSyntheticDocumentFormattersOrdered");class md{static setFormatterSelector(e){return{dispose:md._selectors.unshift(e)}}static select(e,t,n){return $r(this,void 0,void 0,function*(){if(e.length===0)return;const i=st.first(md._selectors);if(i)return yield i(e,t,n)})}}u(md,"FormattingConflicts");md._selectors=new oi;function pG(o,e,t,n,i,s){return $r(this,void 0,void 0,function*(){const r=o.get(Re),{documentRangeFormattingEditProvider:a}=o.get(he),l=za(e)?e.getModel():e,c=a.ordered(l),d=yield md.select(c,l,n);d&&(i.report(d),yield r.invokeFunction(gde,d,e,t,s))})}u(pG,"formatDocumentRangesWithSelectedProvider");function gde(o,e,t,n,i){var s,r;return $r(this,void 0,void 0,function*(){const a=o.get(rr),l=o.get(Mo);let c,d;za(t)?(c=t.getModel(),d=new pd(t,5,void 0,i)):(c=t,d=new hT(t,i));const h=[];let g=0;for(const C of TI(n).sort(T.compareRangesUsingStarts))g>0&&T.areIntersectingOrTouching(h[g-1],C)?h[g-1]=T.fromPositions(h[g-1].getStartPosition(),C.getEndPosition()):g=h.push(C);const f=u(C=>$r(this,void 0,void 0,function*(){var v,y;l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(v=e.extensionId)===null||v===void 0?void 0:v.value,C);const w=(yield e.provideDocumentRangeFormattingEdits(c,C,c.getFormattingOptions(),d.token))||[];return l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(y=e.extensionId)===null||y===void 0?void 0:y.value,w),w}),"computeEdits"),m=u((C,v)=>{if(!C.length||!v.length)return!1;const y=C.reduce((w,x)=>T.plusRange(w,x.range),C[0].range);if(!v.some(w=>T.intersectRanges(y,w.range)))return!1;for(const w of C)for(const x of v)if(T.intersectRanges(w.range,x.range))return!0;return!1},"hasIntersectingEdit"),b=[],_=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(s=e.extensionId)===null||s===void 0?void 0:s.value,h);const C=(yield e.provideDocumentRangesFormattingEdits(c,h,c.getFormattingOptions(),d.token))||[];l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(r=e.extensionId)===null||r===void 0?void 0:r.value,C),_.push(C)}else for(const C of h){if(d.token.isCancellationRequested)return!0;_.push(yield f(C))}for(let C=0;C<h.length;++C)for(let v=C+1;v<h.length;++v){if(d.token.isCancellationRequested)return!0;if(m(_[C],_[v])){const y=T.plusRange(h[C],h[v]),w=yield f(y);h.splice(v,1),h.splice(C,1),h.push(y),_.splice(v,1),_.splice(C,1),_.push(w),C=0,v=0}}for(const C of _){if(d.token.isCancellationRequested)return!0;const v=yield a.computeMoreMinimalEdits(c.uri,C);v&&b.push(...v)}}finally{d.dispose()}if(b.length===0)return!1;if(za(t))Sh.execute(t,b,!0),J2(b),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:C}]=b,v=new ge(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn);c.pushEditOperations([v],b.map(y=>({text:y.text,range:T.lift(y.range),forceMoveMarkers:!0})),y=>{for(const{range:w}of y)if(T.areIntersectingOrTouching(w,v))return[new ge(w.startLineNumber,w.startColumn,w.endLineNumber,w.endColumn)];return null})}return!0})}u(gde,"formatDocumentRangesWithProvider");function fde(o,e,t,n,i){return $r(this,void 0,void 0,function*(){const s=o.get(Re),r=o.get(he),a=za(e)?e.getModel():e,l=fG(r.documentFormattingEditProvider,r.documentRangeFormattingEditProvider,a),c=yield md.select(l,a,t);c&&(n.report(c),yield s.invokeFunction(pde,c,e,t,i))})}u(fde,"formatDocumentWithSelectedProvider");function pde(o,e,t,n,i){return $r(this,void 0,void 0,function*(){const s=o.get(rr);let r,a;za(t)?(r=t.getModel(),a=new pd(t,5,void 0,i)):(r=t,a=new hT(t,i));let l;try{const c=yield e.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(r.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(za(t))Sh.execute(t,l,n!==2),n!==2&&(J2(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:c}]=l,d=new ge(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);r.pushEditOperations([d],l.map(h=>({text:h.text,range:T.lift(h.range),forceMoveMarkers:!0})),h=>{for(const{range:g}of h)if(T.areIntersectingOrTouching(g,d))return[new ge(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return!0})}u(pde,"formatDocumentWithProvider");function mde(o,e,t,n,i,s){return $r(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,s)).catch($n);if(Ei(l))return yield o.computeMoreMinimalEdits(t.uri,l)}})}u(mde,"getDocumentRangeFormattingEditsUntilResult");function bde(o,e,t,n,i){return $r(this,void 0,void 0,function*(){const s=fG(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of s){const a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,n,i)).catch($n);if(Ei(a))return yield o.computeMoreMinimalEdits(t.uri,a)}})}u(bde,"getDocumentFormattingEditsUntilResult");function mG(o,e,t,n,i,s,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,s,r)).catch($n).then(l=>o.computeMoreMinimalEdits(t.uri,l))}u(mG,"getOnTypeFormattingEdits");ot.registerCommand("_executeFormatRangeProvider",function(o,...e){return $r(this,void 0,void 0,function*(){const[t,n,i]=e;Ct(ve.isUri(t)),Ct(T.isIRange(n));const s=o.get(gs),r=o.get(rr),a=o.get(he),l=yield s.createModelReference(t);try{return mde(r,a,l.object.textEditorModel,T.lift(n),i,Ze.None)}finally{l.dispose()}})});ot.registerCommand("_executeFormatDocumentProvider",function(o,...e){return $r(this,void 0,void 0,function*(){const[t,n]=e;Ct(ve.isUri(t));const i=o.get(gs),s=o.get(rr),r=o.get(he),a=yield i.createModelReference(t);try{return bde(s,r,a.object.textEditorModel,n,Ze.None)}finally{a.dispose()}})});ot.registerCommand("_executeFormatOnTypeProvider",function(o,...e){return $r(this,void 0,void 0,function*(){const[t,n,i,s]=e;Ct(ve.isUri(t)),Ct(W.isIPosition(n)),Ct(typeof i=="string");const r=o.get(gs),a=o.get(rr),l=o.get(he),c=yield r.createModelReference(t);try{return mG(a,l,c.object.textEditorModel,W.lift(n),i,s,Ze.None)}finally{c.dispose()}})});qr.wrappingIndent.defaultValue=0;qr.glyphMargin.defaultValue=!1;qr.autoIndent.defaultValue=3;qr.overviewRulerLanes.defaultValue=2;md.setFormatterSelector((o,e,t)=>Promise.resolve(o[0]));const Zi=nV();Zi.editor=Sce();Zi.languages=ude();const _de=Zi.CancellationTokenSource,vde=Zi.Emitter,Cde=Zi.KeyCode,yde=Zi.KeyMod,wde=Zi.Position,Sde=Zi.Range,Tde=Zi.Selection,xde=Zi.SelectionDirection,Lde=Zi.MarkerSeverity,Ede=Zi.MarkerTag,l1=Zi.Uri,kde=Zi.Token,Rf=Zi.editor,Wg=Zi.languages,cL=globalThis.MonacoEnvironment;(cL?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Zi);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const r0=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:_de,Emitter:vde,KeyCode:Cde,KeyMod:yde,MarkerSeverity:Lde,MarkerTag:Ede,Position:wde,Range:Sde,Selection:Tde,SelectionDirection:xde,Token:kde,Uri:l1,editor:Rf,languages:Wg},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Dde=Object.defineProperty,Mde=Object.getOwnPropertyDescriptor,Ade=Object.getOwnPropertyNames,Ide=Object.prototype.hasOwnProperty,y4=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ade(e))!Ide.call(o,i)&&i!==t&&Dde(o,i,{get:()=>e[i],enumerable:!(n=Mde(e,i))||n.enumerable});return o},"__copyProps$4"),Nde=u((o,e,t)=>(y4(o,e,"default"),t&&y4(t,e,"default")),"__reExport$4"),Tb={};Nde(Tb,r0);var bG={},dL={},_G=u(class{static getOrCreate(o){return dL[o]||(dL[o]=new _G(o)),dL[o]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(o){this._languageId=o,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,bG[this._languageId].loader().then(o=>this._lazyLoadPromiseResolve(o),o=>this._lazyLoadPromiseReject(o))),this._lazyLoadPromise}},"LazyLanguageLoader");function Ce(o){const e=o.id;bG[e]=o,Tb.languages.register(o);const t=_G.getOrCreate(e);Tb.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),Tb.languages.onLanguageEncountered(e,async()=>{const n=await t.load();Tb.languages.setLanguageConfiguration(e,n.conf)})}u(Ce,"registerLanguage");Ce({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>me(()=>import("./abap-df054a82.js"),[])});Ce({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>me(()=>import("./apex-14b4ddf8.js"),[])});Ce({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>me(()=>import("./azcli-eb5512d1.js"),[])});Ce({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>me(()=>import("./bat-d446d674.js"),[])});Ce({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>me(()=>import("./bicep-cae61bf2.js"),[])});Ce({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>me(()=>import("./cameligo-caf6a4c2.js"),[])});Ce({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>me(()=>import("./clojure-e0088556.js"),[])});Ce({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>me(()=>import("./coffee-2551cecf.js"),[])});Ce({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>me(()=>import("./cpp-ab19e149.js"),[])});Ce({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>me(()=>import("./cpp-ab19e149.js"),[])});Ce({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>me(()=>import("./csharp-02691f83.js"),[])});Ce({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>me(()=>import("./csp-f2638801.js"),[])});Ce({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>me(()=>import("./css-ef8c374a.js"),[])});Ce({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>me(()=>import("./cypher-d78ed1d5.js"),[])});Ce({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>me(()=>import("./dart-50c0dbd1.js"),[])});Ce({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>me(()=>import("./dockerfile-0686cb9f.js"),[])});Ce({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>me(()=>import("./ecl-1371a144.js"),[])});Ce({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>me(()=>import("./elixir-6275f40c.js"),[])});Ce({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>me(()=>import("./flow9-6d6f3ec1.js"),[])});Ce({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>me(()=>import("./fsharp-b8bf6763.js"),[])});Ce({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagAutoInterpolationDollar)});Ce({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagAngleInterpolationDollar)});Ce({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagBracketInterpolationDollar)});Ce({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagAngleInterpolationBracket)});Ce({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagBracketInterpolationBracket)});Ce({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagAutoInterpolationDollar)});Ce({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>me(()=>import("./freemarker2-b578c043.js"),["assets/freemarker2-b578c043.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"]).then(o=>o.TagAutoInterpolationBracket)});Ce({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>me(()=>import("./go-35830489.js"),[])});Ce({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>me(()=>import("./graphql-09f2bab0.js"),[])});Ce({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>me(()=>import("./handlebars-aed76afb.js"),["assets/handlebars-aed76afb.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>me(()=>import("./hcl-0c8502f7.js"),[])});Ce({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>me(()=>import("./html-3589a625.js"),["assets/html-3589a625.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>me(()=>import("./ini-6cebcdb7.js"),[])});Ce({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>me(()=>import("./java-e7250fb5.js"),[])});Ce({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>me(()=>import("./javascript-35959280.js"),["assets/javascript-35959280.js","assets/typescript-ecb7de07.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>me(()=>import("./julia-0e589acc.js"),[])});Ce({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>me(()=>import("./kotlin-3b00efc5.js"),[])});Ce({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>me(()=>import("./less-4505412a.js"),[])});Ce({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>me(()=>import("./lexon-6d265026.js"),[])});Ce({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>me(()=>import("./lua-8eaea14e.js"),[])});Ce({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>me(()=>import("./liquid-b4919ea5.js"),["assets/liquid-b4919ea5.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>me(()=>import("./m3-a0849521.js"),[])});Ce({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>me(()=>import("./markdown-e0f119d5.js"),[])});Ce({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>me(()=>import("./mips-b4bbd250.js"),[])});Ce({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>me(()=>import("./msdax-65fb3ac3.js"),[])});Ce({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>me(()=>import("./mysql-bb13a785.js"),[])});Ce({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>me(()=>import("./objective-c-05e476ef.js"),[])});Ce({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>me(()=>import("./pascal-b474b95d.js"),[])});Ce({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>me(()=>import("./pascaligo-c2adb436.js"),[])});Ce({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>me(()=>import("./perl-99326003.js"),[])});Ce({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>me(()=>import("./pgsql-472e181e.js"),[])});Ce({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>me(()=>import("./php-77dcd5ec.js"),[])});Ce({id:"pla",extensions:[".pla"],loader:()=>me(()=>import("./pla-3eb849e6.js"),[])});Ce({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>me(()=>import("./postiats-11c45a33.js"),[])});Ce({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>me(()=>import("./powerquery-6d8f7215.js"),[])});Ce({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>me(()=>import("./powershell-3363461f.js"),[])});Ce({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>me(()=>import("./protobuf-5c17a343.js"),[])});Ce({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>me(()=>import("./pug-7aee7754.js"),[])});Ce({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>me(()=>import("./python-389c6646.js"),["assets/python-389c6646.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>me(()=>import("./qsharp-191ab4a0.js"),[])});Ce({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>me(()=>import("./r-418caa0e.js"),[])});Ce({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>me(()=>import("./razor-69c25792.js"),["assets/razor-69c25792.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>me(()=>import("./redis-28729b7c.js"),[])});Ce({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>me(()=>import("./redshift-d6c47ae7.js"),[])});Ce({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>me(()=>import("./restructuredtext-60b8816a.js"),[])});Ce({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>me(()=>import("./ruby-163b40b3.js"),[])});Ce({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>me(()=>import("./rust-61dee17f.js"),[])});Ce({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>me(()=>import("./sb-bb43195d.js"),[])});Ce({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>me(()=>import("./scala-3579b7b8.js"),[])});Ce({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>me(()=>import("./scheme-24c60300.js"),[])});Ce({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>me(()=>import("./scss-9ec636f1.js"),[])});Ce({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>me(()=>import("./shell-529c51ab.js"),[])});Ce({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>me(()=>import("./solidity-88e23c46.js"),[])});Ce({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>me(()=>import("./sophia-3997fc21.js"),[])});Ce({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>me(()=>import("./sparql-38588b4d.js"),[])});Ce({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>me(()=>import("./sql-14921769.js"),[])});Ce({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>me(()=>import("./st-fe82833b.js"),[])});Ce({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>me(()=>import("./swift-94640db1.js"),[])});Ce({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>me(()=>import("./systemverilog-5069012a.js"),[])});Ce({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>me(()=>import("./systemverilog-5069012a.js"),[])});Ce({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>me(()=>import("./tcl-2e10fa44.js"),[])});Ce({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>me(()=>import("./twig-c67449dc.js"),[])});Ce({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>me(()=>import("./typescript-ecb7de07.js"),["assets/typescript-ecb7de07.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>me(()=>import("./vb-13c95291.js"),[])});Ce({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>me(()=>import("./wgsl-209cbcac.js"),[])});Ce({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>me(()=>import("./xml-27b11a19.js"),["assets/xml-27b11a19.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});Ce({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>me(()=>import("./yaml-f0ab3f1d.js"),["assets/yaml-f0ab3f1d.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Rde=Object.defineProperty,Pde=Object.getOwnPropertyDescriptor,Fde=Object.getOwnPropertyNames,Ode=Object.prototype.hasOwnProperty,w4=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fde(e))!Ode.call(o,i)&&i!==t&&Rde(o,i,{get:()=>e[i],enumerable:!(n=Pde(e,i))||n.enumerable});return o},"__copyProps$3"),Hde=u((o,e,t)=>(w4(o,e,"default"),t&&w4(t,e,"default")),"__reExport$3"),hm={};Hde(hm,r0);var Q2=u(class{_onDidChange=new hm.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),eR={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},tR={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},vG=new Q2("css",eR,tR),CG=new Q2("scss",eR,tR),yG=new Q2("less",eR,tR);hm.languages.css={cssDefaults:vG,lessDefaults:yG,scssDefaults:CG};function nR(){return me(()=>import("./cssMode-a2a81b45.js"),["assets/cssMode-a2a81b45.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])}u(nR,"getMode$3");hm.languages.onLanguage("less",()=>{nR().then(o=>o.setupMode(yG))});hm.languages.onLanguage("scss",()=>{nR().then(o=>o.setupMode(CG))});hm.languages.onLanguage("css",()=>{nR().then(o=>o.setupMode(vG))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Vde=Object.defineProperty,Wde=Object.getOwnPropertyDescriptor,Bde=Object.getOwnPropertyNames,Ude=Object.prototype.hasOwnProperty,S4=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bde(e))!Ude.call(o,i)&&i!==t&&Vde(o,i,{get:()=>e[i],enumerable:!(n=Wde(e,i))||n.enumerable});return o},"__copyProps$2"),Gde=u((o,e,t)=>(S4(o,e,"default"),t&&S4(t,e,"default")),"__reExport$2"),gT={};Gde(gT,r0);var zde=u(class{_onDidChange=new gT.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),Kde={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},fT={format:Kde,suggest:{},data:{useDefaultDataProvider:!0}};function pT(o){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:o===Zb,documentFormattingEdits:o===Zb,documentRangeFormattingEdits:o===Zb}}u(pT,"getConfigurationDefault");var Zb="html",T4="handlebars",x4="razor",wG=mT(Zb,fT,pT(Zb)),jde=wG.defaults,SG=mT(T4,fT,pT(T4)),$de=SG.defaults,TG=mT(x4,fT,pT(x4)),qde=TG.defaults;gT.languages.html={htmlDefaults:jde,razorDefaults:qde,handlebarDefaults:$de,htmlLanguageService:wG,handlebarLanguageService:SG,razorLanguageService:TG,registerHTMLLanguageService:mT};function Yde(){return me(()=>import("./htmlMode-8a9e2438.js"),["assets/htmlMode-8a9e2438.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])}u(Yde,"getMode$2");function mT(o,e=fT,t=pT(o)){const n=new zde(o,e,t);let i;const s=gT.languages.onLanguage(o,async()=>{i=(await Yde()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),i?.dispose(),i=void 0}}}u(mT,"registerHTMLLanguageService");/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Xde=Object.defineProperty,Zde=Object.getOwnPropertyDescriptor,Jde=Object.getOwnPropertyNames,Qde=Object.prototype.hasOwnProperty,L4=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Jde(e))!Qde.call(o,i)&&i!==t&&Xde(o,i,{get:()=>e[i],enumerable:!(n=Zde(e,i))||n.enumerable});return o},"__copyProps$1"),eue=u((o,e,t)=>(L4(o,e,"default"),t&&L4(t,e,"default")),"__reExport$1"),a0={};eue(a0,r0);var tue=u(class{_onDidChange=new a0.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl"),nue={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},iue={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},xG=new tue("json",nue,iue);a0.languages.json={jsonDefaults:xG};function sue(){return me(()=>import("./jsonMode-1ecc1f1f.js"),["assets/jsonMode-1ecc1f1f.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])}u(sue,"getMode$1");a0.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});a0.languages.onLanguage("json",()=>{sue().then(o=>o.setupMode(xG))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.37.1(20a8d5a651d057aaed7875ad1c1f2ecf13c4e773)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var oue=Object.defineProperty,rue=Object.getOwnPropertyDescriptor,aue=Object.getOwnPropertyNames,lue=Object.prototype.hasOwnProperty,E4=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aue(e))!lue.call(o,i)&&i!==t&&oue(o,i,{get:()=>e[i],enumerable:!(n=rue(e,i))||n.enumerable});return o},"__copyProps"),cue=u((o,e,t)=>(E4(o,e,"default"),t&&E4(t,e,"default")),"__reExport"),due="5.0.2",Dp={};cue(Dp,r0);var LG=(o=>(o[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o))(LG||{}),EG=(o=>(o[o.None=0]="None",o[o.Preserve=1]="Preserve",o[o.React=2]="React",o[o.ReactNative=3]="ReactNative",o[o.ReactJSX=4]="ReactJSX",o[o.ReactJSXDev=5]="ReactJSXDev",o))(EG||{}),kG=(o=>(o[o.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",o[o.LineFeed=1]="LineFeed",o))(kG||{}),DG=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(DG||{}),MG=(o=>(o[o.Classic=1]="Classic",o[o.NodeJs=2]="NodeJs",o))(MG||{}),AG=u(class{_onDidChange=new Dp.Emitter;_onDidExtraLibsChange=new Dp.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;_modeConfiguration;constructor(o,e,t,n,i){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(o),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this.setModeConfiguration(i),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(o,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===o)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:o,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let i=this._extraLibs[t];i&&i.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(o){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),o&&o.length>0)for(const e of o){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let i=1;this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:i}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(o){this._compilerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(o){this._diagnosticsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(o){this._workerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(o){this._inlayHintsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(o){}setEagerModelSync(o){this._eagerModelSync=o}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(o){this._modeConfiguration=o||Object.create(null),this._onDidChange.fire(void 0)}},"LanguageServiceDefaultsImpl"),uue=due,IG={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},NG=new AG({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},IG),RG=new AG({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},IG),hue=u(()=>bT().then(o=>o.getTypeScriptWorker()),"getTypeScriptWorker"),gue=u(()=>bT().then(o=>o.getJavaScriptWorker()),"getJavaScriptWorker");Dp.languages.typescript={ModuleKind:LG,JsxEmit:EG,NewLineKind:kG,ScriptTarget:DG,ModuleResolutionKind:MG,typescriptVersion:uue,typescriptDefaults:NG,javascriptDefaults:RG,getTypeScriptWorker:hue,getJavaScriptWorker:gue};function bT(){return me(()=>import("./tsMode-0ec05ffc.js"),["assets/tsMode-0ec05ffc.js","assets/index-348f88e2.js","assets/useControlled-6e28c700.js"])}u(bT,"getMode");Dp.languages.onLanguage("typescript",()=>bT().then(o=>o.setupTypeScript(NG)));Dp.languages.onLanguage("javascript",()=>bT().then(o=>o.setupJavaScript(RG)));var fue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},_T=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const vT=new ue("selectionAnchorSet",!1);let Yl=u(class PG{static get(e){return e.getContribution(PG.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=vT.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(ge.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Gi().appendText(p("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),ri(p("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(ge.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},"SelectionAnchorController");Yl.ID="editor.contrib.selectionAnchorController";Yl=fue([pue(1,Me)],Yl);class FG extends de{constructor(){super({id:"editor.action.setSelectionAnchor",label:p("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2080),weight:100}})}run(e,t){var n;return _T(this,void 0,void 0,function*(){(n=Yl.get(t))===null||n===void 0||n.setSelectionAnchor()})}}u(FG,"SetSelectionAnchor");class OG extends de{constructor(){super({id:"editor.action.goToSelectionAnchor",label:p("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:vT})}run(e,t){var n;return _T(this,void 0,void 0,function*(){(n=Yl.get(t))===null||n===void 0||n.goToSelectionAnchor()})}}u(OG,"GoToSelectionAnchor");class HG extends de{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:p("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:vT,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2089),weight:100}})}run(e,t){var n;return _T(this,void 0,void 0,function*(){(n=Yl.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}}u(HG,"SelectFromAnchorToCursor");class VG extends de{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:p("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:vT,kbOpts:{kbExpr:D.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return _T(this,void 0,void 0,function*(){(n=Yl.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}}u(VG,"CancelSelectionAnchor");ct(Yl.ID,Yl,4);ee(FG);ee(OG);ee(HG);ee(VG);const mue=N("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},p("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class WG extends de{constructor(){super({id:"editor.action.jumpToBracket",label:p("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:3160,weight:100}})}run(e,t){var n;(n=wo.get(t))===null||n===void 0||n.jumpToBracket()}}u(WG,"JumpToBracketAction");class BG extends de{constructor(){super({id:"editor.action.selectToBracket",label:p("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var i;let s=!0;n&&n.selectBrackets===!1&&(s=!1),(i=wo.get(t))===null||i===void 0||i.selectToBracket(s)}}u(BG,"SelectToBracketAction");class UG extends de{constructor(){super({id:"editor.action.removeBrackets",label:p("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:2561,weight:100}})}run(e,t){var n;(n=wo.get(t))===null||n===void 0||n.removeBrackets(this.id)}}u(UG,"RemoveBracketsAction");class GG{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}u(GG,"BracketsData");class wo extends z{static get(e){return e.getContribution(wo.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new yt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(69),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(69)&&(this._matchBrackets=this._editor.getOption(69),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),s=e.bracketPairs.matchBracket(i);let r=null;if(s)s[0].containsPosition(i)&&!s[1].containsPosition(i)?r=s[1].getStartPosition():s[1].containsPosition(i)&&(r=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(r=l.range.getStartPosition())}}return r?new ge(r.lineNumber,r.column,r.lineNumber,r.column):new ge(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const s=i.getStartPosition();let r=t.bracketPairs.matchBracket(s);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(s),!r)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(T.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(s)){const h=a;a=l,l=h}}a&&l&&n.push(new ge(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(n=>{const i=n.getPosition();let s=t.bracketPairs.matchBracket(i);s||(s=t.bracketPairs.findEnclosingBrackets(i)),s&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:s[0],text:""},{range:s[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);const s=[];let r=0;for(let h=0,g=e.length;h<g;h++){const f=e[h];f.isEmpty()&&(s[r++]=f.getStartPosition())}s.length>1&&s.sort(W.compare);const a=[];let l=0,c=0;const d=i.length;for(let h=0,g=s.length;h<g;h++){const f=s[h];for(;c<d&&i[c].position.isBefore(f);)c++;if(c<d&&i[c].position.equals(f))a[l++]=i[c];else{let m=t.bracketPairs.matchBracket(f,20),b=wo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!m&&this._matchBrackets==="always"&&(m=t.bracketPairs.findEnclosingBrackets(f,20),b=wo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new GG(f,m,b)}}this._lastBracketsData=a,this._lastVersionId=n}}u(wo,"BracketMatchingController");wo.ID="editor.contrib.bracketMatchingController";wo._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Pe.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:on(mue),position:Qs.Center}});wo._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Pe.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});ct(wo.ID,wo,1);ee(BG);ee(WG);ee(UG);Ri.appendMenuItem(A.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:p({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class zG{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const r=new T(n,i-1,n,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new T(n,s,n,s),a)}else{const r=new T(n,s,n,s+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new T(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new ge(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new ge(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}u(zG,"MoveCaretCommand");class iR extends de{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const s of i)n.push(new zG(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}u(iR,"MoveCaretAction");class KG extends iR{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:D.writable})}}u(KG,"MoveCaretLeftAction");class jG extends iR{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:D.writable})}}u(jG,"MoveCaretRightAction");ee(KG);ee(jG);class $G extends de{constructor(){super({id:"editor.action.transposeLetters",label:p("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],s=t.getSelections();for(const r of s){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():ft.rightPosition(n,r.getPosition().lineNumber,r.getPosition().column),h=ft.leftPosition(n,d),g=ft.leftPosition(n,h),f=n.getValueInRange(T.fromPositions(g,h)),m=n.getValueInRange(T.fromPositions(h,d)),b=T.fromPositions(g,d);i.push(new Qn(b,m+f))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}u($G,"TransposeLettersAction");ee($G);var bue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Th="9_cutcopypaste",_ue=Rr||document.queryCommandSupported("cut"),qG=Rr||document.queryCommandSupported("copy"),vue=typeof navigator.clipboard>"u"||To?document.queryCommandSupported("paste"):!0;function sR(o){return o.register(),o}u(sR,"registerCommand");const Cue=_ue?sR(new qh({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Rr?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:p({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:A.EditorContext,group:Th,title:p("actions.clipboard.cutLabel","Cut"),when:D.writable,order:1},{menuId:A.CommandPalette,group:"",title:p("actions.clipboard.cutLabel","Cut"),order:1},{menuId:A.SimpleEditorContext,group:Th,title:p("actions.clipboard.cutLabel","Cut"),when:D.writable,order:1}]})):void 0,yue=qG?sR(new qh({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Rr?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:p({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:A.EditorContext,group:Th,title:p("actions.clipboard.copyLabel","Copy"),order:2},{menuId:A.CommandPalette,group:"",title:p("actions.clipboard.copyLabel","Copy"),order:1},{menuId:A.SimpleEditorContext,group:Th,title:p("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Ri.appendMenuItem(A.MenubarEditMenu,{submenu:A.MenubarCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Ri.appendMenuItem(A.EditorContext,{submenu:A.EditorContextCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:Th,order:3});Ri.appendMenuItem(A.EditorContext,{submenu:A.EditorContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1,when:Z.and(Z.notEquals("resourceScheme","output"),D.editorTextFocus)});Ri.appendMenuItem(A.EditorTitleContext,{submenu:A.EditorTitleContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1});Ri.appendMenuItem(A.ExplorerContext,{submenu:A.ExplorerContextShare,title:{value:p("share","Share"),original:"Share"},group:"11_share",order:-1});const uL=vue?sR(new qh({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Rr?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:p({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:A.EditorContext,group:Th,title:p("actions.clipboard.pasteLabel","Paste"),when:D.writable,order:4},{menuId:A.CommandPalette,group:"",title:p("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:A.SimpleEditorContext,group:Th,title:p("actions.clipboard.pasteLabel","Paste"),when:D.writable,order:4}]})):void 0;class YG extends de{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(35)&&t.getSelection().isEmpty()||(Rk.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),Rk.forceCopyWithSyntaxHighlighting=!1)}}u(YG,"ExecCommandCopyWithSyntaxHighlightingAction");function XG(o,e){o&&(o.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(gt).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const s=i.getOption(35),r=i.getSelection();return r&&r.isEmpty()&&!s||document.execCommand(e),!0}return!1}),o.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}u(XG,"registerExecCommandImpl");XG(Cue,"cut");XG(yue,"copy");uL&&(uL.addImplementation(1e4,"code-editor",(o,e)=>{const t=o.get(gt),n=o.get(oc),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&Ld?(()=>bue(void 0,void 0,void 0,function*(){const r=yield n.readText();if(r!==""){const a=np.INSTANCE.get(r);let l=!1,c=null,d=null;a&&(l=i.getOption(35)&&!!a.isFromEmptySelection,c=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),i.trigger("keyboard","paste",{text:r,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),uL.addImplementation(0,"generic-dom",(o,e)=>(document.execCommand("paste"),!0)));qG&&ee(YG);var wue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Ae{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Ae.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Ae(this.value+Ae.sep+e)}}u(Ae,"CodeActionKind");Ae.sep=".";Ae.None=new Ae("@@none@@");Ae.Empty=new Ae("");Ae.QuickFix=new Ae("quickfix");Ae.Refactor=new Ae("refactor");Ae.RefactorExtract=Ae.Refactor.append("extract");Ae.RefactorInline=Ae.Refactor.append("inline");Ae.RefactorMove=Ae.Refactor.append("move");Ae.RefactorRewrite=Ae.Refactor.append("rewrite");Ae.Source=new Ae("source");Ae.SourceOrganizeImports=Ae.Source.append("organizeImports");Ae.SourceFixAll=Ae.Source.append("fixAll");Ae.SurroundWith=Ae.Refactor.append("surround");var to;(function(o){o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view"})(to||(to={}));function Sue(o,e){return!(o.include&&!o.include.intersects(e)||o.excludes&&o.excludes.some(t=>ZG(e,t,o.include))||!o.includeSourceActions&&Ae.Source.contains(e))}u(Sue,"mayIncludeActionsOfKind");function Tue(o,e){const t=e.kind?new Ae(e.kind):void 0;return!(o.include&&(!t||!o.include.contains(t))||o.excludes&&t&&o.excludes.some(n=>ZG(t,n,o.include))||!o.includeSourceActions&&t&&Ae.Source.contains(t)||o.onlyIncludePreferredActions&&!e.isPreferred)}u(Tue,"filtersAction");function ZG(o,e,t){return!(!e.contains(o)||t&&e.contains(t))}u(ZG,"excludesAction");class kr{static fromUser(e,t){return!e||typeof e!="object"?new kr(t.kind,t.apply,!1):new kr(kr.getKindFromUser(e,t.kind),kr.getApplyFromUser(e,t.apply),kr.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Ae(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}}u(kr,"CodeActionCommandArgs");class JG{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return wue(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){$n(i)}n&&(this.action.edit=n.edit)}return this})}}u(JG,"CodeActionItem");var c1=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const QG="editor.action.codeAction",oR="editor.action.quickFix",ez="editor.action.autoFix",tz="editor.action.refactor",nz="editor.action.sourceAction",rR="editor.action.organizeImports",aR="editor.action.fixAll";class Pf extends z{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return Ei(e.diagnostics)?Ei(t.diagnostics)?Pf.codeActionsPreferredComparator(e,t):-1:Ei(t.diagnostics)?1:Pf.codeActionsPreferredComparator(e,t)}constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(Pf.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Ae.QuickFix.contains(new Ae(e.kind))&&!!e.isPreferred)}}u(Pf,"ManagedCodeActionSet");const k4={actions:[],documentation:void 0};function lR(o,e,t,n,i,s){var r;return c1(this,void 0,void 0,function*(){const a=n.filter||{},l={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:n.type},c=new hT(e,s),d=xue(o,e,a),h=new X,g=d.map(m=>c1(this,void 0,void 0,function*(){try{i.report(m);const b=yield m.provideCodeActions(e,t,l,c.token);if(b&&h.add(b),c.token.isCancellationRequested)return k4;const _=(b?.actions||[]).filter(v=>v&&Tue(a,v)),C=Eue(m,_,a.include);return{actions:_.map(v=>new JG(v,m)),documentation:C}}catch(b){if(Yr(b))throw b;return $n(b),k4}})),f=o.onDidChange(()=>{const m=o.all(e);pi(m,d)||c.cancel()});try{const m=yield Promise.all(g),b=m.map(C=>C.actions).flat(),_=[...jp(m.map(C=>C.documentation)),...Lue(o,e,n,b)];return new Pf(b,_,h)}finally{f.dispose(),c.dispose()}})}u(lR,"getCodeActions");function xue(o,e,t){return o.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>Sue(t,new Ae(i))):!0)}u(xue,"getCodeActionProviders");function*Lue(o,e,t,n){var i,s,r;if(e&&n.length)for(const a of o.all(e))a._getAdditionalMenuItems&&(yield*(i=a._getAdditionalMenuItems)===null||i===void 0?void 0:i.call(a,{trigger:t.type,only:(r=(s=t.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},n.map(l=>l.action)))}u(Lue,"getAdditionalDocumentationForShowingActions");function Eue(o,e,t){if(!o.documentation)return;const n=o.documentation.map(i=>({kind:new Ae(i.kind),command:i.command}));if(t){let i;for(const s of n)s.kind.contains(t)&&(i?i.kind.contains(s.kind)&&(i=s):i=s);if(i)return i?.command}for(const i of e)if(i.kind){for(const s of n)if(s.kind.contains(new Ae(i.kind)))return s.command}}u(Eue,"getDocumentationFromProvider");var d1;(function(o){o.OnSave="onSave",o.FromProblemsView="fromProblemsView",o.FromCodeActions="fromCodeActions"})(d1||(d1={}));function kue(o,e,t,n,i=Ze.None){var s;return c1(this,void 0,void 0,function*(){const r=o.get(Xv),a=o.get(dn),l=o.get(Ao),c=o.get(Cn);if(l.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(i),!i.isCancellationRequested&&!(!((s=e.action.edit)===null||s===void 0)&&s.edits.length&&!(yield r.apply(e.action.edit,{editor:n?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==d1.OnSave,showPreview:n?.preview})).isApplied)&&e.action.command)try{yield a.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const h=Due(d);c.error(typeof h=="string"?h:p("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}u(kue,"applyCodeAction");function Due(o){return typeof o=="string"?o:o instanceof Error&&typeof o.message=="string"?o.message:void 0}u(Due,"asMessage");ot.registerCommand("_executeCodeActionProvider",function(o,e,t,n,i){return c1(this,void 0,void 0,function*(){if(!(e instanceof ve))throw Ys();const{codeActionProvider:s}=o.get(he),r=o.get(en).getModel(e);if(!r)throw Ys();const a=ge.isISelection(t)?ge.liftSelection(t):T.isIRange(t)?r.validateRange(t):void 0;if(!a)throw Ys();const l=typeof n=="string"?new Ae(n):void 0,c=yield lR(s,r,a,{type:1,triggerAction:to.Default,filter:{includeSourceActions:!0,include:l}},Nd.None,Ze.None),d=[],h=Math.min(c.validActions.length,typeof i=="number"?i:0);for(let g=0;g<h;g++)d.push(c.validActions[g].resolve(Ze.None));try{return yield Promise.all(d),c.validActions.map(g=>g.action)}finally{setTimeout(()=>c.dispose(),100)}})});var Mue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Aue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let u1=u(class iz{constructor(e){this.keybindingService=e}getResolver(){const e=new tc(()=>this.keybindingService.getKeybindings().filter(t=>iz.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===rR?n={kind:Ae.SourceOrganizeImports.value}:t.command===aR&&(n={kind:Ae.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},kr.fromUser(n,{kind:Ae.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.value);return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Ae(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,s)=>i?i.kind.contains(s.kind)?s:i:s,void 0)}},"CodeActionKeybindingResolver");u1.codeActionCommands=[tz,QG,nz,rR,aR];u1=Mue([Aue(0,jt)],u1);N("symbolIcon.arrayForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.booleanForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.colorForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.constantForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.fileForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.folderForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.keyForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.keywordForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.moduleForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.namespaceForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.nullForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.numberForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.objectForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.operatorForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.packageForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.propertyForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.referenceForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.snippetForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.stringForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.structForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.textForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.typeParameterForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.unitForeground",{dark:te,light:te,hcDark:te,hcLight:te},p("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));N("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const sz=Object.freeze({kind:Ae.Empty,title:p("codeAction.widget.id.more","More Actions...")}),Iue=Object.freeze([{kind:Ae.QuickFix,title:p("codeAction.widget.id.quickfix","Quick Fix...")},{kind:Ae.RefactorExtract,title:p("codeAction.widget.id.extract","Extract..."),icon:re.wrench},{kind:Ae.RefactorInline,title:p("codeAction.widget.id.inline","Inline..."),icon:re.wrench},{kind:Ae.RefactorRewrite,title:p("codeAction.widget.id.convert","Rewrite..."),icon:re.wrench},{kind:Ae.RefactorMove,title:p("codeAction.widget.id.move","Move..."),icon:re.wrench},{kind:Ae.SurroundWith,title:p("codeAction.widget.id.surround","Surround With..."),icon:re.symbolSnippet},{kind:Ae.Source,title:p("codeAction.widget.id.source","Source Action..."),icon:re.symbolFile},sz]);function Nue(o,e,t){if(!e)return o.map(s=>({kind:"action",item:s,group:sz,disabled:!!s.action.disabled,label:s.action.disabled||s.action.title}));const n=Iue.map(s=>({group:s,actions:[]}));for(const s of o){const r=s.action.kind?new Ae(s.action.kind):Ae.None;for(const a of n)if(a.group.kind.contains(r)){a.actions.push(s);break}}const i=[];for(const s of n)if(s.actions.length){i.push({kind:"header",group:s.group});for(const r of s.actions)i.push({kind:"action",item:r,group:s.group,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}return i}u(Nue,"toMenuItems");var Rue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Pue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let ks=u(class BM{static get(e){return e.getContribution(BM.ID)}constructor(e,t){this._messageWidget=new Fn,this._messageListeners=new X,this._editor=e,this._visible=BM.MESSAGE_VISIBLE.bindTo(t)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){ri(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new D4(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new io(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new T(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(D4.fadeOut(this._messageWidget.value))}},"MessageController");ks.ID="editor.contrib.messageController";ks.MESSAGE_VISIBLE=new ue("messageVisible",!1,p("messageVisible","Whether the editor is currently showing an inline message"));ks=Rue([Pue(1,Me)],ks);const Fue=jn.bindToContribution(ks.get);oe(new Fue({id:"leaveEditorMessage",precondition:ks.MESSAGE_VISIBLE,handler:o=>o.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let D4=u(class{static fadeOut(e){const t=u(()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},"dispose"),n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("message"),r.textContent=i,this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}},"MessageWidget");ct(ks.ID,ks,4);var oz=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UM=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const rz="acceptSelectedCodeAction",az="previewSelectedCodeAction";class lz{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,n){var i,s;n.text.textContent=(s=(i=e.group)===null||i===void 0?void 0:i.title)!==null&&s!==void 0?s:""}disposeTemplate(e){}}u(lz,"HeaderRenderer");let GM=u(class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const n=document.createElement("span");n.className="title",e.append(n);const i=new cm(e,Us);return{container:e,icon:t,text:n,keybinding:i}}renderElement(e,t,n){var i,s,r;if(!((i=e.group)===null||i===void 0)&&i.icon?(n.icon.className=xe.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=le(e.group.icon.color.id))):(n.icon.className=xe.asClassName(re.lightBulb),n.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;n.text.textContent=dz(e.label),n.keybinding.set(e.keybinding),Pee(!!e.keybinding,n.keybinding.element);const a=(s=this._keybindingService.lookupKeybinding(rz))===null||s===void 0?void 0:s.getLabel(),l=(r=this._keybindingService.lookupKeybinding(az))===null||r===void 0?void 0:r.getLabel();n.container.classList.toggle("option-disabled",e.disabled),e.disabled?n.container.title=e.label:a&&l?this._supportsPreview?n.container.title=p({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to apply, Shift+F2 to preview"']},"{0} to apply, {1} to preview",a,l):n.container.title=p({key:"label",comment:['placeholder is a keybinding, e.g "F2 to apply"']},"{0} to apply",a):n.container.title=""}disposeTemplate(e){}},"ActionItemRenderer");GM=oz([UM(1,jt)],GM);class cz extends UIEvent{constructor(){super("acceptSelectedAction")}}u(cz,"AcceptSelectedEvent");class zM extends UIEvent{constructor(){super("previewSelectedAction")}}u(zM,"PreviewSelectedEvent");let KM=u(class extends z{constructor(e,t,n,i,s,r){super(),this._delegate=i,this._contextViewService=s,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Ro(e,this.domNode,a,[new GM(t,this._keybindingService),new lz],{keyboardSupport:!1,accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?dz(l?.label):"";return l.disabled&&(c=p({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>p({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(ng),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this._list.domFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=n,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(c=>c.kind==="header").length,i=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(i);const s=this._allMenuItems.map((c,d)=>{const h=document.getElementById(this._list.getElementID(d));if(h){h.style.width="auto";const g=h.getBoundingClientRect().width;return h.style.width="",g}return 0}),r=Math.max(...s,e),a=.7,l=Math.min(i,document.body.clientHeight*a);return this._list.layout(l,r),this.domNode.style.height=`${l}px`,this._list.domFocus(),r}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const n=t[0],i=this._list.element(n);if(!this.focusCondition(i))return;const s=e?new zM:new cz;this._list.setSelection([n],s)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof zM):this._list.setSelection([])}onListHover(e){this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}},"ActionList");KM=oz([UM(4,rc),UM(5,jt)],KM);function dz(o){return o.replace(/\r\n|\r|\n/g," ")}u(dz,"stripNewlines");var Oue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},hL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const xh={Visible:new ue("codeActionMenuVisible",!1,p("codeActionMenuVisible","Whether the action widget list is visible"))},rg=nt("actionWidgetService");let Lh=u(class extends z{get isVisible(){return xh.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,n){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=n,this._list=this._register(new Fn)}show(e,t,n,i,s,r,a){const l=xh.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(KM,e,t,n,i);this._contextViewService.showContextView({getAnchor:()=>s,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)===null||t===void 0||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusNext()}hide(){var e;(e=this._list.value)===null||e===void 0||e.hide(),this._list.clear()}_renderWidget(e,t,n){var i;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const r=new X,a=document.createElement("div"),l=e.appendChild(a);l.classList.add("context-view-block"),r.add($(l,ae.MOUSE_DOWN,m=>m.stopPropagation()));const c=document.createElement("div"),d=e.appendChild(c);d.classList.add("context-view-pointerBlock"),r.add($(d,ae.POINTER_MOVE,()=>d.remove())),r.add($(d,ae.MOUSE_DOWN,()=>d.remove()));let h=0;if(n.length){const m=this._createActionBar(".action-widget-action-bar",n);m&&(s.appendChild(m.getContainer().parentElement),r.add(m),h=m.getContainer().offsetWidth)}const g=(i=this._list.value)===null||i===void 0?void 0:i.layout(h);s.style.width=`${g}px`;const f=r.add(Kl(e));return r.add(f.onDidBlur(()=>this.hide())),r}_createActionBar(e,t){if(!t.length)return;const n=ie(e),i=new eo(n);return i.push(t,{icon:!1,label:!0}),i}_onWidgetClosed(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e)}},"ActionWidgetService");Lh=Oue([hL(0,rc),hL(1,Me),hL(2,Re)],Lh);at(rg,Lh,1);const l0=100+1e3;Mn(class extends Ya{constructor(){super({id:"hideCodeActionWidget",title:{value:p("hideCodeActionWidget.title","Hide action widget"),original:"Hide action widget"},precondition:xh.Visible,keybinding:{weight:l0,primary:9,secondary:[1033]}})}run(o){o.get(rg).hide()}});Mn(class extends Ya{constructor(){super({id:"selectPrevCodeAction",title:{value:p("selectPrevCodeAction.title","Select previous action"),original:"Select previous action"},precondition:xh.Visible,keybinding:{weight:l0,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(o){const e=o.get(rg);e instanceof Lh&&e.focusPrevious()}});Mn(class extends Ya{constructor(){super({id:"selectNextCodeAction",title:{value:p("selectNextCodeAction.title","Select next action"),original:"Select next action"},precondition:xh.Visible,keybinding:{weight:l0,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(o){const e=o.get(rg);e instanceof Lh&&e.focusNext()}});Mn(class extends Ya{constructor(){super({id:rz,title:{value:p("acceptSelected.title","Accept selected action"),original:"Accept selected action"},precondition:xh.Visible,keybinding:{weight:l0,primary:3,secondary:[2132]}})}run(o){const e=o.get(rg);e instanceof Lh&&e.acceptSelected()}});Mn(class extends Ya{constructor(){super({id:az,title:{value:p("previewSelected.title","Preview selected action"),original:"Preview selected action"},precondition:xh.Visible,keybinding:{weight:l0,primary:2051}})}run(o){const e=o.get(rg);e instanceof Lh&&e.acceptSelected(!0)}});var Hue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Vue=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},cf;(function(o){o.Hidden={type:0};class e{constructor(n,i,s,r){this.actions=n,this.trigger=i,this.editorPosition=s,this.widgetPosition=r,this.type=1}}u(e,"Showing"),o.Showing=e})(cf||(cf={}));let Eh=u(class uz extends z{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new F),this.onClick=this._onClick.event,this._state=cf.Hidden,this._domNode=ie("div.lightBulbWidget"),this._register(Tt.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(n=>{const i=this._editor.getModel();(this.state.type!==1||!i||this.state.editorPosition.lineNumber>=i.getLineCount())&&this.hide()})),this._register(Tee(this._domNode,n=>{if(this.state.type!==1)return;this._editor.focus(),n.preventDefault();const{top:i,height:s}=Kn(this._domNode),r=this._editor.getOption(64);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:n.posx,y:i+s+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register($(this._domNode,"mouseenter",n=>{(n.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(62)&&!this._editor.getOption(62).enabled&&this.hide()})),this._register(pe.runAndSubscribe(t.onDidUpdateKeybindings,()=>{var n,i;this._preferredKbLabel=si((n=t.lookupKeybinding(ez))===null||n===void 0?void 0:n.getLabel()),this._quickFixKbLabel=si((i=t.lookupKeybinding(oR))===null||i===void 0?void 0:i.getLabel()),this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(62).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,c=i.get(48),d=s.getLineContent(r),h=wS(d,l),g=c.spaceWidth*h>22,f=u(b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1),"isFolded");let m=r;if(!g){if(r>1&&!f(r-1))m-=1;else if(!f(r+1))m+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new cf.Showing(e,t,n,{position:{lineNumber:m,column:1},preference:uz._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==cf.Hidden&&(this.state=cf.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...xe.asClassNameArray(re.lightBulb)),this._domNode.classList.add(...xe.asClassNameArray(re.lightbulbAutofix)),this._preferredKbLabel)){this.title=p("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel);return}this._domNode.classList.remove(...xe.asClassNameArray(re.lightbulbAutofix)),this._domNode.classList.add(...xe.asClassNameArray(re.lightBulb)),this._quickFixKbLabel?this.title=p("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=p("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}},"LightBulbWidget");Eh.ID="editor.contrib.lightbulbWidget";Eh._posPref=[0];Eh=Hue([Vue(1,jt)],Eh);var Wue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},LC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gL=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Bue=globalThis&&globalThis.__classPrivateFieldSet||function(o,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!i:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(o,t):i?i.value=t:e.set(o,t),t},Uue=globalThis&&globalThis.__classPrivateFieldGet||function(o,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!n:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(o):n?n.value:e.get(o)},My;let jM=u(class extends z{constructor(e,t,n,i,s,r){super(),this._editor=e,this.delegate=t,this._configurationService=i,this._actionWidgetService=s,this._commandService=r,this._activeCodeActions=this._register(new Fn),My.set(this,!1),this._showDisabled=!1,this._lightBulbWidget=new tc(()=>{const a=this._editor.getContribution(Eh.ID);return a&&this._register(a.onClick(l=>this.showCodeActionList(l.actions,l,{includeDisabledActions:!1,fromLightbulb:!0}))),a}),this._resolver=n.createInstance(u1),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){Bue(this,My,!0,"f"),super.dispose()}update(e){var t,n,i,s,r,a,l;return gL(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let c;try{c=yield e.actions}catch(d){He(d);return}if(!Uue(this,My,"f"))if((n=this._lightBulbWidget.value)===null||n===void 0||n.update(c,e.trigger,e.position),e.trigger.type===1){if(!((i=e.trigger.filter)===null||i===void 0)&&i.include){const h=this.tryGetValidActionToApply(e.trigger,c);if(h){try{(s=this._lightBulbWidget.value)===null||s===void 0||s.hide(),yield this.delegate.applyCodeAction(h,!1,!1)}finally{c.dispose()}return}if(e.trigger.context){const g=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,c);if(g&&g.action.disabled){(r=ks.get(this._editor))===null||r===void 0||r.showMessage(g.action.disabled,e.trigger.context.position),c.dispose();return}}}const d=!!(!((a=e.trigger.filter)===null||a===void 0)&&a.include);if(e.trigger.context&&(!c.allActions.length||!d&&!c.validActions.length)){(l=ks.get(this._editor))===null||l===void 0||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=c,c.dispose();return}this._activeCodeActions.value=c,this.showCodeActionList(c,this.toCoords(e.position),{includeDisabledActions:d,fromLightbulb:!1})}else this._actionWidgetService.isVisible?c.dispose():this._activeCodeActions.value=c})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n){return gL(this,void 0,void 0,function*(){const i=this._editor.getDomNode();if(!i)return;const s=n.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!s.length)return;const r=W.isIPosition(t)?this.toCoords(t):t,a={onSelect:(l,c)=>gL(this,void 0,void 0,function*(){this.delegate.applyCodeAction(l,!0,!!c),this._actionWidgetService.hide()}),onHide:()=>{var l;(l=this._editor)===null||l===void 0||l.focus()}};this._actionWidgetService.show("codeActionWidget",!0,Nue(s,this._shouldShowHeaders(),this._resolver.getResolver()),a,r,i,this._getActionBarActions(e,t,n))})}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Kn(this._editor.getDomNode()),i=n.left+t.left,s=n.top+t.top+t.height;return{x:i,y:s}}_shouldShowHeaders(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:t?.uri})}_getActionBarActions(e,t,n){if(n.fromLightbulb)return[];const i=e.documentation.map(s=>{var r;return{id:s.id,label:s.title,tooltip:(r=s.tooltip)!==null&&r!==void 0?r:"",class:void 0,enabled:!0,run:()=>{var a;return this._commandService.executeCommand(s.id,...(a=s.arguments)!==null&&a!==void 0?a:[])}}});return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:p("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,n))}:{id:"showMoreActions",label:p("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,n))}),i}},"CodeActionUi");My=new WeakMap;jM=Wue([LC(2,Re),LC(3,lt),LC(4,rg),LC(5,dn)],jM);var fL=globalThis&&globalThis.__classPrivateFieldGet||function(o,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!n:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(o):n?n.value:e.get(o)},Gue=globalThis&&globalThis.__classPrivateFieldSet||function(o,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!i:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(o,t):i?i.value=t:e.set(o,t),t},Bg;const hz=new ue("supportedCodeAction","");class gz extends z{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new io),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>kS(n,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:to.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:s}=n.getPosition(),r=t.getLineContent(i);if(r.length===0)return;if(s===1){if(/\s/.test(r[0]))return}else if(s===t.getLineMaxColumn(i)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[s-2])&&/\s/.test(r[s-1]))return}return n}}u(gz,"CodeActionOracle");var bu;(function(o){o.Empty={type:0};class e{constructor(n,i,s){this.trigger=n,this.position=i,this._cancellablePromise=s,this.type=1,this.actions=s.catch(r=>{if(Yr(r))return zue;throw r})}cancel(){this._cancellablePromise.cancel()}}u(e,"Triggered"),o.Triggered=e})(bu||(bu={}));const zue=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class fz extends z{constructor(e,t,n,i,s){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=s,this._codeActionOracle=this._register(new Fn),this._state=bu.Empty,this._onDidChangeState=this._register(new F),this.onDidChangeState=this._onDidChangeState.event,Bg.set(this,!1),this._supportedCodeActions=hz.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){fL(this,Bg,"f")||(Gue(this,Bg,!0,"f"),super.dispose(),this.setState(bu.Empty,!0))}_update(){if(fL(this,Bg,"f"))return;this._codeActionOracle.value=void 0,this.setState(bu.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(87)){const t=this._registry.all(e).flatMap(n=>{var i;return(i=n.providedCodeActionKinds)!==null&&i!==void 0?i:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new gz(this._editor,this._markerService,n=>{var i;if(!n){this.setState(bu.Empty);return}const s=On(r=>lR(this._registry,e,n.selection,n.trigger,Nd.None,r));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(s,250)),this.setState(new bu.Triggered(n.trigger,n.selection.getStartPosition(),s))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:to.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!fL(this,Bg,"f")&&this._onDidChangeState.fire(e))}}u(fz,"CodeActionModel");Bg=new WeakMap;var Kue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Om=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},jue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let kh=u(class pz extends z{static get(e){return e.getContribution(pz.ID)}constructor(e,t,n,i,s,r){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new fz(this._editor,r.codeActionProvider,t,n,i)),this._register(this._model.onDidChangeState(a=>this._ui.value.update(a))),this._ui=new tc(()=>this._register(s.createInstance(jM,e,{applyCodeAction:(a,l,c)=>jue(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a,c)}finally{l&&this._trigger({type:2,triggerAction:to.QuickFix,filter:{}})}})})))}showCodeActions(e,t,n){return this._ui.value.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,i){var s;if(!this._editor.hasModel())return;(s=ks.get(this._editor))===null||s===void 0||s.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(kue,e,d1.FromCodeActions,{preview:t,editor:this._editor})}},"CodeActionController");kh.ID="editor.contrib.codeActionController";kh=Kue([Om(1,Za),Om(2,Me),Om(3,Rd),Om(4,Re),Om(5,he)],kh);function c0(o){return Z.regex(hz.keys()[0],new RegExp("(\\s|^)"+Js(o.value)+"\\b"))}u(c0,"contextKeyForSupportedActions");const cR={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:p("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:p("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[p("args.schema.apply.first","Always apply the first returned code action."),p("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),p("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:p("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function ag(o,e,t,n,i=to.Default){if(o.hasModel()){const s=kh.get(o);s?.manualTriggerAtCurrentPosition(e,i,t,n)}}u(ag,"triggerCodeActionsForEditorSelection");class mz extends de{constructor(){super({id:oR,label:p("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Z.and(D.writable,D.hasCodeActionsProvider),kbOpts:{kbExpr:D.textInputFocus,primary:2132,weight:100}})}run(e,t){return ag(t,p("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,to.QuickFix)}}u(mz,"QuickFixAction");class bz extends jn{constructor(){super({id:QG,precondition:Z.and(D.writable,D.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:cR}]}})}runEditorCommand(e,t,n){const i=kr.fromUser(n,{kind:Ae.Empty,apply:"ifSingle"});return ag(t,typeof n?.kind=="string"?i.preferred?p("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):p("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?p("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):p("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}u(bz,"CodeActionCommand");class _z extends de{constructor(){super({id:tz,label:p("refactor.label","Refactor..."),alias:"Refactor...",precondition:Z.and(D.writable,D.hasCodeActionsProvider),kbOpts:{kbExpr:D.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Z.and(D.writable,c0(Ae.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:cR}]}})}run(e,t,n){const i=kr.fromUser(n,{kind:Ae.Refactor,apply:"never"});return ag(t,typeof n?.kind=="string"?i.preferred?p("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):p("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?p("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):p("editor.action.refactor.noneMessage","No refactorings available"),{include:Ae.Refactor.contains(i.kind)?i.kind:Ae.None,onlyIncludePreferredActions:i.preferred},i.apply,to.Refactor)}}u(_z,"RefactorAction");class vz extends de{constructor(){super({id:nz,label:p("source.label","Source Action..."),alias:"Source Action...",precondition:Z.and(D.writable,D.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Z.and(D.writable,c0(Ae.Source))},description:{description:"Source Action...",args:[{name:"args",schema:cR}]}})}run(e,t,n){const i=kr.fromUser(n,{kind:Ae.Source,apply:"never"});return ag(t,typeof n?.kind=="string"?i.preferred?p("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):p("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?p("editor.action.source.noneMessage.preferred","No preferred source actions available"):p("editor.action.source.noneMessage","No source actions available"),{include:Ae.Source.contains(i.kind)?i.kind:Ae.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,to.SourceAction)}}u(vz,"SourceAction");class Cz extends de{constructor(){super({id:rR,label:p("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Z.and(D.writable,c0(Ae.SourceOrganizeImports)),kbOpts:{kbExpr:D.textInputFocus,primary:1581,weight:100}})}run(e,t){return ag(t,p("editor.action.organize.noneMessage","No organize imports action available"),{include:Ae.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",to.OrganizeImports)}}u(Cz,"OrganizeImportsAction");class yz extends de{constructor(){super({id:aR,label:p("fixAll.label","Fix All"),alias:"Fix All",precondition:Z.and(D.writable,c0(Ae.SourceFixAll))})}run(e,t){return ag(t,p("fixAll.noneMessage","No fix all action available"),{include:Ae.SourceFixAll,includeSourceActions:!0},"ifSingle",to.FixAll)}}u(yz,"FixAllAction");class wz extends de{constructor(){super({id:ez,label:p("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Z.and(D.writable,c0(Ae.QuickFix)),kbOpts:{kbExpr:D.textInputFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return ag(t,p("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Ae.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",to.AutoFix)}}u(wz,"AutoFixAction");ct(kh.ID,kh,3);ct(Eh.ID,Eh,4);ee(mz);ee(_z);ee(vz);ee(Cz);ee(wz);ee(yz);oe(new bz);Kt.as(ja.Configuration).registerConfiguration(Object.assign(Object.assign({},m2),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:p("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}));var M4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class h1{constructor(){this.lenses=[],this._disposables=new X}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}u(h1,"CodeLensModel");function Sz(o,e,t){return M4(this,void 0,void 0,function*(){const n=o.ordered(e),i=new Map,s=new h1,r=n.map((a,l)=>M4(this,void 0,void 0,function*(){i.set(a,l);try{const c=yield Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){$n(c)}}));return yield Promise.all(r),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s})}u(Sz,"getCodeLensModel");ot.registerCommand("_executeCodeLensProvider",function(o,...e){let[t,n]=e;Ct(ve.isUri(t)),Ct(typeof n=="number"||!n);const{codeLensProvider:i}=o.get(he),s=o.get(en).getModel(t);if(!s)throw Ys();const r=[],a=new X;return Sz(i,s,Ze.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)n==null||d.symbol.command?r.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(s,d.symbol,Ze.None)).then(h=>r.push(h||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var $ue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},que=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Tz=nt("ICodeLensCache");class $M{constructor(e,t){this.lineCount=e,this.data=t}}u($M,"CacheItem");let qM=u(class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new ic(20,.75);const t="codelens/cache";Tl(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),Ha(e.onWillSaveState)(s=>{s.reason===jw.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new h1;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new $M(e.getLineCount(),i);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const s of n.data.lenses)i.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],s=[];for(const a of i.lines)s.push({range:new T(a,1,a,11)});const r=new h1;r.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new $M(i.lineCount,r))}}catch{}}},"CodeLensCache");qM=$ue([que(0,ar)],qM);at(Tz,qM,1);class xz{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}u(xz,"CodeLensViewZone");class d0{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${d0._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const n=[];let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(r&&(i=!0,r.command)){const a=Gu(r.command.title.trim());r.command.id?(n.push(ie("a",{id:String(s),title:r.command.tooltip,role:"button"},...a)),this._commands.set(String(s),r.command)):n.push(ie("span",{title:r.command.tooltip},...a)),s+1<e.length&&n.push(ie("span",void 0," | "))}}i?(nr(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):nr(this._domNode,ie("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}u(d0,"CodeLensContentWidget");d0._idPool=0;class Ay{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}u(Ay,"CodeLensHelper");const A4=Pe.register({collapseOnReplaceEdit:!0,description:"codelens"});class YM{constructor(e,t,n,i,s,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),n.addDecoration({range:c.symbol.range,options:A4},h=>this._decorationIds[d]=h),a?a=T.plusRange(a,c.symbol.range):a=T.lift(c.symbol.range)}),this._viewZone=new xz(a.startLineNumber-1,s,r),this._viewZoneId=i.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new d0(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&T.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:A4},s=>this._decorationIds[i]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}u(YM,"CodeLensWidget");var Yue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Xue=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Mp=u(class{constructor(e,t,n,i,s,r){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=s,this._codeLensCache=r,this._disposables=new X,this._localToDispose=new X,this._lenses=[],this._oldCodeLensModels=new X,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new yt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(48)||a.hasChanged(17)||a.hasChanged(16))&&this._updateLensStyle(),a.hasChanged(15)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(64)/this._editor.getOption(50));let t=this._editor.getOption(17);return(!t||t<5)&&(t=this._editor.getOption(50)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(16),i=this._editor.getOption(48),{style:s}=this._editor.getContainerDomNode();s.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),s.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),n&&(s.setProperty("--vscode-editorCodeLens-fontFamily",n),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",xs.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(15))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(lh(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){const s=i.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new yt(()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=On(r=>Sz(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},He)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(Oe(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(s=>{const r=[];let a=-1;this._lenses.forEach(c=>{!c.isValid()||a===c.getLineNumber()?r.push(c):(c.update(s),a=c.getLineNumber())});const l=new Ay;r.forEach(c=>{c.dispose(l,s),this._lenses.splice(this._lenses.indexOf(c),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Oe(()=>{if(this._editor.getModel()){const i=zr.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(s,r)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let s=i.target.element;if(s?.tagName==="SPAN"&&(s=s.parentElement),s?.tagName==="A")for(const r of this._lenses){const a=r.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new Ay;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let i;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}if(!n.length&&!this._lenses.length)return;const s=zr.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new Ay;let d=0,h=0;for(;h<n.length&&d<this._lenses.length;){const g=n[h][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<g?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===g?(this._lenses[d].updateCodeLensSymbols(n[h],c),h++,d++):(this._lenses.splice(d,0,new YM(n[h],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;h<n.length;)this._lenses.push(new YM(n[h],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const s=Date.now(),r=On(a=>{const l=n.map((c,d)=>{const h=new Array(c.length),g=c.map((f,m)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(t,f.symbol,a)).then(b=>{h[m]=b},$n):(h[m]=f.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{He(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}},"CodeLensContribution");Mp.ID="css.editor.codeLens";Mp=Yue([Hm(1,he),Hm(2,Po),Hm(3,dn),Hm(4,Cn),Hm(5,Tz)],Mp);ct(Mp.ID,Mp,1);ee(u(class extends de{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:D.hasCodeLensProvider,label:p("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return Xue(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Ja),i=e.get(dn),s=e.get(Cn),r=t.getSelection().positionLineNumber,a=t.getContribution(Mp.ID);if(!a)return;const l=a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===r&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=yield n.pick(c,{canPickMany:!1});if(d){if(l.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(d.command.id,...d.command.arguments||[])}catch(h){s.error(h)}}})}},"ShowLensesInCurrentLine"));function Zue(o,e,t){const n=[],s=o.ordered(e).reverse().map(r=>Promise.resolve(r.provideDocumentColors(e,t)).then(a=>{if(Array.isArray(a))for(const l of a)n.push({colorInfo:l,provider:r})}));return Promise.all(s).then(()=>n)}u(Zue,"getColors");function I4(o,e,t,n){return Promise.resolve(t.provideColorPresentations(o,e,n))}u(I4,"getColorPresentations");ot.registerCommand("_executeDocumentColorProvider",function(o,...e){const[t]=e;if(!(t instanceof ve))throw Ys();const{colorProvider:n}=o.get(he),i=o.get(en).getModel(t);if(!i)throw Ys();const s=[],a=n.ordered(i).reverse().map(l=>Promise.resolve(l.provideDocumentColors(i,Ze.None)).then(c=>{if(Array.isArray(c))for(const d of c)s.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(a).then(()=>s)});ot.registerCommand("_executeColorPresentationProvider",function(o,...e){const[t,n]=e,{uri:i,range:s}=n;if(!(i instanceof ve)||!Array.isArray(t)||t.length!==4||!T.isIRange(s))throw Ys();const[r,a,l,c]=t,{colorProvider:d}=o.get(he),h=o.get(en).getModel(i);if(!h)throw Ys();const g={range:s,color:{red:r,green:a,blue:l,alpha:c}},f=[],b=d.ordered(h).reverse().map(_=>Promise.resolve(_.provideColorPresentations(h,g,Ze.None)).then(C=>{Array.isArray(C)&&f.push(...C)}));return Promise.all(b).then(()=>f)});var Jue=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Que=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Lz=Object.create({});let Dh=u(class Ez extends z{constructor(e,t,n,i){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new X),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new Zp(this._editor),this._decoratorLimitReporter=new kz,this._colorDecorationClassRefs=this._register(new X),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:Ez.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(n.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(s=>{const r=this._isEnabled;this._isEnabled=this.isEnabled(),(r!==this._isEnabled||s.hasChanged(19))&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(18)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new io,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=On(e=>Que(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return Promise.resolve([]);const n=new ji(!1),i=yield Zue(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,n.elapsed()),i})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},He)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Pe.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,s)=>this._colorDatas.set(i,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],n=this._editor.getOption(19);for(let s=0;s<e.length&&t.length<n;s++){const{red:r,green:a,blue:l,alpha:c}=e[s].colorInfo.color,d=new tt(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),h=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,g=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:h}));t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:nJ,inlineClassName:`${g.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Lz}}})}const i=n<e.length?n:!1;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(T.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},"ColorDetector");Dh.ID="editor.contrib.colorDetector";Dh.RECOMPUTE_TIME=1e3;Dh=Jue([pL(1,lt),pL(2,he),pL(3,Po)],Dh);class kz{constructor(){this._onDidChange=new F,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}u(kz,"DecoratorLimitReporter");ct(Dh.ID,Dh,1);class Dz{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new F,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new F,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new F,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let n=-1;for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){n=i;break}if(n===-1){const i=t.split("(")[0].toLowerCase();for(let s=0;s<this.colorPresentations.length;s++)if(this.colorPresentations[s].label.toLowerCase().startsWith(i)){n=s;break}}n!==-1&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}u(Dz,"ColorPickerModel");const Nr=ie;class Mz extends z{constructor(e,t,n){super(),this.model=t,this.domNode=Nr(".colorpicker-header"),q(e,this.domNode),this.pickedColorNode=q(this.domNode,Nr(".picked-color"));const i=p("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const s=q(this.domNode,Nr(".original-color"));s.style.backgroundColor=U.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(_w)||U.white,this._register(n.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(_w)||U.white})),this._register($(this.pickedColorNode,ae.CLICK,()=>this.model.selectNextColorPresentation())),this._register($(s,ae.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=U.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=U.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Nr(".codicon.codicon-color-mode"))}}u(Mz,"ColorPickerHeader");class Az extends z{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=Nr(".colorpicker-body"),q(e,this.domNode),this.saturationBox=new Iz(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new Nz(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Rz(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new U(new Ir(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new U(new Ir(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new U(new Ir(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}u(Az,"ColorPickerBody");class Iz extends z{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new F,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Nr(".saturation-wrap"),q(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",q(this.domNode,this.canvas),this.selection=Nr(".saturation-selection"),q(this.domNode,this.selection),this.layout(),this._register($(this.domNode,ae.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Xh);const t=Kn(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>this.onDidChangePosition(i.pageX-t.left,i.pageY-t.top),()=>null);const n=$(document,ae.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new U(new Ir(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this.canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=U.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}u(Iz,"SaturationBox");class dR extends z{constructor(e,t){super(),this.model=t,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new F,this.onColorFlushed=this._onColorFlushed.event,this.domNode=q(e,Nr(".strip")),this.overlay=q(this.domNode,Nr(".overlay")),this.slider=q(this.domNode,Nr(".slider")),this.slider.style.top="0px",this._register($(this.domNode,ae.POINTER_DOWN,n=>this.onPointerDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new Xh),n=Kn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-n.top),()=>null);const i=$(document,ae.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}u(dR,"Strip");class Nz extends dR{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,s=new U(new tt(t,n,i,1)),r=new U(new tt(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}u(Nz,"OpacityStrip");class Rz extends dR{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}u(Rz,"HueStrip");class Pz extends No{constructor(e,t,n,i){super(),this.model=t,this.pixelRatio=n,this._register(Wf.onDidChange(()=>this.layout()));const s=Nr(".colorpicker-widget");e.appendChild(s);const r=new Mz(s,this.model,i);this.body=new Az(s,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}u(Pz,"ColorPickerWidget");var ehe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},the=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},N4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Fz{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(Fz,"ColorHover");let XM=u(class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,n){return gn.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return N4(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=Dh.get(this._editor);if(!i)return[];for(const s of t){if(!i.isColorDecoration(s))continue;const r=i.getColorData(s.range.getStartPosition());if(r)return[yield this._createColorHover(this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}_createColorHover(e,t,n){return N4(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:s,green:r,blue:a,alpha:l}=t.color,c=new tt(Math.round(s*255),Math.round(r*255),Math.round(a*255),l),d=new U(c),h=yield I4(e,t,n,Ze.None),g=new Dz(d,[],0);return g.colorPresentations=h||[],g.guessColorPresentation(d,i),new Fz(this,T.lift(t.range),g,n)})}renderHoverParts(e,t){if(t.length===0||!this._editor.hasModel())return z.None;const n=new X,i=t[0],s=this._editor.getModel(),r=i.model,a=n.add(new Pz(e.fragment,r,this._editor.getOption(137),this._themeService));e.setColorPicker(a);let l=new T(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn);const c=u(()=>{let h,g;if(r.presentation.textEdit){h=[r.presentation.textEdit],g=new T(r.presentation.textEdit.range.startLineNumber,r.presentation.textEdit.range.startColumn,r.presentation.textEdit.range.endLineNumber,r.presentation.textEdit.range.endColumn);const f=this._editor.getModel()._setTrackedRange(null,g,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",h),g=this._editor.getModel()._getTrackedRange(f)||g}else h=[{range:l,text:r.presentation.label,forceMoveMarkers:!1}],g=l.setEndPosition(l.endLineNumber,l.startColumn+r.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",h);r.presentation.additionalTextEdits&&(h=[...r.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",h),e.hide()),this._editor.pushUndoStop(),l=g},"updateEditorModel"),d=u(h=>I4(s,{range:l,color:{red:h.rgba.r/255,green:h.rgba.g/255,blue:h.rgba.b/255,alpha:h.rgba.a}},i.provider,Ze.None).then(g=>{r.colorPresentations=g||[]}),"updateColorPresentations");return n.add(r.onColorFlushed(h=>{d(h).then(c)})),n.add(r.onDidChangeColor(d)),n}},"ColorHoverParticipant");XM=ehe([the(1,qn)],XM);function ZM(o,e){return!!o[e]}u(ZM,"hasModifier");class Iy{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=ZM(e.event,t.triggerModifier),this.hasSideBySideModifier=ZM(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}u(Iy,"ClickLinkMouseEvent");class JM{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=ZM(e,t.triggerModifier)}}u(JM,"ClickLinkKeyboardEvent");class xb{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}u(xb,"ClickLinkOptions");function R4(o){return o==="altKey"?Ye?new xb(57,"metaKey",6,"altKey"):new xb(5,"ctrlKey",6,"altKey"):Ye?new xb(6,"altKey",57,"metaKey"):new xb(6,"altKey",5,"ctrlKey")}u(R4,"createOptions");class u0 extends z{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new F),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new F),this.onExecute=this._onExecute.event,this._onCancel=this._register(new F),this.onCancel=this._onCancel.event,this._editor=e,this._alwaysFireExecuteOnMouseUp=t,this._opts=R4(this._editor.getOption(75)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(n=>{if(n.hasChanged(75)){const i=R4(this._editor.getOption(75));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(n=>this._onEditorMouseMove(new Iy(n,this._opts)))),this._register(this._editor.onMouseDown(n=>this._onEditorMouseDown(new Iy(n,this._opts)))),this._register(this._editor.onMouseUp(n=>this._onEditorMouseUp(new Iy(n,this._opts)))),this._register(this._editor.onKeyDown(n=>this._onEditorKeyDown(new JM(n,this._opts)))),this._register(this._editor.onKeyUp(n=>this._onEditorKeyUp(new JM(n,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(n=>this._onDidChangeCursorSelection(n))),this._register(this._editor.onDidChangeModel(n=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(n=>{(n.scrollTopChanged||n.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;(this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t||this._alwaysFireExecuteOnMouseUp)&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}u(u0,"ClickLinkGesture");var nhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ol=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let bd=u(class extends hp{constructor(e,t,n,i,s,r,a,l,c,d,h,g,f){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),n,s,r,a,l,c,d,h,g,f),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(m=>this._onParentConfigurationChanged(m)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){bv(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}},"EmbeddedCodeEditorWidget");bd=nhe([ol(4,Re),ol(5,gt),ol(6,dn),ol(7,Me),ol(8,qn),ol(9,Cn),ol(10,Md),ol(11,zt),ol(12,he)],bd);const P4=new U(new tt(0,122,204)),ihe={showArrow:!0,showFrame:!0,className:"",frameColor:P4,arrowColor:P4,keepEditorSelection:!1},she="vs.editor.contrib.zoneWidget";class Oz{constructor(e,t,n,i,s,r){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=s,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}u(Oz,"ViewZoneDelegate");class Hz{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}u(Hz,"OverlayWidgetDelegate");class h0{constructor(e){this._editor=e,this._ruleName=h0._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),bF(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){bF(this._ruleName),Ck(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:T.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}u(h0,"Arrow");h0._IdGenerator=new zS(".arrow-decoration-");class Vz{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new X,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=gl(t),bv(this.options,ihe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new h0(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const n=e-this._decoratingElementsHeight();this.container.style.height=`${n}px`;const i=this.editor.getLayoutInfo();this._doLayout(n,this._getWidth(i))}(t=this._resizeSash)===null||t===void 0||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=T.isIRange(e)?T.lift(e):T.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:Pe.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)===null||e===void 0||e.hide()}_decoratingElementsHeight(){const e=this.editor.getOption(64);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),s=this._getWidth(i);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(i)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(64),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new Oz(r,n.lineNumber,n.column,t,m=>this._onViewZoneTop(m),m=>this._onViewZoneHeight(m)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new Hz(she+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}const h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,s),this.options.keepEditorSelection||this.editor.setSelection(e);const g=this.editor.getModel();if(g){const f=g.validateRange(new T(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(f,f.endLineNumber===g.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new hi(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(64),i=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+i;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}u(Vz,"ZoneWidget");var Wz=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bz=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Uz=nt("IPeekViewService");at(Uz,class{constructor(){this._widgets=new Map}addExclusiveWidget(o,e){const t=this._widgets.get(o);t&&(t.listener.dispose(),t.widget.dispose());const n=u(()=>{const i=this._widgets.get(o);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(o))},"remove");this._widgets.set(o,{widget:e,listener:e.onDidClose(n)})}},1);var hs;(function(o){o.inPeekEditor=new ue("inReferenceSearchEditor",!0,p("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),o.notInPeekEditor=o.inPeekEditor.toNegated()})(hs||(hs={}));let q_=u(class{constructor(e,t){e instanceof bd&&hs.inPeekEditor.bindTo(t)}dispose(){}},"PeekContextController");q_.ID="editor.contrib.referenceController";q_=Wz([Bz(1,Me)],q_);ct(q_.ID,q_,0);function ohe(o){const e=o.get(gt).getFocusedCodeEditor();return e instanceof bd?e.getParentEditor():e}u(ohe,"getOuterEditor");const rhe={headerBackgroundColor:U.white,primaryHeadingColor:U.fromHex("#333333"),secondaryHeadingColor:U.fromHex("#6c6c6cb3")};let g1=u(class extends Vz{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new F,this.onDidClose=this._onDidClose.event,bv(this.options,rhe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ie(".head"),this._bodyElement=ie(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=ie(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),pn(this._titleElement,"click",s=>this._onTitleClick(s))),q(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ie("span.filename"),this._secondaryHeading=ie("span.dirname"),this._metaHeading=ie("span.meta"),q(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=ie(".peekview-actions");q(this._headElement,n);const i=this._getActionBarOptions();this._actionbarWidget=new eo(n,i),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new cs("peekview.close",p("label.close","Close"),xe.asClassName(re.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:yae.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:kn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Cs(this._metaHeading)):Ui(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(64)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}},"PeekViewWidget");g1=Wz([Bz(2,Re)],g1);const ahe=N("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:U.black,hcLight:U.white},p("peekViewTitleBackground","Background color of the peek view title area.")),Gz=N("peekViewTitleLabel.foreground",{dark:U.white,light:U.black,hcDark:U.white,hcLight:$o},p("peekViewTitleForeground","Color of the peek view title.")),zz=N("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},p("peekViewTitleInfoForeground","Color of the peek view title info.")),lhe=N("peekView.border",{dark:Ks,light:Ks,hcDark:Qe,hcLight:Qe},p("peekViewBorder","Color of the peek view borders and arrow.")),che=N("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:U.black,hcLight:U.white},p("peekViewResultsBackground","Background color of the peek view result list."));N("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:U.white,hcLight:$o},p("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));N("peekViewResult.fileForeground",{dark:U.white,light:"#1E1E1E",hcDark:U.white,hcLight:$o},p("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));N("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},p("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));N("peekViewResult.selectionForeground",{dark:U.white,light:"#6C6C6C",hcDark:U.white,hcLight:$o},p("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const Bc=N("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:U.black,hcLight:U.white},p("peekViewEditorBackground","Background color of the peek view editor."));N("peekViewEditorGutter.background",{dark:Bc,light:Bc,hcDark:Bc,hcLight:Bc},p("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));N("peekViewEditorStickyScroll.background",{dark:Bc,light:Bc,hcDark:Bc,hcLight:Bc},p("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));N("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},p("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));N("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},p("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));N("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Ft,hcLight:Ft},p("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var dhe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Xl{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=mD.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?p({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Do(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):p("aria.oneReference","symbol in {0} on line {1} at column {2}",Do(this.uri),this.range.startLineNumber,this.range.startColumn)}}u(Xl,"OneReference");class Kz{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:s,endLineNumber:r,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:s-t}),c=new T(i,l.startColumn,i,s),d=new T(r,a,r,1073741824),h=n.getValueInRange(c).replace(/^\s+/,""),g=n.getValueInRange(e),f=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+g+f,highlight:{start:h.length,end:h.length+g.length}}}}u(Kz,"FilePreview");class Ap{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new fi}dispose(){mt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?p("aria.fileReferences.1","1 symbol in {0}, full path {1}",Do(this.uri),this.uri.fsPath):p("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Do(this.uri),this.uri.fsPath)}resolve(e){return dhe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new Kz(n))}catch(n){He(n)}return this})}}u(Ap,"FileReferences");class ds{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new F,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(ds._compareReferences);let i;for(const s of e)if((!i||!Ot.isEqual(i.uri,s.uri,!0))&&(i=new Ap(this,s.uri),this.groups.push(i)),i.children.length===0||ds._compareReferences(s,i.children[i.children.length-1])!==0){const r=new Xl(n===s,i,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),i.children.push(r)}}dispose(){mt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new ds(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?p("aria.result.0","No results found"):this.references.length===1?p("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?p("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):p("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let i=n.children.indexOf(e);const s=n.children.length,r=n.parent.groups.length;return r===1||t&&i+1<s||!t&&i>0?(t?i=(i+1)%s:i=(i+s-1)%s,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,s)=>({idx:s,prefixLen:oh(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,s)=>i.prefixLen>s.prefixLen?-1:i.prefixLen<s.prefixLen?1:i.offsetDist<s.offsetDist?-1:i.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&T.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ot.compare(e.uri,t.uri)||T.compareRangesUsingStarts(e.range,t.range)}}u(ds,"ReferencesModel");var CT=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yT=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let QM=u(class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof ds||e instanceof Ap}getChildren(e){if(e instanceof ds)return e.groups;if(e instanceof Ap)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}},"DataSource");QM=CT([yT(0,gs)],QM);class jz{getHeight(){return 23}getTemplateId(e){return e instanceof Ap?Y_.id:gm.id}}u(jz,"Delegate");let eA=u(class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Xl){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return Do(e.uri)}},"StringRepresentationProvider");eA=CT([yT(0,jt)],eA);class $z{getId(e){return e instanceof Xl?e.id:e.uri}}u($z,"IdentityProvider");let tA=u(class extends z{constructor(e,t){super(),this._labelService=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new j_(n,{supportHighlights:!0})),this.badge=new s1(q(n,ie(".count")),{},I6),e.appendChild(n)}set(e,t){const n=DS(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(p("referencesCount","{0} references",i)):this.badge.setTitleFormat(p("referenceCount","{0} reference",i))}},"FileReferencesTemplate");tA=CT([yT(1,bp)],tA);let Y_=u(class qz{constructor(e){this._instantiationService=e,this.templateId=qz.id}renderTemplate(e){return this._instantiationService.createInstance(tA,e)}renderElement(e,t,n){n.set(e.element,GS(e.filterData))}disposeTemplate(e){e.dispose()}},"FileReferencesRenderer");Y_.id="FileReferencesRenderer";Y_=CT([yT(0,Re)],Y_);class Yz{constructor(e){this.label=new Hl(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${Do(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:r}=i;t&&!Wr.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,GS(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[r]))}}}u(Yz,"OneReferenceTemplate");class gm{constructor(){this.templateId=gm.id}renderTemplate(e){return new Yz(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}u(gm,"OneReferenceRenderer");gm.id="OneReferenceRenderer";class Xz{getWidgetAriaLabel(){return p("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}u(Xz,"AccessibilityProvider");var uhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rl=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},F4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class g0{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new X,this._callOnModelChange=new X,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let i=0,s=e.children.length;i<s;i++){const r=e.children[i];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:g0.DecorationOptions}),n.push(i))}this._editor.changeDecorations(i=>{const s=i.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,i]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let r=!1;if(!T.equalsRange(s,i.range)){if(T.spansMultipleLines(s))r=!0;else{const a=i.range.endColumn-i.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=s}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}u(g0,"DecorationsManager");g0.DecorationOptions=Pe.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class Zz{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}u(Zz,"LayoutData");class Jz extends lM{}u(Jz,"ReferencesTree");let nA=u(class extends g1{constructor(e,t,n,i,s,r,a,l,c,d,h,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._languageService=h,this._languageConfigurationService=g,this._disposeOnNewModel=new X,this._callOnDispose=new X,this._onDidSelectReference=new F,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Lt(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),mt(this._preview),mt(this._previewNotAvailableMessage),mt(this._tree),mt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(lhe)||U.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(ahe)||U.transparent,primaryHeadingColor:e.getColor(Gz),secondaryHeadingColor:e.getColor(zz)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=q(e,ie("div.messages")),Ui(this._messageContainer),this._splitView=new w2(e,{orientation:1}),this._previewContainer=q(e,ie("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(bd,this._previewContainer,t,{},this.editor),Ui(this._previewContainer),this._previewNotAvailableMessage=new $l(p("missingPreviewMessage","no preview available"),Zs,$l.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=q(e,ie("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Xz,keyboardNavigationLabelProvider:this._instantiationService.createInstance(eA),identityProvider:new $z,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:che}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(pn(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Jz,"ReferencesWidget",this._treeContainer,new jz,[this._instantiationService.createInstance(Y_),this._instantiationService.createInstance(gm)],this._instantiationService.createInstance(QM),n),this._splitView.addView({onDidChange:pe.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},e1.Distribute),this._splitView.addView({onDidChange:pe.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},e1.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const i=u((s,r)=>{s instanceof Xl&&(r==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:r,source:"tree"}))},"onEvent");this._tree.onDidOpen(s=>{s.sideBySide?i(s.element,"side"):s.editorOptions.pinned?i(s.element,"goto"):i(s.element,"show")}),Ui(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Lt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=p("noResults","No results"),Cs(this._messageContainer),Promise.resolve(void 0)):(Ui(this._messageContainer),this._decorationsManager=new g0(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Cs(this._treeContainer),Cs(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Xl)return e;if(e instanceof Ap&&e.children.length>0)return e.children[0]}revealReference(e){return F4(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return F4(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Ue.inMemory?this.setTitle($ie(e.uri),this._uriLabel.getUriLabel(DS(e.uri))):this.setTitle(p("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}mt(this._previewModelReference);const s=i.object;if(s){const r=this._preview.getModel()===s.textEditorModel?0:1,a=T.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}},"ReferenceWidget");nA=uhe([rl(3,qn),rl(4,gs),rl(5,Re),rl(6,Uz),rl(7,bp),rl(8,IS),rl(9,jt),rl(10,Wt),rl(11,zt)],nA);var hhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Eg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},O4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const lg=new ue("referenceSearchVisible",!1,p("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let _d=u(class iA{static get(e){return e.getContribution(iA.ID)}constructor(e,t,n,i,s,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=s,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new X,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=lg.bindTo(n)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=Zz.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(nA,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(p("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,h=new W(e.startLineNumber,e.startColumn),g=this._model.nearestReference(d,h);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(83)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return O4(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i,!1),s?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()})}revealReference(e){return O4(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var n;(n=this._widget)===null||n===void 0||n.hide(),this._ignoreModelChangeEvent=!0;const i=T.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{var r;if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(i),this._widget.focusOnReferenceTree();else{const a=iA.get(s),l=this._model.clone();this.closeWidget(),s.focus(),a?.toggleWidget(i,On(c=>Promise.resolve(l)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},s=>{this._ignoreModelChangeEvent=!1,He(s)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:s}=e;this._editorService.openCodeEditor({resource:i,options:{selection:s,selectionSource:"code.jump",pinned:n}},this._editor,t)}},"ReferencesController");_d.ID="editor.contrib.referencesController";_d=hhe([Eg(2,Me),Eg(3,gt),Eg(4,Cn),Eg(5,Re),Eg(6,ar),Eg(7,lt)],_d);function cg(o,e){const t=ohe(o);if(!t)return;const n=_d.get(t);n&&e(n)}u(cg,"withController");us.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Dn(2089,60),when:Z.or(lg,hs.inPeekEditor),handler(o){cg(o,e=>{e.changeFocusBetweenPreviewAndReferences()})}});us.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:Z.or(lg,hs.inPeekEditor),handler(o){cg(o,e=>{e.goToNextOrPreviousReference(!0)})}});us.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:Z.or(lg,hs.inPeekEditor),handler(o){cg(o,e=>{e.goToNextOrPreviousReference(!1)})}});ot.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");ot.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");ot.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");ot.registerCommand("closeReferenceSearch",o=>cg(o,e=>e.closeWidget()));us.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:Z.and(hs.inPeekEditor,Z.not("config.editor.stablePeek"))});us.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:Z.and(lg,Z.not("config.editor.stablePeek"))});us.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Z.and(lg,pU,F2.negate(),O2.negate()),handler(o){var e;const n=(e=o.get(Fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xl&&cg(o,i=>i.revealReference(n[0]))}});us.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Z.and(lg,pU,F2.negate(),O2.negate()),handler(o){var e;const n=(e=o.get(Fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xl&&cg(o,i=>i.openReference(n[0],!0,!0))}});ot.registerCommand("openReference",o=>{var e;const n=(e=o.get(Fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xl&&cg(o,i=>i.openReference(n[0],!1,!0))});var Qz=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Lb=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const uR=new ue("hasSymbols",!1,p("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),wT=nt("ISymbolNavigationService");let sA=u(class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=uR.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new oA(this._editorService),i=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const h of t.references)if(kS(h.uri,a.uri))c=!0,d=d||T.containsPosition(h.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=Jo(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:T.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?p("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):p("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}},"SymbolNavigationService");sA=Qz([Lb(0,Me),Lb(1,gt),Lb(2,Cn),Lb(3,jt)],sA);at(wT,sA,1);oe(new class extends jn{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:uR,kbOpts:{weight:100,primary:70}})}runEditorCommand(o,e){return o.get(wT).revealNext(e)}});us.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:uR,primary:9,handler(o){o.get(wT).reset()}});let oA=u(class{constructor(e){this._listener=new Map,this._disposables=new X,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),mt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Jo(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}},"EditorState");oA=Qz([Lb(0,gt)],oA);var hR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function f0(o,e,t,n){return hR(this,void 0,void 0,function*(){const s=t.ordered(o).map(a=>Promise.resolve(n(a,o,e)).then(void 0,l=>{$n(l)})),r=yield Promise.all(s);return jp(r.flat())})}u(f0,"getLocationLinks");function ST(o,e,t,n){return f0(e,t,o,(i,s,r)=>i.provideDefinition(s,r,n))}u(ST,"getDefinitionsAtPosition");function eK(o,e,t,n){return f0(e,t,o,(i,s,r)=>i.provideDeclaration(s,r,n))}u(eK,"getDeclarationsAtPosition");function tK(o,e,t,n){return f0(e,t,o,(i,s,r)=>i.provideImplementation(s,r,n))}u(tK,"getImplementationsAtPosition");function nK(o,e,t,n){return f0(e,t,o,(i,s,r)=>i.provideTypeDefinition(s,r,n))}u(nK,"getTypeDefinitionsAtPosition");function TT(o,e,t,n,i){return f0(e,t,o,(s,r,a)=>hR(this,void 0,void 0,function*(){const l=yield s.provideReferences(r,a,{includeDeclaration:!0},i);if(!n||!l||l.length!==2)return l;const c=yield s.provideReferences(r,a,{includeDeclaration:!1},i);return c&&c.length===1?c:l}))}u(TT,"getReferencesAtPosition");function p0(o){return hR(this,void 0,void 0,function*(){const e=yield o(),t=new ds(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}u(p0,"_sortedAndDeduped");Xa("_executeDefinitionProvider",(o,e,t)=>{const n=o.get(he),i=ST(n.definitionProvider,e,t,Ze.None);return p0(()=>i)});Xa("_executeTypeDefinitionProvider",(o,e,t)=>{const n=o.get(he),i=nK(n.typeDefinitionProvider,e,t,Ze.None);return p0(()=>i)});Xa("_executeDeclarationProvider",(o,e,t)=>{const n=o.get(he),i=eK(n.declarationProvider,e,t,Ze.None);return p0(()=>i)});Xa("_executeReferenceProvider",(o,e,t)=>{const n=o.get(he),i=TT(n.referenceProvider,e,t,!1,Ze.None);return p0(()=>i)});Xa("_executeImplementationProvider",(o,e,t)=>{const n=o.get(he),i=tK(n.implementationProvider,e,t,Ze.None);return p0(()=>i)});var Qo=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},mL,bL,_L,vL,CL,yL,wL,SL;Ri.appendMenuItem(A.EditorContext,{submenu:A.EditorContextPeek,title:p("peek.submenu","Peek"),group:"navigation",order:100});class Mh{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof Mh||W.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}u(Mh,"SymbolNavigationAnchor");class Si extends Yh{static all(){return Si._allSymbolNavigationCommands.values()}static _patchConfig(e){const t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu)for(const n of st.wrap(t.menu))(n.id===A.EditorContext||n.id===A.EditorContextPeek)&&(n.when=Z.and(e.precondition,n.when));return t}constructor(e,t){super(Si._patchConfig(t)),this.configuration=e,Si._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,n,i){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(Cn),r=e.get(gt),a=e.get(Rd),l=e.get(wT),c=e.get(he),d=e.get(Re),h=t.getModel(),g=t.getPosition(),f=Mh.is(n)?n:new Mh(h,g),m=new pd(t,5),b=Q1(this._getLocationModel(c,f.model,f.position,m.token),m.token).then(_=>Qo(this,void 0,void 0,function*(){var C;if(!_||m.token.isCancellationRequested)return;ri(_.ariaMessage);let v;if(_.referenceAt(h.uri,g)){const w=this._getAlternativeCommand(t);!Si._activeAlternativeCommands.has(w)&&Si._allSymbolNavigationCommands.has(w)&&(v=Si._allSymbolNavigationCommands.get(w))}const y=_.references.length;if(y===0){if(!this.configuration.muteMessage){const w=h.getWordAtPosition(g);(C=ks.get(t))===null||C===void 0||C.showMessage(this._getNoResultFoundMessage(w),g)}}else if(y===1&&v)Si._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(w=>v.runEditorCommand(w,t,n,i).finally(()=>{Si._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,_,i)}),_=>{s.error(_)}).finally(()=>{m.dispose()});return a.showWhile(b,250),b}_onResult(e,t,n,i,s){return Qo(this,void 0,void 0,function*(){const r=this._getGoToPreference(n);if(!(n instanceof bd)&&(this.configuration.openInPeek||r==="peek"&&i.references.length>1))this._openInPeek(n,i,s);else{const a=i.firstReference(),l=i.references.length>1&&r==="gotoAndPeek",c=yield this._openReference(n,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,i,s):i.dispose(),r==="goto"&&t.put(a)}})}_openReference(e,t,n,i,s){return Qo(this,void 0,void 0,function*(){let r;if(WZ(n)&&(r=n.targetSelectionRange),r||(r=n.range),!r)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:T.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}})}_openInPeek(e,t,n){const i=_d.get(e);i&&e.hasModel()?i.toggleWidget(n??e.getSelection(),On(s=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}u(Si,"SymbolNavigationAction");Si._allSymbolNavigationCommands=new Map;Si._activeAlternativeCommands=new Set;class fm extends Si{_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield ST(e.definitionProvider,t,n,i),p("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("noResultWord","No definition found for '{0}'",e.word):p("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(56).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(56).multipleDefinitions}}u(fm,"DefinitionAction");const iK=Ld&&!GI()?2118:70;Mn((mL=u(class rA extends fm{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:rA.id,title:{value:p("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:p({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:Z.and(D.hasDefinitionProvider,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:iK,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.1},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),ot.registerCommandAlias("editor.action.goToDeclaration",rA.id)}},"GoToDefinitionAction"),mL.id="editor.action.revealDefinition",mL));Mn((bL=u(class aA extends fm{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:aA.id,title:{value:p("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:Z.and(D.hasDefinitionProvider,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:Dn(2089,iK),weight:100}}),ot.registerCommandAlias("editor.action.openDeclarationToTheSide",aA.id)}},"OpenDefinitionToSideAction"),bL.id="editor.action.revealDefinitionAside",bL));Mn((_L=u(class lA extends fm{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:lA.id,title:{value:p("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:Z.and(D.hasDefinitionProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:A.EditorContextPeek,group:"peek",order:2}}),ot.registerCommandAlias("editor.action.previewDeclaration",lA.id)}},"PeekDefinitionAction"),_L.id="editor.action.peekDefinition",_L));class gR extends Si{_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield eK(e.declarationProvider,t,n,i),p("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(56).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(56).multipleDeclarations}}u(gR,"DeclarationAction");Mn((vL=u(class sK extends gR{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:sK.id,title:{value:p("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:p({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:Z.and(D.hasDeclarationProvider,D.isInWalkThroughSnippet.toNegated()),menu:[{id:A.EditorContext,group:"navigation",order:1.3},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}},"GoToDeclarationAction"),vL.id="editor.action.revealDeclaration",vL));Mn(u(class extends gR{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:p("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:Z.and(D.hasDeclarationProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:3}})}},"PeekDeclarationAction"));class fR extends Si{_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield nK(e.typeDefinitionProvider,t,n,i),p("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):p("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(56).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(56).multipleTypeDefinitions}}u(fR,"TypeDefinitionAction");Mn((CL=u(class oK extends fR{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:oK.ID,title:{value:p("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:p({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:Z.and(D.hasTypeDefinitionProvider,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:0,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.4},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},"GoToTypeDefinitionAction"),CL.ID="editor.action.goToTypeDefinition",CL));Mn((yL=u(class rK extends fR{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:rK.ID,title:{value:p("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:Z.and(D.hasTypeDefinitionProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:4}})}},"PeekTypeDefinitionAction"),yL.ID="editor.action.peekTypeDefinition",yL));class pR extends Si{_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield tK(e.implementationProvider,t,n,i),p("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):p("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(56).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(56).multipleImplementations}}u(pR,"ImplementationAction");Mn((wL=u(class aK extends pR{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:aK.ID,title:{value:p("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:p({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:Z.and(D.hasImplementationProvider,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:2118,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.45},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},"GoToImplementationAction"),wL.ID="editor.action.goToImplementation",wL));Mn((SL=u(class lK extends pR{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:lK.ID,title:{value:p("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:Z.and(D.hasImplementationProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:3142,weight:100},menu:{id:A.EditorContextPeek,group:"peek",order:5}})}},"PeekImplementationAction"),SL.ID="editor.action.peekImplementation",SL));class mR extends Si{_getNoResultFoundMessage(e){return e?p("references.no","No references found for '{0}'",e.word):p("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(56).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(56).multipleReferences}}u(mR,"ReferencesAction");Mn(u(class extends mR{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:p("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:p({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:Z.and(D.hasReferenceProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),keybinding:{when:D.editorTextFocus,primary:1094,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.45},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield TT(e.referenceProvider,t,n,!0,i),p("ref.title","References"))})}},"GoToReferencesAction"));Mn(u(class extends mR{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:p("references.action.label","Peek References"),original:"Peek References"},precondition:Z.and(D.hasReferenceProvider,hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(yield TT(e.referenceProvider,t,n,!1,i),p("ref.title","References"))})}},"PeekReferencesAction"));class cK extends Si{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",title:{value:p("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:Z.and(hs.notInPeekEditor,D.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,i){return Qo(this,void 0,void 0,function*(){return new ds(this._references,p("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&p("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(56).multipleReferences}_getAlternativeCommand(){return""}}u(cK,"GenericGoToLocationAction");ot.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ve},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(o,e,t,n,i,s,r)=>Qo(void 0,void 0,void 0,function*(){Ct(ve.isUri(e)),Ct(W.isIPosition(t)),Ct(Array.isArray(n)),Ct(typeof i>"u"||typeof i=="string"),Ct(typeof r>"u"||typeof r=="boolean");const a=o.get(gt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(za(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends cK{_getNoResultFoundMessage(h){return s||super._getNoResultFoundMessage(h)}}({muteMessage:!s,openInPeek:!!r,openToSide:!1},n,i);c.get(Re).invokeFunction(d.run.bind(d),l)})})});ot.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ve},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(o,e,t,n,i)=>Qo(void 0,void 0,void 0,function*(){o.get(dn).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});ot.registerCommand({id:"editor.action.findReferences",handler:(o,e,t)=>{Ct(ve.isUri(e)),Ct(W.isIPosition(t));const n=o.get(he),i=o.get(gt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(s=>{if(!za(s)||!s.hasModel())return;const r=_d.get(s);if(!r)return;const a=On(c=>TT(n.referenceProvider,s.getModel(),W.lift(t),!1,c).then(d=>new ds(d,p("ref.title","References")))),l=new T(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});ot.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var ghe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},TL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},H4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Ah=u(class Ny{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new X,this.toUnhookForKeyboard=new X,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new u0(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,si(a))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{He(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Ny.ID)}startFindDefinitionFromCursor(e){return H4(this,void 0,void 0,function*(){yield this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;return H4(this,void 0,void 0,function*(){this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return;this.currentWordAtPosition=n;const i=new dG(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=On(a=>this.findDefinition(e,a));let s;try{s=yield this.previousPromise}catch(a){He(a);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const r=s[0].originSelectionRange?T.lift(s[0].originSelectionRange):new T(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);if(s.length>1){let a=r;for(const{originSelectionRange:l}of s)l&&(a=T.plusRange(a,l));this.addDecoration(a,new Gi().appendText(p("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const h=this.getPreviewValue(c,d,a),g=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(r,h?new Gi().appendCodeblock(g||"",h):void 0),l.dispose()})}})}getPreviewValue(e,t,n){let i=n.range;return i.endLineNumber-i.startLineNumber>=Ny.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+Ny.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<i;s++){const r=e.getLineFirstNonWhitespaceColumn(s);if(n===r)break}return new T(t,1,s+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((n=e.target.detail.injectedText)===null||n===void 0?void 0:n.options)instanceof ql)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?ST(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(84)&&!this.isInPeekEditor(n);return new fm({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(n)})}isInPeekEditor(e){const t=e.get(Me);return hs.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},"GotoDefinitionAtPositionEditorContribution");Ah.ID="editor.contrib.gotodefinitionatposition";Ah.MAX_SOURCE_PREVIEW_LINES=8;Ah=ghe([TL(1,gs),TL(2,Wt),TL(3,he)],Ah);ct(Ah.ID,Ah,2);const EC=ie;class bR extends z{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new em(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}u(bR,"HoverWidget");class xT extends z{static render(e,t,n){return new xT(e,t,n)}constructor(e,t,n){super(),this.actionContainer=q(e,EC("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=q(this.actionContainer,EC("a.action")),this.action.setAttribute("role","button"),t.iconClass&&q(this.action,EC(`span.icon.${t.iconClass}`));const i=q(this.action,EC("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register($(this.actionContainer,ae.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register($(this.actionContainer,ae.KEY_DOWN,s=>{const r=new Et(s);(r.equals(3)||r.equals(10))&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}u(xT,"HoverAction");var fhe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},phe=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};let mhe=u(class{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}},"HoverResult");class _R extends z{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new F),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new yt(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new yt(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new yt(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(58).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=XJ(e=>this._computer.computeAsync(e)),fhe(this,void 0,void 0,function*(){var e,t,n,i;try{try{for(var s=!0,r=phe(this._asyncIterable),a;a=yield r.next(),e=a.done,!e;){i=a.value,s=!1;try{const l=i;l&&(this._result.push(l),this._fireResult())}finally{s=!0}}}catch(l){t={error:l}}finally{try{!s&&!e&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(l){He(l)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new mhe(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}u(_R,"HoverOperation");class Ry{constructor(e,t,n,i){this.priority=e,this.range=t,this.initialMousePosX=n,this.initialMousePosY=i,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}u(Ry,"HoverRangeAnchor");class Jb{constructor(e,t,n,i,s,r){this.priority=e,this.owner=t,this.range=n,this.initialMousePosX=i,this.initialMousePosY=s,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}u(Jb,"HoverForeignElementAnchor");const dg=new(u(class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}},"HoverParticipantRegistry"));class go{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),i;if(i=go._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(go.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(go.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(go.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(go.isVariableCharacter(n)||go.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof go._table[n]>"u"&&!go.isDigitCharacter(n)&&!go.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}u(go,"Scanner");go._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class ug{constructor(){this._children=[]}appendChild(e){return e instanceof Ii&&this._children[this._children.length-1]instanceof Ii?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),s=n.children.slice(0);s.splice(i,1,...t),n._children=s,u(function r(a,l){for(const c of a)c.parent=l,r(c.children,c)},"_fixParent")(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof pm)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}u(ug,"Marker");class Ii extends ug{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Ii(this.value)}}u(Ii,"Text");class vR extends ug{}u(vR,"TransformableMarker");class Vs extends vR{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof hg?this._children[0]:void 0}clone(){const e=new Vs(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}u(Vs,"Placeholder");class hg extends ug{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Ii&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new hg;return this.options.forEach(e.appendChild,e),e}}u(hg,"Choice");class LT extends ug{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof Wo&&!!s.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof Wo){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){const e=new LT;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}u(LT,"Transform");class Wo extends ug{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new Wo(this.index,this.shorthandName,this.ifValue,this.elseValue)}}u(Wo,"FormatString");class Ip extends vR{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Ii(t)],!0):!1}clone(){const e=new Ip(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}u(Ip,"Variable");function V4(o,e){const t=[...o];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}u(V4,"walk");class pm extends ug{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof Vs&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return V4([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof Vs&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Ip&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new pm;return this._children=this.children.map(t=>t.clone()),e}walk(e){V4(this.children,e)}}u(pm,"TextmateSnippet");class Zl{constructor(){this._scanner=new go,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const i=new pm;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const i=new Map,s=[];t.walk(l=>(l instanceof Vs&&(l.isFinalTabstop?i.set(0,void 0):!i.has(l.index)&&l.children.length>0?i.set(l.index,l.children):s.push(l)),!0));const r=u((l,c)=>{const d=i.get(l.index);if(!d)return;const h=new Vs(l.index);h.transform=l.transform;for(const g of d){const f=g.clone();h.appendChild(f),f instanceof Vs&&i.has(f.index)&&!c.has(f.index)&&(c.add(f.index),r(f,c),c.delete(f.index))}t.replace(l,[h])},"fillInIncompletePlaceholder"),a=new Set;for(const l of s)r(l,a);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new Vs(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Ii(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Vs(Number(t)):new Ip(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new Vs(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Ii("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const r=new hg;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(r),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new Ii(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new Ip(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Ii("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){const t=new LT;let n="",i="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new Ii(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Wo(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Wo(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Wo(Number(i),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new Wo(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new Wo(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const r=this._until(4);if(r)return e.appendChild(new Wo(Number(i),void 0,s,r)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new Wo(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Ii(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}u(Zl,"SnippetParser");const bhe=p("defaultLabel","input"),_he=p("label.preserveCaseToggle","Preserve Case");class dK extends ig{constructor(e){super({icon:re.preserveCase,title:_he+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}u(dK,"PreserveCaseToggle");class uK extends No{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new F),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new F),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new F),this._onInput=this._register(new F),this._onKeyUp=this._register(new F),this._onPreserveCaseKeyDown=this._register(new F),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||bhe;const s=i.appendPreserveCaseLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,c=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new L2(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:i.inputBoxStyles})),this.preserveCase=this._register(new dK(Object.assign({appendTitle:s,isChecked:!1},i.toggleStyles))),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const f=d.indexOf(document.activeElement);if(f>=0){let m=-1;g.equals(17)?m=(f+1)%d.length:g.equals(15)&&(f===0?m=d.length-1:m=f-1),g.equals(9)?(d[f].blur(),this.inputBox.focus()):m>=0&&d[m].focus(),Be.stop(g,!0)}}});const h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}u(uK,"ReplaceInput");var hK=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gK=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const CR=new ue("suggestWidgetVisible",!1,p("suggestWidgetVisible","Whether suggestion are visible")),yR="historyNavigationWidgetFocus",fK="historyNavigationForwardsEnabled",pK="historyNavigationBackwardsEnabled";let Vl;const kC=[];function mK(o,e){if(kC.includes(e))throw new Error("Cannot register the same widget multiple times");kC.push(e);const t=new X,n=new ue(yR,!1).bindTo(o),i=new ue(fK,!0).bindTo(o),s=new ue(pK,!0).bindTo(o),r=u(()=>{n.set(!0),Vl=e},"onDidFocus"),a=u(()=>{n.set(!1),Vl===e&&(Vl=void 0)},"onDidBlur");return e.element===document.activeElement&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(Oe(()=>{kC.splice(kC.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}u(mK,"registerAndCreateHistoryNavigationContext");let cA=u(class extends E2{constructor(e,t,n,i){super(e,t,n);const s=this._register(i.createScoped(this.inputBox.element));this._register(mK(s,this.inputBox))}},"ContextScopedFindInput");cA=hK([gK(3,Me)],cA);let dA=u(class extends uK{constructor(e,t,n,i,s=!1){super(e,t,s,n);const r=this._register(i.createScoped(this.inputBox.element));this._register(mK(r,this.inputBox))}},"ContextScopedReplaceInput");dA=hK([gK(3,Me)],dA);us.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Z.and(Z.has(yR),Z.equals(pK,!0),CR.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{Vl?.showPreviousValue()}});us.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Z.and(Z.has(yR),Z.equals(fK,!0),CR.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{Vl?.showNextValue()}});var Qb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Ve={Visible:CR,HasFocusedSuggestion:new ue("suggestWidgetHasFocusedSuggestion",!1,p("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new ue("suggestWidgetDetailsVisible",!1,p("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new ue("suggestWidgetMultipleSuggestions",!1,p("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new ue("suggestionMakesTextEdit",!0,p("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new ue("acceptSuggestionOnEnter",!0,p("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new ue("suggestionHasInsertAndReplaceRange",!1,p("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new ue("suggestionInsertMode",void 0,{type:"string",description:p("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new ue("suggestionCanResolve",!1,p("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},ed=new A("suggestWidgetStatusBar");class bK{constructor(e,t,n,i){var s;this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=Wr.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(s=t.label)===null||s===void 0?void 0:s.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,T.isIRange(t.range)?(this.editStart=new W(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new W(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new W(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new W(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new W(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new W(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range.insert)||T.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Qb(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Yr(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}u(bK,"CompletionItem");class Np{constructor(e=2,t=new Set,n=new Set,i=new Map,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.providerItemsToReuse=i,this.showDeprecated=s}}u(Np,"CompletionOptions");Np.default=new Np;let vhe;function Che(){return vhe}u(Che,"getSnippetSuggestSupport");class _K{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}u(_K,"CompletionItemModel");function wR(o,e,t,n=Np.default,i={triggerKind:0},s=Ze.None){return Qb(this,void 0,void 0,function*(){const r=new ji(!0);t=t.clone();const a=e.getWordAtPosition(t),l=a?new T(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):T.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],h=new X,g=[];let f=!1;const m=u((_,C,v)=>{var y,w,x;let M=!1;if(!C)return M;for(const L of C.suggestions)if(!n.kindFilter.has(L.kind)){if(!n.showDeprecated&&(!((y=L?.tags)===null||y===void 0)&&y.includes(1)))continue;L.range||(L.range=c),L.sortText||(L.sortText=typeof L.label=="string"?L.label:L.label.label),!f&&L.insertTextRules&&L.insertTextRules&4&&(f=Zl.guessNeedsClipboard(L.insertText)),d.push(new bK(t,L,C,_)),M=!0}return DI(C)&&h.add(C),g.push({providerName:(w=_._debugDisplayName)!==null&&w!==void 0?w:"unknown_provider",elapsedProvider:(x=C.duration)!==null&&x!==void 0?x:-1,elapsedOverall:v.elapsed()}),M},"onCompletionList"),b=(()=>Qb(this,void 0,void 0,function*(){}))();for(const _ of o.orderedGroups(e)){let C=!1;if(yield Promise.all(_.map(v=>Qb(this,void 0,void 0,function*(){if(n.providerItemsToReuse.has(v)){const y=n.providerItemsToReuse.get(v);y.forEach(w=>d.push(w)),C=C||y.length>0;return}if(!(n.providerFilter.size>0&&!n.providerFilter.has(v)))try{const y=new ji(!0),w=yield v.provideCompletionItems(e,t,i,s);C=m(v,w,y)||C}catch(y){$n(y)}}))),C||s.isCancellationRequested)break}return yield b,s.isCancellationRequested?(h.dispose(),Promise.reject(new ec)):new _K(d.sort(She(n.snippetSortOrder)),f,{entries:g,elapsed:r.elapsed()},h)})}u(wR,"provideSuggestionItems");function SR(o,e){if(o.sortTextLow&&e.sortTextLow){if(o.sortTextLow<e.sortTextLow)return-1;if(o.sortTextLow>e.sortTextLow)return 1}return o.textLabel<e.textLabel?-1:o.textLabel>e.textLabel?1:o.completion.kind-e.completion.kind}u(SR,"defaultComparator");function yhe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return SR(o,e)}u(yhe,"snippetUpComparator");function whe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return SR(o,e)}u(whe,"snippetDownComparator");const ET=new Map;ET.set(0,yhe);ET.set(2,whe);ET.set(1,SR);function She(o){return ET.get(o)}u(She,"getSuggestionComparator");ot.registerCommand("_executeCompletionItemProvider",(o,...e)=>Qb(void 0,void 0,void 0,function*(){const[t,n,i,s]=e;Ct(ve.isUri(t)),Ct(W.isIPosition(n)),Ct(typeof i=="string"||!i),Ct(typeof s=="number"||!s);const{completionProvider:r}=o.get(he),a=yield o.get(gs).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(n),h=yield wR(r,a.object.textEditorModel,d,void 0,{triggerCharacter:i??void 0,triggerKind:i?1:0});for(const g of h.items)c.length<(s??0)&&c.push(g.resolve(Ze.None)),l.incomplete=l.incomplete||g.container.incomplete,l.suggestions.push(g.completion);try{return yield Promise.all(c),l}finally{setTimeout(()=>h.disposable.dispose(),100)}}finally{a.dispose()}}));function The(o,e){var t;(t=o.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}u(The,"showSimpleSuggestions");class Mu{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}u(Mu,"QuickSuggestionsOptions");var TR=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},f1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const W4=ie;let p1=u(class uA extends z{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(Xu,this._editor)),this._currentResult=null,this._participants=[];for(const i of dg.getAll())this._participants.push(this._instantiationService.createInstance(i,this._editor));this._participants.sort((i,s)=>i.hoverOrdinal-s.hoverOrdinal),this._computer=new X_(this._editor,this._participants),this._hoverOperation=this._register(new _R(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{if(!this._computer.anchor)return;const s=i.hasLoadingMessage?this._addLoadingMessage(i.value):i.value;this._withResult(new xR(this._computer.anchor,s,i.isComplete))})),this._register(pn(this._widget.getDomNode(),"keydown",i=>{i.equals(9)&&this.hide()})),this._register(Yt.onDidChange(()=>{this._widget.position&&this._currentResult&&(this._widget.clear(),this._setCurrentResult(this._currentResult))}))}maybeShowAt(e){const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const s=i.suggestHoverAnchor(e);s&&t.push(s)}const n=e.target;if(n.type===6&&t.push(new Ry(0,n.range,e.event.posx,e.event.posy)),n.type===7){const i=this._editor.getOption(48).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i&&t.push(new Ry(0,n.range,e.event.posx,e.event.posy))}return t.length===0?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((i,s)=>s.priority-i.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,n,i){this._startShowingOrUpdateHover(new Ry(0,e,void 0,void 0),t,n,i,null)}_startShowingOrUpdateHover(e,t,n,i,s){return!this._widget.position||!this._currentResult?e?(this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):!1:this._editor.getOption(58).sticky&&s&&this._widget.isMouseGettingCloser(s.event.posx,s.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,n,i,!0),!0):e?e&&this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,n,i,s){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=i,this._computer.source=n,this._computer.insistOnKeepingHoverVisible=s,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&e.messages.length===0&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}isColorPickerVisible(){return this._widget.isColorPickerVisible}isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}isVisible(){return this._widget.isVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&e.messages.length===0)||this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:n,showAtSecondaryPosition:i,highlightRange:s}=uA.computeHoverRanges(this._editor,e.range,t),r=new X,a=r.add(new hA(this._keybindingService)),l=document.createDocumentFragment();let c=null;const d={fragment:l,statusBar:a,setColorPicker:g=>c=g,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const g of this._participants){const f=t.filter(m=>m.owner===g);f.length>0&&r.add(g.renderHoverParts(d,f))}const h=t.some(g=>g.isBeforeContent);if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const g=this._editor.createDecorationsCollection();g.set([{range:s,options:uA._DECORATION_OPTIONS}]),r.add(Oe(()=>{g.clear()}))}this._widget.showAt(l,new CK(c,n,i,this._editor.getOption(58).above,this._computer.shouldFocus,this._computer.source,h,e.initialMousePosX,e.initialMousePosY,r))}else r.dispose()}static computeHoverRanges(e,t,n){let i=1;if(e.hasModel()){const c=e._getViewModel(),d=c.coordinatesConverter,h=d.convertModelRangeToViewRange(t),g=new W(h.startLineNumber,c.getLineMinColumn(h.startLineNumber));i=d.convertViewPositionToModelPosition(g).column}const s=t.startLineNumber;let r=t.startColumn,a=n[0].range,l=null;for(const c of n)a=T.plusRange(a,c.range),c.range.startLineNumber===s&&c.range.endLineNumber===s&&(r=Math.max(Math.min(r,c.range.startColumn),i)),c.forceShowAtRange&&(l=c.range);return{showAtPosition:l?l.getStartPosition():new W(s,t.startColumn),showAtSecondaryPosition:l?l.getStartPosition():new W(s,r),highlightRange:a}}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}escape(){this._widget.escape()}},"ContentHoverController");p1._DECORATION_OPTIONS=Pe.register({description:"content-hover-highlight",className:"hoverHighlight"});p1=TR([f1(1,Re),f1(2,jt)],p1);class xR{constructor(e,t,n){this.anchor=e,this.messages=t,this.isComplete=n}filter(e){const t=this.messages.filter(n=>n.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new vK(this,this.anchor,t,this.isComplete)}}u(xR,"HoverResult");class vK extends xR{constructor(e,t,n,i){super(t,n,i),this.original=e}filter(e){return this.original.filter(e)}}u(vK,"FilteredHoverResult");class CK{constructor(e,t,n,i,s,r,a,l,c,d){this.colorPicker=e,this.showAtPosition=t,this.showAtSecondaryPosition=n,this.preferAbove=i,this.stoleFocus=s,this.source=r,this.isBeforeContent=a,this.initialMousePosX=l,this.initialMousePosY=c,this.disposables=d,this.closestMouseDistance=void 0}}u(CK,"ContentHoverVisibleData");let Xu=u(class yK extends z{get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}get isVisibleFromKeyboard(){var e;return((e=this._visibleData)===null||e===void 0?void 0:e.source)===1}get isVisible(){var e;return(e=this._hoverVisibleKey.get())!==null&&e!==void 0?e:!1}constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=D.hoverVisible.bindTo(this._contextKeyService),this._hoverFocusedKey=D.hoverFocused.bindTo(this._contextKeyService),this._hover=this._register(new bR),this._focusTracker=this._register(Kl(this.getDomNode())),this._horizontalScrollingBy=30,this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(48)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this),this._register(this._focusTracker.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(this._focusTracker.onDidBlur(()=>{this._hoverFocusedKey.set(!1)}))}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return yK.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;!e&&this._contextKeyService.getContextKeyValue(Ve.Visible.key)&&(e=!0);const t=this._visibleData.isBeforeContent?3:void 0;return{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,preference:e?[1,2]:[2,1],positionAffinity:t}}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(typeof this._visibleData.initialMousePosX>"u"||typeof this._visibleData.initialMousePosY>"u")return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const n=Kn(this.getDomNode());typeof this._visibleData.closestMouseDistance>"u"&&(this._visibleData.closestMouseDistance=B4(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,n.left,n.top,n.width,n.height));const i=B4(e,t,n.left,n.top,n.width,n.height);return i>this._visibleData.closestMouseDistance+4?!1:(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,i),!0)}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(48);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}showAt(e,t){var n;this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),(n=t.colorPicker)===null||n===void 0||n.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const n=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==n&&(this._hover.contentsDomNode.style.paddingBottom=n,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-this._horizontalScrollingBy})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+this._horizontalScrollingBy})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}escape(){this._editor.focus()}},"ContentHoverWidget");Xu.ID="editor.contrib.contentHoverWidget";Xu=TR([f1(1,Me)],Xu);let hA=u(class extends z{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=W4("div.hover-row.status-bar"),this.actionsElement=q(this.hoverElement,W4("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(xT.render(this.actionsElement,e,n))}append(e){const t=q(this.actionsElement,e);return this._hasContent=!0,t}},"EditorHoverStatusBar");hA=TR([f1(0,jt)],hA);class X_{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const s=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===i?r.range.startColumn:1,l=r.range.endLineNumber===i?r.range.endColumn:s;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return gn.EMPTY;const n=X_._getLineDecorations(this._editor,t);return gn.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):gn.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=X_._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return jp(t)}}u(X_,"ContentHoverComputer");function B4(o,e,t,n,i,s){const r=t+i/2,a=n+s/2,l=Math.max(Math.abs(o-r)-i/2,0),c=Math.max(Math.abs(e-a)-s/2,0);return Math.sqrt(l*l+c*c)}u(B4,"computeDistanceFromPointToRectangle");var xhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},U4=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},wK=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},xL;let Jl=u(class SK{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new F,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new X,s=i.add(r2(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,i)=>wK(this,void 0,void 0,function*(){var s,r,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=Zs);const c=yield wse(this._languageService,i,l),d=document.createElement("span");if(d.innerHTML=(a=(r=SK._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const h=this._options.editor.getOption(48);ai(d,h)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>Lhe(this._openerService,n,e.isTrusted),disposables:t}}}},"MarkdownRenderer");Jl._ttpTokenizer=(xL=window.trustedTypes)===null||xL===void 0?void 0:xL.createPolicy("tokenizeToString",{createHTML(o){return o}});Jl=xhe([U4(1,Wt),U4(2,Ms)],Jl);function Lhe(o,e,t){return wK(this,void 0,void 0,function*(){try{return yield o.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Ehe(t)})}catch(n){return He(n),!1}})}u(Lhe,"openLinkFromMarkdown");function Ehe(o){return o===!0?!0:o&&Array.isArray(o.enabledCommands)?o.enabledCommands:!1}u(Ehe,"toAllowCommandsOption");const G4=ie;class Zu extends z{constructor(e,t,n){super(),this._renderDisposeables=this._register(new X),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new bR),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Jl({editor:this._editor},t,n)),this._computer=new TK(this._editor),this._hoverOperation=this._register(new _R(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(48)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Zu.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const s=G4("div.hover-row.markdown-hover"),r=q(s,G4("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));r.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),s=this._editor.getOption(64),r=this._hover.containerDomNode.clientHeight,a=n-i-(r-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}u(Zu,"MarginHoverWidget");Zu.ID="editor.contrib.modesGlyphHoverWidget";class TK{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}constructor(e){this._editor=e,this._lineNumber=-1}computeSync(){const e=u(i=>({value:i}),"toHoverMessage"),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const s=i.options.glyphMarginHoverMessage;!s||fp(s)||n.push(...TI(s).map(e))}return n}}u(TK,"MarginHoverComputer");var khe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class xK{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}u(xK,"HoverProviderResult");function Dhe(o,e,t,n,i){return khe(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(o.provideHover(t,n,i));if(s&&Ahe(s))return new xK(o,s,e)}catch(s){$n(s)}})}u(Dhe,"executeProvider");function LR(o,e,t,n){const s=o.ordered(e).map((r,a)=>Dhe(r,a,e,t,n));return gn.fromPromises(s).coalesce()}u(LR,"getHover");function Mhe(o,e,t,n){return LR(o,e,t,n).map(i=>i.hover).toPromise()}u(Mhe,"getHoverPromise");Xa("_executeHoverProvider",(o,e,t)=>{const n=o.get(he);return Mhe(n.hoverProvider,e,t,Ze.None)});function Ahe(o){const e=typeof o.range<"u",t=typeof o.contents<"u"&&o.contents&&o.contents.length>0;return e&&t}u(Ahe,"isValid");var Ihe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},DC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const z4=ie;class Ko{constructor(e,t,n,i,s){this.owner=e,this.range=t,this.contents=n,this.isBeforeContent=i,this.ordinal=s}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(Ko,"MarkdownHover");let m1=u(class{constructor(e,t,n,i,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=s,this.hoverOrdinal=3}createLoadingMessage(e){return new Ko(this,e.range,[new Gi().appendText(p("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];let a=1e3;const l=n.getLineLength(i),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(112),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let g=!1;d>=0&&l>d&&e.range.startColumn>=d&&(g=!0,r.push(new Ko(this,e.range,[{value:p("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!g&&typeof h=="number"&&l>=h&&r.push(new Ko(this,e.range,[{value:p("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const m of t){const b=m.range.startLineNumber===i?m.range.startColumn:1,_=m.range.endLineNumber===i?m.range.endColumn:s,C=m.options.hoverMessage;if(!C||fp(C))continue;m.options.beforeContentClassName&&(f=!0);const v=new T(e.range.startLineNumber,b,e.range.startLineNumber,_);r.push(new Ko(this,v,TI(C),f,a++))}return r}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return gn.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return gn.EMPTY;const s=new W(e.range.startLineNumber,e.range.startColumn);return LR(this._languageFeaturesService.hoverProvider,i,s,n).filter(r=>!fp(r.hover.contents)).map(r=>{const a=r.hover.range?T.lift(r.hover.range):e.range;return new Ko(this,a,r.hover.contents,!1,r.ordinal)})}renderHoverParts(e,t){return LK(e,t,this._editor,this._languageService,this._openerService)}},"MarkdownHoverParticipant");m1=Ihe([DC(1,Wt),DC(2,Ms),DC(3,lt),DC(4,he)],m1);function LK(o,e,t,n,i){e.sort((r,a)=>r.ordinal-a.ordinal);const s=new X;for(const r of e)for(const a of r.contents){if(fp(a))continue;const l=z4("div.hover-row.markdown-hover"),c=q(l,z4("div.hover-contents")),d=s.add(new Jl({editor:t},n,i));s.add(d.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",o.onContentsChanged()}));const h=s.add(d.render(a));c.appendChild(h.element),o.fragment.appendChild(l)}return s}u(LK,"renderMarkdownHovers");var EK=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},b1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class gA{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}u(gA,"MarkerCoordinate");let fA=u(class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new F,this.onDidChange=this._onDidChange.event,this._dispoables=new X,this._markers=[],this._nextIdx=-1,ve.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),s=u((a,l)=>{let c=l_(a.resource.toString(),l.resource.toString());return c===0&&(i==="position"?c=T.compareRangesUsingStarts(a,l)||Jt.compare(a.severity,l.severity):c=Jt.compare(a.severity,l.severity)||T.compareRangesUsingStarts(a,l)),c},"compareMarker"),r=u(()=>{this._markers=this._markerService.read({resource:ve.isUri(e)?e:void 0,severities:Jt.Error|Jt.Warning|Jt.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)},"updateMarker");r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new gA(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,s=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());s<0&&(s=s_(this._markers,{resource:e.uri},(r,a)=>l_(r.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let r=s;r<this._markers.length;r++){let a=T.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new T(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,i=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(T.containsPosition(this._markers[n],t))return new gA(this._markers[n],n+1,this._markers.length)}}},"MarkerList");fA=EK([b1(1,Za),b1(2,lt)],fA);const kK=nt("IMarkerNavigationService");let pA=u(class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new oi}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new fA(e,this._markerService,this._configService)}},"MarkerNavigationService");pA=EK([b1(0,Za),b1(1,lt)],pA);at(kK,pA,1);var mA;(function(o){function e(t){switch(t){case cn.Ignore:return"severity-ignore "+xe.asClassName(re.info);case cn.Info:return xe.asClassName(re.info);case cn.Warning:return xe.asClassName(re.warning);case cn.Error:return xe.asClassName(re.error);default:return""}}u(e,"className"),o.className=e})(mA||(mA={}));var Nhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},kg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class DK{constructor(e,t,n,i,s){this._openerService=i,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new X,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(pn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new xN(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){mt(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:s}=e;let r=(t?.length||0)+2;s&&(typeof s=="string"?r+=s.length:r+=s.value.length);const a=Va(n);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);kn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),g.appendChild(f)}if(s)if(typeof s=="string"){const f=document.createElement("span");f.innerText=`(${s})`,f.classList.add("code"),g.appendChild(f)}else{this._codeLink=ie("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=m=>{this._openerService.open(s.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()};const f=q(this._codeLink,ie("span"));f.innerText=s.value,g.appendChild(this._codeLink)}}if(kn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Ei(i)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(64)*.66)}px`,this._lines+=1;for(const f of i){const m=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,b.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(b,f);const _=document.createElement("span");_.innerText=f.message,m.appendChild(b),m.appendChild(_),this._lines+=1,g.appendChild(m)}}const c=this._editor.getOption(48),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Jt.Error:t=p("Error","Error");break;case Jt.Warning:t=p("Warning","Warning");break;case Jt.Info:t=p("Info","Info");break;case Jt.Hint:t=p("Hint","Hint");break}let n=p("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}u(DK,"MessageWidget");let Rp=u(class MK extends g1{constructor(e,t,n,i,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new X,this._onDidSelectRelatedInformation=new F,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Jt.Warning,this._backgroundColor=U.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Ohe);let t=bA,n=Rhe;this._severity===Jt.Warning?(t=Py,n=Phe):this._severity===Jt.Info&&(t=_A,n=Fhe);const i=e.getColor(t),s=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:s,primaryHeadingColor:e.getColor(Gz),secondaryHeadingColor:e.getColor(zz)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(MK.TitleMenu,this._contextKeyService);R6(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=q(e,ie(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new DK(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const i=T.lift(e),s=this.editor.getPosition(),r=s&&i.containsPosition(s)?s:i.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?p("problems","{0} of {1} problems",t,n):p("change","{0} of {1} problem",t,n);this.setTitle(Do(a.uri),l)}this._icon.className=`codicon ${mA.className(Jt.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},"MarkerNavigationWidget");Rp.TitleMenu=new A("gotoErrorTitleMenu");Rp=Nhe([kg(1,qn),kg(2,Ms),kg(3,qa),kg(4,Re),kg(5,Me),kg(6,bp)],Rp);const K4=y_(Ta,Tte),j4=y_(zs,C_),$4=y_(Ks,Ek),bA=N("editorMarkerNavigationError.background",{dark:K4,light:K4,hcDark:Qe,hcLight:Qe},p("editorMarkerNavigationError","Editor marker navigation widget error color.")),Rhe=N("editorMarkerNavigationError.headerBackground",{dark:_e(bA,.1),light:_e(bA,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Py=N("editorMarkerNavigationWarning.background",{dark:j4,light:j4,hcDark:Qe,hcLight:Qe},p("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Phe=N("editorMarkerNavigationWarning.headerBackground",{dark:_e(Py,.1),light:_e(Py,.1),hcDark:"#0C141F",hcLight:_e(Py,.2)},p("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),_A=N("editorMarkerNavigationInfo.background",{dark:$4,light:$4,hcDark:Qe,hcLight:Qe},p("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Fhe=N("editorMarkerNavigationInfo.headerBackground",{dark:_e(_A,.1),light:_e(_A,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Ohe=N("editorMarkerNavigation.background",{dark:Rn,light:Rn,hcDark:Rn,hcLight:Rn},p("editorMarkerNavigationBackground","Editor marker navigation widget background."));var Hhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},MC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},AK=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let vd=u(class Fy{static get(e){return e.getContribution(Fy.ID)}constructor(e,t,n,i,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=s,this._sessionDispoables=new X,this._editor=e,this._widgetVisible=RK.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Rp,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,s,r;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!T.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:T.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new W(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,i;return AK(this,void 0,void 0,function*(){if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);r&&((n=Fy.get(r))===null||n===void 0||n.close(),(i=Fy.get(r))===null||i===void 0||i.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}})}},"MarkerController");vd.ID="editor.contrib.markerController";vd=Hhe([MC(1,kK),MC(2,Me),MC(3,gt),MC(4,Re)],vd);class m0 extends de{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return AK(this,void 0,void 0,function*(){t.hasModel()&&((n=vd.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}}u(m0,"MarkerNavigationAction");class Wl extends m0{constructor(){super(!0,!1,{id:Wl.ID,label:Wl.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:578,weight:100},menuOpts:{menuId:Rp.TitleMenu,title:Wl.LABEL,icon:bn("marker-navigation-next",re.arrowDown,p("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}u(Wl,"NextMarkerAction");Wl.ID="editor.action.marker.next";Wl.LABEL=p("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class td extends m0{constructor(){super(!1,!1,{id:td.ID,label:td.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:1602,weight:100},menuOpts:{menuId:Rp.TitleMenu,title:td.LABEL,icon:bn("marker-navigation-previous",re.arrowUp,p("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}u(td,"PrevMarkerAction");td.ID="editor.action.marker.prev";td.LABEL=p("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class IK extends m0{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:66,weight:100},menuOpts:{menuId:A.MenubarGoMenu,title:p({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}u(IK,"NextMarkerInFilesAction");class NK extends m0{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:1090,weight:100},menuOpts:{menuId:A.MenubarGoMenu,title:p({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}u(NK,"PrevMarkerInFilesAction");ct(vd.ID,vd,4);ee(Wl);ee(td);ee(IK);ee(NK);const RK=new ue("markersNavigationVisible",!1),Vhe=jn.bindToContribution(vd.get);oe(new Vhe({id:"closeMarkersNavigation",precondition:RK,handler:o=>o.close(),kbOpts:{weight:100+50,kbExpr:D.focus,primary:9,secondary:[1033]}}));var Whe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},LL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Oo=ie;class PK{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}u(PK,"MarkerHover");const q4={type:1,filter:{include:Ae.QuickFix},triggerAction:to.QuickFixHover};let vA=u(class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,c=a.range.endLineNumber===i?a.range.endColumn:s,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const h=new T(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new PK(this,h,d))}return r}renderHoverParts(e,t){if(!t.length)return z.None;const n=new X;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,n)));const i=t.length===1?t[0]:t.sort((s,r)=>Jt.compare(s.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=Oo("div.hover-row"),i=q(n,Oo("div.marker.hover-contents")),{source:s,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const c=q(i,Oo("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,s||a)if(a&&typeof a!="string"){const d=Oo("span");if(s){const m=q(d,Oo("span"));m.innerText=s}const h=q(d,Oo("a.code-link"));h.setAttribute("href",a.target.toString()),t.add($(h,"click",m=>{this._openerService.open(a.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()}));const g=q(h,Oo("span"));g.innerText=a.value;const f=q(i,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const d=q(i,Oo("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(Ei(l))for(const{message:d,resource:h,startLineNumber:g,startColumn:f}of l){const m=q(i,Oo("div"));m.style.marginTop="8px";const b=q(m,Oo("a"));b.innerText=`${Do(h)}(${g}, ${f}): `,b.style.cursor="pointer",t.add($(b,"click",C=>{C.stopPropagation(),C.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:g,startColumn:f}}}).catch(He)}));const _=q(m,Oo("span"));_.innerText=d,this._editor.applyFontInfo(_)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===Jt.Error||t.marker.severity===Jt.Warning||t.marker.severity===Jt.Info)&&e.statusBar.addAction({label:p("view problem","View Problem"),commandId:Wl.ID,run:()=>{var i;e.hide(),(i=vd.get(this._editor))===null||i===void 0||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(87)){const i=e.statusBar.append(Oo("div"));this.recentMarkerCodeActionsInfo&&(Jw.makeKey(this.recentMarkerCodeActionsInfo.marker)===Jw.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=p("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?z.None:n.add(lh(()=>i.textContent=p("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);n.add(Oe(()=>r.cancel())),r.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=p("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(Oe(()=>{l||a.dispose()})),e.statusBar.addAction({label:p("quick fixes","Quick Fix..."),commandId:oR,run:c=>{l=!0;const d=kh.get(this._editor),h=Kn(c);e.hide(),d?.showCodeActions(q4,a,{x:h.left+6,y:h.top+h.height+6,width:h.width,height:h.height})}})},He)}}getCodeActions(e){return On(t=>lR(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),q4,Nd.None,t))}},"MarkerHoverParticipant");vA=Whe([LL(1,lN),LL(2,Ms),LL(3,he)],vA);const FK="editor.action.inlineSuggest.commit",OK="editor.action.inlineSuggest.showPrevious",HK="editor.action.inlineSuggest.showNext";var Bhe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class VK extends z{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new z5),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=new X,this.options=n,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new Pp(()=>{var i;return(i=this.toggleMenuActionViewItem)===null||i===void 0?void 0:i.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new eo(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,actionViewItemProvider:(i,s)=>{var r;if(i.id===Pp.ID)return this.toggleMenuActionViewItem=new B_(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:xe.asClassNameArray((r=n.moreIcon)!==null&&r!==void 0?r:re.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const a=n.actionViewItemProvider(i,s);if(a)return a}if(i instanceof gh){const a=new B_(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement});return a.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(a),this.disposables.add(this._onDidChangeDropdownVisibility.add(a.onDidChangeVisibility)),a}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(i)})})}getKeybindingLabel(e){var t,n;const i=this.lookupKeybindings?(n=(t=this.options).getKeyBinding)===null||n===void 0?void 0:n.call(t,e):void 0;return si(i?.getLabel())}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),super.dispose()}}u(VK,"ToolBar");class Pp extends cs{constructor(e,t){t=t||p("moreActions","More Actions..."),super(Pp.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}run(){return Bhe(this,void 0,void 0,function*(){this.toggleDropdownMenu()})}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}u(Pp,"ToggleMenuAction");Pp.ID="toolbar.toggle.more";var Uhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Vm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let CA=u(class extends VK{constructor(e,t,n,i,s,r,a){super(e,s,Object.assign(Object.assign({getKeyBinding:l=>{var c;return(c=r.lookupKeybinding(l.id))!==null&&c!==void 0?c:void 0}},t),{allowContextMenu:!0})),this._options=t,this._menuService=n,this._contextKeyService=i,this._contextMenuService=s,this._sessionDisposables=this._store.add(new X),t?.telemetrySource&&this._store.add(this.actionBar.onDidRun(l=>a.publicLog2("workbenchActionExecuted",{id:l.action.id,from:t.telemetrySource})))}setActions(e,t=[],n){var i,s,r;this._sessionDisposables.clear();const a=e.slice(),l=t.slice(),c=[];let d=0;const h=[];let g=!1;if(((i=this._options)===null||i===void 0?void 0:i.hiddenItemStrategy)!==-1)for(let f=0;f<a.length;f++){const m=a[f];!(m instanceof ir)&&!(m instanceof Yf)||m.hideActions&&(c.push(m.hideActions.toggle),m.hideActions.toggle.checked&&d++,m.hideActions.isHidden&&(g=!0,a[f]=void 0,((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==0&&(h[f]=m)))}if(((r=this._options)===null||r===void 0?void 0:r.maxNumberOfItems)!==void 0){let f=0;for(let m=0;m<a.length;m++){const b=a[m];b&&++f>=this._options.maxNumberOfItems&&(a[m]=void 0,h[m]=b)}}yP(a),yP(h),super.setActions(a,Pn.join(h,l)),c.length>0&&this._sessionDisposables.add($(this.getElement(),"contextmenu",f=>{var m,b,_,C;const v=this.getItemAction(f.target);if(!v)return;f.preventDefault(),f.stopPropagation();let y=!1;if(d===1&&((m=this._options)===null||m===void 0?void 0:m.hiddenItemStrategy)===0){y=!0;for(let M=0;M<c.length;M++)if(c[M].checked){c[M]=Ob({id:v.id,label:v.label,checked:!0,enabled:!1,run(){}});break}}let w;if(!y&&(v instanceof ir||v instanceof Yf)){if(!v.hideActions)return;w=v.hideActions.hide}else w=Ob({id:"label",label:p("hide","Hide"),enabled:!1,run(){}});const x=Pn.join([w],c);!((b=this._options)===null||b===void 0)&&b.resetMenu&&!n&&(n=[this._options.resetMenu]),g&&n&&(x.push(new Pn),x.push(Ob({id:"resetThisMenu",label:p("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),this._contextMenuService.showContextMenu({getAnchor:()=>f,getActions:()=>x,menuId:(_=this._options)===null||_===void 0?void 0:_.contextMenu,menuActionOptions:Object.assign({renderShortTitle:!0},(C=this._options)===null||C===void 0?void 0:C.menuOptions),contextKeyService:this._contextKeyService})}))}},"WorkbenchToolBar");CA=Uhe([Vm(2,qa),Vm(3,Me),Vm(4,Zr),Vm(5,jt),Vm(6,Ao)],CA);var WK=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ca=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Ghe=bn("inline-suggestion-hints-next",re.chevronRight,p("parameterHintsNextIcon","Icon for show next parameter hint.")),zhe=bn("inline-suggestion-hints-previous",re.chevronLeft,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let Ih=u(class yA extends z{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,n){const i=new cs(e,t,n,!0,()=>this._commandService.executeCommand(e)),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return s&&(r=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),i.tooltip=r,i}constructor(e,t,n,i,s,r,a){super(),this.editor=e,this.withBorder=t,this._commandService=n,this.keybindingService=s,this._contextKeyService=r,this._menuService=a,this.id=`InlineSuggestionHintsContentWidget${yA.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=tb("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[tb("div",{style:{display:"flex"}},[tb("div@actionBar",{className:"custom-actions"}),tb("div@toolBar")])]),this.position=null,this.previousAction=this.createCommandAction(OK,p("previous","Previous"),xe.asClassName(zhe)),this.availableSuggestionCountAction=new cs("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(HK,p("next","Next"),xe.asClassName(Ghe)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(A.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new yt(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new yt(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCurrentSuggestionIdx=-1,this.lastSuggestionCount=-1,this.lastCommands=[];const l=this._register(new eo(this.nodes.actionBar));l.push(this.previousAction,{icon:!0,label:!1}),l.push(this.availableSuggestionCountAction),l.push(this.nextAction,{icon:!0,label:!1}),this.toolBar=this._register(i.createInstance(wA,this.nodes.toolBar,A.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},actionViewItemProvider:(c,d)=>c instanceof ir?i.createInstance(Khe,c,void 0):void 0,telemetrySource:"InlineSuggestionToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(c=>{yA._dropDownVisible=c}))}update(e,t,n,i){if(this.position===e&&this.lastCurrentSuggestionIdx===t&&this.lastSuggestionCount===n&&pi(this.lastCommands,i))return;this.position=e,this.lastCurrentSuggestionIdx=t,this.lastSuggestionCount=n??-1,this.lastCommands=i,n!==void 0&&n>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule(),n!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${t+1}/${n}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),this.editor.layoutContentWidget(this);const s=i.map(r=>({class:void 0,id:r.id,enabled:!0,tooltip:r.tooltip||"",label:r.title,run:a=>this._commandService.executeCommand(r.id)}));for(const[r,a]of this.inlineCompletionsActionsMenus.getActions())for(const l of a)l instanceof ir&&s.push(l);s.length>0&&s.unshift(new Pn),this.toolBar.setAdditionalSecondaryActions(s)}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this.position,preference:[1,2],positionAffinity:3}}},"InlineSuggestionHintsContentWidget");Ih._dropDownVisible=!1;Ih.id=0;Ih=WK([Ca(2,dn),Ca(3,Re),Ca(4,jt),Ca(5,Me),Ca(6,qa)],Ih);let Khe=u(class extends bh{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=tb("div.keybinding").root;new cm(t,Us,Object.assign({disableTitle:!0},ile)).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}},"StatusBarViewItem"),wA=u(class extends CA{constructor(e,t,n,i,s,r,a,l){super(e,Object.assign({resetMenu:t},n),i,s,r,a,l),this.menuId=t,this.options2=n,this.menuService=i,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,n,i,s,r,a;const l=[],c=[];R6(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:l,secondary:c},(n=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||n===void 0?void 0:n.primaryGroup,(s=(i=this.options2)===null||i===void 0?void 0:i.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(a=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),this.setActions(l,c)}setAdditionalSecondaryActions(e){pi(this.additionalActions,e,(t,n)=>t===n)||(this.additionalActions=e,this.updateToolbar())}},"CustomizedMenuWorkbenchToolBar");wA=WK([Ca(3,qa),Ca(4,Me),Ca(5,Zr),Ca(6,jt),Ca(7,Ao)],wA);var jhe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},AC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let qi=u(class BK{static get(e){return e.getContribution(BK.ID)}constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._keybindingService=s,this._toUnhook=new X,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(r=>{r.hasChanged(58)&&(this._unhookEvents(),this._hookEvents())})}_hookEvents(){const e=u(()=>this._hideWidgets(),"hideWidgetsEventHandler"),t=this._editor.getOption(58);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;if(t.type===9&&t.detail===Xu.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===Zu.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const n=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.containsNode(n)||this._hideWidgets()}_onEditorMouseMove(e){var t,n,i,s,r,a;const l=e.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&l.type===9&&l.detail===Xu.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&l.type===9&&l.detail===Xu.ID&&(!((i=this._contentWidget)===null||i===void 0)&&i.isColorPickerVisible())||this._isHoverSticky&&l.type===12&&l.detail===Zu.ID||this._isHoverSticky&&(!((s=this._contentWidget)===null||s===void 0)&&s.isVisibleFromKeyboard()))return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(l.type===2&&l.position){(a=this._contentWidget)===null||a===void 0||a.hide(),this._glyphWidget||(this._glyphWidget=new Zu(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(l.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const n=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=n?.kind===1||n&&n.kind===2&&n.commandId==="editor.action.showHover"&&((t=this._contentWidget)===null||t===void 0?void 0:t.isVisible());e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&!i&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||Ih.dropDownVisible||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(p1,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,n,i)}focus(){var e;(e=this._contentWidget)===null||e===void 0||e.focus()}scrollUp(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)===null||e===void 0||e.pageUp()}pageDown(){var e;(e=this._contentWidget)===null||e===void 0||e.pageDown()}goToTop(){var e;(e=this._contentWidget)===null||e===void 0||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)===null||e===void 0||e.goToBottom()}escape(){var e;(e=this._contentWidget)===null||e===void 0||e.escape()}isHoverVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isVisible()}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}},"ModesHoverController");qi.ID="editor.contrib.hover";qi=jhe([AC(1,Re),AC(2,Ms),AC(3,Wt),AC(4,jt)],qi);class UK extends de{constructor(){super({id:"editor.action.showHover",label:p({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse.","If the hover is already visible, it will take focus."]},"Show or Focus Hover"),description:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if when triggered with the keyboard, the hover should take focus immediately.",type:"boolean",default:!1}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2087),weight:100}})}run(e,t,n){if(!t.hasModel())return;const i=qi.get(t);if(!i)return;const s=t.getPosition(),r=new T(s.lineNumber,s.column,s.lineNumber,s.column),a=t.getOption(2)===2||!!n?.focus;i.isHoverVisible()?i.focus():i.showContentHover(r,1,1,a)}}u(UK,"ShowOrFocusHoverAction");class GK extends de{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:p({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=qi.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const s=new T(i.lineNumber,i.column,i.lineNumber,i.column),r=Ah.get(t);if(!r)return;r.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(s,1,1,!0)})}}u(GK,"ShowDefinitionPreviewHoverAction");class zK extends de{constructor(){super({id:"editor.action.scrollUpHover",label:p({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:16,weight:100}})}run(e,t){const n=qi.get(t);n&&n.scrollUp()}}u(zK,"ScrollUpHoverAction");class KK extends de{constructor(){super({id:"editor.action.scrollDownHover",label:p({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:18,weight:100}})}run(e,t){const n=qi.get(t);n&&n.scrollDown()}}u(KK,"ScrollDownHoverAction");class jK extends de{constructor(){super({id:"editor.action.scrollLeftHover",label:p({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:15,weight:100}})}run(e,t){const n=qi.get(t);n&&n.scrollLeft()}}u(jK,"ScrollLeftHoverAction");class $K extends de{constructor(){super({id:"editor.action.scrollRightHover",label:p({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:17,weight:100}})}run(e,t){const n=qi.get(t);n&&n.scrollRight()}}u($K,"ScrollRightHoverAction");class qK extends de{constructor(){super({id:"editor.action.pageUpHover",label:p({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){const n=qi.get(t);n&&n.pageUp()}}u(qK,"PageUpHoverAction");class YK extends de{constructor(){super({id:"editor.action.pageDownHover",label:p({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){const n=qi.get(t);n&&n.pageDown()}}u(YK,"PageDownHoverAction");class XK extends de{constructor(){super({id:"editor.action.goToTopHover",label:p({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){const n=qi.get(t);n&&n.goToTop()}}u(XK,"GoToTopHoverAction");class ZK extends de{constructor(){super({id:"editor.action.goToBottomHover",label:p({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){const n=qi.get(t);n&&n.goToBottom()}}u(ZK,"GoToBottomHoverAction");class JK extends de{constructor(){super({id:"editor.action.escapeFocusHover",label:p({key:"escapeFocusHover",comment:["Action that allows to escape from the hover widget with the escape command when the hover widget is focused."]},"Escape Focus Hover"),alias:"Escape Focus Hover",precondition:D.hoverFocused,kbOpts:{kbExpr:D.hoverFocused,primary:9,weight:100}})}run(e,t){const n=qi.get(t);n&&n.escape()}}u(JK,"EscapeFocusHoverAction");ct(qi.ID,qi,2);ee(UK);ee(GK);ee(zK);ee(KK);ee(jK);ee($K);ee(qK);ee(YK);ee(XK);ee(ZK);ee(JK);dg.register(m1);dg.register(vA);or((o,e)=>{const t=o.getColor(Vte);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});class _1 extends z{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==Lz||!t.range)return;const n=this._editor.getContribution(qi.ID);if(n&&!n.isColorPickerVisible()){const i=new T(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);n.showContentHover(i,1,0,!1)}}}u(_1,"ColorContribution");_1.ID="editor.contrib.colorContribution";ct(_1.ID,_1,2);dg.register(XM);const b0=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=u(function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n},"getRandomValues");const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return u(function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,s="";return s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s},"generateUuid")}();var QK=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function ER(o){return{id:b0(),asString:()=>QK(this,void 0,void 0,function*(){return o}),asFile:()=>{},value:typeof o=="string"?o:void 0}}u(ER,"createStringDataTransferItem");function $he(o,e,t){return{id:b0(),asString:()=>QK(this,void 0,void 0,function*(){return""}),asFile:()=>({name:o,uri:e,data:t}),value:void 0}}u($he,"createFileDataTransferItem");class kR{constructor(){this._entries=new Map}get size(){return this._entries.size}has(e){return this._entries.has(this.toKey(e))}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*entries(){for(const[e,t]of this._entries.entries())for(const n of t)yield[e,n]}values(){return Array.from(this._entries.values()).flat()}forEach(e){for(const[t,n]of this.entries())e(n,t)}toKey(e){return e.toLowerCase()}}u(kR,"VSDataTransfer");const kT=Object.freeze({create:o=>id(o.map(e=>e.toString())).join(`\r
`),split:o=>o.split(`\r
`),parse:o=>kT.split(o).filter(e=>!e.startsWith("#"))}),v1={EDITORS:"CodeEditors",FILES:"CodeFiles"};function qhe(o){var e;const t=[];if(o.dataTransfer&&o.dataTransfer.types.length>0){const s=o.dataTransfer.getData(v1.EDITORS);if(s)try{t.push(...Rw(s))}catch{}else try{const l=o.dataTransfer.getData($v.RESOURCES);t.push(...Yhe(l))}catch{}if(!((e=o.dataTransfer)===null||e===void 0)&&e.files)for(let l=0;l<o.dataTransfer.files.length;l++){const c=o.dataTransfer.files[l];if(c&&c.path)try{t.push({resource:ve.file(c.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}const r=o.dataTransfer.getData(v1.FILES);if(r)try{const l=JSON.parse(r);for(const c of l)t.push({resource:ve.file(c),isExternal:!0,allowWorkspaceOpen:!0})}catch{}const a=Kt.as(tj.DragAndDropContribution).getAll();for(const l of a){const c=o.dataTransfer.getData(l.dataFormatKey);if(c)try{t.push(...l.getEditorInputs(c))}catch{}}}const n=[],i=new fi;for(const s of t)s.resource?i.has(s.resource)||(n.push(s),i.set(s.resource,!0)):n.push(s);return n}u(qhe,"extractEditorsDropData");function Yhe(o){const e=[];if(o){const t=JSON.parse(o);for(const n of t)if(n.indexOf(":")>0){const{selection:i,uri:s}=s6(ve.parse(n));e.push({resource:s,options:{selection:i}})}}return e}u(Yhe,"createDraggedEditorInputFromRawResourcesData");class ej{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}}u(ej,"DragAndDropContributionRegistry");const tj={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Kt.add(tj.DragAndDropContribution,new ej);var Xhe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function SA(o){const e=new kR;for(const t of o.items){const n=t.type;if(t.kind==="string"){const i=new Promise(s=>t.getAsString(s));e.append(n,ER(i))}else if(t.kind==="file"){const i=t.getAsFile();i&&e.append(n,Zhe(i))}}return e}u(SA,"toVSDataTransfer");function Zhe(o){const e=o.path?ve.parse(o.path):void 0;return $he(o.name,e,()=>Xhe(this,void 0,void 0,function*(){return new Uint8Array(yield o.arrayBuffer())}))}u(Zhe,"createFileDataTransferItemFromFile");const Jhe=Object.freeze([v1.EDITORS,v1.FILES,$v.RESOURCES]);function Qhe(o,e,t=!1){var n;if(e.dataTransfer&&(t||!o.has(rs.uriList))){const i=qhe(e).filter(s=>s.resource).map(s=>s.resource.toString());for(const s of(n=e.dataTransfer)===null||n===void 0?void 0:n.items){const r=s.getAsFile();r&&i.push(r.path?ve.file(r.path).toString():r.name)}i.length&&o.replace(rs.uriList,ER(kT.create(i)))}for(const i of Jhe)o.delete(i)}u(Qhe,"addExternalEditorsDropData");var ege=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},IC=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const EL="application/vnd.code.copyMetadata";let Z_=u(class extends z{constructor(e,t,n,i,s,r){super(),this._bulkEditService=t,this._clipboardService=n,this._configurationService=i,this._languageFeaturesService=s,this._progressService=r,this._editor=e;const a=e.getContainerDomNode();this._register($(a,"copy",l=>this.handleCopy(l))),this._register($(a,"cut",l=>this.handleCopy(l))),this._register($(a,"paste",l=>this.handlePaste(l),!0))}arePasteActionsEnabled(e){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})?!0:e.uri.scheme===Ue.vscodeNotebookCell}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const n=this._editor.getModel(),i=this._editor.getSelections();if(!n||!i?.length||!this.arePasteActionsEnabled(n))return;const s=[...i],r=i[0],a=r.isEmpty();if(a){if(!this._editor.getOption(35))return;s[0]=new T(r.startLineNumber,0,r.startLineNumber,n.getLineLength(r.startLineNumber))}const l=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(g=>!!g.prepareDocumentPaste);if(!l.length){this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:a});return}const c=SA(e.clipboardData),d=b0();this.setCopyMetadata(e.clipboardData,{id:d,wasFromEmptySelection:a});const h=On(g=>IC(this,void 0,void 0,function*(){const f=yield Promise.all(l.map(m=>m.prepareDocumentPaste(n,s,c,g)));for(const m of f)m?.forEach((b,_)=>{c.replace(_,b)});return c}));(t=this._currentClipboardItem)===null||t===void 0||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:d,dataTransferPromise:h}}setCopyMetadata(e,t){e.setData(EL,JSON.stringify(t))}handlePaste(e){var t,n,i,s;return IC(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const r=this._editor.getSelections();if(!r?.length||!this._editor.hasModel())return;const a=this._editor.getModel();if(!this.arePasteActionsEnabled(a))return;let l;const c=(t=e.clipboardData)===null||t===void 0?void 0:t.getData(EL);c&&typeof c=="string"&&(l=JSON.parse(c));const d=this._languageFeaturesService.documentPasteEditProvider.ordered(a);if(!d.length)return;e.preventDefault(),e.stopImmediatePropagation();const h=new pd(this._editor,3);try{const g=SA(e.clipboardData);if(l?.id&&((n=this._currentClipboardItem)===null||n===void 0?void 0:n.handle)===l.id){const m=yield this._currentClipboardItem.dataTransferPromise;if(h.token.isCancellationRequested)return;m.forEach((b,_)=>{g.replace(_,b)})}if(!g.has(rs.uriList)){const m=yield this._clipboardService.readResources();if(h.token.isCancellationRequested)return;m.length&&g.append(rs.uriList,ER(kT.create(m)))}g.delete(EL);const f=yield this._progressService.withProgress({location:15,delay:750,title:p("pasteProgressTitle","Running paste handlers..."),cancellable:!0},()=>this.getProviderPasteEdit(d,g,a,r,h.token),()=>h.cancel());if(h.token.isCancellationRequested)return;if(f){const m=typeof f.insertText=="string"?Zl.escape(f.insertText):f.insertText.snippet,b={edits:[new Na(a.uri,{range:ge.liftSelection(this._editor.getSelection()),text:m,insertAsSnippet:!0}),...(s=(i=f.additionalEdit)===null||i===void 0?void 0:i.edits)!==null&&s!==void 0?s:[]]};yield this._bulkEditService.apply(b,{editor:this._editor});return}yield this.applyDefaultPasteHandler(g,l,h.token)}finally{h.dispose()}})}getProviderPasteEdit(e,t,n,i,s){return Q1((()=>IC(this,void 0,void 0,function*(){for(const r of e){if(s.isCancellationRequested)return;if(!tge(r,t))continue;const a=yield r.provideDocumentPasteEdits(n,i,t,s);if(a)return a}}))(),s)}applyDefaultPasteHandler(e,t,n){var i;return IC(this,void 0,void 0,function*(){const s=(i=e.get(rs.text))!==null&&i!==void 0?i:e.get("text");if(!s)return;const r=yield s.asString();n.isCancellationRequested||this._editor.trigger("keyboard","paste",{text:r,pasteOnNewLine:t?.wasFromEmptySelection,multicursorText:null})})}},"CopyPasteController");Z_.ID="editor.contrib.copyPasteActionController";Z_=ege([Wm(1,Xv),Wm(2,oc),Wm(3,lt),Wm(4,he),Wm(5,u2)],Z_);function tge(o,e){return o.pasteMimeTypes.some(t=>t.toLowerCase()===$v.FILES.toLowerCase()?[...e.values()].some(n=>n.asFile()):e.has(t))}u(tge,"isSupportedProvider");ct(Z_.ID,Z_,0);Kt.as(ja.Configuration).registerConfiguration(Object.assign(Object.assign({},m2),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:p("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}));class Rl{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,s=e.length;if(n+i>s)return!1;for(let r=0;r<i;r++){const a=e.charCodeAt(n+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,s,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,h=s.getLineContent(a),g=s.getLineContent(c);let f=h.lastIndexOf(t,l-1+t.length),m=g.indexOf(n,d-1-n.length);if(f!==-1&&m!==-1)if(a===c)h.substring(f+t.length,m).indexOf(n)>=0&&(f=-1,m=-1);else{const _=h.substring(f+t.length),C=g.substring(0,m);(_.indexOf(n)>=0||C.indexOf(n)>=0)&&(f=-1,m=-1)}let b;f!==-1&&m!==-1?(i&&f+t.length<h.length&&h.charCodeAt(f+t.length)===32&&(t=t+" "),i&&m>0&&g.charCodeAt(m-1)===32&&(n=" "+n,m-=1),b=Rl._createRemoveBlockCommentOperations(new T(a,f+t.length+1,c,m+1),t,n)):(b=Rl._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const _ of b)r.addTrackedEditOperation(_.range,_.text)}static _createRemoveBlockCommentOperations(e,t,n){const i=[];return T.isEmpty(e)?i.push(Ht.delete(new T(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(Ht.delete(new T(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(Ht.delete(new T(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){const s=[];return T.isEmpty(e)?s.push(Ht.replace(new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(Ht.insert(new W(e.startLineNumber,e.startColumn),t+(i?" ":""))),s.push(Ht.insert(new W(e.endLineNumber,e.endColumn),(i?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,i),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],s=n[1];return new ge(i.range.endLineNumber,i.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const i=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new ge(i.endLineNumber,i.endColumn+s,i.endLineNumber,i.endColumn+s)}}}u(Rl,"BlockCommentCommand");class ca{constructor(e,t,n,i,s,r,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(s).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,s,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,g=i.length;h<g;h++){const f=i[h],m=s+h;if(m===s&&a){f.ignore=!0;continue}const b=n.getLineContent(m),_=Pi(b);if(_===-1){f.ignore=r,f.commentStrOffset=b.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=_,d&&!Rl._haystackHasNeedleAtOffset(b,f.commentStr,_)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const C=_+f.commentStrLength;C<b.length&&b.charCodeAt(C)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let h=0,g=i.length;h<g;h++)i[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:i}}static _gatherPreflightData(e,t,n,i,s,r,a,l){const c=ca._gatherPreflightCommentStrings(n,i,s,l);return c===null?{supported:!1}:ca._analyzeLines(e,t,n,c,i,r,a,l)}_executeLineComments(e,t,n,i){let s;n.shouldRemoveComments?s=ca._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(ca._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const r=new W(i.positionLineNumber,i.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),T.isEmpty(s[a].range)&&T.getStartPosition(s[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let s=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(n,a-1),c=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(i,l+n.length),r=s),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(n,c),s=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(c=e.getLineContent(s).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(i=" "+i,c-=1),l!==-1&&c!==-1?Rl._createRemoveBlockCommentOperations(new T(s,l+n.length+1,r,c+1),n,i):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const i=e.getLanguageIdAtPosition(n.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const r=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,r,a);if(!l){if(n.isEmpty()){const c=e.getLineContent(n.startLineNumber);let d=Pi(c);d===-1&&(d=c.length),l=Rl._createAddBlockCommentOperations(new T(n.startLineNumber,d+1,n.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=Rl._createAddBlockCommentOperations(new T(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new T(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=ca._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new ge(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];r.ignore||n.push(Ht.delete(new T(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],i=this._insertSpace?" ":"";for(let s=0,r=e.length;s<r;s++){const a=e[s];a.ignore||n.push(Ht.insert(new W(t+s,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let s=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(let g=0,f=t[l].commentStrOffset;h<s&&g<f;g++)h=ca.nextVisibleColumn(h,i,d.charCodeAt(g)===9,1);h<s&&(s=h)}s=Math.floor(s/i)*i;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(r=0,a=t[l].commentStrOffset;h<s&&r<a;r++)h=ca.nextVisibleColumn(h,i,d.charCodeAt(r)===9,1);h>s?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}u(ca,"LineCommentCommand");class DT extends de{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(zt);if(!t.hasModel())return;const i=t.getModel(),s=[],r=i.getOptions(),a=t.getOption(21),l=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));l.sort((d,h)=>T.compareRangesUsingStarts(d.selection,h.selection));let c=l[0];for(let d=1;d<l.length;d++){const h=l[d];c.selection.endLineNumber===h.selection.startLineNumber&&(c.index<h.index?h.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=h))}for(const d of l)s.push(new ca(n,d.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(DT,"CommentLineAction");class nj extends DT{constructor(){super(0,{id:"editor.action.commentLine",label:p("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}u(nj,"ToggleCommentLineAction");class ij extends DT{constructor(){super(1,{id:"editor.action.addCommentLine",label:p("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2081),weight:100}})}}u(ij,"AddLineCommentAction");class sj extends DT{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2099),weight:100}})}}u(sj,"RemoveLineCommentAction");class oj extends de{constructor(){super({id:"editor.action.blockComment",label:p("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(zt);if(!t.hasModel())return;const i=t.getOption(21),s=[],r=t.getSelections();for(const a of r)s.push(new Rl(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(oj,"BlockCommentAction");ee(nj);ee(ij);ee(sj);ee(oj);var nge=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Fp=u(class rj{static get(e){return e.getContribution(rj.ID)}constructor(e,t,n,i,s,r,a,l){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=s,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new X,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),h=c.srcElement;h.shadowRoot&&dh(d)===h.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(22)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(22)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(22)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?A.SimpleEditorContext:A.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),s=i.getActions({arg:e.uri});i.dispose();for(const r of s){const[,a]=r;let l=0;for(const c of a)if(c instanceof Yf){const d=this._getMenuActions(e,c.item.submenu);d.length>0&&(n.push(new gh(c.id,c.label,d)),l++)}else n.push(c),l++;l&&n.push(new Pn)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(58);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),r=Kn(this._editor.getDomNode()),a=r.left+s.left,l=r.top+s.top+s.height;t={x:a,y:l}}const i=this._editor.getOption(122)&&!Fa;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:s=>{const r=this._keybindingFor(s);if(r)return new pp(s,s,{label:!0,keybinding:r.getLabel(),isMenu:!0});const a=s;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new pp(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||tae(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(70);let n=0;const i=u(c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),"createAction"),s=u((c,d)=>new gh(`menu-action-${++n}`,c,d,void 0),"createSubmenuAction"),r=u((c,d,h,g,f)=>{if(!d)return i({label:c,enabled:d,run:()=>{}});const m=u(_=>()=>{this._configurationService.updateValue(h,_)},"createRunner"),b=[];for(const _ of f)b.push(i({label:_.label,checked:g===_.value,run:m(_.value)}));return s(c,b)},"createEnumAction"),a=[];a.push(i({label:p("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Pn),a.push(i({label:p("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(p("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:p("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:p("context.minimap.size.fill","Fill"),value:"fill"},{label:p("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(p("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:p("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:p("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(122)&&!Fa;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},"ContextMenuController");Fp.ID="editor.contrib.contextmenu";Fp=nge([Xd(1,Zr),Xd(2,rc),Xd(3,Me),Xd(4,jt),Xd(5,qa),Xd(6,lt),Xd(7,_p)],Fp);class aj extends de{constructor(){super({id:"editor.action.showContextMenu",label:p("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=Fp.get(t))===null||n===void 0||n.showContextMenu()}}u(aj,"ShowContextMenu");ct(Fp.ID,Fp,2);ee(aj);class Oy{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}u(Oy,"CursorState");class Hy{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}u(Hy,"StackElement");class Cd extends z{static get(e){return e.getContribution(Cd.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new Oy(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new Hy(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new Hy(new Oy(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new Hy(new Oy(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}u(Cd,"CursorUndoRedoController");Cd.ID="editor.contrib.cursorUndoRedoController";class lj extends de{constructor(){super({id:"cursorUndo",label:p("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=Cd.get(t))===null||i===void 0||i.cursorUndo()}}u(lj,"CursorUndo");class cj extends de{constructor(){super({id:"cursorRedo",label:p("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=Cd.get(t))===null||i===void 0||i.cursorRedo()}}u(cj,"CursorRedo");ct(Cd.ID,Cd,0);ee(lj);ee(cj);class dj{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new T(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new ge(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new ge(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new ge(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new ge(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new ge(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}u(dj,"DragAndDropCommand");function Dg(o){return Ye?o.altKey:o.ctrlKey}u(Dg,"hasTriggerModifier");class Ra extends z{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(33)||this._editor.getOption(20)||(Dg(e)&&(this._modifierPressed=!0),this._mouseDown&&Dg(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(33)||this._editor.getOption(20)||(Dg(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Ra.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const i=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}Dg(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new W(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const i=this._editor.getSelection();if(i){const{selectionStartLineNumber:s,selectionStartColumn:r}=i;n=[new ge(s,r,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new ge(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Dg(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Ra.ID,new dj(this._dragSelection,t,Dg(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),options:Ra._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u(Ra,"DragAndDropController");Ra.ID="editor.contrib.dragAndDrop";Ra.TRIGGER_KEY_VALUE=Ye?6:5;Ra._DECORATION_OPTIONS=Pe.register({description:"dnd-target",className:"dnd-target"});ct(Ra.ID,Ra,2);var uj=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Eb=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Vy=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let J_=u(class extends z{constructor(e,t,n,i,s){super(),this._bulkEditService=t,this._languageFeaturesService=n,this._progressService=i,this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new TA(s))}onDropIntoEditor(e,t,n){var i,s;return Vy(this,void 0,void 0,function*(){if(!n.dataTransfer||!e.hasModel())return;const r=e.getModel(),a=r.getVersionId(),l=yield this.extractDataTransferData(n);if(l.size===0||e.getModel().getVersionId()!==a)return;const c=new pd(e,1);try{const d=this._languageFeaturesService.documentOnDropEditProvider.ordered(r),h=yield this._progressService.withProgress({location:15,delay:750,title:p("dropProgressTitle","Running drop handlers..."),cancellable:!0},()=>Q1((()=>Vy(this,void 0,void 0,function*(){for(const g of d){const f=yield g.provideDocumentOnDropEdits(r,t,l,c.token);if(c.token.isCancellationRequested)return;if(f)return f}}))(),c.token),()=>{c.cancel()});if(c.token.isCancellationRequested||e.getModel().getVersionId()!==a)return;if(h){const g=typeof h.insertText=="string"?Zl.escape(h.insertText):h.insertText.snippet,f={edits:[new Na(r.uri,{range:new T(t.lineNumber,t.column,t.lineNumber,t.column),text:g,insertAsSnippet:!0}),...(s=(i=h.additionalEdit)===null||i===void 0?void 0:i.edits)!==null&&s!==void 0?s:[]]};e.focus(),yield this._bulkEditService.apply(f,{editor:e});return}}finally{c.dispose()}})}extractDataTransferData(e){return Vy(this,void 0,void 0,function*(){if(!e.dataTransfer)return new kR;const t=SA(e.dataTransfer);return Qhe(t,e),t})}},"DropIntoEditorController");J_.ID="editor.contrib.dropIntoEditorController";J_=uj([Eb(1,Xv),Eb(2,he),Eb(3,u2),Eb(4,_p)],J_);let TA=u(class{constructor(e){this._workspaceContextService=e}provideDocumentOnDropEdits(e,t,n,i){var s;return Vy(this,void 0,void 0,function*(){const r=n.get(rs.uriList);if(r){const l=yield r.asString(),c=this.getUriListInsertText(l);if(c)return{insertText:c}}const a=(s=n.get("text"))!==null&&s!==void 0?s:n.get(rs.text);if(a)return{insertText:yield a.asString()}})}getUriListInsertText(e){const t=[];for(const n of kT.parse(e))try{t.push(ve.parse(n))}catch{}if(t.length)return t.map(n=>{const i=this._workspaceContextService.getWorkspaceFolder(n);if(i){const s=Zie(i.uri,n);if(s)return s}return n.fsPath}).join(" ")}},"DefaultOnDropProvider");TA=uj([Eb(0,_p)],TA);ct(J_.ID,J_,2);class yi{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===yi._FIND_MATCH_DECORATION||i===yi._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,s=this._decorations.length;i<s;i++){const r=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(r)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,yi._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,yi._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const r=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);s=new T(s.startLineNumber,s.startColumn,r,a)}this._rangeHighlightDecorationId=i.addDecoration(s,yi._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=yi._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){i=yi._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let h=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let f=1,m=e.length;f<m;f++){const b=e[f].range;g+d>=b.startLineNumber?b.endLineNumber>g&&(g=b.endLineNumber):(s.push({range:new T(h,1,g,1),options:yi._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=b.startLineNumber,g=b.endLineNumber)}s.push({range:new T(h,1,g,1),options:yi._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,yi._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}u(yi,"FindDecorations");yi._CURRENT_FIND_MATCH_DECORATION=Pe.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:on(_N),position:Qs.Center},minimap:{color:on(ef),position:Xs.Inline}});yi._FIND_MATCH_DECORATION=Pe.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:on(_N),position:Qs.Center},minimap:{color:on(ef),position:Xs.Inline}});yi._FIND_MATCH_NO_OVERVIEW_DECORATION=Pe.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});yi._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Pe.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:on(_N),position:Qs.Center}});yi._RANGE_HIGHLIGHT_DECORATION=Pe.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});yi._FIND_SCOPE_DECORATION=Pe.register({description:"find-scope",className:"findScope",isWholeLine:!0});class hj{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let r=0;r<this._ranges.length;r++)n.push({range:this._ranges[r],text:this._replaceStrings[r]});n.sort((r,a)=>T.compareRangesUsingStarts(r.range,a.range));const i=[];let s=n[0];for(let r=1;r<n.length;r++)s.range.endLineNumber===n[r].range.startLineNumber&&s.range.endColumn===n[r].range.startColumn?(s.range=s.range.plusRange(n[r].range),s.text=s.text+n[r].text):(i.push(s),s=n[r]);i.push(s);for(const r of i)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}u(hj,"ReplaceAllCommand");function gj(o,e){if(o&&o[0]!==""){const t=Y4(o,e,"-"),n=Y4(o,e,"_");return t&&!n?X4(o,e,"-"):!t&&n?X4(o,e,"_"):o[0].toUpperCase()===o[0]?e.toUpperCase():o[0].toLowerCase()===o[0]?e.toLowerCase():ZZ(o[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):o[0][0].toUpperCase()!==o[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}u(gj,"buildReplaceStringWithCasePreserved");function Y4(o,e,t){return o[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&o[0].split(t).length===e.split(t).length}u(Y4,"validateSpecificSpecialCharacter");function X4(o,e,t){const n=e.split(t),i=o[0].split(t);let s="";return n.forEach((r,a)=>{s+=gj([i[a]],r)+t}),s.slice(0,-1)}u(X4,"buildReplaceStringForSpecificSpecialCharacter");class xA{constructor(e){this.staticValue=e,this.kind=0}}u(xA,"StaticValueReplacePattern");class fj{constructor(e){this.pieces=e,this.kind=1}}u(fj,"DynamicPiecesReplacePattern");class Nh{static fromStaticValue(e){return new Nh([nd.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new xA(""):e.length===1&&e[0].staticValue!==null?this._state=new xA(e[0].staticValue):this._state=new fj(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?gj(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,s=this._state.pieces.length;i<s;i++){const r=this._state.pieces[i];if(r.staticValue!==null){n+=r.staticValue;continue}let a=Nh._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let h=0,g=a.length;h<g;h++){if(d>=c){l.push(a.slice(h));break}switch(r.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}u(Nh,"ReplacePattern");class nd{static staticValue(e){return new nd(e,-1,null)}static caseOps(e,t){return new nd(null,e,t)}constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}}u(nd,"ReplacePiece");class pj{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=nd.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=nd.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=nd.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Nh(this._result)}}u(pj,"ReplacePieceBuilder");function ige(o){if(!o||o.length===0)return new Nh(null);const e=[],t=new pj(o);for(let n=0,i=o.length;n<i;n++){const s=o.charCodeAt(n);if(s===92){if(n++,n>=i)break;const r=o.charCodeAt(n);switch(r){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(r));break}continue}if(s===36){if(n++,n>=i)break;const r=o.charCodeAt(n);if(r===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(r===48||r===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(n+1<i){const l=o.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}u(ige,"parseReplaceString");const lc=new ue("findWidgetVisible",!1);lc.toNegated();const MT=new ue("findInputFocussed",!1),DR=new ue("replaceInputFocussed",!1),NC={primary:545,mac:{primary:2593}},RC={primary:565,mac:{primary:2613}},PC={primary:560,mac:{primary:2608}},FC={primary:554,mac:{primary:2602}},OC={primary:558,mac:{primary:2606}},At={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Uc=19999,sge=240;class Ff{constructor(e,t){this._toDispose=new X,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new io,this._decorations=new yi(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new yt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,mt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},sge)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new T(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const i=this._findMatches(n,!1,Uc);this._decorations.set(i,n);const s=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(s);if(r===0&&i.length>0){const a=$H(i.map(l=>l.range),l=>T.compareRangesUsingStarts(l,s)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(39).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===1?(n===1?n=s.getLineCount():n--,i=s.getLineMaxColumn(n)):i--,new W(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<Uc){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),i=Ff._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());const{lineNumber:s,column:r}=e,a=this._editor.getModel();let l=new W(s,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,!1)),!!c){if(!t&&!i.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,i=1):i++,new W(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Uc){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),r=Ff._getSearchRange(this._editor.getModel(),s);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new W(a,l),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,t)),h?!i&&!r.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?ige(this._state.replaceString):Nh.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const i=e.buildReplaceString(n.matches,this._state.preserveCase),s=new Qn(t,i);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new W(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(s=>Ff._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Uc?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Lc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),s=i.getValue(1),r=i.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(n,a.buildReplaceString(null,c));const d=new vS(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let r=0,a=n.length;r<a;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);const s=new hj(this._editor.getSelection(),n.map(r=>r.range),i);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(s=>new ge(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const i=this._editor.getSelection();for(let s=0,r=n.length;s<r;s++)if(n[s].equalsRange(i)){n=[i].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}u(Ff,"FindModelBoundToEditorModel");class _0 extends No{constructor(e,t,n){super(),this._hideSoon=this._register(new yt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const i={inputActiveOptionBorder:le(fN),inputActiveOptionForeground:le(mN),inputActiveOptionBackground:le(pN)};this.caseSensitive=this._register(new S2(Object.assign({appendTitle:this._keybindingLabelFor(At.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase},i))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new T2(Object.assign({appendTitle:this._keybindingLabelFor(At.ToggleWholeWordCommand),isChecked:this._state.wholeWord},i))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new x2(Object.assign({appendTitle:this._keybindingLabelFor(At.ToggleRegexCommand),isChecked:this._state.isRegex},i))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(s=>{let r=!1;s.isRegex&&(this.regex.checked=this._state.isRegex,r=!0),s.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,r=!0),s.matchCase&&(this.caseSensitive.checked=this._state.matchCase,r=!0),!this._state.isRevealed&&r&&this._revealTemporarily()})),this._register($(this._domNode,ae.MOUSE_LEAVE,s=>this._onMouseLeave())),this._register($(this._domNode,"mouseover",s=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return _0.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}u(_0,"FindOptionsWidget");_0.ID="editor.contrib.findOptionsWidget";function HC(o,e){return o===1?!0:o===2?!1:e}u(HC,"effectiveOptionValue");class mj extends z{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return HC(this._isRegexOverride,this._isRegex)}get wholeWord(){return HC(this._wholeWordOverride,this._wholeWord)}get matchCase(){return HC(this._matchCaseOverride,this._matchCase)}get preserveCase(){return HC(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new F),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,n){const i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,s=!0),typeof n<"u"&&(T.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;const s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(h=>{var g;return(g=this._searchScope)===null||g===void 0?void 0:g.some(f=>!T.equalsRange(f,h))})||(this._searchScope=e.searchScope,s.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,s.isRegex=!0),l!==this.wholeWord&&(r=!0,s.wholeWord=!0),c!==this.matchCase&&(r=!0,s.matchCase=!0),d!==this.preserveCase&&(r=!0,s.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Uc}}u(mj,"FindReplaceState");function Z4(o){var e,t;return((e=o.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=o.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}u(Z4,"showHistoryKeybindingHint");var oge=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const rge=bn("find-selection",re.selection,p("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),J4=bn("find-collapsed",re.chevronRight,p("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Q4=bn("find-expanded",re.chevronDown,p("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),age=bn("find-replace",re.replace,p("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),lge=bn("find-replace-all",re.replaceAll,p("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),cge=bn("find-previous-match",re.arrowUp,p("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),dge=bn("find-next-match",re.arrowDown,p("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),uge=p("label.find","Find"),hge=p("placeholder.find","Find"),gge=p("label.previousMatchButton","Previous Match"),fge=p("label.nextMatchButton","Next Match"),pge=p("label.toggleSelectionFind","Find in Selection"),mge=p("label.closeButton","Close"),bge=p("label.replace","Replace"),_ge=p("placeholder.replace","Replace"),vge=p("label.replaceButton","Replace"),Cge=p("label.replaceAllButton","Replace All"),yge=p("label.toggleReplaceButton","Toggle Replace"),wge=p("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Uc),Sge=p("label.matchesLocation","{0} of {1}"),eH=p("label.noResults","No results"),na=419,Tge=275,xge=Tge-54;let Bm=69;const Lge=33,tH="ctrlEnterReplaceAll.windows.donotask",nH=Ye?256:2048;class Wy{constructor(e){this.afterLineNumber=e,this.heightInPx=Lge,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}u(Wy,"FindWidgetViewZone");function iH(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){o.stopPropagation();return}}u(iH,"stopPropagationForMultiLineUpwards");function sH(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){o.stopPropagation();return}}u(sH,"stopPropagationForMultiLineDownwards");class v0 extends No{constructor(e,t,n,i,s,r,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=s,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(tH,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new tr(500),this._register(Oe(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(87)&&(this._codeEditor.getOption(87)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(139)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(39)){const h=this._codeEditor.getOption(39).loop;this._state.change({loop:h},!1);const g=this._codeEditor.getOption(39).addExtraSpaceOnTop;g&&!this._viewZone&&(this._viewZone=new Wy(0),this._showViewZone()),!g&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>oge(this,void 0,void 0,function*(){if(this._isVisible){const d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=MT.bindTo(r),this._findFocusTracker=this._register(Kl(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=DR.bindTo(r),this._replaceFocusTracker=this._register(Kl(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(39).addExtraSpaceOnTop&&(this._viewZone=new Wy(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return v0.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(87)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Vo(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,He)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Bm+"px",this._state.matchesCount>=Uc?this._matchesCount.title=wge:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Uc&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=mo(Sge,n,t)}else e=eH;this._matchesCount.appendChild(document.createTextNode(e)),ri(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Bm=Math.max(Bm,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===eH)return n===""?p("ariaSearchNoResultEmpty","{0} found",e):p("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=p("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${i}`:i}return p("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(87);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(39).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(39).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=Kn(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=i.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=i7(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(39).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(39).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Wy(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;const r=s-n.heightInPx;n.heightInPx=s,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(81).top,s<=0)return;n.heightInPx=s,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!aN(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let s=!1,r=!1,a=!1;if(this._resized&&Vo(this._domNode)>na){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=Vo(this._findInput.domNode);return}if(na+28+i>=n&&(r=!0),na+28+i-Bm>=n&&(a=!0),na+28+i-Bm>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Vo(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!T.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(nH|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iH(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return sH(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(nH|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{li&&Rr&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(p("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(tH,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iH(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return sH(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new cA(null,this._contextViewProvider,{width:xge,label:uge,placeholder:hge,appendCaseSensitiveLabel:this._keybindingLabelFor(At.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(At.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(At.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>Z4(this._keybindingService),inputBoxStyles:qw,toggleStyles:$w},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),bi&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new lu({label:gge+this._keybindingLabelFor(At.PreviousMatchFindAction),icon:cge,onTrigger:()=>{Kg(this._codeEditor.getAction(At.PreviousMatchFindAction)).run().then(void 0,He)}})),this._nextBtn=this._register(new lu({label:fge+this._keybindingLabelFor(At.NextMatchFindAction),icon:dge,onTrigger:()=>{Kg(this._codeEditor.getAction(At.NextMatchFindAction)).run().then(void 0,He)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new ig({icon:rge,title:pge+this._keybindingLabelFor(At.ToggleSearchScopeCommand),isChecked:!1,inputActiveOptionBackground:le(pN),inputActiveOptionBorder:le(fN),inputActiveOptionForeground:le(mN)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new lu({label:mge+this._keybindingLabelFor(At.CloseFindWidgetCommand),icon:UB,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new dA(null,void 0,{label:bge,placeholder:_ge,appendPreserveCaseLabel:this._keybindingLabelFor(At.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Z4(this._keybindingService),inputBoxStyles:qw,toggleStyles:$w},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new lu({label:vge+this._keybindingLabelFor(At.ReplaceOneAction),icon:age,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new lu({label:Cge+this._keybindingLabelFor(At.ReplaceAllAction),icon:lge,onTrigger:()=>{this._controller.replaceAll()}}));const s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const r=document.createElement("div");r.className="replace-actions",s.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new lu({label:yge,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Vo(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${na}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(s),this._resizeSash=new hi(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=na;this._register(this._resizeSash.onDidStart(()=>{a=Vo(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const c=a+l.startX-l.currentX;if(c<na)return;const d=parseFloat(lS(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Vo(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=Vo(this._domNode);if(l<na)return;let c=na;if(!this._resized||l===na){const d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Vo(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}u(v0,"FindWidget");v0.ID="editor.contrib.findWidget";class lu extends No{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+xe.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var i,s;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(s=(i=this._opts).onKeyDown)===null||s===void 0||s.call(i,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...xe.asClassNameArray(J4)),this._domNode.classList.add(...xe.asClassNameArray(Q4))):(this._domNode.classList.remove(...xe.asClassNameArray(Q4)),this._domNode.classList.add(...xe.asClassNameArray(J4)))}}u(lu,"SimpleButton");or((o,e)=>{const t=u((b,_)=>{_&&e.addRule(`.monaco-editor ${b} { background-color: ${_}; }`)},"addBackgroundColorRule");t(".findMatch",o.getColor(kl)),t(".currentFindMatch",o.getColor(Pte)),t(".findScope",o.getColor(Fte));const n=o.getColor(Vt);t(".find-widget",n);const i=o.getColor(wa);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const s=o.getColor(gN);s&&e.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${s}; border-right: 1px solid ${s}; border-bottom: 1px solid ${s}; }`);const r=o.getColor(Su);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Aa(o.type)?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const a=o.getColor(Ote);a&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${a}; padding: 1px; box-sizing: border-box; }`);const l=o.getColor(Hte);l&&e.addRule(`.monaco-editor .findScope { border: 1px ${Aa(o.type)?"dashed":"solid"} ${l}; }`);const c=o.getColor(Qe);c&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${c}; }`);const d=o.getColor(xa);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const h=o.getColor(ote);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const g=o.getColor(Lte);if(g)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`);else{const b=o.getColor(La);b&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${b}; }`)}const f=o.getColor(Mk);f&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${f} !important;
		}
	`);const m=o.getColor(Gs);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var bj=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},da=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Rh=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Ege=524288;function LA(o,e="single",t=!1){if(!o.hasModel())return null;const n=o.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=o.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(o.getModel().getValueLengthInRange(n)<Ege)return o.getModel().getValueInRange(n)}return null}u(LA,"getSelectionSearchString");let Yi=u(class _j extends z{get editor(){return this._editor}static get(e){return e.getContribution(_j.ID)}constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=lc.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new tr(500),this._state=this._register(new mj),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(39).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!MT.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Js(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return Rh(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const i=LA(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Js(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const i=LA(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Ff(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Rh(this,void 0,void 0,function*(){return this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},"CommonFindController");Yi.ID="editor.contrib.findController";Yi=bj([da(1,Me),da(2,ar),da(3,oc)],Yi);let EA=u(class extends Yi{constructor(e,t,n,i,s,r,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=s,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return Rh(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(39).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new v0(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new _0(this._editor,this._state,this._keybindingService))}},"FindController");EA=bj([da(1,rc),da(2,Me),da(3,jt),da(4,qn),da(5,Cn),da(6,ar),da(7,oc)],EA);const kge=u7(new dN({id:At.StartFindAction,label:p("startFindAction","Find"),alias:"Find",precondition:Z.or(D.focus,Z.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"3_find",title:p({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));kge.addImplementation(0,(o,e,t)=>{const n=Yi.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(39).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(39).loop}):!1});const Dge={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:p("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:p("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:p("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:p("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class vj extends de{constructor(){super({id:At.StartFindWithArgs,label:p("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Dge})}run(e,t,n){return Rh(this,void 0,void 0,function*(){const i=Yi.get(t);if(i){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(39).loop},s),i.setGlobalBufferTerm(i.getState().searchString)}})}}u(vj,"StartFindWithArgsAction");class Cj extends de{constructor(){super({id:At.StartFindWithSelection,label:p("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Rh(this,void 0,void 0,function*(){const n=Yi.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}u(Cj,"StartFindWithSelectionAction");class MR extends de{run(e,t){return Rh(this,void 0,void 0,function*(){const n=Yi.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop}),this._run(n))})}}u(MR,"MatchFindAction");class yj extends MR{constructor(){super({id:At.NextMatchFindAction,label:p("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:D.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Z.and(D.focus,MT),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}u(yj,"NextMatchFindAction");class wj extends MR{constructor(){super({id:At.PreviousMatchFindAction,label:p("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:D.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Z.and(D.focus,MT),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}u(wj,"PreviousMatchFindAction");class Sj extends de{constructor(){super({id:At.GoToMatchFindAction,label:p("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:lc}),this._highlightDecorations=[]}run(e,t,n){const i=Yi.get(t);if(!i)return;const r=e.get(Ja).createInputBox();r.placeholder=p("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",i.getState().matchesCount);const a=u(l=>{const c=parseInt(l);if(!isNaN(c)&&c>0&&c<=i.getState().matchesCount){r.validationMessage=void 0,i.goToMatch(c-1);const d=i.getState().currentMatch;d&&this.addDecorations(t,d)}else r.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount),this.clearDecorations(t)},"updatePickerAndEditor");r.onDidChangeValue(l=>{a(l)}),r.onDidAccept(()=>{const l=parseInt(r.value);!isNaN(l)&&l>0&&l<=i.getState().matchesCount?(i.goToMatch(l-1),r.hide()):r.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount)}),r.onDidHide(()=>{this.clearDecorations(t),r.dispose()}),r.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(n=>{this._highlightDecorations=n.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:on(c9),position:Qs.Full}}}])})}}u(Sj,"MoveToMatchFindAction");class AR extends de{run(e,t){return Rh(this,void 0,void 0,function*(){const n=Yi.get(t);if(!n)return;const i=LA(t,"single",!1);i&&n.setSearchString(i),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop}),this._run(n))})}}u(AR,"SelectionMatchFindAction");class Tj extends AR{constructor(){super({id:At.NextSelectionMatchFindAction,label:p("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}u(Tj,"NextSelectionMatchFindAction");class xj extends AR{constructor(){super({id:At.PreviousSelectionMatchFindAction,label:p("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}u(xj,"PreviousSelectionMatchFindAction");const Mge=u7(new dN({id:At.StartFindReplaceAction,label:p("startReplace","Replace"),alias:"Replace",precondition:Z.or(D.focus,Z.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"3_find",title:p({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Mge.addImplementation(0,(o,e,t)=>{if(!e.hasModel()||e.getOption(87))return!1;const n=Yi.get(e);if(!n)return!1;const i=e.getSelection(),s=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(39).seedSearchStringFromSelection!=="never"&&!s,a=s||r?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(39).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(39).loop})});ct(Yi.ID,EA,0);ee(vj);ee(Cj);ee(yj);ee(wj);ee(Sj);ee(Tj);ee(xj);const Jr=jn.bindToContribution(Yi.get);oe(new Jr({id:At.CloseFindWidgetCommand,precondition:lc,handler:o=>o.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:Z.and(D.focus,Z.not("isComposing")),primary:9,secondary:[1033]}}));oe(new Jr({id:At.ToggleCaseSensitiveCommand,precondition:void 0,handler:o=>o.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:NC.primary,mac:NC.mac,win:NC.win,linux:NC.linux}}));oe(new Jr({id:At.ToggleWholeWordCommand,precondition:void 0,handler:o=>o.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:RC.primary,mac:RC.mac,win:RC.win,linux:RC.linux}}));oe(new Jr({id:At.ToggleRegexCommand,precondition:void 0,handler:o=>o.toggleRegex(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:PC.primary,mac:PC.mac,win:PC.win,linux:PC.linux}}));oe(new Jr({id:At.ToggleSearchScopeCommand,precondition:void 0,handler:o=>o.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:FC.primary,mac:FC.mac,win:FC.win,linux:FC.linux}}));oe(new Jr({id:At.TogglePreserveCaseCommand,precondition:void 0,handler:o=>o.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:OC.primary,mac:OC.mac,win:OC.win,linux:OC.linux}}));oe(new Jr({id:At.ReplaceOneAction,precondition:lc,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:3094}}));oe(new Jr({id:At.ReplaceOneAction,precondition:lc,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:Z.and(D.focus,DR),primary:3}}));oe(new Jr({id:At.ReplaceAllAction,precondition:lc,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:2563}}));oe(new Jr({id:At.ReplaceAllAction,precondition:lc,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:Z.and(D.focus,DR),primary:void 0,mac:{primary:2051}}}));oe(new Jr({id:At.SelectAllMatchesAction,precondition:lc,handler:o=>o.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:D.focus,primary:515}}));const Age={[0]:" ",[1]:"u",[2]:"r"},oH=65535,_r=16777215,rH=4278190080;class By{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,i=e%32,s=this._states[n];t?this._states[n]=s|1<<i:this._states[n]=s&~(1<<i)}}u(By,"BitField");class _s{constructor(e,t,n){if(e.length!==t.length||e.length>oH)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new By(e.length),this._userDefinedStates=new By(e.length),this._recoveredStates=new By(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=u((n,i)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){const s=this._startIndexes[n],r=this._endIndexes[n];if(s>_r||r>_r)throw new Error("startLineNumber or endLineNumber must not exceed "+_r);for(;e.length>0&&!t(s,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&_r}getEndLineNumber(e){return this._endIndexes[e]&_r}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new Lj(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&rH)>>>24)+((this._endIndexes[e]&rH)>>>16);return t===oH?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${Age[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&_r,endLineNumber:this._endIndexes[e]&_r,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let s=[],r=!1;for(let l=0;l<t;l++){const c=e[l];n[l]=c.startLineNumber,i[l]=c.endLineNumber,s.push(c.type),c.type&&(r=!0)}r||(s=void 0);const a=new _s(n,i,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;const i=u((b,_)=>Array.isArray(b)?C=>C<_?b[C]:void 0:C=>C<_?b.toFoldRange(C):void 0,"getIndexedFunction"),s=i(e,e.length),r=i(t,t.length);let a=0,l=0,c=s(0),d=r(0);const h=[];let g,f=0;const m=[];for(;c||d;){let b;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?b=d:(b=c,b.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,b.source=0),c=s(++a)):(b=d,d.isCollapsed&&d.source===0&&(b.source=2)),d=r(++l);else{let _=l,C=d;for(;;){if(!C||C.startLineNumber>c.endLineNumber){b=c;break}if(C.source===1&&C.endLineNumber>c.endLineNumber)break;C=r(++_)}c=s(++a)}if(b){for(;g&&g.endLineNumber<b.startLineNumber;)g=h.pop();b.endLineNumber>b.startLineNumber&&b.startLineNumber>f&&b.endLineNumber<=n&&(!g||g.endLineNumber>=b.endLineNumber)&&(m.push(b),f=b.startLineNumber,g&&h.push(g),g=b)}}return m}}u(_s,"FoldingRegions");class Lj{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}u(Lj,"FoldingRegion");class Ej{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new F,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new _s(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,s=-1,r=-1;const a=u(l=>{for(;i<l;){const c=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);if(c<=s){const h=this.regions.getSource(i)!==0;n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,c<=r,h))}d&&c>r&&(r=c),i++}},"updateDecorationsUntil");for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const h=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,h),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=u(i=>{for(const s of e)if(!(s.startLineNumber>i.endLineNumber||i.startLineNumber>s.endLineNumber))return!0;return!1},"intersects");for(let i=0;i<this._regions.length;i++){const s=this._regions.toFoldRange(i);(s.source===0||!n(s))&&t.push(s)}this.updatePost(_s.fromFoldRanges(t))}update(e,t=[]){const n=this._currentFoldedOrManualRanges(t),i=_s.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(_s.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,s=e.length;i<s;i++){const r=e.getStartLineNumber(i),a=e.getEndLineNumber(i),l=e.isCollapsed(i),c=e.getSource(i)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(i=>this._editorDecorationIds=i.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=u((i,s)=>{for(const r of e)if(i<r&&r<=s)return!0;return!1},"isBlocked"),n=[];for(let i=0,s=this._regions.length;i<s;i++){let r=this.regions.isCollapsed(i);const a=this.regions.getSource(i);if(r||a!==0){const l=this._regions.toFoldRange(i),c=this._textModel.getDecorationRange(this._editorDecorationIds[i]);c&&(r&&t(c.startLineNumber,c.endLineNumber)&&(r=!1),n.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:r,source:a}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>n)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const i=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&i.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}const r=_s.sanitizeAndMerge(this._regions,i,s);this.updatePost(_s.fromFoldRanges(r))}_getLinesChecksum(e,t){return l3(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){const r=this._regions.toRegion(i);(!t||t(r,s))&&n.push(r),s++,i=r.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=i,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&n.push(c)}else break}}else for(let r=i,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<s)(!t||t(l))&&n.push(l);else break}return n}}u(Ej,"FoldingModel");function Ige(o,e,t){const n=[];for(const i of t){const s=o.getRegionAtLine(i);if(s){const r=!s.isCollapsed;if(n.push(s),e>1){const a=o.getRegionsInside(s,(l,c)=>l.isCollapsed!==r&&c<e);n.push(...a)}}}o.toggleCollapseState(n)}u(Ige,"toggleCollapseState");function mm(o,e,t=Number.MAX_VALUE,n){const i=[];if(n&&n.length>0)for(const s of n){const r=o.getRegionAtLine(s);if(r&&(r.isCollapsed!==e&&i.push(r),t>1)){const a=o.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);i.push(...a)}}else{const s=o.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);i.push(...s)}o.toggleCollapseState(i)}u(mm,"setCollapseStateLevelsDown");function kj(o,e,t,n){const i=[];for(const s of n){const r=o.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...r)}o.toggleCollapseState(i)}u(kj,"setCollapseStateLevelsUp");function Nge(o,e,t){const n=[];for(const i of t){const s=o.getAllRegionsAtLine(i,r=>r.isCollapsed!==e);s.length>0&&n.push(s[0])}o.toggleCollapseState(n)}u(Nge,"setCollapseStateUp");function Rge(o,e,t,n){const i=u((r,a)=>a===e&&r.isCollapsed!==t&&!n.some(l=>r.containsLine(l)),"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(Rge,"setCollapseStateAtLevel");function Dj(o,e,t){const n=[];for(const r of t){const a=o.getAllRegionsAtLine(r,void 0);a.length>0&&n.push(a[0])}const i=u(r=>n.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(Dj,"setCollapseStateForRest");function IR(o,e,t){const n=o.textModel,i=o.regions,s=[];for(let r=i.length-1;r>=0;r--)if(t!==i.isCollapsed(r)){const a=i.getStartLineNumber(r);e.test(n.getLineContent(a))&&s.push(i.toRegion(r))}o.toggleCollapseState(s)}u(IR,"setCollapseStateForMatchingLines");function NR(o,e,t){const n=o.regions,i=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&i.push(n.toRegion(s));o.toggleCollapseState(i)}u(NR,"setCollapseStateForType");function Pge(o,e){let t=null;const n=e.getRegionAtLine(o);if(n!==null&&(t=n.startLineNumber,o===t)){const i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}u(Pge,"getParentFoldLine");function Fge(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){if(o!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<o)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}u(Fge,"getPreviousFoldLine");function Oge(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){const n=t.parentIndex;let i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>o)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}u(Oge,"getNextFoldLine");class Mj{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new F,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||ud(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,s=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);s<=l&&c<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===c?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new T(l,1,c,1))),s=l,r=c)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return aH(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const s=u(r=>((!i||!Hge(r,i))&&(i=aH(this._hiddenRanges,r)),i?i.startLineNumber-1:null),"adjustLine");for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);const d=s(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}u(Mj,"HiddenRangeModel");function Hge(o,e){return o>=e.startLineNumber&&o<=e.endLineNumber}u(Hge,"isInside");function aH(o,e){const t=$H(o,n=>e<n.startLineNumber)-1;return t>=0&&o[t].endLineNumber>=e?o[t]:null}u(aH,"findRange");const Vge=5e3,Wge="indent";class AT{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id=Wge}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(Gge(this.editorModel,n,i,this.foldingRangesLimit))}}u(AT,"IndentRangeProvider");let Bge=u(class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>_r||t>_r)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)n[r]=this._startIndexes[s],i[r]=this._endIndexes[s];return new _s(n,i)}else{this._foldingRangesLimit.update(this._length,t);let n=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+n>t){i=l;break}n+=c}}const s=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],h=e.getLineContent(d),g=wS(h,s);(g<i||g===i&&n++<t)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new _s(r,a)}}},"RangesCollector");const Uge={limit:Vge,update:()=>{}};function Gge(o,e,t,n=Uge){const i=o.getOptions().tabSize,s=new Bge(n);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=o.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=o.getLineCount();c>0;c--){const d=o.getLineContent(c),h=wS(d,i);let g=a[a.length-1];if(h===-1){e&&(g.endAbove=c);continue}let f;if(r&&(f=d.match(r)))if(f[1]){let m=a.length-1;for(;m>0&&a[m].indent!==-2;)m--;if(m>0){a.length=m+1,g=a[m],s.insertFirst(c,g.line,h),g.line=c,g.indent=h,g.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(g.indent>h){do a.pop(),g=a[a.length-1];while(g.indent>h);const m=g.endAbove-1;m-c>=1&&s.insertFirst(c,m,h)}g.indent===h?g.endAbove=c:a.push({indent:h,endAbove:c,line:c})}return s.toIndentRanges(o)}u(Gge,"computeRanges");const zge=N("editor.foldBackground",{light:_e(Rc,.3),dark:_e(Rc,.3),hcDark:null,hcLight:null},p("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);N("editorGutter.foldingControlForeground",{dark:Q0,light:Q0,hcDark:Q0,hcLight:Q0},p("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const RR=bn("folding-expanded",re.chevronDown,p("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),PR=bn("folding-collapsed",re.chevronRight,p("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Aj=bn("folding-manual-collapsed",PR,p("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Ij=bn("folding-manual-expanded",RR,p("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),FR={color:on(zge),position:Xs.Inline};class hn{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t?hn.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?hn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:hn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:hn.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?n?this.showFoldingHighlights?hn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:hn.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?hn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:hn.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?hn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:hn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?hn.MANUALLY_EXPANDED_VISUAL_DECORATION:hn.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}u(hn,"FoldingDecorationProvider");hn.COLLAPSED_VISUAL_DECORATION=Pe.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(PR)});hn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Pe.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:FR,isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(PR)});hn.MANUALLY_COLLAPSED_VISUAL_DECORATION=Pe.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(Aj)});hn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Pe.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:FR,isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(Aj)});hn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Pe.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0});hn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Pe.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:FR,isWholeLine:!0});hn.EXPANDED_VISUAL_DECORATION=Pe.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+xe.asClassName(RR)});hn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Pe.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(RR)});hn.MANUALLY_EXPANDED_VISUAL_DECORATION=Pe.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+xe.asClassName(Ij)});hn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Pe.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:xe.asClassName(Ij)});hn.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Pe.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});hn.HIDDEN_RANGE_DECORATION=Pe.register({description:"folding-hidden-range-decoration",stickiness:1});const Kge={},jge="syntax";class IT{constructor(e,t,n,i,s){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=i,this.fallbackRangeProvider=s,this.id=jge,this.disposables=new X,s&&this.disposables.add(s);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(n))}compute(e){return $ge(this.providers,this.editorModel,e).then(t=>{var n,i;return t?qge(t,this.foldingRangesLimit):(i=(n=this.fallbackRangeProvider)===null||n===void 0?void 0:n.compute(e))!==null&&i!==void 0?i:null})}dispose(){this.disposables.dispose()}}u(IT,"SyntaxRangeProvider");function $ge(o,e,t){let n=null;const i=o.map((s,r)=>Promise.resolve(s.provideFoldingRanges(e,Kge,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},$n));return Promise.all(i).then(s=>n)}u($ge,"collectSyntaxRanges");class Nj{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>_r||t>_r)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new _s(t,n,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){n=a;break}t+=l}}const i=new Uint32Array(e),s=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<n||c===n&&t++<e)&&(i[l]=this._startIndexes[a],s[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new _s(i,s,r)}}}u(Nj,"RangesCollector");function qge(o,e){const t=o.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),n=new Nj(e);let i;const s=[];for(const r of t)if(!i)i=r,n.add(r.start,r.end,r.kind&&r.kind.value,s.length);else if(r.start>i.start)if(r.end<=i.end)s.push(i),i=r,n.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>i.end){do i=s.pop();while(i&&r.start>i.end);i&&s.push(i),i=r}n.add(r.start,r.end,r.kind&&r.kind.value,s.length)}return n.toIndentRanges()}u(qge,"sanitizeRanges");var Yge=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Um=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Xge=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Di=new ue("foldingEnabled",!1);let Ql=u(class kb extends z{static get(e){return e.getContribution(kb.ID)}static getFoldingRangeProviders(e,t){var n,i;const s=e.foldingRangeProvider.ordered(t);return(i=(n=kb._foldingRangeSelector)===null||n===void 0?void 0:n.call(kb,s,t))!==null&&i!==void 0?i:s}constructor(e,t,n,i,s,r){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=r,this.localToDispose=this._register(new X),this.editor=e,this._foldingLimitReporter=new OR(e);const a=this.editor.getOptions();this._isEnabled=a.get(41),this._useFoldingProviders=a.get(42)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(46),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(44),this.updateDebounceInfo=s.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new hn(e),this.foldingDecorationProvider.showFoldingControls=a.get(105),this.foldingDecorationProvider.showFoldingHighlights=a.get(43),this.foldingEnabled=Di.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(41)&&(this._isEnabled=this.editor.getOptions().get(41),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(45)&&this.onModelChanged(),l.hasChanged(105)||l.hasChanged(43)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(105),this.foldingDecorationProvider.showFoldingHighlights=c.get(43),this.triggerFoldingModelChanged()}l.hasChanged(42)&&(this._useFoldingProviders=this.editor.getOptions().get(42)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(46)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(46)),l.hasChanged(44)&&(this._foldingImportsByDefault=this.editor.getOptions().get(44))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new Ej(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new Mj(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new tr(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new yt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,n;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(n=this.rangeProvider)===null||n===void 0||n.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new AT(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const n=kb.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new IT(e,n,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new ji(!0),n=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=On(s=>n.compute(s));return i.then(s=>{if(s&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=s.setCollapsedAllOfType(Ni.Imports.value,!0);d&&(r=zr.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(s,l),r?.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(He(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const i=[];for(const s of n){const r=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&i.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,He)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,s=e.target.element.offsetLeft;if(i.offsetX-s<5)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(i){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(n))return}const r=t.getRegionAtLine(n);if(r&&r.startLineNumber===n){const a=r.isCollapsed;if(i||a){const l=e.event.altKey;let c=[];if(l){const d=u(g=>!g.containedBy(r)&&!r.containedBy(g),"filter"),h=t.getRegionsInside(null,d);for(const g of h)g.isCollapsed&&c.push(g);c.length===0&&(c=h)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const h of t.getRegionsInside(r))h.isCollapsed===a&&c.push(h);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},"FoldingController");Ql.ID="editor.contrib.folding";Ql=Yge([Um(1,Me),Um(2,zt),Um(3,Cn),Um(4,Po),Um(5,he)],Ql);class OR{constructor(e){this.editor=e,this._onDidChange=new F,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(45)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}u(OR,"RangesLimitReporter");class Mi extends de{runEditorCommand(e,t,n){const i=e.get(zt),s=Ql.get(t);if(!s)return;const r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(s,a,t,n,i);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}u(Mi,"FoldingAction");function Rj(o){if(!ws(o)){if(!as(o))return!1;const e=o;if(!ws(e.levels)&&!sd(e.levels)||!ws(e.direction)&&!Ki(e.direction)||!ws(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(sd)))return!1}return!0}u(Rj,"foldingArgumentsConstraint");class Pj extends Mi{constructor(){super({id:"editor.unfold",label:p("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Rj,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&i.direction==="up"?kj(t,!1,s,r):mm(t,!1,s,r)}}u(Pj,"UnfoldAction");class Fj extends Mi{constructor(){super({id:"editor.unfoldRecursively",label:p("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2137),weight:100}})}invoke(e,t,n,i){mm(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}u(Fj,"UnFoldRecursivelyAction");class Oj extends Mi{constructor(){super({id:"editor.fold",label:p("foldAction.label","Fold"),alias:"Fold",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Rj,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=this.getLineNumbers(i,n),r=i&&i.levels,a=i&&i.direction;typeof r!="number"&&typeof a!="string"?Nge(t,!0,s):a==="up"?kj(t,!0,r||1,s):mm(t,!0,r||1,s)}}u(Oj,"FoldAction");class Hj extends Mi{constructor(){super({id:"editor.toggleFold",label:p("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);Ige(t,1,i)}}u(Hj,"ToggleFoldAction");class Vj extends Mi{constructor(){super({id:"editor.foldRecursively",label:p("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2135),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);mm(t,!0,Number.MAX_VALUE,i)}}u(Vj,"FoldRecursivelyAction");class Wj extends Mi{constructor(){super({id:"editor.foldAllBlockComments",label:p("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2133),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())NR(t,Ni.Comment.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Js(a.blockCommentStartToken));IR(t,l,!0)}}}}u(Wj,"FoldAllBlockCommentsAction");class Bj extends Mi{constructor(){super({id:"editor.foldAllMarkerRegions",label:p("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2077),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())NR(t,Ni.Region.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);IR(t,l,!0)}}}}u(Bj,"FoldAllRegionsAction");class Uj extends Mi{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:p("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2078),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())NR(t,Ni.Region.value,!1);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);IR(t,l,!1)}}}}u(Uj,"UnfoldAllRegionsAction");class Gj extends Mi{constructor(){super({id:"editor.foldAllExcept",label:p("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2131),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);Dj(t,!0,i)}}u(Gj,"FoldAllRegionsExceptAction");class zj extends Mi{constructor(){super({id:"editor.unfoldAllExcept",label:p("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2129),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);Dj(t,!1,i)}}u(zj,"UnfoldAllRegionsExceptAction");class Kj extends Mi{constructor(){super({id:"editor.foldAll",label:p("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2069),weight:100}})}invoke(e,t,n){mm(t,!0)}}u(Kj,"FoldAllAction");class jj extends Mi{constructor(){super({id:"editor.unfoldAll",label:p("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2088),weight:100}})}invoke(e,t,n){mm(t,!1)}}u(jj,"UnfoldAllAction");class yd extends Mi{getFoldingLevel(){return parseInt(this.id.substr(yd.ID_PREFIX.length))}invoke(e,t,n){Rge(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}u(yd,"FoldLevelAction");yd.ID_PREFIX="editor.foldLevel";yd.ID=o=>yd.ID_PREFIX+o;class $j extends Mi{constructor(){super({id:"editor.gotoParentFold",label:p("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=Pge(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u($j,"GotoParentFoldAction");class qj extends Mi{constructor(){super({id:"editor.gotoPreviousFold",label:p("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=Fge(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u(qj,"GotoPreviousFoldAction");class Yj extends Mi{constructor(){super({id:"editor.gotoNextFold",label:p("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=Oge(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}u(Yj,"GotoNextFoldAction");class Xj extends Mi{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:p("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2130),weight:100}})}invoke(e,t,n){var i;const s=[],r=n.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=_s.sanitizeAndMerge(t.regions,s,(i=n.getModel())===null||i===void 0?void 0:i.getLineCount());t.updatePost(_s.fromFoldRanges(a))}}}}u(Xj,"FoldRangeFromSelectionAction");class Zj extends Mi{constructor(){super({id:"editor.removeManualFoldingRanges",label:p("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2132),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const s=[];for(const r of i){const{startLineNumber:a,endLineNumber:l}=r;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}u(Zj,"RemoveFoldRangeFromSelectionAction");ct(Ql.ID,Ql,0);ee(Pj);ee(Fj);ee(Oj);ee(Vj);ee(Kj);ee(jj);ee(Wj);ee(Bj);ee(Uj);ee(Gj);ee(zj);ee(Hj);ee($j);ee(qj);ee(Yj);ee(Xj);ee(Zj);for(let o=1;o<=7;o++)jee(new yd({id:yd.ID(o),label:p("foldLevelAction.label","Fold Level {0}",o),alias:`Fold Level ${o}`,precondition:Di,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2048|21+o),weight:100}}));ot.registerCommand("_executeFoldingRangeProvider",function(o,...e){return Xge(this,void 0,void 0,function*(){const[t]=e;if(!(t instanceof ve))throw Ys();const n=o.get(he),i=o.get(en).getModel(t);if(!i)throw Ys();const s=o.get(lt);if(!s.getValue("editor.folding",{resource:t}))return[];const r=o.get(zt),a=s.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return s.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,m)=>{}},c=new AT(i,r,l);let d=c;if(a!=="indentation"){const f=Ql.getFoldingRangeProviders(n,i);f.length&&(d=new IT(i,f,()=>{},l,c))}const h=yield d.compute(Ze.None),g=[];try{if(h)for(let f=0;f<h.length;f++){const m=h.getType(f);g.push({start:h.getStartLineNumber(f),end:h.getEndLineNumber(f),kind:m?Ni.fromValue(m):void 0})}return g}finally{d.dispose()}})});class Jj extends de{constructor(){super({id:"editor.action.fontZoomIn",label:p("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){fo.setZoomLevel(fo.getZoomLevel()+1)}}u(Jj,"EditorFontZoomIn");class Qj extends de{constructor(){super({id:"editor.action.fontZoomOut",label:p("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){fo.setZoomLevel(fo.getZoomLevel()-1)}}u(Qj,"EditorFontZoomOut");class e$ extends de{constructor(){super({id:"editor.action.fontZoomReset",label:p("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){fo.setZoomLevel(0)}}u(e$,"EditorFontZoomReset");ee(Jj);ee(Qj);ee(e$);var t$=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},C1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},HR=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Q_=u(class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new X,this._sessionDisposables=new X,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(54)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(54)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new h_;for(const i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{const s=i.charCodeAt(i.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new ci,s=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){i.cancel(),s.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),s.dispose();return}});mG(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(r=>{i.token.isCancellationRequested||Ei(r)&&(Sh.execute(this._editor,r,!0),J2(r))}).finally(()=>{s.dispose()})}},"FormatOnType");Q_.ID="editor.contrib.autoFormat";Q_=t$([C1(1,he),C1(2,rr)],Q_);let ev=u(class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new X,this._callOnModel=new X,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(53)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(pG,this.editor,e,2,Nd.None,Ze.None).catch(He))}},"FormatOnPaste");ev.ID="editor.contrib.formatOnPaste";ev=t$([C1(1,he),C1(2,Re)],ev);class n$ extends de{constructor(){super({id:"editor.action.formatDocument",label:p("formatDocument.label","Format Document"),alias:"Format Document",precondition:Z.and(D.notInCompositeEditor,D.writable,D.hasDocumentFormattingProvider),kbOpts:{kbExpr:D.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return HR(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Re);yield e.get(Rd).showWhile(n.invokeFunction(fde,t,1,Nd.None,Ze.None),250)}})}}u(n$,"FormatDocumentAction");class i$ extends de{constructor(){super({id:"editor.action.formatSelection",label:p("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:Z.and(D.writable,D.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2084),weight:100},contextMenuOpts:{when:D.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return HR(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Re),i=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new T(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Rd).showWhile(n.invokeFunction(pG,t,s,1,Nd.None,Ze.None),250)})}}u(i$,"FormatSelectionAction");ct(Q_.ID,Q_,2);ct(ev.ID,ev,2);ee(n$);ee(i$);ot.registerCommand("editor.action.format",o=>HR(void 0,void 0,void 0,function*(){const e=o.get(gt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=o.get(dn);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var Zge=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},kL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Jge=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Au{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}}u(Au,"TreeElement");class y1 extends Au{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}u(y1,"OutlineElement");class VR extends Au{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}u(VR,"OutlineGroup");class fa extends Au{static create(e,t,n){const i=new ci(n),s=new fa(t.uri),r=e.ordered(t),a=r.map((c,d)=>{var h;const g=Au.findId(`provider_${d}`,s),f=new VR(g,s,(h=c.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,i.token)).then(m=>{for(const b of m||[])fa._makeOutlineElement(b,f);return f},m=>($n(m),f)).then(m=>{Au.empty(m)?m.remove():s._groups.set(g,m)})}),l=e.onDidChange(()=>{const c=e.ordered(t);pi(c,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?fa.create(e,t,n):s._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const n=Au.findId(e,t),i=new y1(n,t,e);if(e.children)for(const s of e.children)fa._makeOutlineElement(s,i);t.children.set(i.id,i)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=st.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof y1?e.push(t.symbol):e.push(...st.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>T.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return fa._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>W.compare(T.getStartPosition(n.range),T.getStartPosition(i.range))||W.compare(T.getEndPosition(i.range),T.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&fa._flattenDocumentSymbols(e,i.children,i.name)}}u(fa,"OutlineModel");const NT=nt("IOutlineModelService");let kA=u(class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new X,this._cache=new ic(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return Jge(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!pi(s.provider,i)){const a=new ci;s={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:fa.create(n,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return yield s.promise}finally{r.dispose()}})}},"OutlineModelService");kA=Zge([kL(0,he),kL(1,Po),kL(2,en)],kA);at(NT,kA,1);var Qge=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};ot.registerCommand("_executeDocumentSymbolProvider",function(o,...e){return Qge(this,void 0,void 0,function*(){const[t]=e;Ct(ve.isUri(t));const n=o.get(NT),s=yield o.get(gs).createModelReference(t);try{return(yield n.getOrCreate(s.object.textEditorModel,Ze.None)).getTopLevelSymbols()}finally{s.dispose()}})});function efe(o,e){const t=new RN,n=new FN(t,c=>e.getLanguageConfiguration(c)),i=new PN(new s$([o]),n),s=jk(i,[],void 0,!0);let r="";const a=o.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Zt(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Zt(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Zt(d,c.closingBracket.length);else{const g=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=g}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,Zt(d,c.length));else if(c.kind===4)for(const h of c.children)l(h,d),d=Zt(d,h.length)}}return u(l,"processNode"),l(s,zi),r}u(efe,"fixBracketsInLine");class s${constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}u(s$,"StaticTokenizerSource");function tfe(o,e){return{object:o,dispose:()=>e?.dispose()}}u(tfe,"createDisposableRef");function nfe(o,e){const t=new o$(o),n=e.map(i=>{const s=T.lift(i.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:i.text}});n.sort((i,s)=>s.startOffset-i.startOffset);for(const i of n)o=o.substring(0,i.startOffset)+i.text+o.substring(i.endOffset);return o}u(nfe,"applyEdits");class o${constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}u(o$,"PositionOffsetTransformer");const ife=[];function sfe(){return ife}u(sfe,"getReadonlyEmptyArray");class WR{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return nfe(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}}u(WR,"GhostText");class w1{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}u(w1,"GhostTextPart");class BR{constructor(e,t,n,i,s=0){this.lineNumber=e,this.columnStart=t,this.length=n,this.newLines=i,this.additionalReservedLineCount=s,this.parts=[new w1(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}}u(BR,"GhostTextReplacement");class UR extends z{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(113)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}u(UR,"BaseGhostTextWidgetModel");function S1(o,e){if(!e)return e;const t=o.getValueInRange(e.range),n=oh(t,e.insertText),i=o.getOffsetAt(e.range.getStartPosition())+n,s=o.getPositionAt(i),r=t.substr(n),a=c_(r,e.insertText),l=o.getPositionAt(Math.max(i,o.getOffsetAt(e.range.getEndPosition())-a));return{range:T.fromPositions(s,l),insertText:e.insertText.substr(n,e.insertText.length-n-a),snippetInfo:e.snippetInfo,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}u(S1,"minimizeInlineCompletion");function ofe(o,e){return o===e?!0:!o||!e?!1:o.range.equalsRange(e.range)&&o.insertText===e.insertText&&o.command===e.command}u(ofe,"normalizedInlineCompletionsEquals");function r$(o,e,t,n,i=0){if(o.range.startLineNumber!==o.range.endLineNumber)return;const s=e.getLineContent(o.range.startLineNumber),r=xt(s).length;if(o.range.startColumn-1<=r){const f=xt(o.insertText).length,m=s.substring(o.range.startColumn-1,r),b=T.fromPositions(o.range.getStartPosition().delta(0,m.length),o.range.getEndPosition()),_=o.insertText.startsWith(m)?o.insertText.substring(m.length):o.insertText.substring(f);o={range:b,insertText:_,command:o.command,snippetInfo:void 0,filterText:o.filterText,additionalTextEdits:o.additionalTextEdits}}const l=e.getValueInRange(o.range),c=rfe(l,o.insertText);if(!c)return;const d=o.range.startLineNumber,h=new Array;if(t==="prefix"){const f=c.filter(m=>m.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const g=o.insertText.length-i;for(const f of c){const m=o.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===o.range.startLineNumber&&m<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const b=f.modifiedStart+f.modifiedLength,_=Math.max(f.modifiedStart,Math.min(b,g)),C=o.insertText.substring(f.modifiedStart,_),v=o.insertText.substring(_,Math.max(f.modifiedStart,b));if(C.length>0){const y=Va(C);h.push(new w1(m,y,!1))}if(v.length>0){const y=Va(v);h.push(new w1(m,y,!0))}}return new WR(d,h,0)}u(r$,"inlineCompletionToGhostText");let ia;function rfe(o,e){if(ia?.originalValue===o&&ia?.newValue===e)return ia?.changes;{let t=cH(o,e,!0);if(t){const n=lH(t);if(n>0){const i=cH(o,e,!1);i&&lH(i)<n&&(t=i)}}return ia={originalValue:o,newValue:e,changes:t},t}}u(rfe,"cachingDiff");function lH(o){let e=0;for(const t of o)e+=t.originalLength;return e}u(lH,"deletedCharacters");function cH(o,e,t){if(o.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let h=0,g=c.length;h<g;h++){const f=c.charCodeAt(h);f>d&&(d=f)}return d}u(n,"getMaxCharCode");const i=Math.max(n(o),n(e));function s(c){if(c<0)throw new Error("unexpected");return i+c+1}u(s,"getUniqueCharCode");function r(c){let d=0,h=0;const g=new Int32Array(c.length);for(let f=0,m=c.length;f<m;f++)if(t&&c[f]==="("){const b=h*100+d;g[f]=s(2*b),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const b=h*100+d;g[f]=s(2*b+1),d===0&&h++}else g[f]=c.charCodeAt(f);return g}u(r,"getElements");const a=r(o),l=r(e);return new Sr({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}u(cH,"smartDiff");function dH(o,e=li){return jie(o,e)?o.charAt(0).toUpperCase()+o.slice(1):o}u(dH,"normalizeDriveLetter");var afe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class DA{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}}u(DA,"CompositeSnippetVariableResolver");class MA{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,i=s.multiline)}if(n&&i&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),r=xt(s,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof Ii&&(a=xt(Va(c.value).pop())),!0));const l=oh(a,r);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}u(MA,"SelectionBasedVariableResolver");class AA{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Kc(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Kc(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return Y5(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(DS(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}u(AA,"ModelBasedVariableResolver");class IA{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!oV(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}u(IA,"ClipboardBasedVariableResolver");let T1=u(class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}},"CommentBasedVariableResolver");T1=afe([lfe(2,zt)],T1);class Xo{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Xo.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Xo.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Xo.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Xo.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}u(Xo,"TimeBasedVariableResolver");Xo.dayNames=[p("Sunday","Sunday"),p("Monday","Monday"),p("Tuesday","Tuesday"),p("Wednesday","Wednesday"),p("Thursday","Thursday"),p("Friday","Friday"),p("Saturday","Saturday")];Xo.dayNamesShort=[p("SundayShort","Sun"),p("MondayShort","Mon"),p("TuesdayShort","Tue"),p("WednesdayShort","Wed"),p("ThursdayShort","Thu"),p("FridayShort","Fri"),p("SaturdayShort","Sat")];Xo.monthNames=[p("January","January"),p("February","February"),p("March","March"),p("April","April"),p("May","May"),p("June","June"),p("July","July"),p("August","August"),p("September","September"),p("October","October"),p("November","November"),p("December","December")];Xo.monthNamesShort=[p("JanuaryShort","Jan"),p("FebruaryShort","Feb"),p("MarchShort","Mar"),p("AprilShort","Apr"),p("MayShort","May"),p("JuneShort","Jun"),p("JulyShort","Jul"),p("AugustShort","Aug"),p("SeptemberShort","Sep"),p("OctoberShort","Oct"),p("NovemberShort","Nov"),p("DecemberShort","Dec")];class NA{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=Qre(this._workspaceService.getWorkspace());if(!Xre(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(HD(e))return Kc(e.uri.path);let t=Kc(e.configPath.path);return t.endsWith(VD)&&(t=t.substr(0,t.length-VD.length-1)),t}_resoveWorkspacePath(e){if(HD(e))return dH(e.uri.fsPath);const t=Kc(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?dH(n):"/"}}u(NA,"WorkspaceBasedVariableResolver");class RA{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return b0()}}u(RA,"RandomBasedVariableResolver");var cfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class Os{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=CP(t.placeholders,Vs.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),s=this._snippet.fullLen(n),r=T.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+s)),a=n.isFinalTabstop?Os._decor.inactiveFinal:Os._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const i=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const r=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);i.push(Ht.replace(a,c.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const s=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new ge(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?Os._decor.activeFinal:Os._decor.active),s.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(d);i.changeDecorationOptions(h,d.isFinalTabstop?Os._decor.activeFinal:Os._decor.active),s.add(d)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?Os._decor.inactiveFinal:Os._decor.inactive);return r});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Vs){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const s=this._placeholderDecorations.get(i),r=this._editor.getModel().getDecorationRange(s);if(!r){e.delete(i.index);break}n.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof hg,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const r=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(r+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,s._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),d=s._snippet.fullLen(l),h=T.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+d)),g=n.addDecoration(h,Os._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=CP(this._snippet.placeholders,Vs.compareByIndex)})}}u(Os,"OneSnippet");Os._decor={active:Pe.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Pe.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Pe.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Pe.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const uH={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let x1=u(class aa{static adjustWhitespace(e,t,n,i,s){const r=e.getLineContent(t.lineNumber),a=xt(r,0,t.column-1);let l;return i.walk(c=>{if(!(c instanceof Ii)||c.parent instanceof hg||s&&!s.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(n){const g=i.offset(c);if(g===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??i.toString();const f=l.charCodeAt(g-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const h=d.join(e.getEOL());return h!==c.value&&(c.parent.replace(c,[new Ii(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:s,positionColumn:r}=t,a=r-n,l=r+i,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=ge.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,s,r,a,l,c){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const g=e.getModel(),f=e.invokeWithinContext(w=>w.get(_p)),m=e.invokeWithinContext(w=>new AA(w.get(bp),g)),b=u(()=>a,"readClipboardText"),_=g.getValueInRange(aa.adjustSelection(g,e.getSelection(),n,0)),C=g.getValueInRange(aa.adjustSelection(g,e.getSelection(),0,i)),v=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((w,x)=>({selection:w,idx:x})).sort((w,x)=>T.compareRangesUsingStarts(w.selection,x.selection));for(const{selection:w,idx:x}of y){let M=aa.adjustSelection(g,w,n,0),L=aa.adjustSelection(g,w,0,i);_!==g.getValueInRange(M)&&(M=w),C!==g.getValueInRange(L)&&(L=w);const E=w.setStartPosition(M.startLineNumber,M.startColumn).setEndPosition(L.endLineNumber,L.endColumn),k=new Zl().parse(t,!0,s),O=E.getStartPosition(),P=aa.adjustWhitespace(g,O,r||x>0&&v!==g.getLineFirstNonWhitespaceColumn(w.positionLineNumber),k);k.resolveVariables(new DA([m,new IA(b,x,y.length,e.getOption(76)==="spread"),new MA(g,w,x,l),new T1(g,w,c),new Xo,new NA(f),new RA])),d[x]=Ht.replace(E,k.toString()),d[x].identifier={major:x,minor:0},d[x]._isTracked=!0,h[x]=new Os(e,k,P)}return{edits:d,snippets:h}}static createEditsAndSnippetsFromEdits(e,t,n,i,s,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new Zl,h=new pm,g=new DA([e.invokeWithinContext(m=>new AA(m.get(bp),c)),new IA(()=>s,0,e.getSelections().length,e.getOption(76)==="spread"),new MA(c,e.getSelection(),0,r),new T1(c,e.getSelection(),a),new Xo,new NA(e.invokeWithinContext(m=>m.get(_p))),new RA]);t=t.sort((m,b)=>T.compareRangesUsingStarts(m.range,b.range));let f=0;for(let m=0;m<t.length;m++){const{range:b,template:_}=t[m];if(m>0){const x=t[m-1].range,M=T.fromPositions(x.getEndPosition(),b.getStartPosition()),L=new Ii(c.getValueInRange(M));h.appendChild(L),f+=L.value.length}const C=d.parseFragment(_,h);aa.adjustWhitespace(c,b.getStartPosition(),!0,h,new Set(C)),h.resolveVariables(g);const v=h.toString(),y=v.slice(f);f=v.length;const w=Ht.replace(b,y);w.identifier={major:m,minor:0},w._isTracked=!0,l.push(w)}return d.ensureFinalTabstop(h,n,!0),{edits:l,snippets:[new Os(e,h,"")]}}constructor(e,t,n=uH,i){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=i,this._templateMerges=[],this._snippets=[]}dispose(){mt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?aa.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):aa.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const i=n.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(i[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(s=>ge.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=uH){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=aa.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,s=>{const r=s.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(r[l].textChange);const a=i[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>ge.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[s,r]of i){r.sort(T.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,r)=>{s.push(...i.get(r))})}e.sort(T.compareRangesUsingStarts);for(const[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(T.compareRangesUsingStarts);for(let s=0;s<i.length;s++)if(!i[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}},"SnippetSession");x1=cfe([dfe(3,zt)],x1);var ufe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},VC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const hH={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let di=u(class Db{static get(e){return e.getContribution(Db.ID)}constructor(e,t,n,i,s){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=s,this._snippetListener=new X,this._modelVersionId=-1,this._inSnippet=Db.InSnippetMode.bindTo(i),this._hasNextTabstop=Db.HasNextTabstop.bindTo(i),this._hasPrevTabstop=Db.HasPrevTabstop.bindTo(i)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?hH:Object.assign(Object.assign({},hH),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(Ct(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new x1(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(s,r)=>{if(!this._session||s!==this._editor.getModel()||!W.equals(this._editor.getPosition(),r))return;const{activeChoice:a}=this._session;if(!a||a.choice.options.length===0)return;const l=s.getValueInRange(a.range),c=!!a.choice.options.find(h=>h.value===l),d=[];for(let h=0;h<a.choice.options.length;h++){const g=a.choice.options[h];d.push({kind:13,label:g.value,insertText:g.value,sortText:"a".repeat(h+1),range:a.range,filterText:c?`${l}_${g.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:p("next","Go to next placeholder...")}})}return{suggestions:d}}};const i=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme,exclusive:!0},this._choiceCompletionItemProvider);this._snippetListener.add(i)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletionItemProvider){this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask(()=>{The(this._editor,this._choiceCompletionItemProvider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)===null||e===void 0||e.prev(),this._updateState()}next(){var e;(e=this._session)===null||e===void 0||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},"SnippetController2");di.ID="snippetController2";di.InSnippetMode=new ue("inSnippetMode",!1,p("inSnippetMode","Whether the editor in current in snippet mode"));di.HasNextTabstop=new ue("hasNextTabstop",!1,p("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));di.HasPrevTabstop=new ue("hasPrevTabstop",!1,p("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));di=ufe([VC(1,Mo),VC(2,he),VC(3,Me),VC(4,zt)],di);ct(di.ID,di,4);const RT=jn.bindToContribution(di.get);oe(new RT({id:"jumpToNextSnippetPlaceholder",precondition:Z.and(di.InSnippetMode,di.HasNextTabstop),handler:o=>o.next(),kbOpts:{weight:100+30,kbExpr:D.editorTextFocus,primary:2}}));oe(new RT({id:"jumpToPrevSnippetPlaceholder",precondition:Z.and(di.InSnippetMode,di.HasPrevTabstop),handler:o=>o.prev(),kbOpts:{weight:100+30,kbExpr:D.editorTextFocus,primary:1026}}));oe(new RT({id:"leaveSnippet",precondition:di.InSnippetMode,handler:o=>o.cancel(!0),kbOpts:{weight:100+30,kbExpr:D.editorTextFocus,primary:9,secondary:[1033]}}));oe(new RT({id:"acceptSnippet",precondition:di.InSnippetMode,handler:o=>o.finish()}));var hfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},_u=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let PA=u(class extends z{constructor(e,t,n,i,s,r,a){super(),this.editor=e,this.cache=t,this.commandService=n,this.languageConfigurationService=i,this.languageFeaturesService=s,this.debounceService=r,this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Fn),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(n.onDidExecuteCommand(l=>{new Set([yf.Tab.id,yf.DeleteLeft.id,yf.DeleteRight.id,FK,"acceptSelectedSuggestion"]).has(l.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(l=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(l=>{(l.reason===3||this.session&&!this.session.isValid)&&this.hide()})),this._register(Oe(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{a.getValue("editor.inlineSuggest.hideOnBlur")||Ih.dropDownVisible||this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(60).enabled&&(this.session&&this.session.isValid||this.trigger(Hs.Automatic))}trigger(e){if(this.completionSession.value){e===Hs.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new a$(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.value&&(this.completionSession.clear(),this.onDidChangeEmitter.fire())}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}commitCurrentSuggestionPartially(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletionNextWord()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}},"InlineCompletionsModel");PA=hfe([Gm(2,dn),Gm(3,zt),Gm(4,he),Gm(5,Po),Gm(6,lt)],PA);class a$ extends UR{constructor(e,t,n,i,s,r,a,l,c){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=s,this.initialTriggerKind=r,this.languageConfigurationService=a,this.registry=l,this.debounce=c,this.minReservedLineCount=0,this.updateOperation=this._register(new Fn),this.updateSoon=this._register(new yt(()=>{const h=this.initialTriggerKind;return this.initialTriggerKind=Hs.Automatic,this.update(h)},50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0;let d;this._register(this.onDidChange(()=>{var h;const g=this.currentCompletion;if(g&&g.sourceInlineCompletion!==d){d=g.sourceInlineCompletion;const f=g.sourceProvider;(h=f.handleItemDidShow)===null||h===void 0||h.call(f,g.sourceInlineCompletions,d)}})),this._register(Oe(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(h=>{var g;h.reason!==3&&((g=this.cache.value)===null||g===void 0||g.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))})),this._register(this.editor.onDidChangeModelContent(h=>{var g;(g=this.cache.value)===null||g===void 0||g.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value){this.filteredCompletions=[];return}const e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter(n=>{const i=e.getValueInRange(n.synchronizedRange).toLowerCase(),s=n.inlineCompletion.filterText.toLowerCase(),r=e.getLineIndentColumn(n.synchronizedRange.startLineNumber),a=Math.max(0,t.column-n.synchronizedRange.startColumn);let l=s.substring(0,a),c=s.substring(a),d=i.substring(0,a),h=i.substring(a);return n.synchronizedRange.startColumn<=r&&(d=d.trimStart(),d.length===0&&(h=h.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(d)&&nB(h,c)})}get currentlySelectedIndex(){return this.fixAndGetIndexOfCurrentSelection()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.filteredCompletions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return _u(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){return _u(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}get hasBeenTriggeredExplicitly(){var e;return((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)===Hs.Explicit}ensureUpdateWithExplicitContext(){var e;return _u(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Hs.Explicit?yield this.updateOperation.value.promise:yield this.update(Hs.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Hs.Explicit&&(yield this.update(Hs.Explicit))})}getInlineCompletionsCountSync(){return this.filteredCompletions.length||0}get ghostText(){const e=this.currentCompletion;if(!e)return;const t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;const n=this.editor.getOptions().get(60).mode,i=r$(e,this.editor.getModel(),n,t);return i?i.isEmpty()?void 0:i:new BR(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split(`
`),0)}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return _u(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=new Date,i=On(r=>_u(this,void 0,void 0,function*(){let a;try{a=yield d$(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r,this.languageConfigurationService);const l=new Date;this.editor.hasModel()&&this.debounce.update(this.editor.getModel(),l.getTime()-n.getTime())}catch(l){He(l);return}r.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})),s=new GR(i,e);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletionNextWord(){const e=this.ghostText;if(!e)return;const t=this.currentCompletion;if(!t)return;if(t.snippetInfo||t.filterText!==t.insertText){this.commit(t);return}if(e.parts.length===0)return;const n=e.parts[0],i=new W(e.lineNumber,n.column),s=n.lines[0],r=this.editor.getModel().getLanguageIdAtPosition(e.lineNumber,1),a=this.languageConfigurationService.getLanguageConfiguration(r),l=new RegExp(a.wordDefinition.source,a.wordDefinition.flags.replace("g","")),c=s.match(l);let d=0;c&&c.index!==void 0?c.index===0?d=c[0].length:d=c.index:d=s.length;const h=/\s/g;let g=h.exec(s);g&&g.index===0&&(g=h.exec(s)),g&&g.index!==void 0&&g.index<d&&(d=g.index);const f=s.substring(0,d);if(this.editor.pushUndoStop(),this.editor.executeEdits("inlineSuggestion.accept",[Ht.replace(T.fromPositions(i),f)]),this.editor.setPosition(i.delta(0,f.length)),t.sourceProvider.handlePartialAccept){const m=T.fromPositions(t.range.getStartPosition(),i.delta(0,d)),b=this.editor.getModel().getValueInRange(m);t.sourceProvider.handlePartialAccept(t.sourceInlineCompletions,t.sourceInlineCompletion,b.length)}}commitCurrentCompletion(){if(!this.ghostText)return;const t=this.currentCompletion;t&&this.commit(t)}commit(e){var t;const n=this.cache.clearAndLeak();this.editor.pushUndoStop(),e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[Ht.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),(t=di.get(this.editor))===null||t===void 0||t.insert(e.snippetInfo.snippet,{undoStopBefore:!1})):this.editor.executeEdits("inlineSuggestion.accept",[Ht.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{n?.dispose()}).then(void 0,$n):n?.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;return[...new Set(((e=this.cache.value)===null||e===void 0?void 0:e.completions.map(n=>n.inlineCompletion.sourceInlineCompletions))||[])].flatMap(n=>n.commands||[])}}u(a$,"InlineCompletionsSession");class GR{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}u(GR,"UpdateOperation");class l$ extends z{constructor(e,t,n,i){super(),this.editor=t,this.onChange=n,this.triggerKind=i,this.isDisposing=!1;const s=t.changeDecorations(r=>r.deltaDecorations([],e.items.map(a=>({range:a.range,options:{description:"inline-completion-tracking-range"}}))));this._register(Oe(()=>{this.isDisposing=!0,t.removeDecorations(s)})),this.completions=e.items.map((r,a)=>new c$(r,s[a])),this._register(t.onDidChangeModelContent(()=>{this.updateRanges()})),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1;const t=this.editor.getModel();for(const n of this.completions){const i=t.getDecorationRange(n.decorationId);i&&(n.synchronizedRange.equalsRange(i)||(e=!0,n.synchronizedRange=i))}e&&this.onChange()}}u(l$,"SynchronizedInlineCompletionsCache");class c${constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}u(c$,"CachedInlineCompletion");function d$(o,e,t,n,i=Ze.None,s){return _u(this,void 0,void 0,function*(){const r=gfe(e,t),a=o.all(t),l=yield Promise.all(a.map(d=>_u(this,void 0,void 0,function*(){const h=yield Promise.resolve(d.provideInlineCompletions(t,e,n,i)).catch($n);return{completions:h,provider:d,dispose:()=>{h&&d.freeInlineCompletions(h)}}}))),c=new Map;for(const d of l){const h=d.completions;if(h)for(const g of h.items){let f=g.range?T.lift(g.range):r;if(f.startLineNumber!==f.endLineNumber)continue;let m,b;if(typeof g.insertText=="string"){if(m=g.insertText,s&&g.completeBracketPairs){m=gH(m,f.getStartPosition(),t,s);const C=m.length-g.insertText.length;C!==0&&(f=new T(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn+C))}b=void 0}else if("snippet"in g.insertText){const C=g.insertText.snippet.length;if(s&&g.completeBracketPairs){g.insertText.snippet=gH(g.insertText.snippet,f.getStartPosition(),t,s);const y=g.insertText.snippet.length-C;y!==0&&(f=new T(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn+y))}const v=new Zl().parse(g.insertText.snippet);v.children.length===1&&v.children[0]instanceof Ii?(m=v.children[0].value,b=void 0):(m=v.toString(),b={snippet:g.insertText.snippet,range:f})}else z1(g.insertText);const _={insertText:m,snippetInfo:b,range:f,command:g.command,sourceProvider:d.provider,sourceInlineCompletions:h,sourceInlineCompletion:g,filterText:g.filterText||m,additionalTextEdits:g.additionalTextEdits||sfe()};c.set(JSON.stringify({insertText:m,range:g.range}),_)}}return{items:[...c.values()],dispose:()=>{for(const d of l)d.dispose()}}})}u(d$,"provideInlineCompletions");function gfe(o,e){const t=e.getWordAtPosition(o),n=e.getLineMaxColumn(o.lineNumber);return t?new T(o.lineNumber,t.startColumn,o.lineNumber,n):T.fromPositions(o,o.with(void 0,n))}u(gfe,"getDefaultRange");function gH(o,e,t,n){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+o,r=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),o),a=r?.sliceAndInflate(e.column-1,s.length,0);return a?efe(a,n):o}u(gH,"closeBrackets");var ffe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class PT{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const i=n[0].score[0];for(let s=0;s<n.length;s++){const{score:r,completion:a}=n[s];if(r[0]!==i)break;if(a.preselect)return s}return 0}}u(PT,"Memory");class zR extends PT{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}u(zR,"NoMemory");class u$ extends PT{constructor(){super("recentlyUsed"),this._cache=new ic(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);const s=n[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===s;c++){const d=`${e.getLanguageId()}/${n[c].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[c].completion.kind&&h.insertText===n[c].completion.insertText&&(l=h.touch,a=c),n[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:r_.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}}u(u$,"LRUMemory");class h$ extends PT{constructor(){super("recentlyUsedByPrefix"),this._trie=Ku.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${i}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);const s=`${e.getLanguageId()}/${i}`;let r=this._trie.get(s);if(r||(r=this._trie.findSubstr(s)),r)for(let a=0;a<n.length;a++){const{kind:l,insertText:c}=n[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:r_.fromString(n.type),this._trie.set(t,n)}}}u(h$,"PrefixMemory");let tv=u(class Uy{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new X,this._persistSoon=new yt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===jw.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const s=Uy._strategyCtors.get(i)||zR;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${Uy._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${Uy._storagePrefix}/${this._strategy.name}`,n,t,1)}}},"SuggestMemoryService");tv._strategyCtors=new Map([["recentlyUsedByPrefix",h$],["recentlyUsed",u$],["first",zR]]);tv._storagePrefix="suggest/memories";tv=ffe([fH(0,ar),fH(1,lt)],tv);const FT=nt("ISuggestMemories");at(FT,tv,1);var pfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let nv=u(class g${constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=g$.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(118)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(118)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=u(()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),s=n.getWordAtPosition(i.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===i.getStartPosition().column)},"checkForWordEnd");this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},"WordContextKey");nv.AtEnd=new ue("atEndOfWord",!1);nv=pfe([mfe(1,Me)],nv);var bfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_fe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Ph=u(class Gy{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Gy.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(Gy._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(let s=t.items.length;s>0&&(i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits));s--);return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=Gy._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},"SuggestAlternatives");Ph.OtherSuggestions=new ue("hasOtherSuggestions",!1);Ph=bfe([_fe(1,Me)],Ph);class f${constructor(e,t,n,i){this._disposables=new X,this._disposables.add(n.onDidSuggest(s=>{s.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(s=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()&&n.state!==0){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!Ei(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new h_;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}u(f$,"CommitCharacterController");var vfe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class ps{provideSelectionRanges(e,t){return vfe(this,void 0,void 0,function*(){const n=[];for(const i of t){const s=[];n.push(s);const r=new Map;yield new Promise(a=>ps._bracketsRightYield(a,0,e,i,r)),yield new Promise(a=>ps._bracketsLeftYield(a,0,e,i,r,s))}return n})}static _bracketsRightYield(e,t,n,i,s){const r=new Map,a=Date.now();for(;;){if(t>=ps._maxRounds){e();break}if(!i){e();break}const l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>ps._maxDuration){setTimeout(()=>ps._bracketsRightYield(e,t+1,n,i,s));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,h=r.has(d)?r.get(d):0;r.set(d,h+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let h=r.has(d)?r.get(d):0;if(h-=1,r.set(d,Math.max(0,h)),h<0){let g=s.get(d);g||(g=new oi,s.set(d,g)),g.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,s,r){const a=new Map,l=Date.now();for(;;){if(t>=ps._maxRounds&&s.size===0){e();break}if(!i){e();break}const c=n.bracketPairs.findPrevBracket(i);if(!c){e();break}if(Date.now()-l>ps._maxDuration){setTimeout(()=>ps._bracketsLeftYield(e,t+1,n,i,s,r));break}if(c.bracketInfo.isOpeningBracket){const h=c.bracketInfo.bracketText;let g=a.has(h)?a.get(h):0;if(g-=1,a.set(h,Math.max(0,g)),g<0){const f=s.get(h);if(f){const m=f.shift();f.size===0&&s.delete(h);const b=T.fromPositions(c.range.getEndPosition(),m.getStartPosition()),_=T.fromPositions(c.range.getStartPosition(),m.getEndPosition());r.push({range:b}),r.push({range:_}),ps._addBracketLeading(n,_,r)}}}else{const h=c.bracketInfo.getOpeningBrackets()[0].bracketText,g=a.has(h)?a.get(h):0;a.set(h,g+1)}i=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(i);s!==0&&s!==t.startColumn&&(n.push({range:T.fromPositions(new W(i,s),t.getEndPosition())}),n.push({range:T.fromPositions(new W(i,1),t.getEndPosition())}));const r=i-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:T.fromPositions(new W(r,a),t.getEndPosition())}),n.push({range:T.fromPositions(new W(r,1),t.getEndPosition())}))}}}u(ps,"BracketSelectionRangeProvider");ps._maxDuration=30;ps._maxRounds=2;var Cfe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class Go{static create(e,t){return Cfe(this,void 0,void 0,function*(){if(!t.getOption(113).localityBonus||!t.hasModel())return Go.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Go.None;const[s]=yield new ps().provideSelectionRanges(n,[i]);if(s.length===0)return Go.None;const r=yield e.computeWordRanges(n.uri,s[0].range);if(!r)return Go.None;const a=n.getWordUntilPosition(i);return delete r[a.word],new class extends Go{distance(l,c){if(!i.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,h=r[d];if(qH(h))return 2<<20;const g=s_(h,T.fromPositions(l),T.compareRangesUsingStarts),f=g>=0?h[g]:h[Math.max(0,~g-1)];let m=s.length;for(const b of s){if(!T.containsRange(b.range,f))break;m-=1}return m}}})}}u(Go,"WordDistance");Go.None=new class extends Go{distance(){return 0}};let pH=u(class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}},"LineContext");class wl{constructor(e,t,n,i,s,r,a=qv.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=wl._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=s,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=wl._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=wl._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",s="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?gp:ooe;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;const h=this._itemsByProvider.get(d.provider);h?h.push(d):this._itemsByProvider.set(d.provider,[d]);const g=d.position.column-d.editStart.column,f=g+n-(d.position.column-this._column);if(i.length!==f&&(i=f===0?"":t.slice(-f),s=i.toLowerCase()),d.word=i,f===0)d.score=Wr.Default;else{let m=0;for(;m<g;){const b=i.charCodeAt(m);if(b===32||b===9)m+=1;else break}if(m>=f)d.score=Wr.Default;else if(typeof d.completion.filterText=="string"){const b=l(i,s,m,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!b)continue;GE(d.completion.filterText,d.textLabel)===0?d.score=b:(d.score=toe(i,s,m,d.textLabel,d.labelLow,0),d.score[0]=b[0])}else{const b=l(i,s,m,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;d.score=b}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?KL(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return wl._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return wl._compareCompletionItems(e,t)}}u(wl,"CompletionModel");var yfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},wfe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class xc{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}}u(xc,"LineContext");function Sfe(o,e,t){return e.getContextKeyValue("inlineSuggestionVisible")?!o.getOption(60).suppressSuggestions:!0}u(Sfe,"canShowQuickSuggest");function Tfe(o,e,t){return e.getContextKeyValue("inlineSuggestionVisible")?!o.getOption(60).suppressSuggestions:!0}u(Tfe,"canShowSuggestOnTriggerCharacters");let FA=u(class p${constructor(e,t,n,i,s,r,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=s,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new X,this._triggerCharacterListener=new X,this._triggerQuickSuggest=new io,this._triggerState=void 0,this._completionDisposables=new X,this._onDidCancel=new F,this._onDidTrigger=new F,this._onDidSuggest=new F,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new ge(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{c||this._onCursorChange(d)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!c&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){mt(this._triggerCharacterListener),mt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(87)||!this._editor.hasModel()||!this._editor.getOption(116))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add(Che()),e.set(i,s)),s.add(n)}const t=u(n=>{var i;if(!Tfe(this._editor,this._contextKeyService,this._configurationService)||xc.shouldAutoTrigger(this._editor))return;if(!n){const a=this._editor.getPosition();n=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";rh(n.charCodeAt(n.length-1))?In(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const r=e.get(s);if(r){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())r.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(i=this._completionModel)===null||i===void 0?void 0:i.clipboardText,completionOptions:{providerFilter:r,providerItemsToReuse:a}})}},"checkTriggerCharacter");this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){Mu.isAllOff(this._editor.getOption(85))||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!xc.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(85);if(!Mu.isAllOff(n)){if(!Mu.isAllOn(n)){e.tokenization.tokenizeIfCheap(t.lineNumber);const i=e.tokenization.getLineTokens(t.lineNumber),s=i.getStandardTokenType(i.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Mu.valueFor(n,s)!=="on")return}Sfe(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}},this._editor.getOption(86)))}_refilterCompletionItems(){Ct(this._editor.hasModel()),Ct(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),n=new xc(e,t,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(n)}trigger(e){var t,n,i,s,r,a;if(!this._editor.hasModel())return;const l=this._editor.getModel(),c=new xc(l,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:(t=e.shy)!==null&&t!==void 0?t:!1,position:this._editor.getPosition()}),this._context=c;let d={triggerKind:(n=e.triggerKind)!==null&&n!==void 0?n:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new ci;const h=this._editor.getOption(107);let g=1;switch(h){case"top":g=0;break;case"bottom":g=2;break}const{itemKind:f,showDeprecated:m}=p$._createSuggestFilter(this._editor),b=new Np(g,(s=(i=e.completionOptions)===null||i===void 0?void 0:i.kindFilter)!==null&&s!==void 0?s:f,(r=e.completionOptions)===null||r===void 0?void 0:r.providerFilter,(a=e.completionOptions)===null||a===void 0?void 0:a.providerItemsToReuse,m),_=Go.create(this._editorWorkerService,this._editor),C=wR(this._languageFeaturesService.completionProvider,l,this._editor.getPosition(),b,d,this._requestToken.token);Promise.all([C,_]).then(([v,y])=>wfe(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let x=e?.clipboardText;if(!x&&v.needsClipboard&&(x=yield this._clipboardService.readText()),this._triggerState===void 0)return;const M=this._editor.getModel(),L=new xc(M,this._editor.getPosition(),e),E=Object.assign(Object.assign({},qv.default),{firstMatchCanBeWeak:!this._editor.getOption(113).matchOnWordStartOnly});this._completionModel=new wl(v.items,this._context.column,{leadingLineContent:L.leadingLineContent,characterCountDelta:L.column-this._context.column},y,this._editor.getOption(113),this._editor.getOption(107),E,x),this._completionDisposables.add(v.disposable),this._onNewContext(L),this._reportDurationsTelemetry(v.durations)})).catch(He)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(107)==="none"&&t.add(27);const i=e.getOption(113);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(xt(e.leadingLineContent)!==xt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(xc.shouldAutoTrigger(this._editor)&&this._context){const n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,n=new Set;for(const[i,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?n.add(i):t.set(i,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const i=xc.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(i&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}},"SuggestModel");FA=yfe([Zd(1,rr),Zd(2,oc),Zd(3,Ao),Zd(4,Mo),Zd(5,Me),Zd(6,lt),Zd(7,he)],FA);class C0{constructor(e,t){this._disposables=new X,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const n=e.getSelections(),i=n.length;let s=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(r.getValueLengthInRange(l)>C0._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(n=>{this._locked=!0})),this._disposables.add(t.onDidCancel(n=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}u(C0,"OvertypingCapturer");C0._maxSelectionLength=51200;var xfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},DL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class OT extends bh{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,OT.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}u(OT,"StatusBarViewItem");let OA=u(class{constructor(e,t,n,i,s){this._menuId=t,this._menuService=i,this._contextKeyService=s,this._menuDisposables=new X,this.element=q(e,ie(".suggest-status-bar"));const r=u(a=>a instanceof ir?n.createInstance(OT,a,void 0):void 0,"actionViewItemProvider");this._leftActions=new eo(this.element,{actionViewItemProvider:r}),this._rightActions=new eo(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=u(()=>{const n=[],i=[];for(const[s,r]of e.getActions())s==="left"?n.push(...r):i.push(...r);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)},"renderMenu");this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}},"SuggestWidgetStatus");OA=xfe([DL(2,Re),DL(3,qa),DL(4,Me)],OA);class KR{constructor(){this._onDidWillResize=new F,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new F,this.onDidResize=this._onDidResize.event,this._sashListener=new X,this._size=new Lt(0,0),this._minSize=new Lt(0,0),this._maxSize=new Lt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new hi(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new hi(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new hi(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:Iw.North}),this._southSash=new hi(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:Iw.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(pe.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(pe.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(pe.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(pe.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:s,width:r}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(i,Math.min(r,t));const a=new Lt(t,e);Lt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}u(KR,"ResizableHTMLElement");var Lfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Efe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function jR(o){return!!o&&!!(o.completion.documentation||o.completion.detail&&o.completion.detail!==o.completion.label)}u(jR,"canExpandCompletionItem");let HA=u(class{constructor(e,t){this._editor=e,this._onDidClose=new F,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new F,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new X,this._renderDisposeable=new X,this._borderWidth=1,this._size=new Lt(330,0),this.domNode=ie(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Jl,{editor:e}),this._body=ie(".body"),this._scrollbar=new em(this._body,{alwaysConsumeMouseWheel:!0}),q(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=q(this._body,ie(".header")),this._close=q(this._header,ie("span"+xe.asCSSSelector(re.close))),this._close.title=p("details.close","Close"),this._type=q(this._header,ie("p.type")),this._docs=q(this._body,ie("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(48)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(48),n=t.getMassagedFontFamily(),i=e.get(114)||t.fontSize,s=e.get(115)||t.lineHeight,r=t.fontWeight,a=`${i}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/i}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(115)||this._editor.getOption(48).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=p("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:s,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,r=new Gi().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!jR(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}…`:s;this._type.textContent=a,this._type.title=a,Cs(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else kn(this._type),this._type.title="",Ui(this._type),this.domNode.classList.add("no-type");if(kn(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),kn(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new Lt(e,t);Lt.equals(n,this._size)||(this._size=n,Lee(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}},"SuggestDetailsWidget");HA=Lfe([Efe(1,Re)],HA);class m${constructor(e,t){this.widget=e,this._editor=t,this._disposables=new X,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new KR,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,s=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=i.width-a.dimension.width,l=!0),a.north&&(s=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+r})}a.done&&(n=void 0,i=void 0,s=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const s=cS(document.body),r=this.widget.getLayoutInfo(),a=new Lt(220,2*r.lineHeight),l=e.top,c=function(){const y=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),w=-r.borderWidth+e.left+e.width,x=new Lt(y,s.height-e.top-r.borderHeight-r.verticalPadding),M=x.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:w,fit:y-t.width,maxSizeTop:x,maxSizeBottom:M,minSize:a.with(Math.min(y,a.width))}}(),d=function(){const y=e.left-r.borderWidth-r.horizontalPadding,w=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),x=new Lt(y,s.height-e.top-r.borderHeight-r.verticalPadding),M=x.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:w,fit:y-t.width,maxSizeTop:x,maxSizeBottom:M,minSize:a.with(Math.min(y,a.width))}}(),h=function(){const y=e.left,w=-r.borderWidth+e.top+e.height,x=new Lt(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:w,left:y,fit:x.height-t.height,maxSizeBottom:x,maxSizeTop:x,minSize:a.with(x.width)}}(),g=[c,d,h],f=(i=g.find(y=>y.fit>=0))!==null&&i!==void 0?i:g.sort((y,w)=>w.fit-y.fit)[0],m=e.top+e.height-r.borderHeight;let b,_=t.height;const C=Math.max(f.maxSizeTop.height,f.maxSizeBottom.height);_>C&&(_=C);let v;n?_<=f.maxSizeTop.height?(b=!0,v=f.maxSizeTop):(b=!1,v=f.maxSizeBottom):_<=f.maxSizeBottom.height?(b=!1,v=f.maxSizeBottom):(b=!0,v=f.maxSizeTop),this._applyTopLeft({left:f.left,top:b?f.top:m-_}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,f===c,b,f!==c),this._resizable.minSize=f.minSize,this._resizable.maxSize=v,this._resizable.layout(_,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}u(m$,"SuggestDetailsOverlay");var Pl;(function(o){o[o.FILE=0]="FILE",o[o.FOLDER=1]="FOLDER",o[o.ROOT_FOLDER=2]="ROOT_FOLDER"})(Pl||(Pl={}));const kfe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function WC(o,e,t,n){const i=n===Pl.ROOT_FOLDER?["rootfolder-icon"]:n===Pl.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===Ue.data)s=hd.parseMetaData(t).get(hd.META_DATA_LABEL);else{const r=t.path.match(kfe);r?(s=BC(r[2].toLowerCase()),r[1]&&i.push(`${BC(r[1].toLowerCase())}-name-dir-icon`)):s=BC(t.authority.toLowerCase())}if(n===Pl.FOLDER)i.push(`${s}-name-folder-icon`);else{if(s){if(i.push(`${s}-name-file-icon`),i.push("name-file-icon"),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const r=Dfe(o,e,t);r&&i.push(`${BC(r)}-lang-file-icon`)}}return i}u(WC,"getIconClasses");function Dfe(o,e,t){if(!t)return null;let n=null;if(t.scheme===Ue.data){const s=hd.parseMetaData(t).get(hd.META_DATA_MIME);s&&(n=e.getLanguageIdByMimeType(s))}else{const i=o.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==Zs?n:e.guessLanguageIdByFilepathOrFirstLine(t)}u(Dfe,"detectLanguageId");function BC(o){return o.replace(/[\11\12\14\15\40]/g,"/")}u(BC,"cssEscape");var Mfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ML=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zm;function b$(o){return`suggest-aria-id:${o}`}u(b$,"getAriaId");const Afe=bn("suggest-more-info",re.chevronRight,p("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Ife=new(zm=u(class zy{extract(e,t){if(e.textLabel.match(zy._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(zy._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=zy._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},"ColorExtractor"),zm._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,zm._regexStrict=new RegExp(`^${zm._regexRelaxed.source}$`,"i"),zm);let VA=u(class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new F,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new X,n=e;n.classList.add("show-file-icons");const i=q(e,ie(".icon")),s=q(i,ie("span.colorspan")),r=q(e,ie(".contents")),a=q(r,ie(".main")),l=q(a,ie(".icon-label.codicon")),c=q(a,ie("span.left")),d=q(a,ie("span.right")),h=new j_(c,{supportHighlights:!0,supportIcons:!0});t.add(h);const g=q(c,ie("span.signature-label")),f=q(c,ie("span.qualifier-label")),m=q(d,ie("span.details-label")),b=q(d,ie("span.readMore"+xe.asCSSSelector(Afe)));b.title=p("readMore","Read More");const _=u(()=>{const C=this._editor.getOptions(),v=C.get(48),y=v.getMassagedFontFamily(),w=v.fontFeatureSettings,x=C.get(114)||v.fontSize,M=C.get(115)||v.lineHeight,L=v.fontWeight,E=v.letterSpacing,k=`${x}px`,O=`${M}px`,P=`${E}px`;n.style.fontSize=k,n.style.fontWeight=L,n.style.letterSpacing=P,a.style.fontFamily=y,a.style.fontFeatureSettings=w,a.style.lineHeight=O,i.style.height=O,i.style.width=O,b.style.height=O,b.style.width=O},"configureFont");return _(),t.add(this._editor.onDidChangeConfiguration(C=>{(C.hasChanged(48)||C.hasChanged(114)||C.hasChanged(115))&&_()})),{root:n,left:c,right:d,icon:i,colorspan:s,iconLabel:h,iconContainer:l,parametersLabel:g,qualifierLabel:f,detailsLabel:m,readMore:b,disposables:t}}renderElement(e,t,n){const{completion:i}=e;n.root.id=b$(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:GS(e.score)},r=[];if(i.kind===19&&Ife.extract(e,r))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=r[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=WC(this._modelService,this._languageService,ve.from({scheme:"fake",path:e.textLabel}),Pl.FILE),l=WC(this._modelService,this._languageService,ve.from({scheme:"fake",path:i.detail}),Pl.FILE);s.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=[WC(this._modelService,this._languageService,ve.from({scheme:"fake",path:e.textLabel}),Pl.FOLDER),WC(this._modelService,this._languageService,ve.from({scheme:"fake",path:i.detail}),Pl.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...xe.asClassNameArray(r_.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=AL(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=AL(i.label.detail||""),n.detailsLabel.textContent=AL(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(113).showInlineDetails?Cs(n.detailsLabel):Ui(n.detailsLabel),jR(e)?(n.right.classList.add("can-expand-details"),Cs(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Ui(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}},"ItemRenderer");VA=Mfe([ML(1,en),ML(2,Wt),ML(3,qn)],VA);function AL(o){return o.replace(/\r\n|\r|\n/g,"")}u(AL,"stripNewLines");var Nfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Rfe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};N("editorSuggestWidget.background",{dark:Vt,light:Vt,hcDark:Vt,hcLight:Vt},p("editorSuggestWidgetBackground","Background color of the suggest widget."));N("editorSuggestWidget.border",{dark:La,light:La,hcDark:La,hcLight:La},p("editorSuggestWidgetBorder","Border color of the suggest widget."));const GC=N("editorSuggestWidget.foreground",{dark:$o,light:$o,hcDark:$o,hcLight:$o},p("editorSuggestWidgetForeground","Foreground color of the suggest widget."));N("editorSuggestWidget.selectedForeground",{dark:Tu,light:Tu,hcDark:Tu,hcLight:Tu},p("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));N("editorSuggestWidget.selectedIconForeground",{dark:Xg,light:Xg,hcDark:Xg,hcLight:Xg},p("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const Pfe=N("editorSuggestWidget.selectedBackground",{dark:xu,light:xu,hcDark:xu,hcLight:xu},p("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));N("editorSuggestWidget.highlightForeground",{dark:qo,light:qo,hcDark:qo,hcLight:qo},p("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));N("editorSuggestWidget.focusHighlightForeground",{dark:eC,light:eC,hcDark:eC,hcLight:eC},p("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));N("editorSuggestWidgetStatus.foreground",{dark:_e(GC,.5),light:_e(GC,.5),hcDark:_e(GC,.5),hcLight:_e(GC,.5)},p("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class _${constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof bd}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(Lt.is(n))return Lt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}u(_$,"PersistedWidgetSize");let iv=u(class WA{constructor(e,t,n,i,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new Fn,this._pendingShowDetails=new Fn,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new io,this._disposables=new X,this._onDidSelect=new sh,this._onDidFocus=new sh,this._onDidHide=new F,this._onDidShow=new F,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new F,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new KR,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new v$(this,e),this._persistedSize=new _$(t,e);class r{constructor(f,m,b=!1,_=!1){this.persistedSize=f,this.currentSize=m,this.persistHeight=b,this.persistWidth=_}}u(r,"ResizeState");let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(g=>{var f,m,b,_;if(this._resize(g.dimension.width,g.dimension.height),a&&(a.persistHeight=a.persistHeight||!!g.north||!!g.south,a.persistWidth=a.persistWidth||!!g.east||!!g.west),!!g.done){if(a){const{itemHeight:C,defaultSize:v}=this.getLayoutInfo(),y=Math.round(C/2);let{width:w,height:x}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-x)<=y)&&(x=(m=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&m!==void 0?m:v.height),(!a.persistWidth||Math.abs(a.currentSize.width-w)<=y)&&(w=(_=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&_!==void 0?_:v.width),this._persistedSize.store(new Lt(w,x))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=q(this.element.domNode,ie(".message")),this._listElement=q(this.element.domNode,ie(".tree"));const l=s.createInstance(HA,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new m$(l,this.editor);const c=u(()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(113).showIcons),"applyIconStyle");c();const d=s.createInstance(VA,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ro("SuggestWidget",this._listElement,{getHeight:g=>this.getLayoutInfo().itemHeight,getTemplateId:g=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>p("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:g=>{let f=g.textLabel;if(typeof g.completion.label!="string"){const{detail:C,description:v}=g.completion.label;C&&v?f=p("label.full","{0}{1}, {2}",f,C,v):C?f=p("label.detail","{0}{1}",f,C):v&&(f=p("label.desc","{0}, {1}",f,v))}if(!g.isResolved||!this._isDetailsVisible())return f;const{documentation:m,detail:b}=g.completion,_=mo("{0}{1}",b||"",m?typeof m=="string"?m:m.value:"");return p("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,_)}}}),this._list.style(am({listInactiveFocusBackground:Pfe,listInactiveFocusOutline:Ft})),this._status=s.createInstance(OA,this.element.domNode,ed);const h=u(()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(113).showStatusBar),"applyStatusBarStyle");h(),this._disposables.add(i.onDidColorThemeChange(g=>this._onThemeChange(g))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onTap(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onDidChangeSelection(g=>this._onListSelection(g))),this._disposables.add(this._list.onDidChangeFocus(g=>this._onListFocus(g))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(g=>{g.hasChanged(113)&&(h(),c())})),this._ctxSuggestWidgetVisible=Ve.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Ve.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Ve.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=Ve.HasFocusedSuggestion.bindTo(n),this._disposables.add(pn(this._details.widget.domNode,"keydown",g=>{this._onDetailsKeydown.fire(g)})),this._disposables.add(this.editor.onMouseDown(g=>this._onEditorMouseDown(g)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Aa(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=On(s=>Rfe(this,void 0,void 0,function*(){const r=lh(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>r.dispose()),l=yield n.resolve(s);return r.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:b$(i)}))}).catch(He)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Ui(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=WA.LOADING_MESSAGE,Ui(this._listElement,this._status.element),Cs(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=WA.NO_SUGGESTIONS_MESSAGE,Ui(this._listElement,this._status.element),Cs(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Ui(this._messageElement),Cs(this._listElement,this._status.element),this._show();break;case 4:Ui(this._messageElement),Cs(this._listElement,this._status.element),this._show();break;case 5:Ui(this._messageElement),Cs(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=lh(()=>this._setState(1),t)))}showSuggestions(e,t,n,i,s){var r,a;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(a=this._currentSuggestionDetails)===null||a===void 0||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const l=this._completionModel.items.length,c=l===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),c){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(s?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=fw(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(jR(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=fw(()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=cS(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.height=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Lt(l,a),this._contentWidget.setPreference(2);else{const c=s.width-r.borderHeight-2*r.horizontalPadding;l>c&&(l=c);const d=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,h=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,f=Kn(this.editor.getDomNode()),m=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=f.top+m.top+m.height,_=Math.min(s.height-b-r.verticalPadding,h),C=f.top+m.top-r.verticalPadding,v=Math.min(C,h);let y=Math.min(Math.max(v,_)+r.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<g&&(a=g),a>y&&(a=y);const w=150;a>_||this._forceRenderingAbove&&C>w?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),y=v):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),y=_),this.element.preferredSize=new Lt(d,r.defaultSize.height),this.element.maxSize=new Lt(c,y),this.element.minSize=new Lt(220,g),this._cappedHeight=a===h?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(48),t=ms(this.editor.getOption(115)||e.lineHeight,8,1e3),n=!this.editor.getOption(113).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,s=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Lt(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},"SuggestWidget");iv.LOADING_MESSAGE=p("suggestWidget.loading","Loading...");iv.NO_SUGGESTIONS_MESSAGE=p("suggestWidget.noSuggestions","No suggestions.");iv=Nfe([UC(1,ar),UC(2,Me),UC(3,qn),UC(4,Re)],iv);class v${constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new Lt(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}u(v$,"SuggestContentWidget");var Ffe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Mg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class C${constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:T.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}u(C$,"LineSuffix");let Zo=u(class y${static get(e){return e.getContribution(y$.ID)}constructor(e,t,n,i,s,r,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=s,this._logService=r,this._telemetryService=a,this._lineSuffix=new Fn,this._toDispose=new X,this._selectors=new w$(h=>h.priority),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(FA,this.editor),this._selectors.register({priority:0,select:(h,g,f)=>this._memoryService.select(h,g,f)});const l=Ve.InsertMode.bindTo(i);l.set(e.getOption(113).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(113).insertMode)),this.widget=this._toDispose.add(new Fb(()=>{const h=this._instantiationService.createInstance(iv,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(_=>this._insertSuggestion(_,0),this));const g=new f$(this.editor,h,this.model,_=>this._insertSuggestion(_,2));this._toDispose.add(g);const f=Ve.MakesTextEdit.bindTo(this._contextKeyService),m=Ve.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=Ve.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Oe(()=>{f.reset(),m.reset(),b.reset()})),this._toDispose.add(h.onDidFocus(({item:_})=>{const C=this.editor.getPosition(),v=_.editStart.column,y=C.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&y-v===_.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:C.lineNumber,startColumn:v,endLineNumber:C.lineNumber,endColumn:y})!==_.completion.insertText),f.set(w),m.set(!W.equals(_.editInsertEnd,_.editReplaceEnd)),b.set(!!_.provider.resolveCompletionItem||!!_.completion.documentation||_.completion.detail!==_.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(_=>{if(_.toKeyCodeChord().equals(new Wa(!0,!1,!1,!1,33))||Ye&&_.toKeyCodeChord().equals(new Wa(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeyCodeChord().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new Fb(()=>this._toDispose.add(new C0(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Fb(()=>this._toDispose.add(new Ph(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(nv,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new C$(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{var g;if(h.triggerOptions.shy)return;let f=-1;for(const b of this._selectors.itemsOrderedByPriorityDesc)if(f=b.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),f!==-1)break;f===-1&&(f=0);let m=!1;if(h.triggerOptions.auto){const b=this.editor.getOption(113);b.snippetsPreventQuickSuggestions&&(!((g=di.get(this.editor))===null||g===void 0)&&g.isInSnippet())?m=!0:b.selectionMode==="never"||b.selectionMode==="always"?m=b.selectionMode==="never":b.selectionMode==="whenTriggerCharacter"?m=h.triggerOptions.triggerKind!==1:b.selectionMode==="whenQuickSuggestion"&&(m=h.triggerOptions.triggerKind===1&&!h.triggerOptions.refilter)}this.widget.value.showSuggestions(h.completionModel,f,h.isFrozen,h.triggerOptions.auto,m)})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=Ve.AcceptSuggestionsOnEnter.bindTo(i),d=u(()=>{const h=this.editor.getOption(1);c.set(h==="on"||h==="smart")},"updateFromConfig");this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=di.get(this.editor);if(!n)return;const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:r}=e,a=[],l=new ci;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const h=zr.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(g=>Ht.replaceMove(T.lift(g.range),g.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const h=new ji(!0);let g;const f=i.onDidChangeContent(C=>{if(C.isFlush){l.cancel(),f.dispose();return}for(const v of C.changes){const y=T.getEndPosition(v.range);(!g||W.isBefore(y,g))&&(g=y)}}),m=t;t|=2;let b=!1;const _=this.editor.onWillType(()=>{_.dispose(),b=!0,m&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested||g&&r.completion.additionalTextEdits.some(v=>W.isBefore(g,T.getStartPosition(v.range))))return!1;b&&this.editor.pushUndoStop();const C=zr.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(v=>Ht.replaceMove(T.lift(v.range),v.text))),C.restoreRelativeVerticalPositionOfCursor(this.editor),(b||!(m&2))&&this.editor.pushUndoStop(),!0}).then(C=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),C),f.dispose(),_.dispose()}))}let{insertText:d}=r.completion;r.completion.insertTextRules&4||(d=Zl.escape(d)),this.model.cancel(),n.insert(d,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command&&(r.completion.command.id===bm.id?this.model.trigger({auto:!0,retrigger:!0}):a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(He))),t&4&&this._alternatives.value.set(e,h=>{for(l.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,i,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n){var i;if(this._telemetryGate++%100!==0)return;const s=e.extensionId?e.extensionId.value:((i=n.item.provider._debugDisplayName)!==null&&i!==void 0?i:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:s,kind:e.completion.kind,basenameHash:l3(Do(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:qie(t.uri)})}getOverwriteInfo(e,t){Ct(this.editor.hasModel());let n=this.editor.getOption(113).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+r,overwriteAfter:s+a}}_alertCompletionItem(e){if(Ei(e.completion.additionalTextEdits)){const t=p("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ri(t)}}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=u(()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},"fallback"),i=u(s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=s.editStart.column,l=r.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==s.completion.insertText},"makesTextEdit");pe.once(this.model.onDidTrigger)(s=>{const r=[];pe.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{mt(r),n()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(mt(r),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!i(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},"SuggestController");Zo.ID="editor.contrib.suggestController";Zo=Ffe([Mg(1,FT),Mg(2,dn),Mg(3,Me),Mg(4,Re),Mg(5,Mo),Mg(6,Ao)],Zo);class w${constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}u(w$,"PriorityRegistry");class bm extends de{constructor(){super({id:bm.id,label:p("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Z.and(D.writable,D.hasCompletionItemProvider,Ve.Visible.toNegated()),kbOpts:{kbExpr:D.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=Zo.get(t);if(!i)return;let s;n&&typeof n=="object"&&n.auto===!0&&(s=!0),i.triggerSuggest(void 0,s,void 0)}}u(bm,"TriggerSuggestAction");bm.id="editor.action.triggerSuggest";ct(Zo.ID,Zo,2);ee(bm);const no=100+90,Ji=jn.bindToContribution(Zo.get);oe(new Ji({id:"acceptSelectedSuggestion",precondition:Z.and(Ve.Visible,Ve.HasFocusedSuggestion),handler(o){o.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:Z.and(Ve.Visible,D.textInputFocus),weight:no},{primary:3,kbExpr:Z.and(Ve.Visible,D.textInputFocus,Ve.AcceptSuggestionsOnEnter,Ve.MakesTextEdit),weight:no}],menuOpts:[{menuId:ed,title:p("accept.insert","Insert"),group:"left",order:1,when:Ve.HasInsertAndReplaceRange.toNegated()},{menuId:ed,title:p("accept.insert","Insert"),group:"left",order:1,when:Z.and(Ve.HasInsertAndReplaceRange,Ve.InsertMode.isEqualTo("insert"))},{menuId:ed,title:p("accept.replace","Replace"),group:"left",order:1,when:Z.and(Ve.HasInsertAndReplaceRange,Ve.InsertMode.isEqualTo("replace"))}]}));oe(new Ji({id:"acceptAlternativeSelectedSuggestion",precondition:Z.and(Ve.Visible,D.textInputFocus,Ve.HasFocusedSuggestion),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:1027,secondary:[1026]},handler(o){o.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:ed,group:"left",order:2,when:Z.and(Ve.HasInsertAndReplaceRange,Ve.InsertMode.isEqualTo("insert")),title:p("accept.replace","Replace")},{menuId:ed,group:"left",order:2,when:Z.and(Ve.HasInsertAndReplaceRange,Ve.InsertMode.isEqualTo("replace")),title:p("accept.insert","Insert")}]}));ot.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");oe(new Ji({id:"hideSuggestWidget",precondition:Ve.Visible,handler:o=>o.cancelSuggestWidget(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:9,secondary:[1033]}}));oe(new Ji({id:"selectNextSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectNextSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));oe(new Ji({id:"selectNextPageSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectNextPageSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:12,secondary:[2060]}}));oe(new Ji({id:"selectLastSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectLastSuggestion()}));oe(new Ji({id:"selectPrevSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));oe(new Ji({id:"selectPrevPageSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevPageSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:11,secondary:[2059]}}));oe(new Ji({id:"selectFirstSuggestion",precondition:Z.and(Ve.Visible,Z.or(Ve.MultipleSuggestions,Ve.HasFocusedSuggestion.negate())),handler:o=>o.selectFirstSuggestion()}));oe(new Ji({id:"focusSuggestion",precondition:Z.and(Ve.Visible,Ve.HasFocusedSuggestion.negate()),handler:o=>o.focusSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));oe(new Ji({id:"focusAndAcceptSuggestion",precondition:Z.and(Ve.Visible,Ve.HasFocusedSuggestion.negate()),handler:o=>{o.focusSuggestion(),o.acceptSelectedSuggestion(!0,!1)}}));oe(new Ji({id:"toggleSuggestionDetails",precondition:Z.and(Ve.Visible,Ve.HasFocusedSuggestion),handler:o=>o.toggleSuggestionDetails(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:ed,group:"right",order:1,when:Z.and(Ve.DetailsVisible,Ve.CanResolve),title:p("detail.more","show less")},{menuId:ed,group:"right",order:1,when:Z.and(Ve.DetailsVisible.toNegated(),Ve.CanResolve),title:p("detail.less","show more")}]}));oe(new Ji({id:"toggleExplainMode",precondition:Ve.Visible,handler:o=>o.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));oe(new Ji({id:"toggleSuggestionFocus",precondition:Ve.Visible,handler:o=>o.toggleSuggestionFocus(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:2570,mac:{primary:778}}}));oe(new Ji({id:"insertBestCompletion",precondition:Z.and(D.textInputFocus,Z.equals("config.editor.tabCompletion","on"),nv.AtEnd,Ve.Visible.toNegated(),Ph.OtherSuggestions.toNegated(),di.InSnippetMode.toNegated()),handler:(o,e)=>{o.triggerSuggestAndAcceptBest(as(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:no,primary:2}}));oe(new Ji({id:"insertNextSuggestion",precondition:Z.and(D.textInputFocus,Z.equals("config.editor.tabCompletion","on"),Ph.OtherSuggestions,Ve.Visible.toNegated(),di.InSnippetMode.toNegated()),handler:o=>o.acceptNextSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:2}}));oe(new Ji({id:"insertPrevSuggestion",precondition:Z.and(D.textInputFocus,Z.equals("config.editor.tabCompletion","on"),Ph.OtherSuggestions,Ve.Visible.toNegated(),di.InSnippetMode.toNegated()),handler:o=>o.acceptPrevSuggestion(),kbOpts:{weight:no,kbExpr:D.textInputFocus,primary:1026}}));ee(class extends de{constructor(){super({id:"editor.action.resetSuggestSize",label:p("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(o,e){var t;(t=Zo.get(e))===null||t===void 0||t.resetWidgetSize()}});class S$ extends z{get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Zo.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(r,a,l)=>{const c=this.editor.getModel(),d=S1(c,this.suggestControllerPreselector());if(!d)return-1;const h=W.lift(a),g=l.map((m,b)=>{const _=mH(n,h,m,this.isShiftKeyPressed),C=S1(c,_?.normalizedInlineCompletion);if(!C)return;const v=Ofe(d.range,C.range)&&d.insertText.startsWith(C.insertText);return{index:b,valid:v,prefixLength:C.insertText.length,suggestItem:m}}).filter(m=>m&&m.valid),f=JH(g,Ab(m=>m.prefixLength,ZX));return f?f.index:-1}}));let i=!1;const s=u(()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))},"bindToSuggestWidget");this._register(pe.once(n.model.onDidTrigger)(r=>{s()}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();let n=!1;Hfe(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Zo.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return mH(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Zo.get(this.editor);e?.stopForceRenderingAbove()}forceRenderingAbove(){const e=Zo.get(this.editor);e?.forceRenderingAbove()}}u(S$,"SuggestWidgetInlineCompletionProvider");function Ofe(o,e){return e.startLineNumber===o.startLineNumber&&e.startColumn===o.startColumn&&(e.endLineNumber<o.endLineNumber||e.endLineNumber===o.endLineNumber&&e.endColumn<=o.endColumn)}u(Ofe,"rangeStartsWith");function Hfe(o,e){return o===e?!0:!o||!e?!1:o.completionItemKind===e.completionItemKind&&o.isSnippetText===e.isSnippetText&&ofe(o.normalizedInlineCompletion,e.normalizedInlineCompletion)}u(Hfe,"suggestItemInfoEquals");function mH(o,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:T.fromPositions(e,e),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:i}=t.completion,s=!1;if(t.completion.insertTextRules&4){const a=new Zl().parse(i),l=o.editor.getModel();if(a.children.length>100)return;x1.adjustWhitespace(l,e,!0,a),i=a.toString(),s=!0}const r=o.getOverwriteInfo(t,n);return{isSnippetText:s,completionItemKind:t.completion.kind,normalizedInlineCompletion:{insertText:i,filterText:i,range:T.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}u(mH,"suggestionToSuggestItemInfo");var Vfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},bH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let BA=u(class extends UR{get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}constructor(e,t,n){super(e),this.cache=t,this.languageFeaturesService=n,this.suggestionInlineCompletionSource=this._register(new S$(this.editor,()=>{var i,s,r;return(i=this.cache.value)===null||i===void 0||i.updateRanges(),(r=(s=this.cache.value)===null||s===void 0?void 0:s.completions[0])===null||r===void 0?void 0:r.toLiveInlineCompletion()})),this.updateOperation=this._register(new Fn),this.updateCacheSoon=this._register(new yt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Bfe(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Oe(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}isSuggestionPreviewEnabled(){return this.editor.getOption(113).preview}updateCache(){return bH(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.insertText,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition();if(e.selectedItem.isSnippetText||e.selectedItem.completionItemKind===27||e.selectedItem.completionItemKind===20||e.selectedItem.completionItemKind===23){this.cache.clear();return}const i=On(r=>bH(this,void 0,void 0,function*(){let a;try{a=yield d$(this.languageFeaturesService.inlineCompletionsProvider,n,this.editor.getModel(),{triggerKind:Hs.Automatic,selectedSuggestionInfo:t},r)}catch(l){He(l);return}if(r.isCancellationRequested){a.dispose();return}this.cache.setValue(this.editor,a,Hs.Automatic),this.onDidChangeEmitter.fire()})),s=new GR(i,Hs.Automatic);this.updateOperation.value=s,yield i,this.updateOperation.value===s&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),s=this.editor.getModel(),r=S1(s,(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),a=this.suggestionInlineCompletionSource.state,l=S1(s,(n=a?.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),c=r&&l&&r.insertText.startsWith(l.insertText)&&Ufe(r.range,l.range);if(!i&&!c)return;const d=c?r:l||r,h=c?d.insertText.length-l.insertText.length:0;return this.toGhostText(d,h)}toGhostText(e,t){const n=this.editor.getOptions().get(113).previewMode;return e?r$(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new WR(e.range.endLineNumber,[],this.minReservedLineCount):void 0}},"SuggestWidgetPreviewModel");BA=Vfe([Wfe(2,he)],BA);function Bfe(o){return o.reduce((e,t)=>e+t,0)}u(Bfe,"sum");function Ufe(o,e){return o.startLineNumber===e.startLineNumber&&o.startColumn===e.startColumn&&(o.endLineNumber===e.endLineNumber&&o.endColumn>=e.endColumn||o.endLineNumber>e.endLineNumber)}u(Ufe,"rangeExtends");var Gfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class T$ extends z{constructor(){super(...arguments),this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Fn)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?tfe(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}u(T$,"DelegatingModel");let UA=u(class extends T${get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new x$),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(BA,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(PA,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new W(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Hs.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}commitInlineCompletionPartially(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestionPartially()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}},"GhostTextModel");UA=Gfe([zfe(1,Re)],UA);class x$ extends z{constructor(){super(...arguments),this.onDidChangeEmitter=new F,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Fn)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new l$(t,e,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}u(x$,"SharedInlineCompletionCache");var Kfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},IL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},NL;const _H=(NL=window.trustedTypes)===null||NL===void 0?void 0:NL.createPolicy("editorGhostText",{createHTML:o=>o});let GA=u(class extends z{constructor(e,t,n,i,s){super(),this.editor=e,this.model=t,this.instantiationService=n,this.languageService=i,this.audioCueService=s,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(E$,this.editor)),this.additionalLinesWidget=this._register(new k$(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new L$(this.editor)),this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(31)||r.hasChanged(112)||r.hasChanged(94)||r.hasChanged(89)||r.hasChanged(49)||r.hasChanged(48)||r.hasChanged(64))&&this.update()})),this._register(Oe(()=>{var r;this.disposed=!0,this.update(),(r=this.viewMoreContentWidget)===null||r===void 0||r.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>this.update(!0))),this.update(!0)}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(e){var t;const n=this.model.ghostText;if(!this.editor.hasModel()||!n||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear(),this.replacementDecoration.clear();return}const i=new Array,s=new Array;function r(d,h){if(s.length>0){const g=s[s.length-1];h&&g.decorations.push(new ls(g.content.length+1,g.content.length+1+d[0].length,h,0)),g.content+=d[0],d=d.slice(1)}for(const g of d)s.push({content:g,decorations:h?[new ls(1,g.length+1,h,0)]:[]})}u(r,"addToAdditionalLines"),n instanceof BR?this.replacementDecoration.setDecorations([{range:new T(n.lineNumber,n.columnStart,n.lineNumber,n.columnStart+n.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);const a=this.editor.getModel().getLineContent(n.lineNumber);let l,c=0;for(const d of n.parts){let h=d.lines;l===void 0?(i.push({column:d.column,text:h[0],preview:d.preview}),h=h.slice(1)):r([a.substring(c,d.column-1)],void 0),h.length>0&&(r(h,"ghost-text"),l===void 0&&d.column<=a.length&&(l=d.column)),c=d.column-1}l!==void 0&&r([a.substring(c)],void 0),this.partsWidget.setParts(n.lineNumber,i,l!==void 0?{column:l,length:a.length+1-l}:void 0),this.additionalLinesWidget.updateLines(n.lineNumber,s,n.additionalReservedLineCount),e&&this.audioCueService.playAudioCue(pt.inlineSuggestion).then(()=>{var d;if(this.editor.getOption(6)){const h=(d=this.editor.getModel())===null||d===void 0?void 0:d.getLineContent(n.lineNumber);h&&ri(n.renderForScreenReader(h))}}),(t=this.viewMoreContentWidget)===null||t===void 0||t.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(e,t,n){const i=this.editor.getOption(48),s=document.createElement("div");s.className="suggest-preview-additional-widget",ai(s,i);const r=document.createElement("span");r.className="content-spacer",r.append(t),s.append(r);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),s.append(a);const l=new X,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${n} lines…`),l.add(pn(c,"mousedown",d=>{var h;(h=this.model)===null||h===void 0||h.setExpanded(!0),d.preventDefault(),this.editor.focus()})),s.append(c),new D$(this.editor,e,s,l)}},"GhostTextWidget");GA=Kfe([IL(2,Re),IL(3,Wt),IL(4,K1)],GA);class L${constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations(t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)})}clear(){this.setDecorations([])}dispose(){this.clear()}}u(L$,"DisposableDecorations");class E${constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations(e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])})}setParts(e,t,n){if(!this.editor.getModel())return;const s=new Array;n&&s.push({range:T.fromPositions(new W(e,n.column),new W(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations(r=>{this.decorationIds=r.deltaDecorations(this.decorationIds,t.map(a=>({range:T.fromPositions(new W(e,a.column)),options:{description:"ghost-text",after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:Ar.Left},showIfCollapsed:!0}})).concat(s))})}}u(E$,"DecorationsWidget");class k${get viewZoneId(){return this._viewZoneId}constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:s}=i.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");jfe(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}u(k$,"AdditionalLinesWidget");function jfe(o,e,t,n,i){const s=n.get(31),r=n.get(112),a="none",l=n.get(89),c=n.get(49),d=n.get(48),h=n.get(64),g=new jh(1e4);g.appendString('<div class="suggest-preview-text">');for(let b=0,_=t.length;b<_;b++){const C=t[b],v=C.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(b*h)),g.appendString('px;width:1000000px;">');const y=wv(v),w=Vf(v),x=En.createEmpty(v,i);Fv(new nc(d.isMonospace&&!s,d.canUseHalfwidthRightwardsArrow,v,!1,y,w,0,x,C.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==vs.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),ai(o,d);const f=g.build(),m=_H?_H.createHTML(f):f;o.innerHTML=m}u(jfe,"renderLines");class D$ extends z{constructor(e,t,n,i){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(Oe(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}u(D$,"ViewMoreLinesContentWidget");var M$=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},L1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Fd=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Gt=u(class zA extends z{static get(e){return e.getContribution(zA.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.triggeredExplicitly=!1,this.activeController=this._register(new Fn),this.activeModelDidChangeEmitter=this._register(new F),this.firstUndoableVersionId=void 0,this.alwaysShowInlineSuggestionToolbar=zA.alwaysShowInlineSuggestionToolbar.bindTo(this.contextKeyService),this._register(this.editor.onDidChangeModelContent(i=>{var s;(!i.isUndoing||this.firstUndoableVersionId&&this.editor.getModel().getAlternativeVersionId()<this.firstUndoableVersionId)&&((s=this.activeController.value)===null||s===void 0||s.contextKeys.canUndoInlineSuggestion.reset(),this.firstUndoableVersionId=void 0)})),this._register(this.editor.onDidChangeCursorPosition(i=>{var s;i.reason===3&&((s=this.activeController.value)===null||s===void 0||s.contextKeys.canUndoInlineSuggestion.reset(),this.firstUndoableVersionId=void 0)})),this._register(this.editor.onDidChangeModel(()=>{this.update()})),this._register(this.editor.onDidChangeConfiguration(i=>{(i.hasChanged(113)||i.hasChanged(60))&&this.update()})),this.update()}update(){const e=this.editor.getOption(113),t=this.editor.getOption(60);this.alwaysShowInlineSuggestionToolbar.set(t.showToolbar==="always");const n=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly);n!==!!this.activeController.value&&(this.activeController.value=void 0,this.activeController.value=n?this.instantiationService.createInstance(KA,this.editor):void 0,this.activeModelDidChangeEmitter.fire())}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.update(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commitPartially(){var e,t,n;const i=this.firstUndoableVersionId;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletionPartially(),(n=(t=this.activeController)===null||t===void 0?void 0:t.value)===null||n===void 0||n.contextKeys.canUndoInlineSuggestion.set(!0),this.firstUndoableVersionId=i??this.editor.getModel().getAlternativeVersionId()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}},"GhostTextController");Gt.inlineSuggestionVisible=new ue("inlineSuggestionVisible",!1,p("inlineSuggestionVisible","Whether an inline suggestion is visible"));Gt.inlineSuggestionHasIndentation=new ue("inlineSuggestionHasIndentation",!1,p("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Gt.inlineSuggestionHasIndentationLessThanTabSize=new ue("inlineSuggestionHasIndentationLessThanTabSize",!0,p("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Gt.canUndoInlineSuggestion=new ue("canUndoInlineSuggestion",!1,p("canUndoInlineSuggestion","Whether undo would undo an inline suggestion"));Gt.alwaysShowInlineSuggestionToolbar=new ue("alwaysShowInlineSuggestionToolbar",!1,p("alwaysShowInlineSuggestionToolbar","Whether the inline suggestion toolbar should always be visible"));Gt.ID="editor.contrib.ghostTextController";Gt=M$([L1(1,Re),L1(2,Me)],Gt);class A${constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Gt.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Gt.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Gt.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.canUndoInlineSuggestion=Gt.canUndoInlineSuggestion.bindTo(this.contextKeyService)}}u(A$,"GhostTextContextKeys");let KA=u(class extends z{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new A$(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(UA,this.editor)),this.widget=this._register(this.instantiationService.createInstance(GA,this.editor,this.model)),this._register(Oe(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:s,lines:r}=i.parts[0],a=r[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(s<=l){let d=Pi(a);d===-1&&(d=a.length-1),t=d>0;const h=this.editor.getModel().getOptions().tabSize;n=Sn.visibleColumnFromColumn(a,d+1,h)<h}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}},"ActiveGhostTextController");KA=M$([L1(1,Re),L1(2,Me)],KA);class y0 extends de{constructor(){super({id:y0.ID,label:p("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Z.and(D.writable,Gt.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n&&n.showNextInlineCompletion()})}}u(y0,"ShowNextInlineSuggestionAction");y0.ID=HK;class w0 extends de{constructor(){super({id:w0.ID,label:p("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Z.and(D.writable,Gt.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n&&n.showPreviousInlineCompletion()})}}u(w0,"ShowPreviousInlineSuggestionAction");w0.ID=OK;class I$ extends de{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:D.writable})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n?.trigger()})}}u(I$,"TriggerInlineSuggestionAction");class N$ extends de{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:p("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Z.and(D.writable,Gt.inlineSuggestionVisible),kbOpts:{weight:100+1,primary:2065},menuOpts:[{menuId:A.InlineSuggestionToolbar,title:p("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n&&n.commitPartially()})}}u(N$,"AcceptNextWordOfInlineCompletion");class R$ extends de{constructor(){super({id:FK,label:p("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:Gt.inlineSuggestionVisible,menuOpts:[{menuId:A.InlineSuggestionToolbar,title:p("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Z.and(Gt.inlineSuggestionVisible,D.tabMovesFocus.toNegated(),Gt.inlineSuggestionHasIndentationLessThanTabSize)}})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n&&(n.commit(),n.editor.focus())})}}u(R$,"AcceptInlineCompletion");class S0 extends de{constructor(){super({id:S0.ID,label:p("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:Gt.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=Gt.get(t);n&&n.hide()})}}u(S0,"HideInlineCompletion");S0.ID="editor.action.inlineSuggest.hide";class T0 extends Ya{constructor(){super({id:T0.ID,title:p("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:A.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Gt.alwaysShowInlineSuggestionToolbar})}run(e,t){return Fd(this,void 0,void 0,function*(){const n=e.get(lt),s=n.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";n.updateValue("editor.inlineSuggest.showToolbar",s)})}}u(T0,"ToggleAlwaysShowInlineSuggestionToolbar");T0.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";class P$ extends de{constructor(){super({id:"editor.action.inlineSuggest.undo",label:p("action.inlineSuggest.undo","Undo Accept Word"),alias:"Undo Accept Word",precondition:Z.and(D.writable,Gt.canUndoInlineSuggestion),kbOpts:{weight:100+1,primary:2063,kbExpr:Z.and(D.writable,Gt.canUndoInlineSuggestion)},menuOpts:[{menuId:A.InlineSuggestionToolbar,title:p("undoAcceptWord","Undo Accept Word"),group:"secondary",order:3}]})}run(e,t){var n;return Fd(this,void 0,void 0,function*(){(n=t.getModel())===null||n===void 0||n.undo()})}}u(P$,"UndoAcceptPart");var $fe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Km=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};class F${constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}requestExplicitContext(){var e,t,n;(n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0||n.ensureUpdateWithExplicitContext()}getInlineCompletionsCount(){var e,t;const n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value;if(n?.hasBeenTriggeredExplicitly)return n?.getInlineCompletionsCountSync()}getInlineCompletionIndex(){var e,t,n;return(n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0?void 0:n.currentlySelectedIndex}onDidChange(e){var t,n;return((n=(t=this.controller.activeModel)===null||t===void 0?void 0:t.activeInlineCompletionsModel)===null||n===void 0?void 0:n.onDidChange(e))||z.None}get commands(){var e,t,n;return((n=(t=(e=this.controller.activeModel)===null||e===void 0?void 0:e.activeInlineCompletionsModel)===null||t===void 0?void 0:t.completionSession.value)===null||n===void 0?void 0:n.commands)||[]}}u(F$,"InlineCompletionsHover");let jA=u(class{constructor(e,t,n,i,s,r){this._editor=e,this._languageService=t,this._openerService=n,this.accessibilityService=i,this._instantiationService=s,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Gt.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new Jb(1e3,this,T.fromPositions(this._editor.getModel().validatePosition(i.positionBefore||i.position)),e.event.posx,e.event.posy,!1)}return n.type===7&&t.shouldShowHoverAt(n.range)?new Jb(1e3,this,n.range,e.event.posx,e.event.posy,!1):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new Jb(1e3,this,n.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(60).showToolbar==="always")return[];const n=Gt.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new F$(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new X,i=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,i,n);const s=this._instantiationService.createInstance(Ih,this._editor,!1);return e.fragment.appendChild(s.getDomNode()),s.update(null,i.getInlineCompletionIndex()||0,i.getInlineCompletionsCount(),i.commands),i.requestExplicitContext(),n.add(i.onDidChange(()=>{s.update(null,i.getInlineCompletionIndex()||0,i.getInlineCompletionsCount(),i.commands)})),n}renderScreenReaderText(e,t,n){const i=ie,s=i("div.hover-row.markdown-hover"),r=q(s,i("div.hover-contents",{["aria-live"]:"assertive"})),a=n.add(new Jl({editor:this._editor},this._languageService,this._openerService)),l=u(c=>{n.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=p("inlineSuggestionFollows","Suggestion:"),h=n.add(a.render(new Gi().appendText(d).appendCodeblock("text",c)));r.replaceChildren(h.element)},"render");n.add(pe.runAndSubscribe(c=>t.onDidChange(c),()=>{var c,d;const h=(d=(c=t.controller.activeModel)===null||c===void 0?void 0:c.inlineCompletionsModel)===null||d===void 0?void 0:d.ghostText;if(h){const g=this._editor.getModel().getLineContent(h.lineNumber);l(h.renderForScreenReader(g))}else nr(r)})),e.fragment.appendChild(s)}},"InlineCompletionsHoverParticipant");jA=$fe([Km(1,Wt),Km(2,Ms),Km(3,Md),Km(4,Re),Km(5,Ao)],jA);ct(Gt.ID,Gt,3);ee(I$);ee(y0);ee(w0);ee(N$);ee(R$);ee(S0);ee(P$);Mn(T0);dg.register(jA);function fs(o,e){let t=0;for(let n=0;n<o.length;n++)o.charAt(n)==="	"?t+=e:t++;return t}u(fs,"getSpaceCnt");function e_(o,e,t){o=o<0?0:o;let n="";if(!t){const i=Math.floor(o/e);o=o%e;for(let s=0;s<i;s++)n+="	"}for(let i=0;i<o;i++)n+=" ";return n}u(e_,"generateIndent");var qfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yfe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function O$(o,e,t,n,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(o.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,o.getLineCount());t<=n&&s.unIndentedLinePattern;){const _=o.getLineContent(t);if(!s.unIndentedLinePattern.test(_))break;t++}if(t>n-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=o.getOptions(),c=u((_,C)=>(C=C||1,po.shiftIndent(_,_.length+C,r,a,l)),"shiftIndent"),d=u((_,C)=>(C=C||1,po.unshiftIndent(_,_.length+C,r,a,l)),"unshiftIndent"),h=[];let g;const f=o.getLineContent(t);let m=f;if(i!=null){g=i;const _=xt(f);m=g+f.substring(_.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(m)&&(g=d(g),m=g+f.substring(_.length)),f!==m&&h.push(Ht.replaceMove(new ge(t,1,t,_.length+1),yw(g,a,l)))}else g=xt(f);let b=g;s.increaseIndentPattern&&s.increaseIndentPattern.test(m)?(b=c(b),g=c(g)):s.indentNextLinePattern&&s.indentNextLinePattern.test(m)&&(b=c(b)),t++;for(let _=t;_<=n;_++){const C=o.getLineContent(_),v=xt(C),y=b+C.substring(v.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(y)&&(b=d(b),g=d(g)),v!==b&&h.push(Ht.replaceMove(new ge(_,1,_,v.length+1),yw(b,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(C))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(y)?(g=c(g),b=g):s.indentNextLinePattern&&s.indentNextLinePattern.test(y)?b=c(b):b=g)}return h}u(O$,"getReindentEditOperations");class x0 extends de{constructor(){super({id:x0.ID,label:p("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:D.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new U$(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}u(x0,"IndentationToSpacesAction");x0.ID="editor.action.indentationToSpaces";class L0 extends de{constructor(){super({id:L0.ID,label:p("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:D.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new G$(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}u(L0,"IndentationToTabsAction");L0.ID="editor.action.indentationToTabs";class HT extends de{constructor(e,t,n){super(n),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const n=e.get(Ja),i=e.get(en),s=t.getModel();if(!s)return;const r=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=s.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===r.tabSize&&d===a.tabSize?p("configuredTabSize","Configured Tab Size"):d===r.tabSize?p("defaultTabSize","Default Tab Size"):d===a.tabSize?p("currentTabSize","Current Tab Size"):void 0})),c=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(l,{placeHolder:p({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&s&&!s.isDisposed()){const h=parseInt(d.label,10);this.displaySizeOnly?s.updateOptions({tabSize:h}):s.updateOptions({tabSize:h,indentSize:h,insertSpaces:this.insertSpaces})}})},50)}}u(HT,"ChangeIndentationSizeAction");class E0 extends HT{constructor(){super(!1,!1,{id:E0.ID,label:p("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}u(E0,"IndentUsingTabs");E0.ID="editor.action.indentUsingTabs";class k0 extends HT{constructor(){super(!0,!1,{id:k0.ID,label:p("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}u(k0,"IndentUsingSpaces");k0.ID="editor.action.indentUsingSpaces";class D0 extends HT{constructor(){super(!0,!0,{id:D0.ID,label:p("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}u(D0,"ChangeTabDisplaySize");D0.ID="editor.action.changeTabDisplaySize";class M0 extends de{constructor(){super({id:M0.ID,label:p("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(en),i=t.getModel();if(!i)return;const s=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(s.insertSpaces,s.tabSize)}}u(M0,"DetectIndentation");M0.ID="editor.action.detectIndentation";class H$ extends de{constructor(){super({id:"editor.action.reindentlines",label:p("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:D.writable})}run(e,t){const n=e.get(zt),i=t.getModel();if(!i)return;const s=O$(i,n,1,i.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}u(H$,"ReindentLinesAction");class V$ extends de{constructor(){super({id:"editor.action.reindentselectedlines",label:p("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:D.writable})}run(e,t){const n=e.get(zt),i=t.getModel();if(!i)return;const s=t.getSelections();if(s===null)return;const r=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=O$(i,n,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}u(V$,"ReindentSelectedLinesAction");class W${constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const i of this._edits)t.addEditOperation(T.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(W$,"AutoIndentOnPasteCommand");let sv=u(class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new X,this.callOnModel=new X,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(10)<4||this.editor.getOption(53))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(10),{tabSize:s,indentSize:r,insertSpaces:a}=n.getOptions(),l=[],c={shiftIndent:f=>po.shiftIndent(f,f.length+1,s,r,a),unshiftIndent:f=>po.unshiftIndent(f,f.length+1,s,r,a)};let d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let h=n.getLineContent(d);if(!/\S/.test(h.substring(0,e.startColumn-1))){const f=Bb(i,n,n.getLanguageId(),d,c,this._languageConfigurationService);if(f!==null){const m=xt(h),b=fs(f,s),_=fs(m,s);if(b!==_){const C=e_(b,s,a);l.push({range:new T(d,1,d,m.length+1),text:C}),h=C+h.substr(m.length)}else{const C=x9(n,d,this._languageConfigurationService);if(C===0||C===8)return}}}const g=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){const m=Bb(i,{tokenization:{getLineTokens:b=>n.tokenization.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,_)=>n.getLanguageIdAtPosition(b,_)},getLineContent:b=>b===g?h:n.getLineContent(b)},n.getLanguageId(),d+1,c,this._languageConfigurationService);if(m!==null){const b=fs(m,s),_=fs(xt(n.getLineContent(d+1)),s);if(b!==_){const C=b-_;for(let v=d+1;v<=e.endLineNumber;v++){const y=n.getLineContent(v),w=xt(y),M=fs(w,s)+C,L=e_(M,s,a);L!==w&&l.push({range:new T(v,1,v,w.length+1),text:L})}}}}if(l.length>0){this.editor.pushUndoStop();const f=new W$(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",f),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const s=i.findTokenIndexAtOffset(n);if(s>=0&&i.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},"AutoIndentOnPaste");sv.ID="editor.contrib.autoIndentOnPaste";sv=qfe([Yfe(1,zt)],sv);function B$(o,e,t,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let i="";for(let r=0;r<t;r++)i+=" ";const s=new RegExp(i,"gi");for(let r=1,a=o.getLineCount();r<=a;r++){let l=o.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=o.getLineMaxColumn(r)),l===1)continue;const c=new T(r,1,r,l),d=o.getValueInRange(c),h=n?d.replace(/\t/ig,i):d.replace(s,"	");e.addEditOperation(c,h)}}u(B$,"getIndentationEditOperations");class U${constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),B$(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}u(U$,"IndentationToSpacesCommand");class G${constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),B$(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}u(G$,"IndentationToTabsCommand");ct(sv.ID,sv,2);ee(x0);ee(L0);ee(E0);ee(k0);ee(D0);ee(M0);ee(H$);ee(V$);var E1=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class $R{constructor(e,t){this.range=e,this.direction=t}}u($R,"InlayHintAnchor");class VT{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new VT(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return E1(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return E1(this,void 0,void 0,function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=i?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=i?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(i){$n(i),this._isResolved=!1}})}}u(VT,"InlayHintItem");class Op{static create(e,t,n,i){return E1(this,void 0,void 0,function*(){const s=[],r=e.ordered(t).reverse().map(a=>n.map(l=>E1(this,void 0,void 0,function*(){try{const c=yield a.provideInlayHints(t,l,i);c?.hints.length&&s.push([c,a])}catch(c){$n(c)}})));if(yield Promise.all(r.flat()),i.isCancellationRequested||t.isDisposed())throw new ec;return new Op(n,s,t)})}constructor(e,t,n){this._disposables=new X,this.ranges=e,this.provider=new Set;const i=[];for(const[s,r]of t){this._disposables.add(s),this.provider.add(r);for(const a of s.hints){const l=n.validatePosition(a.position);let c="before";const d=Op._getRangeAtPosition(n,l);let h;d.getStartPosition().isBefore(l)?(h=T.fromPositions(d.getStartPosition(),l),c="after"):(h=T.fromPositions(l,d.getEndPosition()),c="before"),i.push(new VT(a,new $R(h,c),r))}}this.items=i.sort((s,r)=>W.compare(s.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new T(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);const s=e.tokenization.getLineTokens(n),r=t.column-1,a=s.findTokenIndexAtOffset(r);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===r&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new T(n,l+1,n,c+1)}}u(Op,"InlayHintsFragments");function Xfe(o){return ve.from({scheme:Ue.command,path:o.id,query:o.arguments&&encodeURIComponent(JSON.stringify(o.arguments))}).toString()}u(Xfe,"asCommandLink");var t_=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function Zfe(o,e,t,n){var i;return t_(this,void 0,void 0,function*(){const s=o.get(gs),r=o.get(Zr),a=o.get(dn),l=o.get(Re),c=o.get(Cn);if(yield n.item.resolve(Ze.None),!n.part.location)return;const d=n.part.location,h=[],g=new Set(Ri.getMenuItems(A.EditorContext).map(m=>qg(m)?m.command.id:b0()));for(const m of Si.all())g.has(m.desc.id)&&h.push(new cs(m.desc.id,ir.label(m.desc,{renderShortTitle:!0}),void 0,!0,()=>t_(this,void 0,void 0,function*(){const b=yield s.createModelReference(d.uri);try{const _=new Mh(b.object.textEditorModel,T.getStartPosition(d.range)),C=n.item.anchor.range;yield l.invokeFunction(m.runEditorCommand.bind(m),e,_,C)}finally{b.dispose()}})));if(n.part.command){const{command:m}=n.part;h.push(new Pn),h.push(new cs(m.id,m.title,void 0,!0,()=>t_(this,void 0,void 0,function*(){var b;try{yield a.executeCommand(m.id,...(b=m.arguments)!==null&&b!==void 0?b:[])}catch(_){c.notify({severity:ZN.Error,source:n.item.provider.displayName,message:_})}})))}const f=e.getOption(122);r.showContextMenu({domForShadowRoot:f&&(i=e.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:()=>{const m=Kn(t);return{x:m.left,y:m.top+m.height+8}},getActions:()=>h,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}u(Zfe,"showGoToContextMenu");function z$(o,e,t,n){return t_(this,void 0,void 0,function*(){const s=yield o.get(gs).createModelReference(n.uri);yield t.invokeWithinContext(r=>t_(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=r.get(Me),c=hs.inPeekEditor.getValue(l),d=!a&&t.getOption(84)&&!c;return new fm({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new Mh(s.object.textEditorModel,T.getStartPosition(n.range)),T.lift(n.range))})),s.dispose()})}u(z$,"goToDefinitionWithLocation");var Jfe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ag=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ug=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class ov{constructor(){this._entries=new ic(50)}get(e){const t=ov._key(e);return this._entries.get(t)}set(e,t){const n=ov._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}u(ov,"InlayHintsCache");const K$=nt("IInlayHintsCache");at(K$,ov,1);class k1{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}u(k1,"RenderedInlayHintLabelPart");class j${constructor(e,t){this.part=e,this.hasTriggerModifier=t}}u(j$,"ActiveInlayHintInfo");let Fh=u(class $A{static get(e){var t;return(t=e.getContribution($A.ID))!==null&&t!==void 0?t:void 0}constructor(e,t,n,i,s,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=s,this._notificationService=r,this._instaService=a,this._disposables=new X,this._sessionDisposables=new X,this._decorationsMetadata=new Map,this._ruleFactory=new Zp(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(135)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(135);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(Oe(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let i;const s=new Set,r=new yt(()=>Ug(this,void 0,void 0,function*(){const a=Date.now();i?.dispose(!0),i=new ci;const l=t.onWillDispose(()=>i?.cancel());try{const c=i.token,d=yield Op.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const h of d.provider)typeof h.onDidChangeInlayHints=="function"&&!s.has(h)&&(s.add(h),this._sessionDisposables.add(h.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){He(c)}finally{i.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add(Oe(()=>i?.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(r.delay,1250);r.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(ya.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const h=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(h);this._updateHintsDecorators([h.getFullModelRange()],g),r.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new X,t=e.add(new u0(this._editor)),n=new X;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[s]=i,r=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!r||!a){n.clear();return}const l=new ci;n.add(Oe(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new j$(r,s.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,d=new T(c,1,c,a.getLineMaxColumn(c)),h=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],h),n.add(Oe(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],h)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(i=>Ug(this,void 0,void 0,function*(){const s=this._getInlayHintLabelPart(i);if(s){const r=s.part;r.location?this._instaService.invokeFunction(z$,i,this._editor,r.location):iE.is(r.command)&&(yield this._invokeCommand(r.command,s.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>Ug(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(Ze.None),Ei(n.item.hint.textEdits))){const i=n.item.hint.textEdits.map(s=>Ht.replace(T.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",i),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>Ug(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(Zfe,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof ql&&n?.attachedData instanceof k1)return n.attachedData}_invokeCommand(e,t){var n;return Ug(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(i){this._notificationService.notify({severity:ZN.Error,source:t.provider.displayName,message:i})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;const s=e.getDecorationRange(n);if(s){const r=new $R(s,i.item.anchor.direction),a=i.item.with({anchor:r});t.set(i.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const s of n.sort(T.compareRangesUsingStarts)){const r=t.validateRange(new T(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));i.length===0||!T.areIntersectingOrTouching(i[i.length-1],r)?i.push(r):i[i.length-1]=T.plusRange(i[i.length-1],r)}return i}_updateHintsDecorators(e,t){var n,i;const s=[],r=u((b,_,C,v,y)=>{const w={content:C,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:_.className,cursorStops:v,attachedData:y};s.push({item:b,classNameRef:_,decoration:{range:b.anchor.range,options:{description:"InlayHint",showIfCollapsed:b.anchor.range.isEmpty(),collapseOnReplaceEdit:!b.anchor.range.isEmpty(),stickiness:0,[b.anchor.direction]:this._activeRenderMode===0?w:void 0}}})},"addInjectedText"),a=u((b,_)=>{const C=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(b,C," ",_?Ar.Right:Ar.None)},"addInjectedWhitespace"),{fontSize:l,fontFamily:c,padding:d,isUniform:h}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,c);for(const b of t){b.hint.paddingLeft&&a(b,!1);const _=typeof b.hint.label=="string"?[{label:b.hint.label}]:b.hint.label;for(let C=0;C<_.length;C++){const v=_[C],y=C===0,w=C===_.length-1,x={fontSize:`${l}px`,fontFamily:`var(${g}), ${xs.fontFamily}`,verticalAlign:h?"baseline":"middle"};Ei(b.hint.textEdits)&&(x.cursor="default"),this._fillInColors(x,b.hint),(v.command||v.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===b&&this._activeInlayHintPart.part.index===C&&(x.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(x.color=on(Wte),x.cursor="pointer")),d&&(y&&w?(x.padding=`1px ${Math.max(1,l/4)|0}px`,x.borderRadius=`${l/4|0}px`):y?(x.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,x.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):w?(x.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,x.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):x.padding="1px 0 1px 0"),r(b,this._ruleFactory.createClassNameRef(x),Qfe(v.label),w&&!b.hint.paddingRight?Ar.Right:Ar.None,new k1(b,C))}if(b.hint.paddingRight&&a(b,!0),s.length>$A._MAX_DECORATORS)break}const f=[];for(const b of e)for(const{id:_}of(i=this._editor.getDecorationsInRange(b))!==null&&i!==void 0?i:[]){const C=this._decorationsMetadata.get(_);C&&(f.push(_),C.classNameRef.dispose(),this._decorationsMetadata.delete(_))}const m=zr.capture(this._editor);this._editor.changeDecorations(b=>{const _=b.deltaDecorations(f,s.map(C=>C.decoration));for(let C=0;C<_.length;C++){const v=s[C];this._decorationsMetadata.set(_[C],v)}}),m.restore(this._editor)}_fillInColors(e,t){t.kind===iw.Parameter?(e.backgroundColor=on(zte),e.color=on(Gte)):t.kind===iw.Type?(e.backgroundColor=on(Ute),e.color=on(Bte)):(e.backgroundColor=on(Ml),e.color=on(Dl))}_getLayoutInfo(){const e=this._editor.getOption(135),t=e.padding,n=this._editor.getOption(50),i=this._editor.getOption(47);let s=e.fontSize;(!s||s<5||s>n)&&(s=n);const r=e.fontFamily||i;return{fontSize:s,fontFamily:r,padding:t,isUniform:!t&&r===i&&s===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},"InlayHintsController");Fh.ID="editor.contrib.InlayHints";Fh._MAX_DECORATORS=1500;Fh=Jfe([Ag(1,he),Ag(2,Po),Ag(3,K$),Ag(4,dn),Ag(5,Cn),Ag(6,Re)],Fh);function Qfe(o){const e=" ";return o.replace(/[ \t]/g,e)}u(Qfe,"fixSpace");ot.registerCommand("_executeInlayHintProvider",(o,...e)=>Ug(void 0,void 0,void 0,function*(){const[t,n]=e;Ct(ve.isUri(t)),Ct(T.isIRange(n));const{inlayHintsProvider:i}=o.get(he),s=yield o.get(gs).createModelReference(t);try{const r=yield Op.create(i,s.object.textEditorModel,[T.lift(n)],Ze.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{s.dispose()}}));var epe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jm=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},vH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},tpe=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}};class qA extends Jb{constructor(e,t,n,i){super(10,t,e.item.anchor.range,n,i,!0),this.part=e}}u(qA,"InlayHintsHoverAnchor");let YA=u(class extends m1{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!Fh.get(this._editor)||e.target.type!==6)return null;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return i instanceof ql&&i.attachedData instanceof k1?new qA(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof qA?new gn(i=>vH(this,void 0,void 0,function*(){var s,r,a,l;const{part:c}=e;if(yield c.item.resolve(n),n.isCancellationRequested)return;let d;typeof c.item.hint.tooltip=="string"?d=new Gi().appendText(c.item.hint.tooltip):c.item.hint.tooltip&&(d=c.item.hint.tooltip),d&&i.emitOne(new Ko(this,e.range,[d],!1,0)),Ei(c.item.hint.textEdits)&&i.emitOne(new Ko(this,e.range,[new Gi().appendText(p("hint.dbl","Double-click to insert"))],!1,10001));let h;if(typeof c.part.tooltip=="string"?h=new Gi().appendText(c.part.tooltip):c.part.tooltip&&(h=c.part.tooltip),h&&i.emitOne(new Ko(this,e.range,[h],!1,1)),c.part.location||c.part.command){let _;const v=this._editor.getOption(75)==="altKey"?Ye?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ye?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");c.part.location&&c.part.command?_=new Gi().appendText(p("hint.defAndCommand","Go to Definition ({0}), right click for more",v)):c.part.location?_=new Gi().appendText(p("hint.def","Go to Definition ({0})",v)):c.part.command&&(_=new Gi(`[${p("hint.cmd","Execute Command")}](${Xfe(c.part.command)} "${c.part.command.title}") (${v})`,{isTrusted:!0})),_&&i.emitOne(new Ko(this,e.range,[_],!1,1e4))}const g=yield this._resolveInlayHintLabelPartHover(c,n);try{for(var f=!0,m=tpe(g),b;b=yield m.next(),s=b.done,!s;){l=b.value,f=!1;try{const _=l;i.emitOne(_)}finally{f=!0}}}catch(_){r={error:_}}finally{try{!f&&!s&&(a=m.return)&&(yield a.call(m))}finally{if(r)throw r.error}}})):gn.EMPTY}_resolveInlayHintLabelPartHover(e,t){return vH(this,void 0,void 0,function*(){if(!e.part.location)return gn.EMPTY;const{uri:n,range:i}=e.part.location,s=yield this._resolverService.createModelReference(n);try{const r=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?LR(this._languageFeaturesService.hoverProvider,r,new W(i.startLineNumber,i.startColumn),t).filter(a=>!fp(a.hover.contents)).map(a=>new Ko(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):gn.EMPTY}finally{s.dispose()}})}},"InlayHintsHover");YA=epe([jm(1,Wt),jm(2,Ms),jm(3,lt),jm(4,gs),jm(5,he)],YA);ct(Fh.ID,Fh,1);dg.register(YA);class $${constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new ge(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new ge(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}u($$,"InPlaceReplaceCommand");var npe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ipe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let wd=u(class XA{static get(e){return e.getContribution(XA.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var n;(n=this.currentRequest)===null||n===void 0||n.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let r=i;if(r.startLineNumber!==r.endLineNumber)return;const a=new dG(this.editor,5),l=s.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=On(c=>this.editorWorkerService.navigateValueSet(l,r,t)),this.currentRequest.then(c=>{var d;if(!c||!c.range||!c.value||!a.validate(this.editor))return;const h=T.lift(c.range);let g=c.range;const f=c.value.length-(r.endColumn-r.startColumn);g={startLineNumber:g.startLineNumber,startColumn:g.startColumn,endLineNumber:g.endLineNumber,endColumn:g.startColumn+c.value.length},f>1&&(r=new ge(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+f-1));const m=new $$(h,r,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,m),this.editor.pushUndoStop(),this.decorations.set([{range:g,options:XA.DECORATION}]),(d=this.decorationRemover)===null||d===void 0||d.cancel(),this.decorationRemover=ad(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(He)}).catch(He)):Promise.resolve(void 0)}},"InPlaceReplaceController");wd.ID="editor.contrib.inPlaceReplaceController";wd.DECORATION=Pe.register({description:"in-place-replace",className:"valueSetReplacement"});wd=npe([ipe(1,rr)],wd);class q$ extends de{constructor(){super({id:"editor.action.inPlaceReplace.up",label:p("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=wd.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}u(q$,"InPlaceReplaceUp");class Y$ extends de{constructor(){super({id:"editor.action.inPlaceReplace.down",label:p("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=wd.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}u(Y$,"InPlaceReplaceDown");ct(wd.ID,wd,4);ee(q$);ee(Y$);class X$ extends de{constructor(){super({id:"expandLineSelection",label:p("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:D.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,Vn.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}u(X$,"ExpandLineSelectionAction");ee(X$);class Z${constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=spe(e,this._cursors);for(let i=0,s=n.length;i<s;i++){const r=n[i];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}u(Z$,"TrimTrailingWhitespaceCommand");function spe(o,e){e.sort((r,a)=>r.lineNumber===a.lineNumber?r.column-a.column:r.lineNumber-a.lineNumber);for(let r=e.length-2;r>=0;r--)e[r].lineNumber===e[r+1].lineNumber&&e.splice(r,1);const t=[];let n=0,i=0;const s=e.length;for(let r=1,a=o.getLineCount();r<=a;r++){const l=o.getLineContent(r),c=l.length+1;let d=0;if(i<s&&e[i].lineNumber===r&&(d=e[i].column,i++,d===c)||l.length===0)continue;const h=Or(l);let g=0;if(h===-1)g=1;else if(h!==l.length-1)g=h+2;else continue;g=Math.max(d,g),t[n++]=Ht.delete(new T(r,g,r,c))}return t}u(spe,"trimTrailingWhitespace");class qR{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));const s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new T(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,s=n.startColumn,r=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),n=ge.createWithDirection(i,s,r,a,this._selectionDirection)}return n}}u(qR,"CopyLinesCommand");var ope=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rpe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let ZA=u(class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:s,indentSize:r,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,r,a),c={tokenization:{getLineTokens:d=>e.tokenization.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,h)=>e.getLanguageIdAtPosition(d,h)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){const d=i.startLineNumber,h=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new T(1,1,1,1),null):(t.addEditOperation(new T(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new T(h,1,h,e.getLineMaxColumn(h)),null)),i=new ge(h,1,h,1)}else{let d,h;if(this._isMovingDown){d=i.endLineNumber+1,h=e.getLineContent(d),t.addEditOperation(new T(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let g=h;if(this.shouldAutoIndent(e,i)){const f=this.matchEnterRule(e,l,s,d,i.startLineNumber-1);if(f!==null){const b=xt(e.getLineContent(d)),_=f+fs(b,s);g=e_(_,s,a)+this.trimLeft(h)}else{c.getLineContent=_=>_===i.startLineNumber?e.getLineContent(d):e.getLineContent(_);const b=Bb(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber,l,this._languageConfigurationService);if(b!==null){const _=xt(e.getLineContent(d)),C=fs(b,s),v=fs(_,s);C!==v&&(g=e_(C,s,a)+this.trimLeft(h))}}t.addEditOperation(new T(i.startLineNumber,1,i.startLineNumber,1),g+`
`);const m=this.matchEnterRuleMovingDown(e,l,s,i.startLineNumber,d,g);if(m!==null)m!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,m);else{c.getLineContent=_=>_===i.startLineNumber?g:_>=i.startLineNumber+1&&_<=i.endLineNumber+1?e.getLineContent(_-1):e.getLineContent(_);const b=Bb(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),i.startLineNumber+1,l,this._languageConfigurationService);if(b!==null){const _=xt(e.getLineContent(i.startLineNumber)),C=fs(b,s),v=fs(_,s);if(C!==v){const y=C-v;this.getIndentEditsOfMovingBlock(e,t,i,s,a,y)}}}}else t.addEditOperation(new T(i.startLineNumber,1,i.startLineNumber,1),g+`
`)}else if(d=i.startLineNumber-1,h=e.getLineContent(d),t.addEditOperation(new T(d,1,d+1,1),null),t.addEditOperation(new T(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+h),this.shouldAutoIndent(e,i)){c.getLineContent=f=>f===d?e.getLineContent(i.startLineNumber):e.getLineContent(f);const g=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,g);else{const f=Bb(this._autoIndent,c,e.getLanguageIdAtPosition(i.startLineNumber,1),d,l,this._languageConfigurationService);if(f!==null){const m=xt(e.getLineContent(i.startLineNumber)),b=fs(f,s),_=fs(m,s);if(b!==_){const C=b-_;this.getIndentEditsOfMovingBlock(e,t,i,s,a,C)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>po.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>po.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,s){if(s){let r=s.indentation;s.indentAction===vn.None||s.indentAction===vn.Indent?r=s.indentation+s.appendText:s.indentAction===vn.IndentOutdent?r=s.indentation:s.indentAction===vn.Outdent&&(r=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(r))>=0){const l=xt(e.getLineContent(i));let c=xt(r);const d=x9(e,i,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const h=fs(c,n),g=fs(l,n);return h-g}}return null}matchEnterRuleMovingDown(e,t,n,i,s,r){if(Or(r)>=0){const a=e.getLineMaxColumn(s),l=Cf(this._autoIndent,e,new T(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){const d=e.getLineContent(a);if(Or(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Cf(this._autoIndent,e,new T(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}}matchEnterRule(e,t,n,i,s,r){let a=s;for(;a>=1;){let d;if(a===s&&r!==void 0?d=r:d=e.getLineContent(a),Or(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Cf(this._autoIndent,e,new T(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,s,r){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),c=xt(l),h=fs(c,i)+r,g=e_(h,i,s);g!==c&&(t.addEditOperation(new T(a,1,a,c.length+1),g),a===n.endLineNumber&&n.endColumn<=c.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}},"MoveLinesCommand");ZA=ope([rpe(3,zt)],ZA);class Bl{static getCollator(){return Bl._COLLATOR||(Bl._COLLATOR=new Intl.Collator),Bl._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const n=ape(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const i=J$(e,t,n);if(!i)return!1;for(let s=0,r=i.before.length;s<r;s++)if(i.before[s]!==i.after[s])return!0;return!1}}u(Bl,"SortLinesCommand");Bl._COLLATOR=null;function J$(o,e,t){const n=e.startLineNumber;let i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;const s=[];for(let a=n;a<=i;a++)s.push(o.getLineContent(a));let r=s.slice(0);return r.sort(Bl.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:n,endLineNumber:i,before:s,after:r}}u(J$,"getSortData");function ape(o,e,t){const n=J$(o,e,t);return n?Ht.replace(new T(n.startLineNumber,1,n.endLineNumber,o.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}u(ape,"sortLines");class YR extends de{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));n.sort((r,a)=>T.compareRangesUsingStarts(r.selection,a.selection));let i=n[0];for(let r=1;r<n.length;r++){const a=n[r];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const s=[];for(const r of n)s.push(new qR(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(YR,"AbstractCopyLinesAction");class Q$ extends YR{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:p("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}u(Q$,"CopyLinesUpAction");class eq extends YR{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:p("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}u(eq,"CopyLinesDownAction");class tq extends de{constructor(){super({id:"editor.action.duplicateSelection",label:p("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:D.writable,menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:p({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],s=t.getSelections(),r=t.getModel();for(const a of s)if(a.isEmpty())i.push(new qR(a,!0));else{const l=new ge(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new w9(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(tq,"DuplicateSelectionAction");class XR extends de{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(zt),i=[],s=t.getSelections()||[],r=t.getOption(10);for(const a of s)i.push(new ZA(a,this.down,r,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(XR,"AbstractMoveLinesAction");class nq extends XR{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:p("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}u(nq,"MoveLinesUpAction");class iq extends XR{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:p("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}u(iq,"MoveLinesDownAction");class ZR extends de{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!Bl.canRun(t.getModel(),s,this.descending))return;const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new Bl(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}u(ZR,"AbstractSortLinesAction");class sq extends ZR{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:p("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:D.writable})}}u(sq,"SortLinesAscendingAction");class oq extends ZR{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:p("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:D.writable})}}u(oq,"SortLinesDescendingAction");class rq extends de{constructor(){super({id:"editor.action.removeDuplicateLines",label:p("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:D.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const i=[],s=[];let r=0;for(const a of t.getSelections()){const l=new Set,c=[];for(let f=a.startLineNumber;f<=a.endLineNumber;f++){const m=n.getLineContent(f);l.has(m)||(c.push(m),l.add(m))}const d=new ge(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-r,g=new ge(h,1,h+c.length-1,c[c.length-1].length);i.push(Ht.replace(d,c.join(`
`))),s.push(g),r+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,i,s),t.pushUndoStop()}}u(rq,"DeleteDuplicateLinesAction");class A0 extends de{constructor(){super({id:A0.ID,label:p("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:Dn(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new W(a.positionLineNumber,a.positionColumn)));const s=t.getSelection();if(s===null)return;const r=new Z$(s,i);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}}u(A0,"TrimTrailingWhitespaceAction");A0.ID="editor.action.trimTrailingWhitespace";class aq extends de{constructor(){super({id:"editor.action.deleteLines",label:p("lines.delete","Delete Line"),alias:"Delete Line",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let s=0;const r=[],a=[];for(let l=0,c=n.length;l<c;l++){const d=n[l];let h=d.startLineNumber,g=d.endLineNumber,f=1,m=i.getLineMaxColumn(g);g<i.getLineCount()?(g+=1,m=1):h>1&&(h-=1,f=i.getLineMaxColumn(h)),r.push(Ht.replace(new ge(h,f,g,m),"")),a.push(new ge(h-s,d.positionColumn,h-s,d.positionColumn)),s+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let r=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(r-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:r,positionColumn:s.positionColumn}});t.sort((s,r)=>s.startLineNumber===r.startLineNumber?s.endLineNumber-r.endLineNumber:s.startLineNumber-r.startLineNumber);const n=[];let i=t[0];for(let s=1;s<t.length;s++)i.endLineNumber+1>=t[s].startLineNumber?i.endLineNumber=t[s].endLineNumber:(n.push(i),i=t[s]);return n.push(i),n}}u(aq,"DeleteLinesAction");class lq extends de{constructor(){super({id:"editor.action.indentLines",label:p("lines.indent","Indent Line"),alias:"Indent Line",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Bt.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}u(lq,"IndentLinesAction");class cq extends de{constructor(){super({id:"editor.action.outdentLines",label:p("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:2135,weight:100}})}run(e,t){yf.Outdent.runEditorCommand(e,t,null)}}u(cq,"OutdentLinesAction");class dq extends de{constructor(){super({id:"editor.action.insertLineBefore",label:p("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Bt.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}u(dq,"InsertLineBeforeAction");class uq extends de{constructor(){super({id:"editor.action.insertLineAfter",label:p("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Bt.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}u(uq,"InsertLineAfterAction");class JR extends de{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),s=[];for(let l=0,c=i.length-1;l<c;l++){const d=i[l],h=i[l+1];T.intersectRanges(d,h)===null?s.push(d):i[l+1]=T.plusRange(d,h)}s.push(i[i.length-1]);const r=this._getEndCursorState(n,s),a=s.map(l=>Ht.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}u(JR,"AbstractDeleteAllToBoundaryAction");class hq extends JR{constructor(){super({id:"deleteAllLeft",label:p("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let s=0;return t.forEach(r=>{let a;if(r.endColumn===1&&s>0){const l=r.startLineNumber-s;a=new ge(l,r.startColumn,l,r.startColumn)}else a=new ge(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);s+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const i=e.getModel();return i===null?[]:(n.sort(T.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){const r=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:i.getLineContent(r).length+1;return new T(r,a,s.startLineNumber,1)}else return new T(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new T(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}}u(hq,"DeleteAllLeftAction");class gq extends JR{constructor(){super({id:"deleteAllRight",label:p("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let s=0,r=t.length,a=0;s<r;s++){const l=t[s],c=new ge(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:i.push(c)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const i=n.map(s=>{if(s.isEmpty()){const r=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===r?new T(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new T(s.startLineNumber,s.startColumn,s.startLineNumber,r)}return s});return i.sort(T.compareRangesUsingStarts),i}}u(gq,"DeleteAllRightAction");class fq extends de{constructor(){super({id:"editor.action.joinLines",label:p("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:D.writable,kbOpts:{kbExpr:D.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(T.compareRangesUsingStarts);const s=[],r=n.reduce((g,f)=>g.isEmpty()?g.endLineNumber===f.startLineNumber?(i.equalsSelection(g)&&(i=f),f):f.startLineNumber>g.endLineNumber+1?(s.push(g),f):new ge(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>g.endLineNumber?(s.push(g),f):new ge(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn));s.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=i,h=0;for(let g=0,f=s.length;g<f;g++){const m=s[g],b=m.startLineNumber,_=1;let C=0,v,y;const w=a.getLineContent(m.endLineNumber).length-m.endColumn;if(m.isEmpty()||m.startLineNumber===m.endLineNumber){const L=m.getStartPosition();L.lineNumber<a.getLineCount()?(v=b+1,y=a.getLineMaxColumn(v)):(v=L.lineNumber,y=a.getLineMaxColumn(L.lineNumber))}else v=m.endLineNumber,y=a.getLineMaxColumn(v);let x=a.getLineContent(b);for(let L=b+1;L<=v;L++){const E=a.getLineContent(L),k=a.getLineFirstNonWhitespaceColumn(L);if(k>=1){let O=!0;x===""&&(O=!1),O&&(x.charAt(x.length-1)===" "||x.charAt(x.length-1)==="	")&&(O=!1,x=x.replace(/[\s\uFEFF\xA0]+$/g," "));const P=E.substr(k-1);x+=(O?" ":"")+P,O?C=P.length+1:C=P.length}else C=0}const M=new T(b,_,v,y);if(!M.isEmpty()){let L;m.isEmpty()?(l.push(Ht.replace(M,x)),L=new ge(M.startLineNumber-h,x.length-C+1,b-h,x.length-C+1)):m.startLineNumber===m.endLineNumber?(l.push(Ht.replace(M,x)),L=new ge(m.startLineNumber-h,m.startColumn,m.endLineNumber-h,m.endColumn)):(l.push(Ht.replace(M,x)),L=new ge(m.startLineNumber-h,m.startColumn,m.startLineNumber-h,x.length-w)),T.intersectRanges(M,i)!==null?d=L:c.push(L)}h+=M.endLineNumber-M.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}u(fq,"JoinLinesAction");class pq extends de{constructor(){super({id:"editor.action.transpose",label:p("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:D.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=[];for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=i.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===i.getLineCount())continue;const h=new T(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new Qn(new ge(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g))}else{const h=new T(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new vS(h,g,new ge(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}u(pq,"TransposeAction");class gg extends de{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=t.getOption(125),r=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new T(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),h=i.getValueInRange(d);r.push(Ht.replace(d,this._modifyText(h,s)))}else{const l=i.getValueInRange(a);r.push(Ht.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}u(gg,"AbstractCaseAction");class mq extends gg{constructor(){super({id:"editor.action.transformToUppercase",label:p("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:D.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}u(mq,"UpperCaseAction");class bq extends gg{constructor(){super({id:"editor.action.transformToLowercase",label:p("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:D.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}u(bq,"LowerCaseAction");class Od{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}u(Od,"BackwardsCompatibleRegExp");class Hp extends gg{constructor(){super({id:"editor.action.transformToTitlecase",label:p("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:D.writable})}_modifyText(e,t){const n=Hp.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}u(Hp,"TitleCaseAction");Hp.titleBoundary=new Od("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Ul extends gg{constructor(){super({id:"editor.action.transformToSnakecase",label:p("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:D.writable})}_modifyText(e,t){const n=Ul.caseBoundary.get(),i=Ul.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}u(Ul,"SnakeCaseAction");Ul.caseBoundary=new Od("(\\p{Ll})(\\p{Lu})","gmu");Ul.singleLetters=new Od("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class Vp extends gg{constructor(){super({id:"editor.action.transformToCamelcase",label:p("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:D.writable})}_modifyText(e,t){const n=Vp.wordBoundary.get();if(!n)return e;const i=e.split(n);return i.shift()+i.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}}u(Vp,"CamelCaseAction");Vp.wordBoundary=new Od("[_\\s-]","gm");class Pa extends gg{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:p("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:D.writable})}_modifyText(e,t){const n=Pa.caseBoundary.get(),i=Pa.singleLetters.get(),s=Pa.underscoreBoundary.get();return!n||!i||!s?e:e.replace(s,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}}u(Pa,"KebabCaseAction");Pa.caseBoundary=new Od("(\\p{Ll})(\\p{Lu})","gmu");Pa.singleLetters=new Od("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");Pa.underscoreBoundary=new Od("(\\S)(_)(\\S)","gm");ee(Q$);ee(eq);ee(tq);ee(nq);ee(iq);ee(sq);ee(oq);ee(rq);ee(A0);ee(aq);ee(lq);ee(cq);ee(dq);ee(uq);ee(hq);ee(gq);ee(fq);ee(pq);ee(mq);ee(bq);Ul.caseBoundary.isSupported()&&Ul.singleLetters.isSupported()&&ee(Ul);Vp.wordBoundary.isSupported()&&ee(Vp);Hp.titleBoundary.isSupported()&&ee(Hp);Pa.isSupported()&&ee(Pa);var lpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},JA=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const _q=new ue("LinkedEditingInputVisible",!1),cpe="linked-editing-decoration";let Sd=u(class QA extends z{static get(e){return e.getContribution(QA.ID)}constructor(e,t,n,i,s){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new X),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=_q.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new X),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(67)||r.hasChanged(88))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(67)||this._editor.getOption(88))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(pe.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new tr(this._debounceInformation.get(t)),s=u(()=>{var l;this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},"triggerRangeUpdate"),r=new tr(0),a=u(l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))},"triggerRangeSync");this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{i.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}const s=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:i});else{let c=t.getValueInRange(l),d=i,h=l.startColumn,g=l.endColumn;const f=oh(c,d);h+=f,c=c.substr(f),d=d.substr(f);const m=c_(c,d);g-=m,c=c.substr(0,c.length-m),d=d.substr(0,d.length-m),(h!==g||d.length!==0)&&s.push({range:new T(l.startLineNumber,h,l.endLineNumber,g),text:d})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return JA(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const s=On(r=>JA(this,void 0,void 0,function*(){try{const a=new ji(!1),l=yield Cq(this._providers,n,t,r);if(this._debounceInformation.update(n,a.elapsed()),s!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let c=[];l?.ranges&&(c=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let d=!1;for(let g=0,f=c.length;g<f;g++)if(T.containsPosition(c[g],t)){if(d=!0,g!==0){const m=c[g];c.splice(g,1),c.unshift(m)}break}if(!d){this.clearRanges();return}const h=c.map(g=>({range:g,options:QA.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(h),this._syncRangesToken++}catch(a){Yr(a)||He(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}},"LinkedEditingContribution");Sd.ID="editor.contrib.linkedEditing";Sd.DECORATION=Pe.register({description:"linked-editing",stickiness:0,className:cpe});Sd=lpe([zC(1,Me),zC(2,he),zC(3,zt),zC(4,Po)],Sd);class vq extends de{constructor(){super({id:"editor.action.linkedEditing",label:p("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Z.and(D.writable,D.hasRenameProvider),kbOpts:{kbExpr:D.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(gt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return ve.isUri(i)&&W.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},He):super.runCommand(e,t)}run(e,t){const n=Sd.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}u(vq,"LinkedEditingAction");const dpe=jn.bindToContribution(Sd.get);oe(new dpe({id:"cancelLinkedEditingInput",precondition:_q,handler:o=>o.clearRanges(),kbOpts:{kbExpr:D.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function Cq(o,e,t,n){const i=o.ordered(e);return ZV(i.map(s=>()=>JA(this,void 0,void 0,function*(){try{return yield s.provideLinkedEditingRanges(e,t,n)}catch(r){$n(r);return}})),s=>!!s&&Ei(s?.ranges))}u(Cq,"getLinkedEditingRanges");N("editor.linkedEditingBackground",{dark:U.fromHex("#f00").transparent(.3),light:U.fromHex("#f00").transparent(.3),hcDark:U.fromHex("#f00").transparent(.3),hcLight:U.white},p("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Xa("_executeLinkedEditingProvider",(o,e,t)=>{const{linkedEditingRangeProvider:n}=o.get(he);return Cq(n,e,t,Ze.None)});ct(Sd.ID,Sd,1);ee(vq);var yq=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let upe=u(class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return yq(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}},"Link");class rv{constructor(e){this._disposables=new X;let t=[];for(const[n,i]of e){const s=n.links.map(r=>new upe(r,i));t=rv._union(t,s),DI(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let i,s,r,a;for(i=0,r=0,s=e.length,a=t.length;i<s&&r<a;){const l=e[i],c=t[r];if(T.areIntersectingOrTouching(l.range,c.range)){i++;continue}T.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),i++):(n.push(c),r++)}for(;i<s;i++)n.push(e[i]);for(;r<a;r++)n.push(t[r]);return n}}u(rv,"LinksList");function wq(o,e,t){const n=[],i=o.ordered(e).reverse().map((s,r)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(n[r]=[a,s])},$n));return Promise.all(i).then(()=>{const s=new rv(jp(n));return t.isCancellationRequested?(s.dispose(),new rv([])):s})}u(wq,"getLinks");ot.registerCommand("_executeLinkProvider",(o,...e)=>yq(void 0,void 0,void 0,function*(){let[t,n]=e;Ct(t instanceof ve),typeof n!="number"&&(n=0);const{linkProvider:i}=o.get(he),s=o.get(en).getModel(t);if(!s)return[];const r=yield wq(i,s,Ze.None);if(!r)return[];for(let l=0;l<Math.min(n,r.links.length);l++)yield r.links[l].resolve(Ze.None);const a=r.links.slice(0);return r.dispose(),a}));var hpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},KC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gpe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Wp=u(class Sq extends z{static get(e){return e.getContribution(Sq.ID)}constructor(e,t,n,i,s){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new yt(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new u0(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(68)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}computeLinksNow(){return gpe(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(68))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=On(t=>wq(this.providers,e,t));try{const t=new ji(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){He(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(75)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const r of i){const a=this.currentOccurrences[r];n.push(a.decorationId)}const s=[];if(e)for(const r of e)s.push(Ju.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new Ju(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(75)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(s=>{i.activate(s,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(75)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(Ze.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Ue.file&&s.startsWith(`${Ue.file}:`)){const a=ve.parse(s);if(a.scheme===Ue.file){const l=oa(a);let c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(s=Yie(r,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const r=s instanceof Error?s.message:s;r==="invalid"?this.notificationService.warn(p("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):r==="missing"?this.notificationService.warn(p("missing.url","Failed to open this link because its target is missing.")):He(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},"LinkDetector");Wp.ID="editor.linkDetector";Wp=hpe([KC(1,Ms),KC(2,Cn),KC(3,he),KC(4,Po)],Wp);const CH={general:Pe.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Pe.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Ju{static decoration(e,t){return{range:e.range,options:Ju._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?CH.active:CH.general);return i.hoverMessage=fpe(e,t),i}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,Ju._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Ju._getOptions(this.link,t,!1))}}u(Ju,"LinkOccurrence");function fpe(o,e){const t=o.url&&/^command:/i.test(o.url.toString()),n=o.tooltip?o.tooltip:t?p("links.navigate.executeCmd","Execute command"):p("links.navigate.follow","Follow link"),i=e?Ye?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ye?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");if(o.url){let s="";if(/^command:/i.test(o.url.toString())){const a=o.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=p("tooltip.explanation","Execute command {0}",l)}}return new Gi("",!0).appendLink(o.url.toString(!0).replace(/ /g,"%20"),n,s).appendMarkdown(` (${i})`)}else return new Gi().appendText(`${n} (${i})`)}u(fpe,"getHoverMessage");class Tq extends de{constructor(){super({id:"editor.action.openLink",label:p("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=Wp.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const s of i){const r=n.getLinkOccurrence(s.getEndPosition());r&&n.openLinkOccurrence(r,!1)}}}u(Tq,"OpenLinkAction");ct(Wp.ID,Wp,1);ee(Tq);class D1 extends z{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const n=this._editor.getOption(112);n>=0&&t.target.type===6&&t.target.position.column>=n&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}u(D1,"LongLinesHelper");D1.ID="editor.contrib.longLinesHelper";ct(D1.ID,D1,2);const jC=N("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},p("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);N("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},p("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);N("editor.wordHighlightTextBackground",{light:jC,dark:jC,hcDark:jC,hcLight:jC},p("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const $C=N("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Ft,hcLight:Ft},p("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));N("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Ft,hcLight:Ft},p("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));N("editor.wordHighlightTextBorder",{light:$C,dark:$C,hcDark:$C,hcLight:$C},p("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const ppe=N("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},p("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),mpe=N("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},p("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),bpe=N("editorOverviewRuler.wordHighlightTextForeground",{dark:cb,light:cb,hcDark:cb,hcLight:cb},p("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),_pe=Pe.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:on(mpe),position:Qs.Center},minimap:{color:on(hS),position:Xs.Inline}}),vpe=Pe.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:on(bpe),position:Qs.Center},minimap:{color:on(hS),position:Xs.Inline}}),Cpe=Pe.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:on(cb),position:Qs.Center},minimap:{color:on(hS),position:Xs.Inline}}),ype=Pe.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),wpe=Pe.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:on(ppe),position:Qs.Center},minimap:{color:on(hS),position:Xs.Inline}});function Spe(o){return o===a_.Write?_pe:o===a_.Text?vpe:wpe}u(Spe,"getHighlightDecorationOptions");function Tpe(o){return o?ype:Cpe}u(Tpe,"getSelectionHighlightDecorationOptions");or((o,e)=>{const t=o.getColor(bN);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var xpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Lpe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function Hd(o,e){const t=e.filter(n=>!o.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),i=t.length===1?p("cursorAdded","Cursor added: {0}",n):p("cursorsAdded","Cursors added: {0}",n);mw(i)}}u(Hd,"announceCursorChange");class xq extends de{constructor(){super({id:"editor.action.insertCursorAbove",label:p("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,Vn.addCursorUp(s,r,i)),s.revealTopMostCursor(n.source),Hd(r,s.getCursorStates())}}u(xq,"InsertCursorAbove");class Lq extends de{constructor(){super({id:"editor.action.insertCursorBelow",label:p("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,Vn.addCursorDown(s,r,i)),s.revealBottomMostCursor(n.source),Hd(r,s.getCursorStates())}}u(Lq,"InsertCursorBelow");class Eq extends de{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const s=t.getLineMaxColumn(i);n.push(new ge(i,s,i,s))}e.endColumn>1&&n.push(new ge(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),s=t._getViewModel(),r=s.getCursorStates(),a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),Hd(r,s.getCursorStates())}}u(Eq,"InsertCursorAtEndOfEachLineSelected");class kq extends de{constructor(){super({id:"editor.action.addCursorsToBottom",label:p("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount(),s=[];for(let l=n[0].startLineNumber;l<=i;l++)s.push(new ge(l,n[0].startColumn,l,n[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();s.length>0&&t.setSelections(s),Hd(a,r.getCursorStates())}}u(kq,"InsertCursorAtEndOfLineSelected");class Dq extends de{constructor(){super({id:"editor.action.addCursorsToTop",label:p("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new ge(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();i.length>0&&t.setSelections(i),Hd(r,s.getCursorStates())}}u(Dq,"InsertCursorAtTopOfLineSelected");class Mb{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}u(Mb,"MultiCursorSessionResult");class Bp{static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new Bp(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,s,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,s=!0,r=!0):(s=n.wholeWord,r=n.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;c=h.word,d=new ge(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new Bp(e,t,i,c,s,r,d)}constructor(e,t,n,i,s,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=s,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Mb(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Mb(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1);return n?new ge(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Mb(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Mb(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1);return n?new ge(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1,1073741824)}}u(Bp,"MultiCursorSession");class Td extends z{static get(e){return e.getContribution(Td.ID)}constructor(e){super(),this._sessionDispose=this._register(new X),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=Bp.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new ge(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!Hq(this._editor.getModel(),t,i)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const i=this._editor.getModel();n.searchScope?t=i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(125):null,!1,1073741824):t=i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(125):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const i=this._editor.getSelection();for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.range.intersectRanges(i)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new ge(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}u(Td,"MultiCursorSelectionController");Td.ID="editor.contrib.multiCursorController";class fg extends de{run(e,t){const n=Td.get(t);if(!n)return;const i=t._getViewModel();if(i){const s=i.getCursorStates(),r=Yi.get(t);if(r)this._run(n,r);else{const a=e.get(Re).createInstance(Yi,t);this._run(n,a),a.dispose()}Hd(s,i.getCursorStates())}}}u(fg,"MultiCursorSelectionControllerAction");class Mq extends fg{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:2082,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}u(Mq,"AddSelectionToNextFindMatchAction");class Aq extends fg{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}u(Aq,"AddSelectionToPreviousFindMatchAction");class Iq extends fg{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:Dn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}u(Iq,"MoveSelectionToNextFindMatchAction");class Nq extends fg{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}u(Nq,"MoveSelectionToPreviousFindMatchAction");class Rq extends fg{constructor(){super({id:"editor.action.selectHighlights",label:p("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:3114,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:p({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}u(Rq,"SelectHighlightsAction");class Pq extends fg{constructor(){super({id:"editor.action.changeAll",label:p("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Z.and(D.writable,D.editorTextFocus),kbOpts:{kbExpr:D.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}u(Pq,"CompatChangeAll");class Fq{constructor(e,t,n,i,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(T.compareRangesUsingStarts)),this._cachedFindMatches}}u(Fq,"SelectionHighlighterState");let av=u(class Oq extends z{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(103),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new yt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(103)})),this._register(e.onDidChangeCursorSelection(i=>{this._isEnabled&&(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=Yi.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(Oq._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=Td.get(n);if(!s)return null;const r=Yi.get(n);if(!r)return null;let a=s.getSession(r);if(!a){const d=n.getSelections();if(d.length>1){const g=r.getState().matchCase;if(!Hq(n.getModel(),d,g))return null}a=Bp.create(n,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let h=a.searchText;if(c||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new Fq(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(125):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(T.compareRangesUsingStarts);const s=[];for(let l=0,c=0,d=n.length,h=i.length;l<d;){const g=n[l];if(c>=h)s.push(g),l++;else{const f=T.compareRangesUsingStarts(g,i[c]);f<0?((i[c].isEmpty()||!T.areIntersecting(g,i[c]))&&s.push(g),l++):(f>0||l++,c++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(78),a=s.map(l=>({range:l,options:Tpe(r)}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}},"SelectionHighlighter");av.ID="editor.contrib.selectionHighlighter";av=xpe([Lpe(1,he)],av);function Hq(o,e,t){const n=yH(o,e[0],!t);for(let i=1,s=e.length;i<s;i++){const r=e[i];if(r.isEmpty())return!1;const a=yH(o,r,!t);if(n!==a)return!1}return!0}u(Hq,"modelRangesContainSameText");function yH(o,e,t){const n=o.getValueInRange(e);return t?n.toLowerCase():n}u(yH,"getValueInRange");class Vq extends de{constructor(){super({id:"editor.action.focusNextCursor",label:p("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:p("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.shift();r&&(s.push(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),Hd(s,i.getCursorStates()))}}u(Vq,"FocusNextCursor");class Wq extends de{constructor(){super({id:"editor.action.focusPreviousCursor",label:p("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:p("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.pop();r&&(s.unshift(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),Hd(s,i.getCursorStates()))}}u(Wq,"FocusPreviousCursor");ct(Td.ID,Td,4);ct(av.ID,av,1);ee(xq);ee(Lq);ee(Eq);ee(Mq);ee(Aq);ee(Iq);ee(Nq);ee(Rq);ee(Pq);ee(kq);ee(Dq);ee(Vq);ee(Wq);var Bq=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Oh={Visible:new ue("parameterHintsVisible",!1),MultipleSignatures:new ue("parameterHintsMultipleSignatures",!1)};function Uq(o,e,t,n,i){return Bq(this,void 0,void 0,function*(){const s=o.ordered(e);for(const r of s)try{const a=yield r.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){$n(a)}})}u(Uq,"provideSignatureHelp");ot.registerCommand("_executeSignatureHelpProvider",(o,...e)=>Bq(void 0,void 0,void 0,function*(){const[t,n,i]=e;Ct(ve.isUri(t)),Ct(W.isIPosition(n)),Ct(typeof i=="string"||!i);const s=o.get(he),r=yield o.get(gs).createModelReference(t);try{const a=yield Uq(s.signatureHelpProvider,r.object.textEditorModel,W.lift(n),{triggerKind:Da.Invoke,isRetrigger:!1,triggerCharacter:i},Ze.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}}));var Epe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},Ec;(function(o){o.Default={type:0};class e{constructor(i,s){this.request=i,this.previouslyActiveHints=s,this.type=2}}u(e,"Pending"),o.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}u(t,"Active"),o.Active=t})(Ec||(Ec={}));class I0 extends z{constructor(e,t,n=I0.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new F),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Ec.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Fn),this.triggerChars=new h_,this.retriggerChars=new h_,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new tr(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Ec.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(He)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(82).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(82).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Ec.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return Epe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(kpe);this._pendingTriggers=[];const s={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Ec.Pending(On(l=>Uq(this.providers,r,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Ec.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Ec.Default),He(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])if(n.length){const i=n.charCodeAt(0);this.triggerChars.add(i),this.retriggerChars.add(i)}for(const n of t.signatureHelpRetriggerCharacters||[])n.length&&this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Da.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Da.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Da.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(82).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}u(I0,"ParameterHintsModel");I0.DEFAULT_DELAY=120;function kpe(o,e){switch(e.triggerKind){case Da.Invoke:return e;case Da.ContentChange:return o;case Da.TriggerCharacter:default:return e}}u(kpe,"mergeTriggerContexts");var Dpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},RL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Rs=ie,Mpe=bn("parameter-hints-next",re.chevronDown,p("parameterHintsNextIcon","Icon for show next parameter hint.")),Ape=bn("parameter-hints-previous",re.chevronUp,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let M1=u(class Gq extends z{constructor(e,t,n,i,s){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new X),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Jl({editor:e},s,i)),this.keyVisible=Oh.Visible.bindTo(n),this.keyMultipleSignatures=Oh.MultipleSignatures.bindTo(n)}createParameterHintDOMNodes(){const e=Rs(".editor-widget.parameter-hints-widget"),t=q(e,Rs(".phwrapper"));t.tabIndex=-1;const n=q(t,Rs(".controls")),i=q(n,Rs(".button"+xe.asCSSSelector(Ape))),s=q(n,Rs(".overloads")),r=q(n,Rs(".button"+xe.asCSSSelector(Mpe)));this._register($(i,"click",g=>{Be.stop(g),this.previous()})),this._register($(r,"click",g=>{Be.stop(g),this.next()}));const a=Rs(".body"),l=new em(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=q(a,Rs(".signature")),d=q(a,Rs(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=u(()=>{if(!this.domNodes)return;const g=this.editor.getOption(48);this.domNodes.element.style.fontSize=`${g.fontSize}px`,this.domNodes.element.style.lineHeight=`${g.lineHeight/g.fontSize}`},"updateFont");h(),this._register(pe.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(g=>g.hasChanged(48)).on(h,null)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=q(this.domNodes.signature,Rs(".code")),r=this.editor.getOption(48);s.style.fontSize=`${r.fontSize}px`,s.style.fontFamily=r.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,i,l);else{const h=q(s,Rs("span"));h.textContent=i.label}const c=i.parameters[l];if(c?.documentation){const h=Rs("span.documentation");if(typeof c.documentation=="string")h.textContent=c.documentation;else{const g=this.renderMarkdownDocs(c.documentation);h.appendChild(g.element)}q(this.domNodes.docs,Rs("p",{},h))}if(i.documentation!==void 0)if(typeof i.documentation=="string")q(this.domNodes.docs,Rs("p",{},i.documentation));else{const h=this.renderMarkdownDocs(i.documentation);q(this.domNodes.docs,h.element)}const d=this.hasDocs(i,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let h="";const g=i.parameters[l];Array.isArray(g.label)?h=i.label.substring(g.label[0],g.label[1]):h=g.label,g.documentation&&(h+=typeof g.documentation=="string"?`, ${g.documentation}`:`, ${g.documentation.value}`),i.documentation&&(h+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==h&&(ri(p("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Kg(t.documentation).length>0||t&&typeof t.documentation=="object"&&Kg(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Kg(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Kg(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,s]=this.getParameterLabelOffsets(t,n),r=document.createElement("span");r.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),q(e,r,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Js(n.label)}(?=\\W|$)`,"g");i.test(e.label);const s=i.lastIndex-n.label.length;return s>=0?[s,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Gq.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}},"ParameterHintsWidget");M1.ID="editor.widget.parameterHintsWidget";M1=Dpe([RL(2,Me),RL(3,Ms),RL(4,Wt)],M1);N("editorHoverWidget.highlightForeground",{dark:qo,light:qo,hcDark:qo,hcLight:qo},p("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var Ipe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Hh=u(class zq extends z{static get(e){return e.getContribution(zq.ID)}constructor(e,t,n){super(),this.editor=e,this.model=this._register(new I0(e,n.signatureHelpProvider)),this._register(this.model.onChangedHints(i=>{var s;i?(this.widget.value.show(),this.widget.value.render(i)):(s=this.widget.rawValue)===null||s===void 0||s.hide()})),this.widget=new tc(()=>this._register(t.createInstance(M1,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)===null||e===void 0||e.previous()}next(){var e;(e=this.widget.rawValue)===null||e===void 0||e.next()}trigger(e){this.model.trigger(e,0)}},"ParameterHintsController");Hh.ID="editor.controller.parameterHints";Hh=Ipe([wH(1,Re),wH(2,he)],Hh);class Kq extends de{constructor(){super({id:"editor.action.triggerParameterHints",label:p("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:D.hasSignatureHelpProvider,kbOpts:{kbExpr:D.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=Hh.get(t);n?.trigger({triggerKind:Da.Invoke})}}u(Kq,"TriggerParameterHintsAction");ct(Hh.ID,Hh,2);ee(Kq);const QR=100+75,eP=jn.bindToContribution(Hh.get);oe(new eP({id:"closeParameterHints",precondition:Oh.Visible,handler:o=>o.cancel(),kbOpts:{weight:QR,kbExpr:D.focus,primary:9,secondary:[1033]}}));oe(new eP({id:"showPrevParameterHint",precondition:Z.and(Oh.Visible,Oh.MultipleSignatures),handler:o=>o.previous(),kbOpts:{weight:QR,kbExpr:D.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));oe(new eP({id:"showNextParameterHint",precondition:Z.and(Oh.Visible,Oh.MultipleSignatures),handler:o=>o.next(),kbOpts:{weight:QR,kbExpr:D.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var Npe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const WT=new ue("renameInputVisible",!1,p("renameInputVisible","Whether the rename input widget is visible"));let eI=u(class{constructor(e,t,n,i,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new X,this.allowEditorOverflow=!0,this._visibleContextKey=WT.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(48)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",p("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,n,i,s;if(!this._input||!this._domNode)return;const r=e.getColor(wa),a=e.getColor(gN);this._domNode.style.backgroundColor=String((t=e.getColor(Vt))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.border=a?`1px solid ${a}`:"",this._domNode.style.color=String((n=e.getColor(C7))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(v7))!==null&&i!==void 0?i:"");const l=e.getColor(y7);this._input.style.borderWidth=l?"1px":"0px",this._input.style.borderStyle=l?"solid":"none",this._input.style.borderColor=(s=l?.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(48);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}beforeRender(){var e,t;const[n,i]=this._acceptKeybindings;return this._label.innerText=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(n))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel()),null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,n,i,s,r){this._domNode.classList.toggle("preview",s),this._position=new W(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new X;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&c})},a.add(r.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!document.hasFocus()))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}},"RenameInputField");eI=Npe([PL(2,qn),PL(3,jt),PL(4,Me)],eI);var Rpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jd=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Qu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class BT{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Qu(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new T(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:T.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Qu(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return Qu(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const r=yield s.provideRenameEdits(this.model,this.position,e,i);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(p("no result","No result.")),i);return r})}}u(BT,"RenameSkeleton");function Ppe(o,e,t,n){return Qu(this,void 0,void 0,function*(){const i=new BT(e,t,o),s=yield i.resolveRenameLocation(Ze.None);return s?.rejectReason?{edits:[],rejectReason:s.rejectReason}:i.provideRenameEdits(n,Ze.None)})}u(Ppe,"rename");let Vh=u(class jq{static get(e){return e.getContribution(jq.ID)}constructor(e,t,n,i,s,r,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new X,this._cts=new ci,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(eI,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return Qu(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const n=this.editor.getPosition(),i=new BT(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!i.hasProvider())return;this._cts=new pd(this.editor,5);let s;try{const g=i.resolveRenameLocation(this._cts.token);this._progressService.showWhile(g,250),s=yield g}catch(g){(e=ks.get(this.editor))===null||e===void 0||e.showMessage(g||p("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}if(!s)return;if(s.rejectReason){(t=ks.get(this.editor))===null||t===void 0||t.showMessage(s.rejectReason,n);return}if(this._cts.token.isCancellationRequested){this._cts.dispose();return}this._cts.dispose(),this._cts=new pd(this.editor,5,s.range);const r=this.editor.getSelection();let a=0,l=s.text.length;!T.isEmpty(r)&&!T.spansMultipleLines(r)&&T.containsRange(s.range,r)&&(a=Math.max(0,r.startColumn-s.range.startColumn),l=Math.min(s.range.endColumn,r.endColumn)-s.range.startColumn);const c=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),d=yield this._renameInputField.getInput(s.range,s.text,a,l,c,this._cts.token);if(typeof d=="boolean"){d&&this.editor.focus();return}this.editor.focus();const h=Q1(i.provideRenameEdits(d.newName,this._cts.token),this._cts.token).then(g=>Qu(this,void 0,void 0,function*(){if(!(!g||!this.editor.hasModel())){if(g.rejectReason){this._notificationService.info(g.rejectReason);return}this.editor.setSelection(T.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(g,{editor:this.editor,showPreview:d.wantsPreview,label:p("label","Renaming '{0}' to '{1}'",s?.text,d.newName),code:"undoredo.rename",quotableLabel:p("quotableLabel","Renaming {0} to {1}",s?.text,d.newName),respectAutoSaveConfig:!0}).then(f=>{f.ariaSummary&&ri(p("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,d.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(p("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),g=>{this._notificationService.error(p("rename.failed","Rename failed to compute edits")),this._logService.error(g)});return this._progressService.showWhile(h,250),h})}acceptRenameInput(e){this._renameInputField.acceptInput(e)}cancelRenameInput(){this._renameInputField.cancelInput(!0)}},"RenameController");Vh.ID="editor.contrib.renameController";Vh=Rpe([Jd(1,Re),Jd(2,Cn),Jd(3,Xv),Jd(4,Rd),Jd(5,Mo),Jd(6,eN),Jd(7,he)],Vh);class $q extends de{constructor(){super({id:"editor.action.rename",label:p("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Z.and(D.writable,D.hasRenameProvider),kbOpts:{kbExpr:D.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(gt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return ve.isUri(i)&&W.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},He):super.runCommand(e,t)}run(e,t){const n=Vh.get(t);return n?n.run():Promise.resolve()}}u($q,"RenameAction");ct(Vh.ID,Vh,4);ee($q);const tP=jn.bindToContribution(Vh.get);oe(new tP({id:"acceptRenameInput",precondition:WT,handler:o=>o.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:Z.and(D.focus,Z.not("isComposing")),primary:3}}));oe(new tP({id:"acceptRenameInputWithPreview",precondition:Z.and(WT,Z.has("config.editor.rename.enablePreview")),handler:o=>o.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:Z.and(D.focus,Z.not("isComposing")),primary:1024+3}}));oe(new tP({id:"cancelRenameInput",precondition:WT,handler:o=>o.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:D.focus,primary:9,secondary:[1033]}}));Xa("_executeDocumentRenameProvider",function(o,e,t,...n){const[i]=n;Ct(typeof i=="string");const{renameProvider:s}=o.get(he);return Ppe(s,e,t,i)});Xa("_executePrepareRename",function(o,e,t){return Qu(this,void 0,void 0,function*(){const{renameProvider:n}=o.get(he),s=yield new BT(e,t,n).resolveRenameLocation(Ze.None);if(s?.rejectReason)throw new Error(s.rejectReason);return s})});Kt.as(ja.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:p("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});function Fpe(o){for(let e=0,t=o.length;e<t;e+=4){const n=o[e+0],i=o[e+1],s=o[e+2],r=o[e+3];o[e+0]=r,o[e+1]=s,o[e+2]=i,o[e+3]=n}}u(Fpe,"reverseEndianness");function Ope(o){const e=new Uint8Array(o.buffer,o.byteOffset,o.length*4);return UH()||Fpe(e),Iv.wrap(e)}u(Ope,"toLittleEndianBuffer");function qq(o){const e=new Uint32Array(Hpe(o));let t=0;if(e[t++]=o.id,o.type==="full")e[t++]=1,e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length;else{e[t++]=2,e[t++]=o.deltas.length;for(const n of o.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return Ope(e)}u(qq,"encodeSemanticTokensDto");function Hpe(o){let e=0;if(e+=1+1,o.type==="full")e+=1+o.data.length;else{e+=1,e+=(1+1+1)*o.deltas.length;for(const t of o.deltas)t.data&&(e+=t.data.length)}return e}u(Hpe,"encodeSemanticTokensDtoSize");var xd=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};function UT(o){return o&&!!o.data}u(UT,"isSemanticTokens");function Yq(o){return o&&Array.isArray(o.edits)}u(Yq,"isSemanticTokensEdits");class Xq{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}u(Xq,"DocumentSemanticTokensResult");function Zq(o,e){return o.has(e)}u(Zq,"hasDocumentSemanticTokensProvider");function Vpe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(Vpe,"getDocumentSemanticTokensProviders");function Jq(o,e,t,n,i){return xd(this,void 0,void 0,function*(){const s=Vpe(o,e),r=yield Promise.all(s.map(a=>xd(this,void 0,void 0,function*(){let l,c=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(d){c=d,l=null}return(!l||!UT(l)&&!Yq(l))&&(l=null),new Xq(a,l,c)})));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null})}u(Jq,"getDocumentSemanticTokens");function Wpe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:null}u(Wpe,"_getDocumentSemanticTokensProviderHighestGroup");class Qq{constructor(e,t){this.provider=e,this.tokens=t}}u(Qq,"DocumentRangeSemanticTokensResult");function Bpe(o,e){return o.has(e)}u(Bpe,"hasDocumentRangeSemanticTokensProvider");function eY(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(eY,"getDocumentRangeSemanticTokensProviders");function nP(o,e,t,n){return xd(this,void 0,void 0,function*(){const i=eY(o,e),s=yield Promise.all(i.map(r=>xd(this,void 0,void 0,function*(){let a;try{a=yield r.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){$n(l),a=null}return(!a||!UT(a))&&(a=null),new Qq(r,a)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}u(nP,"getDocumentRangeSemanticTokens");ot.registerCommand("_provideDocumentSemanticTokensLegend",(o,...e)=>xd(void 0,void 0,void 0,function*(){const[t]=e;Ct(t instanceof ve);const n=o.get(en).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(he),s=Wpe(i,n);return s?s[0].getLegend():o.get(dn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));ot.registerCommand("_provideDocumentSemanticTokens",(o,...e)=>xd(void 0,void 0,void 0,function*(){const[t]=e;Ct(t instanceof ve);const n=o.get(en).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(he);if(!Zq(i,n))return o.get(dn).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield Jq(i,n,null,null,Ze.None);if(!s)return;const{provider:r,tokens:a}=s;if(!a||!UT(a))return;const l=qq({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l}));ot.registerCommand("_provideDocumentRangeSemanticTokensLegend",(o,...e)=>xd(void 0,void 0,void 0,function*(){const[t,n]=e;Ct(t instanceof ve);const i=o.get(en).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(he),r=eY(s,i);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!T.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=yield nP(s,i,T.lift(n),Ze.None);if(a)return a.provider.getLegend()}));ot.registerCommand("_provideDocumentRangeSemanticTokens",(o,...e)=>xd(void 0,void 0,void 0,function*(){const[t,n]=e;Ct(t instanceof ve),Ct(T.isIRange(n));const i=o.get(en).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(he),r=yield nP(s,i,T.lift(n),Ze.None);if(!(!r||!r.tokens))return qq({id:0,type:"full",data:r.tokens.data})}));const iP="editor.semanticHighlighting";function tI(o,e,t){var n;const i=(n=t.getValue(iP,{overrideIdentifier:o.getLanguageId(),resource:o.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}u(tI,"isSemanticColoringEnabled");var tY=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pa=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let nI=u(class extends z{constructor(e,t,n,i,s,r){super(),this._watchers=Object.create(null);const a=u(d=>{this._watchers[d.uri.toString()]=new lv(d,e,n,s,r)},"register"),l=u((d,h)=>{h.dispose(),delete this._watchers[d.uri.toString()]},"deregister"),c=u(()=>{for(const d of t.getModels()){const h=this._watchers[d.uri.toString()];tI(d,n,i)?h||a(d):h&&l(d,h)}},"handleSettingOrThemeChange");this._register(t.onModelAdded(d=>{tI(d,n,i)&&a(d)})),this._register(t.onModelRemoved(d=>{const h=this._watchers[d.uri.toString()];h&&l(d,h)})),this._register(i.onDidChangeConfiguration(d=>{d.affectsConfiguration(iP)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}},"DocumentSemanticTokensFeature");nI=tY([pa(0,jS),pa(1,en),pa(2,qn),pa(3,lt),pa(4,Po),pa(5,he)],nI);let lv=u(class cu extends z{constructor(e,t,n,i,s){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:cu.REQUEST_MIN_DELAY,max:cu.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new yt(()=>this._fetchDocumentSemanticTokensNow(),cu.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=u(()=>{mt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))},"bindDocumentChangeListeners");r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Zq(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}const e=new ci,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=Jq(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const s=[],r=this._model.onDidChangeContent(l=>{s.push(l)}),a=new ji(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:d}=l,h=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,h,s)}},l=>{l&&(Yr(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||He(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(s.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,s){s=Math.min(s,n.length-i,e.length-t);for(let r=0;r<s;r++)n[i+r]=e[t+r]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,r=u(()=>{(i.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))},"rescheduleIfNeeded");if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(Yq(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let d=l.length,h=c.length;for(let g=t.edits.length-1;g>=0;g--){const f=t.edits[g];if(f.start>l.length){n.warnInvalidEditStart(s.resultId,t.resultId,g,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const m=d-(f.start+f.deleteCount);m>0&&(cu._copy(l,d-m,c,h-m,m),h-=m),f.data&&(cu._copy(f.data,0,c,h-f.data.length,f.data.length),h-=f.data.length),d=f.start}d>0&&cu._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(UT(t)){this._currentDocumentResponse=new nY(e,t.resultId,t.data);const a=r6(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},"ModelSemanticColoring");lv.REQUEST_MIN_DELAY=300;lv.REQUEST_MAX_DELAY=2e3;lv=tY([pa(1,jS),pa(2,qn),pa(3,Po),pa(4,he)],lv);class nY{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}u(nY,"SemanticTokensResponse");Wle(nI);var Upe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$m=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let cv=u(class extends z{constructor(e,t,n,i,s,r){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new yt(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=u(()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))},"scheduleTokenizeViewport");this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(iP)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!tI(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!Bpe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=On(r=>Promise.resolve(nP(this._provider,e,t,r))),s=new ji(!1);return i.then(r=>{if(this._debounceInformation.update(e,s.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,r6(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}},"ViewportSemanticTokensContribution");cv.ID="editor.contrib.viewportSemanticTokens";cv=Upe([$m(1,jS),$m(2,qn),$m(3,lt),$m(4,Po),$m(5,he)],cv);ct(cv.ID,cv,1);class iY{provideSelectionRanges(e,t){const n=[];for(const i of t){const s=[];n.push(s),this._addInWordRanges(s,e,i),this._addWordRanges(s,e,i),this._addWhitespaceLine(s,e,i),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;const{word:s,startColumn:r}=i,a=n.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const h=s.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(Ic(h)&&ua(d))break;d=h}for(l+=1;c<s.length;c++){const h=s.charCodeAt(c);if(ua(h)&&Ic(d))break;if(h===95||h===45)break;d=h}l<c&&e.push({range:new T(n.lineNumber,r+l,n.lineNumber,r+c)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new T(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new T(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}u(iY,"WordSelectionRangeProvider");var Gpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zpe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},GT=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class zT{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new zT(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}u(zT,"SelectionRanges");let Up=u(class sY{static get(e){return e.getContribution(sY.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return GT(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield aY(this._languageFeaturesService.selectionRangeProvider,n,t.map(s=>s.getPosition()),this._editor.getOption(108),Ze.None).then(s=>{var r;if(!(!Ei(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!pi(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new zT(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(s=>s.mov(e));const i=this._state.map(s=>ge.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}},"SmartSelectController");Up.ID="editor.contrib.smartSelectController";Up=Gpe([zpe(1,he)],Up);class sP extends de{constructor(e,t){super(t),this._forward=e}run(e,t){return GT(this,void 0,void 0,function*(){const n=Up.get(t);n&&(yield n.run(this._forward))})}}u(sP,"AbstractSmartSelect");class oY extends sP{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:p("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}u(oY,"GrowSelectionAction");ot.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class rY extends sP{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:p("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:D.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}u(rY,"ShrinkSelectionAction");ct(Up.ID,Up,4);ee(oY);ee(rY);function aY(o,e,t,n,i){return GT(this,void 0,void 0,function*(){const s=o.all(e).concat(new iY);s.length===1&&s.unshift(new ps);const r=[],a=[];for(const l of s)r.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(c=>{if(Ei(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const h of c[d])T.isIRange(h.range)&&T.containsPosition(h.range,t[d])&&a[d].push(T.lift(h.range))}},$n));return yield Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,f)=>W.isBefore(g.getStartPosition(),f.getStartPosition())?1:W.isBefore(f.getStartPosition(),g.getStartPosition())||W.isBefore(g.getEndPosition(),f.getEndPosition())?-1:W.isBefore(f.getEndPosition(),g.getEndPosition())?1:0);const c=[];let d;for(const g of l)(!d||T.containsRange(g,d)&&!T.equalsRange(g,d))&&(c.push(g),d=g);if(!n.selectLeadingAndTrailingWhitespace)return c;const h=[c[0]];for(let g=1;g<c.length;g++){const f=c[g-1],m=c[g];if(m.startLineNumber!==f.startLineNumber||m.endLineNumber!==f.endLineNumber){const b=new T(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));b.containsRange(f)&&!b.equalsRange(f)&&m.containsRange(b)&&!m.equalsRange(b)&&h.push(b);const _=new T(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(b)&&m.containsRange(_)&&!m.equalsRange(_)&&h.push(_)}h.push(m)}return h})})}u(aY,"provideSelectionRanges");ot.registerCommand("_executeSelectionRangeProvider",function(o,...e){return GT(this,void 0,void 0,function*(){const[t,n]=e;Ct(ve.isUri(t));const i=o.get(he).selectionRangeProvider,s=yield o.get(gs).createModelReference(t);try{return aY(i,s.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},Ze.None)}finally{s.dispose()}})});const Kpe=Object.freeze({View:{value:p("view","View"),original:"View"},Help:{value:p("help","Help"),original:"Help"},Test:{value:p("test","Test"),original:"Test"},File:{value:p("file","File"),original:"File"},Preferences:{value:p("preferences","Preferences"),original:"Preferences"},Developer:{value:p({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}});var FL;class iI{constructor(e,t){this.lineNumbers=e,this.lastLineRelativePosition=t}}u(iI,"StickyScrollWidgetState");const SH=(FL=window.trustedTypes)===null||FL===void 0?void 0:FL.createPolicy("stickyScrollViewLayer",{createHTML:o=>o});class lY extends z{constructor(e){super(),this._editor=e,this._rootDomNode=document.createElement("div"),this._disposableStore=this._register(new X),this._lineNumbers=[],this._lastLineRelativePosition=0,this._hoverOnLine=-1,this._hoverOnColumn=-1,this._layoutInfo=this._editor.getLayoutInfo(),this._rootDomNode=document.createElement("div"),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof bd),this._rootDomNode.style.width=`${this._layoutInfo.width-this._layoutInfo.minimap.minimapCanvasOuterWidth-this._layoutInfo.verticalScrollbarWidth}px`}get hoverOnLine(){return this._hoverOnLine}get hoverOnColumn(){return this._hoverOnColumn}get lineNumbers(){return this._lineNumbers}getCurrentLines(){return this._lineNumbers}setState(e){kn(this._rootDomNode),this._disposableStore.clear(),this._lineNumbers.length=0;const t=this._editor.getOption(64);e.lineNumbers.length*t+e.lastLineRelativePosition>0?(this._lastLineRelativePosition=e.lastLineRelativePosition,this._lineNumbers=e.lineNumbers):(this._lastLineRelativePosition=0,this._lineNumbers=[]),this._renderRootNode()}_renderRootNode(){if(!this._editor._getViewModel())return;for(const[i,s]of this._lineNumbers.entries()){const r=this._renderChildNode(i,s);this._rootDomNode.appendChild(r)}const e=this._editor.getOption(64),t=this._lineNumbers.length*e+this._lastLineRelativePosition;this._rootDomNode.style.display=t>0?"block":"none",this._rootDomNode.style.height=t.toString()+"px",this._rootDomNode.setAttribute("role","list"),this._editor.getOption(70).side==="left"&&(this._rootDomNode.style.marginLeft=this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth+"px")}_renderChildNode(e,t){const n=document.createElement("div"),i=this._editor._getViewModel(),s=i.coordinatesConverter.convertModelPositionToViewPosition(new W(t,1)).lineNumber,r=i.getViewLineRenderingData(s),a=this._editor.getLayoutInfo(),l=a.width-a.minimap.minimapCanvasOuterWidth-a.verticalScrollbarWidth,c=this._editor.getOption(70).side,d=this._editor.getOption(64),h=this._editor.getOption(65);let g;try{g=ls.filter(r.inlineDecorations,s,r.minColumn,r.maxColumn)}catch{g=[]}const f=new nc(!0,!0,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,0,r.tokens,g,r.tabSize,r.startVisibleColumn,1,1,1,500,"none",!0,!0,null),m=new jh(2e3);Fv(f,m);let b;SH?b=SH.createHTML(m.build()):b=m.build();const _=document.createElement("span");_.className="sticky-line",_.classList.add(`stickyLine${t}`),_.style.lineHeight=`${d}px`,_.innerHTML=b;const C=document.createElement("span");C.className="sticky-line",C.style.lineHeight=`${d}px`,c==="left"?C.style.width=`${a.contentLeft-a.minimap.minimapCanvasOuterWidth}px`:c==="right"&&(C.style.width=`${a.contentLeft}px`);const v=document.createElement("span");return h.renderType===1||h.renderType===3&&t%10===0?v.innerText=t.toString():h.renderType===2&&(v.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),v.className="sticky-line-number",v.style.lineHeight=`${d}px`,v.style.width=`${a.lineNumbersWidth}px`,c==="left"?v.style.paddingLeft=`${a.lineNumbersLeft-a.minimap.minimapCanvasOuterWidth}px`:c==="right"&&(v.style.paddingLeft=`${a.lineNumbersLeft}px`),C.appendChild(v),this._editor.applyFontInfo(_),this._editor.applyFontInfo(v),n.appendChild(C),n.appendChild(_),n.className="sticky-line-root",n.setAttribute("role","listitem"),n.tabIndex=0,n.style.lineHeight=`${d}px`,n.style.width=`${l}px`,n.style.height=`${d}px`,n.style.zIndex="0",e===this._lineNumbers.length-1&&(n.style.position="relative",n.style.zIndex="-1",n.style.top=this._lastLineRelativePosition+"px"),this._disposableStore.add($(n,"mouseover",y=>{if(this._editor.hasModel()){const x=new jo(y).target.innerText;this._hoverOnLine=t,this._hoverOnColumn=this._editor.getModel().getLineContent(t).indexOf(x)+1||-1}})),n}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}}u(lY,"StickyScrollWidget");class Of{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}u(Of,"StickyRange");class dv{constructor(e,t,n){this.range=e,this.children=t,this.parent=n}}u(dv,"StickyElement");class KT{constructor(e,t,n,i){this.uri=e,this.version=t,this.element=n,this.outlineProviderId=i}}u(KT,"StickyModel");var jT=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},uv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},TH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},n_;(function(o){o.OUTLINE_MODEL="outlineModel",o.FOLDING_PROVIDER_MODEL="foldingProviderModel",o.INDENTATION_MODEL="indentationModel"})(n_||(n_={}));var Gc;(function(o){o[o.VALID=0]="VALID",o[o.INVALID=1]="INVALID",o[o.CANCELED=2]="CANCELED"})(Gc||(Gc={}));let sI=u(class{constructor(e,t,n,i){this._editor=e,this._languageConfigurationService=t,this._languageFeaturesService=n,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=new tr(300);const s=new oI(n),r=new aI(this._editor,n),a=new rI(this._editor,t);switch(i){case n_.OUTLINE_MODEL:this._modelProviders.push(s),this._modelProviders.push(r),this._modelProviders.push(a);break;case n_.FOLDING_PROVIDER_MODEL:this._modelProviders.push(r),this._modelProviders.push(a);break;case n_.INDENTATION_MODEL:this._modelProviders.push(a);break}this._store=new X}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}update(e,t,n){return TH(this,void 0,void 0,function*(){return this._store.clear(),this._store.add({dispose:()=>{var i;this._cancelModelPromise(),(i=this._updateScheduler)===null||i===void 0||i.cancel()}}),this._cancelModelPromise(),yield this._updateScheduler.trigger(()=>TH(this,void 0,void 0,function*(){for(const i of this._modelProviders){const{statusPromise:s,modelPromise:r}=i.computeStickyModel(e,t,n);this._modelPromise=r;const a=yield s;if(this._modelPromise!==r)return null;switch(a){case Gc.CANCELED:return this._store.clear(),null;case Gc.VALID:return i.stickyModel}}return null}))})}},"StickyModelProvider");sI=jT([uv(1,zt),uv(2,he)],sI);class oP{constructor(){this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,Gc.INVALID}computeStickyModel(e,t,n){if(!this.isProviderValid(e))return{statusPromise:this._invalid(),modelPromise:null};const i=On(s=>this.createModelFromProvider(e,t,s));return{statusPromise:i.then(s=>this.isModelValid(s)?n.isCancellationRequested?Gc.CANCELED:(this._stickyModel=this.createStickyModel(e,t,n,s),Gc.VALID):this._invalid()).then(void 0,s=>(He(s),Gc.CANCELED)),modelPromise:i}}isModelValid(e){return!0}isProviderValid(e){return!0}}u(oP,"StickyModelCandidateProvider");let oI=u(class extends oP{constructor(e){super(),this._languageFeaturesService=e}createModelFromProvider(e,t,n){return fa.create(this._languageFeaturesService.documentSymbolProvider,e,n)}createStickyModel(e,t,n,i){var s;const{stickyOutlineElement:r,providerID:a}=this._stickyModelFromOutlineModel(i,(s=this._stickyModel)===null||s===void 0?void 0:s.outlineProviderId);return new KT(e.uri,t,r,a)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let n;if(st.first(e.children.values())instanceof VR){const a=st.find(e.children.values(),l=>l.id===t);if(a)n=a.children;else{let l="",c=-1,d;for(const[h,g]of e.children.entries()){const f=this._findSumOfRangesOfGroup(g);f>c&&(d=g,c=f,l=g.id)}t=l,n=d.children}}else n=e.children;const i=[],s=Array.from(n.values()).sort((a,l)=>{const c=new Of(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new Of(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of s)i.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new dv(void 0,i,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const n=[];for(const s of e.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)n.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const r of s.children.values())n.push(this._stickyModelFromOutlineElement(r,s.symbol.selectionRange.startLineNumber));n.sort((s,r)=>this._comparator(s.range,r.range));const i=new Of(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new dv(i,n,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const n of e.children.values())t+=this._findSumOfRangesOfGroup(n);return e instanceof y1?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}},"StickyModelFromCandidateOutlineProvider");oI=jT([uv(0,he)],oI);class rP extends oP{constructor(e){super(),this._foldingLimitReporter=new OR(e)}createStickyModel(e,t,n,i){const s=this._fromFoldingRegions(i);return new KT(e.uri,t,s,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,n=[],i=new dv(void 0,[],void 0);for(let s=0;s<t;s++){const r=e.getParentIndex(s);let a;r!==-1?a=n[r]:a=i;const l=new dv(new Of(e.getStartLineNumber(s),e.getEndLineNumber(s)+1),[],a);a.children.push(l),n.push(l)}return i}}u(rP,"StickyModelFromCandidateFoldingProvider");let rI=u(class extends rP{constructor(e,t){super(e),this._languageConfigurationService=t}createModelFromProvider(e,t,n){return new AT(e,this._languageConfigurationService,this._foldingLimitReporter).compute(n)}},"StickyModelFromCandidateIndentationFoldingProvider");rI=jT([uv(1,zt)],rI);let aI=u(class extends rP{constructor(e,t){super(e),this._languageFeaturesService=t}isProviderValid(e){return Ql.getFoldingRangeProviders(this._languageFeaturesService,e).length>0}createModelFromProvider(e,t,n){const i=Ql.getFoldingRangeProviders(this._languageFeaturesService,e);return new IT(e,i,()=>this.createModelFromProvider(e,t,n),this._foldingLimitReporter,void 0).compute(n)}},"StickyModelFromCandidateSyntaxFoldingProvider");aI=jT([uv(1,he)],aI);var jpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},LH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class cY{constructor(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=n}}u(cY,"StickyLineCandidate");let lI=u(class extends z{constructor(e,t,n){super(),this._languageFeaturesService=t,this._languageConfigurationService=n,this._onDidChangeStickyScroll=this._store.add(new F),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._options=null,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=new X,this._updateSoon=this._register(new yt(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(110)&&this.readConfiguration()})),this.readConfiguration()}dispose(){super.dispose(),this._sessionStore.dispose()}readConfiguration(){if(this._options=this._editor.getOption(110),!this._options.enabled){this._sessionStore.clear();return}this._stickyModelProvider=new sI(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel),this._sessionStore.add(this._editor.onDidChangeModel(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this.update()}getVersionId(){var e;return(e=this._model)===null||e===void 0?void 0:e.version}update(){var e;return LH(this,void 0,void 0,function*(){(e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new ci,yield this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()})}updateStickyModel(e){return LH(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._stickyModelProvider)return;const t=this._editor.getModel(),n=t.getVersionId(),s=(this._model?!kS(this._model.uri,t.uri):!1)?setTimeout(()=>{e.isCancellationRequested||(this._model=new KT(t.uri,t.getVersionId(),void 0,void 0),this._onDidChangeStickyScroll.fire())},75):void 0;this._model=yield this._stickyModelProvider.update(t,n,e),clearTimeout(s)})}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,n,i,s){if(t.children.length===0)return;let r=s;const a=[];for(let d=0;d<t.children.length;d++){const h=t.children[d];h.range&&a.push(h.range.startLineNumber)}const l=this.updateIndex(s_(a,e.startLineNumber,(d,h)=>d-h)),c=this.updateIndex(s_(a,e.startLineNumber+i,(d,h)=>d-h));for(let d=l;d<=c;d++){const h=t.children[d];if(!h)return;if(h.range){const g=h.range.startLineNumber,f=h.range.endLineNumber;e.startLineNumber<=f+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,n.push(new cY(g,f-1,i+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i+1,g))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i,s)}}getCandidateStickyLinesIntersecting(e){var t,n;if(!(!((t=this._model)===null||t===void 0)&&t.element))return[];let i=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,i,0,-1);const s=(n=this._editor._getViewModel())===null||n===void 0?void 0:n.getHiddenAreas();if(s)for(const r of s)i=i.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return i}},"StickyLineCandidateProvider");lI=jpe([xH(1,he),xH(2,zt)],lI);var $pe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ig=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},EH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let Ka=u(class dY extends z{constructor(e,t,n,i,s,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=n,this._instaService=i,this._contextKeyService=a,this._sessionStore=new X,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._stickyScrollWidget=new lY(this._editor),this._stickyLineCandidateProvider=new lI(this._editor,n,s),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new iI([],0),this._readConfiguration(),this._register(this._editor.onDidChangeConfiguration(c=>{c.hasChanged(110)&&this._readConfiguration()})),this._register($(this._stickyScrollWidget.getDomNode(),ae.CONTEXT_MENU,c=>EH(this,void 0,void 0,function*(){this._onContextMenu(c)}))),this._stickyScrollFocusedContextKey=D.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=D.stickyScrollVisible.bindTo(this._contextKeyService);const l=this._register(Kl(this._stickyScrollWidget.getDomNode()));this._register(l.onDidBlur(c=>{const d=this._stickyScrollWidget.getDomNode().clientHeight;this._positionRevealed===!1&&d===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(l.onDidFocus(c=>{this.focus()})),this._register(this._createClickLinkGesture()),this._register($(this._stickyScrollWidget.getDomNode(),ae.MOUSE_DOWN,c=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(dY.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)===null||e===void 0||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}if(this._stickyScrollFocusedContextKey.get()===!0)return;this._focused=!0,this._focusDisposableStore=new X,this._stickyScrollFocusedContextKey.set(!0);const t=this._stickyScrollWidget.getDomNode();t.lastElementChild.focus(),this._stickyElements=t.children,this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1}focusNext(){this._focusedStickyElementIndex<this._stickyElements.length-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyElements.item(this._focusedStickyElementIndex).focus()}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._positionRevealed=!0,this._editor.revealPosition(e),this._editor.setSelection(T.fromPositions(e)),this._editor.focus()}_createClickLinkGesture(){const e=new X,t=new X;e.add(t);const n=new u0(this._editor,!0);return e.add(n),e.add(n.onMouseMoveOrRelevantKeyDown(([i,s])=>{if(!this._editor.hasModel()||!i.hasTriggerModifier){t.clear();return}const r=i.target;if(r.detail===this._stickyScrollWidget.getId()&&r.element.innerText===r.element.innerHTML){const a=r.element.innerText;if(this._stickyScrollWidget.hoverOnColumn===-1)return;const l=this._stickyScrollWidget.hoverOnLine,c=this._stickyScrollWidget.hoverOnColumn,d=new T(l,c,l,c+a.length);if(!d.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=d,t.clear();else if(r.element.style.textDecoration==="underline")return;const h=new ci;t.add(Oe(()=>h.dispose(!0)));let g;ST(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new W(l,c+1),h.token).then(f=>{if(!h.token.isCancellationRequested)if(f.length!==0){this._candidateDefinitionsLength=f.length;const m=r.element;g!==m?(t.clear(),g=m,g.style.textDecoration="underline",t.add(Oe(()=>{g.style.textDecoration="none"}))):g||(g=m,g.style.textDecoration="underline",t.add(Oe(()=>{g.style.textDecoration="none"})))}else t.clear()})}else t.clear()})),e.add(n.onCancel(()=>{t.clear()})),e.add(n.onExecute(i=>EH(this,void 0,void 0,function*(){i.target.detail===this._stickyScrollWidget.getId()&&(i.hasTriggerModifier?(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:1})),this._instaService.invokeFunction(z$,i,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})):i.isRightClick||(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:this._stickyScrollWidget.hoverOnColumn})))}))),e}_onContextMenu(e){this._contextMenuService.showContextMenu({menuId:A.StickyScrollContext,getAnchor:()=>e})}_readConfiguration(){const e=this._editor.getOption(110);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._renderStickyScroll())),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(n=>this._onTokensChange(n))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>this._renderStickyScroll())),this._enabled=!0);this._editor.getOption(65).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>this._renderStickyScroll()))}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const n of t)for(const i of e.ranges)if(n>=i.fromLineNumber&&n<=i.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll()}_onDidResize(){const e=this._editor.getLayoutInfo(),t=e.width-e.minimap.minimapCanvasOuterWidth-e.verticalScrollbarWidth;this._stickyScrollWidget.getDomNode().style.width=`${t}px`;const n=e.height/this._editor.getOption(64);this._maxStickyLines=Math.round(n*.25)}_renderStickyScroll(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._stickyLineCandidateProvider.getVersionId();if(t===void 0||t===e.getVersionId())if(this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.lineNumbers.length!==0),!this._focused)this._stickyScrollWidget.setState(this._widgetState);else if(this._stickyElements=this._stickyScrollWidget.getDomNode().children,this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState),this._focusedStickyElementIndex=this._stickyElements.length-1,this._focusedStickyElementIndex!==-1&&this._stickyElements.item(this._focusedStickyElementIndex).focus();else{const n=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState),this._stickyElements.length===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(n)||(this._focusedStickyElementIndex=this._stickyElements.length-1),this._stickyElements.item(this._focusedStickyElementIndex).focus())}}findScrollWidgetState(){const e=this._editor.getOption(64),t=Math.min(this._maxStickyLines,this._editor.getOption(110).maxLineCount),n=this._editor.getScrollTop();let i=0;const s=[],r=this._editor.getVisibleRanges();if(r.length!==0){const a=new Of(r[0].startLineNumber,r[r.length-1].endLineNumber),l=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(a);for(const c of l){const d=c.startLineNumber,h=c.endLineNumber,g=c.nestingDepth;if(h-d>0){const f=(g-1)*e,m=g*e,b=this._editor.getBottomForLineNumber(d)-n,_=this._editor.getTopForLineNumber(h)-n,C=this._editor.getBottomForLineNumber(h)-n;if(f>_&&f<=C){s.push(d),i=C-m;break}else m>b&&m<=C&&s.push(d);if(s.length===t)break}}}return new iI(s,i)}dispose(){super.dispose(),this._sessionStore.dispose()}},"StickyScrollController");Ka.ID="store.contrib.stickyScrollController";Ka=$pe([Ig(1,Zr),Ig(2,he),Ig(3,Re),Ig(4,zt),Ig(5,Po),Ig(6,Me)],Ka);var qpe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class uY extends Ya{constructor(){super({id:"editor.action.toggleStickyScroll",title:{value:p("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:p({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:Kpe.View,toggled:{condition:Z.equals("config.editor.stickyScroll.enabled",!0),title:p("stickyScroll","Sticky Scroll"),mnemonicTitle:p({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:A.CommandPalette},{id:A.MenubarViewMenu,group:"5_editor",order:2},{id:A.StickyScrollContext}]})}run(e){return qpe(this,void 0,void 0,function*(){const t=e.get(lt),n=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",n)})}}u(uY,"ToggleStickyScroll");const $T=100;class hY extends Yh{constructor(){super({id:"editor.action.focusStickyScroll",title:{value:p("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:p({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll"),original:"Focus Sticky Scroll"},precondition:Z.and(Z.has("config.editor.stickyScroll.enabled"),D.stickyScrollVisible),menu:[{id:A.CommandPalette}]})}runEditorCommand(e,t){var n;(n=Ka.get(t))===null||n===void 0||n.focus()}}u(hY,"FocusStickyScroll");class gY extends Yh{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:{value:p("selectNextStickyScrollLine.title","Select next sticky scroll line"),original:"Select next sticky scroll line"},precondition:D.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:$T,primary:18}})}runEditorCommand(e,t){var n;(n=Ka.get(t))===null||n===void 0||n.focusNext()}}u(gY,"SelectNextStickyScrollLine");class fY extends Yh{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:{value:p("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),original:"Select previous sticky scroll line"},precondition:D.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:$T,primary:16}})}runEditorCommand(e,t){var n;(n=Ka.get(t))===null||n===void 0||n.focusPrevious()}}u(fY,"SelectPreviousStickyScrollLine");class pY extends Yh{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:{value:p("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),original:"Go to focused sticky scroll line"},precondition:D.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:$T,primary:3}})}runEditorCommand(e,t){var n;(n=Ka.get(t))===null||n===void 0||n.goToFocused()}}u(pY,"GoToStickyScrollLine");class mY extends Yh{constructor(){super({id:"editor.action.selectEditor",title:{value:p("selectEditor.title","Select Editor"),original:"Select Editor"},precondition:D.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:$T,primary:9}})}runEditorCommand(e,t){var n;(n=Ka.get(t))===null||n===void 0||n.selectEditor()}}u(mY,"SelectEditor");ct(Ka.ID,Ka,1);Mn(uY);Mn(hY);Mn(fY);Mn(gY);Mn(pY);Mn(mY);var aP=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ype=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};class bY{constructor(e,t,n,i,s,r){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=i,this.command=s,this.completion=r}}u(bY,"SuggestInlineCompletion");let cI=u(class extends F5{constructor(e,t,n,i,s,r){super(s.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=i,this._suggestMemoryService=r}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var e;const t=[],{items:n}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=st.slice(n,i),r=st.slice(n,0,i);let a=5;for(const l of st.concat(s,r)){if(l.score===Wr.Default)continue;const c=new T(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),d=l.completion.insertTextRules&&l.completion.insertTextRules&4?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new bY(c,d,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(Ze.None)}return t}},"InlineCompletionResults");cI=aP([eh(5,FT)],cI);let dI=u(class{constructor(e,t,n,i){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=n,this._suggestMemoryService=i}provideInlineCompletions(e,t,n,i){var s;return Ype(this,void 0,void 0,function*(){if(n.selectedSuggestionInfo)return;const r=this._getEditorOption(85,e);if(Mu.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Mu.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c?.word||(d=this._getTriggerCharacterInfo(e,t)),!c?.word&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let h;const g=e.getValueInRange(new T(t.lineNumber,1,t.lineNumber,t.column));if(!d&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,c))){const f=new pH(g,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),h=this._lastResult}else{const f=yield wR(this._languageFeatureService.completionProvider,e,t,new Np(void 0,void 0,d?.providers),d&&{triggerKind:1,triggerCharacter:d.ch},i);let m;f.needsClipboard&&(m=yield this._clipboardService.readText());const b=new wl(f.items,t.column,new pH(g,0),Go.None,this._getEditorOption(113,e),this._getEditorOption(107,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},m);h=new cI(e,t.lineNumber,c,b,f,this._suggestMemoryService)}return this._lastResult=h,h})}handleItemDidShow(e,t){t.completion.resolve(Ze.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var n;const i=e.getValueInRange(T.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))!((n=r.triggerCharacters)===null||n===void 0)&&n.includes(i)&&s.add(r);if(s.size!==0)return{providers:s,ch:i}}},"SuggestInlineCompletions");dI=aP([eh(1,he),eh(2,oc),eh(3,FT)],dI);let A1=u(class Gg{constructor(e,t,n,i){if(++Gg._counter===1){const s=i.createInstance(dI,(r,a)=>{var l;return((l=n.listCodeEditors().find(d=>d.getModel()===a))!==null&&l!==void 0?l:e).getOption(r)});Gg._disposable=t.inlineCompletionsProvider.register("*",s)}}dispose(){var e;--Gg._counter===0&&((e=Gg._disposable)===null||e===void 0||e.dispose(),Gg._disposable=void 0)}},"EditorContribution");A1._counter=0;A1=aP([eh(1,he),eh(2,gt),eh(3,Re)],A1);ct("suggest.inlineCompletionsProvider",A1,0);class _Y extends de{constructor(){super({id:"editor.action.forceRetokenize",label:p("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const i=new ji(!0);n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}u(_Y,"ForceRetokenizeAction");ee(_Y);class Wh extends Ya{constructor(){super({id:Wh.ID,title:{value:p({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),original:"Toggle Tab Key Moves Focus"},precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(e){const t=e.get(Me).getContextKeyValue("focusedView")==="terminal"?"terminalFocus":"editorFocus",i=!Ou.getTabFocusMode(t);Ou.setTabFocusMode(i,t),ri(i?p("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):p("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}u(Wh,"ToggleTabFocusModeAction");Wh.ID="editor.action.toggleTabFocusMode";Mn(Wh);var Xpe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zpe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let uI=u(class extends z{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,n={},i){var s;super(),this._link=t,this._enabled=!0,this.el=q(e,ie("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const r=this._register(new qe(this.el,"click")),a=this._register(new qe(this.el,"keypress")),l=pe.chain(a.event).map(h=>new Et(h)).filter(h=>h.keyCode===3).event,c=this._register(new qe(this.el,Dt.Tap)).event;this._register(Tt.addTarget(this.el));const d=pe.any(r.event,l,c);this._register(d(h=>{this.enabled&&(Be.stop(h,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}},"Link");uI=Xpe([Zpe(3,Ms)],uI);var vY=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},CY=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Jpe=26;let hI=u(class extends z{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(gI))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,Jpe)}},"BannerController");hI=vY([CY(1,Re)],hI);let gI=u(class extends z{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Jl,{}),this.element=ie("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ie("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){kn(this.element)}show(e){kn(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=q(this.element,ie("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(ie(`div${xe.asCSSSelector(e.icon)}`));const i=q(this.element,ie("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=q(this.element,ie("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(uI,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));const s=q(this.element,ie("div.action-container"));this.actionBar=this._register(new eo(s)),this.actionBar.push(this._register(new cs("banner.close","Close Banner",xe.asClassName(UB),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}},"Banner");gI=vY([CY(0,Re)],gI);var lP=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ti=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const Qpe=bn("extensions-warning-message",re.warning,p("warningIcon","Icon shown with a warning message in the extensions editor."));let Gp=u(class extends z{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const r=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new mg};else if(s.ambiguousCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new cc};else if(s.invisibleCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new pg};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:Qpe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(hI,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(120),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(120)&&(this._options=e.getOption(120),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=eme(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?VX:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new fI(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new yY(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},"UnicodeHighlighter");Gp.ID="editor.contrib.unicodeHighlighter";Gp=lP([Hf(1,rr),Hf(2,L6),Hf(3,Re)],Gp);function eme(o,e){return{nonBasicASCII:e.nonBasicASCII===Fs?!o:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Fs?!o:e.includeComments,includeStrings:e.includeStrings===Fs?!o:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}u(eme,"resolveOptions");let fI=u(class extends z{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new yt(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:hv.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!qN(t,e))return null;const n=t.getValueInRange(e.range);return{reason:wY(n,this._options),inComment:YN(t,e),inString:XN(t,e)}}},"DocumentUnicodeHighlighter");fI=lP([Hf(3,rr)],fI);class yY extends z{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new yt(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const s=nS.computeUnicodeHighlights(this._model,this._options,i);for(const r of s.ranges)n.ranges.push(r);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:hv.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return qN(t,e)?{reason:wY(n,this._options),inComment:YN(t,e),inString:XN(t,e)}:null}}u(yY,"ViewportUnicodeHighlighter");let pI=u(class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(Gp.ID);if(!i)return[];const s=[];let r=300;for(const a of t){const l=i.getDecorationInfo(a);if(!l)continue;const d=n.getValueInRange(a.range).codePointAt(0),h=OL(d);let g;switch(l.reason.kind){case 0:{wv(l.reason.confusableWith)?g=p("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",h,OL(l.reason.confusableWith.codePointAt(0))):g=p("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,OL(l.reason.confusableWith.codePointAt(0)));break}case 1:g=p("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:g=p("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}const f={codePoint:d,reason:l.reason,inComment:l.inComment,inString:l.inString},m=p("unicodeHighlight.adjustSettings","Adjust settings"),b=`command:${_m.ID}?${encodeURIComponent(JSON.stringify(f))}`,_=new Gi("",!0).appendMarkdown(g).appendText(" ").appendLink(b,m);s.push(new Ko(this,a.range,[_],!1,r++))}return s}renderHoverParts(e,t){return LK(e,t,this._editor,this._languageService,this._openerService)}},"UnicodeHighlighterHoverParticipant");pI=lP([Hf(1,Wt),Hf(2,Ms)],pI);function mI(o){return`U+${o.toString(16).padStart(4,"0")}`}u(mI,"codePointToHex");function OL(o){let e=`\`${mI(o)}\``;return Hr.isInvisibleCharacter(o)||(e+=` "${`${tme(o)}`}"`),e}u(OL,"formatCodePointMarkdown");function tme(o){return o===96?"`` ` ``":"`"+String.fromCodePoint(o)+"`"}u(tme,"renderCodePointAsInlineCode");function wY(o,e){return nS.computeUnicodeHighlightReason(o,e)}u(wY,"computeReason");class hv{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Pe.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}}u(hv,"Decorations");hv.instance=new hv;class SY extends de{constructor(){super({id:cc.ID,label:p("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return Ti(this,void 0,void 0,function*(){const i=e?.get(lt);i&&this.runAction(i)})}runAction(e){return Ti(this,void 0,void 0,function*(){yield e.updateValue(os.includeComments,!1,2)})}}u(SY,"DisableHighlightingInCommentsAction");class TY extends de{constructor(){super({id:cc.ID,label:p("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return Ti(this,void 0,void 0,function*(){const i=e?.get(lt);i&&this.runAction(i)})}runAction(e){return Ti(this,void 0,void 0,function*(){yield e.updateValue(os.includeStrings,!1,2)})}}u(TY,"DisableHighlightingInStringsAction");class cc extends de{constructor(){super({id:cc.ID,label:p("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Ti(this,void 0,void 0,function*(){const i=e?.get(lt);i&&this.runAction(i)})}runAction(e){return Ti(this,void 0,void 0,function*(){yield e.updateValue(os.ambiguousCharacters,!1,2)})}}u(cc,"DisableHighlightingOfAmbiguousCharactersAction");cc.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class pg extends de{constructor(){super({id:pg.ID,label:p("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Ti(this,void 0,void 0,function*(){const i=e?.get(lt);i&&this.runAction(i)})}runAction(e){return Ti(this,void 0,void 0,function*(){yield e.updateValue(os.invisibleCharacters,!1,2)})}}u(pg,"DisableHighlightingOfInvisibleCharactersAction");pg.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class mg extends de{constructor(){super({id:mg.ID,label:p("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Ti(this,void 0,void 0,function*(){const i=e?.get(lt);i&&this.runAction(i)})}runAction(e){return Ti(this,void 0,void 0,function*(){yield e.updateValue(os.nonBasicASCII,!1,2)})}}u(mg,"DisableHighlightingOfNonBasicAsciiCharactersAction");mg.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class _m extends de{constructor(){super({id:_m.ID,label:p("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Ti(this,void 0,void 0,function*(){const{codePoint:i,reason:s,inString:r,inComment:a}=n,l=String.fromCodePoint(i),c=e.get(Ja),d=e.get(lt);function h(m){return Hr.isInvisibleCharacter(m)?p("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",mI(m)):p("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${mI(m)} "${l}"`)}u(h,"getExcludeCharFromBeingHighlightedLabel");const g=[];if(s.kind===0)for(const m of s.notAmbiguousInLocales)g.push({label:p("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',m),run:()=>Ti(this,void 0,void 0,function*(){ime(d,[m])})});if(g.push({label:h(i),run:()=>nme(d,[i])}),a){const m=new SY;g.push({label:m.label,run:()=>Ti(this,void 0,void 0,function*(){return m.runAction(d)})})}else if(r){const m=new TY;g.push({label:m.label,run:()=>Ti(this,void 0,void 0,function*(){return m.runAction(d)})})}if(s.kind===0){const m=new cc;g.push({label:m.label,run:()=>Ti(this,void 0,void 0,function*(){return m.runAction(d)})})}else if(s.kind===1){const m=new pg;g.push({label:m.label,run:()=>Ti(this,void 0,void 0,function*(){return m.runAction(d)})})}else if(s.kind===2){const m=new mg;g.push({label:m.label,run:()=>Ti(this,void 0,void 0,function*(){return m.runAction(d)})})}else sme(s);const f=yield c.pick(g,{title:p("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}u(_m,"ShowExcludeOptions");_m.ID="editor.action.unicodeHighlight.showExcludeOptions";function nme(o,e){return Ti(this,void 0,void 0,function*(){const t=o.getValue(os.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield o.updateValue(os.allowedCharacters,n,2)})}u(nme,"excludeCharFromBeingHighlighted");function ime(o,e){var t;return Ti(this,void 0,void 0,function*(){const n=(t=o.inspect(os.allowedLocales).user)===null||t===void 0?void 0:t.value;let i;typeof n=="object"&&n?i=Object.assign({},n):i={};for(const s of e)i[s]=!0;yield o.updateValue(os.allowedLocales,i,2)})}u(ime,"excludeLocaleFromBeingHighlighted");function sme(o){throw new Error(`Unexpected value: ${o}`)}u(sme,"expectNever");ee(cc);ee(pg);ee(mg);ee(_m);ct(Gp.ID,Gp,1);dg.register(pI);var ome=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},kH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},rme=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};const xY="ignoreUnusualLineTerminators";function ame(o,e,t){o.setModelProperty(e.uri,xY,t)}u(ame,"writeIgnoreState");function lme(o,e){return o.getModelProperty(e.uri,xY)}u(lme,"readIgnoreState");let gv=u(class extends z{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._isPresentingDialog=!1,this._config=this._editor.getOption(121),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(121)&&(this._config=this._editor.getOption(121),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}_checkForUnusualLineTerminators(){return rme(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||lme(this._codeEditorService,e)===!0||this._editor.getOption(87))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let n;try{this._isPresentingDialog=!0,n=yield this._dialogService.confirm({title:p("unusualLineTerminators.title","Unusual Line Terminators"),message:p("unusualLineTerminators.message","Detected unusual line terminators"),detail:p("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Do(e.uri)),primaryButton:p({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:p("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!n.confirmed){ame(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}},"UnusualLineTerminatorsDetector");gv.ID="editor.contrib.unusualLineTerminatorsDetector";gv=ome([kH(1,Yv),kH(2,gt)],gv);ct(gv.ID,gv,1);var cme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},DH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const qT=new ue("hasWordHighlights",!1);function LY(o,e,t,n){const i=o.ordered(e);return ZV(i.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,n)).then(void 0,$n)),Ei)}u(LY,"getOccurrencesAtPosition");class cP{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=On(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new T(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,s=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){const h=n.getRange(c);h&&h.startLineNumber===i&&h.startColumn<=s&&h.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}u(cP,"OccurenceAtPositionRequest");class EY extends cP{constructor(e,t,n,i){super(e,t,n),this._providers=i}_compute(e,t,n,i){return LY(this._providers,e,t.getPosition(),i).then(s=>s||[])}}u(EY,"SemanticOccurenceAtPositionRequest");class kY extends cP{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return ad(250,i).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:a_.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}u(kY,"TextualOccurenceAtPositionRequest");function dme(o,e,t,n){return o.has(e)?new EY(e,t,n,o):new kY(e,t,n)}u(dme,"computeOccurencesAtPosition");Xa("_executeDocumentHighlights",(o,e,t)=>{const n=o.get(he);return LY(n.documentHighlightProvider,e,t,Ze.None)});class DY{constructor(e,t,n){this.toUnhook=new X,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=qT.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(78),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(i=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(i=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(i=>{const s=this.editor.getOption(78);this.occurrencesHighlight!==s&&(this.occurrencesHighlight=s,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(T.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);ri(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);ri(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,n=e.endColumn,i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=dme(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(125)),this.workerRequest.result.then(a=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},He)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:Spe(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations())}dispose(){this._stopAll(),this.toUnhook.dispose()}}u(DY,"WordHighlighter");let Bh=u(class MY extends z{static get(e){return e.getContribution(MY.ID)}constructor(e,t,n){super(),this.wordHighlighter=null;const i=u(()=>{e.hasModel()&&(this.wordHighlighter=new DY(e,n.documentHighlightProvider,t))},"createWordHighlighterIfPossible");this._register(e.onDidChangeModel(s=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}},"WordHighlighterContribution");Bh.ID="editor.contrib.wordHighlighter";Bh=cme([DH(1,Me),DH(2,he)],Bh);class dP extends de{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=Bh.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}u(dP,"WordHighlightNavigationAction");class AY extends dP{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:p("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:qT,kbOpts:{kbExpr:D.editorTextFocus,primary:65,weight:100}})}}u(AY,"NextWordHighlightAction");class IY extends dP{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:p("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:qT,kbOpts:{kbExpr:D.editorTextFocus,primary:1089,weight:100}})}}u(IY,"PrevWordHighlightAction");class NY extends de{constructor(){super({id:"editor.action.wordHighlight.trigger",label:p("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:qT.toNegated(),kbOpts:{kbExpr:D.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=Bh.get(t);i&&i.restoreViewState(!0)}}u(NY,"TriggerWordHighlightAction");ct(Bh.ID,Bh,0);ee(AY);ee(IY);ee(NY);class N0 extends jn{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=xo(t.getOption(125)),s=t.getModel(),a=t.getSelections().map(l=>{const c=new W(l.positionLineNumber,l.positionColumn),d=this._move(i,s,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>it.fromModelSelection(l))),a.length===1){const l=new W(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new ge(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new ge(t.lineNumber,t.column,t.lineNumber,t.column)}}u(N0,"MoveWordCommand");class dc extends N0{_move(e,t,n,i){return ht.moveWordLeft(e,t,n,i)}}u(dc,"WordLeftCommand");class uc extends N0{_move(e,t,n,i){return ht.moveWordRight(e,t,n,i)}}u(uc,"WordRightCommand");class RY extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}u(RY,"CursorWordStartLeft");class PY extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}u(PY,"CursorWordEndLeft");class FY extends dc{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Z.and(D.textInputFocus,(e=Z.and(Mv,nT))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}u(FY,"CursorWordLeft");class OY extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}u(OY,"CursorWordStartLeftSelect");class HY extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}u(HY,"CursorWordEndLeftSelect");class VY extends dc{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Z.and(D.textInputFocus,(e=Z.and(Mv,nT))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}u(VY,"CursorWordLeftSelect");class WY extends dc{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(xo(qr.wordSeparators.defaultValue),t,n,i)}}u(WY,"CursorWordAccessibilityLeft");class BY extends dc{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(xo(qr.wordSeparators.defaultValue),t,n,i)}}u(BY,"CursorWordAccessibilityLeftSelect");class UY extends uc{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}u(UY,"CursorWordStartRight");class GY extends uc{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Z.and(D.textInputFocus,(e=Z.and(Mv,nT))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}u(GY,"CursorWordEndRight");class zY extends uc{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}u(zY,"CursorWordRight");class KY extends uc{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}u(KY,"CursorWordStartRightSelect");class jY extends uc{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Z.and(D.textInputFocus,(e=Z.and(Mv,nT))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}u(jY,"CursorWordEndRightSelect");class $Y extends uc{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}u($Y,"CursorWordRightSelect");class qY extends uc{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(xo(qr.wordSeparators.defaultValue),t,n,i)}}u(qY,"CursorWordAccessibilityRight");class YY extends uc{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(xo(qr.wordSeparators.defaultValue),t,n,i)}}u(YY,"CursorWordAccessibilityRightSelect");class R0 extends jn{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(zt);if(!t.hasModel())return;const s=xo(t.getOption(125)),r=t.getModel(),a=t.getSelections(),l=t.getOption(5),c=t.getOption(9),d=i.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),h=t._getViewModel(),g=a.map(f=>{const m=this._delete({wordSeparators:s,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(7),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Qn(m,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}u(R0,"DeleteWordCommand");class YT extends R0{_delete(e,t){const n=ht.deleteWordLeft(e,t);return n||new T(1,1,1,1)}}u(YT,"DeleteWordLeftCommand");class XT extends R0{_delete(e,t){const n=ht.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new T(i,s,i,s)}}u(XT,"DeleteWordRightCommand");class XY extends YT{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:D.writable})}}u(XY,"DeleteWordStartLeft");class ZY extends YT{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:D.writable})}}u(ZY,"DeleteWordEndLeft");class JY extends YT{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}u(JY,"DeleteWordLeft");class QY extends XT{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:D.writable})}}u(QY,"DeleteWordStartRight");class eX extends XT{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:D.writable})}}u(eX,"DeleteWordEndRight");class tX extends XT{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}u(tX,"DeleteWordRight");class nX extends de{constructor(){super({id:"deleteInsideWord",precondition:D.writable,label:p("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=xo(t.getOption(125)),s=t.getModel(),a=t.getSelections().map(l=>{const c=ht.deleteInsideWord(i,s,l);return new Qn(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}u(nX,"DeleteInsideWord");oe(new RY);oe(new PY);oe(new FY);oe(new OY);oe(new HY);oe(new VY);oe(new UY);oe(new GY);oe(new zY);oe(new KY);oe(new jY);oe(new $Y);oe(new WY);oe(new BY);oe(new qY);oe(new YY);oe(new XY);oe(new ZY);oe(new JY);oe(new QY);oe(new eX);oe(new tX);ee(nX);class iX extends R0{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=Gv.deleteWordPartLeft(e);return n||new T(1,1,1,1)}}u(iX,"DeleteWordPartLeft");class sX extends R0{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:D.writable,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=Gv.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new T(i,s,i,s)}}u(sX,"DeleteWordPartRight");class uP extends N0{_move(e,t,n,i){return Gv.moveWordPartLeft(e,t,n)}}u(uP,"WordPartLeftCommand");class oX extends uP{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}u(oX,"CursorWordPartLeft");ot.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class rX extends uP{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}u(rX,"CursorWordPartLeftSelect");ot.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class hP extends N0{_move(e,t,n,i){return Gv.moveWordPartRight(e,t,n)}}u(hP,"WordPartRightCommand");class aX extends hP{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}u(aX,"CursorWordPartRight");class lX extends hP{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:D.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}u(lX,"CursorWordPartRightSelect");oe(new iX);oe(new sX);oe(new oX);oe(new rX);oe(new aX);oe(new lX);class I1 extends z{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=ks.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(p("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(p("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}u(I1,"ReadOnlyMessageController");I1.ID="editor.contrib.readOnlyMessageController";ct(I1.ID,I1,2);var cX=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ky=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const dX=new ue("accessibilityHelpWidgetVisible",!1);let Uh=u(class uX extends z{static get(e){return e.getContribution(uX.ID)}constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(zp,this._editor))}show(){this._widget.show()}hide(){this._widget.hide()}},"AccessibilityHelpController");Uh.ID="editor.contrib.accessibilityHelpController";Uh=cX([Ky(1,Re)],Uh);function ume(o,e){return!o||o.length===0?wn.noSelection:o.length===1?e?mo(wn.singleSelectionRange,o[0].positionLineNumber,o[0].positionColumn,e):mo(wn.singleSelection,o[0].positionLineNumber,o[0].positionColumn):e?mo(wn.multiSelectionRange,o.length,e):o.length>0?mo(wn.multiSelection,o.length):""}u(ume,"getSelectionLabel");let zp=u(class jy extends No{constructor(e,t,n,i){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=dX.bindTo(this._contextKeyService),this._domNode=dt(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=dt(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(pn(this._contentDomNode.domNode,"keydown",s=>{if(this._isVisible&&(s.equals(2083)&&(ri(wn.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),kn(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),s.preventDefault(),s.stopPropagation()),s.equals(2086))){ri(wn.openingDocs);let r=this._editor.getRawOptions().accessibilityHelpUrl;typeof r>"u"&&(r="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(ve.parse(r)),s.preventDefault(),s.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return jy.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){const i=this._keybindingService.lookupKeybinding(e);return i?mo(t,i.getAriaLabel()):mo(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=ume(t,n);e.get(59)?e.get(87)?i+=wn.readonlyDiffEditor:i+=wn.editableDiffEditor:e.get(87)?i+=wn.readonlyEditor:i+=wn.editableEditor;const s=Ye?wn.changeConfigToOnMac:wn.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+s;break;case 2:i+=`

 - `+wn.auto_on;break;case 1:i+=`

 - `+wn.auto_off,i+=" "+s;break}e.get(138)?i+=`

 - `+this._descriptionForCommand(Wh.ID,wn.tabFocusModeOnMsg,wn.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(Wh.ID,wn.tabFocusModeOffMsg,wn.tabFocusModeOffMsgNoKb);const r=Ye?wn.openDocMac:wn.openDocWinLinux;i+=`

 - `+r,i+=`

`+wn.outroMsg,this._contentDomNode.domNode.appendChild(gB(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,kn(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(jy.WIDTH,e.width-40)),n=Math.max(5,Math.min(jy.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);const i=Math.round((e.height-n)/2);this._domNode.setTop(i);const s=Math.round((e.width-t)/2);this._domNode.setLeft(s)}},"AccessibilityHelpWidget");zp.ID="editor.contrib.accessibilityHelpWidget";zp.WIDTH=500;zp.HEIGHT=300;zp=cX([Ky(1,Me),Ky(2,jt),Ky(3,Ms)],zp);class hX extends de{constructor(){super({id:"editor.action.showAccessibilityHelp",label:wn.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){const n=Uh.get(t);n?.show()}}u(hX,"ShowAccessibilityHelpAction");ct(Uh.ID,Uh,4);ee(hX);const hme=jn.bindToContribution(Uh.get);oe(new hme({id:"closeAccessibilityHelp",precondition:dX,handler:o=>o.hide(),kbOpts:{weight:100+100,kbExpr:D.focus,primary:9,secondary:[1033]}}));class N1 extends z{constructor(e){super(),this.editor=e,this.widget=null,Fa&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(87);!this.widget&&e?this.widget=new P0(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}u(N1,"IPadShowKeyboard");N1.ID="editor.contrib.iPadShowKeyboard";class P0 extends z{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register($(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register($(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return P0.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}u(P0,"ShowKeyboardWidget");P0.ID="editor.contrib.ShowKeyboardWidget";ct(N1.ID,N1,3);var gme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},MH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let Kp=u(class gX extends z{static get(e){return e.getContribution(gX.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(Yt.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new F0(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},"InspectTokensController");Kp.ID="editor.contrib.inspectTokens";Kp=gme([MH(1,oo),MH(2,Wt)],Kp);class fX extends de{constructor(){super({id:"editor.action.inspectTokens",label:WD.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=Kp.get(t);n?.launch()}}u(fX,"InspectTokens");function fme(o){let e="";for(let t=0,n=o.length;t<n;t++){const i=o.charCodeAt(t);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}u(fme,"renderTokenText");function pme(o,e){const t=Yt.get(e);if(t)return t;const n=o.encodeLanguageId(e);return{getInitialState:()=>zf,tokenize:(i,s,r)=>qI(e,r),tokenizeEncoded:(i,s,r)=>J1(n,r)}}u(pme,"getSafeTokenizationSupport");class F0 extends z{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=pme(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return F0._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const s=this._model.getLineContent(e.lineNumber);let r="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;r=s.substring(l,c)}nr(this._domNode,ie("h2.tm-token",void 0,fme(r),ie("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),q(this._domNode,ie("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;q(this._domNode,ie("table.tm-metadata-table",void 0,ie("tbody",void 0,ie("tr",void 0,ie("td.tm-metadata-key",void 0,"language"),ie("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ie("tr",void 0,ie("td.tm-metadata-key",void 0,"token type"),ie("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ie("tr",void 0,ie("td.tm-metadata-key",void 0,"font style"),ie("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ie("tr",void 0,ie("td.tm-metadata-key",void 0,"foreground"),ie("td.tm-metadata-value",void 0,`${a?U.Format.CSS.formatHex(a.foreground):"-?-"}`)),ie("tr",void 0,ie("td.tm-metadata-key",void 0,"background"),ie("td.tm-metadata-value",void 0,`${a?U.Format.CSS.formatHex(a.background):"-?-"}`))))),q(this._domNode,ie("hr.tokens-inspect-separator")),n<t.tokens1.length&&q(this._domNode,ie("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Yt.getColorMap(),n=ni.getLanguageId(e),i=ni.getTokenType(e),s=ni.getFontStyle(e),r=ni.getForeground(e),a=ni.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:s,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}u(F0,"InspectTokensWidget");F0._ID="editor.contrib.inspectTokensWidget";ct(Kp.ID,Kp,4);ee(fX);var mme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},AH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let R1=u(class $y{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Kt.as(og.Quickaccess)}provide(e){const t=new X;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const i=this.registry.getQuickAccessProvider(n.substr($y.PREFIX.length));i&&i.prefix&&i.prefix!==$y.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(n=>n.prefix!==$y.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,n)=>t.prefix.localeCompare(n.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const n=t.prefix||e.prefix,i=n||"…";return{prefix:n,label:i,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:p("helpPickAriaLabel","{0}, {1}",i,t.description),description:t.description}})}},"HelpQuickAccessProvider");R1.PREFIX="?";R1=mme([AH(0,Ja),AH(1,jt)],R1);Kt.as(og.Quickaccess).registerQuickAccessProvider({ctor:R1,prefix:"",helpEntries:[{description:BD.helpQuickAccessActionLabel}]});class gP{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new X;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=i.add(new Fn);return s.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new X,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const s={editor:i},r=hG(i);if(r){let a=si(i.saveViewState());n.add(r.onDidChangeCursorPosition(()=>{a=si(i.saveViewState())})),s.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(Ha(t.onCancellationRequested)(()=>{var l;return(l=s.restoreViewState)===null||l===void 0?void 0:l.call(s)}))}n.add(Oe(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(s,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return uG(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:on(c9),position:Qs.Full}}}],[r,a]=n.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}u(gP,"AbstractEditorNavigationQuickAccessProvider");class O0 extends gP{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=p("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,z.None}provideWithTextEditor(e,t,n){const i=e.editor,s=new X;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(i,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=u(()=>{const l=this.parsePosition(i,t.value.trim().substr(O0.PREFIX.length)),c=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)},"updatePickerAndEditor");r(),s.add(t.onDidChangeValue(()=>r()));const a=hG(i);return a&&a.getOptions().get(65).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(Oe(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?p("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):p("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?p("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,s):p("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const s={lineNumber:t,column:n};return i.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}u(O0,"AbstractGotoLineQuickAccessProvider");O0.PREFIX=":";var bme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_me=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let fv=u(class extends O0{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=pe.None}get activeTextEditorControl(){return si(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoLineQuickAccessProvider");fv=bme([_me(0,gt)],fv);let fP=u(class pX extends de{constructor(){super({id:pX.ID,label:Gw.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Ja).quickAccess.show(fv.PREFIX)}},"GotoLineAction");fP.ID="editor.action.gotoLine";ee(fP);Kt.as(og.Quickaccess).registerQuickAccessProvider({ctor:fv,prefix:fv.PREFIX,helpEntries:[{description:Gw.gotoLineActionLabel,commandId:fP.ID}]});const mX=[void 0,[]];function HL(o,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?vme(o,i.values,t,n):bX(o,e,t,n)}u(HL,"scoreFuzzy2");function vme(o,e,t,n){let i=0;const s=[];for(const r of e){const[a,l]=bX(o,r,t,n);if(typeof a!="number")return mX;i+=a,s.push(...l)}return[i,Cme(s)]}u(vme,"doScoreFuzzy2Multiple");function bX(o,e,t,n){const i=gp(e.original,e.originalLowercase,t,o,o.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],GS(i)]:mX}u(bX,"doScoreFuzzy2Single");function Cme(o){const e=o.sort((i,s)=>i.start-s.start),t=[];let n;for(const i of e)!n||!yme(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}u(Cme,"normalizeMatches");function yme(o,e){return!(o.end<e.start||e.end<o.start)}u(yme,"matchOverlaps");function IH(o){return o.startsWith('"')&&o.endsWith('"')}u(IH,"queryExpectsExactMatch");const _X=" ";function bI(o){typeof o!="string"&&(o="");const e=o.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=NH(o),s=t.indexOf(Fr)>=0,r=IH(o);let a;const l=o.split(_X);if(l.length>1)for(const c of l){const d=IH(c),{pathNormalized:h,normalized:g,normalizedLowercase:f}=NH(c);g&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:h,normalized:g,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:o,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:s,expectContiguousMatch:r}}u(bI,"prepareQuery");function NH(o){let e;li?e=o.replace(/\//g,Fr):e=o.replace(/\\/g,Fr);const t=zZ(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}u(NH,"normalizeQuery");function RH(o){return Array.isArray(o)?bI(o.map(e=>e.original).join(_X)):bI(o.original)}u(RH,"pieceToQuery");var wme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},qm=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let er=u(class _I extends gP{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,p("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),z.None}provideWithTextEditor(e,t,n){const i=e.editor,s=this.getModel(i);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):z.None}doProvideWithoutEditorSymbols(e,t,n,i){const s=new X;return this.provideLabelPick(n,p("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),qm(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||i.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,i))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return qm(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new eS,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(Oe(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){var s;const r=e.editor,a=new X;a.add(n.onDidAccept(h=>{const[g]=n.selectedItems;g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:n.keyMods,preserveFocus:h.inBackground}),h.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,i);let c;const d=u(h=>qm(this,void 0,void 0,function*(){c?.dispose(!0),n.busy=!1,c=new ci(i),n.busy=!0;try{const g=bI(n.value.substr(_I.PREFIX.length).trim()),f=yield this.doGetSymbolPicks(l,g,void 0,c.token);if(i.isCancellationRequested)return;if(f.length>0){if(n.items=f,h&&g.original.length===0){const m=YH(f,b=>!!(b.type!=="separator"&&b.range&&T.containsPosition(b.range.decoration,h)));m&&(n.activeItems=[m])}}else g.original.length>0?this.provideLabelPick(n,p("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,p("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}}),"updatePickerItems");return a.add(n.onDidChangeValue(()=>d(void 0))),d((s=r.getSelection())===null||s===void 0?void 0:s.getPosition()),a.add(n.onDidChangeActive(()=>{const[h]=n.activeItems;h&&h.range&&(r.revealRangeInCenter(h.range.selection,0),this.addDecorations(r,h.range.decoration))})),a}doGetSymbolPicks(e,t,n,i){var s,r;return qm(this,void 0,void 0,function*(){const a=yield e;if(i.isCancellationRequested)return[];const l=t.original.indexOf(_I.SCOPE_PREFIX)===0,c=l?1:0;let d,h;t.values&&t.values.length>1?(d=RH(t.values[0]),h=RH(t.values.slice(1))):d=t;let g;const f=(r=(s=this.options)===null||s===void 0?void 0:s.openSideBySideDirection)===null||r===void 0?void 0:r.call(s);f&&(g=[{iconClass:f==="right"?xe.asClassName(re.splitHorizontal):xe.asClassName(re.splitVertical),tooltip:f==="right"?p("openToSide","Open to the Side"):p("openToBottom","Open to the Bottom")}]);const m=[];for(let C=0;C<a.length;C++){const v=a[C],y=UZ(v.name),w=`$(${nE.toIcon(v.kind).id}) ${y}`,x=w.length-y.length;let M=v.containerName;n?.extraContainerLabel&&(M?M=`${n.extraContainerLabel} • ${M}`:M=n.extraContainerLabel);let L,E,k,O;if(t.original.length>c){let H=!1;if(d!==t&&([L,E]=HL(w,Object.assign(Object.assign({},t),{values:void 0}),c,x),typeof L=="number"&&(H=!0)),typeof L!="number"&&([L,E]=HL(w,d,c,x),typeof L!="number"))continue;if(!H&&h){if(M&&h.original.length>0&&([k,O]=HL(M,h)),typeof k!="number")continue;typeof L=="number"&&(L+=k)}}const P=v.tags&&v.tags.indexOf(1)>=0;m.push({index:C,kind:v.kind,score:L,label:w,ariaLabel:y,description:M,highlights:P?void 0:{label:E,description:O},range:{selection:T.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:P,buttons:g})}const b=m.sort((C,v)=>l?this.compareByKindAndScore(C,v):this.compareByScore(C,v));let _=[];if(l){let w=function(){v&&typeof C=="number"&&y>0&&(v.label=mo(WL[C]||VL,y))};u(w,"updateLastSeparatorLabel");let C,v,y=0;for(const x of b)C!==x.kind?(w(),C=x.kind,y=1,v={type:"separator"},_.push(v)):y++,_.push(x);w()}else b.length>0&&(_=[{label:p("symbols","symbols ({0})",m.length),type:"separator"},...b]);return _})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=WL[e.kind]||VL,i=WL[t.kind]||VL,s=n.localeCompare(i);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return qm(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}},"AbstractGotoSymbolQuickAccessProvider");er.PREFIX="@";er.SCOPE_PREFIX=":";er.PREFIX_BY_CATEGORY=`${er.PREFIX}${er.SCOPE_PREFIX}`;er=wme([PH(0,he),PH(1,NT)],er);const VL=p("property","properties ({0})"),WL={[5]:p("method","methods ({0})"),[11]:p("function","functions ({0})"),[8]:p("_constructor","constructors ({0})"),[12]:p("variable","variables ({0})"),[4]:p("class","classes ({0})"),[22]:p("struct","structs ({0})"),[23]:p("event","events ({0})"),[24]:p("operator","operators ({0})"),[10]:p("interface","interfaces ({0})"),[2]:p("namespace","namespaces ({0})"),[3]:p("package","packages ({0})"),[25]:p("typeParameter","type parameters ({0})"),[1]:p("modules","modules ({0})"),[6]:p("property","properties ({0})"),[9]:p("enum","enumerations ({0})"),[21]:p("enumMember","enumeration members ({0})"),[14]:p("string","strings ({0})"),[0]:p("file","files ({0})"),[17]:p("array","arrays ({0})"),[15]:p("number","numbers ({0})"),[16]:p("boolean","booleans ({0})"),[18]:p("object","objects ({0})"),[19]:p("key","keys ({0})"),[7]:p("field","fields ({0})"),[13]:p("constant","constants ({0})")};var Sme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BL=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let vI=u(class extends er{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=pe.None}get activeTextEditorControl(){return si(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoSymbolQuickAccessProvider");vI=Sme([BL(0,gt),BL(1,he),BL(2,NT)],vI);class vm extends de{constructor(){super({id:vm.ID,label:W_.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:D.hasDocumentSymbolProvider,kbOpts:{kbExpr:D.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Ja).quickAccess.show(er.PREFIX,{itemActivation:br.NONE})}}u(vm,"GotoSymbolAction");vm.ID="editor.action.quickOutline";ee(vm);Kt.as(og.Quickaccess).registerQuickAccessProvider({ctor:vI,prefix:er.PREFIX,helpEntries:[{description:W_.quickOutlineActionLabel,prefix:er.PREFIX,commandId:vm.ID},{description:W_.quickOutlineByCategoryActionLabel,prefix:er.PREFIX_BY_CATEGORY}]});function UL(o,e){return e&&(o.stack||o.stacktrace)?p("stackTrace.format","{0}: {1}",OH(o),FH(o.stack)||FH(o.stacktrace)):OH(o)}u(UL,"exceptionToErrorMessage");function FH(o){return Array.isArray(o)?o.join(`
`):o}u(FH,"stackToString");function OH(o){return typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?p("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u(OH,"detectSystemErrorMessage");function vX(o=null,e=!1){if(!o)return p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){const t=jp(o),n=vX(t[0],e);return t.length>1?p("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Ki(o))return o;if(o.detail){const t=o.detail;if(t.error)return UL(t.error,e);if(t.exception)return UL(t.exception,e)}return o.stack?UL(o,e):o.message?o.message:p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u(vX,"toErrorMessage");var qC=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})},df;(function(o){o[o.NO_ACTION=0]="NO_ACTION",o[o.CLOSE_PICKER=1]="CLOSE_PICKER",o[o.REFRESH_PICKER=2]="REFRESH_PICKER",o[o.REMOVE_ITEM=3]="REMOVE_ITEM"})(df||(df={}));function GL(o){const e=o;return Array.isArray(e.items)}u(GL,"isPicksWithActive");function Tme(o){const e=o;return!!e.picks&&e.additionalPicks instanceof Promise}u(Tme,"isFastAndSlowPicks");class H0 extends z{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,n){var i;const s=new X;e.canAcceptInBackground=!!(!((i=this.options)===null||i===void 0)&&i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r;const a=s.add(new Fn),l=u(()=>qC(this,void 0,void 0,function*(){const c=a.value=new X;r?.dispose(!0),e.busy=!1,r=new ci(t);const d=r.token,h=e.value.substr(this.prefix.length).trim(),g=this._getPicks(h,c,d,n),f=u((m,b)=>{var _;let C,v;if(GL(m)?(C=m.items,v=m.active):C=m,C.length===0){if(b)return!1;(h.length>0||e.hideInput)&&(!((_=this.options)===null||_===void 0)&&_.noResultsPick)&&(C=[this.options.noResultsPick])}return e.items=C,v&&(e.activeItems=[v]),!0},"applyPicks");if(g!==null)if(Tme(g)){let m=!1,b=!1;yield Promise.all([(()=>qC(this,void 0,void 0,function*(){yield ad(H0.FAST_PICKS_RACE_DELAY),!d.isCancellationRequested&&(b||(m=f(g.picks,!0)))}))(),(()=>qC(this,void 0,void 0,function*(){e.busy=!0;try{const _=yield g.additionalPicks;if(d.isCancellationRequested)return;let C,v;GL(g.picks)?(C=g.picks.items,v=g.picks.active):C=g.picks;let y,w;if(GL(_)?(y=_.items,w=_.active):y=_,y.length>0||!m){let x;if(!v&&!w){const M=e.activeItems[0];M&&C.indexOf(M)!==-1&&(x=M)}f({items:[...C,...y],active:v||w||x})}}finally{d.isCancellationRequested||(e.busy=!1),b=!0}}))()])}else if(!(g instanceof Promise))f(g);else{e.busy=!0;try{const m=yield g;if(d.isCancellationRequested)return;f(m)}finally{d.isCancellationRequested||(e.busy=!1)}}}),"updatePickerItems");return s.add(e.onDidChangeValue(()=>l())),l(),s.add(e.onDidAccept(c=>{const[d]=e.selectedItems;typeof d?.accept=="function"&&(c.inBackground||e.hide(),d.accept(e.keyMods,c))})),s.add(e.onDidTriggerItemButton(({button:c,item:d})=>qC(this,void 0,void 0,function*(){var h,g;if(typeof d.trigger=="function"){const f=(g=(h=d.buttons)===null||h===void 0?void 0:h.indexOf(c))!==null&&g!==void 0?g:-1;if(f>=0){const m=d.trigger(f,e.keyMods),b=typeof m=="number"?m:yield m;if(t.isCancellationRequested)return;switch(b){case df.NO_ACTION:break;case df.CLOSE_PICKER:e.hide();break;case df.REFRESH_PICKER:l();break;case df.REMOVE_ITEM:{const _=e.items.indexOf(d);if(_!==-1){const C=e.items.slice(),v=C.splice(_,1),y=e.activeItems.filter(x=>x!==v[0]),w=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=C,y&&(e.activeItems=y),e.keepScrollPosition=w}break}}}}}))),s}}u(H0,"PickerQuickAccessProvider");H0.FAST_PICKS_RACE_DELAY=200;var CX=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},vu=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},HH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let pv=u(class qy extends H0{constructor(e,t,n,i,s,r){super(qy.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=s,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(Gh)),this.options=e}_getPicks(e,t,n,i){var s,r;return HH(this,void 0,void 0,function*(){const a=yield this.getCommandPicks(n);if(n.isCancellationRequested)return[];const l=[];for(const f of a){const m=si(qy.WORD_FILTER(e,f.label)),b=f.commandAlias?si(qy.WORD_FILTER(e,f.commandAlias)):void 0;m||b?(f.highlights={label:m,detail:this.options.showAlias?b:void 0},l.push(f)):e===f.commandId&&l.push(f)}const c=new Map;for(const f of l){const m=c.get(f.label);m?(f.description=f.commandId,m.description=m.commandId):c.set(f.label,f)}l.sort((f,m)=>{const b=this.commandsHistory.peek(f.commandId),_=this.commandsHistory.peek(m.commandId);if(b&&_)return b>_?-1:1;if(b)return-1;if(_)return 1;if(this.options.suggestedCommandIds){const C=this.options.suggestedCommandIds.has(f.commandId),v=this.options.suggestedCommandIds.has(m.commandId);if(C&&v)return 0;if(C)return-1;if(v)return 1}return f.label.localeCompare(m.label)});const d=[];let h=!1,g=!!this.options.suggestedCommandIds;for(let f=0;f<l.length;f++){const m=l[f],b=this.keybindingService.lookupKeybinding(m.commandId),_=b?p("commandPickAriaLabelWithKeybinding","{0}, {1}",m.label,b.getAriaLabel()):m.label;f===0&&this.commandsHistory.peek(m.commandId)&&(d.push({type:"separator",label:p("recentlyUsed","recently used")}),h=!0),g&&!this.commandsHistory.peek(m.commandId)&&(!((s=this.options.suggestedCommandIds)===null||s===void 0)&&s.has(m.commandId))&&(d.push({type:"separator",label:p("commonlyUsed","commonly used")}),h=!0,g=!1),h&&!this.commandsHistory.peek(m.commandId)&&!(!((r=this.options.suggestedCommandIds)===null||r===void 0)&&r.has(m.commandId))&&(d.push({type:"separator",label:p("morecCommands","other commands")}),h=!1),d.push(Object.assign(Object.assign({},m),{ariaLabel:_,detail:this.options.showAlias&&m.commandAlias!==m.label?m.commandAlias:void 0,keybinding:b,accept:()=>HH(this,void 0,void 0,function*(){var C;this.commandsHistory.push(m.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:m.commandId,from:(C=i?.from)!==null&&C!==void 0?C:"quick open"});try{yield this.commandService.executeCommand(m.commandId)}catch(v){Yr(v)||this.dialogService.error(p("canNotRun","Command '{0}' resulted in an error",m.label),vX(v))}})}))}return d})}},"AbstractCommandsQuickAccessProvider");pv.PREFIX=">";pv.WORD_FILTER=JN(BS,Jse,tB);pv=CX([vu(1,Re),vu(2,jt),vu(3,dn),vu(4,Ao),vu(5,Yv)],pv);let Gh=u(class Hn extends z{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e)))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Hn.getConfiguredCommandHistoryLength(this.configurationService),Hn.cache&&Hn.cache.limit!==this.configuredCommandsHistoryLength&&(Hn.cache.limit=this.configuredCommandsHistoryLength,Hn.saveState(this.storageService)))}load(){const e=this.storageService.get(Hn.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Hn.cache=new ic(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((s,r)=>s.value-r.value),i.forEach(s=>n.set(s.key,s.value))}Hn.counter=this.storageService.getNumber(Hn.PREF_KEY_COUNTER,0,Hn.counter)}push(e){Hn.cache&&(Hn.cache.set(e,Hn.counter++),Hn.saveState(this.storageService))}peek(e){var t;return(t=Hn.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Hn.cache)return;const t={usesLRU:!0,entries:[]};Hn.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(Hn.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Hn.PREF_KEY_COUNTER,Hn.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:Hn.DEFAULT_COMMANDS_HISTORY_LENGTH}},"CommandsHistory");Gh.DEFAULT_COMMANDS_HISTORY_LENGTH=50;Gh.PREF_KEY_CACHE="commandPalette.mru.cache";Gh.PREF_KEY_COUNTER="commandPalette.mru.counter";Gh.counter=1;Gh=CX([vu(0,ar),vu(1,lt)],Gh);class yX extends pv{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:s2(n.label)||n.id});return t}}u(yX,"AbstractEditorCommandsQuickAccessProvider");var xme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ng=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Lme=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(d){try{c(n.next(d))}catch(h){r(h)}}u(a,"fulfilled");function l(d){try{c(n.throw(d))}catch(h){r(h)}}u(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(a,l)}u(c,"step"),c((n=n.apply(o,e||[])).next())})};let mv=u(class extends yX{get activeTextEditorControl(){return si(this.codeEditorService.getFocusedCodeEditor())}constructor(e,t,n,i,s,r){super({showAlias:!1},e,n,i,s,r),this.codeEditorService=t}getCommandPicks(){return Lme(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}},"StandaloneCommandsQuickAccessProvider");mv=xme([Ng(0,Re),Ng(1,gt),Ng(2,jt),Ng(3,dn),Ng(4,Ao),Ng(5,Yv)],mv);class Cm extends de{constructor(){super({id:Cm.ID,label:zw.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:D.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Ja).quickAccess.show(mv.PREFIX)}}u(Cm,"GotoLineAction");Cm.ID="editor.action.quickCommand";ee(Cm);Kt.as(og.Quickaccess).registerQuickAccessProvider({ctor:mv,prefix:mv.PREFIX,helpEntries:[{description:zw.quickCommandHelp,commandId:Cm.ID}]});var Eme=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Rg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let CI=u(class extends _d{constructor(e,t,n,i,s,r,a){super(!0,e,t,n,i,s,r,a)}},"StandaloneReferencesController");CI=Eme([Rg(1,Me),Rg(2,gt),Rg(3,Cn),Rg(4,Re),Rg(5,ar),Rg(6,lt)],CI);ct(_d.ID,CI,4);class wX extends de{constructor(){super({id:"editor.action.toggleHighContrast",label:UD.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(oo),i=n.getColorTheme();Aa(i.type)?(n.setTheme(this._originalThemeName||(w_(i.type)?If:yl)),this._originalThemeName=null):(n.setTheme(w_(i.type)?qu:Yu),this._originalThemeName=i.themeName)}}u(wX,"ToggleHighContrast");ee(wX);function kme(){return new Worker("/assets/editor.worker-a5f61982.js")}u(kme,"WorkerWrapper$1");function Dme(){return new Worker("/assets/ts.worker-f6a43ab1.js")}u(Dme,"WorkerWrapper");function Mme(){const o=globalThis;if(o.MonacoEnvironment)return;o.MonacoEnvironment={getWorker(t,n){return n==="typescript"||n==="javascript"?new Dme:new kme}},Wg.typescript.typescriptDefaults.setCompilerOptions({strict:!0,target:Wg.typescript.ScriptTarget.ESNext,module:Wg.typescript.ModuleKind.ESNext,moduleResolution:Wg.typescript.ModuleResolutionKind.NodeJs,forceConsistentCasingInFileNames:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,jsx:Wg.typescript.JsxEmit.Preserve,jsxImportSource:"solid-js",allowNonTsExtensions:!0});for(const t in{"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.7.3",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/solid.js"
        },
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/solid.js"
      },
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./store/types/index.d.ts",
            "default": "./store/dist/dev.js"
          },
          "require": "./store/dist/dev.cjs"
        },
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/store.js"
        },
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/dev.js"
        },
        "require": "./store/dist/dev.cjs"
      },
      "import": {
        "types": "./store/types/index.d.ts",
        "default": "./store/dist/store.js"
      },
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./web/types/index.d.ts",
            "default": "./web/dist/dev.js"
          },
          "require": "./web/dist/dev.cjs"
        },
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/web.js"
        },
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/dev.js"
        },
        "require": "./web/dist/dev.cjs"
      },
      "import": {
        "types": "./web/types/index.d.ts",
        "default": "./web/dist/web.js"
      },
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": {
          "types": "./universal/types/index.d.ts",
          "default": "./universal/dist/dev.js"
        },
        "require": "./universal/dist/dev.cjs"
      },
      "import": {
        "types": "./universal/types/index.d.ts",
        "default": "./universal/dist/universal.js"
      },
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": {
        "types": "./h/types/index.d.ts",
        "default": "./h/dist/h.js"
      },
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": {
        "types": "./html/types/index.d.ts",
        "default": "./html/dist/html.js"
      },
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*",
    "./package.json": "./package.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0",
    "seroval": "^0.5.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "vitest run",
    "coverage": "vitest run --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/store.js"
        },
        "require": "./dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/store.js"
      },
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, catchError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, EffectFunction, EffectOptions, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, OnOptions, Owner, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { registerGraph, writeSignal } from "./reactive/signal.js";
export declare const DEV: {
    readonly hooks: {
        afterUpdate: (() => void) | null;
        afterCreateOwner: ((owner: import("./reactive/signal.js").Owner) => void) | null;
    };
    readonly writeSignal: typeof writeSignal;
    readonly registerGraph: typeof registerGraph;
} | undefined;
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element = Node | ArrayElement | (string & {}) | number | boolean | null | undefined;
  interface ArrayElement extends Array<Element> {}
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;

  interface InputEventHandler<T, E extends InputEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundInputEventHandler<T, E extends InputEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type InputEventHandlerUnion<T, E extends InputEvent> =
    | InputEventHandler<T, E>
    | BoundInputEventHandler<T, E>;

  interface ChangeEventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundChangeEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type ChangeEventHandlerUnion<T, E extends Event> =
    | ChangeEventHandler<T, E>
    | BoundChangeEventHandler<T, E>;

  interface FocusEventHandler<T, E extends FocusEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundFocusEventHandler<T, E extends FocusEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type FocusEventHandlerUnion<T, E extends FocusEvent> =
    | FocusEventHandler<T, E>
    | BoundFocusEventHandler<T, E>;

  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: FocusEventHandlerUnion<T, FocusEvent>;
    onFocusIn?: FocusEventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: FocusEventHandlerUnion<T, FocusEvent>;
    onfocusin?: FocusEventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: InputEventHandlerUnion<T, InputEvent>;
    onBlur?: FocusEventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: ChangeEventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: FocusEventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: InputEventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: InputEventHandlerUnion<T, InputEvent>;
    onblur?: FocusEventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: ChangeEventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: FocusEventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: InputEventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    loading?: "eager" | "lazy";
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autocorrect?: "on" | "off";
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    incremental?: boolean;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    results?: number;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: "col" | "row" | "rowgroup" | "colgroup";
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    pathLength?: string | number;
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
    href?: string;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/universal.js"
      },
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/web.js"
        },
        "require": "./dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/web.js"
      },
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
type ExpandableNode = Node & {
    [key: string]: any;
};
export type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"html/types/lit.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    getPropAlias(prop: string, tagName: string): string | undefined;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents, functionBuilder }?: {
    delegateEvents?: boolean;
    functionBuilder?: (...args: string[]) => Function;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { $RAW, createStore, unwrap } from "./store.js";
export type { ArrayFilterFn, DeepMutable, DeepReadonly, NotWrappable, Part, SetStoreFunction, SolidStore, Store, StoreNode, StorePathRange, StoreSetter } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
    readonly hooks: {
        onStoreNodeUpdate: import("./store.js").OnStoreNodeUpdate | null;
    };
} | undefined;
`,"store/types/modifiers.d.ts":`export type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U extends object>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol;
export declare const DevHooks: {
    onStoreNodeUpdate: OnStoreNodeUpdate | null;
};
type DataNode = {
    (): any;
    $(value?: any): void;
};
type DataNodes = Record<PropertyKey, DataNode | undefined>;
export type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): DataNodes;
export declare function getDataNode(nodes: DataNodes, property: PropertyKey, value: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): TypedPropertyDescriptor<any> | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
type W<T> = Exclude<T, NotWrappable>;
type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [never] ? never : [
    T
] extends [readonly unknown[]] ? number : keyof T : keyof T;
type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = [T] extends [never] ? never : K extends MutableKeyOf<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<T> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<W<T>, U>;
type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends MutableKeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
interface Observable<T> {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): Observable<T>;
}
export type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): Observable<T>;
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
export {};
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
/** Object storing callbacks for debugging during development */
export declare const DevHooks: {
    afterUpdate: (() => void) | null;
    afterCreateOwner: ((owner: Owner) => void) | null;
};
export type ComputationState = 0 | 1 | 2;
export interface SourceMapValue {
    value: unknown;
    name?: string;
    graph?: Owner;
}
export interface SignalState<T> extends SourceMapValue {
    value: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: SourceMapValue[];
    name?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: typeof Owner): T;
export type Accessor<T> = () => T;
export type Setter<T> = (undefined extends T ? () => undefined : {}) & (<U extends T>(value: (prev: T) => U) => U) & (<U extends T>(value: Exclude<U, Function>) => U) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions & {
    render?: boolean;
}): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    value: Next;
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions & {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @returns the same {@link fn} function that was passed in
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup<T extends () => any>(fn: T): T;
/**
 * catchError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn boundary for the error
 * @param handler an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#catcherror
 */
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: Error) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<unknown> {
    props: T;
    name: string;
    component: (props: T) => unknown;
}
export declare function devComponent<P, V>(Comp: (props: P) => V, props: P): V;
export declare function registerGraph(value: SourceMapValue): void;
export type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement>;
export type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#suspenselist-experimental
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#suspense
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export type PropsWithChildren<P = {}> = ParentProps<P>;
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
type DistributeOverride<T, F> = T extends undefined ? F : T;
type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#for
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): JSX.Element;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#index
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): JSX.Element;
type RequiredParameter<T> = T extends () => unknown ? never : T;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Show<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
export type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Match<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Match<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#errorboundary
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): JSX.Element;
export {};
`,"types/render/hydration.d.ts":`export type HydrationContext = {
    id: string;
    count: number;
};
type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: undefined;
export type Accessor<T> = () => T;
export type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare function castError(err: unknown): Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
    owned: Owner[] | null;
    cleanups: (() => void)[] | null;
}
export declare function createOwner(): Owner;
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: typeof Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: Owner): void;
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
*/
export declare function onError(fn: (err: Error) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Accessor, Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export type Component<P = {}> = (props: P) => JSX.Element;
export type VoidProps<P = {}> = P & {
    children?: never;
};
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export type Ref<T> = T | ((val: T) => void);
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    lazy: Record<string, Promise<any>>;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
  use<A, T>(fn: (element: NodeType, arg: A) => T, element: NodeType, arg: A): T;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;
export function getPropAlias(prop: string, tagName: string): string | undefined;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, isCE?: boolean, isSVG?: boolean): () => Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer: boolean;
export declare const isDev: boolean;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#portal
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
export type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#dynamic
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): JSX.Element;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => void;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
declare function jsx(type: any, props: any): () => (Node & {
    [key: string]: any;
}) | (Node & {
    [key: string]: any;
})[];
export { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = ({ (): T }) | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
    | "alert"
    | "alertdialog"
    | "application"
    | "article"
    | "banner"
    | "button"
    | "cell"
    | "checkbox"
    | "columnheader"
    | "combobox"
    | "complementary"
    | "contentinfo"
    | "definition"
    | "dialog"
    | "directory"
    | "document"
    | "feed"
    | "figure"
    | "form"
    | "grid"
    | "gridcell"
    | "group"
    | "heading"
    | "img"
    | "link"
    | "list"
    | "listbox"
    | "listitem"
    | "log"
    | "main"
    | "marquee"
    | "math"
    | "menu"
    | "menubar"
    | "menuitem"
    | "menuitemcheckbox"
    | "menuitemradio"
    | "meter"
    | "navigation"
    | "none"
    | "note"
    | "option"
    | "presentation"
    | "progressbar"
    | "radio"
    | "radiogroup"
    | "region"
    | "row"
    | "rowgroup"
    | "rowheader"
    | "scrollbar"
    | "search"
    | "searchbox"
    | "separator"
    | "slider"
    | "spinbutton"
    | "status"
    | "switch"
    | "tab"
    | "table"
    | "tablist"
    | "tabpanel"
    | "term"
    | "textbox"
    | "timer"
    | "toolbar"
    | "tooltip"
    | "tree"
    | "treegrid"
    | "treeitem">;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    acceptCharset?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    httpequiv?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    httpEquiv?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<'col' | 'row' | 'rowgroup' | 'colgroup'>;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    pathLength?: FunctionMaybe<string | number>;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit">;
    "shape-rendering"?: FunctionMaybe<"auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit">;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<"arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit">;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<"none" | "underline" | "overline" | "line-through" | "blink" | "inherit">;
    "text-rendering"?: FunctionMaybe<
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit">;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
    href?: FunctionMaybe<string>
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`})Rf.createModel({"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.7.3",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/solid.js"
        },
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/solid.js"
      },
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./store/types/index.d.ts",
            "default": "./store/dist/dev.js"
          },
          "require": "./store/dist/dev.cjs"
        },
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/store.js"
        },
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/server.js"
        },
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./store/types/index.d.ts",
          "default": "./store/dist/dev.js"
        },
        "require": "./store/dist/dev.cjs"
      },
      "import": {
        "types": "./store/types/index.d.ts",
        "default": "./store/dist/store.js"
      },
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./web/types/index.d.ts",
            "default": "./web/dist/dev.js"
          },
          "require": "./web/dist/dev.cjs"
        },
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/web.js"
        },
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/server.js"
        },
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./web/types/index.d.ts",
          "default": "./web/dist/dev.js"
        },
        "require": "./web/dist/dev.cjs"
      },
      "import": {
        "types": "./web/types/index.d.ts",
        "default": "./web/dist/web.js"
      },
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": {
          "types": "./universal/types/index.d.ts",
          "default": "./universal/dist/dev.js"
        },
        "require": "./universal/dist/dev.cjs"
      },
      "import": {
        "types": "./universal/types/index.d.ts",
        "default": "./universal/dist/universal.js"
      },
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": {
        "types": "./h/types/index.d.ts",
        "default": "./h/dist/h.js"
      },
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "import": {
        "types": "./h/jsx-runtime/types/index.d.ts",
        "default": "./h/jsx-runtime/dist/jsx.js"
      },
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": {
        "types": "./html/types/index.d.ts",
        "default": "./html/dist/html.js"
      },
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*",
    "./package.json": "./package.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0",
    "seroval": "^0.5.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "vitest run",
    "coverage": "vitest run --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/store.js"
        },
        "require": "./dist/store.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/store.js"
      },
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, catchError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, EffectFunction, EffectOptions, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, OnOptions, Owner, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { registerGraph, writeSignal } from "./reactive/signal.js";
export declare const DEV: {
    readonly hooks: {
        afterUpdate: (() => void) | null;
        afterCreateOwner: ((owner: import("./reactive/signal.js").Owner) => void) | null;
    };
    readonly writeSignal: typeof writeSignal;
    readonly registerGraph: typeof registerGraph;
} | undefined;
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element = Node | ArrayElement | (string & {}) | number | boolean | null | undefined;
  interface ArrayElement extends Array<Element> {}
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;

  interface InputEventHandler<T, E extends InputEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundInputEventHandler<T, E extends InputEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type InputEventHandlerUnion<T, E extends InputEvent> =
    | InputEventHandler<T, E>
    | BoundInputEventHandler<T, E>;

  interface ChangeEventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundChangeEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type ChangeEventHandlerUnion<T, E extends Event> =
    | ChangeEventHandler<T, E>
    | BoundChangeEventHandler<T, E>;

  interface FocusEventHandler<T, E extends FocusEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundFocusEventHandler<T, E extends FocusEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type FocusEventHandlerUnion<T, E extends FocusEvent> =
    | FocusEventHandler<T, E>
    | BoundFocusEventHandler<T, E>;

  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: FocusEventHandlerUnion<T, FocusEvent>;
    onFocusIn?: FocusEventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: FocusEventHandlerUnion<T, FocusEvent>;
    onfocusin?: FocusEventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: InputEventHandlerUnion<T, InputEvent>;
    onBlur?: FocusEventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: ChangeEventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: FocusEventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: InputEventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: InputEventHandlerUnion<T, InputEvent>;
    onblur?: FocusEventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: ChangeEventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: FocusEventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: InputEventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    loading?: "eager" | "lazy";
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autocorrect?: "on" | "off";
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    incremental?: boolean;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    results?: number;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: "col" | "row" | "rowgroup" | "colgroup";
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    pathLength?: string | number;
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
    href?: string;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/universal.js"
      },
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "import": {
            "types": "./types/index.d.ts",
            "default": "./dist/dev.js"
          },
          "require": "./dist/dev.cjs"
        },
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/web.js"
        },
        "require": "./dist/web.cjs"
      },
      "deno": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "node": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/server.js"
        },
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": {
          "types": "./types/index.d.ts",
          "default": "./dist/dev.js"
        },
        "require": "./dist/dev.cjs"
      },
      "import": {
        "types": "./types/index.d.ts",
        "default": "./dist/web.js"
      },
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
type ExpandableNode = Node & {
    [key: string]: any;
};
export type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"html/types/lit.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    getPropAlias(prop: string, tagName: string): string | undefined;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents, functionBuilder }?: {
    delegateEvents?: boolean;
    functionBuilder?: (...args: string[]) => Function;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { $RAW, createStore, unwrap } from "./store.js";
export type { ArrayFilterFn, DeepMutable, DeepReadonly, NotWrappable, Part, SetStoreFunction, SolidStore, Store, StoreNode, StorePathRange, StoreSetter } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
    readonly hooks: {
        onStoreNodeUpdate: import("./store.js").OnStoreNodeUpdate | null;
    };
} | undefined;
`,"store/types/modifiers.d.ts":`export type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U extends object>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol;
export declare const DevHooks: {
    onStoreNodeUpdate: OnStoreNodeUpdate | null;
};
type DataNode = {
    (): any;
    $(value?: any): void;
};
type DataNodes = Record<PropertyKey, DataNode | undefined>;
export type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): DataNodes;
export declare function getDataNode(nodes: DataNodes, property: PropertyKey, value: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): TypedPropertyDescriptor<any> | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
type W<T> = Exclude<T, NotWrappable>;
type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [never] ? never : [
    T
] extends [readonly unknown[]] ? number : keyof T : keyof T;
type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = [T] extends [never] ? never : K extends MutableKeyOf<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<T> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<W<T>, U>;
type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends MutableKeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
interface Observable<T> {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): Observable<T>;
}
export type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): Observable<T>;
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
export {};
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
/** Object storing callbacks for debugging during development */
export declare const DevHooks: {
    afterUpdate: (() => void) | null;
    afterCreateOwner: ((owner: Owner) => void) | null;
};
export type ComputationState = 0 | 1 | 2;
export interface SourceMapValue {
    value: unknown;
    name?: string;
    graph?: Owner;
}
export interface SignalState<T> extends SourceMapValue {
    value: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: SourceMapValue[];
    name?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: typeof Owner): T;
export type Accessor<T> = () => T;
export type Setter<T> = (undefined extends T ? () => undefined : {}) & (<U extends T>(value: (prev: T) => U) => U) & (<U extends T>(value: Exclude<U, Function>) => U) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions & {
    render?: boolean;
}): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    value: Next;
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions & {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @returns the same {@link fn} function that was passed in
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup<T extends () => any>(fn: T): T;
/**
 * catchError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn boundary for the error
 * @param handler an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#catcherror
 */
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: Error) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<unknown> {
    props: T;
    name: string;
    component: (props: T) => unknown;
}
export declare function devComponent<P, V>(Comp: (props: P) => V, props: P): V;
export declare function registerGraph(value: SourceMapValue): void;
export type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement>;
export type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#suspenselist-experimental
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#suspense
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export type PropsWithChildren<P = {}> = ParentProps<P>;
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
type DistributeOverride<T, F> = T extends undefined ? F : T;
type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#for
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): JSX.Element;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#index
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): JSX.Element;
type RequiredParameter<T> = T extends () => unknown ? never : T;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Show<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
export type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Match<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Match<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#errorboundary
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): JSX.Element;
export {};
`,"types/render/hydration.d.ts":`export type HydrationContext = {
    id: string;
    count: number;
};
type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: undefined;
export type Accessor<T> = () => T;
export type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare function castError(err: unknown): Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
    owned: Owner[] | null;
    cleanups: (() => void)[] | null;
}
export declare function createOwner(): Owner;
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: typeof Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: Owner): void;
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
*/
export declare function onError(fn: (err: Error) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Accessor, Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export type Component<P = {}> = (props: P) => JSX.Element;
export type VoidProps<P = {}> = P & {
    children?: never;
};
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export type Ref<T> = T | ((val: T) => void);
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    lazy: Record<string, Promise<any>>;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
  use<A, T>(fn: (element: NodeType, arg: A) => T, element: NodeType, arg: A): T;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;
export function getPropAlias(prop: string, tagName: string): string | undefined;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, isCE?: boolean, isSVG?: boolean): () => Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer: boolean;
export declare const isDev: boolean;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#portal
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
export type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#dynamic
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): JSX.Element;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => void;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
declare function jsx(type: any, props: any): () => (Node & {
    [key: string]: any;
}) | (Node & {
    [key: string]: any;
})[];
export { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from 'csstype';

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = ({ (): T }) | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K ? never : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, DirectiveFunctionAttributes<T>,
                                     PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T>,
                                     CustomEventHandlersCamelCase<T>, CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
    | "alert"
    | "alertdialog"
    | "application"
    | "article"
    | "banner"
    | "button"
    | "cell"
    | "checkbox"
    | "columnheader"
    | "combobox"
    | "complementary"
    | "contentinfo"
    | "definition"
    | "dialog"
    | "directory"
    | "document"
    | "feed"
    | "figure"
    | "form"
    | "grid"
    | "gridcell"
    | "group"
    | "heading"
    | "img"
    | "link"
    | "list"
    | "listbox"
    | "listitem"
    | "log"
    | "main"
    | "marquee"
    | "math"
    | "menu"
    | "menubar"
    | "menuitem"
    | "menuitemcheckbox"
    | "menuitemradio"
    | "meter"
    | "navigation"
    | "none"
    | "note"
    | "option"
    | "presentation"
    | "progressbar"
    | "radio"
    | "radiogroup"
    | "region"
    | "row"
    | "rowgroup"
    | "rowheader"
    | "scrollbar"
    | "search"
    | "searchbox"
    | "separator"
    | "slider"
    | "spinbutton"
    | "status"
    | "switch"
    | "tab"
    | "table"
    | "tablist"
    | "tabpanel"
    | "term"
    | "textbox"
    | "timer"
    | "toolbar"
    | "tooltip"
    | "tree"
    | "treegrid"
    | "treeitem">;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<"none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search">;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    acceptCharset?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    httpequiv?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    httpEquiv?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<'col' | 'row' | 'rowgroup' | 'colgroup'>;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    pathLength?: FunctionMaybe<string | number>;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit">;
    "shape-rendering"?: FunctionMaybe<"auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit">;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<"arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit">;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<"none" | "underline" | "overline" | "line-through" | "blink" | "inherit">;
    "text-rendering"?: FunctionMaybe<
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit">;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
    href?: FunctionMaybe<string>
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`}[t],"typescript",l1.parse(`file://root/node_modules/solid-js/${t}`));const e=u((t,n)=>Rf.createModel(`declare module '${t}';`,"typescript",l1.parse(`file://root/${n}`)),"createEmptyModuleModel");e("@suid/*","suid-globals.d.ts"),e("@mui/*","mui-globals.d.ts"),e("react","react-globals.d.ts")}u(Mme,"setupEditor");function Ame(o){Mme();const e=o.value!==void 0;let t=!1;const[n,i]=AX({controlled:()=>o.value,default:()=>String(o.defaultValue),name:"CodeEditor"}),s=MX(),r=xX();let a;return LX(()=>{a?.dispose()}),EX(()=>{const l=l1.parse(`file://root/${o.fileName}`);Rf.getModel(l)?.dispose();const c=Rf.createModel(o.value??"",o.language??"typescript",l);a=Rf.create(s.ref,{model:c,theme:r.darkMode?"vs-dark":"vs-light",minimap:{enabled:!1},automaticLayout:!0}),a.onDidChangeModelContent(()=>{const d=c.getLinesContent().join(`
`);i(d),t||o.onChange?.(d)}),o.onReady?.()}),mP(()=>{a?.updateOptions({theme:r.darkMode?"vs-dark":"vs-light"})}),mP(l=>{if(e||l){const c=n();typeof c=="string"&&(t=l,a?.getModel()?.setValue(c),t=!1)}return!1},!0),kX(DX,{get sx(){return{width:"100%",height:"400px",...o.sx||{}}},ref:s})}u(Ame,"CodeEditor");const xve=Object.freeze(Object.defineProperty({__proto__:null,default:Ame},Symbol.toStringTag,{value:"Module"}));export{xve as C,r0 as m,NG as t};
