var Lke=Object.defineProperty;var u=(o,e)=>Lke(o,"name",{value:e,configurable:!0});import{_ as Le,b4 as Eke,o as kke,w as Dke,d as xve,h as Mke,B as Ake,ac as Ike}from"./index-dcf73f67.js";import{u as Nke}from"./useControlled-3adf31ee.js";function Eo(o,e=0){return o[o.length-(1+e)]}u(Eo,"tail");function Rke(o){if(o.length===0)throw new Error("Invalid tail call");return[o.slice(0,o.length-1),o[o.length-1]]}u(Rke,"tail2");function jn(o,e,t=(n,i)=>n===i){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let n=0,i=o.length;n<i;n++)if(!t(o[n],e[n]))return!1;return!0}u(jn,"equals$2");function Pke(o,e){const t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}u(Pke,"removeFastWithoutKeepingOrder");function Iy(o,e,t){return Fke(o.length,n=>t(o[n],e))}u(Iy,"binarySearch");function Fke(o,e){let t=0,n=o-1;for(;t<=n;){const i=(t+n)/2|0,s=e(i);if(s<0)t=i+1;else if(s>0)n=i-1;else return i}return-(t+1)}u(Fke,"binarySearch2");function w1e(o,e){let t=0,n=o.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(o[i])?n=i:t=i+1}return t}u(w1e,"findFirstInSorted");function cV(o,e,t){if(o=o|0,o>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],i=[],s=[],r=[];for(const a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):r.push(a)}return o<i.length?cV(o,i,t):o<i.length+r.length?r[0]:cV(o-(i.length+r.length),s,t)}u(cV,"quickSelect");function Tve(o,e){const t=[];let n;for(const i of o.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}u(Tve,"groupBy");function ol(o){return o.filter(e=>!!e)}u(ol,"coalesce");function Lve(o){let e=0;for(let t=0;t<o.length;t++)o[t]&&(o[e]=o[t],e+=1);o.length=e}u(Lve,"coalesceInPlace");function C1e(o){return!Array.isArray(o)||o.length===0}u(C1e,"isFalsyOrEmpty");function Ri(o){return Array.isArray(o)&&o.length>0}u(Ri,"isNonEmptyArray");function du(o,e=t=>t){const t=new Set;return o.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}u(du,"distinct");function S1e(o,e){const t=uV(o,e);if(t!==-1)return o[t]}u(S1e,"findLast");function uV(o,e){for(let t=o.length-1;t>=0;t--){const n=o[t];if(e(n))return t}return-1}u(uV,"findLastIndex");function x1e(o,e){return o.length>0?o[0]:e}u(x1e,"firstOrDefault");function Ji(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}u(Ji,"range");function _O(o,e,t){const n=o.slice(0,e),i=o.slice(e);return n.concat(t,i)}u(_O,"arrayInsert");function k4(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}u(k4,"pushToStart");function _E(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}u(_E,"pushToEnd");function Eve(o,e){for(const t of e)o.push(t)}u(Eve,"pushMany");function dZ(o){return Array.isArray(o)?o:[o]}u(dZ,"asArray");function Oke(o,e){for(const t of o){const n=e(t);if(n!==void 0)return n}}u(Oke,"mapFind");function Hke(o,e,t){const n=T1e(o,e),i=o.length,s=t.length;o.length=i+s;for(let r=i-1;r>=n;r--)o[r+s]=o[r];for(let r=0;r<s;r++)o[r+n]=t[r]}u(Hke,"insertInto");function kve(o,e,t,n){const i=T1e(o,e),s=o.splice(i,t);return Hke(o,i,n),s}u(kve,"splice$1");function T1e(o,e){return e<0?Math.max(e+o.length,0):Math.min(e,o.length)}u(T1e,"getActualStartIndex");var yg;(function(o){function e(s){return s<0}u(e,"isLessThan"),o.isLessThan=e;function t(s){return s<=0}u(t,"isLessThanOrEqual"),o.isLessThanOrEqual=t;function n(s){return s>0}u(n,"isGreaterThan"),o.isGreaterThan=n;function i(s){return s===0}u(i,"isNeitherLessOrGreaterThan"),o.isNeitherLessOrGreaterThan=i,o.greaterThan=1,o.lessThan=-1,o.neitherLessOrGreaterThan=0})(yg||(yg={}));function _r(o,e){return(t,n)=>e(o(t),o(n))}u(_r,"compareBy");function Vke(...o){return(e,t)=>{for(const n of o){const i=n(e,t);if(!yg.isNeitherLessOrGreaterThan(i))return i}return yg.neitherLessOrGreaterThan}}u(Vke,"tieBreakComparators");const gd=u((o,e)=>o-e,"numberComparator"),Wke=u((o,e)=>gd(o?1:0,e?1:0),"booleanComparator");function L1e(o){return(e,t)=>-o(e,t)}u(L1e,"reverseOrder");function E1e(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>0&&(t=i)}return t}u(E1e,"findMaxBy");function Bke(o,e){if(o.length===0)return;let t=o[0];for(let n=1;n<o.length;n++){const i=o[n];e(i,t)>=0&&(t=i)}return t}u(Bke,"findLastMaxBy");function Uke(o,e){return E1e(o,(t,n)=>-e(t,n))}u(Uke,"findMinBy");function zke(o,e){if(o.length===0)return-1;let t=0;for(let n=1;n<o.length;n++){const i=o[n];e(i,o[t])>0&&(t=n)}return t}u(zke,"findMaxIdxBy");const cQ=class cQ{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}};u(cQ,"ArrayQueue");let pa=cQ;const y0=class y0{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new y0(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new y0(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||yg.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}};u(y0,"CallbackIterable");let Td=y0;Td.empty=new Td(o=>{});function rs(o){return typeof o=="string"}u(rs,"isString$1");function ss(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}u(ss,"isObject");function Gke(o){const e=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof e}u(Gke,"isTypedArray");function cu(o){return typeof o=="number"&&!isNaN(o)}u(cu,"isNumber$1");function Dve(o){return!!o&&typeof o[Symbol.iterator]=="function"}u(Dve,"isIterable");function k1e(o){return o===!0||o===!1}u(k1e,"isBoolean");function Vs(o){return typeof o>"u"}u(Vs,"isUndefined");function Ny(o){return!no(o)}u(Ny,"isDefined");function no(o){return Vs(o)||o===null}u(no,"isUndefinedOrNull");function Lt(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}u(Lt,"assertType");function Uh(o){if(no(o))throw new Error("Assertion Failed: argument is undefined or null");return o}u(Uh,"assertIsDefined");function Ry(o){return typeof o=="function"}u(Ry,"isFunction");function jke(o,e){const t=Math.min(o.length,e.length);for(let n=0;n<t;n++)Kke(o[n],e[n])}u(jke,"validateConstraints");function Kke(o,e){if(rs(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Ry(e)){try{if(o instanceof e)return}catch{}if(!no(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}u(Kke,"validateConstraint");function td(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;const e=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?td(n):n}),e}u(td,"deepClone");function $ke(o){if(!o||typeof o!="object")return o;const e=[o];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(D1e.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&!Gke(i)&&e.push(i)}}return o}u($ke,"deepFreeze");const D1e=Object.prototype.hasOwnProperty;function M1e(o,e){return hV(o,e,new Set)}u(M1e,"cloneAndChange");function hV(o,e,t){if(no(o))return o;const n=e(o);if(typeof n<"u")return n;if(Array.isArray(o)){const i=[];for(const s of o)i.push(hV(s,e,t));return i}if(ss(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);const i={};for(const s in o)D1e.call(o,s)&&(i[s]=hV(o[s],e,t));return t.delete(o),i}return o}u(hV,"_cloneAndChange");function $L(o,e,t=!0){return ss(o)?(ss(e)&&Object.keys(e).forEach(n=>{n in o?t&&(ss(o[n])&&ss(e[n])?$L(o[n],e[n],t):o[n]=e[n]):o[n]=e[n]}),o):e}u($L,"mixin");function uo(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!uo(o[t],e[t]))return!1}else{const i=[];for(n in o)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!uo(i,s))return!1;for(t=0;t<i.length;t++)if(!uo(o[i[t]],e[i[t]]))return!1}return!0}u(uo,"equals$1");function qke(o){let e=[];for(;Object.prototype!==o;)e=e.concat(Object.getOwnPropertyNames(o)),o=Object.getPrototypeOf(o);return e}u(qke,"getAllPropertyNames");function cZ(o){const e=[];for(const t of qke(o))typeof o[t]=="function"&&e.push(t);return e}u(cZ,"getAllMethodNames");function Yke(o,e){const t=u(i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)},"createProxyMethod"),n={};for(const i of o)n[i]=t(i);return n}u(Yke,"createProxyObject$1");globalThis&&globalThis.__awaiter;let Xke=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Zke(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(n,i)=>{const s=i[0],r=e[s];let a=n;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),Xke&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}u(Zke,"_format$1");function m(o,e,...t){return Zke(e,t)}u(m,"localize");var D4;const lp="en";let iD=!1,sD=!1,Ek=!1,A1e=!1,uZ=!1,hZ=!1,I1e=!1,vE,kk=lp,Mve=lp,Jke,Wr;const vr=typeof self=="object"?self:typeof global=="object"?global:{};let es;typeof vr.vscode<"u"&&typeof vr.vscode.process<"u"?es=vr.vscode.process:typeof process<"u"&&(es=process);const Qke=typeof((D4=es?.versions)===null||D4===void 0?void 0:D4.electron)=="string",eDe=Qke&&es?.type==="renderer";if(typeof navigator=="object"&&!eDe)Wr=navigator.userAgent,iD=Wr.indexOf("Windows")>=0,sD=Wr.indexOf("Macintosh")>=0,hZ=(Wr.indexOf("Macintosh")>=0||Wr.indexOf("iPad")>=0||Wr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Ek=Wr.indexOf("Linux")>=0,I1e=Wr?.indexOf("Mobi")>=0,uZ=!0,m({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),vE=lp,kk=vE,Mve=navigator.language;else if(typeof es=="object"){iD=es.platform==="win32",sD=es.platform==="darwin",Ek=es.platform==="linux",Ek&&es.env.SNAP&&es.env.SNAP_REVISION,es.env.CI||es.env.BUILD_ARTIFACTSTAGINGDIRECTORY,vE=lp,kk=lp;const o=es.env.VSCODE_NLS_CONFIG;if(o)try{const e=JSON.parse(o),t=e.availableLanguages["*"];vE=e.locale,Mve=e.osLocale,kk=t||lp,Jke=e._translationsConfigFile}catch{}A1e=!0}else console.error("Unable to resolve platform.");const Si=iD,ot=sD,qi=Ek,ca=A1e,Ku=uZ,tDe=uZ&&typeof vr.importScripts=="function",Cr=hZ,nDe=I1e,rl=Wr,iDe=kk,sDe=typeof vr.postMessage=="function"&&!vr.importScripts,N1e=(()=>{if(sDe){const o=[];vr.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=o.length;n<i;n++){const s=o[n];if(s.id===t.data.vscodeScheduleAsyncWork){o.splice(n,1),s.callback();return}}});let e=0;return t=>{const n=++e;o.push({id:n,callback:t}),vr.postMessage({vscodeScheduleAsyncWork:n},"*")}}return o=>setTimeout(o)})(),oo=sD||hZ?2:iD?1:3;let Ave=!0,Ive=!1;function R1e(){if(!Ive){Ive=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,Ave=new Uint16Array(o.buffer)[0]===512+1}return Ave}u(R1e,"isLittleEndian");const P1e=!!(rl&&rl.indexOf("Chrome")>=0),oDe=!!(rl&&rl.indexOf("Firefox")>=0),rDe=!!(!P1e&&rl&&rl.indexOf("Safari")>=0),aDe=!!(rl&&rl.indexOf("Edg/")>=0);rl&&rl.indexOf("Android")>=0;const Di={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var et;(function(o){function e(v){return v&&typeof v=="object"&&typeof v[Symbol.iterator]=="function"}u(e,"is"),o.is=e;const t=Object.freeze([]);function n(){return t}u(n,"empty"),o.empty=n;function*i(v){yield v}u(i,"single"),o.single=i;function s(v){return e(v)?v:i(v)}u(s,"wrap"),o.wrap=s;function r(v){return v||t}u(r,"from"),o.from=r;function a(v){return!v||v[Symbol.iterator]().next().done===!0}u(a,"isEmpty"),o.isEmpty=a;function l(v){return v[Symbol.iterator]().next().value}u(l,"first"),o.first=l;function d(v,y){for(const w of v)if(y(w))return!0;return!1}u(d,"some"),o.some=d;function c(v,y){for(const w of v)if(y(w))return w}u(c,"find"),o.find=c;function*h(v,y){for(const w of v)y(w)&&(yield w)}u(h,"filter"),o.filter=h;function*g(v,y){let w=0;for(const C of v)yield y(C,w++)}u(g,"map"),o.map=g;function*f(...v){for(const y of v)for(const w of y)yield w}u(f,"concat"),o.concat=f;function p(v,y,w){let C=w;for(const S of v)C=y(C,S);return C}u(p,"reduce"),o.reduce=p;function*b(v,y,w=v.length){for(y<0&&(y+=v.length),w<0?w+=v.length:w>v.length&&(w=v.length);y<w;y++)yield v[y]}u(b,"slice"),o.slice=b;function _(v,y=Number.POSITIVE_INFINITY){const w=[];if(y===0)return[w,v];const C=v[Symbol.iterator]();for(let S=0;S<y;S++){const k=C.next();if(k.done)return[w,o.empty()];w.push(k.value)}return[w,{[Symbol.iterator](){return C}}]}u(_,"consume"),o.consume=_})(et||(et={}));var mg;let kn=(mg=class{constructor(e){this.element=e,this.next=mg.Undefined,this.prev=mg.Undefined}},u(mg,"Node"),mg);kn.Undefined=new kn(void 0);const uQ=class uQ{constructor(){this._first=kn.Undefined,this._last=kn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===kn.Undefined}clear(){let e=this._first;for(;e!==kn.Undefined;){const t=e.next;e.prev=kn.Undefined,e.next=kn.Undefined,e=t}this._first=kn.Undefined,this._last=kn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new kn(e);if(this._first===kn.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==kn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==kn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==kn.Undefined&&e.next!==kn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===kn.Undefined&&e.next===kn.Undefined?(this._first=kn.Undefined,this._last=kn.Undefined):e.next===kn.Undefined?(this._last=this._last.prev,this._last.next=kn.Undefined):e.prev===kn.Undefined&&(this._first=this._first.next,this._first.prev=kn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==kn.Undefined;)yield e.element,e=e.next}};u(uQ,"LinkedList");let Ai=uQ;const F1e="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function lDe(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of F1e)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}u(lDe,"createWordRegExp");const gZ=lDe();function O1e(o){let e=gZ;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}u(O1e,"ensureValidWordDefinition");const H1e=new Ai;H1e.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Py(o,e,t,n,i){if(i||(i=et.first(H1e)),t.length>i.maxLen){let d=o-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,o+i.maxLen/2),Py(o,e,t,n,i)}const s=Date.now(),r=o-1-n;let a=-1,l=null;for(let d=1;!(Date.now()-s>=i.timeBudget);d++){const c=r-i.windowSize*d;e.lastIndex=Math.max(0,c);const h=dDe(e,t,r,a);if(!h&&l||(l=h,c<=0))break;a=c}if(l){const d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}u(Py,"getWordAtText");function dDe(o,e,t,n){let i;for(;i=o.exec(e);){const s=i.index||0;if(s<=t&&o.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}u(dDe,"_findRegexMatchEnclosingPosition");const ac=8,hQ=class hQ{constructor(e){this._values=e}hasChanged(e){return this._values[e]}};u(hQ,"ConfigurationChangedEvent");let oD=hQ;const gQ=class gQ{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}};u(gQ,"ComputeOptionsMemory");let rD=gQ;const fQ=class fQ{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return vO(e,t)}compute(e,t,n){return n}};u(fQ,"BaseEditorOption");let qt=fQ;const pQ=class pQ{constructor(e,t){this.newValue=e,this.didChange=t}};u(pQ,"ApplyUpdateResult");let Qh=pQ;function vO(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new Qh(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){const n=Array.isArray(o)&&Array.isArray(e)&&jn(o,e);return new Qh(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=vO(o[n],e[n]);i.didChange&&(o[n]=i.newValue,t=!0)}return new Qh(o,t)}u(vO,"applyUpdate");const mQ=class mQ{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return vO(e,t)}validate(e){return this.defaultValue}};u(mQ,"ComputedEditorOption");let wg=mQ;const bQ=class bQ{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return vO(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};u(bQ,"SimpleEditorOption");let uu=bQ;function Se(o,e){return typeof o>"u"?e:o==="false"?!1:!!o}u(Se,"boolean");const _Q=class _Q extends uu{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Se(e,this.defaultValue)}};u(_Q,"EditorBooleanOption");let it=_Q;function nd(o,e,t,n){if(typeof o>"u")return e;let i=parseInt(o,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}u(nd,"clampedInt");const x2=class x2 extends uu{static clampedInt(e,t,n,i){return nd(e,t,n,i)}constructor(e,t,n,i,s,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=s),super(e,t,n,r),this.minimum=i,this.maximum=s}validate(e){return x2.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};u(x2,"EditorIntOption");let It=x2;function V1e(o,e,t,n){if(typeof o>"u")return e;const i=hr.float(o,e);return hr.clamp(i,t,n)}u(V1e,"clampedFloat");const T2=class T2 extends uu{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,i,s){typeof s<"u"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}validate(e){return this.validationFn(T2.float(e,this.defaultValue))}};u(T2,"EditorFloatOption");let hr=T2;const L2=class L2 extends uu{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return L2.string(e,this.defaultValue)}};u(L2,"EditorStringOption");let Ps=L2;function dn(o,e,t,n){return typeof o!="string"?e:n&&o in n?n[o]:t.indexOf(o)===-1?e:o}u(dn,"stringSet");const vQ=class vQ extends uu{constructor(e,t,n,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return dn(e,this.defaultValue,this._allowedValues)}};u(vQ,"EditorStringEnumOption");let Qt=vQ;const yQ=class yQ extends qt{constructor(e,t,n,i,s,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};u(yQ,"EditorEnumOption");let dp=yQ;function cDe(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}u(cDe,"_autoIndentFromString");const wQ=class wQ extends qt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached"),m("accessibilitySupport.on","Optimize for usage with a Screen Reader"),m("accessibilitySupport.off","Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:m("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}};u(wQ,"EditorAccessibilitySupport");let gV=wQ;const CQ=class CQ extends qt{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(22,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Se(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Se(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};u(CQ,"EditorComments");let fV=CQ;function uDe(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}u(uDe,"_cursorBlinkingStyleFromString");var li;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(li||(li={}));function hDe(o){switch(o){case"line":return li.Line;case"block":return li.Block;case"underline":return li.Underline;case"line-thin":return li.LineThin;case"block-outline":return li.BlockOutline;case"underline-thin":return li.UnderlineThin}}u(hDe,"_cursorStyleFromString");const SQ=class SQ extends wg{constructor(){super(139)}compute(e,t,n){const i=["monaco-editor"];return t.get(38)&&i.push(t.get(38)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(72)==="default"?i.push("mouse-default"):t.get(72)==="copy"&&i.push("mouse-copy"),t.get(109)&&i.push("showUnused"),t.get(137)&&i.push("showDeprecated"),i.join(" ")}};u(SQ,"EditorClassName");let pV=SQ;const xQ=class xQ extends it{constructor(){super(36,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}};u(xQ,"EditorEmptySelectionClipboard");let mV=xQ;const TQ=class TQ extends qt{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(40,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ot},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Se(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":dn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":dn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Se(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Se(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Se(t.loop,this.defaultValue.loop)}}};u(TQ,"EditorFind");let bV=TQ;const yc=class yc extends qt{constructor(){super(50,"fontLigatures",yc.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?yc.OFF:e==="true"?yc.ON:e:e?yc.ON:yc.OFF}};u(yc,"EditorFontLigatures");let Sr=yc;Sr.OFF='"liga" off, "calt" off';Sr.ON='"liga" on, "calt" on';const wc=class wc extends qt{constructor(){super(53,"fontVariations",wc.OFF,{anyOf:[{type:"boolean",description:m("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:m("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:m("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?wc.OFF:e==="true"?wc.TRANSLATE:e:e?wc.TRANSLATE:wc.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}};u(wc,"EditorFontVariations");let Cg=wc;Cg.OFF="normal";Cg.TRANSLATE="translate";const LQ=class LQ extends wg{constructor(){super(49)}compute(e,t,n){return e.fontInfo}};u(LQ,"EditorFontInfo");let _V=LQ;const EQ=class EQ extends uu{constructor(){super(51,"fontSize",Us.fontSize,{type:"number",minimum:6,maximum:100,default:Us.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){const t=hr.float(e,this.defaultValue);return t===0?Us.fontSize:hr.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}};u(EQ,"EditorFontSize");let vV=EQ;const Cc=class Cc extends qt{constructor(){super(52,"fontWeight",Us.fontWeight,{anyOf:[{type:"number",minimum:Cc.MINIMUM_VALUE,maximum:Cc.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Cc.SUGGESTION_VALUES}],default:Us.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(It.clampedInt(e,Us.fontWeight,Cc.MINIMUM_VALUE,Cc.MAXIMUM_VALUE))}};u(Cc,"EditorFontWeight");let Zm=Cc;Zm.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Zm.MINIMUM_VALUE=1;Zm.MAXIMUM_VALUE=1e3;const kQ=class kQ extends qt{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(57,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:dn(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:dn(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:dn(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:dn(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:dn(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:dn(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Ps.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Ps.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Ps.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Ps.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Ps.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}};u(kQ,"EditorGoToLocation");let yV=kQ;const DQ=class DQ extends qt{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(59,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),delay:It.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Se(t.sticky,this.defaultValue.sticky),above:Se(t.above,this.defaultValue.above)}}};u(DQ,"EditorHover");let wV=DQ;const Bp=class Bp extends wg{constructor(){super(142)}compute(e,t,n){return Bp.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));const s=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let g=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,p=e.minimap.size,b=e.minimap.side,_=e.verticalScrollbarWidth,v=e.viewLineCount,y=e.remainingWidth,w=e.isViewportWrapping,C=h?2:3;let S=Math.floor(s*i);const k=S/s;let T=!1,E=!1,D=C*g,O=g/s,B=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:R,extraLinesBeforeFirstLine:z,extraLinesBeyondLastLine:te,desiredRatio:fe,minimapLineCount:me}=Bp.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:c,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:s});if(v/me>1)T=!0,E=!0,g=1,D=1,O=g/s;else{let mt=!1,$t=g+1;if(p==="fit"){const hn=Math.ceil((z+v+te)*D);w&&a&&y<=t.stableFitRemainingWidth?(mt=!0,$t=t.stableFitMaxMinimapScale):mt=hn>S}if(p==="fill"||mt){T=!0;const hn=g;D=Math.min(l*s,Math.max(1,Math.floor(1/fe))),w&&a&&y<=t.stableFitRemainingWidth&&($t=t.stableFitMaxMinimapScale),g=Math.min($t,Math.max(1,Math.floor(D/C))),g>hn&&(B=Math.min(2,g/hn)),O=g/s/B,S=Math.ceil(Math.max(R,z+v+te)*D),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=y,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const H=Math.floor(f*O),F=Math.min(H,Math.max(0,Math.floor((y-_-2)*O/(d+O)))+ac);let $=Math.floor(s*F);const ee=$/s;$=Math.floor($*B);const ge=h?1:2,X=b==="left"?0:n-F-_;return{renderMinimap:ge,minimapLeft:X,minimapWidth:F,minimapHeightIsEditorHeight:T,minimapIsSampling:E,minimapScale:g,minimapLineHeight:D,minimapCanvasInnerWidth:$,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:ee,minimapCanvasOuterHeight:k}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,c=t.viewLineCount,h=e.get(134),g=h==="inherit"?e.get(133):h,f=g==="inherit"?e.get(129):g,p=e.get(132),b=t.isDominatedByLongLines,_=e.get(56),v=e.get(66).renderType!==0,y=e.get(67),w=e.get(103),C=e.get(82),S=e.get(71),k=e.get(101),T=k.verticalScrollbarSize,E=k.verticalHasArrows,D=k.arrowSize,O=k.horizontalScrollbarSize,B=e.get(42),H=e.get(108)!=="never";let F=e.get(64);B&&H&&(F+=16);let $=0;if(v){const Hn=Math.max(r,y);$=Math.round(Hn*l)}let ee=0;_&&(ee=s*t.glyphMarginDecorationLaneCount);let ge=0,X=ge+ee,R=X+$,z=R+F;const te=n-ee-$-F;let fe=!1,me=!1,ce=-1;g==="inherit"&&b?(fe=!0,me=!0):f==="on"||f==="bounded"?me=!0:f==="wordWrapColumn"&&(ce=p);const mt=Bp._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:w,paddingTop:C.top,paddingBottom:C.bottom,minimap:S,verticalScrollbarWidth:T,viewLineCount:c,remainingWidth:te,isViewportWrapping:me},t.memory||new rD);mt.renderMinimap!==0&&mt.minimapLeft===0&&(ge+=mt.minimapWidth,X+=mt.minimapWidth,R+=mt.minimapWidth,z+=mt.minimapWidth);const $t=te-mt.minimapWidth,hn=Math.max(1,Math.floor(($t-T-2)/a)),vt=E?D:0;return me&&(ce=Math.max(1,hn),f==="bounded"&&(ce=Math.min(ce,p))),{width:n,height:i,glyphMarginLeft:ge,glyphMarginWidth:ee,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:X,lineNumbersWidth:$,decorationsLeft:R,decorationsWidth:F,contentLeft:z,contentWidth:$t,minimap:mt,viewportColumn:hn,isWordWrapMinified:fe,isViewportWrapping:me,wrappingColumn:ce,verticalScrollbarWidth:T,horizontalScrollbarHeight:O,overviewRuler:{top:vt,width:T,height:i-2*vt,right:0}}}};u(Bp,"EditorLayoutInfoComputer");let aD=Bp;const MQ=class MQ extends qt{constructor(){super(136,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:m("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return dn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};u(MQ,"WrappingStrategy");let CV=MQ;const AQ=class AQ extends qt{constructor(){const e={enabled:!0};super(63,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:m("codeActions","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Se(e.enabled,this.defaultValue.enabled)}}};u(AQ,"EditorLightbulb");let SV=AQ;const IQ=class IQ extends qt{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(113,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:m("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:m("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:m("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:m("editor.stickyScroll.scrollWithEditor","Enable scrolling of the sticky scroll widget with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),maxLineCount:It.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:dn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Se(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}};u(IQ,"EditorStickyScroll");let xV=IQ;const NQ=class NQ extends qt{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(138,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m("editor.inlayHints.on","Inlay hints are enabled"),m("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",ot?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",ot?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:m("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:dn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:It.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Ps.string(t.fontFamily,this.defaultValue.fontFamily),padding:Se(t.padding,this.defaultValue.padding)}}};u(NQ,"EditorInlayHints");let TV=NQ;const RQ=class RQ extends qt{constructor(){super(64,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):It.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?It.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}};u(RQ,"EditorLineDecorationsWidth");let LV=RQ;const PQ=class PQ extends hr{constructor(){super(65,"lineHeight",Us.lineHeight,e=>hr.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}};u(PQ,"EditorLineHeight");let EV=PQ;const FQ=class FQ extends qt{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(71,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:m("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),autohide:Se(t.autohide,this.defaultValue.autohide),size:dn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:dn(t.side,this.defaultValue.side,["right","left"]),showSlider:dn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Se(t.renderCharacters,this.defaultValue.renderCharacters),scale:It.clampedInt(t.scale,1,1,3),maxColumn:It.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}};u(FQ,"EditorMinimap");let kV=FQ;function gDe(o){return o==="ctrlCmd"?ot?"metaKey":"ctrlKey":"altKey"}u(gDe,"_multiCursorModifierFromString");const OQ=class OQ extends qt{constructor(){super(82,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:It.clampedInt(t.top,0,0,1e3),bottom:It.clampedInt(t.bottom,0,0,1e3)}}};u(OQ,"EditorPadding");let DV=OQ;const HQ=class HQ extends qt{constructor(){const e={enabled:!0,cycle:!0};super(84,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),cycle:Se(t.cycle,this.defaultValue.cycle)}}};u(HQ,"EditorParameterHints");let MV=HQ;const VQ=class VQ extends wg{constructor(){super(140)}compute(e,t,n){return e.pixelRatio}};u(VQ,"EditorPixelRatio");let AV=VQ;const WQ=class WQ extends qt{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m("on","Quick suggestions show inside the suggest widget"),m("inline","Quick suggestions show as ghost text"),m("off","Quick suggestions are disabled")]}];super(87,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:m("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const d=e?"on":"off";return{comments:d,strings:d,other:d}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:i}=e,s=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=dn(t,this.defaultValue.other,s),typeof n=="boolean"?a=n?"on":"off":a=dn(n,this.defaultValue.comments,s),typeof i=="boolean"?l=i?"on":"off":l=dn(i,this.defaultValue.strings,s),{other:r,comments:a,strings:l}}};u(WQ,"EditorQuickSuggestions");let IV=WQ;const BQ=class BQ extends qt{constructor(){super(66,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};u(BQ,"EditorRenderLineNumbersOption");let NV=BQ;function lD(o){const e=o.get(96);return e==="editable"?o.get(89):e!=="on"}u(lD,"filterValidationDecorations");const UQ=class UQ extends qt{constructor(){const e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(100,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:It.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:It.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}};u(UQ,"EditorRulers");let RV=UQ;const zQ=class zQ extends qt{constructor(){super(90,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};u(zQ,"ReadonlyMessage");let PV=zQ;function Nve(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}u(Nve,"_scrollbarVisibilityFromString");var S1;let fDe=(S1=class extends qt{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(101,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=It.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=It.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:It.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Nve(t.vertical,this.defaultValue.vertical),horizontal:Nve(t.horizontal,this.defaultValue.horizontal),useShadows:Se(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Se(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Se(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Se(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Se(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:It.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:It.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Se(t.scrollByPage,this.defaultValue.scrollByPage)}}},u(S1,"EditorScrollbar"),S1);const Js="inUntrustedWorkspace",_s={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},GQ=class GQ extends qt{constructor(){const e={nonBasicASCII:Js,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Js,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(123,"unicodeHighlight",e,{[_s.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Js],default:e.nonBasicASCII,description:m("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[_s.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:m("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[_s.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:m("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[_s.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Js],default:e.includeComments,description:m("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[_s.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Js],default:e.includeStrings,description:m("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[_s.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:m("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[_s.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:m("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(uo(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&e&&(uo(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const i=super.applyUpdate(e,t);return n?new Qh(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ym(t.nonBasicASCII,Js,[!0,!1,Js]),invisibleCharacters:Se(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Se(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ym(t.includeComments,Js,[!0,!1,Js]),includeStrings:ym(t.includeStrings,Js,[!0,!1,Js]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,s]of Object.entries(e))s===!0&&(n[i]=!0);return n}};u(GQ,"UnicodeHighlight");let FV=GQ;const jQ=class jQ extends qt{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1};super(61,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover"],enumDescriptions:[m("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),m("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:m("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:m("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),mode:dn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:dn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:Se(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Se(t.keepOnBlur,this.defaultValue.keepOnBlur)}}};u(jQ,"InlineEditorSuggest");let OV=jQ;const KQ=class KQ extends qt{constructor(){const e={enabled:Di.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Di.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(14,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:m("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Se(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}};u(KQ,"BracketPairColorization");let HV=KQ;const $Q=class $Q extends qt{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(15,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ym(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ym(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Se(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Se(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ym(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};u($Q,"GuideOptions");let VV=$Q;function ym(o,e,t){const n=t.indexOf(o);return n===-1?e:t[n]}u(ym,"primitiveSet");const qQ=class qQ extends qt{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(116,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[m("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),m("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:m("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:dn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Se(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Se(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Se(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Se(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:dn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Se(t.showIcons,this.defaultValue.showIcons),showStatusBar:Se(t.showStatusBar,this.defaultValue.showStatusBar),preview:Se(t.preview,this.defaultValue.preview),previewMode:dn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Se(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Se(t.showMethods,this.defaultValue.showMethods),showFunctions:Se(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Se(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Se(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Se(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Se(t.showFields,this.defaultValue.showFields),showVariables:Se(t.showVariables,this.defaultValue.showVariables),showClasses:Se(t.showClasses,this.defaultValue.showClasses),showStructs:Se(t.showStructs,this.defaultValue.showStructs),showInterfaces:Se(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Se(t.showModules,this.defaultValue.showModules),showProperties:Se(t.showProperties,this.defaultValue.showProperties),showEvents:Se(t.showEvents,this.defaultValue.showEvents),showOperators:Se(t.showOperators,this.defaultValue.showOperators),showUnits:Se(t.showUnits,this.defaultValue.showUnits),showValues:Se(t.showValues,this.defaultValue.showValues),showConstants:Se(t.showConstants,this.defaultValue.showConstants),showEnums:Se(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Se(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Se(t.showKeywords,this.defaultValue.showKeywords),showWords:Se(t.showWords,this.defaultValue.showWords),showColors:Se(t.showColors,this.defaultValue.showColors),showFiles:Se(t.showFiles,this.defaultValue.showFiles),showReferences:Se(t.showReferences,this.defaultValue.showReferences),showFolders:Se(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Se(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Se(t.showSnippets,this.defaultValue.showSnippets),showUsers:Se(t.showUsers,this.defaultValue.showUsers),showIssues:Se(t.showIssues,this.defaultValue.showIssues)}}};u(qQ,"EditorSuggest");let WV=qQ;const YQ=class YQ extends qt{constructor(){super(111,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:m("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Se(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Se(e.selectSubwords,this.defaultValue.selectSubwords)}}};u(YQ,"SmartSelect");let BV=YQ;const XQ=class XQ extends qt{constructor(){super(135,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}};u(XQ,"WrappingIndentOption");let UV=XQ;const ZQ=class ZQ extends wg{constructor(){super(143)}compute(e,t,n){const i=t.get(142);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}};u(ZQ,"EditorWrappingInfoComputer");let zV=ZQ;const JQ=class JQ extends qt{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(35,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:m("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[m("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),m("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),showDropSelector:dn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}};u(JQ,"EditorDropIntoEditor");let GV=JQ;const QQ=class QQ extends qt{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(83,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:m("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[m("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),m("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),showPasteSelector:dn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}};u(QQ,"EditorPasteAs");let jV=QQ;const pDe="Consolas, 'Courier New', monospace",mDe="Menlo, Monaco, 'Courier New', monospace",bDe="'Droid Sans Mono', 'monospace', monospace",Us={fontFamily:ot?mDe:qi?bDe:pDe,fontWeight:"normal",fontSize:ot?12:14,lineHeight:0,letterSpacing:0},cp=[];function le(o){return cp[o.id]=o,o}u(le,"register$2");const Mr={acceptSuggestionOnCommitCharacter:le(new it(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:le(new Qt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:le(new gV),accessibilityPageSize:le(new It(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:le(new Ps(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),ariaRequired:le(new it(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:le(new it(7,"screenReaderAnnounceInlineSuggestion",!0,{description:m("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:le(new Qt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:le(new Qt(8,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:le(new Qt(9,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:le(new Qt(10,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:le(new dp(11,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],cDe,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:le(new it(12,"automaticLayout",!1)),autoSurround:le(new Qt(13,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:le(new HV),bracketPairGuides:le(new VV),stickyTabStops:le(new it(114,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:le(new it(16,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:le(new Ps(17,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:le(new It(18,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:le(new it(19,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:le(new Qt(145,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[m("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),m("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),m("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:m("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:le(new It(20,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:m("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:le(new it(21,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:le(new fV),contextmenu:le(new it(23,"contextmenu",!0)),copyWithSyntaxHighlighting:le(new it(24,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:le(new dp(25,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],uDe,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:le(new Qt(26,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[m("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),m("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),m("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:le(new dp(27,"cursorStyle",li.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],hDe,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:le(new It(28,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:le(new Qt(29,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:le(new It(30,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:le(new it(31,"disableLayerHinting",!1)),disableMonospaceOptimizations:le(new it(32,"disableMonospaceOptimizations",!1)),domReadOnly:le(new it(33,"domReadOnly",!1)),dragAndDrop:le(new it(34,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:le(new mV),dropIntoEditor:le(new GV),stickyScroll:le(new xV),experimentalWhitespaceRendering:le(new Qt(37,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[m("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),m("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),m("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:m("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:le(new Ps(38,"extraEditorClassName","")),fastScrollSensitivity:le(new hr(39,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:le(new bV),fixedOverflowWidgets:le(new it(41,"fixedOverflowWidgets",!1)),folding:le(new it(42,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:le(new Qt(43,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:le(new it(44,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:le(new it(45,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:le(new It(46,"foldingMaximumRegions",5e3,10,65e3,{description:m("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:le(new it(47,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:le(new Ps(48,"fontFamily",Us.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:le(new _V),fontLigatures2:le(new Sr),fontSize:le(new vV),fontWeight:le(new Zm),fontVariations:le(new Cg),formatOnPaste:le(new it(54,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:le(new it(55,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:le(new it(56,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:le(new yV),hideCursorInOverviewRuler:le(new it(58,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:le(new wV),inDiffEditor:le(new it(60,"inDiffEditor",!1)),letterSpacing:le(new hr(62,"letterSpacing",Us.letterSpacing,o=>hr.clamp(o,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:le(new SV),lineDecorationsWidth:le(new LV),lineHeight:le(new EV),lineNumbers:le(new NV),lineNumbersMinChars:le(new It(67,"lineNumbersMinChars",5,1,300)),linkedEditing:le(new it(68,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:le(new it(69,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:le(new Qt(70,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:le(new kV),mouseStyle:le(new Qt(72,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:le(new hr(73,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:le(new it(74,"mouseWheelZoom",!1,{markdownDescription:m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:le(new it(75,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:le(new dp(76,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],gDe,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:le(new Qt(77,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:le(new It(78,"multiCursorLimit",1e4,1,1e5,{markdownDescription:m("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:le(new it(79,"occurrencesHighlight",!0,{description:m("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:le(new it(80,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:le(new It(81,"overviewRulerLanes",3,0,3)),padding:le(new DV),pasteAs:le(new jV),parameterHints:le(new MV),peekWidgetDefaultFocus:le(new Qt(85,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:le(new it(86,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:le(new IV),quickSuggestionsDelay:le(new It(88,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:le(new it(89,"readOnly",!1)),readOnlyMessage:le(new PV),renameOnType:le(new it(91,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:le(new it(92,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:le(new Qt(93,"renderFinalNewline",qi?"dimmed":"on",["off","on","dimmed"],{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:le(new Qt(94,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:le(new it(95,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:le(new Qt(96,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:le(new Qt(97,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:le(new It(98,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:le(new it(99,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:le(new RV),scrollbar:le(new fDe),scrollBeyondLastColumn:le(new It(102,"scrollBeyondLastColumn",4,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:le(new it(103,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:le(new it(104,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:le(new it(105,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:qi})),selectionHighlight:le(new it(106,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:le(new it(107,"selectOnLineNumbers",!0)),showFoldingControls:le(new Qt(108,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:le(new it(109,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:le(new it(137,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:le(new TV),snippetSuggestions:le(new Qt(110,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:le(new BV),smoothScrolling:le(new it(112,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:le(new It(115,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:le(new WV),inlineSuggest:le(new OV),inlineCompletionsAccessibilityVerbose:le(new it(146,"inlineCompletionsAccessibilityVerbose",!1,{description:m("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:le(new It(117,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:le(new It(118,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:le(new it(119,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:le(new Qt(120,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:le(new Qt(121,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:le(new It(122,"tabIndex",0,-1,1073741824)),unicodeHighlight:le(new FV),unusualLineTerminators:le(new Qt(124,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:le(new it(125,"useShadowDOM",!0)),useTabStops:le(new it(126,"useTabStops",!0,{description:m("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:le(new Qt(127,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[m("wordBreak.normal","Use the default line break rule."),m("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:m("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:le(new Ps(128,"wordSeparators",F1e,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:le(new Qt(129,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:le(new Ps(130,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:le(new Ps(131,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:le(new It(132,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:le(new Qt(133,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:le(new Qt(134,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:le(new pV),defaultColorDecorators:le(new it(144,"defaultColorDecorators",!1,{markdownDescription:m("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:le(new AV),tabFocusMode:le(new it(141,"tabFocusMode",!1,{markdownDescription:m("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:le(new aD),wrappingInfo:le(new zV),wrappingIndent:le(new UV),wrappingStrategy:le(new CV)},eee=class eee{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Fy.isErrorNoTelemetry(e)?new Fy(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};u(eee,"ErrorHandler");let KV=eee;const W1e=new KV;function Be(o){Ca(o)||W1e.onUnexpectedError(o)}u(Be,"onUnexpectedError");function Ln(o){Ca(o)||W1e.onUnexpectedExternalError(o)}u(Ln,"onUnexpectedExternalError");function Rve(o){if(o instanceof Error){const{name:e,message:t}=o,n=o.stacktrace||o.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:Fy.isErrorNoTelemetry(o)}}return o}u(Rve,"transformErrorForSerialization");const dD="Canceled";function Ca(o){return o instanceof al?!0:o instanceof Error&&o.name===dD&&o.message===dD}u(Ca,"isCancellationError");const tee=class tee extends Error{constructor(){super(dD),this.name=this.message}};u(tee,"CancellationError");let al=tee;function _De(){const o=new Error(dD);return o.name=o.message,o}u(_De,"canceled");function Ho(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}u(Ho,"illegalArgument");function fZ(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}u(fZ,"illegalState");const nee=class nee extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};u(nee,"NotSupportedError");let $V=nee;const w0=class w0 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof w0)return e;const t=new w0;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}};u(w0,"ErrorNoTelemetry");let Fy=w0;const E2=class E2 extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,E2.prototype)}};u(E2,"BugIndicatingError");let An=E2;function ll(o){const e=this;let t=!1,n;return function(){return t||(t=!0,n=o.apply(e,arguments)),n}}u(ll,"once$1");function pZ(o){return typeof o.dispose=="function"&&o.dispose.length===0}u(pZ,"isDisposable");function wt(o){if(et.is(o)){const e=[];for(const t of o)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}u(wt,"dispose");function yr(...o){return He(()=>wt(o))}u(yr,"combinedDisposable");function He(o){return{dispose:ll(()=>{o()})}}u(He,"toDisposable");const k2=class k2{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{wt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?k2.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};u(k2,"DisposableStore");let ie=k2;ie.DISABLE_DISPOSED_WARNING=!1;const iee=class iee{constructor(){this._store=new ie,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};u(iee,"Disposable");let G=iee;G.None=Object.freeze({dispose(){}});const see=class see{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}};u(see,"MutableDisposable");let si=see;const oee=class oee{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}};u(oee,"RefCountedDisposable");let qV=oee;const ree=class ree{constructor(e){this.object=e}dispose(){}};u(ree,"ImmortalReference");let YV=ree;const aee=class aee{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{wt(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var i;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(i=this._store.get(e))===null||i===void 0||i.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}};u(aee,"DisposableMap");let Oy=aee;const vDe=globalThis.performance&&typeof globalThis.performance.now=="function",D2=class D2{static create(e){return new D2(e)}constructor(e){this._now=vDe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};u(D2,"StopWatch");let Fi=D2;var Ce;(function(o){o.None=()=>G.None;function e(H,F){return c(H,()=>{},0,void 0,!0,void 0,F)}u(e,"defer"),o.defer=e;function t(H){return(F,$=null,ee)=>{let ge=!1,X;return X=H(R=>{if(!ge)return X?X.dispose():ge=!0,F.call($,R)},null,ee),ge&&X.dispose(),X}}u(t,"once"),o.once=t;function n(H,F,$){return d((ee,ge=null,X)=>H(R=>ee.call(ge,F(R)),null,X),$)}u(n,"map"),o.map=n;function i(H,F,$){return d((ee,ge=null,X)=>H(R=>{F(R),ee.call(ge,R)},null,X),$)}u(i,"forEach"),o.forEach=i;function s(H,F,$){return d((ee,ge=null,X)=>H(R=>F(R)&&ee.call(ge,R),null,X),$)}u(s,"filter"),o.filter=s;function r(H){return H}u(r,"signal"),o.signal=r;function a(...H){return(F,$=null,ee)=>yr(...H.map(ge=>ge(X=>F.call($,X),null,ee)))}u(a,"any"),o.any=a;function l(H,F,$,ee){let ge=$;return n(H,X=>(ge=F(ge,X),ge),ee)}u(l,"reduce"),o.reduce=l;function d(H,F){let $;const ee={onWillAddFirstListener(){$=H(ge.fire,ge)},onDidRemoveLastListener(){$?.dispose()}},ge=new V(ee);return F?.add(ge),ge.event}u(d,"snapshot");function c(H,F,$=100,ee=!1,ge=!1,X,R){let z,te,fe,me=0,ce;const mt={leakWarningThreshold:X,onWillAddFirstListener(){z=H(hn=>{me++,te=F(te,hn),ee&&!fe&&($t.fire(te),te=void 0),ce=u(()=>{const vt=te;te=void 0,fe=void 0,(!ee||me>1)&&$t.fire(vt),me=0},"doFire"),typeof $=="number"?(clearTimeout(fe),fe=setTimeout(ce,$)):fe===void 0&&(fe=0,queueMicrotask(ce))})},onWillRemoveListener(){ge&&me>0&&ce?.()},onDidRemoveLastListener(){ce=void 0,z.dispose()}},$t=new V(mt);return R?.add($t),$t.event}u(c,"debounce"),o.debounce=c;function h(H,F=0,$){return o.debounce(H,(ee,ge)=>ee?(ee.push(ge),ee):[ge],F,void 0,!0,void 0,$)}u(h,"accumulate"),o.accumulate=h;function g(H,F=(ee,ge)=>ee===ge,$){let ee=!0,ge;return s(H,X=>{const R=ee||!F(X,ge);return ee=!1,ge=X,R},$)}u(g,"latch"),o.latch=g;function f(H,F,$){return[o.filter(H,F,$),o.filter(H,ee=>!F(ee),$)]}u(f,"split"),o.split=f;function p(H,F=!1,$=[]){let ee=$.slice(),ge=H(z=>{ee?ee.push(z):R.fire(z)});const X=u(()=>{ee?.forEach(z=>R.fire(z)),ee=null},"flush"),R=new V({onWillAddFirstListener(){ge||(ge=H(z=>R.fire(z)))},onDidAddFirstListener(){ee&&(F?setTimeout(X):X())},onDidRemoveLastListener(){ge&&ge.dispose(),ge=null}});return R.event}u(p,"buffer"),o.buffer=p;const O=class O{constructor(F){this.event=F,this.disposables=new ie}map(F){return new O(n(this.event,F,this.disposables))}forEach(F){return new O(i(this.event,F,this.disposables))}filter(F){return new O(s(this.event,F,this.disposables))}reduce(F,$){return new O(l(this.event,F,$,this.disposables))}latch(){return new O(g(this.event,void 0,this.disposables))}debounce(F,$=100,ee=!1,ge=!1,X){return new O(c(this.event,F,$,ee,ge,X,this.disposables))}on(F,$,ee){return this.event(F,$,ee)}once(F,$,ee){return t(this.event)(F,$,ee)}dispose(){this.disposables.dispose()}};u(O,"ChainableEvent");let b=O;function _(H){return new b(H)}u(_,"chain"),o.chain=_;function v(H,F,$=ee=>ee){const ee=u((...z)=>R.fire($(...z)),"fn"),ge=u(()=>H.on(F,ee),"onFirstListenerAdd"),X=u(()=>H.removeListener(F,ee),"onLastListenerRemove"),R=new V({onWillAddFirstListener:ge,onDidRemoveLastListener:X});return R.event}u(v,"fromNodeEventEmitter"),o.fromNodeEventEmitter=v;function y(H,F,$=ee=>ee){const ee=u((...z)=>R.fire($(...z)),"fn"),ge=u(()=>H.addEventListener(F,ee),"onFirstListenerAdd"),X=u(()=>H.removeEventListener(F,ee),"onLastListenerRemove"),R=new V({onWillAddFirstListener:ge,onDidRemoveLastListener:X});return R.event}u(y,"fromDOMEventEmitter"),o.fromDOMEventEmitter=y;function w(H){return new Promise(F=>t(H)(F))}u(w,"toPromise"),o.toPromise=w;function C(H){const F=new V;return H.then($=>{F.fire($)},()=>{F.fire(void 0)}).finally(()=>{F.dispose()}),F.event}u(C,"fromPromise"),o.fromPromise=C;function S(H,F){return F(void 0),H($=>F($))}u(S,"runAndSubscribe"),o.runAndSubscribe=S;function k(H,F){let $=null;function ee(X){$?.dispose(),$=new ie,F(X,$)}u(ee,"run"),ee(void 0);const ge=H(X=>ee(X));return He(()=>{ge.dispose(),$?.dispose()})}u(k,"runAndSubscribeWithStore"),o.runAndSubscribeWithStore=k;const B=class B{constructor(F,$){this._observable=F,this._counter=0,this._hasChanged=!1;const ee={onWillAddFirstListener:()=>{F.addObserver(this)},onDidRemoveLastListener:()=>{F.removeObserver(this)}};this.emitter=new V(ee),$&&$.add(this.emitter)}beginUpdate(F){this._counter++}handlePossibleChange(F){}handleChange(F,$){this._hasChanged=!0}endUpdate(F){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}};u(B,"EmitterObserver");let T=B;function E(H,F){return new T(H,F).emitter.event}u(E,"fromObservable"),o.fromObservable=E;function D(H){return F=>{let $=0,ee=!1;const ge={beginUpdate(){$++},endUpdate(){$--,$===0&&(H.reportChanges(),ee&&(ee=!1,F()))},handlePossibleChange(){},handleChange(){ee=!0}};return H.addObserver(ge),H.reportChanges(),{dispose(){H.removeObserver(ge)}}}}u(D,"fromObservableLight"),o.fromObservableLight=D})(Ce||(Ce={}));const C0=class C0{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${C0._idPool++}`,C0.all.add(this)}start(e){this._stopWatch=new Fi,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};u(C0,"EventProfiling");let Hy=C0;Hy.all=new Set;Hy._idPool=0;let yDe=-1;const lee=class lee{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let s,r=0;for(const[a,l]of this._stacks)(!s||r<l)&&(s=a,r=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`),console.warn(s)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}};u(lee,"LeakageMonitor");let XV=lee;const M2=class M2{static create(){var e;return new M2((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}};u(M2,"Stacktrace");let ZV=M2;const dee=class dee{constructor(e){this.value=e}};u(dee,"UniqueContainer");let Dv=dee;const wDe=2;var x1;let V=(x1=class{constructor(e){var t,n,i,s,r;this._size=0,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new XV((i=(n=this._options)===null||n===void 0?void 0:n.leakWarningThreshold)!==null&&i!==void 0?i:yDe):void 0,this._perfMon=!((s=this._options)===null||s===void 0)&&s._profName?new Hy(this._options._profName):void 0,this._deliveryQueue=(r=this._options)===null||r===void 0?void 0:r.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)===null||e===void 0?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||n===void 0||n.call(t),(i=this._leakageMon)===null||i===void 0||i.dispose())}get event(){var e;return(e=this._event)!==null&&e!==void 0||(this._event=(t,n,i)=>{var s,r,a,l,d;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),G.None;if(this._disposed)return G.None;n&&(t=t.bind(n));const c=new Dv(t);let h;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(c.stack=ZV.create(),h=this._leakageMon.check(c.stack,this._size+1)),this._listeners?this._listeners instanceof Dv?((d=this._deliveryQueue)!==null&&d!==void 0||(this._deliveryQueue=new cD),this._listeners=[this._listeners,c]):this._listeners.push(c):((r=(s=this._options)===null||s===void 0?void 0:s.onWillAddFirstListener)===null||r===void 0||r.call(s,this),this._listeners=c,(l=(a=this._options)===null||a===void 0?void 0:a.onDidAddFirstListener)===null||l===void 0||l.call(a,this)),this._size++;const g=He(()=>{h?.(),this._removeListener(c)});return i instanceof ie?i.add(g):Array.isArray(i)&&i.push(g),g}),this._event}_removeListener(e){var t,n,i,s;if((n=(t=this._options)===null||t===void 0?void 0:t.onWillRemoveListener)===null||n===void 0||n.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(s=(i=this._options)===null||i===void 0?void 0:i.onDidRemoveLastListener)===null||s===void 0||s.call(i,this),this._size=0;return}const r=this._listeners,a=r.indexOf(e);if(a===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[a]=void 0;const l=this._deliveryQueue.current===this;if(this._size*wDe<=r.length){let d=0;for(let c=0;c<r.length;c++)r[c]?r[d++]=r[c]:l&&(this._deliveryQueue.end--,d<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=d}}_deliver(e,t){var n;if(!e)return;const i=((n=this._options)===null||n===void 0?void 0:n.onListenerError)||Be;if(!i){e.value(t);return}try{e.value(t)}catch(s){i(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,i,s;if(!((t=this._deliveryQueue)===null||t===void 0)&&t.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)===null||n===void 0||n.stop()),(i=this._perfMon)===null||i===void 0||i.start(this._size),this._listeners)if(this._listeners instanceof Dv)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(s=this._perfMon)===null||s===void 0||s.stop()}hasListeners(){return this._size>0}},u(x1,"Emitter"),x1);const CDe=u(()=>new cD,"createEventDeliveryQueue"),cee=class cee{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};u(cee,"EventDeliveryQueuePrivate");let cD=cee;const uee=class uee extends V{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Ai,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}};u(uee,"PauseableEmitter");let Id=uee;const hee=class hee extends Id{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}};u(hee,"DebounceEmitter");let uD=hee;const gee=class gee extends V{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}};u(gee,"MicrotaskEmitter");let JV=gee;const fee=class fee{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new V({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),He(ll(u(()=>{this.hasListeners&&this.unhook(t);const i=this.events.indexOf(t);this.events.splice(i,1)},"dispose")))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}};u(fee,"EventMultiplexer");let QV=fee;const pee=class pee{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}};u(pee,"EventBufferer");let Vy=pee;const mee=class mee{constructor(){this.listening=!1,this.inputEvent=Ce.None,this.inputEventListener=G.None,this.emitter=new V({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};u(mee,"Relay");let hD=mee;const B1e=Object.freeze(function(o,e){const t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ze;(function(o){function e(t){return t===o.None||t===o.Cancelled||t instanceof wm?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}u(e,"isCancellationToken"),o.isCancellationToken=e,o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ce.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:B1e})})(Ze||(Ze={}));const bee=class bee{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?B1e:(this._emitter||(this._emitter=new V),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};u(bee,"MutableToken");let wm=bee;var T1;let En=(T1=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new wm),this._token}cancel(){this._token?this._token instanceof wm&&this._token.cancel():this._token=Ze.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof wm&&this._token.dispose():this._token=Ze.None}},u(T1,"CancellationTokenSource"),T1);const _ee=class _ee{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}};u(_ee,"KeyCodeStrMap");let Wy=_ee;const Dk=new Wy,e5=new Wy,t5=new Wy,U1e=new Array(230),SDe=Object.create(null),xDe=Object.create(null),mZ=[];for(let o=0;o<=193;o++)mZ[o]=-1;(function(){const o="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[1,1,"Hyper",0,o,0,o,o,o],[1,2,"Super",0,o,0,o,o,o],[1,3,"Fn",0,o,0,o,o,o],[1,4,"FnLock",0,o,0,o,o,o],[1,5,"Suspend",0,o,0,o,o,o],[1,6,"Resume",0,o,0,o,o,o],[1,7,"Turbo",0,o,0,o,o,o],[1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[1,9,"WakeUp",0,o,0,o,o,o],[0,10,"KeyA",31,"A",65,"VK_A",o,o],[0,11,"KeyB",32,"B",66,"VK_B",o,o],[0,12,"KeyC",33,"C",67,"VK_C",o,o],[0,13,"KeyD",34,"D",68,"VK_D",o,o],[0,14,"KeyE",35,"E",69,"VK_E",o,o],[0,15,"KeyF",36,"F",70,"VK_F",o,o],[0,16,"KeyG",37,"G",71,"VK_G",o,o],[0,17,"KeyH",38,"H",72,"VK_H",o,o],[0,18,"KeyI",39,"I",73,"VK_I",o,o],[0,19,"KeyJ",40,"J",74,"VK_J",o,o],[0,20,"KeyK",41,"K",75,"VK_K",o,o],[0,21,"KeyL",42,"L",76,"VK_L",o,o],[0,22,"KeyM",43,"M",77,"VK_M",o,o],[0,23,"KeyN",44,"N",78,"VK_N",o,o],[0,24,"KeyO",45,"O",79,"VK_O",o,o],[0,25,"KeyP",46,"P",80,"VK_P",o,o],[0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[0,27,"KeyR",48,"R",82,"VK_R",o,o],[0,28,"KeyS",49,"S",83,"VK_S",o,o],[0,29,"KeyT",50,"T",84,"VK_T",o,o],[0,30,"KeyU",51,"U",85,"VK_U",o,o],[0,31,"KeyV",52,"V",86,"VK_V",o,o],[0,32,"KeyW",53,"W",87,"VK_W",o,o],[0,33,"KeyX",54,"X",88,"VK_X",o,o],[0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[0,36,"Digit1",22,"1",49,"VK_1",o,o],[0,37,"Digit2",23,"2",50,"VK_2",o,o],[0,38,"Digit3",24,"3",51,"VK_3",o,o],[0,39,"Digit4",25,"4",52,"VK_4",o,o],[0,40,"Digit5",26,"5",53,"VK_5",o,o],[0,41,"Digit6",27,"6",54,"VK_6",o,o],[0,42,"Digit7",28,"7",55,"VK_7",o,o],[0,43,"Digit8",29,"8",56,"VK_8",o,o],[0,44,"Digit9",30,"9",57,"VK_9",o,o],[0,45,"Digit0",21,"0",48,"VK_0",o,o],[1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,o,0,o,o,o],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[1,64,"F1",59,"F1",112,"VK_F1",o,o],[1,65,"F2",60,"F2",113,"VK_F2",o,o],[1,66,"F3",61,"F3",114,"VK_F3",o,o],[1,67,"F4",62,"F4",115,"VK_F4",o,o],[1,68,"F5",63,"F5",116,"VK_F5",o,o],[1,69,"F6",64,"F6",117,"VK_F6",o,o],[1,70,"F7",65,"F7",118,"VK_F7",o,o],[1,71,"F8",66,"F8",119,"VK_F8",o,o],[1,72,"F9",67,"F9",120,"VK_F9",o,o],[1,73,"F10",68,"F10",121,"VK_F10",o,o],[1,74,"F11",69,"F11",122,"VK_F11",o,o],[1,75,"F12",70,"F12",123,"VK_F12",o,o],[1,76,"PrintScreen",0,o,0,o,o,o],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",o,o],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[1,80,"Home",14,"Home",36,"VK_HOME",o,o],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[1,83,"End",13,"End",35,"VK_END",o,o],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",o,o],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",o,o],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",o,o],[1,94,"NumpadEnter",3,o,0,o,o,o],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",o,o],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",o,o],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",o,o],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",o,o],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",o,o],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",o,o],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",o,o],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",o,o],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",o,o],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",o,o],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",o,o],[1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[1,108,"Power",0,o,0,o,o,o],[1,109,"NumpadEqual",0,o,0,o,o,o],[1,110,"F13",71,"F13",124,"VK_F13",o,o],[1,111,"F14",72,"F14",125,"VK_F14",o,o],[1,112,"F15",73,"F15",126,"VK_F15",o,o],[1,113,"F16",74,"F16",127,"VK_F16",o,o],[1,114,"F17",75,"F17",128,"VK_F17",o,o],[1,115,"F18",76,"F18",129,"VK_F18",o,o],[1,116,"F19",77,"F19",130,"VK_F19",o,o],[1,117,"F20",78,"F20",131,"VK_F20",o,o],[1,118,"F21",79,"F21",132,"VK_F21",o,o],[1,119,"F22",80,"F22",133,"VK_F22",o,o],[1,120,"F23",81,"F23",134,"VK_F23",o,o],[1,121,"F24",82,"F24",135,"VK_F24",o,o],[1,122,"Open",0,o,0,o,o,o],[1,123,"Help",0,o,0,o,o,o],[1,124,"Select",0,o,0,o,o,o],[1,125,"Again",0,o,0,o,o,o],[1,126,"Undo",0,o,0,o,o,o],[1,127,"Cut",0,o,0,o,o,o],[1,128,"Copy",0,o,0,o,o,o],[1,129,"Paste",0,o,0,o,o,o],[1,130,"Find",0,o,0,o,o,o],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",o,o],[1,136,"KanaMode",0,o,0,o,o,o],[0,137,"IntlYen",0,o,0,o,o,o],[1,138,"Convert",0,o,0,o,o,o],[1,139,"NonConvert",0,o,0,o,o,o],[1,140,"Lang1",0,o,0,o,o,o],[1,141,"Lang2",0,o,0,o,o,o],[1,142,"Lang3",0,o,0,o,o,o],[1,143,"Lang4",0,o,0,o,o,o],[1,144,"Lang5",0,o,0,o,o,o],[1,145,"Abort",0,o,0,o,o,o],[1,146,"Props",0,o,0,o,o,o],[1,147,"NumpadParenLeft",0,o,0,o,o,o],[1,148,"NumpadParenRight",0,o,0,o,o,o],[1,149,"NumpadBackspace",0,o,0,o,o,o],[1,150,"NumpadMemoryStore",0,o,0,o,o,o],[1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[1,152,"NumpadMemoryClear",0,o,0,o,o,o],[1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",o,o],[1,156,"NumpadClearEntry",0,o,0,o,o,o],[1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[1,0,o,6,"Alt",18,"VK_MENU",o,o],[1,0,o,57,"Meta",91,"VK_COMMAND",o,o],[1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[1,165,"BrightnessUp",0,o,0,o,o,o],[1,166,"BrightnessDown",0,o,0,o,o,o],[1,167,"MediaPlay",0,o,0,o,o,o],[1,168,"MediaRecord",0,o,0,o,o,o],[1,169,"MediaFastForward",0,o,0,o,o,o],[1,170,"MediaRewind",0,o,0,o,o,o],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",o,o],[1,174,"Eject",0,o,0,o,o,o],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[1,180,"SelectTask",0,o,0,o,o,o],[1,181,"LaunchScreenSaver",0,o,0,o,o,o],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[1,189,"ZoomToggle",0,o,0,o,o,o],[1,190,"MailReply",0,o,0,o,o,o],[1,191,"MailForward",0,o,0,o,o,o],[1,192,"MailSend",0,o,0,o,o,o],[1,0,o,114,"KeyInComposition",229,o,o,o],[1,0,o,116,"ABNT_C2",194,"VK_ABNT_C2",o,o],[1,0,o,96,"OEM_8",223,"VK_OEM_8",o,o],[1,0,o,0,o,0,"VK_KANA",o,o],[1,0,o,0,o,0,"VK_HANGUL",o,o],[1,0,o,0,o,0,"VK_JUNJA",o,o],[1,0,o,0,o,0,"VK_FINAL",o,o],[1,0,o,0,o,0,"VK_HANJA",o,o],[1,0,o,0,o,0,"VK_KANJI",o,o],[1,0,o,0,o,0,"VK_CONVERT",o,o],[1,0,o,0,o,0,"VK_NONCONVERT",o,o],[1,0,o,0,o,0,"VK_ACCEPT",o,o],[1,0,o,0,o,0,"VK_MODECHANGE",o,o],[1,0,o,0,o,0,"VK_SELECT",o,o],[1,0,o,0,o,0,"VK_PRINT",o,o],[1,0,o,0,o,0,"VK_EXECUTE",o,o],[1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[1,0,o,0,o,0,"VK_HELP",o,o],[1,0,o,0,o,0,"VK_APPS",o,o],[1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[1,0,o,0,o,0,"VK_PACKET",o,o],[1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[1,0,o,0,o,0,"VK_ATTN",o,o],[1,0,o,0,o,0,"VK_CRSEL",o,o],[1,0,o,0,o,0,"VK_EXSEL",o,o],[1,0,o,0,o,0,"VK_EREOF",o,o],[1,0,o,0,o,0,"VK_PLAY",o,o],[1,0,o,0,o,0,"VK_ZOOM",o,o],[1,0,o,0,o,0,"VK_NONAME",o,o],[1,0,o,0,o,0,"VK_PA1",o,o],[1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],n=[];for(const i of e){const[s,r,a,l,d,c,h,g,f]=i;if(n[r]||(n[r]=!0,SDe[a]=r,xDe[a.toLowerCase()]=r,s&&(mZ[r]=l)),!t[l]){if(t[l]=!0,!d)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);Dk.define(l,d),e5.define(l,g||d),t5.define(l,f||g||d)}c&&(U1e[c]=l)}})();var ad;(function(o){function e(a){return Dk.keyCodeToStr(a)}u(e,"toString"),o.toString=e;function t(a){return Dk.strToKeyCode(a)}u(t,"fromString"),o.fromString=t;function n(a){return e5.keyCodeToStr(a)}u(n,"toUserSettingsUS"),o.toUserSettingsUS=n;function i(a){return t5.keyCodeToStr(a)}u(i,"toUserSettingsGeneral"),o.toUserSettingsGeneral=i;function s(a){return e5.strToKeyCode(a)||t5.strToKeyCode(a)}u(s,"fromUserSettings"),o.fromUserSettings=s;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Dk.keyCodeToStr(a)}u(r,"toElectronAccelerator"),o.toElectronAccelerator=r})(ad||(ad={}));function In(o,e){const t=(e&65535)<<16>>>0;return(o|t)>>>0}u(In,"KeyChord");let Cm;if(typeof vr.vscode<"u"&&typeof vr.vscode.process<"u"){const o=vr.vscode.process;Cm={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"?Cm={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Cm={get platform(){return Si?"win32":ot?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const gD=Cm.cwd,TDe=Cm.env,LDe=Cm.platform,EDe=65,kDe=97,DDe=90,MDe=122,qc=46,Gi=47,Ys=92,Jd=58,ADe=63,vee=class vee extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${s} ${i} of type ${t}`;r+=`. Received type ${typeof n}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}};u(vee,"ErrorInvalidArgType");let fD=vee;function IDe(o,e){if(o===null||typeof o!="object")throw new fD(e,"Object",o)}u(IDe,"validateObject");function ei(o,e){if(typeof o!="string")throw new fD(e,"string",o)}u(ei,"validateString");const $u=LDe==="win32";function xt(o){return o===Gi||o===Ys}u(xt,"isPathSeparator$1");function n5(o){return o===Gi}u(n5,"isPosixPathSeparator");function Qd(o){return o>=EDe&&o<=DDe||o>=kDe&&o<=MDe}u(Qd,"isWindowsDeviceRoot");function pD(o,e,t,n){let i="",s=0,r=-1,a=0,l=0;for(let d=0;d<=o.length;++d){if(d<o.length)l=o.charCodeAt(d);else{if(n(l))break;l=Gi}if(n(l)){if(!(r===d-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==qc||i.charCodeAt(i.length-2)!==qc){if(i.length>2){const c=i.lastIndexOf(t);c===-1?(i="",s=0):(i=i.slice(0,c),s=i.length-1-i.lastIndexOf(t)),r=d,a=0;continue}else if(i.length!==0){i="",s=0,r=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${o.slice(r+1,d)}`:i=o.slice(r+1,d),s=d-r-1;r=d,a=0}else l===qc&&a!==-1?++a:a=-1}return i}u(pD,"normalizeString");function z1e(o,e){IDe(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${o}${n}`:n}u(z1e,"_format");const Ws={resolve(...o){let e="",t="",n=!1;for(let i=o.length-1;i>=-1;i--){let s;if(i>=0){if(s=o[i],ei(s,"path"),s.length===0)continue}else e.length===0?s=gD():(s=TDe[`=${e}`]||gD(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Ys)&&(s=`${e}\\`));const r=s.length;let a=0,l="",d=!1;const c=s.charCodeAt(0);if(r===1)xt(c)&&(a=1,d=!0);else if(xt(c))if(d=!0,xt(s.charCodeAt(1))){let h=2,g=h;for(;h<r&&!xt(s.charCodeAt(h));)h++;if(h<r&&h!==g){const f=s.slice(g,h);for(g=h;h<r&&xt(s.charCodeAt(h));)h++;if(h<r&&h!==g){for(g=h;h<r&&!xt(s.charCodeAt(h));)h++;(h===r||h!==g)&&(l=`\\\\${f}\\${s.slice(g,h)}`,a=h)}}}else a=1;else Qd(c)&&s.charCodeAt(1)===Jd&&(l=s.slice(0,2),a=2,r>2&&xt(s.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=pD(t,!n,"\\",xt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){ei(o,"path");const e=o.length;if(e===0)return".";let t=0,n,i=!1;const s=o.charCodeAt(0);if(e===1)return n5(s)?"\\":o;if(xt(s))if(i=!0,xt(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!xt(o.charCodeAt(a));)a++;if(a<e&&a!==l){const d=o.slice(l,a);for(l=a;a<e&&xt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!xt(o.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${o.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${o.slice(l,a)}`,t=a)}}}else t=1;else Qd(s)&&o.charCodeAt(1)===Jd&&(n=o.slice(0,2),t=2,e>2&&xt(o.charCodeAt(2))&&(i=!0,t=3));let r=t<e?pD(o.slice(t),!i,"\\",xt):"";return r.length===0&&!i&&(r="."),r.length>0&&xt(o.charCodeAt(e-1))&&(r+="\\"),n===void 0?i?`\\${r}`:r:i?`${n}\\${r}`:`${n}${r}`},isAbsolute(o){ei(o,"path");const e=o.length;if(e===0)return!1;const t=o.charCodeAt(0);return xt(t)||e>2&&Qd(t)&&o.charCodeAt(1)===Jd&&xt(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let s=0;s<o.length;++s){const r=o[s];ei(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&xt(t.charCodeAt(0))){++i;const s=t.length;s>1&&xt(t.charCodeAt(1))&&(++i,s>2&&(xt(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&xt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Ws.normalize(e)},relative(o,e){if(ei(o,"from"),ei(e,"to"),o===e)return"";const t=Ws.resolve(o),n=Ws.resolve(e);if(t===n||(o=t.toLowerCase(),e=n.toLowerCase(),o===e))return"";let i=0;for(;i<o.length&&o.charCodeAt(i)===Ys;)i++;let s=o.length;for(;s-1>i&&o.charCodeAt(s-1)===Ys;)s--;const r=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===Ys;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Ys;)l--;const d=l-a,c=r<d?r:d;let h=-1,g=0;for(;g<c;g++){const p=o.charCodeAt(i+g);if(p!==e.charCodeAt(a+g))break;p===Ys&&(h=g)}if(g!==c){if(h===-1)return n}else{if(d>c){if(e.charCodeAt(a+g)===Ys)return n.slice(a+g+1);if(g===2)return n.slice(a+g)}r>c&&(o.charCodeAt(i+g)===Ys?h=g:g===2&&(h=3)),h===-1&&(h=0)}let f="";for(g=i+h+1;g<=s;++g)(g===s||o.charCodeAt(g)===Ys)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Ys&&++a,n.slice(a,l))},toNamespacedPath(o){if(typeof o!="string"||o.length===0)return o;const e=Ws.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===Ys){if(e.charCodeAt(1)===Ys){const t=e.charCodeAt(2);if(t!==ADe&&t!==qc)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Qd(e.charCodeAt(0))&&e.charCodeAt(1)===Jd&&e.charCodeAt(2)===Ys)return`\\\\?\\${e}`;return o},dirname(o){ei(o,"path");const e=o.length;if(e===0)return".";let t=-1,n=0;const i=o.charCodeAt(0);if(e===1)return xt(i)?o:".";if(xt(i)){if(t=n=1,xt(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!xt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&xt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!xt(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=n=a+1)}}}}else Qd(i)&&o.charCodeAt(1)===Jd&&(t=e>2&&xt(o.charCodeAt(2))?3:2,n=t);let s=-1,r=!0;for(let a=e-1;a>=n;--a)if(xt(o.charCodeAt(a))){if(!r){s=a;break}}else r=!1;if(s===-1){if(t===-1)return".";s=t}return o.slice(0,s)},basename(o,e){e!==void 0&&ei(e,"ext"),ei(o,"path");let t=0,n=-1,i=!0,s;if(o.length>=2&&Qd(o.charCodeAt(0))&&o.charCodeAt(1)===Jd&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=t;--s){const l=o.charCodeAt(s);if(xt(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=t;--s)if(xt(o.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){ei(o,"path");let e=0,t=-1,n=0,i=-1,s=!0,r=0;o.length>=2&&o.charCodeAt(1)===Jd&&Qd(o.charCodeAt(0))&&(e=n=2);for(let a=o.length-1;a>=e;--a){const l=o.charCodeAt(a);if(xt(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===qc?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===n+1?"":o.slice(t,i)},format:z1e.bind(null,"\\"),parse(o){ei(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.length;let n=0,i=o.charCodeAt(0);if(t===1)return xt(i)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(xt(i)){if(n=1,xt(o.charCodeAt(1))){let h=2,g=h;for(;h<t&&!xt(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&xt(o.charCodeAt(h));)h++;if(h<t&&h!==g){for(g=h;h<t&&!xt(o.charCodeAt(h));)h++;h===t?n=h:h!==g&&(n=h+1)}}}}else if(Qd(i)&&o.charCodeAt(1)===Jd){if(t<=2)return e.root=e.dir=o,e;if(n=2,xt(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;n=3}}n>0&&(e.root=o.slice(0,n));let s=-1,r=n,a=-1,l=!0,d=o.length-1,c=0;for(;d>=n;--d){if(i=o.charCodeAt(d),xt(i)){if(!l){r=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===qc?s===-1?s=d:c!==1&&(c=1):s!==-1&&(c=-1)}return a!==-1&&(s===-1||c===0||c===1&&s===a-1&&s===r+1?e.base=e.name=o.slice(r,a):(e.name=o.slice(r,s),e.base=o.slice(r,a),e.ext=o.slice(s,a))),r>0&&r!==n?e.dir=o.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},NDe=(()=>{if($u){const o=/\\/g;return()=>{const e=gD().replace(o,"/");return e.slice(e.indexOf("/"))}}return()=>gD()})(),Mn={resolve(...o){let e="",t=!1;for(let n=o.length-1;n>=-1&&!t;n--){const i=n>=0?o[n]:NDe();ei(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Gi)}return e=pD(e,!t,"/",n5),t?`/${e}`:e.length>0?e:"."},normalize(o){if(ei(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===Gi,t=o.charCodeAt(o.length-1)===Gi;return o=pD(o,!e,"/",n5),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return ei(o,"path"),o.length>0&&o.charCodeAt(0)===Gi},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){const n=o[t];ei(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Mn.normalize(e)},relative(o,e){if(ei(o,"from"),ei(e,"to"),o===e||(o=Mn.resolve(o),e=Mn.resolve(e),o===e))return"";const t=1,n=o.length,i=n-t,s=1,r=e.length-s,a=i<r?i:r;let l=-1,d=0;for(;d<a;d++){const h=o.charCodeAt(t+d);if(h!==e.charCodeAt(s+d))break;h===Gi&&(l=d)}if(d===a)if(r>a){if(e.charCodeAt(s+d)===Gi)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else i>a&&(o.charCodeAt(t+d)===Gi?l=d:d===0&&(l=0));let c="";for(d=t+l+1;d<=n;++d)(d===n||o.charCodeAt(d)===Gi)&&(c+=c.length===0?"..":"/..");return`${c}${e.slice(s+l)}`},toNamespacedPath(o){return o},dirname(o){if(ei(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===Gi;let t=-1,n=!0;for(let i=o.length-1;i>=1;--i)if(o.charCodeAt(i)===Gi){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&ei(e,"ext"),ei(o,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=0;--s){const l=o.charCodeAt(s);if(l===Gi){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=s):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===Gi){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":o.slice(t,n)},extname(o){ei(o,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let r=o.length-1;r>=0;--r){const a=o.charCodeAt(r);if(a===Gi){if(!i){t=r+1;break}continue}n===-1&&(i=!1,n=r+1),a===qc?e===-1?e=r:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":o.slice(e,n)},format:z1e.bind(null,"/"),parse(o){ei(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.charCodeAt(0)===Gi;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,r=-1,a=!0,l=o.length-1,d=0;for(;l>=n;--l){const c=o.charCodeAt(l);if(c===Gi){if(!a){s=l+1;break}continue}r===-1&&(a=!1,r=l+1),c===qc?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(r!==-1){const c=s===0&&t?1:s;i===-1||d===0||d===1&&i===r-1&&i===s+1?e.base=e.name=o.slice(c,r):(e.name=o.slice(c,i),e.base=o.slice(c,r),e.ext=o.slice(i,r))}return s>0?e.dir=o.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Mn.win32=Ws.win32=Ws;Mn.posix=Ws.posix=Mn;const G1e=$u?Ws.normalize:Mn.normalize,RDe=$u?Ws.resolve:Mn.resolve,PDe=$u?Ws.relative:Mn.relative,j1e=$u?Ws.dirname:Mn.dirname,Yc=$u?Ws.basename:Mn.basename,FDe=$u?Ws.extname:Mn.extname,ua=$u?Ws.sep:Mn.sep,ODe=/^\w[\w\d+.-]*$/,HDe=/^\//,VDe=/^\/\//;function WDe(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!ODe.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!HDe.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(VDe.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}u(WDe,"_validateUri");function BDe(o,e){return!o&&!e?"file":o}u(BDe,"_schemeFix");function UDe(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==sa&&(e=sa+e):e=sa;break}return e}u(UDe,"_referenceResolution");const vn="",sa="/",zDe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Up=class Up{static isUri(e){return e instanceof Up?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,i,s,r=!1){typeof e=="object"?(this.scheme=e.scheme||vn,this.authority=e.authority||vn,this.path=e.path||vn,this.query=e.query||vn,this.fragment=e.fragment||vn):(this.scheme=BDe(e,r),this.authority=t||vn,this.path=UDe(this.scheme,n||vn),this.query=i||vn,this.fragment=s||vn,WDe(this,r))}get fsPath(){return mD(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=vn),n===void 0?n=this.authority:n===null&&(n=vn),i===void 0?i=this.path:i===null&&(i=vn),s===void 0?s=this.query:s===null&&(s=vn),r===void 0?r=this.fragment:r===null&&(r=vn),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&r===this.fragment?this:new Of(t,n,i,s,r)}static parse(e,t=!1){const n=zDe.exec(e);return n?new Of(n[2]||vn,yE(n[4]||vn),yE(n[5]||vn),yE(n[7]||vn),yE(n[9]||vn),t):new Of(vn,vn,vn,vn,vn)}static file(e){let t=vn;if(Si&&(e=e.replace(/\\/g,sa)),e[0]===sa&&e[1]===sa){const n=e.indexOf(sa,2);n===-1?(t=e.substring(2),e=sa):(t=e.substring(2,n),e=e.substring(n)||sa)}return new Of("file",t,e,vn,vn)}static from(e,t){return new Of(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Si&&e.scheme==="file"?n=Up.file(Ws.join(mD(e,!0),...t)).path:n=Mn.join(e.path,...t),e.with({path:n})}toString(e=!1){return i5(this,e)}toJSON(){return this}static revive(e){var t,n;if(e){if(e instanceof Up)return e;{const i=new Of(e);return i._formatted=(t=e.external)!==null&&t!==void 0?t:null,i._fsPath=e._sep===K1e&&(n=e.fsPath)!==null&&n!==void 0?n:null,i}}else return e}};u(Up,"URI");let Ae=Up;const K1e=Si?1:void 0;var L1;let Of=(L1=class extends Ae{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=mD(this,!1)),this._fsPath}toString(e=!1){return e?i5(this,!0):(this._formatted||(this._formatted=i5(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=K1e),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},u(L1,"Uri"),L1);const $1e={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Pve(o,e,t){let n,i=-1;for(let s=0;s<o.length;s++){const r=o.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)i!==-1&&(n+=encodeURIComponent(o.substring(i,s)),i=-1),n!==void 0&&(n+=o.charAt(s));else{n===void 0&&(n=o.substr(0,s));const a=$1e[r];a!==void 0?(i!==-1&&(n+=encodeURIComponent(o.substring(i,s)),i=-1),n+=a):i===-1&&(i=s)}}return i!==-1&&(n+=encodeURIComponent(o.substring(i))),n!==void 0?n:o}u(Pve,"encodeURIComponentFast");function GDe(o){let e;for(let t=0;t<o.length;t++){const n=o.charCodeAt(t);n===35||n===63?(e===void 0&&(e=o.substr(0,t)),e+=$1e[n]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}u(GDe,"encodeURIComponentMinimal");function mD(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,Si&&(t=t.replace(/\//g,"\\")),t}u(mD,"uriToFsPath");function i5(o,e){const t=e?GDe:Pve;let n="",{scheme:i,authority:s,path:r,query:a,fragment:l}=o;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=sa,n+=sa),s){let d=s.indexOf("@");if(d!==-1){const c=s.substr(0,d);s=s.substr(d+1),d=c.lastIndexOf(":"),d===-1?n+=t(c,!1,!1):(n+=t(c.substr(0,d),!1,!1),n+=":",n+=t(c.substr(d+1),!1,!0)),n+="@"}s=s.toLowerCase(),d=s.lastIndexOf(":"),d===-1?n+=t(s,!1,!0):(n+=t(s.substr(0,d),!1,!0),n+=s.substr(d))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const d=r.charCodeAt(1);d>=65&&d<=90&&(r=`/${String.fromCharCode(d+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const d=r.charCodeAt(0);d>=65&&d<=90&&(r=`${String.fromCharCode(d+32)}:${r.substr(2)}`)}n+=t(r,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:Pve(l,!1,!1)),n}u(i5,"_asFormatted");function q1e(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+q1e(o.substr(3)):o}}u(q1e,"decodeURIComponentGraceful");const Fve=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function yE(o){return o.match(Fve)?o.replace(Fve,e=>q1e(e)):o}u(yE,"percentDecode");var na;let W=(na=class{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new na(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return na.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return na.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return na.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const s=e.column|0,r=t.column|0;return s-r}return n-i}clone(){return new na(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new na(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}},u(na,"Position"),na);var Dn;let L=(Dn=class{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return Dn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Dn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Dn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Dn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Dn.plusRange(this,e)}static plusRange(e,t){let n,i,s,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new Dn(n,i,s,r)}intersectRanges(e){return Dn.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,c=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>d?(s=d,r=c):s===d&&(r=Math.min(r,c)),n>s||n===s&&i>r?null:new Dn(n,i,s,r)}equalsRange(e){return Dn.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Dn.getEndPosition(this)}static getEndPosition(e){return new W(e.endLineNumber,e.endColumn)}getStartPosition(){return Dn.getStartPosition(this)}static getStartPosition(e){return new W(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Dn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Dn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Dn.collapseToStart(this)}static collapseToStart(e){return new Dn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Dn.collapseToEnd(this)}static collapseToEnd(e){return new Dn(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Dn(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Dn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Dn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,r=t.startLineNumber|0;if(s===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const d=e.endLineNumber|0,c=t.endLineNumber|0;if(d===c){const h=e.endColumn|0,g=t.endColumn|0;return h-g}return d-c}return a-l}return s-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},u(Dn,"Range"),Dn);var ms;let xe=(ms=class extends L{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return ms.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new ms(this.startLineNumber,this.startColumn,e,t):new ms(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new W(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new W(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new ms(e,t,this.endLineNumber,this.endColumn):new ms(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new ms(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new ms(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new ms(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new ms(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new ms(e,t,n,i):new ms(n,i,e,t)}},u(ms,"Selection"),ms);const s5=Object.create(null);function x(o,e){if(rs(e)){const t=s5[e];if(t===void 0)throw new Error(`${o} references an unknown codicon: ${e}`);e=t}return s5[o]=e,{id:o}}u(x,"register$1");function Y1e(){return s5}u(Y1e,"getCodiconFontCharacters");const ue={add:x("add",6e4),plus:x("plus",6e4),gistNew:x("gist-new",6e4),repoCreate:x("repo-create",6e4),lightbulb:x("lightbulb",60001),lightBulb:x("light-bulb",60001),repo:x("repo",60002),repoDelete:x("repo-delete",60002),gistFork:x("gist-fork",60003),repoForked:x("repo-forked",60003),gitPullRequest:x("git-pull-request",60004),gitPullRequestAbandoned:x("git-pull-request-abandoned",60004),recordKeys:x("record-keys",60005),keyboard:x("keyboard",60005),tag:x("tag",60006),tagAdd:x("tag-add",60006),tagRemove:x("tag-remove",60006),gitPullRequestLabel:x("git-pull-request-label",60006),person:x("person",60007),personFollow:x("person-follow",60007),personOutline:x("person-outline",60007),personFilled:x("person-filled",60007),gitBranch:x("git-branch",60008),gitBranchCreate:x("git-branch-create",60008),gitBranchDelete:x("git-branch-delete",60008),sourceControl:x("source-control",60008),mirror:x("mirror",60009),mirrorPublic:x("mirror-public",60009),star:x("star",60010),starAdd:x("star-add",60010),starDelete:x("star-delete",60010),starEmpty:x("star-empty",60010),comment:x("comment",60011),commentAdd:x("comment-add",60011),alert:x("alert",60012),warning:x("warning",60012),search:x("search",60013),searchSave:x("search-save",60013),logOut:x("log-out",60014),signOut:x("sign-out",60014),logIn:x("log-in",60015),signIn:x("sign-in",60015),eye:x("eye",60016),eyeUnwatch:x("eye-unwatch",60016),eyeWatch:x("eye-watch",60016),circleFilled:x("circle-filled",60017),primitiveDot:x("primitive-dot",60017),closeDirty:x("close-dirty",60017),debugBreakpoint:x("debug-breakpoint",60017),debugBreakpointDisabled:x("debug-breakpoint-disabled",60017),debugHint:x("debug-hint",60017),primitiveSquare:x("primitive-square",60018),edit:x("edit",60019),pencil:x("pencil",60019),info:x("info",60020),issueOpened:x("issue-opened",60020),gistPrivate:x("gist-private",60021),gitForkPrivate:x("git-fork-private",60021),lock:x("lock",60021),mirrorPrivate:x("mirror-private",60021),close:x("close",60022),removeClose:x("remove-close",60022),x:x("x",60022),repoSync:x("repo-sync",60023),sync:x("sync",60023),clone:x("clone",60024),desktopDownload:x("desktop-download",60024),beaker:x("beaker",60025),microscope:x("microscope",60025),vm:x("vm",60026),deviceDesktop:x("device-desktop",60026),file:x("file",60027),fileText:x("file-text",60027),more:x("more",60028),ellipsis:x("ellipsis",60028),kebabHorizontal:x("kebab-horizontal",60028),mailReply:x("mail-reply",60029),reply:x("reply",60029),organization:x("organization",60030),organizationFilled:x("organization-filled",60030),organizationOutline:x("organization-outline",60030),newFile:x("new-file",60031),fileAdd:x("file-add",60031),newFolder:x("new-folder",60032),fileDirectoryCreate:x("file-directory-create",60032),trash:x("trash",60033),trashcan:x("trashcan",60033),history:x("history",60034),clock:x("clock",60034),folder:x("folder",60035),fileDirectory:x("file-directory",60035),symbolFolder:x("symbol-folder",60035),logoGithub:x("logo-github",60036),markGithub:x("mark-github",60036),github:x("github",60036),terminal:x("terminal",60037),console:x("console",60037),repl:x("repl",60037),zap:x("zap",60038),symbolEvent:x("symbol-event",60038),error:x("error",60039),stop:x("stop",60039),variable:x("variable",60040),symbolVariable:x("symbol-variable",60040),array:x("array",60042),symbolArray:x("symbol-array",60042),symbolModule:x("symbol-module",60043),symbolPackage:x("symbol-package",60043),symbolNamespace:x("symbol-namespace",60043),symbolObject:x("symbol-object",60043),symbolMethod:x("symbol-method",60044),symbolFunction:x("symbol-function",60044),symbolConstructor:x("symbol-constructor",60044),symbolBoolean:x("symbol-boolean",60047),symbolNull:x("symbol-null",60047),symbolNumeric:x("symbol-numeric",60048),symbolNumber:x("symbol-number",60048),symbolStructure:x("symbol-structure",60049),symbolStruct:x("symbol-struct",60049),symbolParameter:x("symbol-parameter",60050),symbolTypeParameter:x("symbol-type-parameter",60050),symbolKey:x("symbol-key",60051),symbolText:x("symbol-text",60051),symbolReference:x("symbol-reference",60052),goToFile:x("go-to-file",60052),symbolEnum:x("symbol-enum",60053),symbolValue:x("symbol-value",60053),symbolRuler:x("symbol-ruler",60054),symbolUnit:x("symbol-unit",60054),activateBreakpoints:x("activate-breakpoints",60055),archive:x("archive",60056),arrowBoth:x("arrow-both",60057),arrowDown:x("arrow-down",60058),arrowLeft:x("arrow-left",60059),arrowRight:x("arrow-right",60060),arrowSmallDown:x("arrow-small-down",60061),arrowSmallLeft:x("arrow-small-left",60062),arrowSmallRight:x("arrow-small-right",60063),arrowSmallUp:x("arrow-small-up",60064),arrowUp:x("arrow-up",60065),bell:x("bell",60066),bold:x("bold",60067),book:x("book",60068),bookmark:x("bookmark",60069),debugBreakpointConditionalUnverified:x("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:x("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:x("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:x("debug-breakpoint-data-unverified",60072),debugBreakpointData:x("debug-breakpoint-data",60073),debugBreakpointDataDisabled:x("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:x("debug-breakpoint-log-unverified",60074),debugBreakpointLog:x("debug-breakpoint-log",60075),debugBreakpointLogDisabled:x("debug-breakpoint-log-disabled",60075),briefcase:x("briefcase",60076),broadcast:x("broadcast",60077),browser:x("browser",60078),bug:x("bug",60079),calendar:x("calendar",60080),caseSensitive:x("case-sensitive",60081),check:x("check",60082),checklist:x("checklist",60083),chevronDown:x("chevron-down",60084),dropDownButton:x("drop-down-button",60084),chevronLeft:x("chevron-left",60085),chevronRight:x("chevron-right",60086),chevronUp:x("chevron-up",60087),chromeClose:x("chrome-close",60088),chromeMaximize:x("chrome-maximize",60089),chromeMinimize:x("chrome-minimize",60090),chromeRestore:x("chrome-restore",60091),circle:x("circle",60092),circleOutline:x("circle-outline",60092),debugBreakpointUnverified:x("debug-breakpoint-unverified",60092),circleSlash:x("circle-slash",60093),circuitBoard:x("circuit-board",60094),clearAll:x("clear-all",60095),clippy:x("clippy",60096),closeAll:x("close-all",60097),cloudDownload:x("cloud-download",60098),cloudUpload:x("cloud-upload",60099),code:x("code",60100),collapseAll:x("collapse-all",60101),colorMode:x("color-mode",60102),commentDiscussion:x("comment-discussion",60103),compareChanges:x("compare-changes",60157),creditCard:x("credit-card",60105),dash:x("dash",60108),dashboard:x("dashboard",60109),database:x("database",60110),debugContinue:x("debug-continue",60111),debugDisconnect:x("debug-disconnect",60112),debugPause:x("debug-pause",60113),debugRestart:x("debug-restart",60114),debugStart:x("debug-start",60115),debugStepInto:x("debug-step-into",60116),debugStepOut:x("debug-step-out",60117),debugStepOver:x("debug-step-over",60118),debugStop:x("debug-stop",60119),debug:x("debug",60120),deviceCameraVideo:x("device-camera-video",60121),deviceCamera:x("device-camera",60122),deviceMobile:x("device-mobile",60123),diffAdded:x("diff-added",60124),diffIgnored:x("diff-ignored",60125),diffModified:x("diff-modified",60126),diffRemoved:x("diff-removed",60127),diffRenamed:x("diff-renamed",60128),diff:x("diff",60129),discard:x("discard",60130),editorLayout:x("editor-layout",60131),emptyWindow:x("empty-window",60132),exclude:x("exclude",60133),extensions:x("extensions",60134),eyeClosed:x("eye-closed",60135),fileBinary:x("file-binary",60136),fileCode:x("file-code",60137),fileMedia:x("file-media",60138),filePdf:x("file-pdf",60139),fileSubmodule:x("file-submodule",60140),fileSymlinkDirectory:x("file-symlink-directory",60141),fileSymlinkFile:x("file-symlink-file",60142),fileZip:x("file-zip",60143),files:x("files",60144),filter:x("filter",60145),flame:x("flame",60146),foldDown:x("fold-down",60147),foldUp:x("fold-up",60148),fold:x("fold",60149),folderActive:x("folder-active",60150),folderOpened:x("folder-opened",60151),gear:x("gear",60152),gift:x("gift",60153),gistSecret:x("gist-secret",60154),gist:x("gist",60155),gitCommit:x("git-commit",60156),gitCompare:x("git-compare",60157),gitMerge:x("git-merge",60158),githubAction:x("github-action",60159),githubAlt:x("github-alt",60160),globe:x("globe",60161),grabber:x("grabber",60162),graph:x("graph",60163),gripper:x("gripper",60164),heart:x("heart",60165),home:x("home",60166),horizontalRule:x("horizontal-rule",60167),hubot:x("hubot",60168),inbox:x("inbox",60169),issueClosed:x("issue-closed",60324),issueReopened:x("issue-reopened",60171),issues:x("issues",60172),italic:x("italic",60173),jersey:x("jersey",60174),json:x("json",60175),bracket:x("bracket",60175),kebabVertical:x("kebab-vertical",60176),key:x("key",60177),law:x("law",60178),lightbulbAutofix:x("lightbulb-autofix",60179),linkExternal:x("link-external",60180),link:x("link",60181),listOrdered:x("list-ordered",60182),listUnordered:x("list-unordered",60183),liveShare:x("live-share",60184),loading:x("loading",60185),location:x("location",60186),mailRead:x("mail-read",60187),mail:x("mail",60188),markdown:x("markdown",60189),megaphone:x("megaphone",60190),mention:x("mention",60191),milestone:x("milestone",60192),gitPullRequestMilestone:x("git-pull-request-milestone",60192),mortarBoard:x("mortar-board",60193),move:x("move",60194),multipleWindows:x("multiple-windows",60195),mute:x("mute",60196),noNewline:x("no-newline",60197),note:x("note",60198),octoface:x("octoface",60199),openPreview:x("open-preview",60200),package_:x("package",60201),paintcan:x("paintcan",60202),pin:x("pin",60203),play:x("play",60204),run:x("run",60204),plug:x("plug",60205),preserveCase:x("preserve-case",60206),preview:x("preview",60207),project:x("project",60208),pulse:x("pulse",60209),question:x("question",60210),quote:x("quote",60211),radioTower:x("radio-tower",60212),reactions:x("reactions",60213),references:x("references",60214),refresh:x("refresh",60215),regex:x("regex",60216),remoteExplorer:x("remote-explorer",60217),remote:x("remote",60218),remove:x("remove",60219),replaceAll:x("replace-all",60220),replace:x("replace",60221),repoClone:x("repo-clone",60222),repoForcePush:x("repo-force-push",60223),repoPull:x("repo-pull",60224),repoPush:x("repo-push",60225),report:x("report",60226),requestChanges:x("request-changes",60227),rocket:x("rocket",60228),rootFolderOpened:x("root-folder-opened",60229),rootFolder:x("root-folder",60230),rss:x("rss",60231),ruby:x("ruby",60232),saveAll:x("save-all",60233),saveAs:x("save-as",60234),save:x("save",60235),screenFull:x("screen-full",60236),screenNormal:x("screen-normal",60237),searchStop:x("search-stop",60238),server:x("server",60240),settingsGear:x("settings-gear",60241),settings:x("settings",60242),shield:x("shield",60243),smiley:x("smiley",60244),sortPrecedence:x("sort-precedence",60245),splitHorizontal:x("split-horizontal",60246),splitVertical:x("split-vertical",60247),squirrel:x("squirrel",60248),starFull:x("star-full",60249),starHalf:x("star-half",60250),symbolClass:x("symbol-class",60251),symbolColor:x("symbol-color",60252),symbolCustomColor:x("symbol-customcolor",60252),symbolConstant:x("symbol-constant",60253),symbolEnumMember:x("symbol-enum-member",60254),symbolField:x("symbol-field",60255),symbolFile:x("symbol-file",60256),symbolInterface:x("symbol-interface",60257),symbolKeyword:x("symbol-keyword",60258),symbolMisc:x("symbol-misc",60259),symbolOperator:x("symbol-operator",60260),symbolProperty:x("symbol-property",60261),wrench:x("wrench",60261),wrenchSubaction:x("wrench-subaction",60261),symbolSnippet:x("symbol-snippet",60262),tasklist:x("tasklist",60263),telescope:x("telescope",60264),textSize:x("text-size",60265),threeBars:x("three-bars",60266),thumbsdown:x("thumbsdown",60267),thumbsup:x("thumbsup",60268),tools:x("tools",60269),triangleDown:x("triangle-down",60270),triangleLeft:x("triangle-left",60271),triangleRight:x("triangle-right",60272),triangleUp:x("triangle-up",60273),twitter:x("twitter",60274),unfold:x("unfold",60275),unlock:x("unlock",60276),unmute:x("unmute",60277),unverified:x("unverified",60278),verified:x("verified",60279),versions:x("versions",60280),vmActive:x("vm-active",60281),vmOutline:x("vm-outline",60282),vmRunning:x("vm-running",60283),watch:x("watch",60284),whitespace:x("whitespace",60285),wholeWord:x("whole-word",60286),window:x("window",60287),wordWrap:x("word-wrap",60288),zoomIn:x("zoom-in",60289),zoomOut:x("zoom-out",60290),listFilter:x("list-filter",60291),listFlat:x("list-flat",60292),listSelection:x("list-selection",60293),selection:x("selection",60293),listTree:x("list-tree",60294),debugBreakpointFunctionUnverified:x("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:x("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:x("debug-breakpoint-function-disabled",60296),debugStackframeActive:x("debug-stackframe-active",60297),circleSmallFilled:x("circle-small-filled",60298),debugStackframeDot:x("debug-stackframe-dot",60298),debugStackframe:x("debug-stackframe",60299),debugStackframeFocused:x("debug-stackframe-focused",60299),debugBreakpointUnsupported:x("debug-breakpoint-unsupported",60300),symbolString:x("symbol-string",60301),debugReverseContinue:x("debug-reverse-continue",60302),debugStepBack:x("debug-step-back",60303),debugRestartFrame:x("debug-restart-frame",60304),callIncoming:x("call-incoming",60306),callOutgoing:x("call-outgoing",60307),menu:x("menu",60308),expandAll:x("expand-all",60309),feedback:x("feedback",60310),gitPullRequestReviewer:x("git-pull-request-reviewer",60310),groupByRefType:x("group-by-ref-type",60311),ungroupByRefType:x("ungroup-by-ref-type",60312),account:x("account",60313),gitPullRequestAssignee:x("git-pull-request-assignee",60313),bellDot:x("bell-dot",60314),debugConsole:x("debug-console",60315),library:x("library",60316),output:x("output",60317),runAll:x("run-all",60318),syncIgnored:x("sync-ignored",60319),pinned:x("pinned",60320),githubInverted:x("github-inverted",60321),debugAlt:x("debug-alt",60305),serverProcess:x("server-process",60322),serverEnvironment:x("server-environment",60323),pass:x("pass",60324),stopCircle:x("stop-circle",60325),playCircle:x("play-circle",60326),record:x("record",60327),debugAltSmall:x("debug-alt-small",60328),vmConnect:x("vm-connect",60329),cloud:x("cloud",60330),merge:x("merge",60331),exportIcon:x("export",60332),graphLeft:x("graph-left",60333),magnet:x("magnet",60334),notebook:x("notebook",60335),redo:x("redo",60336),checkAll:x("check-all",60337),pinnedDirty:x("pinned-dirty",60338),passFilled:x("pass-filled",60339),circleLargeFilled:x("circle-large-filled",60340),circleLarge:x("circle-large",60341),circleLargeOutline:x("circle-large-outline",60341),combine:x("combine",60342),gather:x("gather",60342),table:x("table",60343),variableGroup:x("variable-group",60344),typeHierarchy:x("type-hierarchy",60345),typeHierarchySub:x("type-hierarchy-sub",60346),typeHierarchySuper:x("type-hierarchy-super",60347),gitPullRequestCreate:x("git-pull-request-create",60348),runAbove:x("run-above",60349),runBelow:x("run-below",60350),notebookTemplate:x("notebook-template",60351),debugRerun:x("debug-rerun",60352),workspaceTrusted:x("workspace-trusted",60353),workspaceUntrusted:x("workspace-untrusted",60354),workspaceUnspecified:x("workspace-unspecified",60355),terminalCmd:x("terminal-cmd",60356),terminalDebian:x("terminal-debian",60357),terminalLinux:x("terminal-linux",60358),terminalPowershell:x("terminal-powershell",60359),terminalTmux:x("terminal-tmux",60360),terminalUbuntu:x("terminal-ubuntu",60361),terminalBash:x("terminal-bash",60362),arrowSwap:x("arrow-swap",60363),copy:x("copy",60364),personAdd:x("person-add",60365),filterFilled:x("filter-filled",60366),wand:x("wand",60367),debugLineByLine:x("debug-line-by-line",60368),inspect:x("inspect",60369),layers:x("layers",60370),layersDot:x("layers-dot",60371),layersActive:x("layers-active",60372),compass:x("compass",60373),compassDot:x("compass-dot",60374),compassActive:x("compass-active",60375),azure:x("azure",60376),issueDraft:x("issue-draft",60377),gitPullRequestClosed:x("git-pull-request-closed",60378),gitPullRequestDraft:x("git-pull-request-draft",60379),debugAll:x("debug-all",60380),debugCoverage:x("debug-coverage",60381),runErrors:x("run-errors",60382),folderLibrary:x("folder-library",60383),debugContinueSmall:x("debug-continue-small",60384),beakerStop:x("beaker-stop",60385),graphLine:x("graph-line",60386),graphScatter:x("graph-scatter",60387),pieChart:x("pie-chart",60388),bracketDot:x("bracket-dot",60389),bracketError:x("bracket-error",60390),lockSmall:x("lock-small",60391),azureDevops:x("azure-devops",60392),verifiedFilled:x("verified-filled",60393),newLine:x("newline",60394),layout:x("layout",60395),layoutActivitybarLeft:x("layout-activitybar-left",60396),layoutActivitybarRight:x("layout-activitybar-right",60397),layoutPanelLeft:x("layout-panel-left",60398),layoutPanelCenter:x("layout-panel-center",60399),layoutPanelJustify:x("layout-panel-justify",60400),layoutPanelRight:x("layout-panel-right",60401),layoutPanel:x("layout-panel",60402),layoutSidebarLeft:x("layout-sidebar-left",60403),layoutSidebarRight:x("layout-sidebar-right",60404),layoutStatusbar:x("layout-statusbar",60405),layoutMenubar:x("layout-menubar",60406),layoutCentered:x("layout-centered",60407),layoutSidebarRightOff:x("layout-sidebar-right-off",60416),layoutPanelOff:x("layout-panel-off",60417),layoutSidebarLeftOff:x("layout-sidebar-left-off",60418),target:x("target",60408),indent:x("indent",60409),recordSmall:x("record-small",60410),errorSmall:x("error-small",60411),arrowCircleDown:x("arrow-circle-down",60412),arrowCircleLeft:x("arrow-circle-left",60413),arrowCircleRight:x("arrow-circle-right",60414),arrowCircleUp:x("arrow-circle-up",60415),heartFilled:x("heart-filled",60420),map:x("map",60421),mapFilled:x("map-filled",60422),circleSmall:x("circle-small",60423),bellSlash:x("bell-slash",60424),bellSlashDot:x("bell-slash-dot",60425),commentUnresolved:x("comment-unresolved",60426),gitPullRequestGoToChanges:x("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:x("git-pull-request-new-changes",60428),searchFuzzy:x("search-fuzzy",60429),commentDraft:x("comment-draft",60430),send:x("send",60431),sparkle:x("sparkle",60432),insert:x("insert",60433),mic:x("mic",60434),dialogError:x("dialog-error","error"),dialogWarning:x("dialog-warning","warning"),dialogInfo:x("dialog-info","info"),dialogClose:x("dialog-close","close"),treeItemExpanded:x("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:x("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:x("tree-filter-on-type-off","list-selection"),treeFilterClear:x("tree-filter-clear","close"),treeItemLoading:x("tree-item-loading","loading"),menuSelection:x("menu-selection","check"),menuSubmenu:x("menu-submenu","chevron-right"),menuBarMore:x("menubar-more","more"),scrollbarButtonLeft:x("scrollbar-button-left","triangle-left"),scrollbarButtonRight:x("scrollbar-button-right","triangle-right"),scrollbarButtonUp:x("scrollbar-button-up","triangle-up"),scrollbarButtonDown:x("scrollbar-button-down","triangle-down"),toolBarMore:x("toolbar-more","more"),quickInputBack:x("quick-input-back","arrow-left")};var o5=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},E1;let jDe=(E1=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),He(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const i=new r5(this,e,t);return this._factories.set(e,i),He(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}getOrCreate(e){return o5(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},u(E1,"TokenizationRegistry"),E1);const yee=class yee extends G{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return o5(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return o5(this,void 0,void 0,function*(){const e=yield this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}};u(yee,"TokenizationSupportFactoryData");let r5=yee;var k1;let By=(k1=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}},u(k1,"Token"),k1);const wee=class wee{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}};u(wee,"TokenizationResult");let Uy=wee;const Cee=class Cee{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}};u(Cee,"EncodedTokenizationResult");let Jm=Cee;var zy;(function(o){const e=new Map;e.set(0,ue.symbolMethod),e.set(1,ue.symbolFunction),e.set(2,ue.symbolConstructor),e.set(3,ue.symbolField),e.set(4,ue.symbolVariable),e.set(5,ue.symbolClass),e.set(6,ue.symbolStruct),e.set(7,ue.symbolInterface),e.set(8,ue.symbolModule),e.set(9,ue.symbolProperty),e.set(10,ue.symbolEvent),e.set(11,ue.symbolOperator),e.set(12,ue.symbolUnit),e.set(13,ue.symbolValue),e.set(15,ue.symbolEnum),e.set(14,ue.symbolConstant),e.set(15,ue.symbolEnum),e.set(16,ue.symbolEnumMember),e.set(17,ue.symbolKeyword),e.set(27,ue.symbolSnippet),e.set(18,ue.symbolText),e.set(19,ue.symbolColor),e.set(20,ue.symbolFile),e.set(21,ue.symbolReference),e.set(22,ue.symbolCustomColor),e.set(23,ue.symbolFolder),e.set(24,ue.symbolTypeParameter),e.set(25,ue.account),e.set(26,ue.issues);function t(s){let r=e.get(s);return r||(console.info("No codicon found for CompletionItemKind "+s),r=ue.symbolProperty),r}u(t,"toIcon"),o.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(s,r){let a=n.get(s);return typeof a>"u"&&!r&&(a=9),a}u(i,"fromString"),o.fromString=i})(zy||(zy={}));var Ld;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(Ld||(Ld={}));const See=class See{constructor(e,t,n,i){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=i}equals(e){return L.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}};u(See,"SelectedSuggestionInfo");let bD=See;var el;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(el||(el={}));var Gy;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(Gy||(Gy={}));function KDe(o){return o&&Ae.isUri(o.uri)&&L.isIRange(o.range)&&(L.isIRange(o.originSelectionRange)||L.isIRange(o.targetSelectionRange))}u(KDe,"isLocationLink");const $De={17:m("Array","array"),16:m("Boolean","boolean"),4:m("Class","class"),13:m("Constant","constant"),8:m("Constructor","constructor"),9:m("Enum","enumeration"),21:m("EnumMember","enumeration member"),23:m("Event","event"),7:m("Field","field"),0:m("File","file"),11:m("Function","function"),10:m("Interface","interface"),19:m("Key","key"),5:m("Method","method"),1:m("Module","module"),2:m("Namespace","namespace"),20:m("Null","null"),15:m("Number","number"),18:m("Object","object"),24:m("Operator","operator"),3:m("Package","package"),6:m("Property","property"),14:m("String","string"),22:m("Struct","struct"),25:m("TypeParameter","type parameter"),12:m("Variable","variable")};function qDe(o,e){return m("symbolAriaLabel","{0} ({1})",o,$De[e])}u(qDe,"getAriaLabelForSymbol");var _D;(function(o){const e=new Map;e.set(0,ue.symbolFile),e.set(1,ue.symbolModule),e.set(2,ue.symbolNamespace),e.set(3,ue.symbolPackage),e.set(4,ue.symbolClass),e.set(5,ue.symbolMethod),e.set(6,ue.symbolProperty),e.set(7,ue.symbolField),e.set(8,ue.symbolConstructor),e.set(9,ue.symbolEnum),e.set(10,ue.symbolInterface),e.set(11,ue.symbolFunction),e.set(12,ue.symbolVariable),e.set(13,ue.symbolConstant),e.set(14,ue.symbolString),e.set(15,ue.symbolNumber),e.set(16,ue.symbolBoolean),e.set(17,ue.symbolArray),e.set(18,ue.symbolObject),e.set(19,ue.symbolKey),e.set(20,ue.symbolNull),e.set(21,ue.symbolEnumMember),e.set(22,ue.symbolStruct),e.set(23,ue.symbolEvent),e.set(24,ue.symbolOperator),e.set(25,ue.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=ue.symbolProperty),i}u(t,"toIcon"),o.toIcon=t})(_D||(_D={}));const Eh=class Eh{static fromValue(e){switch(e){case"comment":return Eh.Comment;case"imports":return Eh.Imports;case"region":return Eh.Region}return new Eh(e)}constructor(e){this.value=e}};u(Eh,"FoldingRangeKind");let fo=Eh;fo.Comment=new fo("comment");fo.Imports=new fo("imports");fo.Region=new fo("region");var a5;(function(o){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}u(e,"is"),o.is=e})(a5||(a5={}));var vD;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(vD||(vD={}));const xee=class xee{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}};u(xee,"LazyTokenizationSupport");let l5=xee;const en=new jDe;var d5;(function(o){o[o.Unknown=0]="Unknown",o[o.Disabled=1]="Disabled",o[o.Enabled=2]="Enabled"})(d5||(d5={}));var c5;(function(o){o[o.Invoke=1]="Invoke",o[o.Auto=2]="Auto"})(c5||(c5={}));var u5;(function(o){o[o.None=0]="None",o[o.KeepWhitespace=1]="KeepWhitespace",o[o.InsertAsSnippet=4]="InsertAsSnippet"})(u5||(u5={}));var h5;(function(o){o[o.Method=0]="Method",o[o.Function=1]="Function",o[o.Constructor=2]="Constructor",o[o.Field=3]="Field",o[o.Variable=4]="Variable",o[o.Class=5]="Class",o[o.Struct=6]="Struct",o[o.Interface=7]="Interface",o[o.Module=8]="Module",o[o.Property=9]="Property",o[o.Event=10]="Event",o[o.Operator=11]="Operator",o[o.Unit=12]="Unit",o[o.Value=13]="Value",o[o.Constant=14]="Constant",o[o.Enum=15]="Enum",o[o.EnumMember=16]="EnumMember",o[o.Keyword=17]="Keyword",o[o.Text=18]="Text",o[o.Color=19]="Color",o[o.File=20]="File",o[o.Reference=21]="Reference",o[o.Customcolor=22]="Customcolor",o[o.Folder=23]="Folder",o[o.TypeParameter=24]="TypeParameter",o[o.User=25]="User",o[o.Issue=26]="Issue",o[o.Snippet=27]="Snippet"})(h5||(h5={}));var g5;(function(o){o[o.Deprecated=1]="Deprecated"})(g5||(g5={}));var f5;(function(o){o[o.Invoke=0]="Invoke",o[o.TriggerCharacter=1]="TriggerCharacter",o[o.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(f5||(f5={}));var p5;(function(o){o[o.EXACT=0]="EXACT",o[o.ABOVE=1]="ABOVE",o[o.BELOW=2]="BELOW"})(p5||(p5={}));var m5;(function(o){o[o.NotSet=0]="NotSet",o[o.ContentFlush=1]="ContentFlush",o[o.RecoverFromMarkers=2]="RecoverFromMarkers",o[o.Explicit=3]="Explicit",o[o.Paste=4]="Paste",o[o.Undo=5]="Undo",o[o.Redo=6]="Redo"})(m5||(m5={}));var b5;(function(o){o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(b5||(b5={}));var _5;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(_5||(_5={}));var v5;(function(o){o[o.None=0]="None",o[o.Keep=1]="Keep",o[o.Brackets=2]="Brackets",o[o.Advanced=3]="Advanced",o[o.Full=4]="Full"})(v5||(v5={}));var y5;(function(o){o[o.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",o[o.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",o[o.accessibilitySupport=2]="accessibilitySupport",o[o.accessibilityPageSize=3]="accessibilityPageSize",o[o.ariaLabel=4]="ariaLabel",o[o.ariaRequired=5]="ariaRequired",o[o.autoClosingBrackets=6]="autoClosingBrackets",o[o.screenReaderAnnounceInlineSuggestion=7]="screenReaderAnnounceInlineSuggestion",o[o.autoClosingDelete=8]="autoClosingDelete",o[o.autoClosingOvertype=9]="autoClosingOvertype",o[o.autoClosingQuotes=10]="autoClosingQuotes",o[o.autoIndent=11]="autoIndent",o[o.automaticLayout=12]="automaticLayout",o[o.autoSurround=13]="autoSurround",o[o.bracketPairColorization=14]="bracketPairColorization",o[o.guides=15]="guides",o[o.codeLens=16]="codeLens",o[o.codeLensFontFamily=17]="codeLensFontFamily",o[o.codeLensFontSize=18]="codeLensFontSize",o[o.colorDecorators=19]="colorDecorators",o[o.colorDecoratorsLimit=20]="colorDecoratorsLimit",o[o.columnSelection=21]="columnSelection",o[o.comments=22]="comments",o[o.contextmenu=23]="contextmenu",o[o.copyWithSyntaxHighlighting=24]="copyWithSyntaxHighlighting",o[o.cursorBlinking=25]="cursorBlinking",o[o.cursorSmoothCaretAnimation=26]="cursorSmoothCaretAnimation",o[o.cursorStyle=27]="cursorStyle",o[o.cursorSurroundingLines=28]="cursorSurroundingLines",o[o.cursorSurroundingLinesStyle=29]="cursorSurroundingLinesStyle",o[o.cursorWidth=30]="cursorWidth",o[o.disableLayerHinting=31]="disableLayerHinting",o[o.disableMonospaceOptimizations=32]="disableMonospaceOptimizations",o[o.domReadOnly=33]="domReadOnly",o[o.dragAndDrop=34]="dragAndDrop",o[o.dropIntoEditor=35]="dropIntoEditor",o[o.emptySelectionClipboard=36]="emptySelectionClipboard",o[o.experimentalWhitespaceRendering=37]="experimentalWhitespaceRendering",o[o.extraEditorClassName=38]="extraEditorClassName",o[o.fastScrollSensitivity=39]="fastScrollSensitivity",o[o.find=40]="find",o[o.fixedOverflowWidgets=41]="fixedOverflowWidgets",o[o.folding=42]="folding",o[o.foldingStrategy=43]="foldingStrategy",o[o.foldingHighlight=44]="foldingHighlight",o[o.foldingImportsByDefault=45]="foldingImportsByDefault",o[o.foldingMaximumRegions=46]="foldingMaximumRegions",o[o.unfoldOnClickAfterEndOfLine=47]="unfoldOnClickAfterEndOfLine",o[o.fontFamily=48]="fontFamily",o[o.fontInfo=49]="fontInfo",o[o.fontLigatures=50]="fontLigatures",o[o.fontSize=51]="fontSize",o[o.fontWeight=52]="fontWeight",o[o.fontVariations=53]="fontVariations",o[o.formatOnPaste=54]="formatOnPaste",o[o.formatOnType=55]="formatOnType",o[o.glyphMargin=56]="glyphMargin",o[o.gotoLocation=57]="gotoLocation",o[o.hideCursorInOverviewRuler=58]="hideCursorInOverviewRuler",o[o.hover=59]="hover",o[o.inDiffEditor=60]="inDiffEditor",o[o.inlineSuggest=61]="inlineSuggest",o[o.letterSpacing=62]="letterSpacing",o[o.lightbulb=63]="lightbulb",o[o.lineDecorationsWidth=64]="lineDecorationsWidth",o[o.lineHeight=65]="lineHeight",o[o.lineNumbers=66]="lineNumbers",o[o.lineNumbersMinChars=67]="lineNumbersMinChars",o[o.linkedEditing=68]="linkedEditing",o[o.links=69]="links",o[o.matchBrackets=70]="matchBrackets",o[o.minimap=71]="minimap",o[o.mouseStyle=72]="mouseStyle",o[o.mouseWheelScrollSensitivity=73]="mouseWheelScrollSensitivity",o[o.mouseWheelZoom=74]="mouseWheelZoom",o[o.multiCursorMergeOverlapping=75]="multiCursorMergeOverlapping",o[o.multiCursorModifier=76]="multiCursorModifier",o[o.multiCursorPaste=77]="multiCursorPaste",o[o.multiCursorLimit=78]="multiCursorLimit",o[o.occurrencesHighlight=79]="occurrencesHighlight",o[o.overviewRulerBorder=80]="overviewRulerBorder",o[o.overviewRulerLanes=81]="overviewRulerLanes",o[o.padding=82]="padding",o[o.pasteAs=83]="pasteAs",o[o.parameterHints=84]="parameterHints",o[o.peekWidgetDefaultFocus=85]="peekWidgetDefaultFocus",o[o.definitionLinkOpensInPeek=86]="definitionLinkOpensInPeek",o[o.quickSuggestions=87]="quickSuggestions",o[o.quickSuggestionsDelay=88]="quickSuggestionsDelay",o[o.readOnly=89]="readOnly",o[o.readOnlyMessage=90]="readOnlyMessage",o[o.renameOnType=91]="renameOnType",o[o.renderControlCharacters=92]="renderControlCharacters",o[o.renderFinalNewline=93]="renderFinalNewline",o[o.renderLineHighlight=94]="renderLineHighlight",o[o.renderLineHighlightOnlyWhenFocus=95]="renderLineHighlightOnlyWhenFocus",o[o.renderValidationDecorations=96]="renderValidationDecorations",o[o.renderWhitespace=97]="renderWhitespace",o[o.revealHorizontalRightPadding=98]="revealHorizontalRightPadding",o[o.roundedSelection=99]="roundedSelection",o[o.rulers=100]="rulers",o[o.scrollbar=101]="scrollbar",o[o.scrollBeyondLastColumn=102]="scrollBeyondLastColumn",o[o.scrollBeyondLastLine=103]="scrollBeyondLastLine",o[o.scrollPredominantAxis=104]="scrollPredominantAxis",o[o.selectionClipboard=105]="selectionClipboard",o[o.selectionHighlight=106]="selectionHighlight",o[o.selectOnLineNumbers=107]="selectOnLineNumbers",o[o.showFoldingControls=108]="showFoldingControls",o[o.showUnused=109]="showUnused",o[o.snippetSuggestions=110]="snippetSuggestions",o[o.smartSelect=111]="smartSelect",o[o.smoothScrolling=112]="smoothScrolling",o[o.stickyScroll=113]="stickyScroll",o[o.stickyTabStops=114]="stickyTabStops",o[o.stopRenderingLineAfter=115]="stopRenderingLineAfter",o[o.suggest=116]="suggest",o[o.suggestFontSize=117]="suggestFontSize",o[o.suggestLineHeight=118]="suggestLineHeight",o[o.suggestOnTriggerCharacters=119]="suggestOnTriggerCharacters",o[o.suggestSelection=120]="suggestSelection",o[o.tabCompletion=121]="tabCompletion",o[o.tabIndex=122]="tabIndex",o[o.unicodeHighlighting=123]="unicodeHighlighting",o[o.unusualLineTerminators=124]="unusualLineTerminators",o[o.useShadowDOM=125]="useShadowDOM",o[o.useTabStops=126]="useTabStops",o[o.wordBreak=127]="wordBreak",o[o.wordSeparators=128]="wordSeparators",o[o.wordWrap=129]="wordWrap",o[o.wordWrapBreakAfterCharacters=130]="wordWrapBreakAfterCharacters",o[o.wordWrapBreakBeforeCharacters=131]="wordWrapBreakBeforeCharacters",o[o.wordWrapColumn=132]="wordWrapColumn",o[o.wordWrapOverride1=133]="wordWrapOverride1",o[o.wordWrapOverride2=134]="wordWrapOverride2",o[o.wrappingIndent=135]="wrappingIndent",o[o.wrappingStrategy=136]="wrappingStrategy",o[o.showDeprecated=137]="showDeprecated",o[o.inlayHints=138]="inlayHints",o[o.editorClassName=139]="editorClassName",o[o.pixelRatio=140]="pixelRatio",o[o.tabFocusMode=141]="tabFocusMode",o[o.layoutInfo=142]="layoutInfo",o[o.wrappingInfo=143]="wrappingInfo",o[o.defaultColorDecorators=144]="defaultColorDecorators",o[o.colorDecoratorsActivatedOn=145]="colorDecoratorsActivatedOn",o[o.inlineCompletionsAccessibilityVerbose=146]="inlineCompletionsAccessibilityVerbose"})(y5||(y5={}));var w5;(function(o){o[o.TextDefined=0]="TextDefined",o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(w5||(w5={}));var C5;(function(o){o[o.LF=0]="LF",o[o.CRLF=1]="CRLF"})(C5||(C5={}));var S5;(function(o){o[o.Left=1]="Left",o[o.Right=2]="Right"})(S5||(S5={}));var x5;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(x5||(x5={}));var T5;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(T5||(T5={}));var L5;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(L5||(L5={}));var E5;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(E5||(E5={}));var k5;(function(o){o[o.DependsOnKbLayout=-1]="DependsOnKbLayout",o[o.Unknown=0]="Unknown",o[o.Backspace=1]="Backspace",o[o.Tab=2]="Tab",o[o.Enter=3]="Enter",o[o.Shift=4]="Shift",o[o.Ctrl=5]="Ctrl",o[o.Alt=6]="Alt",o[o.PauseBreak=7]="PauseBreak",o[o.CapsLock=8]="CapsLock",o[o.Escape=9]="Escape",o[o.Space=10]="Space",o[o.PageUp=11]="PageUp",o[o.PageDown=12]="PageDown",o[o.End=13]="End",o[o.Home=14]="Home",o[o.LeftArrow=15]="LeftArrow",o[o.UpArrow=16]="UpArrow",o[o.RightArrow=17]="RightArrow",o[o.DownArrow=18]="DownArrow",o[o.Insert=19]="Insert",o[o.Delete=20]="Delete",o[o.Digit0=21]="Digit0",o[o.Digit1=22]="Digit1",o[o.Digit2=23]="Digit2",o[o.Digit3=24]="Digit3",o[o.Digit4=25]="Digit4",o[o.Digit5=26]="Digit5",o[o.Digit6=27]="Digit6",o[o.Digit7=28]="Digit7",o[o.Digit8=29]="Digit8",o[o.Digit9=30]="Digit9",o[o.KeyA=31]="KeyA",o[o.KeyB=32]="KeyB",o[o.KeyC=33]="KeyC",o[o.KeyD=34]="KeyD",o[o.KeyE=35]="KeyE",o[o.KeyF=36]="KeyF",o[o.KeyG=37]="KeyG",o[o.KeyH=38]="KeyH",o[o.KeyI=39]="KeyI",o[o.KeyJ=40]="KeyJ",o[o.KeyK=41]="KeyK",o[o.KeyL=42]="KeyL",o[o.KeyM=43]="KeyM",o[o.KeyN=44]="KeyN",o[o.KeyO=45]="KeyO",o[o.KeyP=46]="KeyP",o[o.KeyQ=47]="KeyQ",o[o.KeyR=48]="KeyR",o[o.KeyS=49]="KeyS",o[o.KeyT=50]="KeyT",o[o.KeyU=51]="KeyU",o[o.KeyV=52]="KeyV",o[o.KeyW=53]="KeyW",o[o.KeyX=54]="KeyX",o[o.KeyY=55]="KeyY",o[o.KeyZ=56]="KeyZ",o[o.Meta=57]="Meta",o[o.ContextMenu=58]="ContextMenu",o[o.F1=59]="F1",o[o.F2=60]="F2",o[o.F3=61]="F3",o[o.F4=62]="F4",o[o.F5=63]="F5",o[o.F6=64]="F6",o[o.F7=65]="F7",o[o.F8=66]="F8",o[o.F9=67]="F9",o[o.F10=68]="F10",o[o.F11=69]="F11",o[o.F12=70]="F12",o[o.F13=71]="F13",o[o.F14=72]="F14",o[o.F15=73]="F15",o[o.F16=74]="F16",o[o.F17=75]="F17",o[o.F18=76]="F18",o[o.F19=77]="F19",o[o.F20=78]="F20",o[o.F21=79]="F21",o[o.F22=80]="F22",o[o.F23=81]="F23",o[o.F24=82]="F24",o[o.NumLock=83]="NumLock",o[o.ScrollLock=84]="ScrollLock",o[o.Semicolon=85]="Semicolon",o[o.Equal=86]="Equal",o[o.Comma=87]="Comma",o[o.Minus=88]="Minus",o[o.Period=89]="Period",o[o.Slash=90]="Slash",o[o.Backquote=91]="Backquote",o[o.BracketLeft=92]="BracketLeft",o[o.Backslash=93]="Backslash",o[o.BracketRight=94]="BracketRight",o[o.Quote=95]="Quote",o[o.OEM_8=96]="OEM_8",o[o.IntlBackslash=97]="IntlBackslash",o[o.Numpad0=98]="Numpad0",o[o.Numpad1=99]="Numpad1",o[o.Numpad2=100]="Numpad2",o[o.Numpad3=101]="Numpad3",o[o.Numpad4=102]="Numpad4",o[o.Numpad5=103]="Numpad5",o[o.Numpad6=104]="Numpad6",o[o.Numpad7=105]="Numpad7",o[o.Numpad8=106]="Numpad8",o[o.Numpad9=107]="Numpad9",o[o.NumpadMultiply=108]="NumpadMultiply",o[o.NumpadAdd=109]="NumpadAdd",o[o.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",o[o.NumpadSubtract=111]="NumpadSubtract",o[o.NumpadDecimal=112]="NumpadDecimal",o[o.NumpadDivide=113]="NumpadDivide",o[o.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",o[o.ABNT_C1=115]="ABNT_C1",o[o.ABNT_C2=116]="ABNT_C2",o[o.AudioVolumeMute=117]="AudioVolumeMute",o[o.AudioVolumeUp=118]="AudioVolumeUp",o[o.AudioVolumeDown=119]="AudioVolumeDown",o[o.BrowserSearch=120]="BrowserSearch",o[o.BrowserHome=121]="BrowserHome",o[o.BrowserBack=122]="BrowserBack",o[o.BrowserForward=123]="BrowserForward",o[o.MediaTrackNext=124]="MediaTrackNext",o[o.MediaTrackPrevious=125]="MediaTrackPrevious",o[o.MediaStop=126]="MediaStop",o[o.MediaPlayPause=127]="MediaPlayPause",o[o.LaunchMediaPlayer=128]="LaunchMediaPlayer",o[o.LaunchMail=129]="LaunchMail",o[o.LaunchApp2=130]="LaunchApp2",o[o.Clear=131]="Clear",o[o.MAX_VALUE=132]="MAX_VALUE"})(k5||(k5={}));var D5;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(D5||(D5={}));var M5;(function(o){o[o.Unnecessary=1]="Unnecessary",o[o.Deprecated=2]="Deprecated"})(M5||(M5={}));var A5;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(A5||(A5={}));var I5;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.TEXTAREA=1]="TEXTAREA",o[o.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",o[o.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",o[o.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",o[o.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",o[o.CONTENT_TEXT=6]="CONTENT_TEXT",o[o.CONTENT_EMPTY=7]="CONTENT_EMPTY",o[o.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",o[o.CONTENT_WIDGET=9]="CONTENT_WIDGET",o[o.OVERVIEW_RULER=10]="OVERVIEW_RULER",o[o.SCROLLBAR=11]="SCROLLBAR",o[o.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",o[o.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(I5||(I5={}));var N5;(function(o){o[o.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",o[o.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",o[o.TOP_CENTER=2]="TOP_CENTER"})(N5||(N5={}));var R5;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(R5||(R5={}));var P5;(function(o){o[o.Left=0]="Left",o[o.Right=1]="Right",o[o.None=2]="None",o[o.LeftOfInjectedText=3]="LeftOfInjectedText",o[o.RightOfInjectedText=4]="RightOfInjectedText"})(P5||(P5={}));var F5;(function(o){o[o.Off=0]="Off",o[o.On=1]="On",o[o.Relative=2]="Relative",o[o.Interval=3]="Interval",o[o.Custom=4]="Custom"})(F5||(F5={}));var O5;(function(o){o[o.None=0]="None",o[o.Text=1]="Text",o[o.Blocks=2]="Blocks"})(O5||(O5={}));var H5;(function(o){o[o.Smooth=0]="Smooth",o[o.Immediate=1]="Immediate"})(H5||(H5={}));var V5;(function(o){o[o.Auto=1]="Auto",o[o.Hidden=2]="Hidden",o[o.Visible=3]="Visible"})(V5||(V5={}));var W5;(function(o){o[o.LTR=0]="LTR",o[o.RTL=1]="RTL"})(W5||(W5={}));var B5;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(B5||(B5={}));var U5;(function(o){o[o.File=0]="File",o[o.Module=1]="Module",o[o.Namespace=2]="Namespace",o[o.Package=3]="Package",o[o.Class=4]="Class",o[o.Method=5]="Method",o[o.Property=6]="Property",o[o.Field=7]="Field",o[o.Constructor=8]="Constructor",o[o.Enum=9]="Enum",o[o.Interface=10]="Interface",o[o.Function=11]="Function",o[o.Variable=12]="Variable",o[o.Constant=13]="Constant",o[o.String=14]="String",o[o.Number=15]="Number",o[o.Boolean=16]="Boolean",o[o.Array=17]="Array",o[o.Object=18]="Object",o[o.Key=19]="Key",o[o.Null=20]="Null",o[o.EnumMember=21]="EnumMember",o[o.Struct=22]="Struct",o[o.Event=23]="Event",o[o.Operator=24]="Operator",o[o.TypeParameter=25]="TypeParameter"})(U5||(U5={}));var z5;(function(o){o[o.Deprecated=1]="Deprecated"})(z5||(z5={}));var G5;(function(o){o[o.Hidden=0]="Hidden",o[o.Blink=1]="Blink",o[o.Smooth=2]="Smooth",o[o.Phase=3]="Phase",o[o.Expand=4]="Expand",o[o.Solid=5]="Solid"})(G5||(G5={}));var j5;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(j5||(j5={}));var K5;(function(o){o[o.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",o[o.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",o[o.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",o[o.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(K5||(K5={}));var $5;(function(o){o[o.None=0]="None",o[o.Same=1]="Same",o[o.Indent=2]="Indent",o[o.DeepIndent=3]="DeepIndent"})($5||($5={}));var D1;let qL=(D1=class{static chord(e,t){return In(e,t)}},u(D1,"KeyMod"),D1);qL.CtrlCmd=2048;qL.Shift=1024;qL.Alt=512;qL.WinCtrl=256;function X1e(){return{editor:void 0,languages:void 0,CancellationTokenSource:En,Emitter:V,KeyCode:k5,KeyMod:qL,Position:W,Range:L,Selection:xe,SelectionDirection:W5,MarkerSeverity:D5,MarkerTag:M5,Uri:Ae,Token:By}}u(X1e,"createMonacoBaseAPI");const Tee=class Tee{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}};u(Tee,"LRUCachedFunction");let q5=Tee;const Lee=class Lee{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}};u(Lee,"CachedFunction");let yD=Lee;const Eee=class Eee{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};u(Eee,"Lazy");let dl=Eee;var Qm;function Z1e(o){return!o||typeof o!="string"?!0:o.trim().length===0}u(Z1e,"isFalsyOrWhitespace");const YDe=/{(\d+)}/g;function Sg(o,...e){return e.length===0?o:o.replace(YDe,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}u(Sg,"format");function wD(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}u(wD,"escape");function po(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}u(po,"escapeRegExpCharacters");function XDe(o,e=" "){const t=YL(o,e);return J1e(t,e)}u(XDe,"trim");function YL(o,e){if(!o||!e)return o;const t=e.length;if(t===0||o.length===0)return o;let n=0;for(;o.indexOf(e,n)===n;)n=n+t;return o.substring(n)}u(YL,"ltrim");function J1e(o,e){if(!o||!e)return o;const t=e.length,n=o.length;if(t===0||n===0)return o;let i=n,s=-1;for(;s=o.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return o.substring(0,i)}u(J1e,"rtrim");function ZDe(o){return o.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}u(ZDe,"convertSimple2RegExpPattern");function JDe(o){return o.replace(/\*/g,"")}u(JDe,"stripWildcards");function Q1e(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=po(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(o,n)}u(Q1e,"createRegExp");function QDe(o){return o.source==="^"||o.source==="^$"||o.source==="$"||o.source==="^\\s*$"?!1:!!(o.exec("")&&o.lastIndex===0)}u(QDe,"regExpLeadsToEndlessLoop");function cl(o){return o.split(/\r\n|\r|\n/)}u(cl,"splitLines");function $i(o){for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}u($i,"firstNonWhitespaceIndex");function Dt(o,e=0,t=o.length){for(let n=e;n<t;n++){const i=o.charCodeAt(n);if(i!==32&&i!==9)return o.substring(e,n)}return o.substring(e,t)}u(Dt,"getLeadingWhitespace");function ha(o,e=o.length-1){for(let t=e;t>=0;t--){const n=o.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}u(ha,"lastNonWhitespaceIndex");function jy(o,e){return o<e?-1:o>e?1:0}u(jy,"compare");function bZ(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){const l=o.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(bZ,"compareSubstring");function Y5(o,e){return XL(o,e,0,o.length,0,e.length)}u(Y5,"compareIgnoreCase");function XL(o,e,t=0,n=o.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=o.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return bZ(o.toLowerCase(),e.toLowerCase(),t,n,i,s);Rc(l)&&(l-=32),Rc(d)&&(d-=32);const c=l-d;if(c!==0)return c}const r=n-t,a=s-i;return r<a?-1:r>a?1:0}u(XL,"compareSubstringIgnoreCase");function wE(o){return o>=48&&o<=57}u(wE,"isAsciiDigit");function Rc(o){return o>=97&&o<=122}u(Rc,"isLowerAsciiLetter");function Va(o){return o>=65&&o<=90}u(Va,"isUpperAsciiLetter");function up(o,e){return o.length===e.length&&XL(o,e)===0}u(up,"equalsIgnoreCase");function _Z(o,e){const t=e.length;return e.length>o.length?!1:XL(o,e,0,t)===0}u(_Z,"startsWithIgnoreCase");function xg(o,e){const t=Math.min(o.length,e.length);let n;for(n=0;n<t;n++)if(o.charCodeAt(n)!==e.charCodeAt(n))return n;return t}u(xg,"commonPrefixLength");function CD(o,e){const t=Math.min(o.length,e.length);let n;const i=o.length-1,s=e.length-1;for(n=0;n<t;n++)if(o.charCodeAt(i-n)!==e.charCodeAt(s-n))return n;return t}u(CD,"commonSuffixLength");function Un(o){return 55296<=o&&o<=56319}u(Un,"isHighSurrogate");function Tg(o){return 56320<=o&&o<=57343}u(Tg,"isLowSurrogate");function vZ(o,e){return(o-55296<<10)+(e-56320)+65536}u(vZ,"computeCodePoint");function SD(o,e,t){const n=o.charCodeAt(t);if(Un(n)&&t+1<e){const i=o.charCodeAt(t+1);if(Tg(i))return vZ(n,i)}return n}u(SD,"getNextCodePoint");function eMe(o,e){const t=o.charCodeAt(e-1);if(Tg(t)&&e>1){const n=o.charCodeAt(e-2);if(Un(n))return vZ(n,t)}return t}u(eMe,"getPrevCodePoint");const kee=class kee{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=eMe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=SD(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}};u(kee,"CodePointIterator");let Ky=kee;const Dee=class Dee{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Ky(e,t)}nextGraphemeLength(){const e=$y.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(Ove(i,r)){t.setOffset(s);break}i=r}return t.offset-n}prevGraphemeLength(){const e=$y.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(Ove(r,i)){t.setOffset(s);break}i=r}return n-t.offset}eol(){return this._iterator.eol()}};u(Dee,"GraphemeIterator");let eb=Dee;function yZ(o,e){return new eb(o,e).nextGraphemeLength()}u(yZ,"nextCharLength");function eSe(o,e){return new eb(o,e).prevGraphemeLength()}u(eSe,"prevCharLength");function tMe(o,e){e>0&&Tg(o.charCodeAt(e))&&e--;const t=e+yZ(o,e);return[t-eSe(o,t),t]}u(tMe,"getCharContainingOffset");let M4;function nMe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}u(nMe,"makeContainsRtl");function tb(o){return M4||(M4=nMe()),M4.test(o)}u(tb,"containsRTL");const iMe=/^[\t\n\r\x20-\x7E]*$/;function ZL(o){return iMe.test(o)}u(ZL,"isBasicASCII");const tSe=/[\u2028\u2029]/;function nSe(o){return tSe.test(o)}u(nSe,"containsUnusualLineTerminators");function hu(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}u(hu,"isFullWidthCharacter");function wZ(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}u(wZ,"isEmojiImprecise");const sMe=String.fromCharCode(65279);function CZ(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}u(CZ,"startsWithUTF8BOM");function oMe(o,e=!1){return o?(e&&(o=o.replace(/\\./g,"")),o.toLowerCase()!==o):!1}u(oMe,"containsUppercaseCharacter");function iSe(o){return o=o%(2*26),o<26?String.fromCharCode(97+o):String.fromCharCode(65+o-26)}u(iSe,"singleLetterHash");function Ove(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}u(Ove,"breakBetweenGraphemeBreakType");const kh=class kh{static getInstance(){return kh._INSTANCE||(kh._INSTANCE=new kh),kh._INSTANCE}constructor(){this._data=rMe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};u(kh,"GraphemeBreakTree");let $y=kh;$y._INSTANCE=null;function rMe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}u(rMe,"getGraphemeBreakRawData");function aMe(o,e){if(o===0)return 0;const t=lMe(o,e);if(t!==void 0)return t;const n=new Ky(e,o);return n.prevCodePoint(),n.offset}u(aMe,"getLeftDeleteOffset");function lMe(o,e){const t=new Ky(e,o);let n=t.prevCodePoint();for(;dMe(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!wZ(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}u(lMe,"getOffsetBeforeLastEmojiComponent");function dMe(o){return 127995<=o&&o<=127999}u(dMe,"isEmojiModifier");const sSe=" ",Mee=class Mee{static getInstance(e){return Qm.cache.get(Array.from(e))}static getLocales(){return Qm._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};u(Mee,"AmbiguousCharacters");let Nd=Mee;Qm=Nd;Nd.ambiguousCharacterData=new dl(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Nd.cache=new q5(o=>{function e(d){const c=new Map;for(let h=0;h<d.length;h+=2)c.set(d[h],d[h+1]);return c}u(e,"arrayToMap");function t(d,c){const h=new Map(d);for(const[g,f]of c)h.set(g,f);return h}u(t,"mergeMaps");function n(d,c){if(!d)return c;const h=new Map;for(const[g,f]of d)c.has(g)&&h.set(g,f);return h}u(n,"intersectMaps");const i=Qm.ambiguousCharacterData.value;let s=o.filter(d=>!d.startsWith("_")&&d in i);s.length===0&&(s=["_default"]);let r;for(const d of s){const c=e(i[d]);r=n(r,c)}const a=e(i._common),l=t(a,r);return new Qm(l)});Nd._locales=new dl(()=>Object.keys(Qm.ambiguousCharacterData.value).filter(o=>!o.startsWith("_")));const zp=class zp{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(zp.getRawData())),this._data}static isInvisibleCharacter(e){return zp.getData().has(e)}static get codePoints(){return zp.getData()}};u(zp,"InvisibleCharacters");let Xc=zp;Xc._data=void 0;const Aee=class Aee{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}};u(Aee,"WindowManager");let qy=Aee;qy.INSTANCE=new qy;const Iee=class Iee extends G{constructor(){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}};u(Iee,"DevicePixelRatioMonitor");let X5=Iee;const Nee=class Nee extends G{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new X5);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}};u(Nee,"PixelRatioImpl");let Z5=Nee;const Ree=class Ree{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new Z5),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}};u(Ree,"PixelRatioFacade");let J5=Ree;function oSe(o,e){typeof o=="string"&&(o=window.matchMedia(o)),o.addEventListener("change",e)}u(oSe,"addMatchMediaChangeListener");const Yy=new J5;function cMe(){return qy.INSTANCE.getZoomFactor()}u(cMe,"getZoomFactor");const __=navigator.userAgent,Bo=__.indexOf("Firefox")>=0,eg=__.indexOf("AppleWebKit")>=0,SZ=__.indexOf("Chrome")>=0,Rd=!SZ&&__.indexOf("Safari")>=0,rSe=!SZ&&!Rd&&eg;__.indexOf("Electron/")>=0;const Hve=__.indexOf("Android")>=0;let Mk=!1;if(window.matchMedia){const o=window.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=window.matchMedia("(display-mode: fullscreen)");Mk=o.matches,oSe(o,({matches:t})=>{Mk&&e.matches||(Mk=t)})}function uMe(){return Mk}u(uMe,"isStandalone");const Pee=class Pee{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Hr(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Hr(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Hr(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Hr(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Hr(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Hr(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Hr(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Hr(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Hr(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Hr(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Hr(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};u(Pee,"FastDomNode");let xD=Pee;function Hr(o){return typeof o=="number"?`${o}px`:o}u(Hr,"numberAsPixels");function ht(o){return new xD(o)}u(ht,"createFastDomNode");function Kn(o,e){o instanceof xD?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setFontVariationSettings(e.fontVariationSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.fontVariationSettings=e.fontVariationSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}u(Kn,"applyFontInfo");const Fee=class Fee{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}};u(Fee,"CharWidthRequest");let Q5=Fee;const A2=class A2{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Kn(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Kn(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");Kn(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");A2._render(l,r),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}};u(A2,"DomCharWidthReader");let e3=A2;function hMe(o,e){new e3(o,e).read()}u(hMe,"readCharWidths");const No=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new V,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},gMe=ot?1.5:1.35,A4=8,Gp=class Gp{static createFromValidatedSettings(e,t,n){const i=e.get(48),s=e.get(52),r=e.get(51),a=e.get(50),l=e.get(53),d=e.get(65),c=e.get(62);return Gp._create(i,s,r,a,l,d,c,t,n)}static _create(e,t,n,i,s,r,a,l,d){r===0?r=gMe*n:r<A4&&(r=r*n),r=Math.round(r),r<A4&&(r=A4);const c=1+(d?0:No.getZoomLevel()*.1);return n*=c,r*=c,s===Cg.TRANSLATE&&(t==="normal"||t==="bold"?s=Cg.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new Gp({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:s,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Us.fontFamily,t=Gp._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}};u(Gp,"BareFontInfo");let Xy=Gp;const fMe=2,Oee=class Oee extends Xy{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=fMe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};u(Oee,"FontInfo");let Zy=Oee;const Hee=class Hee extends G{constructor(){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._cache=new TD,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new TD,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new Zy({pixelRatio:Yy.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const s=new Q5(e,t);return n.push(s),i?.push(s),s}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),s=this._createRequest("ｍ",0,t,null),r=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),d=this._createRequest("2",0,t,n),c=this._createRequest("3",0,t,n),h=this._createRequest("4",0,t,n),g=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),p=this._createRequest("7",0,t,n),b=this._createRequest("8",0,t,n),_=this._createRequest("9",0,t,n),v=this._createRequest("→",0,t,n),y=this._createRequest("￫",0,t,null),w=this._createRequest("·",0,t,n),C=this._createRequest(String.fromCharCode(11825),0,t,null),S="|/-_ilm%";for(let O=0,B=S.length;O<B;O++)this._createRequest(S.charAt(O),0,t,n),this._createRequest(S.charAt(O),1,t,n),this._createRequest(S.charAt(O),2,t,n);hMe(e,t);const k=Math.max(a.width,l.width,d.width,c.width,h.width,g.width,f.width,p.width,b.width,_.width);let T=e.fontFeatureSettings===Sr.OFF;const E=n[0].width;for(let O=1,B=n.length;T&&O<B;O++){const H=E-n[O].width;if(H<-.001||H>.001){T=!1;break}}let D=!0;return T&&y.width!==E&&(D=!1),y.width>v.width&&(D=!1),new Zy({pixelRatio:Yy.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:T,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:r.width,middotWidth:w.width,wsmiddotWidth:C.width,maxDigitWidth:k},!0)}};u(Hee,"FontMeasurementsImpl");let t3=Hee;const Vee=class Vee{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}};u(Vee,"FontMeasurementsCache");let TD=Vee;const n3=new t3;var la;(function(o){o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[o.DI_DEPENDENCIES]||[]}u(e,"getServiceDependencies"),o.getServiceDependencies=e})(la||(la={}));const Pe=nt("instantiationService");function pMe(o,e,t){e[la.DI_TARGET]===e?e[la.DI_DEPENDENCIES].push({id:o,index:t}):(e[la.DI_DEPENDENCIES]=[{id:o,index:t}],e[la.DI_TARGET]=e)}u(pMe,"storeServiceDependency");function nt(o){if(la.serviceIds.has(o))return la.serviceIds.get(o);const e=u(function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");pMe(e,t,i)},"id");return e.toString=()=>o,la.serviceIds.set(o,e),e}u(nt,"createDecorator");const gt=nt("codeEditorService");function Mv(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}u(Mv,"ok");function yO(o,e="Unreachable"){throw new Error(e)}u(yO,"assertNever");function Jy(o){if(!o()){debugger;o(),Be(new An("Assertion Failed"))}}u(Jy,"assertFn");function aSe(o,e){let t=0;for(;t<o.length-1;){const n=o[t],i=o[t+1];if(!e(n,i))return!1;t++}return!0}u(aSe,"checkAdjacentItems");const wf=nt("audioCue"),I2=class I2{static register(e){return new I2(e.fileName)}constructor(e){this.fileName=e}};u(I2,"Sound");let Ye=I2;Ye.error=Ye.register({fileName:"error.mp3"});Ye.warning=Ye.register({fileName:"warning.mp3"});Ye.foldedArea=Ye.register({fileName:"foldedAreas.mp3"});Ye.break=Ye.register({fileName:"break.mp3"});Ye.quickFixes=Ye.register({fileName:"quickFixes.mp3"});Ye.taskCompleted=Ye.register({fileName:"taskCompleted.mp3"});Ye.taskFailed=Ye.register({fileName:"taskFailed.mp3"});Ye.terminalBell=Ye.register({fileName:"terminalBell.mp3"});Ye.diffLineInserted=Ye.register({fileName:"diffLineInserted.mp3"});Ye.diffLineDeleted=Ye.register({fileName:"diffLineDeleted.mp3"});Ye.diffLineModified=Ye.register({fileName:"diffLineModified.mp3"});Ye.chatRequestSent=Ye.register({fileName:"chatRequestSent.mp3"});Ye.chatResponsePending=Ye.register({fileName:"chatResponsePending.mp3"});Ye.chatResponseReceived1=Ye.register({fileName:"chatResponseReceived1.mp3"});Ye.chatResponseReceived2=Ye.register({fileName:"chatResponseReceived2.mp3"});Ye.chatResponseReceived3=Ye.register({fileName:"chatResponseReceived3.mp3"});Ye.chatResponseReceived4=Ye.register({fileName:"chatResponseReceived4.mp3"});const Wee=class Wee{constructor(e){this.randomOneOf=e}};u(Wee,"SoundSource");let i3=Wee;const S0=class S0{static register(e){const t=new i3("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new S0(t,e.name,e.settingsKey);return S0._audioCues.add(n),n}constructor(e,t,n){this.sound=e,this.name=t,this.settingsKey=n}};u(S0,"AudioCue");let rt=S0;rt._audioCues=new Set;rt.error=rt.register({name:m("audioCues.lineHasError.name","Error on Line"),sound:Ye.error,settingsKey:"audioCues.lineHasError"});rt.warning=rt.register({name:m("audioCues.lineHasWarning.name","Warning on Line"),sound:Ye.warning,settingsKey:"audioCues.lineHasWarning"});rt.foldedArea=rt.register({name:m("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:Ye.foldedArea,settingsKey:"audioCues.lineHasFoldedArea"});rt.break=rt.register({name:m("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:Ye.break,settingsKey:"audioCues.lineHasBreakpoint"});rt.inlineSuggestion=rt.register({name:m("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Ye.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"});rt.terminalQuickFix=rt.register({name:m("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:Ye.quickFixes,settingsKey:"audioCues.terminalQuickFix"});rt.onDebugBreak=rt.register({name:m("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Ye.break,settingsKey:"audioCues.onDebugBreak"});rt.noInlayHints=rt.register({name:m("audioCues.noInlayHints","No Inlay Hints on Line"),sound:Ye.error,settingsKey:"audioCues.noInlayHints"});rt.taskCompleted=rt.register({name:m("audioCues.taskCompleted","Task Completed"),sound:Ye.taskCompleted,settingsKey:"audioCues.taskCompleted"});rt.taskFailed=rt.register({name:m("audioCues.taskFailed","Task Failed"),sound:Ye.taskFailed,settingsKey:"audioCues.taskFailed"});rt.terminalCommandFailed=rt.register({name:m("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:Ye.error,settingsKey:"audioCues.terminalCommandFailed"});rt.terminalBell=rt.register({name:m("audioCues.terminalBell","Terminal Bell"),sound:Ye.terminalBell,settingsKey:"audioCues.terminalBell"});rt.notebookCellCompleted=rt.register({name:m("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:Ye.taskCompleted,settingsKey:"audioCues.notebookCellCompleted"});rt.notebookCellFailed=rt.register({name:m("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:Ye.taskFailed,settingsKey:"audioCues.notebookCellFailed"});rt.diffLineInserted=rt.register({name:m("audioCues.diffLineInserted","Diff Line Inserted"),sound:Ye.diffLineInserted,settingsKey:"audioCues.diffLineInserted"});rt.diffLineDeleted=rt.register({name:m("audioCues.diffLineDeleted","Diff Line Deleted"),sound:Ye.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"});rt.diffLineModified=rt.register({name:m("audioCues.diffLineModified","Diff Line Modified"),sound:Ye.diffLineModified,settingsKey:"audioCues.diffLineModified"});rt.chatRequestSent=rt.register({name:m("audioCues.chatRequestSent","Chat Request Sent"),sound:Ye.chatRequestSent,settingsKey:"audioCues.chatRequestSent"});rt.chatResponseReceived=rt.register({name:m("audioCues.chatResponseReceived","Chat Response Received"),settingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Ye.chatResponseReceived1,Ye.chatResponseReceived2,Ye.chatResponseReceived3,Ye.chatResponseReceived4]}});rt.chatResponsePending=rt.register({name:m("audioCues.chatResponsePending","Chat Response Pending"),sound:Ye.chatResponsePending,settingsKey:"audioCues.chatResponsePending"});function I4(...o){switch(o.length){case 1:return m("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",o[0]);case 2:return m("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",o[0],o[1]);case 3:return m("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",o[0],o[1],o[2]);default:return}}u(I4,"hintDidYouMean");const mMe=m("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),bMe=m("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var bg;let fh=(bg=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw fZ(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(I4("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(I4("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(I4("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=bg._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(mMe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(bMe);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!n){e++;break}else s===91?n=!0:s===92?t=!0:s===93&&(n=!1);e++}for(;e<this._input.length&&bg._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},u(bg,"Scanner"),bg);fh._regexFlags=new Set(["i","g","s","m","y","u"].map(o=>o.charCodeAt(0)));fh._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const Oi=new Map;Oi.set("false",!1);Oi.set("true",!0);Oi.set("isMac",ot);Oi.set("isLinux",qi);Oi.set("isWindows",Si);Oi.set("isWeb",Ku);Oi.set("isMacNative",ot&&!Ku);Oi.set("isEdge",aDe);Oi.set("isFirefox",oDe);Oi.set("isChrome",P1e);Oi.set("isSafari",rDe);const _Me=Object.prototype.hasOwnProperty,vMe={regexParsingWithErrorRecovery:!0},yMe=m("contextkey.parser.error.emptyString","Empty context key expression"),wMe=m("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),CMe=m("contextkey.parser.error.noInAfterNot","'in' after 'not'."),Vve=m("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),SMe=m("contextkey.parser.error.unexpectedToken","Unexpected token"),xMe=m("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),TMe=m("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),LMe=m("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var hd;let lSe=(hd=class{constructor(e=vMe){this._config=e,this._scanner=new fh,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:yMe,offset:0,lexeme:"",additionalInfo:wMe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),i=n.type===17?xMe:void 0;throw this._parsingErrors.push({message:SMe,offset:n.offset,lexeme:fh.getLexeme(n),additionalInfo:i}),hd._parseError}return t}catch(t){if(t!==hd._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:ne.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:ne.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Hi.INSTANCE;case 12:return this._advance(),Yi.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,Vve),t?.negate()}case 17:return this._advance(),Eg.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),ne.true();case 12:return this._advance(),ne.false();case 0:{this._advance();const t=this._expr();return this._consume(1,Vve),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);const s=i.lexeme,r=s.lastIndexOf("/"),a=r===s.length-1?void 0:this._removeFlagsGY(s.substring(r+1));let l;try{l=new RegExp(s.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",i)}return ew.create(t,l)}switch(i.type){case 10:case 19:{const s=[i.lexeme];this._advance();let r=this._peek(),a=0;for(let g=0;g<i.lexeme.length;g++)i.lexeme.charCodeAt(g)===40?a++:i.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<r.lexeme.length;g++)r.lexeme.charCodeAt(g)===40?a++:i.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;s.push(fh.getLexeme(r)),this._advance(),r=this._peek()}const l=s.join(""),d=l.lastIndexOf("/"),c=d===l.length-1?void 0:this._removeFlagsGY(l.substring(d+1));let h;try{h=new RegExp(l.substring(1,d),c)}catch{throw this._errExpectedButGot("REGEX",i)}return ne.regex(t,h)}case 18:{const s=i.lexeme;this._advance();let r=null;if(!Z1e(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const d=s.slice(a+1,l),c=s[l+1]==="i"?"i":"";try{r=new RegExp(d,c)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(r===null)throw this._errExpectedButGot("REGEX",i);return ew.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,CMe);const i=this._value();return ne.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();const i=this._value();if(this._previous().type===18)return ne.equals(t,i);switch(i){case"true":return ne.has(t);case"false":return ne.not(t);default:return ne.equals(t,i)}}case 4:{this._advance();const i=this._value();if(this._previous().type===18)return ne.notEquals(t,i);switch(i){case"true":return ne.not(t);case"false":return ne.has(t);default:return ne.notEquals(t,i)}}case 5:return this._advance(),AD.create(t,this._value());case 6:return this._advance(),ID.create(t,this._value());case 7:return this._advance(),DD.create(t,this._value());case 8:return this._advance(),MD.create(t,this._value());case 13:return this._advance(),ne.in(t,this._value());default:return ne.has(t)}}case 20:throw this._parsingErrors.push({message:TMe,offset:e.offset,lexeme:"",additionalInfo:LMe}),hd._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const i=m("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,fh.getLexeme(t)),s=t.offset,r=fh.getLexeme(t);return this._parsingErrors.push({message:i,offset:s,lexeme:r,additionalInfo:n}),hd._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},u(hd,"Parser"),hd);lSe._parseError=new Error;const Bee=class Bee{static false(){return Hi.INSTANCE}static true(){return Yi.INSTANCE}static has(e){return Lg.create(e)}static equals(e,t){return Qy.create(e,t)}static notEquals(e,t){return kD.create(e,t)}static regex(e,t){return ew.create(e,t)}static in(e,t){return LD.create(e,t)}static notIn(e,t){return ED.create(e,t)}static not(e){return Eg.create(e)}static and(...e){return ND.create(e,null,!0)}static or(...e){return tw.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};u(Bee,"ContextKeyExpr");let ne=Bee;ne._parser=new lSe({regexParsingWithErrorRecovery:!1});function EMe(o,e){const t=o?o.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}u(EMe,"expressionsAreEqualWithConstantSubstitution");function Av(o,e){return o.cmp(e)}u(Av,"cmp");const Uee=class Uee{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Yi.INSTANCE}};u(Uee,"ContextKeyFalseExpr");let Hi=Uee;Hi.INSTANCE=new Hi;const zee=class zee{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Hi.INSTANCE}};u(zee,"ContextKeyTrueExpr");let Yi=zee;Yi.INSTANCE=new Yi;const N2=class N2{static create(e,t=null){const n=Oi.get(e);return typeof n=="boolean"?n?Yi.INSTANCE:Hi.INSTANCE:new N2(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:cSe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Oi.get(this.key);return typeof e=="boolean"?e?Yi.INSTANCE:Hi.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Eg.create(this.key,this)),this.negated}};u(N2,"ContextKeyDefinedExpr");let Lg=N2;const R2=class R2{static create(e,t,n=null){if(typeof t=="boolean")return t?Lg.create(e,n):Eg.create(e,n);const i=Oi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Yi.INSTANCE:Hi.INSTANCE:new R2(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Oi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Yi.INSTANCE:Hi.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kD.create(this.key,this.value,this)),this.negated}};u(R2,"ContextKeyEqualsExpr");let Qy=R2;const P2=class P2{static create(e,t){return new P2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?_Me.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ED.create(this.key,this.valueKey)),this.negated}};u(P2,"ContextKeyInExpr");let LD=P2;const F2=class F2{static create(e,t){return new F2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=LD.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}};u(F2,"ContextKeyNotInExpr");let ED=F2;const O2=class O2{static create(e,t,n=null){if(typeof t=="boolean")return t?Eg.create(e,n):Lg.create(e,n);const i=Oi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Hi.INSTANCE:Yi.INSTANCE:new O2(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Oi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Hi.INSTANCE:Yi.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Qy.create(this.key,this.value,this)),this.negated}};u(O2,"ContextKeyNotEqualsExpr");let kD=O2;const H2=class H2{static create(e,t=null){const n=Oi.get(e);return typeof n=="boolean"?n?Hi.INSTANCE:Yi.INSTANCE:new H2(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:cSe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Oi.get(this.key);return typeof e=="boolean"?e?Hi.INSTANCE:Yi.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Lg.create(this.key,this)),this.negated}};u(H2,"ContextKeyNotExpr");let Eg=H2;function wO(o,e){if(typeof o=="string"){const t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):Hi.INSTANCE}u(wO,"withFloatOrStr");const V2=class V2{static create(e,t,n=null){return wO(t,i=>new V2(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ID.create(this.key,this.value,this)),this.negated}};u(V2,"ContextKeyGreaterExpr");let DD=V2;const W2=class W2{static create(e,t,n=null){return wO(t,i=>new W2(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=AD.create(this.key,this.value,this)),this.negated}};u(W2,"ContextKeyGreaterEqualsExpr");let MD=W2;const B2=class B2{static create(e,t,n=null){return wO(t,i=>new B2(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=MD.create(this.key,this.value,this)),this.negated}};u(B2,"ContextKeySmallerExpr");let AD=B2;const U2=class U2{static create(e,t,n=null){return wO(t,i=>new U2(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Cf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=DD.create(this.key,this.value,this)),this.negated}};u(U2,"ContextKeySmallerEqualsExpr");let ID=U2;const z2=class z2{static create(e,t){return new z2(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=s3.create(this)),this.negated}};u(z2,"ContextKeyRegexExpr");let ew=z2;const G2=class G2{static create(e){return new G2(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}};u(G2,"ContextKeyNotRegexExpr");let s3=G2;function dSe(o){let e=null;for(let t=0,n=o.length;t<n;t++){const i=o[t].substituteConstants();if(o[t]!==i&&e===null){e=[];for(let s=0;s<t;s++)e[s]=o[s]}e!==null&&(e[t]=i)}return e===null?o:e}u(dSe,"eliminateConstantsInArray");const Dh=class Dh{static create(e,t,n){return Dh._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Av(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=dSe(this.expr);return e===this.expr?this:Dh.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const i=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Hi.INSTANCE;if(r.type===6){i.push(...r.expr);continue}i.push(r)}if(i.length===0&&s)return Yi.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(Av);for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];for(;i.length>1;){const r=i[i.length-1];if(r.type!==9)break;i.pop();const a=i.pop(),l=i.length===0,d=tw.create(r.expr.map(c=>Dh.create([c,a],null,n)),null,l);d&&(i.push(d),i.sort(Av))}if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return Hi.INSTANCE;if(i.length===1)return i[0]}return new Dh(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=tw.create(e,this,!0)}return this.negated}};u(Dh,"ContextKeyAndExpr");let ND=Dh;const Sc=class Sc{static create(e,t,n){return Sc._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Av(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=dSe(this.expr);return e===this.expr?this:Sc.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return Yi.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&s)return Hi.INSTANCE;i.sort(Av)}if(i.length!==0){if(i.length===1)return i[0];for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return Yi.INSTANCE;if(i.length===1)return i[0]}return new Sc(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const s of Bve(t))for(const r of Bve(n))i.push(ND.create([s,r],null,!1));e.unshift(Sc.create(i,null,!1))}this.negated=Sc.create(e,this,!0)}return this.negated}};u(Sc,"ContextKeyOrExpr");let tw=Sc;const jp=class jp extends Lg{static all(){return jp._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?jp._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&jp._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Qy.create(this.key,e)}};u(jp,"RawContextKey");let _e=jp;_e._info=[];const Re=nt("contextKeyService");function cSe(o,e){return o<e?-1:o>e?1:0}u(cSe,"cmp1");function Cf(o,e,t,n){return o<t?-1:o>t?1:e<n?-1:e>n?1:0}u(Cf,"cmp2");function o3(o,e){if(o.type===0||e.type===1)return!0;if(o.type===9)return e.type===9?Wve(o.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(o3(o,t))return!0;return!1}if(o.type===6){if(e.type===6)return Wve(e.expr,o.expr);for(const t of o.expr)if(o3(t,e))return!0;return!1}return o.equals(e)}u(o3,"implies");function Wve(o,e){let t=0,n=0;for(;t<o.length&&n<e.length;){const i=o[t].cmp(e[n]);if(i<0)return!1;i===0&&t++,n++}return t===o.length}u(Wve,"allElementsIncluded");function Bve(o){return o.type===9?o.expr:[o]}u(Bve,"getTerminals");const El=nt("accessibilityService"),JL=new _e("accessibilityModeEnabled",!1);var kMe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},N4=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const DMe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0,findResultLoop:!0};var M1;let RD=(M1=class extends G{constructor(e,t={},n,i,s){super(),this._audioCueService=n,this._codeEditorService=i,this._accessibilityService=s,this._onDidUpdate=this._register(new V),this._editor=e,this._options=$L(t,DMe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(r=>{this.ignoreSelectionChange||(this._updateAccessibilityState(r.position.lineNumber),this.nextIdx=-1)})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new L(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){const r=this.ranges[i].range;n.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Mv(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t),this._updateAccessibilityState(i.lineNumber,!0)}finally{this.ignoreSelectionChange=!1}}_updateAccessibilityState(e,t){var n;const i=(n=this._editor.getModel())===null||n===void 0?void 0:n.modified;if(!i)return;const s=i.getLineDecorations(e).find(a=>a.options.className==="line-insert");if(s)this._audioCueService.playAudioCue(rt.diffLineModified,{allowManyInParallel:!0});else if(t)this._audioCueService.playAudioCue(rt.diffLineDeleted,{allowManyInParallel:!0});else return;const r=this._codeEditorService.getActiveCodeEditor();t&&r&&s&&this._accessibilityService.isScreenReaderOptimized()&&(r.setSelection({startLineNumber:e,startColumn:0,endLineNumber:e,endColumn:Number.MAX_VALUE}),r.writeScreenReaderContent("diff-navigation"))}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this.canNavigateNext()&&this._move(!0,e)}previous(e=0){this.canNavigatePrevious()&&this._move(!1,e)}canNavigateNext(){return this.canNavigateLoop()||this.nextIdx<this.ranges.length-1}canNavigatePrevious(){return this.canNavigateLoop()||this.nextIdx!==0}canNavigateLoop(){return!!this._options.findResultLoop}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}},u(M1,"DiffNavigator"),M1);RD=kMe([N4(2,wf),N4(3,gt),N4(4,El)],RD);const v_={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var mo;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(mo||(mo={}));var Sm;(function(o){o[o.Left=1]="Left",o[o.Right=2]="Right"})(Sm||(Sm={}));var ho;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(ho||(ho={}));var da;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(da||(da={}));const Gee=class Gee{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&uo(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}};u(Gee,"TextModelResolvedOptions");let xm=Gee;const jee=class jee{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}};u(jee,"FindMatch");let kg=jee;function MMe(o){return o&&typeof o.read=="function"}u(MMe,"isITextSnapshot");const Kee=class Kee{constructor(e,t,n,i,s,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}};u(Kee,"ValidAnnotatedEditOperation");let Iv=Kee;const $ee=class $ee{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}};u($ee,"SearchData");let r3=$ee;const qee=class qee{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}};u(qee,"ApplyEditsResult");let a3=qee;function AMe(o){return!o.isTooLargeForSyncing()&&!o.isForSimpleWidget}u(AMe,"shouldSynchronizeModel");var Tn;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(Tn||(Tn={}));const Yee=class Yee{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}};u(Yee,"StandardAutoClosingPairConditional");let Nv=Yee;const Xee=class Xee{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)A_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),A_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),A_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),A_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&A_(this.autoClosingPairsCloseSingleChar,t.close,t)}};u(Xee,"AutoClosingPairs");let l3=Xee;function A_(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}u(A_,"appendEntry");function CO(o,e){const t=o.getCount(),n=o.findTokenIndexAtOffset(e),i=o.getLanguageId(n);let s=n;for(;s+1<t&&o.getLanguageId(s+1)===i;)s++;let r=n;for(;r>0&&o.getLanguageId(r-1)===i;)r--;return new d3(o,i,r,s+1,o.getStartOffset(r),o.getEndOffset(s))}u(CO,"createScopedLineTokens");const Zee=class Zee{constructor(e,t,n,i,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}};u(Zee,"ScopedLineTokens");let d3=Zee;function Aa(o){return(o&3)!==0}u(Aa,"ignoreBracketsInToken");const x0=class x0{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Nv(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Nv({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Nv({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:x0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:x0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};u(x0,"CharacterPairSupport");let nw=x0;nw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;nw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;const Uve=typeof Buffer<"u";let R4;const j2=class j2{static wrap(e){return Uve&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new j2(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return Uve?this.buffer.toString():(R4||(R4=new TextDecoder),R4.decode(this.buffer))}};u(j2,"VSBuffer");let PD=j2;function IMe(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}u(IMe,"readUInt16LE");function NMe(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}u(NMe,"writeUInt16LE");function Zr(o,e){return o[e]*Math.pow(2,24)+o[e+1]*Math.pow(2,16)+o[e+2]*Math.pow(2,8)+o[e+3]}u(Zr,"readUInt32BE");function Jr(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}u(Jr,"writeUInt32BE");function zve(o,e){return o[e]}u(zve,"readUInt8");function Gve(o,e,t){o[t]=e}u(Gve,"writeUInt8");let P4;function uSe(){return P4||(P4=new TextDecoder("UTF-16LE")),P4}u(uSe,"getUTF16LE_TextDecoder");let F4;function RMe(){return F4||(F4=new TextDecoder("UTF-16BE")),F4}u(RMe,"getUTF16BE_TextDecoder");let O4;function hSe(){return O4||(O4=R1e()?uSe():RMe()),O4}u(hSe,"getPlatformTextDecoder");function PMe(o,e,t){const n=new Uint16Array(o.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?FMe(o,e,t):uSe().decode(n)}u(PMe,"decodeUTF16LE");function FMe(o,e,t){const n=[];let i=0;for(let s=0;s<t;s++){const r=IMe(o,e);e+=2,n[i++]=String.fromCharCode(r)}return n.join("")}u(FMe,"compatDecodeUTF16LE");const Jee=class Jee{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return hSe().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Un(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}};u(Jee,"StringBuilder");let Pd=Jee;const T0=class T0{constructor(e,t,n,i,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=r,this._openSet=T0._toSet(this.open),this._closeSet=T0._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}};u(T0,"RichEditBracket");let c3=T0;function OMe(o){const e=o.length;o=o.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=u((r,a)=>{const[l,d]=r,[c,h]=a;return l===c||l===h||d===c||d===h},"areOverlapping"),i=u((r,a)=>{const l=Math.min(r,a),d=Math.max(r,a);for(let c=0;c<e;c++)t[c]===d&&(t[c]=l)},"mergeGroups");for(let r=0;r<e;r++){const a=o[r];for(let l=r+1;l<e;l++){const d=o[l];n(a,d)&&i(t[r],t[l])}}const s=[];for(let r=0;r<e;r++){const a=[],l=[];for(let d=0;d<e;d++)if(t[d]===r){const[c,h]=o[d];a.push(c),l.push(h)}a.length>0&&s.push({open:a,close:l})}return s}u(OMe,"groupFuzzyBrackets");const Qee=class Qee{constructor(e,t){this._richEditBracketsBrand=void 0;const n=OMe(t);this.brackets=n.map((i,s)=>new c3(e,s,i.open,i.close,HMe(i.open,i.close,n,s),VMe(i.open,i.close,n,s))),this.forwardRegex=WMe(this.brackets),this.reversedRegex=BMe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}};u(Qee,"RichEditBrackets");let u3=Qee;function gSe(o,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const r=e[i];for(const a of r.open)a.indexOf(o)>=0&&n.push(a);for(const a of r.close)a.indexOf(o)>=0&&n.push(a)}}u(gSe,"collectSuperstrings");function fSe(o,e){return o.length-e.length}u(fSe,"lengthcmp");function SO(o){if(o.length<=1)return o;const e=[],t=new Set;for(const n of o)t.has(n)||(e.push(n),t.add(n));return e}u(SO,"unique");function HMe(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)gSe(i[s],t,n,i);return i=SO(i),i.sort(fSe),i.reverse(),xO(i)}u(HMe,"getRegexForBracketPair");function VMe(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let s=0,r=i.length;s<r;s++)gSe(i[s],t,n,i);return i=SO(i),i.sort(fSe),i.reverse(),xO(i.map(xZ))}u(VMe,"getReversedRegexForBracketPair");function WMe(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=SO(e),xO(e)}u(WMe,"getRegexForBrackets");function BMe(o){let e=[];for(const t of o){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=SO(e),xO(e.map(xZ))}u(BMe,"getReversedRegexForBrackets");function UMe(o){const e=/^[\w ]+$/.test(o);return o=po(o),e?`\\b${o}\\b`:o}u(UMe,"prepareBracketForRegExp$1");function xO(o){const e=`(${o.map(UMe).join(")|(")})`;return Q1e(e,!0)}u(xO,"createBracketOrRegExp");const xZ=function(){function o(n){const i=new Uint16Array(n.length);let s=0;for(let r=n.length-1;r>=0;r--)i[s++]=n.charCodeAt(r);return hSe().decode(i)}u(o,"reverse");let e=null,t=null;return u(function(i){return e!==i&&(e=i,t=o(e)),t},"toReversedString")}(),ete=class ete{static _findPrevBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=n.length-(s.index||0),a=s[0].length,l=i+r;return new L(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=xZ(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=s.index||0,a=s[0].length;if(a===0)return null;const l=i+r;return new L(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const r=n.substring(i,s);return this.findNextBracketInText(e,t,r,i)}};u(ete,"BracketsUtils");let Qs=ete;const tte=class tte{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return du(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(Aa(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=Qs.findPrevBracketInRange(s,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const c=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:l}:null}};u(tte,"BracketElectricCharacterSupport");let h3=tte;function CE(o){return o.global&&(o.lastIndex=0),!0}u(CE,"resetGlobalRegex");const nte=class nte{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&CE(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&CE(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&CE(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&CE(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};u(nte,"IndentRulesSupport");let g3=nte;const Mh=class Mh{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Mh._createOpenBracketRegExp(t[0]),i=Mh._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:Tn.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,r=this._brackets.length;s<r;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:Tn.Indent}}return null}static _createOpenBracketRegExp(e){let t=po(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Mh._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=po(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Mh._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Be(t),null}}};u(Mh,"OnEnterSupport");let f3=Mh;const at=nt("configurationService");function p3(o,e){const t=Object.create(null);for(const n in o)pSe(t,n,o[n],e);return t}u(p3,"toValuesTree");function pSe(o,e,t,n){const i=e.split("."),s=i.pop();let r=o;for(let a=0;a<i.length;a++){const l=i[a];let d=r[l];switch(typeof d){case"undefined":d=r[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(d)}`);return}r=d}if(typeof r=="object"&&r!==null)try{r[s]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}u(pSe,"addToValueTree");function zMe(o,e){const t=e.split(".");mSe(o,t)}u(zMe,"removeFromValueTree");function mSe(o,e){const t=e.shift();if(e.length===0){delete o[t];return}if(Object.keys(o).indexOf(t)!==-1){const n=o[t];typeof n=="object"&&!Array.isArray(n)&&(mSe(n,e),Object.keys(n).length===0&&delete o[t])}}u(mSe,"doRemoveFromValueTree");function jve(o,e,t){function n(r,a){let l=r;for(const d of a){if(typeof l!="object"||l===null)return;l=l[d]}return l}u(n,"accessSetting");const i=e.split("."),s=n(o,i);return typeof s>"u"?t:s}u(jve,"getConfigurationValue");function GMe(o){return o.replace(/[\[\]]/g,"")}u(GMe,"getLanguageTagSettingPlainKey");const Kt=nt("languageService"),ite=class ite{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};u(ite,"SyncDescriptor");let ur=ite;const bSe=[];function ct(o,e,t){e instanceof ur||(e=new ur(e,[],!!t)),bSe.push([o,e])}u(ct,"registerSingleton");function Kve(){return bSe}u(Kve,"getSingletonServiceDescriptors");const ste=class ste{constructor(){this.data=new Map}add(e,t){Mv(rs(e)),Mv(ss(t)),Mv(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}};u(ste,"RegistryImpl");let m3=ste;const on=new m3,bn=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),TO={JSONContribution:"base.contributions.json"};function jMe(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}u(jMe,"normalizeId");const ote=class ote{constructor(){this._onDidChangeSchema=new V,this.schemasById={}}registerSchema(e,t){this.schemasById[jMe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};u(ote,"JSONContributionRegistry");let b3=ote;const KMe=new b3;on.add(TO.JSONContribution,KMe);const kl={Configuration:"base.contributions.configuration"},I_="vscode://schemas/settings/resourceLanguage",$ve=on.as(TO.JSONContribution),rte=class rte{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new V,this._onDidUpdateConfiguration=new V,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},$ve.registerSchema(I_,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),$ve.registerSchema(I_,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var n;const i=[];for(const{overrides:s,source:r}of e)for(const a in s)if(t.add(a),gu.test(a)){const l=this.configurationDefaultsOverrides.get(a),d=(n=l?.valuesSources)!==null&&n!==void 0?n:new Map;if(r)for(const f of Object.keys(s[a]))d.set(f,r);const c=Object.assign(Object.assign({},l?.value||{}),s[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:c,valuesSources:d});const h=GMe(a),g={type:"object",default:c,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",h),$ref:I_,defaultDefaultValue:c,source:rs(r)?void 0:r,defaultValueSource:r};i.push(...FD(a)),this.configurationProperties[a]=g,this.defaultLanguageConfigurationOverridesNode.properties[a]=g}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(i)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}validateAndRegisterProperties(e,t=!0,n,i,s=3,r){var a;s=no(e.scope)?s:e.scope;const l=e.properties;if(l)for(const c in l){const h=l[c];if(t&&YMe(c,h)){delete l[c];continue}if(h.source=n,h.defaultDefaultValue=l[c].default,this.updatePropertyDefaultValue(c,h),gu.test(c)?h.scope=void 0:(h.scope=no(h.scope)?s:h.scope,h.restricted=no(h.restricted)?!!i?.includes(c):h.restricted),l[c].hasOwnProperty("included")&&!l[c].included){this.excludedConfigurationProperties[c]=l[c],delete l[c];continue}else this.configurationProperties[c]=l[c],!((a=l[c].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[c].policy.name,c);!l[c].deprecationMessage&&l[c].markdownDeprecationMessage&&(l[c].deprecationMessage=l[c].markdownDeprecationMessage),r.add(c)}const d=e.allOf;if(d)for(const c of d)this.validateAndRegisterProperties(c,t,n,i,s,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=u(n=>{const i=n.properties;if(i)for(const r in i)this.updateSchema(r,i[r]);const s=n.allOf;s?.forEach(t)},"register");t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:I_};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),m("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n?.value,s=n?.source;Vs(i)&&(i=t.defaultDefaultValue,s=void 0),Vs(i)&&(i=qMe(t.type)),t.default=i,t.defaultValueSource=s}};u(rte,"ConfigurationRegistry");let _3=rte;const _Se="\\[([^\\]]+)\\]",qve=new RegExp(_Se,"g"),$Me=`^(${_Se})+$`,gu=new RegExp($Me);function FD(o){const e=[];if(gu.test(o)){let t=qve.exec(o);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=qve.exec(o)}}return du(e)}u(FD,"overrideIdentifiersFromKey");function qMe(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}u(qMe,"getDefaultValue");const Ak=new _3;on.add(kl.Configuration,Ak);function YMe(o,e){var t,n,i,s;return o.trim()?gu.test(o)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):Ak.getConfigurationProperties()[o]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):!((t=e.policy)===null||t===void 0)&&t.name&&Ak.getPolicyConfigurations().get((n=e.policy)===null||n===void 0?void 0:n.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,(i=e.policy)===null||i===void 0?void 0:i.name,Ak.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:m("config.property.empty","Cannot register an empty property")}u(YMe,"validateProperty");const XMe={ModesRegistry:"editor.modesRegistry"},ate=class ate{constructor(){this._onDidChangeLanguages=new V,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}};u(ate,"EditorModesRegistry");let v3=ate;const nb=new v3;on.add(XMe.ModesRegistry,nb);const go="plaintext",ZMe=".txt";nb.registerLanguage({id:go,extensions:[ZMe],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[bn.text]});on.as(kl.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);const lte=class lte{constructor(e,t){this.languageId=e;const n=t.brackets?Yve(t.brackets):[],i=new yD(a=>{const l=new Set;return{info:new w3(this,a,l),closing:l}}),s=new yD(a=>{const l=new Set,d=new Set;return{info:new C3(this,a,l,d),opening:l,openingColorized:d}});for(const[a,l]of n){const d=i.get(a),c=s.get(l);d.closing.add(c.info),c.opening.add(d.info)}const r=t.colorizedBracketPairs?Yve(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const d=i.get(a),c=s.get(l);d.closing.add(c.info),c.openingColorized.add(d.info),c.opening.add(d.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}};u(lte,"LanguageBracketsConfiguration");let y3=lte;function Yve(o){return o.filter(([e,t])=>e!==""&&t!=="")}u(Yve,"filterValidBrackets");const dte=class dte{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}};u(dte,"BracketKindBase");let OD=dte;const cte=class cte extends OD{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}};u(cte,"OpeningBracketKind");let w3=cte;const ute=class ute extends OD{constructor(e,t,n,i){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=i,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}};u(ute,"ClosingBracketKind");let C3=ute;var JMe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xve=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const hte=class hte{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}};u(hte,"LanguageConfigurationServiceChangeEvent");let Rv=hte;const Pt=nt("languageConfigurationService");var A1;let S3=(A1=class extends G{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new L3),this.onDidChangeEmitter=this._register(new V),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(x3));this._register(this.configurationService.onDidChangeConfiguration(i=>{const s=i.change.keys.some(a=>n.has(a)),r=i.change.overrides.filter(([a,l])=>l.some(d=>n.has(d))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new Rv(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new Rv(a)))})),this._register(this._registry.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new Rv(i.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=QMe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}},u(A1,"LanguageConfigurationService"),A1);S3=JMe([Xve(0,at),Xve(1,Kt)],S3);function QMe(o,e,t,n){let i=e.getLanguageConfiguration(o);if(!i){if(!n.isRegisteredLanguageId(o))return new Lm(o,{});i=new Lm(o,{})}const s=eAe(i.languageId,t),r=ySe([i.underlyingConfig,s]);return new Lm(i.languageId,r)}u(QMe,"computeConfig");const x3={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function eAe(o,e){const t=e.getValue(x3.brackets,{overrideIdentifier:o}),n=e.getValue(x3.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:Zve(t),colorizedBracketPairs:Zve(n)}}u(eAe,"getCustomizedLanguageConfig");function Zve(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}u(Zve,"validateBracketPairs");function vSe(o,e,t){const n=o.getLineContent(e);let i=Dt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}u(vSe,"getIndentationAtPosition");function Tm(o,e,t){o.tokenization.forceTokenization(e);const n=o.tokenization.getLineTokens(e),i=typeof t>"u"?o.getLineMaxColumn(e)-1:t-1;return CO(n,i)}u(Tm,"getScopedLineTokens");const gte=class gte{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new HD(e,t,++this._order);return this._entries.push(n),this._resolved=null,He(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Lm(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(HD.cmp),ySe(this._entries.map(e=>e.configuration)))}};u(gte,"ComposedLanguageConfiguration");let T3=gte;function ySe(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}u(ySe,"combineLanguageConfigurations");const fte=class fte{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}};u(fte,"LanguageConfigurationContribution");let HD=fte;const pte=class pte{constructor(e){this.languageId=e}};u(pte,"LanguageConfigurationChangeEvent");let VD=pte;const mte=class mte extends G{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._register(this.register(go,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new T3(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new VD(e)),He(()=>{s.dispose(),this._onDidChange.fire(new VD(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}};u(mte,"LanguageConfigurationRegistry");let L3=mte;const K2=class K2{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new f3(this.underlyingConfig):null,this.comments=K2._handleComments(this.underlyingConfig),this.characterPair=new nw(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||gZ,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new g3(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new y3(e,this.underlyingConfig)}getWordDefinition(){return O1e(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new u3(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new h3(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new l3(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}};u(K2,"ResolvedLanguageConfiguration");let Lm=K2;ct(Pt,S3,1);const ib=new class{clone(){return this}equals(o){return this===o}};function TZ(o,e){return new Uy([new By(0,"",o)],e)}u(TZ,"nullTokenize");function LO(o,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0|0|32768|2<<24)>>>0,new Jm(t,e===null?ib:e)}u(LO,"nullTokenizeEncoded");const Xt=nt("modelService"),wSe=Symbol("MicrotaskDelay");var Mo=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},av=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(d){s({value:d,done:a})},r)}};function E3(o){return!!o&&typeof o.then=="function"}u(E3,"isThenable$1");function Fn(o){const e=new En,t=o(e.token),n=new Promise((i,s)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),s(new al)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),i(a)},a=>{r.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}u(Fn,"createCancelablePromise");function EO(o,e,t){return new Promise((n,i)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(t)});o.then(n,i).finally(()=>s.dispose())})}u(EO,"raceCancellation");const bte=class bte{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)throw new Error("Throttler is disposed");if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=u(()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n},"onComplete");this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};u(bte,"Throttler");let k3=bte;const tAe=u((o,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},"timeoutDeferred"),nAe=u(o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},"microtaskDeferred"),_te=class _te{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,s)=>{this.doResolve=i,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=u(()=>{var i;this.deferred=null,(i=this.doResolve)===null||i===void 0||i.call(this,null)},"fn");return this.deferred=t===wSe?nAe(n):tAe(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new al),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}};u(_te,"Delayer");let Uo=_te;const vte=class vte{constructor(e){this.delayer=new Uo(e),this.throttler=new k3}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}};u(vte,"ThrottledDelayer");let WD=vte;function fu(o,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{s.dispose(),t()},o),s=e.onCancellationRequested(()=>{clearTimeout(i),s.dispose(),n(new al)})}):Fn(t=>fu(o,t))}u(fu,"timeout");function pu(o,e=0){const t=setTimeout(o,e);return He(()=>clearTimeout(t))}u(pu,"disposableTimeout");function CSe(o,e=n=>!!n,t=null){let n=0;const i=o.length,s=u(()=>{if(n>=i)return Promise.resolve(t);const r=o[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):s())},"loop");return s()}u(CSe,"first");const yte=class yte{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}};u(yte,"TimeoutTimer");let bo=yte;const wte=class wte{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}};u(wte,"IntervalTimer");let Dg=wte;const Cte=class Cte{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}};u(Cte,"RunOnceScheduler");let Et=Cte,fd;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?fd=u(o=>{N1e(()=>{if(e)return;const t=Date.now()+15;o(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}},"runWhenIdle"):fd=u((o,e)=>{const t=requestIdleCallback(o,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}},"runWhenIdle")})();const Ste=class Ste{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=fd(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}};u(Ste,"IdleValue");let Em=Ste;const xte=class xte{get isRejected(){var e;return((e=this.outcome)===null||e===void 0?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new al)}};u(xte,"DeferredPromise");let sb=xte;var D3;(function(o){function e(n){return Mo(this,void 0,void 0,function*(){let i;const s=yield Promise.all(n.map(r=>r.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return s})}u(e,"settled"),o.settled=e;function t(n){return new Promise((i,s)=>Mo(this,void 0,void 0,function*(){try{yield n(i,s)}catch(r){s(r)}}))}u(t,"withAsyncBody"),o.withAsyncBody=t})(D3||(D3={}));const Xs=class Xs{static fromArray(e){return new Xs(t=>{t.emitMany(e)})}static fromPromise(e){return new Xs(t=>Mo(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Xs(t=>Mo(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>Mo(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Xs(t=>Mo(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,s,r;return Mo(this,void 0,void 0,function*(){var a,l,d,c;try{for(i=!0,s=av(n);r=yield s.next(),a=r.done,!a;i=!0){c=r.value,i=!1;const h=c;t.emitOne(h)}}catch(h){l={error:h}}finally{try{!i&&!a&&(d=s.return)&&(yield d.call(s))}finally{if(l)throw l.error}}})}))}))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new V,queueMicrotask(()=>Mo(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Mo(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Ce.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Xs(n=>Mo(this,void 0,void 0,function*(){var i,s,r,a;try{for(var l=!0,d=av(e),c;c=yield d.next(),i=c.done,!i;l=!0){a=c.value,l=!1;const h=a;n.emitOne(t(h))}}catch(h){s={error:h}}finally{try{!l&&!i&&(r=d.return)&&(yield r.call(d))}finally{if(s)throw s.error}}}))}map(e){return Xs.map(this,e)}static filter(e,t){return new Xs(n=>Mo(this,void 0,void 0,function*(){var i,s,r,a;try{for(var l=!0,d=av(e),c;c=yield d.next(),i=c.done,!i;l=!0){a=c.value,l=!1;const h=a;t(h)&&n.emitOne(h)}}catch(h){s={error:h}}finally{try{!l&&!i&&(r=d.return)&&(yield r.call(d))}finally{if(s)throw s.error}}}))}filter(e){return Xs.filter(this,e)}static coalesce(e){return Xs.filter(e,t=>!!t)}coalesce(){return Xs.coalesce(this)}static toPromise(e){var t,n,i,s,r,a,l;return Mo(this,void 0,void 0,function*(){const d=[];try{for(t=!0,n=av(e);i=yield n.next(),s=i.done,!s;t=!0){l=i.value,t=!1;const c=l;d.push(c)}}catch(c){r={error:c}}finally{try{!t&&!s&&(a=n.return)&&(yield a.call(n))}finally{if(r)throw r.error}}return d})}toPromise(){return Xs.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};u(Xs,"AsyncIterableObject");let Ss=Xs;Ss.EMPTY=Ss.fromArray([]);const Tte=class Tte extends Ss{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}};u(Tte,"CancelableAsyncIterableObject");let M3=Tte;function iAe(o){const e=new En,t=o(e.token);return new M3(e,n=>Mo(this,void 0,void 0,function*(){var i,s,r,a;const l=e.token.onCancellationRequested(()=>{l.dispose(),e.dispose(),n.reject(new al)});try{try{for(var d=!0,c=av(t),h;h=yield c.next(),i=h.done,!i;d=!0){a=h.value,d=!1;const g=a;if(e.token.isCancellationRequested)return;n.emitOne(g)}}catch(g){s={error:g}}finally{try{!d&&!i&&(r=c.return)&&(yield r.call(c))}finally{if(s)throw s.error}}l.dispose(),e.dispose()}catch(g){l.dispose(),e.dispose(),n.reject(g)}}))}u(iAe,"createCancelableAsyncIterable");const sAe="$initialize";let Jve=!1;function A3(o){Ku&&(Jve||(Jve=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(o.message))}u(A3,"logOnceWebWorkerWarning");const Lte=class Lte{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}};u(Lte,"RequestMessage");let I3=Lte;const Ete=class Ete{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}};u(Ete,"ReplyMessage");let BD=Ete;const kte=class kte{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}};u(kte,"SubscribeEventMessage");let N3=kte;const Dte=class Dte{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}};u(Dte,"EventMessage");let R3=Dte;const Mte=class Mte{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}};u(Mte,"UnsubscribeEventMessage");let P3=Mte;const Ate=class Ate{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new I3(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new V({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new N3(this._workerId,n,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new P3(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new BD(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=Rve(i.detail)),this._send(new BD(this._workerId,t,void 0,Rve(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new R3(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}};u(Ate,"SimpleWorkerProtocol");let F3=Ate;const Ite=class Ite extends G{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{i?.(c)})),this._protocol=new F3({sendMessage:(c,h)=>{this._worker.postMessage(c,h)},handleMessage:(c,h)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,h))}catch(g){return Promise.reject(g)}},handleEvent:(c,h)=>{if(xSe(c)){const g=n[c].call(n,h);if(typeof g!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return g}if(SSe(c)){const g=n[c];if(typeof g!="function")throw new Error(`Missing event ${c} on main thread host.`);return g}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?s=r.getConfig():typeof globalThis.requirejs<"u"&&(s=globalThis.requirejs.s.contexts._.config);const a=cZ(n);this._onModuleLoaded=this._protocol.sendMessage(sAe,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,a]);const l=u((c,h)=>this._request(c,h),"proxyMethodRequest"),d=u((c,h)=>this._protocol.listen(c,h),"proxyListen");this._lazyProxy=new Promise((c,h)=>{i=h,this._onModuleLoaded.then(g=>{c(oAe(g,l,d))},g=>{h(g),this._onError("Worker failed to load "+t,g)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}};u(Ite,"SimpleWorkerClient");let O3=Ite;function SSe(o){return o[0]==="o"&&o[1]==="n"&&Va(o.charCodeAt(2))}u(SSe,"propertyIsEvent");function xSe(o){return/^onDynamic/.test(o)&&Va(o.charCodeAt(9))}u(xSe,"propertyIsDynamicEvent");function oAe(o,e,t){const n=u(r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},"createProxyMethod"),i=u(r=>function(a){return t(r,a)},"createProxyDynamicEvent"),s={};for(const r of o){if(xSe(r)){s[r]=i(r);continue}if(SSe(r)){s[r]=t(r,void 0);continue}s[r]=n(r)}return s}u(oAe,"createProxyObject");function Kd(o,e){var t;const n=globalThis.MonacoEnvironment;if(n?.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(o,e)}catch(i){Be(i);return}try{return(t=window.trustedTypes)===null||t===void 0?void 0:t.createPolicy(o,e)}catch(i){Be(i);return}}u(Kd,"createTrustedTypesPolicy");const Qve=Kd("defaultWorkerFactory",{createScriptURL:o=>o});function rAe(o){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",o);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",o);return new Worker(Qve?Qve.createScriptURL(t):t,{name:o})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}u(rAe,"getWorker");function aAe(o){return typeof o.then=="function"}u(aAe,"isPromiseLike");const Nte=class Nte{constructor(e,t,n,i,s){this.id=t,this.label=n;const r=rAe(n);aAe(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)===null||n===void 0||n.then(i=>{try{i.postMessage(e,t)}catch(s){Be(s),Be(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:s}))}})}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}};u(Nte,"WebWorker");let H3=Nte;const $2=class $2{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++$2.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new H3(e,i,this._label||"anonymous"+i,t,s=>{A3(s),this._webWorkerFailedBeforeError=s,n(s)})}};u($2,"DefaultWorkerFactory");let UD=$2;UD.LAST_WORKER_ID=0;const Rte=class Rte{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};u(Rte,"DiffChange");let Fa=Rte;function TSe(o){return kO(o,0)}u(TSe,"hash");function kO(o,e){switch(typeof o){case"object":return o===null?pd(349,e):Array.isArray(o)?dAe(o,e):cAe(o,e);case"string":return LZ(o,e);case"boolean":return lAe(o,e);case"number":return pd(o,e);case"undefined":return pd(937,e);default:return pd(617,e)}}u(kO,"doHash");function pd(o,e){return(e<<5)-e+o|0}u(pd,"numberHash");function lAe(o,e){return pd(o?433:863,e)}u(lAe,"booleanHash");function LZ(o,e){e=pd(149417,e);for(let t=0,n=o.length;t<n;t++)e=pd(o.charCodeAt(t),e);return e}u(LZ,"stringHash");function dAe(o,e){return e=pd(104579,e),o.reduce((t,n)=>kO(n,t),e)}u(dAe,"arrayHash");function cAe(o,e){return e=pd(181387,e),Object.keys(o).sort().reduce((t,n)=>(t=LZ(n,t),kO(o[n],t)),e)}u(cAe,"objectHash");function H4(o,e,t=32){const n=t-e,i=~((1<<n)-1);return(o<<e|(i&o)>>>n)>>>0}u(H4,"leftRotate$2");function e0e(o,e=0,t=o.byteLength,n=0){for(let i=0;i<t;i++)o[e+i]=n}u(e0e,"fill");function uAe(o,e,t="0"){for(;o.length<e;)o=t+o;return o}u(uAe,"leftPad");function N_(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):uAe((o>>>0).toString(16),e/4)}u(N_,"toHexString");const q2=class q2{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,r,a;for(s!==0?(r=s,a=-1,s=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Un(r))if(a+1<t){const d=e.charCodeAt(a+1);Tg(d)?(a++,l=vZ(r,d)):l=65533}else{s=r;break}else Tg(r)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),N_(this._h0)+N_(this._h1)+N_(this._h2)+N_(this._h3)+N_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,e0e(this._buff,this._buffLen),this._buffLen>56&&(this._step(),e0e(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=q2._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,H4(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,r=this._h3,a=this._h4,l,d,c;for(let h=0;h<80;h++)h<20?(l=i&s|~i&r,d=1518500249):h<40?(l=i^s^r,d=1859775393):h<60?(l=i&s|i&r|s&r,d=2400959708):(l=i^s^r,d=3395469782),c=H4(n,5)+l+a+d+e.getUint32(h*4,!1)&4294967295,a=r,r=s,s=H4(i,30),i=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}};u(q2,"StringSHA1");let zD=q2;zD._bigBlock32=new DataView(new ArrayBuffer(320));const Pte=class Pte{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}};u(Pte,"StringDiffSequence");let GD=Pte;function hAe(o,e,t){return new ob(new GD(o),new GD(e)).ComputeDiff(t).changes}u(hAe,"stringDiff");const Fte=class Fte{static Assert(e,t){if(!e)throw new Error(t)}};u(Fte,"Debug");let gc=Fte;const Ote=class Ote{static Copy(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}};u(Ote,"MyArray");let fc=Ote;const Hte=class Hte{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Fa(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}};u(Hte,"DiffChangeHelper");let jD=Hte;const xc=class xc{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,r]=xc._getElements(e),[a,l,d]=xc._getElements(t);this._hasStrings=r&&d,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(xc._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=LZ(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=xc._getStrictElement(this._originalSequence,e),i=xc._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,r);return s&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(gc.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new Fa(e,0,n,i-n+1)]):e<=t?(gc.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Fa(e,t-e+1,n,0)]):(gc.Assert(e===t+1,"originalStart should only be one more than originalEnd"),gc.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,r,a,s),d=r[0],c=a[0];if(l!==null)return l;if(!s[0]){const h=this.ComputeDiffRecursive(e,d,n,c,s);let g=[];return s[0]?g=[new Fa(d+1,t-(d+1)+1,c+1,i-(c+1)+1)]:g=this.ComputeDiffRecursive(d+1,t,c+1,i,s),this.ConcatenateChanges(h,g)}return[new Fa(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b,_,v,y){let w=null,C=null,S=new jD,k=t,T=n,E=f[0]-_[0]-i,D=-1073741824,O=this.m_forwardHistory.length-1;do{const B=E+e;B===k||B<T&&d[B-1]<d[B+1]?(h=d[B+1],p=h-E-i,h<D&&S.MarkNextChange(),D=h,S.AddModifiedElement(h+1,p),E=B+1-e):(h=d[B-1]+1,p=h-E-i,h<D&&S.MarkNextChange(),D=h-1,S.AddOriginalElement(h,p+1),E=B-1-e),O>=0&&(d=this.m_forwardHistory[O],e=d[0],k=1,T=d.length-1)}while(--O>=-1);if(w=S.getReverseChanges(),y[0]){let B=f[0]+1,H=_[0]+1;if(w!==null&&w.length>0){const F=w[w.length-1];B=Math.max(B,F.getOriginalEnd()),H=Math.max(H,F.getModifiedEnd())}C=[new Fa(B,g-B+1,H,b-H+1)]}else{S=new jD,k=r,T=a,E=f[0]-_[0]-l,D=1073741824,O=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const B=E+s;B===k||B<T&&c[B-1]>=c[B+1]?(h=c[B+1]-1,p=h-E-l,h>D&&S.MarkNextChange(),D=h+1,S.AddOriginalElement(h+1,p+1),E=B+1-s):(h=c[B-1],p=h-E-l,h>D&&S.MarkNextChange(),D=h,S.AddModifiedElement(h+1,p+1),E=B-1-s),O>=0&&(c=this.m_reverseHistory[O],s=c[0],k=1,T=c.length-1)}while(--O>=-1);C=S.getChanges()}return this.ConcatenateChanges(w,C)}ComputeRecursionPoint(e,t,n,i,s,r,a){let l=0,d=0,c=0,h=0,g=0,f=0;e--,n--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(i-n),b=p+1,_=new Int32Array(b),v=new Int32Array(b),y=i-n,w=t-e,C=e-n,S=t-i,T=(w-y)%2===0;_[y]=e,v[w]=t,a[0]=!1;for(let E=1;E<=p/2+1;E++){let D=0,O=0;c=this.ClipDiagonalBound(y-E,E,y,b),h=this.ClipDiagonalBound(y+E,E,y,b);for(let H=c;H<=h;H+=2){H===c||H<h&&_[H-1]<_[H+1]?l=_[H+1]:l=_[H-1]+1,d=l-(H-y)-C;const F=l;for(;l<t&&d<i&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(_[H]=l,l+d>D+O&&(D=l,O=d),!T&&Math.abs(H-w)<=E-1&&l>=v[H])return s[0]=l,r[0]=d,F<=v[H]&&1447>0&&E<=1447+1?this.WALKTRACE(y,c,h,C,w,g,f,S,_,v,l,t,s,d,i,r,T,a):null}const B=(D-e+(O-n)-E)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(D,B))return a[0]=!0,s[0]=D,r[0]=O,B>0&&1447>0&&E<=1447+1?this.WALKTRACE(y,c,h,C,w,g,f,S,_,v,l,t,s,d,i,r,T,a):(e++,n++,[new Fa(e,t-e+1,n,i-n+1)]);g=this.ClipDiagonalBound(w-E,E,w,b),f=this.ClipDiagonalBound(w+E,E,w,b);for(let H=g;H<=f;H+=2){H===g||H<f&&v[H-1]>=v[H+1]?l=v[H+1]-1:l=v[H-1],d=l-(H-w)-S;const F=l;for(;l>e&&d>n&&this.ElementsAreEqual(l,d);)l--,d--;if(v[H]=l,T&&Math.abs(H-y)<=E&&l<=_[H])return s[0]=l,r[0]=d,F>=_[H]&&1447>0&&E<=1447+1?this.WALKTRACE(y,c,h,C,w,g,f,S,_,v,l,t,s,d,i,r,T,a):null}if(E<=1447){let H=new Int32Array(h-c+2);H[0]=y-c+1,fc.Copy2(_,c,H,1,h-c+1),this.m_forwardHistory.push(H),H=new Int32Array(f-g+2),H[0]=w-g+1,fc.Copy2(v,g,H,1,f-g+1),this.m_reverseHistory.push(H)}}return this.WALKTRACE(y,c,h,C,w,g,f,S,_,v,l,t,s,d,i,r,T,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,s=h.modifiedStart+h.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const g=n.originalStart-h,f=n.modifiedStart-h;if(g<i||f<s||r&&!this.OriginalElementsAreEqual(g,g+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const b=(g===i&&f===s?5:0)+this._boundaryScore(g,n.originalLength,f,n.modifiedLength);b>d&&(d=b,l=h)}n.originalStart-=l,n.modifiedStart-=l;const c=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],c)){e[t-1]=c[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],r=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,d=l-a,c=i.modifiedStart,h=s.modifiedStart+s.modifiedLength,g=h-c;if(r<5&&d<20&&g<20){const f=this._findBetterContiguousSequence(a,d,c,g,r);if(f){const[p,b]=f;(p!==i.originalStart+i.originalLength||b!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=p-i.originalStart,i.modifiedLength=b-i.modifiedStart,s.originalStart=p+r,s.modifiedStart=b+r,s.originalLength=l-s.originalStart,s.modifiedLength=h-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const r=e+t-s+1,a=n+i-s+1;let l=0,d=0,c=0;for(let h=e;h<r;h++)for(let g=n;g<a;g++){const f=this._contiguousSequenceScore(h,g,s);f>0&&f>l&&(l=f,d=h,c=g)}return l>0?[d,c]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+r}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return fc.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],fc.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return fc.Copy(e,0,i,0,e.length),fc.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(gc.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),gc.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Fa(i,s,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,r=i-n-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?i-1:i-2}}};u(xc,"LcsDiff");let ob=xc;function KD(o){return o<0?0:o>255?255:o|0}u(KD,"toUint8");function Hf(o){return o<0?0:o>4294967295?4294967295:o|0}u(Hf,"toUint32");const Vte=class Vte{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Hf(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Hf(e),t=Hf(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Hf(e),t=Hf(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Hf(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],r=s-this.values[i],e<r)n=i-1;else if(e>=s)t=i+1;else break;return new $D(i,e-r)}};u(Vte,"PrefixSumComputer");let V3=Vte;const Wte=class Wte{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new $D(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=_O(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let s=0;s<n;s++)this._indexBySum[i+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}};u(Wte,"ConstantTimePrefixSumComputer");let W3=Wte;const Bte=class Bte{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}};u(Bte,"PrefixSumIndexOfResult");let $D=Bte;const Ute=class Ute{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new W(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new V3(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=cl(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}};u(Ute,"MirrorTextModel");let B3=Ute;const Y2=class Y2{constructor(e){const t=KD(e);this._defaultValue=t,this._asciiMap=Y2._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=KD(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};u(Y2,"CharacterClassifier");let rb=Y2;const zte=class zte{constructor(){this._actual=new rb(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}};u(zte,"CharacterSet");let ab=zte;const Gte=class Gte{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}};u(Gte,"Uint8Matrix");let U3=Gte;const jte=class jte{constructor(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++){const[a,l,d]=e[s];l>t&&(t=l),a>n&&(n=a),d>n&&(n=d)}t++,n++;const i=new U3(n,t,0);for(let s=0,r=e.length;s<r;s++){const[a,l,d]=e[s];i.set(a,l,d)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}};u(jte,"StateMachine");let z3=jte,V4=null;function gAe(){return V4===null&&(V4=new z3([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),V4}u(gAe,"getStateMachine");let R_=null;function fAe(){if(R_===null){R_=new rb(0);const o=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<o.length;t++)R_.set(o.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)R_.set(e.charCodeAt(t),2)}return R_}u(fAe,"getClassifier");const L0=class L0{static _createLink(e,t,n,i,s){let r=s-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e,t=gAe()){const n=fAe(),i=[];for(let s=1,r=e.getLineCount();s<=r;s++){const a=e.getLineContent(s),l=a.length;let d=0,c=0,h=0,g=1,f=!1,p=!1,b=!1,_=!1;for(;d<l;){let v=!1;const y=a.charCodeAt(d);if(g===13){let w;switch(y){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:b=!0,p=!0,w=0;break;case 93:b=!1,w=p?0:1;break;case 123:_=!0,w=0;break;case 125:w=_?0:1;break;case 39:case 34:case 96:h===y?w=1:h===39||h===34||h===96?w=0:w=1;break;case 42:w=h===42?1:0;break;case 124:w=h===124?1:0;break;case 32:w=b?0:1;break;default:w=n.get(y)}w===1&&(i.push(L0._createLink(n,a,s,c,d)),v=!0)}else if(g===12){let w;y===91?(p=!0,w=0):w=n.get(y),w===1?v=!0:g=13}else g=t.nextState(g,y),g===0&&(v=!0);v&&(g=1,f=!1,p=!1,_=!1,c=d+1,h=y),d++}g===13&&i.push(L0._createLink(n,a,s,c,l))}return i}};u(L0,"LinkComputer");let G3=L0;function pAe(o){return!o||typeof o.getLineCount!="function"||typeof o.getLineContent!="function"?[]:G3.computeLinks(o)}u(pAe,"computeLinks");const Kte=class Kte{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){const r=this.doNavigateValueSet(t,s);if(r)return{range:e,value:r}}if(n&&i){const r=this.doNavigateValueSet(i,s);if(r)return{range:n,value:r}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,r=e.length;i===null&&s<r;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}};u(Kte,"BasicInplaceReplace");let iw=Kte;iw.INSTANCE=new iw;const $te=class $te extends rb{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}};u($te,"WordCharacterClassifier");let j3=$te;function mAe(o){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=o(t)),e[t])}u(mAe,"once");const zo=mAe(o=>new j3(o)),bAe=999,qte=class qte{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=_Ae(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Q1e(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new r3(t,this.wordSeparators?zo(this.wordSeparators):null,n?this.searchString:null)}};u(qte,"SearchParams");let id=qte;function _Ae(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){const n=o.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const i=o.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}u(_Ae,"isMultilineRegexSource");function ph(o,e,t){if(!t)return new kg(o,null);const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new kg(o,n)}u(ph,"createFindMatch");const Yte=class Yte{constructor(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}};u(Yte,"LineFeedCounter");let qD=Yte;const Xte=class Xte{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new Pc(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let d;if(i){const f=i.findLineFeedCountBeforeOffset(s+r.length)-l;d=a+r.length+f}else d=a+r.length;const c=e.getPositionAt(a),h=e.getPositionAt(d);return new L(c.lineNumber,c.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new qD(a):null,d=[];let c=0,h;for(n.reset(0);h=n.next(a);)if(d[c++]=ph(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,i),c>=s)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,r,i,s),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,i,s);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<s;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,r,i,s);if(a<s){const d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,a,l){const d=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,f=g.length,p=t.length;let b=-f;for(;(b=t.indexOf(g,b+f))!==-1;)if((!d||EZ(d,t,p,b,f))&&(r[s++]=new kg(new L(n,b+1+i,n,b+1+f+i),null),s>=l))return s;return s}const c=new Pc(e.wordSeparators,e.regex);let h;c.reset(0);do if(h=c.next(t),h&&(r[s++]=ph(new L(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),s>=l))return s;while(h);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Pc(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new W(t.lineNumber,1),r=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new L(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new qD(l):null;n.reset(t.column-1);const c=n.next(l);return c?ph(this._getMultilineMatchRange(e,r,l,d,c.index,c[0]),c,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new W(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,i);if(l)return l;for(let d=1;d<=s;d++){const c=(r+d-1)%s,h=e.getLineContent(c+1),g=this._findFirstMatchInLine(n,h,c+1,1,i);if(g)return g}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?ph(new L(n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Pc(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new L(1,1,t.lineNumber,t.column),n,i,10*bAe);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new W(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,i);if(l)return l;for(let d=1;d<=s;d++){const c=(s+r-d-1)%s,h=e.getLineContent(c+1),g=this._findLastMatchInLine(n,h,c+1,i);if(g)return g}return null}static _findLastMatchInLine(e,t,n,i){let s=null,r;for(e.reset(0);r=e.next(t);)s=ph(new L(n,r.index+1,n,r.index+1+r[0].length),r,i);return s}};u(Xte,"TextModelSearch");let hp=Xte;function vAe(o,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n);if(o.get(r)!==0)return!0}return!1}u(vAe,"leftIsWordBounday");function yAe(o,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(o.get(s)!==0||s===13||s===10)return!0;if(i>0){const r=e.charCodeAt(n+i-1);if(o.get(r)!==0)return!0}return!1}u(yAe,"rightIsWordBounday");function EZ(o,e,t,n,i){return vAe(o,e,t,n,i)&&yAe(o,e,t,n,i)}u(EZ,"isValidMatch");const Zte=class Zte{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){SD(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||EZ(this._wordSeparators,e,t,i,s))return n}while(n);return null}};u(Zte,"Searcher");let Pc=Zte;const Jte=class Jte{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),r=new YD(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${wAe(Array.from(a))}`,"g");const d=new Pc(null,l),c=[];let h=!1,g,f=0,p=0,b=0;e:for(let _=i,v=s;_<=v;_++){const y=e.getLineContent(_),w=y.length;d.reset(0);do if(g=d.next(y),g){let C=g.index,S=g.index+g[0].length;if(C>0){const D=y.charCodeAt(C-1);Un(D)&&C--}if(S+1<w){const D=y.charCodeAt(S-1);Un(D)&&S++}const k=y.substring(C,S);let T=Py(C+1,gZ,y,0);T&&T.endColumn<=C+1&&(T=null);const E=r.shouldHighlightNonBasicASCII(k,T?T.word:null);if(E!==0){E===3?f++:E===2?p++:E===1?b++:yO();const D=1e3;if(c.length>=D){h=!0;break e}c.push(new L(_,C+1,_,S+1))}}while(g)}return{ranges:c,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const n=new YD(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(s),a=Nd.getLocales().filter(l=>!Nd.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}};u(Jte,"UnicodeTextModelHighlighter");let sw=Jte;function wAe(o,e){return`[${po(o.map(n=>String.fromCodePoint(n)).join(""))}]`}u(wAe,"buildRegExpCharClassExpr");const Qte=class Qte{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Nd.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Xc.codePoints)t0e(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,s=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=ZL(r);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Xc.isInvisibleCharacter(a)&&(s=!0)}return!i&&s?0:this.options.invisibleCharacters&&!t0e(e)&&Xc.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}};u(Qte,"CodePointHighlighter");let YD=Qte;function t0e(o){return o===" "||o===`
`||o==="	"}u(t0e,"isAllowedInvisibleCharacter");const jr=class jr{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{const s=Math.min(e.start,t[n].start),r=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new jr(s,r))}}static tryCreate(e,t){if(!(e>t))return new jr(e,t)}static ofLength(e){return new jr(0,e)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new An(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new jr(this.start+e,this.endExclusive+e)}deltaStart(e){return new jr(this.start+e,this.endExclusive)}deltaEnd(e){return new jr(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new jr(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new jr(t,n)}slice(e){return e.slice(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new An(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new An(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}};u(jr,"OffsetRange");let yt=jr;const X2=class X2{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const i=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new yt(i,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new X2;for(const n of this._sortedRanges){const i=n.intersect(e);i&&t.addRange(i)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}};u(X2,"OffsetRangeSet");let K3=X2;var Zi;let pt=(Zi=class{static fromRange(e){return new Zi(e.startLineNumber,e.endLineNumber)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new Zi(e.startLineNumber,t.startLineNumber),new Zi(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new Zi(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new Zi(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=e[0];for(let n=1;n<e.length;n++)t=this.join(t,e[n]);return t}static join(e,t){if(e.length===0)return t;if(t.length===0)return e;const n=[];let i=0,s=0,r=null;for(;i<e.length||s<t.length;){let a=null;if(i<e.length&&s<t.length){const l=e[i],d=t[s];l.startLineNumber<d.startLineNumber?(a=l,i++):(a=d,s++)}else i<e.length?(a=e[i],i++):(a=t[s],s++);r===null?r=a:r.endLineNumberExclusive>=a.startLineNumber?r=new Zi(r.startLineNumber,Math.max(r.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(r),r=a)}return r!==null&&n.push(r),n}static ofLength(e,t){return new Zi(e,e+t)}static deserialize(e){return new Zi(e[0],e[1])}constructor(e,t){if(e>t)throw new An(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Zi(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Zi(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Zi(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Zi(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new L(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new L(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new yt(this.startLineNumber-1,this.endLineNumberExclusive-1)}},u(Zi,"LineRange"),Zi);const ene=class ene{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}};u(ene,"LinesDiff");let km=ene;const Kp=class Kp{static inverse(e,t,n){const i=[];let s=1,r=1;for(const l of e){const d=new Kp(new pt(s,l.originalRange.startLineNumber),new pt(r,l.modifiedRange.startLineNumber),void 0);d.modifiedRange.isEmpty||i.push(d),s=l.originalRange.endLineNumberExclusive,r=l.modifiedRange.endLineNumberExclusive}const a=new Kp(new pt(s,t+1),new pt(r,n+1),void 0);return a.modifiedRange.isEmpty||i.push(a),i}constructor(e,t,n){this.originalRange=e,this.modifiedRange=t,this.innerChanges=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}get changedLineCount(){return Math.max(this.originalRange.length,this.modifiedRange.length)}flip(){var e;return new Kp(this.modifiedRange,this.originalRange,(e=this.innerChanges)===null||e===void 0?void 0:e.map(t=>t.flip()))}};u(Kp,"LineRangeMapping");let xr=Kp;const Z2=class Z2{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Z2(this.modifiedRange,this.originalRange)}};u(Z2,"RangeMapping");let mu=Z2;const E0=class E0{constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new E0(this.modified,this.original)}join(e){return new E0(this.original.join(e.original),this.modified.join(e.modified))}};u(E0,"SimpleLineRangeMapping");let Mg=E0;const J2=class J2{constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new J2(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};u(J2,"MovedText");let ow=J2;const CAe=3,tne=class tne{computeDiff(e,t,n){var i;const r=new Y3(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const d of r.changes){let c;d.originalEndLineNumber===0?c=new pt(d.originalStartLineNumber+1,d.originalStartLineNumber+1):c=new pt(d.originalStartLineNumber,d.originalEndLineNumber+1);let h;d.modifiedEndLineNumber===0?h=new pt(d.modifiedStartLineNumber+1,d.modifiedStartLineNumber+1):h=new pt(d.modifiedStartLineNumber,d.modifiedEndLineNumber+1);let g=new xr(c,h,(i=d.charChanges)===null||i===void 0?void 0:i.map(f=>new mu(new L(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new L(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));l&&(l.modifiedRange.endLineNumberExclusive===g.modifiedRange.startLineNumber||l.originalRange.endLineNumberExclusive===g.originalRange.startLineNumber)&&(g=new xr(l.originalRange.join(g.originalRange),l.modifiedRange.join(g.modifiedRange),l.innerChanges&&g.innerChanges?l.innerChanges.concat(g.innerChanges):void 0),a.pop()),a.push(g),l=g}return Jy(()=>aSe(a,(d,c)=>c.originalRange.startLineNumber-d.originalRange.endLineNumberExclusive===c.modifiedRange.startLineNumber-d.modifiedRange.endLineNumberExclusive&&d.originalRange.endLineNumberExclusive<c.originalRange.startLineNumber&&d.modifiedRange.endLineNumberExclusive<c.modifiedRange.startLineNumber)),new km(a,[],r.quitEarly)}};u(tne,"LegacyLinesDiffComputer");let $3=tne;function LSe(o,e,t,n){return new ob(o,e,t).ComputeDiff(n)}u(LSe,"computeDiff");var I1;let n0e=(I1=class{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=X3(e[i],1),n[i]=Z3(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],r=[];let a=0;for(let l=t;l<=n;l++){const d=this.lines[l],c=e?this._startColumns[l]:1,h=e?this._endColumns[l]:d.length+1;for(let g=c;g<h;g++)i[a]=d.charCodeAt(g-1),s[a]=l+1,r[a]=g,a++;!e&&l<n&&(i[a]=10,s[a]=l+1,r[a]=d.length+1,a++)}return new q3(i,s,r)}},u(I1,"LineSequence"),I1);const nne=class nne{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}};u(nne,"CharSequence");let q3=nne;const Q2=class Q2{constructor(e,t,n,i,s,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),d=n.getStartColumn(e.modifiedStart),c=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Q2(i,s,r,a,l,d,c,h)}};u(Q2,"CharChange");let Dm=Q2;function SAe(o){if(o.length<=1)return o;const e=[o[0]];let t=e[0];for(let n=1,i=o.length;n<i;n++){const s=o[n],r=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<CAe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}u(SAe,"postProcessCharChanges");const eP=class eP{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,r,a){let l,d,c,h,g;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,d=0):(l=n.getStartLineNumber(t.originalStart),d=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(c=i.getStartLineNumber(t.modifiedStart)-1,h=0):(c=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&p.getElements().length>0){let b=LSe(f,p,s,!0).changes;a&&(b=SAe(b)),g=[];for(let _=0,v=b.length;_<v;_++)g.push(Dm.createFromDiffChange(b[_],f,p))}}return new eP(l,d,c,h,g)}};u(eP,"LineChange");let Pv=eP;const ine=class ine{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new n0e(e),this.modified=new n0e(t),this.continueLineDiff=i0e(n.maxComputationTime),this.continueCharDiff=i0e(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=LSe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,d=t.length;l<d;l++)a.push(Pv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,r=0;for(let a=-1,l=t.length;a<l;a++){const d=a+1<l?t[a+1]:null,c=d?d.originalStart:this.originalLines.length,h=d?d.modifiedStart:this.modifiedLines.length;for(;s<c&&r<h;){const g=this.originalLines[s],f=this.modifiedLines[r];if(g!==f){{let p=X3(g,1),b=X3(f,1);for(;p>1&&b>1;){const _=g.charCodeAt(p-2),v=f.charCodeAt(b-2);if(_!==v)break;p--,b--}(p>1||b>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,p,r+1,1,b)}{let p=Z3(g,1),b=Z3(f,1);const _=g.length+1,v=f.length+1;for(;p<_&&b<v;){const y=g.charCodeAt(p-1),w=g.charCodeAt(b-1);if(y!==w)break;p++,b++}(p<_||b<v)&&this._pushTrimWhitespaceCharChange(i,s+1,p,_,r+1,b,v)}}s++,r++}d&&(i.push(Pv.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=d.originalLength,r+=d.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new Dm(t,n,t,i,s,r,s,a)]),e.push(new Pv(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,r,a){const l=e.length;if(l===0)return!1;const d=e[l-1];return d.originalEndLineNumber===0||d.modifiedEndLineNumber===0?!1:d.originalEndLineNumber===t&&d.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new Dm(t,n,t,i,s,r,s,a)),!0):d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===s?(d.originalEndLineNumber=t,d.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new Dm(t,n,t,i,s,r,s,a)),!0):!1}};u(ine,"DiffComputer");let Y3=ine;function X3(o,e){const t=$i(o);return t===-1?e:t+1}u(X3,"getFirstNonBlankColumn");function Z3(o,e){const t=ha(o);return t===-1?e:t+2}u(Z3,"getLastNonBlankColumn");function i0e(o){if(o===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<o}u(i0e,"createContinueProcessingPredicate");const sne=class sne{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}};u(sne,"SetMap");let rw=sne;const k0=class k0{static trivial(e,t){return new k0([new Go(new yt(0,e.length),new yt(0,t.length))],!1)}static trivialTimedOut(e,t){return new k0([new Go(new yt(0,e.length),new yt(0,t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}};u(k0,"DiffAlgorithmResult");let Zc=k0;const $p=class $p{constructor(e,t){this.seq1Range=e,this.seq2Range=t}reverse(){return new $p(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new $p(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new $p(this.seq1Range.delta(e),this.seq2Range.delta(e))}};u($p,"SequenceDiff");let Go=$p;const one=class one{isValid(){return!0}};u(one,"InfiniteTimeout");let Ag=one;Ag.instance=new Ag;const rne=class rne{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new An("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}};u(rne,"DateTimeout");let J3=rne;const ane=class ane{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}};u(ane,"Array2D");let Fv=ane;const lne=class lne{compute(e,t,n=Ag.instance,i){if(e.length===0||t.length===0)return Zc.trivial(e,t);const s=new Fv(e.length,t.length),r=new Fv(e.length,t.length),a=new Fv(e.length,t.length);for(let p=0;p<e.length;p++)for(let b=0;b<t.length;b++){if(!n.isValid())return Zc.trivialTimedOut(e,t);const _=p===0?0:s.get(p-1,b),v=b===0?0:s.get(p,b-1);let y;e.getElement(p)===t.getElement(b)?(p===0||b===0?y=0:y=s.get(p-1,b-1),p>0&&b>0&&r.get(p-1,b-1)===3&&(y+=a.get(p-1,b-1)),y+=i?i(p,b):1):y=-1;const w=Math.max(_,v,y);if(w===y){const C=p>0&&b>0?a.get(p-1,b-1):0;a.set(p,b,C+1),r.set(p,b,3)}else w===_?(a.set(p,b,0),r.set(p,b,1)):w===v&&(a.set(p,b,0),r.set(p,b,2));s.set(p,b,w)}const l=[];let d=e.length,c=t.length;function h(p,b){(p+1!==d||b+1!==c)&&l.push(new Go(new yt(p+1,d),new yt(b+1,c))),d=p,c=b}u(h,"reportDecreasingAligningPositions");let g=e.length-1,f=t.length-1;for(;g>=0&&f>=0;)r.get(g,f)===3?(h(g,f),g--,f--):r.get(g,f)===1?g--:f--;return h(-1,-1),l.reverse(),new Zc(l,!1)}};u(lne,"DynamicProgrammingDiffing");let Q3=lne;function s0e(o,e,t){let n=t;return n=EAe(o,e,n),n=kAe(o,e,n),n}u(s0e,"optimizeSequenceDiffs");function xAe(o,e,t){const n=[];for(const i of t){const s=n[n.length-1];if(!s){n.push(i);continue}i.seq1Range.start-s.seq1Range.endExclusive<=2||i.seq2Range.start-s.seq2Range.endExclusive<=2?n[n.length-1]=new Go(s.seq1Range.join(i.seq1Range),s.seq2Range.join(i.seq2Range)):n.push(i)}return n}u(xAe,"smoothenSequenceDiffs");function TAe(o,e,t){let n=t;if(n.length===0)return n;let i=0,s;do{s=!1;const r=[n[0]];for(let a=1;a<n.length;a++){let c=function(g,f){const p=new yt(d.seq1Range.endExclusive,l.seq1Range.start);return o.getText(p).replace(/\s/g,"").length<=4&&(g.seq1Range.length+g.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};u(c,"shouldJoinDiffs");const l=n[a],d=r[r.length-1];c(d,l)?(s=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}n=r}while(i++<10&&s);return n}u(TAe,"removeRandomLineMatches");function LAe(o,e,t){let n=t;if(n.length===0)return n;let i=0,s;do{s=!1;const r=[n[0]];for(let a=1;a<n.length;a++){let c=function(g,f){const p=new yt(d.seq1Range.endExclusive,l.seq1Range.start);if(o.countLinesIn(p)>5||p.length>500)return!1;const _=o.getText(p).trim();if(_.length>20||_.split(/\r\n|\r|\n/).length>1)return!1;const v=o.countLinesIn(g.seq1Range),y=g.seq1Range.length,w=e.countLinesIn(g.seq2Range),C=g.seq2Range.length,S=o.countLinesIn(f.seq1Range),k=f.seq1Range.length,T=e.countLinesIn(f.seq2Range),E=f.seq2Range.length,D=2*40+50;function O(B){return Math.min(B,D)}return u(O,"cap"),Math.pow(Math.pow(O(v*40+y),1.5)+Math.pow(O(w*40+C),1.5),1.5)+Math.pow(Math.pow(O(S*40+k),1.5)+Math.pow(O(T*40+E),1.5),1.5)>Math.pow(Math.pow(D,1.5),1.5)*1.3};u(c,"shouldJoinDiffs");const l=n[a],d=r[r.length-1];c(d,l)?(s=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}n=r}while(i++<10&&s);for(let r=0;r<n.length;r++){const a=n[r];let l=a.seq1Range,d=a.seq2Range;const c=o.extendToFullLines(a.seq1Range),h=o.getText(new yt(c.start,a.seq1Range.start));h.length>0&&h.trim().length<=3&&a.seq1Range.length+a.seq2Range.length>100&&(l=a.seq1Range.deltaStart(-h.length),d=a.seq2Range.deltaStart(-h.length));const g=o.getText(new yt(a.seq1Range.endExclusive,c.endExclusive));g.length>0&&g.trim().length<=3&&a.seq1Range.length+a.seq2Range.length>150&&(l=l.deltaEnd(g.length),d=d.deltaEnd(g.length)),n[r]=new Go(l,d)}return n}u(LAe,"removeRandomMatches");function EAe(o,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let s=1;s<t.length;s++){const r=n[n.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let d;for(d=1;d<=l&&!(o.getElement(a.seq1Range.start-d)!==o.getElement(a.seq1Range.endExclusive-d)||e.getElement(a.seq2Range.start-d)!==e.getElement(a.seq2Range.endExclusive-d));d++);if(d--,d===l){n[n.length-1]=new Go(new yt(r.seq1Range.start,a.seq1Range.endExclusive-l),new yt(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-d)}n.push(a)}const i=[];for(let s=0;s<n.length-1;s++){const r=n[s+1];let a=n[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let d;for(d=0;d<l&&!(o.getElement(a.seq1Range.start+d)!==o.getElement(a.seq1Range.endExclusive+d)||e.getElement(a.seq2Range.start+d)!==e.getElement(a.seq2Range.endExclusive+d));d++);if(d===l){n[s+1]=new Go(new yt(a.seq1Range.start+l,r.seq1Range.endExclusive),new yt(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}d>0&&(a=a.delta(d))}i.push(a)}return n.length>0&&i.push(n[n.length-1]),i}u(EAe,"joinSequenceDiffs");function kAe(o,e,t){if(!o.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const i=n>0?t[n-1]:void 0,s=t[n],r=n+1<t.length?t[n+1]:void 0,a=new yt(i?i.seq1Range.start+1:0,r?r.seq1Range.endExclusive-1:o.length),l=new yt(i?i.seq2Range.start+1:0,r?r.seq2Range.endExclusive-1:e.length);s.seq1Range.isEmpty?t[n]=o0e(s,o,e,a,l):s.seq2Range.isEmpty&&(t[n]=o0e(s.reverse(),e,o,l,a).reverse())}return t}u(kAe,"shiftSequenceDiffs");function o0e(o,e,t,n,i){let r=1;for(;o.seq1Range.start-r>=n.start&&o.seq2Range.start-r>=i.start&&t.isStronglyEqual(o.seq2Range.start-r,o.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;o.seq1Range.start+a<n.endExclusive&&o.seq2Range.endExclusive+a<i.endExclusive&&t.isStronglyEqual(o.seq2Range.start+a,o.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return o;let l=0,d=-1;for(let c=-r;c<=a;c++){const h=o.seq2Range.start+c,g=o.seq2Range.endExclusive+c,f=o.seq1Range.start+c,p=e.getBoundaryScore(f)+t.getBoundaryScore(h)+t.getBoundaryScore(g);p>d&&(d=p,l=c)}return o.delta(l)}u(o0e,"shiftDiffToBetterPosition");const dne=class dne{compute(e,t,n=Ag.instance){if(e.length===0||t.length===0)return Zc.trivial(e,t);function i(f,p){for(;f<e.length&&p<t.length&&e.getElement(f)===t.getElement(p);)f++,p++;return f}u(i,"getXAfterSnake");let s=0;const r=new t9;r.set(0,i(0,0));const a=new n9;a.set(0,r.get(0)===0?null:new XD(null,0,0,r.get(0)));let l=0;e:for(;;){if(s++,!n.isValid())return Zc.trivialTimedOut(e,t);const f=-Math.min(s,t.length+s%2),p=Math.min(s,e.length+s%2);for(l=f;l<=p;l+=2){const b=l===p?-1:r.get(l+1),_=l===f?-1:r.get(l-1)+1,v=Math.min(Math.max(b,_),e.length),y=v-l;if(v>e.length||y>t.length)continue;const w=i(v,y);r.set(l,w);const C=v===b?a.get(l+1):a.get(l-1);if(a.set(l,w!==v?new XD(C,v,y,w-v):C),r.get(l)===e.length&&r.get(l)-l===t.length)break e}}let d=a.get(l);const c=[];let h=e.length,g=t.length;for(;;){const f=d?d.x+d.length:0,p=d?d.y+d.length:0;if((f!==h||p!==g)&&c.push(new Go(new yt(f,h),new yt(p,g))),!d)break;h=d.x,g=d.y,d=d.prev}return c.reverse(),new Zc(c,!1)}};u(dne,"MyersDiffAlgorithm");let e9=dne;const cne=class cne{constructor(e,t,n,i){this.prev=e,this.x=t,this.y=n,this.length=i}};u(cne,"SnakePath");let XD=cne;const une=class une{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}};u(une,"FastInt32Array");let t9=une;const hne=class hne{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}};u(hne,"FastArrayNegativeIndices");let n9=hne;const gne=class gne{constructor(){this.dynamicProgrammingDiffing=new Q3,this.myersDiffingAlgorithm=new e9}computeDiff(e,t,n){if(e.length<=1&&jn(e,t,(S,k)=>S===k))return new km([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new km([new xr(new pt(1,e.length+1),new pt(1,t.length+1),[new mu(new L(1,1,e.length,e[0].length+1),new L(1,1,t.length,t[0].length+1))])],[],!1);const i=n.maxComputationTimeMs===0?Ag.instance:new J3(n.maxComputationTimeMs),s=!n.ignoreTrimWhitespace,r=new Map;function a(S){let k=r.get(S);return k===void 0&&(k=r.size,r.set(S,k)),k}u(a,"getOrCreateHash");const l=e.map(S=>a(S.trim())),d=t.map(S=>a(S.trim())),c=new QD(l,e),h=new QD(d,t),g=(()=>c.length+h.length<1700?this.dynamicProgrammingDiffing.compute(c,h,i,(S,k)=>e[S]===t[k]?t[k].length===0?.1:1+Math.log(1+t[k].length):.99):this.myersDiffingAlgorithm.compute(c,h))();let f=g.diffs,p=g.hitTimeout;f=s0e(c,h,f),f=TAe(c,h,f);const b=[],_=u(S=>{if(s)for(let k=0;k<S;k++){const T=v+k,E=y+k;if(e[T]!==t[E]){const D=this.refineDiff(e,t,new Go(new yt(T,T+1),new yt(E,E+1)),i,s);for(const O of D.mappings)b.push(O);D.hitTimeout&&(p=!0)}}},"scanForWhitespaceChanges");let v=0,y=0;for(const S of f){Jy(()=>S.seq1Range.start-v===S.seq2Range.start-y);const k=S.seq1Range.start-v;_(k),v=S.seq1Range.endExclusive,y=S.seq2Range.endExclusive;const T=this.refineDiff(e,t,S,i,s);T.hitTimeout&&(p=!0);for(const E of T.mappings)b.push(E)}_(e.length-v);const w=a0e(b,e,t);let C=[];return n.computeMoves&&(C=this.computeMoves(w,e,t,l,d,i,s)),Jy(()=>{function S(T,E){if(T.lineNumber<1||T.lineNumber>E.length)return!1;const D=E[T.lineNumber-1];return!(T.column<1||T.column>D.length+1)}u(S,"validatePosition");function k(T,E){return!(T.startLineNumber<1||T.startLineNumber>E.length+1||T.endLineNumberExclusive<1||T.endLineNumberExclusive>E.length+1)}u(k,"validateRange");for(const T of w){if(!T.innerChanges)return!1;for(const E of T.innerChanges)if(!(S(E.modifiedRange.getStartPosition(),t)&&S(E.modifiedRange.getEndPosition(),t)&&S(E.originalRange.getStartPosition(),e)&&S(E.originalRange.getEndPosition(),e)))return!1;if(!k(T.modifiedRange,t)||!k(T.originalRange,e))return!1}return!0}),new km(w,C,p)}computeMoves(e,t,n,i,s,r,a){const l=[],d=e.filter(w=>w.modifiedRange.isEmpty&&w.originalRange.length>=3).map(w=>new tM(w.originalRange,t,w)),c=new Set(e.filter(w=>w.originalRange.isEmpty&&w.modifiedRange.length>=3).map(w=>new tM(w.modifiedRange,n,w))),h=new Set;for(const w of d){let C=-1,S;for(const k of c){const T=w.computeSimilarity(k);T>C&&(C=T,S=k)}if(C>.9&&S&&(c.delete(S),l.push(new Mg(w.range,S.range)),h.add(w.source),h.add(S.source)),!r.isValid())return[]}const g=new rw;for(const w of e)if(!h.has(w))for(let C=w.originalRange.startLineNumber;C<w.originalRange.endLineNumberExclusive-2;C++){const S=`${i[C-1]}:${i[C+1-1]}:${i[C+2-1]}`;g.add(S,{range:new pt(C,C+3)})}const f=[];e.sort(_r(w=>w.modifiedRange.startLineNumber,gd));for(const w of e){if(h.has(w))continue;let C=[];for(let S=w.modifiedRange.startLineNumber;S<w.modifiedRange.endLineNumberExclusive-2;S++){const k=`${s[S-1]}:${s[S+1-1]}:${s[S+2-1]}`,T=new pt(S,S+3),E=[];g.forEach(k,({range:D})=>{for(const B of C)if(B.originalLineRange.endLineNumberExclusive+1===D.endLineNumberExclusive&&B.modifiedLineRange.endLineNumberExclusive+1===T.endLineNumberExclusive){B.originalLineRange=new pt(B.originalLineRange.startLineNumber,D.endLineNumberExclusive),B.modifiedLineRange=new pt(B.modifiedLineRange.startLineNumber,T.endLineNumberExclusive),E.push(B);return}const O={modifiedLineRange:T,originalLineRange:D};f.push(O),E.push(O)}),C=E}if(!r.isValid())return[]}f.sort(L1e(_r(w=>w.modifiedLineRange.length,gd)));const p=new JD,b=new JD;for(const w of f){const C=w.modifiedLineRange.startLineNumber-w.originalLineRange.startLineNumber,S=p.subtractFrom(w.modifiedLineRange),k=b.subtractFrom(w.originalLineRange).map(E=>E.delta(C)),T=DAe(S,k);for(const E of T){if(E.length<3)continue;const D=E,O=E.delta(-C);l.push(new Mg(O,D)),p.addRange(D),b.addRange(O)}}if(l.sort(_r(w=>w.original.startLineNumber,gd)),l.length===0)return[];let _=[l[0]];for(let w=1;w<l.length;w++){const C=_[_.length-1],S=l[w],k=S.original.startLineNumber-C.original.endLineNumberExclusive,T=S.modified.startLineNumber-C.modified.endLineNumberExclusive;if(k>=0&&T>=0&&k+T<=2){_[_.length-1]=C.join(S);continue}S.original.toOffsetRange().slice(t).map(O=>O.trim()).join(`
`).length<=10||_.push(S)}const v=i9.createOfSorted(e,w=>w.originalRange.endLineNumberExclusive,gd);return _=_.filter(w=>{const C=v.findLastItemBeforeOrEqual(w.original.startLineNumber)||new xr(new pt(1,1),new pt(1,1),[]),S=w.modified.startLineNumber-C.modifiedRange.endLineNumberExclusive,k=w.original.startLineNumber-C.originalRange.endLineNumberExclusive;return S!==k}),_.map(w=>{const C=this.refineDiff(t,n,new Go(w.original.toOffsetRange(),w.modified.toOffsetRange()),r,a),S=a0e(C.mappings,t,n,!0);return new ow(w,S)})}refineDiff(e,t,n,i,s){const r=new eM(e,n.seq1Range,s),a=new eM(t,n.seq2Range,s),l=r.length+a.length<500?this.dynamicProgrammingDiffing.compute(r,a,i):this.myersDiffingAlgorithm.compute(r,a,i);let d=l.diffs;return d=s0e(r,a,d),d=MAe(r,a,d),d=xAe(r,a,d),d=LAe(r,a,d),{mappings:d.map(h=>new mu(r.translateRange(h.seq1Range),a.translateRange(h.seq2Range))),hitTimeout:l.hitTimeout}}};u(gne,"AdvancedLinesDiffComputer");let ZD=gne;const tP=class tP{static createOfSorted(e,t,n){return new tP(e,t,n)}constructor(e,t,n){this._items=e,this._itemToDomain=t,this._domainComparator=n,this._currentIdx=0,this._lastValue=void 0,this._hasLastValue=!1}findLastItemBeforeOrEqual(e){if(this._hasLastValue&&yg.isLessThan(this._domainComparator(e,this._lastValue)))throw new An;for(this._lastValue=e,this._hasLastValue=!0;this._currentIdx<this._items.length&&yg.isLessThanOrEqual(this._domainComparator(this._itemToDomain(this._items[this._currentIdx]),e));)this._currentIdx++;return this._currentIdx===0?void 0:this._items[this._currentIdx-1]}};u(tP,"MonotonousFinder");let i9=tP;function DAe(o,e){const t=[];let n=0,i=0;for(;n<o.length&&i<e.length;){const s=o[n],r=e[i],a=s.intersect(r);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<r.endLineNumberExclusive?n++:i++}return t}u(DAe,"intersectRanges");const fne=class fne{constructor(){this._normalizedRanges=[]}addRange(e){const t=r0e(this._normalizedRanges.findIndex(i=>i.endLineNumberExclusive>=e.startLineNumber),this._normalizedRanges.length),n=uV(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{const i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}subtractFrom(e){const t=r0e(this._normalizedRanges.findIndex(r=>r.endLineNumberExclusive>=e.startLineNumber),this._normalizedRanges.length),n=uV(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return[e];const i=[];let s=e.startLineNumber;for(let r=t;r<n;r++){const a=this._normalizedRanges[r];a.startLineNumber>s&&i.push(new pt(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&i.push(new pt(s,e.endLineNumberExclusive)),i}};u(fne,"LineRangeSet");let JD=fne;function r0e(o,e){return o===-1?e:o}u(r0e,"mapMinusOne");function MAe(o,e,t){const n=[];let i;function s(){if(!i)return;const a=i.s1Range.length-i.deleted;i.s2Range.length-i.added,Math.max(i.deleted,i.added)+(i.count-1)>a&&n.push(new Go(i.s1Range,i.s2Range)),i=void 0}u(s,"maybePushWordToAdditional");for(const a of t){let l=function(f,p){var b,_,v,y;if(!i||!i.s1Range.containsRange(f)||!i.s2Range.containsRange(p))if(i&&!(i.s1Range.endExclusive<f.start&&i.s2Range.endExclusive<p.start)){const S=yt.tryCreate(i.s1Range.endExclusive,f.start),k=yt.tryCreate(i.s2Range.endExclusive,p.start);i.deleted+=(b=S?.length)!==null&&b!==void 0?b:0,i.added+=(_=k?.length)!==null&&_!==void 0?_:0,i.s1Range=i.s1Range.join(f),i.s2Range=i.s2Range.join(p)}else s(),i={added:0,deleted:0,count:0,s1Range:f,s2Range:p};const w=f.intersect(a.seq1Range),C=p.intersect(a.seq2Range);i.count++,i.deleted+=(v=w?.length)!==null&&v!==void 0?v:0,i.added+=(y=C?.length)!==null&&y!==void 0?y:0};u(l,"processWord");const d=o.findWordContaining(a.seq1Range.start-1),c=e.findWordContaining(a.seq2Range.start-1),h=o.findWordContaining(a.seq1Range.endExclusive),g=e.findWordContaining(a.seq2Range.endExclusive);d&&h&&c&&g&&d.equals(h)&&c.equals(g)?l(d,c):(d&&c&&l(d,c),h&&g&&l(h,g))}return s(),AAe(t,n)}u(MAe,"coverFullWords");function AAe(o,e){const t=[];for(;o.length>0||e.length>0;){const n=o[0],i=e[0];let s;n&&(!i||n.seq1Range.start<i.seq1Range.start)?s=o.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}u(AAe,"mergeSequenceDiffs");function a0e(o,e,t,n=!1){const i=[];for(const s of NAe(o.map(r=>IAe(r,e,t)),(r,a)=>r.originalRange.overlapOrTouch(a.originalRange)||r.modifiedRange.overlapOrTouch(a.modifiedRange))){const r=s[0],a=s[s.length-1];i.push(new xr(r.originalRange.join(a.originalRange),r.modifiedRange.join(a.modifiedRange),s.map(l=>l.innerChanges[0])))}return Jy(()=>!n&&i.length>0&&i[0].originalRange.startLineNumber!==i[0].modifiedRange.startLineNumber?!1:aSe(i,(s,r)=>r.originalRange.startLineNumber-s.originalRange.endLineNumberExclusive===r.modifiedRange.startLineNumber-s.modifiedRange.endLineNumberExclusive&&s.originalRange.endLineNumberExclusive<r.originalRange.startLineNumber&&s.modifiedRange.endLineNumberExclusive<r.modifiedRange.startLineNumber)),i}u(a0e,"lineRangeMappingFromRangeMappings");function IAe(o,e,t){let n=0,i=0;o.modifiedRange.endColumn===1&&o.originalRange.endColumn===1&&o.originalRange.startLineNumber+n<=o.originalRange.endLineNumber&&o.modifiedRange.startLineNumber+n<=o.modifiedRange.endLineNumber&&(i=-1),o.modifiedRange.startColumn-1>=t[o.modifiedRange.startLineNumber-1].length&&o.originalRange.startColumn-1>=e[o.originalRange.startLineNumber-1].length&&o.originalRange.startLineNumber<=o.originalRange.endLineNumber+i&&o.modifiedRange.startLineNumber<=o.modifiedRange.endLineNumber+i&&(n=1);const s=new pt(o.originalRange.startLineNumber+n,o.originalRange.endLineNumber+1+i),r=new pt(o.modifiedRange.startLineNumber+n,o.modifiedRange.endLineNumber+1+i);return new xr(s,r,[o])}u(IAe,"getLineRangeMapping");function*NAe(o,e){let t,n;for(const i of o)n!==void 0&&e(n,i)?t.push(i):(t&&(yield t),t=[i]),n=i;t&&(yield t)}u(NAe,"group$1");const pne=class pne{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:l0e(this.lines[e-1]),n=e===this.lines.length?0:l0e(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}};u(pne,"LineSequence");let QD=pne;function l0e(o){let e=0;for(;e<o.length&&(o.charCodeAt(e)===32||o.charCodeAt(e)===9);)e++;return e}u(l0e,"getIndentation");const mne=class mne{constructor(e,t,n){this.lines=e,this.considerWhitespaceChanges=n,this.elements=[],this.firstCharOffsetByLineMinusOne=[],this.additionalOffsetByLine=[];let i=!1;t.start>0&&t.endExclusive>=e.length&&(t=new yt(t.start-1,t.endExclusive),i=!0),this.lineRange=t;for(let s=this.lineRange.start;s<this.lineRange.endExclusive;s++){let r=e[s],a=0;if(i)a=r.length,r="",i=!1;else if(!n){const l=r.trimStart();a=r.length-l.length,r=l.trimEnd()}this.additionalOffsetByLine.push(a);for(let l=0;l<r.length;l++)this.elements.push(r.charCodeAt(l));s<e.length-1&&(this.elements.push(`
`.charCodeAt(0)),this.firstCharOffsetByLineMinusOne[s-this.lineRange.start]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new yt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=c0e(e>0?this.elements[e-1]:-1),n=c0e(e<this.elements.length?this.elements[e]:-1);if(t===6&&n===7)return 0;let i=0;return t!==n&&(i+=10,n===1&&(i+=1)),i+=d0e(t),i+=d0e(n),i}translateOffset(e){if(this.lineRange.isEmpty)return new W(this.lineRange.start+1,1);let t=0,n=this.firstCharOffsetByLineMinusOne.length;for(;t<n;){const s=Math.floor((t+n)/2);this.firstCharOffsetByLineMinusOne[s]>e?n=s:t=s+1}const i=t===0?0:this.firstCharOffsetByLineMinusOne[t-1];return new W(this.lineRange.start+t+1,e-i+1+this.additionalOffsetByLine[t])}translateRange(e){return L.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!W4(this.elements[e]))return;let t=e;for(;t>0&&W4(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&W4(this.elements[n]);)n++;return new yt(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,n;const i=(t=PAe(this.firstCharOffsetByLineMinusOne,r=>r<=e.start))!==null&&t!==void 0?t:0,s=(n=OAe(this.firstCharOffsetByLineMinusOne,r=>e.endExclusive<=r))!==null&&n!==void 0?n:this.elements.length;return new yt(i,s)}};u(mne,"LinesSliceCharSequence");let eM=mne;function RAe(o,e){let t=0,n=o.length;for(;t<n;){const i=Math.floor((t+n)/2);e(o[i])?t=i+1:n=i}return t-1}u(RAe,"findLastIdxMonotonous");function PAe(o,e){const t=RAe(o,e);return t===-1?void 0:o[t]}u(PAe,"findLastMonotonous");function FAe(o,e){let t=0,n=o.length;for(;t<n;){const i=Math.floor((t+n)/2);e(o[i])?n=i:t=i+1}return t}u(FAe,"findFirstIdxMonotonous");function OAe(o,e){const t=FAe(o,e);return t===o.length?void 0:o[t]}u(OAe,"findFirstMonotonous");function W4(o){return o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57}u(W4,"isWordChar");const HAe={0:0,1:0,2:0,3:10,4:2,5:3,6:10,7:10};function d0e(o){return HAe[o]}u(d0e,"getCategoryBoundaryScore");function c0e(o){return o===10?7:o===13?6:VAe(o)?5:o>=97&&o<=122?0:o>=65&&o<=90?1:o>=48&&o<=57?2:o===-1?3:4}u(c0e,"getCategory");function VAe(o){return o===32||o===9}u(VAe,"isSpace");const B4=new Map;function u0e(o){let e=B4.get(o);return e===void 0&&(e=B4.size,B4.set(o,e)),e}u(u0e,"getKey");const bne=class bne{constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let i=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const r=t[s];for(let l=0;l<r.length;l++){i++;const d=r[l],c=u0e(d);this.histogram[c]=(this.histogram[c]||0)+1}i++;const a=u0e(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=i}computeSimilarity(e){var t,n;let i=0;const s=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<s;r++)i+=Math.abs(((t=this.histogram[r])!==null&&t!==void 0?t:0)-((n=e.histogram[r])!==null&&n!==void 0?n:0));return 1-i/(this.totalCount+e.totalCount)}};u(bne,"LineRangeFragment");let tM=bne;const h0e={getLegacy:()=>new $3,getAdvanced:()=>new ZD};function Jc(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}u(Jc,"roundFloat");const _ne=class _ne{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Jc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}};u(_ne,"RGBA");let tt=_ne;const Ah=class Ah{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Jc(Math.max(Math.min(1,t),0),3),this.l=Jc(Math.max(Math.min(1,n),0),3),this.a=Jc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,d=0;const c=(a+r)/2,h=r-a;if(h>0){switch(d=Math.min(c<=.5?h/(2*c):h/(2-2*c),1),r){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new Ah(l,d,c,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let r,a,l;if(n===0)r=a=l=i;else{const d=i<.5?i*(1+n):i+n-i*n,c=2*i-d;r=Ah._hue2rgb(c,d,t+1/3),a=Ah._hue2rgb(c,d,t),l=Ah._hue2rgb(c,d,t-1/3)}return new tt(Math.round(r*255),Math.round(a*255),Math.round(l*255),s)}};u(Ah,"HSLA");let sd=Ah;const nP=class nP{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Jc(Math.max(Math.min(1,t),0),3),this.v=Jc(Math.max(Math.min(1,n),0),3),this.a=Jc(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=Math.min(t,n,i),a=s-r,l=s===0?0:a/s;let d;return a===0?d=0:s===t?d=((n-i)/a%6+6)%6:s===n?d=(i-t)/a+2:d=(t-n)/a+4,new nP(Math.round(d*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,r=i*n,a=r*(1-Math.abs(t/60%2-1)),l=i-r;let[d,c,h]=[0,0,0];return t<60?(d=r,c=a):t<120?(d=a,c=r):t<180?(c=r,h=a):t<240?(c=a,h=r):t<300?(d=a,h=r):t<=360&&(d=r,h=a),d=Math.round((d+l)*255),c=Math.round((c+l)*255),h=Math.round((h+l)*255),new tt(d,c,h,s)}};u(nP,"HSVA");let Ka=nP;const Zs=class Zs{static fromHex(e){return Zs.Format.CSS.parseHex(e)||Zs.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:sd.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Ka.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof tt)this.rgba=e;else if(e instanceof sd)this._hsla=e,this.rgba=sd.toRGBA(e);else if(e instanceof Ka)this._hsva=e,this.rgba=Ka.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&tt.equals(this.rgba,e.rgba)&&sd.equals(this.hsla,e.hsla)&&Ka.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Zs._relativeLuminanceForComponent(this.rgba.r),t=Zs._relativeLuminanceForComponent(this.rgba.g),n=Zs._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Jc(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Zs(new sd(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Zs(new sd(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new Zs(new tt(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Zs(new tt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:i,a:s}=this.rgba;return new Zs(new tt(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-n),e.rgba.b-s*(e.rgba.b-i),1))}toString(){return this._toString||(this._toString=Zs.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}};u(Zs,"Color");let K=Zs;K.white=new K(new tt(255,255,255,1));K.black=new K(new tt(0,0,0,1));K.red=new K(new tt(255,0,0,1));K.blue=new K(new tt(0,0,255,1));K.green=new K(new tt(0,255,0,1));K.cyan=new K(new tt(0,255,255,1));K.lightgrey=new K(new tt(211,211,211,1));K.transparent=new K(new tt(0,0,0,0));(function(o){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:o.Format.CSS.formatRGBA(f)}u(n,"formatRGB"),t.formatRGB=n;function i(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}u(i,"formatRGBA"),t.formatRGBA=i;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:o.Format.CSS.formatHSLA(f)}u(s,"formatHSL"),t.formatHSL=s;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}u(r,"formatHSLA"),t.formatHSLA=r;function a(f){const p=f.toString(16);return p.length!==2?"0"+p:p}u(a,"_toTwoDigitHex");function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}u(l,"formatHex"),t.formatHex=l;function d(f,p=!1){return p&&f.rgba.a===1?o.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}u(d,"formatHexA"),t.formatHexA=d;function c(f){return f.isOpaque()?o.Format.CSS.formatHex(f):o.Format.CSS.formatRGBA(f)}u(c,"format"),t.format=c;function h(f){const p=f.length;if(p===0||f.charCodeAt(0)!==35)return null;if(p===7){const b=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),_=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),v=16*g(f.charCodeAt(5))+g(f.charCodeAt(6));return new o(new tt(b,_,v,1))}if(p===9){const b=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),_=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),v=16*g(f.charCodeAt(5))+g(f.charCodeAt(6)),y=16*g(f.charCodeAt(7))+g(f.charCodeAt(8));return new o(new tt(b,_,v,y/255))}if(p===4){const b=g(f.charCodeAt(1)),_=g(f.charCodeAt(2)),v=g(f.charCodeAt(3));return new o(new tt(16*b+b,16*_+_,16*v+v))}if(p===5){const b=g(f.charCodeAt(1)),_=g(f.charCodeAt(2)),v=g(f.charCodeAt(3)),y=g(f.charCodeAt(4));return new o(new tt(16*b+b,16*_+_,16*v+v,(16*y+y)/255))}return null}u(h,"parseHex"),t.parseHex=h;function g(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}u(g,"_parseHexDigit")})(e.CSS||(e.CSS={}))})(o.Format||(o.Format={}))})(K||(K={}));function ESe(o){const e=[];for(const t of o){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}u(ESe,"_parseCaptureGroups");function kZ(o,e,t,n){return{red:o/255,blue:t/255,green:e/255,alpha:n}}u(kZ,"_toIColor");function P_(o,e){const t=e.index,n=e[0].length;if(!t)return;const i=o.positionAt(t);return{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:i.lineNumber,endColumn:i.column+n}}u(P_,"_findRange");function WAe(o,e){if(!o)return;const t=K.Format.CSS.parseHex(e);if(t)return{range:o,color:kZ(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}u(WAe,"_findHexColorInformation");function g0e(o,e,t){if(!o||e.length!==1)return;const i=e[0].values(),s=ESe(i);return{range:o,color:kZ(s[0],s[1],s[2],t?s[3]:1)}}u(g0e,"_findRGBColorInformation");function f0e(o,e,t){if(!o||e.length!==1)return;const i=e[0].values(),s=ESe(i),r=new K(new sd(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:o,color:kZ(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}u(f0e,"_findHSLColorInformation");function F_(o,e){return typeof o=="string"?[...o.matchAll(e)]:o.findMatches(e)}u(F_,"_findMatches");function BAe(o){const e=[],n=F_(o,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const i of n){const s=i.filter(d=>d!==void 0),r=s[1],a=s[2];if(!a)continue;let l;if(r==="rgb"){const d=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=g0e(P_(o,i),F_(a,d),!1)}else if(r==="rgba"){const d=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=g0e(P_(o,i),F_(a,d),!0)}else if(r==="hsl"){const d=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=f0e(P_(o,i),F_(a,d),!1)}else if(r==="hsla"){const d=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=f0e(P_(o,i),F_(a,d),!0)}else r==="#"&&(l=WAe(P_(o,i),r+a));l&&e.push(l)}return e}u(BAe,"computeColors");function UAe(o){return!o||typeof o.getValue!="function"||typeof o.positionAt!="function"?[]:BAe(o)}u(UAe,"computeDefaultDocumentColors");var ec=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const vne=class vne extends B3{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const i=this._lines[n],s=this.offsetAt(new W(n+1,1)),r=i.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=Py(e.column,O1e(t),this._lines[e.lineNumber-1],0);return n?new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=s.substring(a[r].start,a[r].end);r+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),r=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const r of i)s.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)s.push(this._lines[r]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!W.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}};u(vne,"MirrorModel");let s9=vne;const qp=class qp{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new s9(Ae.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return ec(this,void 0,void 0,function*(){const i=this._getModel(e);return i?sw.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return ec(this,void 0,void 0,function*(){const s=this._getModel(e),r=this._getModel(t);return!s||!r?null:qp.computeDiff(s,r,n,i)})}static computeDiff(e,t,n,i){const s=i==="advanced"?h0e.getAdvanced():h0e.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(r,a,n),d=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function c(h){return h.map(g=>{var f;return[g.originalRange.startLineNumber,g.originalRange.endLineNumberExclusive,g.modifiedRange.startLineNumber,g.modifiedRange.endLineNumberExclusive,(f=g.innerChanges)===null||f===void 0?void 0:f.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])]})}return u(c,"getLineChanges"),{identical:d,quitEarly:l.hitTimeout,changes:c(l.changes),moves:l.moves.map(h=>[h.lineRangeMapping.original.startLineNumber,h.lineRangeMapping.original.endLineNumberExclusive,h.lineRangeMapping.modified.startLineNumber,h.lineRangeMapping.modified.endLineNumberExclusive,c(h.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const r=e.getLineContent(s),a=t.getLineContent(s);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t,n){return ec(this,void 0,void 0,function*(){const i=this._getModel(e);if(!i)return t;const s=[];let r;t=t.slice(0).sort((a,l)=>{if(a.range&&l.range)return L.compareRangesUsingStarts(a.range,l.range);const d=a.range?0:1,c=l.range?0:1;return d-c});for(let{range:a,text:l,eol:d}of t){if(typeof d=="number"&&(r=d),L.isEmpty(a)&&!l)continue;const c=i.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,i.eol),c===l)continue;if(Math.max(l.length,c.length)>qp._diffLimit){s.push({range:a,text:l});continue}const h=hAe(c,l,n),g=i.offsetAt(L.lift(a).getStartPosition());for(const f of h){const p=i.positionAt(g+f.originalStart),b=i.positionAt(g+f.originalStart+f.originalLength),_={text:l.substr(f.modifiedStart,f.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:b.lineNumber,endColumn:b.column}};i.getValueInRange(_.range)!==_.text&&s.push(_)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return ec(this,void 0,void 0,function*(){const t=this._getModel(e);return t?pAe(t):null})}computeDefaultDocumentColors(e){return ec(this,void 0,void 0,function*(){const t=this._getModel(e);return t?UAe(t):null})}textualSuggest(e,t,n,i){return ec(this,void 0,void 0,function*(){const s=new Fi,r=new RegExp(n,i),a=new Set;e:for(const l of e){const d=this._getModel(l);if(d){for(const c of d.words(r))if(!(c===t||!isNaN(Number(c)))&&(a.add(c),a.size>qp._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return ec(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const d=s.getLineWords(l,r);for(const c of d){if(!isNaN(Number(c.word)))continue;let h=a[c.word];h||(h=[],a[c.word]=h),h.push({startLineNumber:l,startColumn:c.startColumn,endLineNumber:l,endColumn:c.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return ec(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),d=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!d)return null;const c=r.getValueInRange(d);return iw.INSTANCE.navigateValueSet(t,l,d,c,n)})}loadForeignModule(e,t,n){const r={host:Yke(n,u((a,l)=>this._host.fhr(a,l),"proxyMethodRequest")),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(cZ(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}};u(qp,"EditorSimpleWorker");let lb=qp;lb._diffLimit=1e5;lb._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=X1e());const DZ=nt("textResourceConfigurationService"),kSe=nt("textResourcePropertiesService"),So=nt("logService");var yi;(function(o){o[o.Off=0]="Off",o[o.Trace=1]="Trace",o[o.Debug=2]="Debug",o[o.Info=3]="Info",o[o.Warning=4]="Warning",o[o.Error=5]="Error"})(yi||(yi={}));const DSe=yi.Info,yne=class yne extends G{constructor(){super(...arguments),this.level=DSe,this._onDidChangeLogLevel=this._register(new V),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==yi.Off&&this.level<=e}};u(yne,"AbstractLogger");let nM=yne;const wne=class wne extends nM{constructor(e=DSe,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(yi.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(yi.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(yi.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(yi.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(yi.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}dispose(){}};u(wne,"ConsoleLogger");let o9=wne;const Cne=class Cne extends nM{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose()}};u(Cne,"MultiplexLogger");let r9=Cne;function zAe(o){switch(o){case yi.Trace:return"trace";case yi.Debug:return"debug";case yi.Info:return"info";case yi.Warning:return"warn";case yi.Error:return"error";case yi.Off:return"off"}}u(zAe,"LogLevelToString");new _e("logLevel",zAe(yi.Info));const we=nt("ILanguageFeaturesService");var GAe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},O_=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},iM=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const p0e=60*1e3,m0e=5*60*1e3;function mh(o,e){const t=o.getModel(e);return!(!t||t.isTooLargeForSyncing())}u(mh,"canSyncModel");var N1;let a9=(N1=class extends G{constructor(e,t,n,i,s){super(),this._modelService=e,this._workerManager=this._register(new d9(this._modelService,i)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>mh(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new l9(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return mh(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return iM(this,void 0,void 0,function*(){const s=yield this._workerManager.withWorker().then(l=>l.computeDiff(e,t,n,i));if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:a(s.changes),moves:s.moves.map(l=>new ow(new Mg(new pt(l[0],l[1]),new pt(l[2],l[3])),a(l[4])))};function a(l){return l.map(d=>{var c;return new xr(new pt(d[0],d[1]),new pt(d[2],d[3]),(c=d[4])===null||c===void 0?void 0:c.map(h=>new mu(new L(h[0],h[1],h[2],h[3]),new L(h[4],h[5],h[6],h[7]))))})}})}computeMoreMinimalEdits(e,t,n=!1){if(Ri(t)){if(!mh(this._modelService,e))return Promise.resolve(t);const i=Fi.create(),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t,n));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([s,fu(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return mh(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return mh(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}},u(N1,"EditorWorkerService"),N1);a9=GAe([O_(0,Xt),O_(1,DZ),O_(2,So),O_(3,Pt),O_(4,we)],a9);const Sne=class Sne{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return iM(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")mh(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())mh(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new L(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):L.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),c=yield(yield this._workerManager.withWorker()).textualSuggest(i,r?.word,s);if(c)return{duration:c.duration,suggestions:c.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}};u(Sne,"WordBasedCompletionItemProvider");let l9=Sne;const xne=class xne extends G{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Dg).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(m0e/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>m0e&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new aw(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}};u(xne,"WorkerManager");let d9=xne;const Tne=class Tne extends G{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new Dg;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(p0e/2)),this._register(i)}}dispose(){for(const e in this._syncedModels)wt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>p0e&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new ie;s.add(n.onDidChangeContent(r=>{this._proxy.acceptModelChanged(i.toString(),r)})),s.add(n.onWillDispose(()=>{this._stopModelSync(i)})),s.add(He(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],wt(t)}};u(Tne,"EditorModelManager");let c9=Tne;const Lne=class Lne{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}};u(Lne,"SynchronousWorkerClient");let sM=Lne;const Ene=class Ene{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}};u(Ene,"EditorWorkerHost");let Ov=Ene;const kne=class kne extends G{constructor(e,t,n,i){super(),this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new UD(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new O3(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Ov(this)))}catch(e){A3(e),this._worker=new sM(new lb(new Ov(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(A3(e),this._worker=new sM(new lb(new Ov(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new c9(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return iM(this,void 0,void 0,function*(){return this._disposed?Promise.reject(_De()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeMoreMinimalEdits(e.toString(),t,n))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}textualSuggest(e,t,n){return iM(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,r=n.flags;return i.textualSuggest(e.map(a=>a.toString()),t,s,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=s.source,a=s.flags;return n.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=r.source,l=r.flags;return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}};u(kne,"EditorWorkerClient");let aw=kne;function jAe(o,e,t){return new u9(o,e,t)}u(jAe,"createWebWorker$1");const Dne=class Dne extends aw{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?cZ(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=u((a,l)=>e.fmr(a,l),"proxyMethodRequest"),s=u((a,l)=>function(){const d=Array.prototype.slice.call(arguments,0);return l(a,d)},"createProxyMethod"),r={};for(const a of n)r[a]=s(a,i);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}};u(Dne,"MonacoWebWorkerImpl");let u9=Dne;const Mne=class Mne{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;");let r="";return i&4&&(r+=" underline"),i&8&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};u(Mne,"TokenMetadata");let ii=Mne;const Tc=class Tc{static createEmpty(e,t){const n=Tc.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new Tc(i,e,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}equals(e){return e instanceof Tc?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let r=i;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=ii.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ii.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ii.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ii.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return ii.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return ii.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Tc.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new h9(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),r=e[s<<1];if(r===t)return s+1;r<t?n=s+1:r>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(r,a);const d=this._tokens[(t<<1)+1];s.push(i.length,d),t++,r=a}else if(l){if(l.offset>r){i+=this._text.substring(r,l.offset);const d=this._tokens[(t<<1)+1];s.push(i.length,d),r=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new Tc(new Uint32Array(s),i,this._languageIdCodec)}};u(Tc,"LineTokens");let xi=Tc;xi.defaultTokenMetadata=(32768|2<<24)>>>0;const iP=class iP{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof iP?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}};u(iP,"SliceLineTokens");let h9=iP;const Ih=class Ih{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!Ih._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,r=n-t,a=[];let l=0;for(const d of e)d.endColumn<=i||d.startColumn>=s||(a[l++]=new Ih(Math.max(1,d.startColumn-i+1),Math.min(r+1,d.endColumn-i+1),d.className,d.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const s=[];let r=0;for(let a=0,l=e.length;a<l;a++){const d=e[a],c=d.range;if(c.endLineNumber<t||c.startLineNumber>t||c.isEmpty()&&(d.type===0||d.type===3))continue;const h=c.startLineNumber===t?c.startColumn:n,g=c.endLineNumber===t?c.endColumn:i;s[r++]=new Ih(h,g,d.inlineClassName,d.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Ih._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}};u(Ih,"LineDecoration");let _o=Ih;const Ane=class Ane{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}};u(Ane,"DecorationSegment");let oM=Ane;const D0=class D0{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new oM(t,this.stopOffsets[i],this.classNames.join(" "),D0._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new oM(t,e-1,this.classNames.join(" "),D0._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}};u(D0,"Stack");let g9=D0;const Ine=class Ine{static normalize(e,t){if(t.length===0)return[];const n=[],i=new g9;let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let d=l.startColumn,c=l.endColumn;const h=l.className,g=l.type===1?2:l.type===2?4:0;if(d>1){const b=e.charCodeAt(d-2);Un(b)&&d--}if(c>1){const b=e.charCodeAt(c-2);Un(b)&&c--}const f=d-1,p=c-2;s=i.consumeLowerThan(f,s,n),i.count===0&&(s=f),i.insert(p,h,g)}return i.consumeLowerThan(1073741824,s,n),n}};u(Ine,"LineDecorationsNormalizer");let f9=Ine;const Nne=class Nne{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}};u(Nne,"LinePart");let Pn=Nne;const Rne=class Rne{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}};u(Rne,"LineRange");let rM=Rne;const Pne=class Pne{constructor(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b,_,v,y,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=d.sort(_o.compare),this.tabSize=c,this.startVisibleColumn=h,this.spaceWidth=g,this.stopRenderingLineAfter=b,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=y,this.selectionsOnLine=w&&w.sort((k,T)=>k.startOffset<T.startOffset?-1:1);const C=Math.abs(p-g),S=Math.abs(f-g);C<S?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&_o.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}};u(Pne,"RenderLineInput");let Tr=Pne;const Fne=class Fne{constructor(e,t){this.partIndex=e,this.charIndex=t}};u(Fne,"DomPosition");let aM=Fne;const Xl=class Xl{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=Xl.getPartIndex(t),i=Xl.getCharIndex(t);return new aM(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const b=s+r>>>1,_=this._data[b];if(_===i)return b;_>i?r=b:s=b}if(s===r)return s;const a=this._data[s],l=this._data[r];if(a===i)return s;if(l===i)return r;const d=Xl.getPartIndex(a),c=Xl.getCharIndex(a),h=Xl.getPartIndex(l);let g;d!==h?g=t:g=Xl.getCharIndex(l);const f=n-c,p=g-n;return f<=p?s:r}};u(Xl,"CharacterMapping");let lw=Xl;const One=class One{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}};u(One,"RenderLineOutput");let dw=One;function y_(o,e){if(o.lineContent.length===0){if(o.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,i=0;for(const r of o.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(i|=1,t++),r.type===2&&(i|=2,n++));e.appendString("</span>");const s=new lw(1,t+n);return s.setColumnInfo(1,t,0,0),new dw(s,!1,i)}return e.appendString("<span><span></span></span>"),new dw(new lw(0,0),!1,0)}return JAe(KAe(o),e)}u(y_,"renderViewLine");const Hne=class Hne{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}};u(Hne,"RenderLineOutput2");let p9=Hne;function QL(o){const e=new Pd(1e4),t=y_(o,e);return new p9(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}u(QL,"renderViewLine2");const Vne=class Vne{constructor(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=d,this.tabSize=c,this.startVisibleColumn=h,this.containsRTL=g,this.spaceWidth=f,this.renderSpaceCharCode=p,this.renderWhitespace=b,this.renderControlCharacters=_}};u(Vne,"ResolvedRenderLineInput");let m9=Vne;function KAe(o){const e=o.lineContent;let t,n,i;o.stopRenderingLineAfter!==-1&&o.stopRenderingLineAfter<e.length?(t=!0,n=e.length-o.stopRenderingLineAfter,i=o.stopRenderingLineAfter):(t=!1,n=0,i=e.length);let s=$Ae(e,o.containsRTL,o.lineTokens,o.fauxIndentLength,i);o.renderControlCharacters&&!o.isBasicASCII&&(s=YAe(e,s)),(o.renderWhitespace===4||o.renderWhitespace===1||o.renderWhitespace===2&&o.selectionsOnLine||o.renderWhitespace===3&&!o.continuesWithWrappedLine)&&(s=XAe(o,e,i,s));let r=0;if(o.lineDecorations.length>0){for(let a=0,l=o.lineDecorations.length;a<l;a++){const d=o.lineDecorations[a];d.type===3||d.type===1?r|=1:d.type===2&&(r|=2)}s=ZAe(e,i,s,o.lineDecorations)}return o.containsRTL||(s=qAe(e,s,!o.isBasicASCII||o.fontLigatures)),new m9(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,e,i,t,n,s,r,o.fauxIndentLength,o.tabSize,o.startVisibleColumn,o.containsRTL,o.spaceWidth,o.renderSpaceCharCode,o.renderWhitespace,o.renderControlCharacters)}u(KAe,"resolveRenderLineInput");function $Ae(o,e,t,n,i){const s=[];let r=0;n>0&&(s[r++]=new Pn(n,"",0,!1));let a=n;for(let l=0,d=t.getCount();l<d;l++){const c=t.getEndOffset(l);if(c<=n)continue;const h=t.getClassName(l);if(c>=i){const f=e?tb(o.substring(a,i)):!1;s[r++]=new Pn(i,h,0,f);break}const g=e?tb(o.substring(a,c)):!1;s[r++]=new Pn(c,h,0,g),a=c}return s}u($Ae,"transformAndRemoveOverflowing");function qAe(o,e,t){let n=0;const i=[];let s=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],d=l.endIndex;if(n+50<d){const c=l.type,h=l.metadata,g=l.containsRTL;let f=-1,p=n;for(let b=n;b<d;b++)o.charCodeAt(b)===32&&(f=b),f!==-1&&b-p>=50&&(i[s++]=new Pn(f+1,c,h,g),p=f+1,f=-1);p!==d&&(i[s++]=new Pn(d,c,h,g))}else i[s++]=l;n=d}else for(let r=0,a=e.length;r<a;r++){const l=e[r],d=l.endIndex,c=d-n;if(c>50){const h=l.type,g=l.metadata,f=l.containsRTL,p=Math.ceil(c/50);for(let b=1;b<p;b++){const _=n+b*50;i[s++]=new Pn(_,h,g,f)}i[s++]=new Pn(d,h,g,f)}else i[s++]=l;n=d}return i}u(qAe,"splitLargeTokens");function MSe(o){return o<32?o!==9:o===127||o>=8234&&o<=8238||o>=8294&&o<=8297||o>=8206&&o<=8207||o===1564}u(MSe,"isControlCharacter");function YAe(o,e){const t=[];let n=new Pn(0,"",0,!1),i=0;for(const s of e){const r=s.endIndex;for(;i<r;i++){const a=o.charCodeAt(i);MSe(a)&&(i>n.endIndex&&(n=new Pn(i,s.type,s.metadata,s.containsRTL),t.push(n)),n=new Pn(i+1,"mtkcontrol",s.metadata,!1),t.push(n))}i>n.endIndex&&(n=new Pn(r,s.type,s.metadata,s.containsRTL),t.push(n))}return t}u(YAe,"extractControlCharacters");function XAe(o,e,t,n){const i=o.continuesWithWrappedLine,s=o.fauxIndentLength,r=o.tabSize,a=o.startVisibleColumn,l=o.useMonospaceOptimizations,d=o.selectionsOnLine,c=o.renderWhitespace===1,h=o.renderWhitespace===3,g=o.renderSpaceWidth!==o.spaceWidth,f=[];let p=0,b=0,_=n[b].type,v=n[b].containsRTL,y=n[b].endIndex;const w=n.length;let C=!1,S=$i(e),k;S===-1?(C=!0,S=t,k=t):k=ha(e);let T=!1,E=0,D=d&&d[E],O=a%r;for(let H=s;H<t;H++){const F=e.charCodeAt(H);D&&H>=D.endOffset&&(E++,D=d&&d[E]);let $;if(H<S||H>k)$=!0;else if(F===9)$=!0;else if(F===32)if(c)if(T)$=!0;else{const ee=H+1<t?e.charCodeAt(H+1):0;$=ee===32||ee===9}else $=!0;else $=!1;if($&&d&&($=!!D&&D.startOffset<=H&&D.endOffset>H),$&&h&&($=C||H>k),$&&v&&H>=S&&H<=k&&($=!1),T){if(!$||!l&&O>=r){if(g){const ee=p>0?f[p-1].endIndex:s;for(let ge=ee+1;ge<=H;ge++)f[p++]=new Pn(ge,"mtkw",1,!1)}else f[p++]=new Pn(H,"mtkw",1,!1);O=O%r}}else(H===y||$&&H>s)&&(f[p++]=new Pn(H,_,0,v),O=O%r);for(F===9?O=r:hu(F)?O+=2:O++,T=$;H===y&&(b++,b<w);)_=n[b].type,v=n[b].containsRTL,y=n[b].endIndex}let B=!1;if(T)if(i&&c){const H=t>0?e.charCodeAt(t-1):0,F=t>1?e.charCodeAt(t-2):0;H===32&&F!==32&&F!==9||(B=!0)}else B=!0;if(B)if(g){const H=p>0?f[p-1].endIndex:s;for(let F=H+1;F<=t;F++)f[p++]=new Pn(F,"mtkw",1,!1)}else f[p++]=new Pn(t,"mtkw",1,!1);else f[p++]=new Pn(t,_,0,v);return f}u(XAe,"_applyRenderWhitespace");function ZAe(o,e,t,n){n.sort(_o.compare);const i=f9.normalize(o,n),s=i.length;let r=0;const a=[];let l=0,d=0;for(let h=0,g=t.length;h<g;h++){const f=t[h],p=f.endIndex,b=f.type,_=f.metadata,v=f.containsRTL;for(;r<s&&i[r].startOffset<p;){const y=i[r];if(y.startOffset>d&&(d=y.startOffset,a[l++]=new Pn(d,b,_,v)),y.endOffset+1<=p)d=y.endOffset+1,a[l++]=new Pn(d,b+" "+y.className,_|y.metadata,v),r++;else{d=p,a[l++]=new Pn(d,b+" "+y.className,_|y.metadata,v);break}}p>d&&(d=p,a[l++]=new Pn(d,b,_,v))}const c=t[t.length-1].endIndex;if(r<s&&i[r].startOffset===c)for(;r<s&&i[r].startOffset===c;){const h=i[r];a[l++]=new Pn(d,h.className,h.metadata,!1),r++}return a}u(ZAe,"_applyInlineDecorations");function JAe(o,e){const t=o.fontIsMonospace,n=o.canUseHalfwidthRightwardsArrow,i=o.containsForeignElements,s=o.lineContent,r=o.len,a=o.isOverflowing,l=o.overflowingCharCount,d=o.parts,c=o.fauxIndentLength,h=o.tabSize,g=o.startVisibleColumn,f=o.containsRTL,p=o.spaceWidth,b=o.renderSpaceCharCode,_=o.renderWhitespace,v=o.renderControlCharacters,y=new lw(r+1,d.length);let w=!1,C=0,S=g,k=0,T=0,E=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let D=0,O=d.length;D<O;D++){const B=d[D],H=B.endIndex,F=B.type,$=B.containsRTL,ee=_!==0&&B.isWhitespace(),ge=ee&&!t&&(F==="mtkw"||!i),X=C===H&&B.isPseudoAfter();if(k=0,e.appendString("<span "),$&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(ge?"mtkz":F),e.appendASCIICharCode(34),ee){let R=0;{let z=C,te=S;for(;z<H;z++){const me=(s.charCodeAt(z)===9?h-te%h:1)|0;R+=me,z>=c&&(te+=me)}}for(ge&&(e.appendString(' style="width:'),e.appendString(String(p*R)),e.appendString('px"')),e.appendASCIICharCode(62);C<H;C++){y.setColumnInfo(C+1,D-E,k,T),E=0;const z=s.charCodeAt(C);let te,fe;if(z===9){te=h-S%h|0,fe=te,!n||fe>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let me=2;me<=fe;me++)e.appendCharCode(160)}else te=2,fe=1,e.appendCharCode(b),e.appendCharCode(8204);k+=te,T+=fe,C>=c&&(S+=fe)}}else for(e.appendASCIICharCode(62);C<H;C++){y.setColumnInfo(C+1,D-E,k,T),E=0;const R=s.charCodeAt(C);let z=1,te=1;switch(R){case 9:z=h-S%h,te=z;for(let fe=1;fe<=z;fe++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:v?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:hu(R)&&te++,v&&R<32?e.appendCharCode(9216+R):v&&R===127?e.appendCharCode(9249):v&&MSe(R)?(e.appendString("[U+"),e.appendString(QAe(R)),e.appendString("]"),z=8,te=z):e.appendCharCode(R)}k+=z,T+=te,C>=c&&(S+=te)}X?E++:E=0,C>=r&&!w&&B.isPseudoAfter()&&(w=!0,y.setColumnInfo(C+1,D,k,T)),e.appendString("</span>")}return w||y.setColumnInfo(r+1,d.length-1,k,T),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(m("showMore","Show more ({0})",eIe(l))),e.appendString("</span>")),e.appendString("</span>"),new dw(y,f,i)}u(JAe,"_renderLine");function QAe(o){return o.toString(16).toUpperCase().padStart(4,"0")}u(QAe,"to4CharHex");function eIe(o){return o<1024?m("overflow.chars","{0} chars",o):o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/1024/1024).toFixed(1)} MB`}u(eIe,"renderOverflowingCharCount");const Wne=class Wne{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}};u(Wne,"Viewport");let lM=Wne;const Bne=class Bne{constructor(e,t){this.tabSize=e,this.data=t}};u(Bne,"MinimapLinesRenderingData");let b9=Bne;const Une=class Une{constructor(e,t,n,i,s,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=a}};u(Une,"ViewLineData");let cw=Une;const M0=class M0{constructor(e,t,n,i,s,r,a,l,d,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=M0.isBasicASCII(n,r),this.containsRTL=M0.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=d,this.startVisibleColumn=c}static isBasicASCII(e,t){return t?ZL(e):!0}static containsRTL(e,t,n){return!t&&n?tb(e):!1}};u(M0,"ViewLineRenderingData");let as=M0;const zne=class zne{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}};u(zne,"InlineDecoration");let Qc=zne;const Gne=class Gne{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new Qc(new L(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}};u(Gne,"SingleLineInlineDecoration");let _9=Gne;const jne=class jne{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}};u(jne,"ViewModelDecoration");let dM=jne;const Kne=class Kne{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}};u(Kne,"OverviewRulerDecorationsGroup");let cM=Kne;function tIe(o){return Array.isArray(o)}u(tIe,"isFuzzyActionArr");function nIe(o){return!tIe(o)}u(nIe,"isFuzzyAction");function ASe(o){return typeof o=="string"}u(ASe,"isString");function b0e(o){return!ASe(o)}u(b0e,"isIAction");function Qf(o){return!o}u(Qf,"empty");function eu(o,e){return o.ignoreCase&&e?e.toLowerCase():e}u(eu,"fixCase");function _0e(o){return o.replace(/[&<>'"_]/g,"-")}u(_0e,"sanitize$1");function iIe(o,e){console.log(`${o.languageId}: ${e}`)}u(iIe,"log");function Ut(o,e){return new Error(`${o.languageId}: ${e}`)}u(Ut,"createError");function Ac(o,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(s,function(a,l,d,c,h,g,f,p,b){return Qf(d)?Qf(c)?!Qf(h)&&h<n.length?eu(o,n[h]):!Qf(f)&&o&&typeof o[f]=="string"?o[f]:(r===null&&(r=i.split("."),r.unshift(i)),!Qf(g)&&g<r.length?eu(o,r[g]):""):eu(o,t):"$"})}u(Ac,"substituteMatches");function SE(o,e){let t=e;for(;t&&t.length>0;){const n=o.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}u(SE,"findRules");function sIe(o,e){let t=e;for(;t&&t.length>0;){if(o.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}u(sIe,"stateExists");var oIe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rIe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},v9;const ISe=5,$ne=class $ne{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Mm(e,t);let n=Mm.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new Mm(e,t),this._entries[n]=i,i)}};u($ne,"MonarchStackElementFactory");let Ig=$ne;Ig._INSTANCE=new Ig(ISe);const sP=class sP{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return sP._equals(this,e)}push(e){return Ig.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Ig.create(this.parent,e)}};u(sP,"MonarchStackElement");let Mm=sP;const oP=class oP{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new oP(this.languageId,this.state)}};u(oP,"EmbeddedLanguageData");let gp=oP;const qne=class qne{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new Hv(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Hv(e,t);const n=Mm.getStackElementId(e);let i=this._entries[n];return i||(i=new Hv(e,null),this._entries[n]=i,i)}};u(qne,"MonarchLineStateFactory");let Ba=qne;Ba._INSTANCE=new Ba(ISe);const rP=class rP{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Ba.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof rP)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}};u(rP,"MonarchLineState");let Hv=rP;const Yne=class Yne{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new By(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=en.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenize(e,t,r);if(i!==0)for(const d of l.tokens)this._tokens.push(new By(d.offset+i,d.type,d.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new Uy(this._tokens,e)}};u(Yne,"MonarchClassicTokensCollector");let y9=Yne;const A0=class A0{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,s=t.length,r=n!==null?n.length:0;if(i===0&&s===0&&r===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&r===0)return e;const a=new Uint32Array(i+s+r);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,a=en.get(s);if(!a)return this.enterLanguage(s),this.emit(i,""),r;const l=a.tokenizeEncoded(e,t,r);if(i!==0)for(let d=0,c=l.tokens.length;d<c;d+=2)l.tokens[d]+=i;return this._prependTokens=A0._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new Jm(A0._merge(this._prependTokens,this._tokens,null),e)}};u(A0,"MonarchModernTokensCollector");let w9=A0;var R1;let uw=v9=(R1=class{constructor(e,t,n,i,s){this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=en.onDidChange(a=>{if(r)return;let l=!1;for(let d=0,c=a.changedLanguages.length;d<c;d++){const h=a.changedLanguages[d];if(this._embeddedLanguages[h]){l=!0;break}}l&&(r=!0,en.handleChange([this._languageId]),r=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=en.get(t);if(n){if(n instanceof v9){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}en.isResolved(t)||e.push(en.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Ig.create(null,this._lexer.start);return Ba.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return TZ(this._languageId,n);const i=new y9,s=this._tokenize(e,t,n,i);return i.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return LO(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new w9(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i);return i.finalize(s)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=SE(this._lexer,t.stack.state),!n))throw Ut(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const r of n){if(!b0e(r.action)||r.action.nextEmbedded!=="@pop")continue;s=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const c=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),c)}const d=e.search(a);d===-1||d!==0&&r.matchOnlyAtLineStart||(i===-1||d<i)&&(i=d)}if(!s)throw Ut(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){const r=this._findLeavingNestedLanguageOffset(e,n);if(r===-1){const d=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return Ba.create(n.stack,new gp(n.embeddedLanguageData.languageId,d))}const a=e.substring(0,r);a.length>0&&s.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(r);return this._myTokenize(l,t,n,i+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let d=n.embeddedLanguageData,c=n.stack,h=0,g=null,f=!0;for(;f||h<l;){const p=h,b=c.depth,_=g?g.groups.length:0,v=c.state;let y=null,w=null,C=null,S=null,k=null;if(g){y=g.matches;const D=g.groups.shift();w=D.matched,C=D.action,S=g.rule,g.groups.length===0&&(g=null)}else{if(!f&&h>=l)break;f=!1;let D=this._lexer.tokenizer[v];if(!D&&(D=SE(this._lexer,v),!D))throw Ut(this._lexer,"tokenizer state is not defined: "+v);const O=a.substr(h);for(const B of D)if((h===0||!B.matchOnlyAtLineStart)&&(y=O.match(B.regex),y)){w=y[0],C=B.action;break}}if(y||(y=[""],w=""),C||(h<l&&(y=[a.charAt(h)],w=y[0]),C=this._lexer.defaultToken),w===null)break;for(h+=w.length;nIe(C)&&b0e(C)&&C.test;)C=C.test(w,y,v,h===l);let T=null;if(typeof C=="string"||Array.isArray(C))T=C;else if(C.group)T=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?T=Ac(this._lexer,C.token,w,y,v):T=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!d)throw Ut(this._lexer,"cannot pop embedded language if not inside one");d=null}else{if(d)throw Ut(this._lexer,"cannot enter embedded language from within an embedded language");k=Ac(this._lexer,C.nextEmbedded,w,y,v)}if(C.goBack&&(h=Math.max(0,h-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let D=Ac(this._lexer,C.switchTo,w,y,v);if(D[0]==="@"&&(D=D.substr(1)),SE(this._lexer,D))c=c.switchTo(D);else throw Ut(this._lexer,"trying to switch to a state '"+D+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(C.transform&&typeof C.transform=="function")throw Ut(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(c.depth>=this._lexer.maxStack)throw Ut(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(v)}else if(C.next==="@pop"){if(c.depth<=1)throw Ut(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));c=c.pop()}else if(C.next==="@popall")c=c.popall();else{let D=Ac(this._lexer,C.next,w,y,v);if(D[0]==="@"&&(D=D.substr(1)),SE(this._lexer,D))c=c.push(D);else throw Ut(this._lexer,"trying to set a next state '"+D+"' that is undefined in rule: "+this._safeRuleName(S))}}C.log&&typeof C.log=="string"&&iIe(this._lexer,this._lexer.languageId+": "+Ac(this._lexer,C.log,w,y,v))}if(T===null)throw Ut(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const E=u(D=>{const O=this._languageService.getLanguageIdByLanguageName(D)||this._languageService.getLanguageIdByMimeType(D)||D,B=this._getNestedEmbeddedLanguageData(O);if(h<l){const H=e.substr(h);return this._nestedTokenize(H,t,Ba.create(c,B),i+h,s)}else return Ba.create(c,B)},"computeNewStateForEmbeddedLanguage");if(Array.isArray(T)){if(g&&g.groups.length>0)throw Ut(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(y.length!==T.length+1)throw Ut(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let D=0;for(let O=1;O<y.length;O++)D+=y[O].length;if(D!==w.length)throw Ut(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));g={rule:S,matches:y,groups:[]};for(let O=0;O<T.length;O++)g.groups[O]={action:T[O],matched:y[O+1]};h-=w.length;continue}else{if(T==="@rematch"&&(h-=w.length,w="",y=null,T="",k!==null))return E(k);if(w.length===0){if(l===0||b!==c.depth||v!==c.state||(g?g.groups.length:0)!==_)continue;throw Ut(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let D=null;if(ASe(T)&&T.indexOf("@brackets")===0){const O=T.substr(9),B=aIe(this._lexer,w);if(!B)throw Ut(this._lexer,"@brackets token returned but no bracket defined as: "+w);D=_0e(B.token+O)}else{const O=T===""?"":T+this._lexer.tokenPostfix;D=_0e(O)}p<r&&s.emit(p+i,D)}if(k!==null)return E(k)}return Ba.create(c,d)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new gp(e,ib);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),en.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=en.get(e);return t?new gp(e,t.getInitialState()):new gp(e,ib)}},u(R1,"MonarchTokenizer"),R1);uw=v9=oIe([rIe(4,at)],uw);function aIe(o,e){if(!e)return null;e=eu(o,e);const t=o.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}u(aIe,"findBracket");var lIe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const U4=Kd("standaloneColorizer",{createHTML:o=>o}),Xne=class Xne{static colorizeElement(e,t,n,i){i=i||{};const s=i.theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;const d=u(c=>{var h;const g=(h=U4?.createHTML(c))!==null&&h!==void 0?h:c;n.innerHTML=g},"render");return this.colorize(t,l||"",a,i).then(d,c=>console.error(c))}static colorize(e,t,n,i){return lIe(this,void 0,void 0,function*(){const s=e.languageIdCodec;let r=4;i&&typeof i.tabSize=="number"&&(r=i.tabSize),CZ(t)&&(t=t.substr(1));const a=cl(t);if(!e.isRegisteredLanguageId(n))return v0e(a,r,s);const l=yield en.getOrCreate(n);return l?dIe(a,r,l,s):v0e(a,r,s)})}static colorizeLine(e,t,n,i,s=4){const r=as.isBasicASCII(e,t),a=as.containsRTL(e,r,n);return QL(new Tr(!1,!0,e,!1,r,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}};u(Xne,"Colorizer");let hw=Xne;function dIe(o,e,t,n){return new Promise((i,s)=>{const r=u(()=>{const a=cIe(o,e,t,n);if(t instanceof uw){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,s);return}}i(a)},"execute");r()})}u(dIe,"_colorize");function v0e(o,e,t){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,a=o.length;r<a;r++){const l=o[r];s[0]=l.length;const d=new xi(s,l,t),c=as.isBasicASCII(l,!0),h=as.containsRTL(l,c,!0),g=QL(new Tr(!1,!0,l,!1,c,h,0,d,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(g.html),n.push("<br/>")}return n.join("")}u(v0e,"_fakeColorize");function cIe(o,e,t,n){let i=[],s=t.getInitialState();for(let r=0,a=o.length;r<a;r++){const l=o[r],d=t.tokenizeEncoded(l,!0,s);xi.convertToEndOffset(d.tokens,l.length);const c=new xi(d.tokens,l,n),h=as.isBasicASCII(l,!0),g=as.containsRTL(l,h,!0),f=QL(new Tr(!1,!0,l,!1,h,g,0,c.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(f.html),i.push("<br/>"),s=d.endState}return i.join("")}u(cIe,"_actualColorize");const MZ={clipboard:{writeText:ca||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:ca||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>ca||uMe()?0:navigator.keyboard||Rd?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function C9(o,e){if(typeof o=="number"){if(o===0)return null;const t=(o&65535)>>>0,n=(o&4294901760)>>>16;return n!==0?new Vv([xE(t,e),xE(n,e)]):new Vv([xE(t,e)])}else{const t=[];for(let n=0;n<o.length;n++)t.push(xE(o[n],e));return new Vv(t)}}u(C9,"decodeKeybinding");function xE(o,e){const t=!!(o&2048),n=!!(o&256),i=e===2?n:t,s=!!(o&1024),r=!!(o&512),a=e===2?t:n,l=o&255;return new Fd(i,s,r,a,l)}u(xE,"createSimpleKeybinding");const aP=class aP{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return e instanceof aP&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};u(aP,"KeyCodeChord");let Fd=aP;const Zne=class Zne{constructor(e){if(e.length===0)throw Ho("chords");this.chords=e}};u(Zne,"Keybinding");let Vv=Zne;const Jne=class Jne{constructor(e,t,n,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=r}};u(Jne,"ResolvedChord");let S9=Jne;const Qne=class Qne{};u(Qne,"ResolvedKeybinding");let x9=Qne;function uIe(o){if(o.charCode){const t=String.fromCharCode(o.charCode).toUpperCase();return ad.fromString(t)}const e=o.keyCode;if(e===3)return 7;if(Bo)switch(e){case 59:return 85;case 60:if(qi)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ot)return 57;break}else if(eg){if(ot&&e===93)return 57;if(!ot&&e===92)return 57}return U1e[e]||0}u(uIe,"extractKeyCode");const hIe=ot?256:2048,gIe=512,fIe=1024,pIe=ot?2048:256,eie=class eie{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState("AltGraph"),this.keyCode=uIe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=hIe),this.altKey&&(t|=gIe),this.shiftKey&&(t|=fIe),this.metaKey&&(t|=pIe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Fd(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};u(eie,"StandardKeyboardEvent");let Mt=eie,y0e=!1,H_=null;function mIe(o){if(!o.parent||o.parent===o)return null;try{const e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return y0e=!0,null}catch{return y0e=!0,null}return o.parent}u(mIe,"getParentWindowIfSameOrigin");const tie=class tie{static getSameOriginWindowChain(){if(!H_){H_=[];let e=window,t;do t=mIe(e),t?H_.push({window:e,iframeElement:e.frameElement||null}):H_.push({window:e,iframeElement:null}),e=t;while(e)}return H_.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const s=this.getSameOriginWindowChain();for(const r of s){if(n+=r.window.scrollY,i+=r.window.scrollX,r.window===t||!r.iframeElement)break;const a=r.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}};u(tie,"IframeUtils");let T9=tie;const nie=class nie{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=T9.getPositionOfChildWindowRelativeToAncestorWindow(window,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};u(nie,"StandardMouseEvent");let Bs=nie;const iie=class iie{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const i=e,s=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Bo&&!ot?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")Rd&&Si?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Bo&&!ot?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}};u(iie,"StandardWheelEvent");let Od=iie;/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:NSe,setPrototypeOf:w0e,isFrozen:bIe,getPrototypeOf:_Ie,getOwnPropertyDescriptor:vIe}=Object;let{freeze:Gs,seal:ma,create:yIe}=Object,{apply:L9,construct:E9}=typeof Reflect<"u"&&Reflect;L9||(L9=u(function(e,t,n){return e.apply(t,n)},"apply"));Gs||(Gs=u(function(e){return e},"freeze"));ma||(ma=u(function(e){return e},"seal"));E9||(E9=u(function(e,t){return new e(...t)},"construct"));const wIe=Lr(Array.prototype.forEach),C0e=Lr(Array.prototype.pop),V_=Lr(Array.prototype.push),Ik=Lr(String.prototype.toLowerCase),z4=Lr(String.prototype.toString),CIe=Lr(String.prototype.match),Vr=Lr(String.prototype.replace),SIe=Lr(String.prototype.indexOf),xIe=Lr(String.prototype.trim),ko=Lr(RegExp.prototype.test),W_=TIe(TypeError);function Lr(o){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return L9(o,e,n)}}u(Lr,"unapply");function TIe(o){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E9(o,t)}}u(TIe,"unconstruct");function Tt(o,e,t){var n;t=(n=t)!==null&&n!==void 0?n:Ik,w0e&&w0e(o,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const r=t(s);r!==s&&(bIe(e)||(e[i]=r),s=r)}o[s]=!0}return o}u(Tt,"addToSet");function Vf(o){const e=yIe(null);for(const[t,n]of NSe(o))e[t]=n;return e}u(Vf,"clone");function TE(o,e){for(;o!==null;){const n=vIe(o,e);if(n){if(n.get)return Lr(n.get);if(typeof n.value=="function")return Lr(n.value)}o=_Ie(o)}function t(n){return console.warn("fallback value for",n),null}return u(t,"fallbackValue"),t}u(TE,"lookupGetter");const S0e=Gs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G4=Gs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j4=Gs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),LIe=Gs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K4=Gs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),EIe=Gs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),x0e=Gs(["#text"]),T0e=Gs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$4=Gs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L0e=Gs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),LE=Gs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kIe=ma(/\{\{[\w\W]*|[\w\W]*\}\}/gm),DIe=ma(/<%[\w\W]*|[\w\W]*%>/gm),MIe=ma(/\${[\w\W]*}/gm),AIe=ma(/^data-[\-\w.\u00B7-\uFFFF]/),IIe=ma(/^aria-[\-\w]+$/),RSe=ma(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),NIe=ma(/^(?:\w+script|data):/i),RIe=ma(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PSe=ma(/^html$/i);var E0e=Object.freeze({__proto__:null,MUSTACHE_EXPR:kIe,ERB_EXPR:DIe,TMPLIT_EXPR:MIe,DATA_ATTR:AIe,ARIA_ATTR:IIe,IS_ALLOWED_URI:RSe,IS_SCRIPT_OR_DATA:NIe,ATTR_WHITESPACE:RIe,DOCTYPE_NAME:PSe});const PIe=u(()=>typeof window>"u"?null:window,"getGlobal"),FIe=u(function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},"_createTrustedTypesPolicy");function FSe(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PIe();const e=u(Je=>FSe(Je),"DOMPurify");if(e.version="3.0.5",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;const t=o.document,n=t.currentScript;let{document:i}=o;const{DocumentFragment:s,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:d,NamedNodeMap:c=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:h,DOMParser:g,trustedTypes:f}=o,p=l.prototype,b=TE(p,"cloneNode"),_=TE(p,"nextSibling"),v=TE(p,"childNodes"),y=TE(p,"parentNode");if(typeof r=="function"){const Je=i.createElement("template");Je.content&&Je.content.ownerDocument&&(i=Je.content.ownerDocument)}let w,C="";const{implementation:S,createNodeIterator:k,createDocumentFragment:T,getElementsByTagName:E}=i,{importNode:D}=t;let O={};e.isSupported=typeof NSe=="function"&&typeof y=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:H,TMPLIT_EXPR:F,DATA_ATTR:$,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:ge,ATTR_WHITESPACE:X}=E0e;let{IS_ALLOWED_URI:R}=E0e,z=null;const te=Tt({},[...S0e,...G4,...j4,...K4,...x0e]);let fe=null;const me=Tt({},[...T0e,...$4,...L0e,...LE]);let ce=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),mt=null,$t=null,hn=!0,vt=!0,Hn=!1,er=!0,fi=!1,ze=!1,tr=!1,Pr=!1,Fr=!1,Yn=!1,Lo=!1,fE=!0,pE=!1;const T4="user-content-";let se=!0,Z=!1,Y={},N=null;const P=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let j=null;const U=Tt({},["audio","video","img","source","image","track"]);let oe=null;const ve=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Me="http://www.w3.org/1998/Math/MathML",Ie="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let Ge=$e,Ft=!1,kt=null;const Ve=Tt({},[Me,Ie,$e],z4);let gn;const fn=["application/xhtml+xml","text/html"],nr="text/html";let Ct,Nn=null;const Ju=i.createElement("form"),Qu=u(function(J){return J instanceof RegExp||J instanceof Function},"isRegexOrFunction"),Or=u(function(J){if(!(Nn&&Nn===J)){if((!J||typeof J!="object")&&(J={}),J=Vf(J),gn=fn.indexOf(J.PARSER_MEDIA_TYPE)===-1?gn=nr:gn=J.PARSER_MEDIA_TYPE,Ct=gn==="application/xhtml+xml"?z4:Ik,z="ALLOWED_TAGS"in J?Tt({},J.ALLOWED_TAGS,Ct):te,fe="ALLOWED_ATTR"in J?Tt({},J.ALLOWED_ATTR,Ct):me,kt="ALLOWED_NAMESPACES"in J?Tt({},J.ALLOWED_NAMESPACES,z4):Ve,oe="ADD_URI_SAFE_ATTR"in J?Tt(Vf(ve),J.ADD_URI_SAFE_ATTR,Ct):ve,j="ADD_DATA_URI_TAGS"in J?Tt(Vf(U),J.ADD_DATA_URI_TAGS,Ct):U,N="FORBID_CONTENTS"in J?Tt({},J.FORBID_CONTENTS,Ct):P,mt="FORBID_TAGS"in J?Tt({},J.FORBID_TAGS,Ct):{},$t="FORBID_ATTR"in J?Tt({},J.FORBID_ATTR,Ct):{},Y="USE_PROFILES"in J?J.USE_PROFILES:!1,hn=J.ALLOW_ARIA_ATTR!==!1,vt=J.ALLOW_DATA_ATTR!==!1,Hn=J.ALLOW_UNKNOWN_PROTOCOLS||!1,er=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fi=J.SAFE_FOR_TEMPLATES||!1,ze=J.WHOLE_DOCUMENT||!1,Fr=J.RETURN_DOM||!1,Yn=J.RETURN_DOM_FRAGMENT||!1,Lo=J.RETURN_TRUSTED_TYPE||!1,Pr=J.FORCE_BODY||!1,fE=J.SANITIZE_DOM!==!1,pE=J.SANITIZE_NAMED_PROPS||!1,se=J.KEEP_CONTENT!==!1,Z=J.IN_PLACE||!1,R=J.ALLOWED_URI_REGEXP||RSe,Ge=J.NAMESPACE||$e,ce=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&Qu(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&Qu(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fi&&(vt=!1),Yn&&(Fr=!0),Y&&(z=Tt({},[...x0e]),fe=[],Y.html===!0&&(Tt(z,S0e),Tt(fe,T0e)),Y.svg===!0&&(Tt(z,G4),Tt(fe,$4),Tt(fe,LE)),Y.svgFilters===!0&&(Tt(z,j4),Tt(fe,$4),Tt(fe,LE)),Y.mathMl===!0&&(Tt(z,K4),Tt(fe,L0e),Tt(fe,LE))),J.ADD_TAGS&&(z===te&&(z=Vf(z)),Tt(z,J.ADD_TAGS,Ct)),J.ADD_ATTR&&(fe===me&&(fe=Vf(fe)),Tt(fe,J.ADD_ATTR,Ct)),J.ADD_URI_SAFE_ATTR&&Tt(oe,J.ADD_URI_SAFE_ATTR,Ct),J.FORBID_CONTENTS&&(N===P&&(N=Vf(N)),Tt(N,J.FORBID_CONTENTS,Ct)),se&&(z["#text"]=!0),ze&&Tt(z,["html","head","body"]),z.table&&(Tt(z,["tbody"]),delete mt.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw W_('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw W_('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=J.TRUSTED_TYPES_POLICY,C=w.createHTML("")}else w===void 0&&(w=FIe(f,n)),w!==null&&typeof C=="string"&&(C=w.createHTML(""));Gs&&Gs(J),Nn=J}},"_parseConfig"),Zd=Tt({},["mi","mo","mn","ms","mtext"]),eh=Tt({},["foreignobject","desc","title","annotation-xml"]),th=Tt({},["title","style","font","a","script"]),Ff=Tt({},G4);Tt(Ff,j4),Tt(Ff,LIe);const nh=Tt({},K4);Tt(nh,EIe);const L4=u(function(J){let Ee=y(J);(!Ee||!Ee.tagName)&&(Ee={namespaceURI:Ge,tagName:"template"});const Oe=Ik(J.tagName),pn=Ik(Ee.tagName);return kt[J.namespaceURI]?J.namespaceURI===Ie?Ee.namespaceURI===$e?Oe==="svg":Ee.namespaceURI===Me?Oe==="svg"&&(pn==="annotation-xml"||Zd[pn]):!!Ff[Oe]:J.namespaceURI===Me?Ee.namespaceURI===$e?Oe==="math":Ee.namespaceURI===Ie?Oe==="math"&&eh[pn]:!!nh[Oe]:J.namespaceURI===$e?Ee.namespaceURI===Ie&&!eh[pn]||Ee.namespaceURI===Me&&!Zd[pn]?!1:!nh[Oe]&&(th[Oe]||!Ff[Oe]):!!(gn==="application/xhtml+xml"&&kt[J.namespaceURI]):!1},"_checkValidNamespace"),La=u(function(J){V_(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{J.remove()}},"_forceRemove"),D_=u(function(J,Ee){try{V_(e.removed,{attribute:Ee.getAttributeNode(J),from:Ee})}catch{V_(e.removed,{attribute:null,from:Ee})}if(Ee.removeAttribute(J),J==="is"&&!fe[J])if(Fr||Yn)try{La(Ee)}catch{}else try{Ee.setAttribute(J,"")}catch{}},"_removeAttribute"),M_=u(function(J){let Ee,Oe;if(Pr)J="<remove></remove>"+J;else{const ir=CIe(J,/^[\r\n\t ]+/);Oe=ir&&ir[0]}gn==="application/xhtml+xml"&&Ge===$e&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const pn=w?w.createHTML(J):J;if(Ge===$e)try{Ee=new g().parseFromString(pn,gn)}catch{}if(!Ee||!Ee.documentElement){Ee=S.createDocument(Ge,"template",null);try{Ee.documentElement.innerHTML=Ft?C:pn}catch{}}const Wi=Ee.body||Ee.documentElement;return J&&Oe&&Wi.insertBefore(i.createTextNode(Oe),Wi.childNodes[0]||null),Ge===$e?E.call(Ee,ze?"html":"body")[0]:ze?Ee.documentElement:Wi},"_initDocument"),mE=u(function(J){return k.call(J.ownerDocument||J,J,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},"_createIterator"),xke=u(function(J){return J instanceof h&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof c)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},"_isClobbered"),bE=u(function(J){return typeof a=="object"?J instanceof a:J&&typeof J=="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},"_isNode"),Rl=u(function(J,Ee,Oe){O[J]&&wIe(O[J],pn=>{pn.call(e,Ee,Oe,Nn)})},"_executeHook"),vve=u(function(J){let Ee;if(Rl("beforeSanitizeElements",J,null),xke(J))return La(J),!0;const Oe=Ct(J.nodeName);if(Rl("uponSanitizeElement",J,{tagName:Oe,allowedTags:z}),J.hasChildNodes()&&!bE(J.firstElementChild)&&(!bE(J.content)||!bE(J.content.firstElementChild))&&ko(/<[/\w]/g,J.innerHTML)&&ko(/<[/\w]/g,J.textContent))return La(J),!0;if(!z[Oe]||mt[Oe]){if(!mt[Oe]&&wve(Oe)&&(ce.tagNameCheck instanceof RegExp&&ko(ce.tagNameCheck,Oe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(Oe)))return!1;if(se&&!N[Oe]){const pn=y(J)||J.parentNode,Wi=v(J)||J.childNodes;if(Wi&&pn){const ir=Wi.length;for(let Vn=ir-1;Vn>=0;--Vn)pn.insertBefore(b(Wi[Vn],!0),_(J))}}return La(J),!0}return J instanceof l&&!L4(J)||(Oe==="noscript"||Oe==="noembed"||Oe==="noframes")&&ko(/<\/no(script|embed|frames)/i,J.innerHTML)?(La(J),!0):(fi&&J.nodeType===3&&(Ee=J.textContent,Ee=Vr(Ee,B," "),Ee=Vr(Ee,H," "),Ee=Vr(Ee,F," "),J.textContent!==Ee&&(V_(e.removed,{element:J.cloneNode()}),J.textContent=Ee)),Rl("afterSanitizeElements",J,null),!1)},"_sanitizeElements"),yve=u(function(J,Ee,Oe){if(fE&&(Ee==="id"||Ee==="name")&&(Oe in i||Oe in Ju))return!1;if(!(vt&&!$t[Ee]&&ko($,Ee))){if(!(hn&&ko(ee,Ee))){if(!fe[Ee]||$t[Ee]){if(!(wve(J)&&(ce.tagNameCheck instanceof RegExp&&ko(ce.tagNameCheck,J)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(J))&&(ce.attributeNameCheck instanceof RegExp&&ko(ce.attributeNameCheck,Ee)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(Ee))||Ee==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&ko(ce.tagNameCheck,Oe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(Oe))))return!1}else if(!oe[Ee]){if(!ko(R,Vr(Oe,X,""))){if(!((Ee==="src"||Ee==="xlink:href"||Ee==="href")&&J!=="script"&&SIe(Oe,"data:")===0&&j[J])){if(!(Hn&&!ko(ge,Vr(Oe,X,"")))){if(Oe)return!1}}}}}}return!0},"_isValidAttribute"),wve=u(function(J){return J.indexOf("-")>0},"_basicCustomElementTest"),Cve=u(function(J){let Ee,Oe,pn,Wi;Rl("beforeSanitizeAttributes",J,null);const{attributes:ir}=J;if(!ir)return;const Vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fe};for(Wi=ir.length;Wi--;){Ee=ir[Wi];const{name:Ea,namespaceURI:E4}=Ee;if(Oe=Ea==="value"?Ee.value:xIe(Ee.value),pn=Ct(Ea),Vn.attrName=pn,Vn.attrValue=Oe,Vn.keepAttr=!0,Vn.forceKeepAttr=void 0,Rl("uponSanitizeAttribute",J,Vn),Oe=Vn.attrValue,Vn.forceKeepAttr||(D_(Ea,J),!Vn.keepAttr))continue;if(!er&&ko(/\/>/i,Oe)){D_(Ea,J);continue}fi&&(Oe=Vr(Oe,B," "),Oe=Vr(Oe,H," "),Oe=Vr(Oe,F," "));const Sve=Ct(J.nodeName);if(yve(Sve,pn,Oe)){if(pE&&(pn==="id"||pn==="name")&&(D_(Ea,J),Oe=T4+Oe),w&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!E4)switch(f.getAttributeType(Sve,pn)){case"TrustedHTML":{Oe=w.createHTML(Oe);break}case"TrustedScriptURL":{Oe=w.createScriptURL(Oe);break}}try{E4?J.setAttributeNS(E4,Ea,Oe):J.setAttribute(Ea,Oe),C0e(e.removed)}catch{}}}Rl("afterSanitizeAttributes",J,null)},"_sanitizeAttributes"),Tke=u(function Je(J){let Ee;const Oe=mE(J);for(Rl("beforeSanitizeShadowDOM",J,null);Ee=Oe.nextNode();)Rl("uponSanitizeShadowNode",Ee,null),!vve(Ee)&&(Ee.content instanceof s&&Je(Ee.content),Cve(Ee));Rl("afterSanitizeShadowDOM",J,null)},"_sanitizeShadowDOM");return e.sanitize=function(Je){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee,Oe,pn,Wi;if(Ft=!Je,Ft&&(Je="<!-->"),typeof Je!="string"&&!bE(Je))if(typeof Je.toString=="function"){if(Je=Je.toString(),typeof Je!="string")throw W_("dirty is not a string, aborting")}else throw W_("toString is not a function");if(!e.isSupported)return Je;if(tr||Or(J),e.removed=[],typeof Je=="string"&&(Z=!1),Z){if(Je.nodeName){const Ea=Ct(Je.nodeName);if(!z[Ea]||mt[Ea])throw W_("root node is forbidden and cannot be sanitized in-place")}}else if(Je instanceof a)Ee=M_("<!---->"),Oe=Ee.ownerDocument.importNode(Je,!0),Oe.nodeType===1&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?Ee=Oe:Ee.appendChild(Oe);else{if(!Fr&&!fi&&!ze&&Je.indexOf("<")===-1)return w&&Lo?w.createHTML(Je):Je;if(Ee=M_(Je),!Ee)return Fr?null:Lo?C:""}Ee&&Pr&&La(Ee.firstChild);const ir=mE(Z?Je:Ee);for(;pn=ir.nextNode();)vve(pn)||(pn.content instanceof s&&Tke(pn.content),Cve(pn));if(Z)return Je;if(Fr){if(Yn)for(Wi=T.call(Ee.ownerDocument);Ee.firstChild;)Wi.appendChild(Ee.firstChild);else Wi=Ee;return(fe.shadowroot||fe.shadowrootmode)&&(Wi=D.call(t,Wi,!0)),Wi}let Vn=ze?Ee.outerHTML:Ee.innerHTML;return ze&&z["!doctype"]&&Ee.ownerDocument&&Ee.ownerDocument.doctype&&Ee.ownerDocument.doctype.name&&ko(PSe,Ee.ownerDocument.doctype.name)&&(Vn="<!DOCTYPE "+Ee.ownerDocument.doctype.name+`>
`+Vn),fi&&(Vn=Vr(Vn,B," "),Vn=Vr(Vn,H," "),Vn=Vr(Vn,F," ")),w&&Lo?w.createHTML(Vn):Vn},e.setConfig=function(Je){Or(Je),tr=!0},e.clearConfig=function(){Nn=null,tr=!1},e.isValidAttribute=function(Je,J,Ee){Nn||Or({});const Oe=Ct(Je),pn=Ct(J);return yve(Oe,pn,Ee)},e.addHook=function(Je,J){typeof J=="function"&&(O[Je]=O[Je]||[],V_(O[Je],J))},e.removeHook=function(Je){if(O[Je])return C0e(O[Je])},e.removeHooks=function(Je){O[Je]&&(O[Je]=[])},e.removeAllHooks=function(){O={}},e}u(FSe,"createDOMPurify");var Dl=FSe();Dl.version;Dl.isSupported;const OSe=Dl.sanitize;Dl.setConfig;Dl.clearConfig;Dl.isValidAttribute;const HSe=Dl.addHook,VSe=Dl.removeHook;Dl.removeHooks;Dl.removeAllHooks;var qe;(function(o){o.inMemory="inmemory",o.vscode="vscode",o.internal="private",o.walkThrough="walkThrough",o.walkThroughSnippet="walkThroughSnippet",o.http="http",o.https="https",o.file="file",o.mailto="mailto",o.untitled="untitled",o.data="data",o.command="command",o.vscodeRemote="vscode-remote",o.vscodeRemoteResource="vscode-remote-resource",o.vscodeManagedRemoteResource="vscode-managed-remote-resource",o.vscodeUserData="vscode-userdata",o.vscodeCustomEditor="vscode-custom-editor",o.vscodeNotebookCell="vscode-notebook-cell",o.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",o.vscodeNotebookCellOutput="vscode-notebook-cell-output",o.vscodeInteractiveInput="vscode-interactive-input",o.vscodeSettings="vscode-settings",o.vscodeWorkspaceTrust="vscode-workspace-trust",o.vscodeTerminal="vscode-terminal",o.vscodeChatSesssion="vscode-chat-editor",o.webviewPanel="webview-panel",o.vscodeWebview="vscode-webview",o.extension="extension",o.vscodeFileResource="vscode-file",o.tmp="tmp",o.vsls="vsls",o.vscodeSourceControl="vscode-scm"})(qe||(qe={}));const OIe="tkn",sie=class sie{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${qe.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Be(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(r+=`&${OIe}=${encodeURIComponent(s)}`),Ae.from({scheme:Ku?this._preferredWebSchema:qe.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:r})}};u(sie,"RemoteAuthoritiesImpl");let k9=sie;const WSe=new k9,I0=class I0{uriToBrowserUri(e){return e.scheme===qe.vscodeRemote?WSe.rewrite(e):e.scheme===qe.file&&(ca||tDe&&vr.origin===`${qe.vscodeFileResource}://${I0.FALLBACK_AUTHORITY}`)?e.with({scheme:qe.vscodeFileResource,authority:e.authority||I0.FALLBACK_AUTHORITY,query:null,fragment:null}):e}};u(I0,"FileAccessImpl");let uM=I0;uM.FALLBACK_AUTHORITY="vscode-app";const BSe=new uM;var k0e;(function(o){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(s){let r;typeof s=="string"?r=new URL(s).searchParams:s instanceof URL?r=s.searchParams:Ae.isUri(s)&&(r=new URL(s.toString(!0)).searchParams);const a=r?.get(t);if(a)return e.get(a)}u(n,"getHeadersFromQuery"),o.getHeadersFromQuery=n;function i(s,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}u(i,"addSearchParam"),o.addSearchParam=i})(k0e||(k0e={}));function $n(o){for(;o.firstChild;)o.firstChild.remove()}u($n,"clearNode");function AZ(o){var e;return(e=o?.isConnected)!==null&&e!==void 0?e:!1}u(AZ,"isInDOM");const oie=class oie{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};u(oie,"DomListener");let D9=oie;function q(o,e,t,n){return new D9(o,e,t,n)}u(q,"addDisposableListener");function USe(o){return function(e){return o(new Bs(e))}}u(USe,"_wrapAsStandardMouseEvent");function HIe(o){return function(e){return o(new Mt(e))}}u(HIe,"_wrapAsStandardKeyboardEvent");const Jt=u(function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=USe(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=HIe(n)),q(e,t,s,i)},"addStandardDisposableListener"),VIe=u(function(e,t,n){const i=USe(t);return WIe(e,i,n)},"addStandardDisposableListener");function WIe(o,e,t){return q(o,Cr&&MZ.pointerEvents?pe.POINTER_DOWN:pe.MOUSE_DOWN,e,t)}u(WIe,"addDisposableGenericMouseDownListener");let hM,jo;const rie=class rie{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Be(e)}}static sort(e,t){return t.priority-e.priority}};u(rie,"AnimationFrameQueueItem");let Wv=rie;(function(){let o=[],e=null,t=!1,n=!1;const i=u(()=>{for(t=!1,e=o,o=[],n=!0;e.length>0;)e.sort(Wv.sort),e.shift().execute();n=!1},"animationFrameRunner");jo=u((s,r=0)=>{const a=new Wv(s,r);return o.push(a),t||(t=!0,requestAnimationFrame(i)),a},"scheduleAtNextAnimationFrame"),hM=u((s,r)=>{if(n){const a=new Wv(s,r);return e.push(a),a}else return jo(s,r)},"runAtThisOrScheduleAtNextAnimationFrame")})();function DO(o){return document.defaultView.getComputedStyle(o,null)}u(DO,"getComputedStyle$1");function w_(o){if(o!==document.body)return new _t(o.clientWidth,o.clientHeight);if(Cr&&window.visualViewport)return new _t(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new _t(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new _t(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new _t(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}u(w_,"getClientArea");const fs=class fs{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=DO(e),s=i?i.getPropertyValue(t):"0";return fs.convertToPixels(e,s)}static getBorderLeftWidth(e){return fs.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return fs.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return fs.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return fs.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return fs.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return fs.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return fs.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return fs.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return fs.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return fs.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return fs.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return fs.getDimension(e,"margin-bottom","marginBottom")}};u(fs,"SizeUtils");let xs=fs;const Yp=class Yp{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Yp(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Yp?e:new Yp(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};u(Yp,"Dimension");let _t=Yp;_t.None=new _t(0,0);function zSe(o){let e=o.offsetParent,t=o.offsetTop,n=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==document.body&&o!==document.documentElement;){t-=o.scrollTop;const i=jSe(o)?null:DO(o);i&&(n-=i.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(n+=xs.getBorderLeftWidth(o),t+=xs.getBorderTopWidth(o),t+=o.offsetTop,n+=o.offsetLeft,e=o.offsetParent)}return{left:n,top:t}}u(zSe,"getTopLeftOffset");function BIe(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}u(BIe,"size");function Cn(o){const e=o.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,width:e.width,height:e.height}}u(Cn,"getDomNodePagePosition");function UIe(o){let e=o,t=1;do{const n=DO(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}u(UIe,"getDomNodeZoomLevel");function bs(o){const e=xs.getMarginLeft(o)+xs.getMarginRight(o);return o.offsetWidth+e}u(bs,"getTotalWidth");function q4(o){const e=xs.getBorderLeftWidth(o)+xs.getBorderRightWidth(o),t=xs.getPaddingLeft(o)+xs.getPaddingRight(o);return o.offsetWidth-e-t}u(q4,"getContentWidth");function zIe(o){const e=xs.getBorderTopWidth(o)+xs.getBorderBottomWidth(o),t=xs.getPaddingTop(o)+xs.getPaddingBottom(o);return o.offsetHeight-e-t}u(zIe,"getContentHeight");function zh(o){const e=xs.getMarginTop(o)+xs.getMarginBottom(o);return o.offsetHeight+e}u(zh,"getTotalHeight");function Mi(o,e){for(;o;){if(o===e)return!0;o=o.parentNode}return!1}u(Mi,"isAncestor$1");function GSe(o,e,t){for(;o&&o.nodeType===o.ELEMENT_NODE;){if(o.classList.contains(e))return o;if(t){if(typeof t=="string"){if(o.classList.contains(t))return null}else if(o===t)return null}o=o.parentNode}return null}u(GSe,"findParentWithClass");function Y4(o,e,t){return!!GSe(o,e,t)}u(Y4,"hasParentWithClass");function jSe(o){return o&&!!o.host&&!!o.mode}u(jSe,"isShadowRoot");function gM(o){return!!Ng(o)}u(gM,"isInShadowDOM");function Ng(o){for(;o.parentNode;){if(o===document.body)return null;o=o.parentNode}return jSe(o)?o:null}u(Ng,"getShadowRoot");function tu(){let o=document.activeElement;for(;o?.shadowRoot;)o=o.shadowRoot.activeElement;return o}u(tu,"getActiveElement");function Ko(o=document.getElementsByTagName("head")[0],e){const t=document.createElement("style");return t.type="text/css",t.media="screen",e?.(t),o.appendChild(t),t}u(Ko,"createStyleSheet");let X4=null;function KSe(){return X4||(X4=Ko()),X4}u(KSe,"getSharedStyleSheet");function GIe(o){var e,t;return!((e=o?.sheet)===null||e===void 0)&&e.rules?o.sheet.rules:!((t=o?.sheet)===null||t===void 0)&&t.cssRules?o.sheet.cssRules:[]}u(GIe,"getDynamicStyleSheetRules");function M9(o,e,t=KSe()){!t||!e||t.sheet.insertRule(o+"{"+e+"}",0)}u(M9,"createCSSRule");function D0e(o,e=KSe()){if(!e)return;const t=GIe(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(o)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}u(D0e,"removeCSSRulesContainingSelector");function $Se(o){return typeof HTMLElement=="object"?o instanceof HTMLElement:o&&typeof o=="object"&&o.nodeType===1&&typeof o.nodeName=="string"}u($Se,"isHTMLElement");const pe={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:eg?"webkitAnimationStart":"animationstart",ANIMATION_END:eg?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:eg?"webkitAnimationIteration":"animationiteration"};function jIe(o){const e=o;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}u(jIe,"isEventLike");const Ke={stop:(o,e)=>(o.preventDefault(),e&&o.stopPropagation(),o)};function KIe(o){const e=[];for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)e[t]=o.scrollTop,o=o.parentNode;return e}u(KIe,"saveParentsScrollTop");function $Ie(o,e){for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)o.scrollTop!==e[t]&&(o.scrollTop=e[t]),o=o.parentNode}u($Ie,"restoreParentsScrollTop");const N0=class N0 extends G{static hasFocusWithin(e){const t=Ng(e),n=t?t.activeElement:document.activeElement;return Mi(n,e)}constructor(e){super(),this._onDidFocus=this._register(new V),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new V),this.onDidBlur=this._onDidBlur.event;let t=N0.hasFocusWithin(e),n=!1;const i=u(()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},"onFocus"),s=u(()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))},"onBlur");this._refreshStateHandler=()=>{N0.hasFocusWithin(e)!==t&&(t?s():i())},this._register(q(e,pe.FOCUS,i,!0)),this._register(q(e,pe.BLUR,s,!0)),this._register(q(e,pe.FOCUS_IN,()=>this._refreshStateHandler())),this._register(q(e,pe.FOCUS_OUT,()=>this._refreshStateHandler()))}};u(N0,"FocusTracker");let A9=N0;function ul(o){return new A9(o)}u(ul,"trackFocus");function Q(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}u(Q,"append$1");function qSe(o,e){return o.insertBefore(e,o.firstChild),e}u(qSe,"prepend$1");function wi(o,...e){o.innerText="",Q(o,...e)}u(wi,"reset");const qIe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var gw;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.SVG="http://www.w3.org/2000/svg"})(gw||(gw={}));function YSe(o,e,t,...n){const i=qIe.exec(e);if(!i)throw new Error("Bad use of emmet");const s=i[1]||"div";let r;return o!==gw.HTML?r=document.createElementNS(o,s):r=document.createElement(s),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}u(YSe,"_$");function re(o,e,...t){return YSe(gw.HTML,o,e,...t)}u(re,"$$d");re.SVG=function(o,e,...t){return YSe(gw.SVG,o,e,...t)};function YIe(o,...e){o?Os(...e):ts(...e)}u(YIe,"setVisibility");function Os(...o){for(const e of o)e.style.display="",e.removeAttribute("aria-hidden")}u(Os,"show");function ts(...o){for(const e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}u(ts,"hide");function M0e(o){const e=window.devicePixelRatio*o;return Math.max(1,Math.floor(e))/window.devicePixelRatio}u(M0e,"computeScreenAwareSize");function XSe(o){window.open(o,"_blank","noopener")}u(XSe,"windowOpenNoOpener");function XIe(o){const e=u(()=>{o(),t=jo(e)},"step");let t=jo(e);return He(()=>t.dispose())}u(XIe,"animate");WSe.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function bu(o){return o?`url('${BSe.uriToBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}u(bu,"asCSSUrl");function A0e(o){return`'${o.replace(/'/g,"%27")}'`}u(A0e,"asCSSPropertyValue");function tg(o,e){if(o!==void 0){const t=o.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=tg(n[1].trim(),e)),`var(${n[0]}, ${e})`}return o}return e}u(tg,"asCssValueWithDefault");function ZIe(o,e=!1){const t=document.createElement("a");return HSe("afterSanitizeAttributes",n=>{for(const i of["href","src"])if(n.hasAttribute(i)){const s=n.getAttribute(i);if(i==="href"&&s.startsWith("#"))continue;if(t.href=s,!o.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),He(()=>{VSe("afterSanitizeAttributes")})}u(ZIe,"hookDomPurifyHrefAndSrcSanitizer");const JIe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),Nh=class Nh extends V{constructor(){super(),this._subscriptions=new ie,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(q(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Mt(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(q(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(q(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(q(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(q(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(q(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Nh.instance||(Nh.instance=new Nh),Nh.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};u(Nh,"ModifierKeyEmitter");let db=Nh;const aie=class aie extends G{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(q(this.element,pe.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(q(this.element,pe.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)===null||n===void 0||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(q(this.element,pe.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(q(this.element,pe.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(q(this.element,pe.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}};u(aie,"DragAndDropObserver");let I9=aie;const QIe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function ai(o,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const i=QIe.exec(o);if(!i||!i.groups)throw new Error("Bad use of h");const s=i.groups.tag||"div",r=document.createElement(s);i.groups.id&&(r.id=i.groups.id);const a=[];if(i.groups.class)for(const d of i.groups.class.split("."))d!==""&&a.push(d);if(t.className!==void 0)for(const d of t.className.split("."))d!==""&&a.push(d);a.length>0&&(r.className=a.join(" "));const l={};if(i.groups.name&&(l[i.groups.name]=r),n)for(const d of n)d instanceof HTMLElement?r.appendChild(d):typeof d=="string"?r.append(d):"root"in d&&(Object.assign(l,d),r.appendChild(d.root));for(const[d,c]of Object.entries(t))if(d!=="className")if(d==="style")for(const[h,g]of Object.entries(c))r.style.setProperty(I0e(h),typeof g=="number"?g+"px":""+g);else d==="tabIndex"?r.tabIndex=c:r.setAttribute(I0e(d),c.toString());return l.root=r,l}u(ai,"h");function I0e(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}u(I0e,"camelCaseToHyphenCase");const N0e=2e4;let bh,Nk,N9,Rk,R9;function eNe(o){bh=document.createElement("div"),bh.className="monaco-aria-container";const e=u(()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),bh.appendChild(n),n},"createAlertContainer");Nk=e(),N9=e();const t=u(()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),bh.appendChild(n),n},"createStatusContainer");Rk=t(),R9=t(),o.appendChild(bh)}u(eNe,"setARIAContainer");function Ii(o){bh&&(Nk.textContent!==o?($n(N9),fM(Nk,o)):($n(Nk),fM(N9,o)))}u(Ii,"alert");function Rg(o){bh&&(Rk.textContent!==o?($n(R9),fM(Rk,o)):($n(Rk),fM(R9,o)))}u(Rg,"status");function fM(o,e){$n(o),e.length>N0e&&(e=e.substr(0,N0e)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}u(fM,"insertMessage");const IZ=nt("markerDecorationsService"),Ds=nt("textModelService");var cb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const lie=class lie extends G{constructor(e,t="",n="",i=!0,s){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return cb(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}};u(lie,"Action");let qn=lie;const die=class die extends G{constructor(){super(...arguments),this._onWillRun=this._register(new V),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new V),this.onDidRun=this._onDidRun.event}run(e,t){return cb(this,void 0,void 0,function*(){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return cb(this,void 0,void 0,function*(){yield e.run(t)})}};u(die,"ActionRunner");let _u=die;const R0=class R0{constructor(){this.id=R0.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new R0,...n]:t=n);return t}run(){return cb(this,void 0,void 0,function*(){})}};u(R0,"Separator");let ui=R0;ui.ID="vs.actions.separator";const cie=class cie{get actions(){return this._actions}constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}run(){return cb(this,void 0,void 0,function*(){})}};u(cie,"SubmenuAction");let vu=cie;const lP=class lP extends qn{constructor(){super(lP.ID,m("submenu.empty","(empty)"),void 0,!1)}};u(lP,"EmptySubmenuAction");let pM=lP;pM.ID="vs.actions.empty";function Am(o){var e,t;return{id:o.id,label:o.label,class:void 0,enabled:(e=o.enabled)!==null&&e!==void 0?e:!0,checked:(t=o.checked)!==null&&t!==void 0?t:!1,run:()=>cb(this,void 0,void 0,function*(){return o.run()}),tooltip:o.label}}u(Am,"toAction");var P9;(function(o){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}u(e,"isThemeColor"),o.isThemeColor=e})(P9||(P9={}));var Te;(function(o){o.iconNameSegment="[A-Za-z0-9]+",o.iconNameExpression="[A-Za-z0-9-]+",o.iconModifierExpression="~[A-Za-z]+",o.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${o.iconNameExpression})(${o.iconModifierExpression})?$`);function t(g){const f=e.exec(g.id);if(!f)return t(ue.error);const[,p,b]=f,_=["codicon","codicon-"+p];return b&&_.push("codicon-modifier-"+b.substring(1)),_}u(t,"asClassNameArray"),o.asClassNameArray=t;function n(g){return t(g).join(" ")}u(n,"asClassName"),o.asClassName=n;function i(g){return"."+t(g).join(".")}u(i,"asCSSSelector"),o.asCSSSelector=i;function s(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||P9.isThemeColor(g.color))}u(s,"isThemeIcon"),o.isThemeIcon=s;const r=new RegExp(`^\\$\\((${o.iconNameExpression}(?:${o.iconModifierExpression})?)\\)$`);function a(g){const f=r.exec(g);if(!f)return;const[,p]=f;return{id:p}}u(a,"fromString"),o.fromString=a;function l(g){return{id:g}}u(l,"fromId"),o.fromId=l;function d(g,f){let p=g.id;const b=p.lastIndexOf("~");return b!==-1&&(p=p.substring(0,b)),f&&(p=`${p}~${f}`),{id:p}}u(d,"modify"),o.modify=d;function c(g){const f=g.id.lastIndexOf("~");if(f!==-1)return g.id.substring(f+1)}u(c,"getModifier"),o.getModifier=c;function h(g,f){var p,b;return g.id===f.id&&((p=g.color)===null||p===void 0?void 0:p.id)===((b=f.color)===null||b===void 0?void 0:b.id)}u(h,"isEqual"),o.isEqual=h})(Te||(Te={}));const un=nt("commandService"),lt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new V,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.description){const r=[];for(const l of o.description.args)r.push(l.constraint);const a=o.handler;o.handler=function(l,...d){return jke(d,r),a(l,...d)}}const{id:t}=o;let n=this._commands.get(t);n||(n=new Ai,this._commands.set(t,n));const i=n.unshift(o),s=He(()=>{i();const r=this._commands.get(t);r?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(o,e){return lt.registerCommand(o,(t,...n)=>t.get(un).executeCommand(e,...n))}getCommand(o){const e=this._commands.get(o);if(!(!e||e.isEmpty()))return et.first(e)}getCommands(){const o=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&o.set(e,t)}return o}};lt.registerCommand("noop",()=>{});const dP=class dP{constructor(){this._coreKeybindings=new Ai,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(oo===1){if(e&&e.win)return e.win}else if(oo===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=dP.bindToCurrentPlatform(e),n=new ie;if(t&&t.primary){const i=C9(t.primary,oo);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const r=t.secondary[i],a=C9(r,oo);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}registerCommandAndKeybindingRule(e){return yr(this.registerKeybindingRule(e),lt.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,s,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:r,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,He(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(nNe)),this._cachedMergedKeybindings.slice(0)}};u(dP,"KeybindingsRegistryImpl");let F9=dP;const Ts=new F9,tNe={EditorModes:"platform.keybindingsRegistry"};on.add(tNe.EditorModes,Ts);function nNe(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}u(nNe,"sorter");var iNe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},R0e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},sNe=globalThis&&globalThis.__rest||function(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(o);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(o,n[i])&&(t[n[i]]=o[n[i]]);return t},Pk;function fp(o){return o.command!==void 0}u(fp,"isIMenuItem");function oNe(o){return o.submenu!==void 0}u(oNe,"isISubmenuItem");const P0=class P0{constructor(e){if(P0._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);P0._instances.set(e,this),this.id=e}};u(P0,"MenuId");let A=P0;A._instances=new Map;A.CommandPalette=new A("CommandPalette");A.DebugBreakpointsContext=new A("DebugBreakpointsContext");A.DebugCallStackContext=new A("DebugCallStackContext");A.DebugConsoleContext=new A("DebugConsoleContext");A.DebugVariablesContext=new A("DebugVariablesContext");A.DebugWatchContext=new A("DebugWatchContext");A.DebugToolBar=new A("DebugToolBar");A.DebugToolBarStop=new A("DebugToolBarStop");A.EditorContext=new A("EditorContext");A.SimpleEditorContext=new A("SimpleEditorContext");A.EditorContent=new A("EditorContent");A.EditorLineNumberContext=new A("EditorLineNumberContext");A.EditorContextCopy=new A("EditorContextCopy");A.EditorContextPeek=new A("EditorContextPeek");A.EditorContextShare=new A("EditorContextShare");A.EditorTitle=new A("EditorTitle");A.EditorTitleRun=new A("EditorTitleRun");A.EditorTitleContext=new A("EditorTitleContext");A.EditorTitleContextShare=new A("EditorTitleContextShare");A.EmptyEditorGroup=new A("EmptyEditorGroup");A.EmptyEditorGroupContext=new A("EmptyEditorGroupContext");A.EditorTabsBarContext=new A("EditorTabsBarContext");A.ExplorerContext=new A("ExplorerContext");A.ExplorerContextShare=new A("ExplorerContextShare");A.ExtensionContext=new A("ExtensionContext");A.GlobalActivity=new A("GlobalActivity");A.CommandCenter=new A("CommandCenter");A.LayoutControlMenuSubmenu=new A("LayoutControlMenuSubmenu");A.LayoutControlMenu=new A("LayoutControlMenu");A.MenubarMainMenu=new A("MenubarMainMenu");A.MenubarAppearanceMenu=new A("MenubarAppearanceMenu");A.MenubarDebugMenu=new A("MenubarDebugMenu");A.MenubarEditMenu=new A("MenubarEditMenu");A.MenubarCopy=new A("MenubarCopy");A.MenubarFileMenu=new A("MenubarFileMenu");A.MenubarGoMenu=new A("MenubarGoMenu");A.MenubarHelpMenu=new A("MenubarHelpMenu");A.MenubarLayoutMenu=new A("MenubarLayoutMenu");A.MenubarNewBreakpointMenu=new A("MenubarNewBreakpointMenu");A.PanelAlignmentMenu=new A("PanelAlignmentMenu");A.PanelPositionMenu=new A("PanelPositionMenu");A.MenubarPreferencesMenu=new A("MenubarPreferencesMenu");A.MenubarRecentMenu=new A("MenubarRecentMenu");A.MenubarSelectionMenu=new A("MenubarSelectionMenu");A.MenubarShare=new A("MenubarShare");A.MenubarSwitchEditorMenu=new A("MenubarSwitchEditorMenu");A.MenubarSwitchGroupMenu=new A("MenubarSwitchGroupMenu");A.MenubarTerminalMenu=new A("MenubarTerminalMenu");A.MenubarViewMenu=new A("MenubarViewMenu");A.MenubarHomeMenu=new A("MenubarHomeMenu");A.OpenEditorsContext=new A("OpenEditorsContext");A.OpenEditorsContextShare=new A("OpenEditorsContextShare");A.ProblemsPanelContext=new A("ProblemsPanelContext");A.SCMChangeContext=new A("SCMChangeContext");A.SCMResourceContext=new A("SCMResourceContext");A.SCMResourceContextShare=new A("SCMResourceContextShare");A.SCMResourceFolderContext=new A("SCMResourceFolderContext");A.SCMResourceGroupContext=new A("SCMResourceGroupContext");A.SCMSourceControl=new A("SCMSourceControl");A.SCMTitle=new A("SCMTitle");A.SearchContext=new A("SearchContext");A.SearchActionMenu=new A("SearchActionContext");A.StatusBarWindowIndicatorMenu=new A("StatusBarWindowIndicatorMenu");A.StatusBarRemoteIndicatorMenu=new A("StatusBarRemoteIndicatorMenu");A.StickyScrollContext=new A("StickyScrollContext");A.TestItem=new A("TestItem");A.TestItemGutter=new A("TestItemGutter");A.TestMessageContext=new A("TestMessageContext");A.TestMessageContent=new A("TestMessageContent");A.TestPeekElement=new A("TestPeekElement");A.TestPeekTitle=new A("TestPeekTitle");A.TouchBarContext=new A("TouchBarContext");A.TitleBarContext=new A("TitleBarContext");A.TitleBarTitleContext=new A("TitleBarTitleContext");A.TunnelContext=new A("TunnelContext");A.TunnelPrivacy=new A("TunnelPrivacy");A.TunnelProtocol=new A("TunnelProtocol");A.TunnelPortInline=new A("TunnelInline");A.TunnelTitle=new A("TunnelTitle");A.TunnelLocalAddressInline=new A("TunnelLocalAddressInline");A.TunnelOriginInline=new A("TunnelOriginInline");A.ViewItemContext=new A("ViewItemContext");A.ViewContainerTitle=new A("ViewContainerTitle");A.ViewContainerTitleContext=new A("ViewContainerTitleContext");A.ViewTitle=new A("ViewTitle");A.ViewTitleContext=new A("ViewTitleContext");A.CommentEditorActions=new A("CommentEditorActions");A.CommentThreadTitle=new A("CommentThreadTitle");A.CommentThreadActions=new A("CommentThreadActions");A.CommentThreadAdditionalActions=new A("CommentThreadAdditionalActions");A.CommentThreadTitleContext=new A("CommentThreadTitleContext");A.CommentThreadCommentContext=new A("CommentThreadCommentContext");A.CommentTitle=new A("CommentTitle");A.CommentActions=new A("CommentActions");A.InteractiveToolbar=new A("InteractiveToolbar");A.InteractiveCellTitle=new A("InteractiveCellTitle");A.InteractiveCellDelete=new A("InteractiveCellDelete");A.InteractiveCellExecute=new A("InteractiveCellExecute");A.InteractiveInputExecute=new A("InteractiveInputExecute");A.NotebookToolbar=new A("NotebookToolbar");A.NotebookStickyScrollContext=new A("NotebookStickyScrollContext");A.NotebookCellTitle=new A("NotebookCellTitle");A.NotebookCellDelete=new A("NotebookCellDelete");A.NotebookCellInsert=new A("NotebookCellInsert");A.NotebookCellBetween=new A("NotebookCellBetween");A.NotebookCellListTop=new A("NotebookCellTop");A.NotebookCellExecute=new A("NotebookCellExecute");A.NotebookCellExecutePrimary=new A("NotebookCellExecutePrimary");A.NotebookDiffCellInputTitle=new A("NotebookDiffCellInputTitle");A.NotebookDiffCellMetadataTitle=new A("NotebookDiffCellMetadataTitle");A.NotebookDiffCellOutputsTitle=new A("NotebookDiffCellOutputsTitle");A.NotebookOutputToolbar=new A("NotebookOutputToolbar");A.NotebookEditorLayoutConfigure=new A("NotebookEditorLayoutConfigure");A.NotebookKernelSource=new A("NotebookKernelSource");A.BulkEditTitle=new A("BulkEditTitle");A.BulkEditContext=new A("BulkEditContext");A.TimelineItemContext=new A("TimelineItemContext");A.TimelineTitle=new A("TimelineTitle");A.TimelineTitleContext=new A("TimelineTitleContext");A.TimelineFilterSubMenu=new A("TimelineFilterSubMenu");A.AccountsContext=new A("AccountsContext");A.PanelTitle=new A("PanelTitle");A.AuxiliaryBarTitle=new A("AuxiliaryBarTitle");A.TerminalInstanceContext=new A("TerminalInstanceContext");A.TerminalEditorInstanceContext=new A("TerminalEditorInstanceContext");A.TerminalNewDropdownContext=new A("TerminalNewDropdownContext");A.TerminalTabContext=new A("TerminalTabContext");A.TerminalTabEmptyAreaContext=new A("TerminalTabEmptyAreaContext");A.WebviewContext=new A("WebviewContext");A.InlineCompletionsActions=new A("InlineCompletionsActions");A.NewFile=new A("NewFile");A.MergeInput1Toolbar=new A("MergeToolbar1Toolbar");A.MergeInput2Toolbar=new A("MergeToolbar2Toolbar");A.MergeBaseToolbar=new A("MergeBaseToolbar");A.MergeInputResultToolbar=new A("MergeToolbarResultToolbar");A.InlineSuggestionToolbar=new A("InlineSuggestionToolbar");A.ChatContext=new A("ChatContext");A.ChatCodeBlock=new A("ChatCodeblock");A.ChatMessageTitle=new A("ChatMessageTitle");A.ChatExecute=new A("ChatExecute");A.ChatInputSide=new A("ChatInputSide");A.AccessibleView=new A("AccessibleView");const Ml=nt("menuService"),F0=class F0{static for(e){let t=this._all.get(e);return t||(t=new F0(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof F0&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};u(F0,"MenuRegistryChangeEvent");let Ic=F0;Ic._all=new Map;const Ni=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new JV({merge:Ic.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(o){return this._commands.set(o.id,o),this._onDidChangeMenu.fire(Ic.for(A.CommandPalette)),He(()=>{this._commands.delete(o.id)&&this._onDidChangeMenu.fire(Ic.for(A.CommandPalette))})}getCommand(o){return this._commands.get(o)}getCommands(){const o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){let t=this._menuItems.get(o);t||(t=new Ai,this._menuItems.set(o,t));const n=t.push(e);return this._onDidChangeMenu.fire(Ic.for(o)),He(()=>{n(),this._onDidChangeMenu.fire(Ic.for(o))})}appendMenuItems(o){const e=new ie;for(const{id:t,item:n}of o)e.add(this.appendMenuItem(t,n));return e}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===A.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){const e=new Set;for(const t of o)fp(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||o.push({command:t})})}},uie=class uie extends vu{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}};u(uie,"SubmenuItemAction");let Pg=uie;var P1;let Er=Pk=(P1=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,i,s,r){var a,l;this.hideActions=i,this._commandService=r,this.id=e.id,this.label=Pk.label(e,n),this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let d;if(e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&Te.isThemeIcon(c.icon)&&(d=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}d||(d=Te.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Pk(t,void 0,n,i,s,r):void 0,this._options=n,this.class=d&&Te.asClassName(d)}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}},u(P1,"MenuItemAction"),P1);Er=Pk=iNe([R0e(4,Re),R0e(5,un)],Er);const hie=class hie{constructor(e){this.desc=e}};u(hie,"Action2");let $o=hie;function Sn(o){const e=new ie,t=new o,n=t.desc,{f1:i,menu:s,keybinding:r,description:a}=n,l=sNe(n,["f1","menu","keybinding","description"]);if(e.add(lt.registerCommand({id:l.id,handler:(d,...c)=>t.run(d,...c),description:a})),Array.isArray(s))for(const d of s)e.add(Ni.appendMenuItem(d.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:d.precondition===null?void 0:l.precondition})},d)));else s&&e.add(Ni.appendMenuItem(s.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:s.precondition===null?void 0:l.precondition})},s)));if(i&&(e.add(Ni.appendMenuItem(A.CommandPalette,{command:l,when:l.precondition})),e.add(Ni.addCommand(l))),Array.isArray(r))for(const d of r)e.add(Ts.registerKeybindingRule(Object.assign(Object.assign({},d),{id:l.id,when:l.precondition?ne.and(l.precondition,d.when):d.when})));else r&&e.add(Ts.registerKeybindingRule(Object.assign(Object.assign({},r),{id:l.id,when:l.precondition?ne.and(l.precondition,r.when):r.when})));return e}u(Sn,"registerAction2");const xo=nt("telemetryService"),gie=class gie{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=ne.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ts.registerKeybindingRule(i)}}lt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Ni.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}};u(gie,"Command");let ub=gie;const fie=class fie extends ub{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===n){this._implementations.splice(s,1);return}}}}runCommand(e,t){const n=e.get(So),i=e.get(Re);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=i.getContext(document.activeElement);if(!s.when.evaluate(a))continue}const r=s.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}};u(fie,"MultiCommand");let yu=fie;const pie=class pie extends ub{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}};u(pie,"ProxyCommand");let mM=pie;const O0=class O0 extends ub{static bindToContribution(e){var t;return t=class extends O0{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,r){const a=e(s);a&&this._callback(a,r)}},u(t,"EditorControllerCommandImpl"),t}static runEditorCommand(e,t,n,i){const s=e.get(gt),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Re).contextMatchesRules(n??void 0))return i(a,r,t)})}runCommand(e,t){return O0.runEditorCommand(e,t,this.precondition,(n,i,s)=>this.runEditorCommand(n,i,s))}};u(O0,"EditorCommand");let hi=O0;const cP=class cP extends hi{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=A.EditorContext),i.title||(i.title=e.label),i.when=ne.and(e.precondition,i.when),i}return u(n,"withDefaults"),Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(cP.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(xo).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};u(cP,"EditorAction");let ye=cP;const mie=class mie extends ye{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}};u(mie,"MultiEditorAction");let bM=mie;const bie=class bie extends $o{run(e,...t){const n=e.get(gt),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(i)return i.invokeWithinContext(s=>{var r,a;const l=s.get(Re),d=s.get(So);if(!l.contextMatchesRules((r=this.desc.precondition)!==null&&r!==void 0?r:void 0)){d.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(a=this.desc.precondition)===null||a===void 0?void 0:a.serialize());return}return this.runEditorCommand(s,i,...t)})}};u(bie,"EditorAction2");let Hd=bie;function Al(o,e){lt.registerCommand(o,function(t,...n){const i=t.get(Pe),[s,r]=n;Lt(Ae.isUri(s)),Lt(W.isIPosition(r));const a=t.get(Xt).getModel(s);if(a){const l=W.lift(r);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(Ds).createModelReference(s).then(l=>new Promise((d,c)=>{try{const h=i.invokeFunction(e,l.object.textEditorModel,W.lift(r),n.slice(2));d(h)}catch(h){c(h)}}).finally(()=>{l.dispose()}))})}u(Al,"registerModelAndPositionCommand");function he(o){return Hs.INSTANCE.registerEditorCommand(o),o}u(he,"registerEditorCommand");function ae(o){const e=new o;return Hs.INSTANCE.registerEditorAction(e),e}u(ae,"registerEditorAction");function ZSe(o){return Hs.INSTANCE.registerEditorAction(o),o}u(ZSe,"registerMultiEditorAction");function rNe(o){Hs.INSTANCE.registerEditorAction(o)}u(rNe,"registerInstantiatedEditorAction");function ft(o,e,t){Hs.INSTANCE.registerEditorContribution(o,e,t)}u(ft,"registerEditorContribution");var ng;(function(o){function e(r){return Hs.INSTANCE.getEditorCommand(r)}u(e,"getEditorCommand"),o.getEditorCommand=e;function t(){return Hs.INSTANCE.getEditorActions()}u(t,"getEditorActions"),o.getEditorActions=t;function n(){return Hs.INSTANCE.getEditorContributions()}u(n,"getEditorContributions"),o.getEditorContributions=n;function i(r){return Hs.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}u(i,"getSomeEditorContributions"),o.getSomeEditorContributions=i;function s(){return Hs.INSTANCE.getDiffEditorContributions()}u(s,"getDiffEditorContributions"),o.getDiffEditorContributions=s})(ng||(ng={}));const aNe={EditorCommonContributions:"editor.contributions"},_ie=class _ie{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};u(_ie,"EditorContributionRegistry");let Hs=_ie;Hs.INSTANCE=new Hs;on.add(aNe.EditorCommonContributions,Hs.INSTANCE);function eE(o){return o.register(),o}u(eE,"registerCommand$3");const JSe=eE(new yu({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:A.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:A.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));eE(new mM(JSe,{id:"default:undo",precondition:void 0}));const QSe=eE(new yu({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:A.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:A.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));eE(new mM(QSe,{id:"default:redo",precondition:void 0}));const lNe=eE(new yu({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:A.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:A.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]}));var dNe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cNe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},F1;let fw=(F1=class{constructor(e,t){}dispose(){}},u(F1,"MarkerDecorationsContribution"),F1);fw.ID="editor.contrib.markerDecorations";fw=dNe([cNe(1,IZ)],fw);ft(fw.ID,fw,0);const vie=class vie extends G{constructor(e,t){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=u(()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},"observeNow");let n=!1,i=!1;const s=u(()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{requestAnimationFrame(()=>{i=!1,s()})}},"update");this._resizeObserver=new ResizeObserver(r=>{e=r&&r[0]&&r[0].contentRect?r[0].contentRect:null,n=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}};u(vie,"ElementSizeObserver");let pw=vie;const Xp=class Xp{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Xp._read(e,this.key),n=u(s=>Xp._read(e,s),"read"),i=u((s,r)=>Xp._write(e,s,r),"write");this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);e[s]=e[s]||{},this._write(e[s],t.substring(i+1),n);return}e[t]=n}};u(Xp,"EditorSettingMigration");let hb=Xp;hb.items=[];function qu(o,e){hb.items.push(new hb(o,e))}u(qu,"registerEditorSettingMigration");function Zo(o,e){qu(o,(t,n,i)=>{if(typeof t<"u"){for(const[s,r]of e)if(t===s){i(o,r);return}}})}u(Zo,"registerSimpleEditorSettingMigration");function uNe(o){hb.items.forEach(e=>e.apply(o))}u(uNe,"migrateOptions");Zo("wordWrap",[[!0,"on"],[!1,"off"]]);Zo("lineNumbers",[[!0,"on"],[!1,"off"]]);Zo("cursorBlinking",[["visible","solid"]]);Zo("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Zo("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Zo("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Zo("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Zo("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Zo("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Zo("autoIndent",[[!1,"advanced"],[!0,"full"]]);Zo("matchBrackets",[[!0,"always"],[!1,"never"]]);Zo("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Zo("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);qu("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});qu("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});qu("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});const hNe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};qu("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(const n of Object.entries(hNe))o[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});qu("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){const n=o?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});qu("experimental.stickyScroll.enabled",(o,e,t)=>{typeof o=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",o))});qu("experimental.stickyScroll.maxLineCount",(o,e,t)=>{typeof o=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",o))});const yie=class yie{constructor(){this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new V,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(e){return e==="terminalFocus"?this._tabFocusTerminal:this._tabFocusEditor}setTabFocusMode(e,t){t==="terminalFocus"?this._tabFocusTerminal=e:this._tabFocusEditor=e,this._onDidChangeTabFocus.fire()}};u(yie,"TabFocusImpl");let O9=yie;const ig=new O9;var gNe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},fNe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},O1;let H9=(O1=class extends G{constructor(e,t,n,i){super(),this._accessibilityService=i,this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new V),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new rD,this.isSimpleWidget=e,this._containerObserver=this._register(new pw(n,t.dimension)),this._rawOptions=P0e(t),this._validatedOptions=_h.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(12)&&this._containerObserver.startObserving(),this._register(No.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(ig.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(n3.onDidChange(()=>this._recomputeOptions())),this._register(Yy.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=_h.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Xy.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:ig.getTabFocusMode("editorFocus"),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return _h.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:mNe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:eg||Bo,pixelRatio:Yy.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return n3.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=P0e(e);_h.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=_h.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=pNe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}},u(O1,"EditorConfiguration"),O1);H9=gNe([fNe(3,El)],H9);function pNe(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}u(pNe,"digitCount");function mNe(){let o="";return!Rd&&!rSe&&(o+="no-user-select "),Rd&&(o+="no-minimap-shadow ",o+="enable-user-select "),ot&&(o+="mac "),o}u(mNe,"getExtraEditorClassName");const wie=class wie{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}};u(wie,"ValidatedEditorOptions");let V9=wie;const Cie=class Cie{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}};u(Cie,"ComputedEditorOptions");let W9=Cie;const H0=class H0{static validateOptions(e){const t=new V9;for(const n of cp){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new W9;for(const i of cp)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?jn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!H0._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of cp){const r=!H0._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=r,r&&(i=!0)}return i?new oD(n):null}static applyUpdate(e,t){let n=!1;for(const i of cp)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}};u(H0,"EditorOptionsUtil");let _h=H0;function P0e(o){const e=td(o);return uNe(e),e}u(P0e,"deepCloneAndMigrateOptions");function xn(o,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,r)}),this[s]}}u(xn,"memoize");var bNe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Nt;(function(o){o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"})(Nt||(Nt={}));const Ui=class Ui extends G{constructor(){super(),this.dispatched=!1,this.targets=new Ai,this.ignoreTargets=new Ai,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(q(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(q(document,"touchend",e=>this.onTouchEnd(e))),this._register(q(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){if(!Ui.isTouchDevice())return G.None;Ui.INSTANCE||(Ui.INSTANCE=new Ui);const t=Ui.INSTANCE.targets.push(e);return He(t)}static ignoreTarget(e){if(!Ui.isTouchDevice())return G.None;Ui.INSTANCE||(Ui.INSTANCE=new Ui);const t=Ui.INSTANCE.ignoreTargets.push(e);return He(t)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const r=this.newGestureEvent(Nt.Start,s.target);r.pageX=s.pageX,r.pageY=s.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<Ui.HOLD_DELAY&&Math.abs(a.initialPageX-Eo(a.rollingPageX))<30&&Math.abs(a.initialPageY-Eo(a.rollingPageY))<30){const d=this.newGestureEvent(Nt.Tap,a.initialTarget);d.pageX=Eo(a.rollingPageX),d.pageY=Eo(a.rollingPageY),this.dispatchEvent(d)}else if(l>=Ui.HOLD_DELAY&&Math.abs(a.initialPageX-Eo(a.rollingPageX))<30&&Math.abs(a.initialPageY-Eo(a.rollingPageY))<30){const d=this.newGestureEvent(Nt.Contextmenu,a.initialTarget);d.pageX=Eo(a.rollingPageX),d.pageY=Eo(a.rollingPageY),this.dispatchEvent(d)}else if(n===1){const d=Eo(a.rollingPageX),c=Eo(a.rollingPageY),h=Eo(a.rollingTimestamps)-a.rollingTimestamps[0],g=d-a.rollingPageX[0],f=c-a.rollingPageY[0],p=[...this.targets].filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(p,t,Math.abs(g)/h,g>0?1:-1,d,Math.abs(f)/h,f>0?1:-1,c)}this.dispatchEvent(this.newGestureEvent(Nt.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Nt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Ui.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Nt.Change||e.type===Nt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(const t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,n,i,s,r,a,l){this.handle=jo(()=>{const d=Date.now(),c=d-t;let h=0,g=0,f=!0;n+=Ui.SCROLL_FRICTION*c,r+=Ui.SCROLL_FRICTION*c,n>0&&(f=!1,h=i*n*c),r>0&&(f=!1,g=a*r*c);const p=this.newGestureEvent(Nt.Change);p.translationX=h,p.translationY=g,e.forEach(b=>b.dispatchEvent(p)),f||this.inertia(e,d,n,i,s+h,r,a,l+g)})}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],a=this.newGestureEvent(Nt.Change,r.initialTarget);a.translationX=s.pageX-Eo(r.rollingPageX),a.translationY=s.pageY-Eo(r.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(s.pageX),r.rollingPageY.push(s.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};u(Ui,"Gesture");let oi=Ui;oi.SCROLL_FRICTION=-.005;oi.HOLD_DELAY=700;oi.CLEAR_TAP_COUNT_TIME=400;bNe([xn],oi,"isTouchDevice",null);const Sie=class Sie{constructor(){this._hooks=new ie,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(He(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=window}this._hooks.add(q(r,pe.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(q(r,pe.POINTER_UP,a=>this.stopMonitoring(!0)))}};u(Sie,"GlobalPointerMoveMonitor");let wu=Sie;function NZ(o){return`--vscode-${o.replace(/\./g,"-")}`}u(NZ,"asCssVariableName");function be(o){return`var(${NZ(o)})`}u(be,"asCssVariable");function _Ne(o,e){return`var(${NZ(o)}, ${e})`}u(_Ne,"asCssVariableWithDefault");const exe={ColorContribution:"base.contributions.colors"},xie=class xie{constructor(){this._onDidChangeSchema=new V,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){const r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=r;const a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return Br(i,t)}}getColorSchema(){return this.colorSchema}toString(){const e=u((t,n)=>{const i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)},"sorter");return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}};u(xie,"ColorRegistry");let B9=xie;const MO=new B9;on.add(exe.ColorContribution,MO);function I(o,e,t,n,i){return MO.registerColor(o,e,t,n,i)}u(I,"registerColor");const de=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},m("foreground","Overall foreground color. This color is only used if not overridden by a component."));I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},m("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const vNe=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));I("descriptionForeground",{light:"#717171",dark:ke(de,.7),hcDark:ke(de,.7),hcLight:ke(de,.7)},m("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Fc=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},m("iconForeground","The default color for icons in the workbench.")),ro=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),st=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Gt=I("contrastActiveBorder",{light:null,dark:null,hcDark:ro,hcLight:ro},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));I("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},m("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:K.black,hcLight:"#292929"},m("textSeparatorForeground","Color for text separators."));const yNe=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkForeground","Foreground color for links in text."));I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},m("textPreformatForeground","Foreground color for preformatted text segments."));I("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},m("textBlockQuoteBackground","Background color for block quotes in text."));I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:K.white,hcLight:"#292929"},m("textBlockQuoteBorder","Border color for block quotes in text."));I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:K.black,hcLight:"#F2F2F2"},m("textCodeBlockBackground","Background color for code blocks in text."));const $a=I("widget.shadow",{dark:ke(K.black,.36),light:ke(K.black,.16),hcDark:null,hcLight:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),RZ=I("widget.border",{dark:null,light:null,hcDark:st,hcLight:st},m("widgetBorder","Border color of widgets such as find/replace inside the editor.")),txe=I("input.background",{dark:"#3C3C3C",light:K.white,hcDark:K.black,hcLight:K.white},m("inputBoxBackground","Input box background.")),nxe=I("input.foreground",{dark:de,light:de,hcDark:de,hcLight:de},m("inputBoxForeground","Input box foreground.")),ixe=I("input.border",{dark:null,light:null,hcDark:st,hcLight:st},m("inputBoxBorder","Input box border.")),PZ=I("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:st,hcLight:st},m("inputBoxActiveOptionBorder","Border color of activated options in input fields."));I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},m("inputOption.hoverBackground","Background color of activated options in input fields."));const Gh=I("inputOption.activeBackground",{dark:ke(ro,.4),light:ke(ro,.2),hcDark:K.transparent,hcLight:K.transparent},m("inputOption.activeBackground","Background hover color of options in input fields.")),FZ=I("inputOption.activeForeground",{dark:K.white,light:K.black,hcDark:de,hcLight:de},m("inputOption.activeForeground","Foreground color of activated options in input fields."));I("input.placeholderForeground",{light:ke(de,.5),dark:ke(de,.5),hcDark:ke(de,.7),hcLight:ke(de,.7)},m("inputPlaceholderForeground","Input box foreground color for placeholder text."));const wNe=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:K.black,hcLight:K.white},m("inputValidationInfoBackground","Input validation background color for information severity.")),CNe=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:de},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),SNe=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:st,hcLight:st},m("inputValidationInfoBorder","Input validation border color for information severity.")),xNe=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:K.black,hcLight:K.white},m("inputValidationWarningBackground","Input validation background color for warning severity.")),TNe=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:de},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),LNe=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:st,hcLight:st},m("inputValidationWarningBorder","Input validation border color for warning severity.")),ENe=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:K.black,hcLight:K.white},m("inputValidationErrorBackground","Input validation background color for error severity.")),kNe=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:de},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),DNe=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:st,hcLight:st},m("inputValidationErrorBorder","Input validation border color for error severity.")),qa=I("dropdown.background",{dark:"#3C3C3C",light:K.white,hcDark:K.black,hcLight:K.white},m("dropdownBackground","Dropdown background.")),MNe=I("dropdown.listBackground",{dark:null,light:null,hcDark:K.black,hcLight:K.white},m("dropdownListBackground","Dropdown list background.")),md=I("dropdown.foreground",{dark:"#F0F0F0",light:de,hcDark:K.white,hcLight:de},m("dropdownForeground","Dropdown foreground.")),pp=I("dropdown.border",{dark:qa,light:"#CECECE",hcDark:st,hcLight:st},m("dropdownBorder","Dropdown border.")),lv=I("button.foreground",{dark:K.white,light:K.white,hcDark:K.white,hcLight:K.white},m("buttonForeground","Button foreground color.")),ANe=I("button.separator",{dark:ke(lv,.4),light:ke(lv,.4),hcDark:ke(lv,.4),hcLight:ke(lv,.4)},m("buttonSeparator","Button separator color.")),dv=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},m("buttonBackground","Button background color.")),INe=I("button.hoverBackground",{dark:ga(dv,.2),light:Sf(dv,.2),hcDark:dv,hcLight:dv},m("buttonHoverBackground","Button background color when hovering.")),NNe=I("button.border",{dark:st,light:st,hcDark:st,hcLight:st},m("buttonBorder","Button border color.")),RNe=I("button.secondaryForeground",{dark:K.white,light:K.white,hcDark:K.white,hcLight:de},m("buttonSecondaryForeground","Secondary button foreground color.")),U9=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:K.white},m("buttonSecondaryBackground","Secondary button background color.")),PNe=I("button.secondaryHoverBackground",{dark:ga(U9,.2),light:Sf(U9,.2),hcDark:null,hcLight:null},m("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Fk=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:K.black,hcLight:"#0F4A85"},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),FNe=I("badge.foreground",{dark:K.white,light:"#333",hcDark:K.white,hcLight:K.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ONe=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),cv=I("scrollbarSlider.background",{dark:K.fromHex("#797979").transparent(.4),light:K.fromHex("#646464").transparent(.4),hcDark:ke(st,.6),hcLight:ke(st,.4)},m("scrollbarSliderBackground","Scrollbar slider background color.")),uv=I("scrollbarSlider.hoverBackground",{dark:K.fromHex("#646464").transparent(.7),light:K.fromHex("#646464").transparent(.7),hcDark:ke(st,.8),hcLight:ke(st,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),hv=I("scrollbarSlider.activeBackground",{dark:K.fromHex("#BFBFBF").transparent(.4),light:K.fromHex("#000000").transparent(.6),hcDark:st,hcLight:st},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),HNe=I("progressBar.background",{dark:K.fromHex("#0E70C0"),light:K.fromHex("#0E70C0"),hcDark:st,hcLight:st},m("progressBarBackground","Background color of the progress bar that can show for long running operations."));I("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ya=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},m("editorError.foreground","Foreground color of error squigglies in the editor.")),VNe=I("editorError.border",{dark:null,light:null,hcDark:K.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},m("errorBorder","If set, color of double underlines for errors in the editor."));I("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const ao=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),mw=I("editorWarning.border",{dark:null,light:null,hcDark:K.fromHex("#FFCC00").transparent(.8),hcLight:K.fromHex("#FFCC00").transparent(.8)},m("warningBorder","If set, color of double underlines for warnings in the editor."));I("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const lo=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),z9=I("editorInfo.border",{dark:null,light:null,hcDark:K.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},m("infoBorder","If set, color of double underlines for infos in the editor.")),WNe=I("editorHint.foreground",{dark:K.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor."));I("editorHint.border",{dark:null,light:null,hcDark:K.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},m("hintBorder","If set, color of double underlines for hints in the editor."));I("sash.hoverBorder",{dark:ro,light:ro,hcDark:ro,hcLight:ro},m("sashActiveBorder","Border color of active sashes."));const Gn=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:K.black,hcLight:K.white},m("editorBackground","Editor background color.")),gr=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:K.white,hcLight:de},m("editorForeground","Editor default foreground color."));I("editorStickyScroll.background",{light:Gn,dark:Gn,hcDark:Gn,hcLight:Gn},m("editorStickyScrollBackground","Sticky scroll background color for the editor"));I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},m("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const cn=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:K.white},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Xa=I("editorWidget.foreground",{dark:de,light:de,hcDark:de,hcLight:de},m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Za=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:st,hcLight:st},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),BNe=I("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),F0e=I("quickInput.background",{dark:cn,light:cn,hcDark:cn,hcLight:cn},m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),UNe=I("quickInput.foreground",{dark:Xa,light:Xa,hcDark:Xa,hcLight:Xa},m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),zNe=I("quickInputTitle.background",{dark:new K(new tt(255,255,255,.105)),light:new K(new tt(0,0,0,.06)),hcDark:"#000000",hcLight:K.white},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),sxe=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:K.white,hcLight:"#0F4A85"},m("pickerGroupForeground","Quick picker color for grouping labels.")),GNe=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:K.white,hcLight:"#0F4A85"},m("pickerGroupBorder","Quick picker color for grouping borders.")),jNe=I("keybindingLabel.background",{dark:new K(new tt(128,128,128,.17)),light:new K(new tt(221,221,221,.4)),hcDark:K.transparent,hcLight:K.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),KNe=I("keybindingLabel.foreground",{dark:K.fromHex("#CCCCCC"),light:K.fromHex("#555555"),hcDark:K.white,hcLight:de},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),$Ne=I("keybindingLabel.border",{dark:new K(new tt(51,51,51,.6)),light:new K(new tt(204,204,204,.4)),hcDark:new K(new tt(111,195,223)),hcLight:st},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),qNe=I("keybindingLabel.bottomBorder",{dark:new K(new tt(68,68,68,.6)),light:new K(new tt(187,187,187,.4)),hcDark:new K(new tt(111,195,223)),hcLight:de},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Oc=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},m("editorSelectionBackground","Color of the editor selection.")),YNe=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:K.white},m("editorSelectionForeground","Color of the selected text for high contrast.")),oxe=I("editor.inactiveSelectionBackground",{light:ke(Oc,.5),dark:ke(Oc,.5),hcDark:ke(Oc,.7),hcLight:ke(Oc,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),OZ=I("editor.selectionHighlightBackground",{light:z0e(Oc,Gn,.3,.6),dark:z0e(Oc,Gn,.3,.6),hcDark:null,hcLight:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Gt,hcLight:Gt},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const XNe=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},m("editorFindMatch","Color of the current search match.")),bd=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),ZNe=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),JNe=I("editor.findMatchBorder",{light:null,dark:null,hcDark:Gt,hcLight:Gt},m("editorFindMatchBorder","Border color of the current search match.")),jh=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Gt,hcLight:Gt},m("findMatchHighlightBorder","Border color of the other search matches.")),QNe=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ke(Gt,.4),hcLight:ke(Gt,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);I("searchEditor.findMatchBackground",{light:ke(bd,.66),dark:ke(bd,.66),hcDark:bd,hcLight:bd},m("searchEditor.queryMatch","Color of the Search Editor query matches."));I("searchEditor.findMatchBorder",{light:ke(jh,.66),dark:ke(jh,.66),hcDark:jh,hcLight:jh},m("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));I("search.resultsInfoForeground",{light:de,dark:ke(de,.65),hcDark:de,hcLight:de},m("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const _M=I("editorHoverWidget.background",{light:cn,dark:cn,hcDark:cn,hcLight:cn},m("hoverBackground","Background color of the editor hover."));I("editorHoverWidget.foreground",{light:Xa,dark:Xa,hcDark:Xa,hcLight:Xa},m("hoverForeground","Foreground color of the editor hover."));const eRe=I("editorHoverWidget.border",{light:Za,dark:Za,hcDark:Za,hcLight:Za},m("hoverBorder","Border color of the editor hover."));I("editorHoverWidget.statusBarBackground",{dark:ga(_M,.2),light:Sf(_M,.05),hcDark:cn,hcLight:cn},m("statusBarBackground","Background color of the editor hover status bar."));const tRe=I("editorLink.activeForeground",{dark:"#4E94CE",light:K.blue,hcDark:K.cyan,hcLight:"#292929"},m("activeLinkForeground","Color of active links.")),_d=I("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:K.white,hcLight:K.black},m("editorInlayHintForeground","Foreground color of inline hints")),vd=I("editorInlayHint.background",{dark:ke(Fk,.1),light:ke(Fk,.1),hcDark:ke(K.white,.1),hcLight:ke(Fk,.1)},m("editorInlayHintBackground","Background color of inline hints")),nRe=I("editorInlayHint.typeForeground",{dark:_d,light:_d,hcDark:_d,hcLight:_d},m("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),iRe=I("editorInlayHint.typeBackground",{dark:vd,light:vd,hcDark:vd,hcLight:vd},m("editorInlayHintBackgroundTypes","Background color of inline hints for types")),sRe=I("editorInlayHint.parameterForeground",{dark:_d,light:_d,hcDark:_d,hcLight:_d},m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),oRe=I("editorInlayHint.parameterBackground",{dark:vd,light:vd,hcDark:vd,hcLight:vd},m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},m("editorLightBulbForeground","The color used for the lightbulb actions icon."));I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));const vM=new K(new tt(155,185,85,.2)),yM=new K(new tt(255,0,0,.2)),rxe=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),axe=I("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);I("diffEditor.insertedLineBackground",{dark:vM,light:vM,hcDark:null,hcLight:null},m("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);I("diffEditor.removedLineBackground",{dark:yM,light:yM,hcDark:null,hcLight:null},m("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);I("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));I("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const lxe=I("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),dxe=I("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},m("diffEditorInsertedOutline","Outline color for the text that got inserted."));I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},m("diffEditorRemovedOutline","Outline color for text that got removed."));I("diffEditor.border",{dark:null,light:null,hcDark:st,hcLight:st},m("diffEditorBorder","Border color between the two text editors."));const rRe=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));I("diffEditor.unchangedRegionBackground",{dark:"#3e3e3e",light:"#e4e4e4",hcDark:null,hcLight:null},m("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));I("diffEditor.unchangedRegionForeground",{dark:"#a3a2a2",light:"#4d4c4c",hcDark:null,hcLight:null},m("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));I("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},m("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const aRe=I("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),lRe=I("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),dRe=I("list.focusOutline",{dark:ro,light:ro,hcDark:Gt,hcLight:Gt},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),cRe=I("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),yd=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ja=I("list.activeSelectionForeground",{dark:K.white,light:K.white,hcDark:null,hcLight:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),gv=I("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),uRe=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:K.fromHex("#0F4A85").transparent(.1)},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),hRe=I("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),gRe=I("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),fRe=I("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),pRe=I("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),cxe=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:K.white.transparent(.1),hcLight:K.fromHex("#0F4A85").transparent(.1)},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),uxe=I("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),mRe=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},m("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),fr=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ro,hcLight:ro},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),EE=I("list.focusHighlightForeground",{dark:fr,light:jRe(yd,fr,"#BBE7FF"),hcDark:fr,hcLight:fr},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},m("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},m("listErrorForeground","Foreground color of list items containing errors."));I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},m("listWarningForeground","Foreground color of list items containing warnings."));const bRe=I("listFilterWidget.background",{light:Sf(cn,0),dark:ga(cn,0),hcDark:cn,hcLight:cn},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),_Re=I("listFilterWidget.outline",{dark:K.transparent,light:K.transparent,hcDark:"#f38518",hcLight:"#007ACC"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),vRe=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:st,hcLight:st},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),yRe=I("listFilterWidget.shadow",{dark:$a,light:$a,hcDark:$a,hcLight:$a},m("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));I("list.filterMatchBackground",{dark:bd,light:bd,hcDark:null,hcLight:null},m("listFilterMatchHighlight","Background color of the filtered match."));I("list.filterMatchBorder",{dark:jh,light:jh,hcDark:st,hcLight:Gt},m("listFilterMatchHighlightBorder","Border color of the filtered match."));const fv=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),wRe=I("tree.inactiveIndentGuidesStroke",{dark:ke(fv,.4),light:ke(fv,.4),hcDark:ke(fv,.4),hcLight:ke(fv,.4)},m("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),CRe=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},m("tableColumnsBorder","Table border color between columns.")),SRe=I("tree.tableOddRowsBackground",{dark:ke(de,.04),light:ke(de,.04),hcDark:null,hcLight:null},m("tableOddRowsBackgroundColor","Background color for odd table rows."));I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},m("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const xRe=I("checkbox.background",{dark:qa,light:qa,hcDark:qa,hcLight:qa},m("checkbox.background","Background color of checkbox widget."));I("checkbox.selectBackground",{dark:cn,light:cn,hcDark:cn,hcLight:cn},m("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const TRe=I("checkbox.foreground",{dark:md,light:md,hcDark:md,hcLight:md},m("checkbox.foreground","Foreground color of checkbox widget.")),LRe=I("checkbox.border",{dark:pp,light:pp,hcDark:pp,hcLight:pp},m("checkbox.border","Border color of checkbox widget."));I("checkbox.selectBorder",{dark:Fc,light:Fc,hcDark:Fc,hcLight:Fc},m("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const O0e=I("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Kh=I("quickInputList.focusForeground",{dark:Ja,light:Ja,hcDark:Ja,hcLight:Ja},m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),mp=I("quickInputList.focusIconForeground",{dark:gv,light:gv,hcDark:gv,hcLight:gv},m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),$h=I("quickInputList.focusBackground",{dark:bw(O0e,yd),light:bw(O0e,yd),hcDark:null,hcLight:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item.")),ERe=I("menu.border",{dark:null,light:null,hcDark:st,hcLight:st},m("menuBorder","Border color of menus.")),kRe=I("menu.foreground",{dark:md,light:md,hcDark:md,hcLight:md},m("menuForeground","Foreground color of menu items.")),DRe=I("menu.background",{dark:qa,light:qa,hcDark:qa,hcLight:qa},m("menuBackground","Background color of menu items.")),MRe=I("menu.selectionForeground",{dark:Ja,light:Ja,hcDark:Ja,hcLight:Ja},m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ARe=I("menu.selectionBackground",{dark:yd,light:yd,hcDark:yd,hcLight:yd},m("menuSelectionBackground","Background color of the selected menu item in menus.")),IRe=I("menu.selectionBorder",{dark:null,light:null,hcDark:Gt,hcLight:Gt},m("menuSelectionBorder","Border color of the selected menu item in menus.")),NRe=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:st,hcLight:st},m("menuSeparatorBackground","Color of a separator menu item in menus.")),G9=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));I("toolbar.hoverOutline",{dark:null,light:null,hcDark:Gt,hcLight:Gt},m("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));I("toolbar.activeBackground",{dark:ga(G9,.1),light:Sf(G9,.1),hcDark:null,hcLight:null},m("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));I("editor.snippetTabstopHighlightBackground",{dark:new K(new tt(124,124,124,.3)),light:new K(new tt(10,50,100,.2)),hcDark:new K(new tt(124,124,124,.3)),hcLight:new K(new tt(10,50,100,.2))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));I("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));I("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new K(new tt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const RRe=I("breadcrumb.foreground",{light:ke(de,.8),dark:ke(de,.8),hcDark:ke(de,.8),hcLight:ke(de,.8)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),PRe=I("breadcrumb.background",{light:Gn,dark:Gn,hcDark:Gn,hcLight:Gn},m("breadcrumbsBackground","Background color of breadcrumb items.")),H0e=I("breadcrumb.focusForeground",{light:Sf(de,.2),dark:ga(de,.1),hcDark:ga(de,.1),hcLight:ga(de,.1)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),FRe=I("breadcrumb.activeSelectionForeground",{light:Sf(de,.2),dark:ga(de,.1),hcDark:ga(de,.1),hcLight:ga(de,.1)},m("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));I("breadcrumbPicker.background",{light:cn,dark:cn,hcDark:cn,hcLight:cn},m("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const hxe=.5,V0e=K.fromHex("#40C8AE").transparent(hxe),W0e=K.fromHex("#40A6FF").transparent(hxe),B0e=K.fromHex("#606060").transparent(.4),pr=.4,gb=1,bp=I("merge.currentHeaderBackground",{dark:V0e,light:V0e,hcDark:null,hcLight:null},m("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.currentContentBackground",{dark:ke(bp,pr),light:ke(bp,pr),hcDark:ke(bp,pr),hcLight:ke(bp,pr)},m("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const _p=I("merge.incomingHeaderBackground",{dark:W0e,light:W0e,hcDark:null,hcLight:null},m("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.incomingContentBackground",{dark:ke(_p,pr),light:ke(_p,pr),hcDark:ke(_p,pr),hcLight:ke(_p,pr)},m("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const vp=I("merge.commonHeaderBackground",{dark:B0e,light:B0e,hcDark:null,hcLight:null},m("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);I("merge.commonContentBackground",{dark:ke(vp,pr),light:ke(vp,pr),hcDark:ke(vp,pr),hcLight:ke(vp,pr)},m("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const fb=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},m("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));I("editorOverviewRuler.currentContentForeground",{dark:ke(bp,gb),light:ke(bp,gb),hcDark:fb,hcLight:fb},m("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.incomingContentForeground",{dark:ke(_p,gb),light:ke(_p,gb),hcDark:fb,hcLight:fb},m("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));I("editorOverviewRuler.commonContentForeground",{dark:ke(vp,gb),light:ke(vp,gb),hcDark:fb,hcLight:fb},m("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const HZ=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),pv=I("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),yp=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),AO=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),U0e=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),ORe=I("minimap.errorHighlight",{dark:new K(new tt(255,18,18,.7)),light:new K(new tt(255,18,18,.7)),hcDark:new K(new tt(255,50,50,1)),hcLight:"#B5200D"},m("minimapError","Minimap marker color for errors.")),HRe=I("minimap.warningHighlight",{dark:ao,light:ao,hcDark:mw,hcLight:mw},m("overviewRuleWarning","Minimap marker color for warnings.")),VRe=I("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},m("minimapBackground","Minimap background color.")),WRe=I("minimap.foregroundOpacity",{dark:K.fromHex("#000f"),light:K.fromHex("#000f"),hcDark:K.fromHex("#000f"),hcLight:K.fromHex("#000f")},m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));I("minimapSlider.background",{light:ke(cv,.5),dark:ke(cv,.5),hcDark:ke(cv,.5),hcLight:ke(cv,.5)},m("minimapSliderBackground","Minimap slider background color."));I("minimapSlider.hoverBackground",{light:ke(uv,.5),dark:ke(uv,.5),hcDark:ke(uv,.5),hcLight:ke(uv,.5)},m("minimapSliderHoverBackground","Minimap slider background color when hovering."));I("minimapSlider.activeBackground",{light:ke(hv,.5),dark:ke(hv,.5),hcDark:ke(hv,.5),hcLight:ke(hv,.5)},m("minimapSliderActiveBackground","Minimap slider background color when clicked on."));const BRe=I("problemsErrorIcon.foreground",{dark:Ya,light:Ya,hcDark:Ya,hcLight:Ya},m("problemsErrorIconForeground","The color used for the problems error icon.")),URe=I("problemsWarningIcon.foreground",{dark:ao,light:ao,hcDark:ao,hcLight:ao},m("problemsWarningIconForeground","The color used for the problems warning icon.")),zRe=I("problemsInfoIcon.foreground",{dark:lo,light:lo,hcDark:lo,hcLight:lo},m("problemsInfoIconForeground","The color used for the problems info icon."));I("charts.foreground",{dark:de,light:de,hcDark:de,hcLight:de},m("chartsForeground","The foreground color used in charts."));I("charts.lines",{dark:ke(de,.5),light:ke(de,.5),hcDark:ke(de,.5),hcLight:ke(de,.5)},m("chartsLines","The color used for horizontal lines in charts."));I("charts.red",{dark:Ya,light:Ya,hcDark:Ya,hcLight:Ya},m("chartsRed","The red color used in chart visualizations."));I("charts.blue",{dark:lo,light:lo,hcDark:lo,hcLight:lo},m("chartsBlue","The blue color used in chart visualizations."));I("charts.yellow",{dark:ao,light:ao,hcDark:ao,hcLight:ao},m("chartsYellow","The yellow color used in chart visualizations."));I("charts.orange",{dark:yp,light:yp,hcDark:yp,hcLight:yp},m("chartsOrange","The orange color used in chart visualizations."));I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},m("chartsGreen","The green color used in chart visualizations."));I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("chartsPurple","The purple color used in chart visualizations."));function GRe(o,e){var t,n,i,s;switch(o.op){case 0:return(t=Br(o.value,e))===null||t===void 0?void 0:t.darken(o.factor);case 1:return(n=Br(o.value,e))===null||n===void 0?void 0:n.lighten(o.factor);case 2:return(i=Br(o.value,e))===null||i===void 0?void 0:i.transparent(o.factor);case 3:{const r=Br(o.background,e);return r?(s=Br(o.value,e))===null||s===void 0?void 0:s.makeOpaque(r):Br(o.value,e)}case 4:for(const r of o.values){const a=Br(r,e);if(a)return a}return;case 6:return Br(e.defines(o.if)?o.then:o.else,e);case 5:{const r=Br(o.value,e);if(!r)return;const a=Br(o.background,e);return a?r.isDarkerThan(a)?K.getLighterColor(r,a,o.factor).transparent(o.transparency):K.getDarkerColor(r,a,o.factor).transparent(o.transparency):r.transparent(o.factor*o.transparency)}default:throw yO()}}u(GRe,"executeTransform");function Sf(o,e){return{op:0,value:o,factor:e}}u(Sf,"darken");function ga(o,e){return{op:1,value:o,factor:e}}u(ga,"lighten");function ke(o,e){return{op:2,value:o,factor:e}}u(ke,"transparent");function bw(...o){return{op:4,values:o}}u(bw,"oneOf");function jRe(o,e,t){return{op:6,if:o,then:e,else:t}}u(jRe,"ifDefinedThenElse");function z0e(o,e,t,n){return{op:5,value:o,background:e,factor:t,transparency:n}}u(z0e,"lessProminent");function Br(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?K.fromHex(o):e.getColor(o);if(o instanceof K)return o;if(typeof o=="object")return GRe(o,e)}}u(Br,"resolveColorValue");const gxe="vscode://schemas/workbench-colors",fxe=on.as(TO.JSONContribution);fxe.registerSchema(gxe,MO.getColorSchema());const G0e=new Et(()=>fxe.notifySchemaChanged(gxe),200);MO.onDidChangeSchema(()=>{G0e.isScheduled()||G0e.schedule()});const Tie=class Tie{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new wM(this.x-window.scrollX,this.y-window.scrollY)}};u(Tie,"PageCoordinates");let pb=Tie;const Lie=class Lie{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new pb(this.clientX+window.scrollX,this.clientY+window.scrollY)}};u(Lie,"ClientCoordinates");let wM=Lie;const Eie=class Eie{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}};u(Eie,"EditorPagePosition");let j9=Eie;const kie=class kie{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}};u(kie,"CoordinatesRelativeToEditor");let K9=kie;function VZ(o){const e=Cn(o);return new j9(e.left,e.top,e.width,e.height)}u(VZ,"createEditorPagePosition");function WZ(o,e,t){const n=e.width/o.offsetWidth,i=e.height/o.offsetHeight,s=(t.x-e.x)/n,r=(t.y-e.y)/i;return new K9(s,r)}u(WZ,"createCoordinatesRelativeToEditor");const Die=class Die extends Bs{constructor(e,t,n){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new pb(this.posx,this.posy),this.editorPos=VZ(n),this.relativePos=WZ(n,this.editorPos,this.pos)}};u(Die,"EditorMouseEvent");let hl=Die;const Mie=class Mie{constructor(e){this._editorViewDomNode=e}_create(e){return new hl(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return q(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return q(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return q(e,pe.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return q(e,pe.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return q(e,pe.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return q(e,"mousemove",n=>t(this._create(n)))}};u(Mie,"EditorMouseEventFactory");let $9=Mie;const Aie=class Aie{constructor(e){this._editorViewDomNode=e}_create(e){return new hl(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return q(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return q(e,pe.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return q(e,pe.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return q(e,"pointermove",n=>t(this._create(n)))}};u(Aie,"EditorPointerEventFactory");let q9=Aie;const Iie=class Iie extends G{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new wu),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=Jt(document,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,r=>{i(new hl(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),s(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}};u(Iie,"GlobalEditorPointerMoveMonitor");let Y9=Iie;const uP=class uP{constructor(e){this._editor=e,this._instanceId=++uP._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Et(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new X9(t,`dyn-rule-${this._instanceId}-${i}`,gM(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};u(uP,"DynamicCssRules");let _w=uP;_w._idPool=0;const Nie=class Nie{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=Ko(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const s=t[i];let r;typeof s=="object"?r=be(s.id):r=s;const a=KRe(i);n+=`
	${a}: ${r};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}};u(Nie,"RefCountedCssRule");let X9=Nie;function KRe(o){return o.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}u(KRe,"camelToDashes");const Rie=class Rie extends G{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}};u(Rie,"ViewEventHandler");let Fg=Rie;const Pie=class Pie extends Fg{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}};u(Pie,"ViewPart");let ls=Pie;const Fie=class Fie{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=n[i-r-1];return s}};u(Fie,"PartFingerprints");let kr=Fie;const Oie=class Oie{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}};u(Oie,"RestrictedRenderingContext");let Z9=Oie;const Hie=class Hie extends Z9{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}};u(Hie,"RenderingContext");let J9=Hie;const Vie=class Vie{constructor(e,t,n,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=i}};u(Vie,"LineVisibleRanges");let Q9=Vie;const hP=class hP{static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const s=e[n];t[n]=new hP(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}};u(hP,"HorizontalRange");let CM=hP;const Wie=class Wie{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}};u(Wie,"FloatHorizontalRange");let Ed=Wie;const Bie=class Bie{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}};u(Bie,"HorizontalPosition");let e7=Bie;const Uie=class Uie{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}};u(Uie,"VisibleRanges");let SM=Uie;const zie=class zie{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch{return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Ed.compare);const t=[];let n=0,i=e[0];for(let s=1,r=e.length;s<r;s++){const a=e[s];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i[s]=new Ed(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,s,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),i=Math.min(l,Math.max(0,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,r.clientRectDeltaLeft,r.clientRectScale)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let d=e.children[t].firstChild,c=e.children[i].firstChild;if((!d||!c)&&(!d&&n===0&&t>0&&(d=e.children[t-1].firstChild,n=1073741824),!c&&s===0&&i>0&&(c=e.children[i-1].firstChild,s=1073741824)),!d||!c)return null;n=Math.min(d.textContent.length,Math.max(0,n)),s=Math.min(c.textContent.length,Math.max(0,s));const h=this._readClientRects(d,n,c,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}};u(zie,"RangeUtil");let Im=zie;var Oo;(function(o){o.DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"})(Oo||(Oo={}));function tl(o){return o===Oo.HIGH_CONTRAST_DARK||o===Oo.HIGH_CONTRAST_LIGHT}u(tl,"isHighContrast");function mb(o){return o===Oo.DARK||o===Oo.HIGH_CONTRAST_DARK}u(mb,"isDark");const $Re=function(){return ca?!0:!(qi||Bo||Rd)}();let Nm=!0;const Gie=class Gie{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(49);n.get(37)==="off"?this.renderWhitespace=n.get(97):this.renderWhitespace="none",this.renderControlCharacters=n.get(92),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(32),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(65),this.stopRenderingLineAfter=n.get(115),this.fontLigatures=n.get(50)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}};u(Gie,"ViewLineOptions");let xM=Gie;const gP=class gP{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ht(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return tl(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),r=this._options,a=_o.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(tl(r.themeType)||this._options.renderWhitespace==="selection"){const g=n.selections;for(const f of g){if(f.endLineNumber<e||f.startLineNumber>e)continue;const p=f.startLineNumber===e?f.startColumn:s.minColumn,b=f.endLineNumber===e?f.endColumn:s.maxColumn;p<b&&(tl(r.themeType)&&a.push(new _o(p,b,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(l||(l=[]),l.push(new rM(p-1,b-1))))}}const d=new Tr(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Sr.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;i.appendString('<div style="top:'),i.appendString(String(t)),i.appendString("px;height:"),i.appendString(String(this._options.lineHeight)),i.appendString('px;" class="'),i.appendString(gP.CLASS_NAME),i.appendString('">');const c=y_(d,i);i.appendString("</div>");let h=null;return Nm&&$Re&&s.isBasicASCII&&r.useMonospaceOptimizations&&c.containsForeignElements===0&&(h=new wp(this._renderedViewLine?this._renderedViewLine.domNode:null,d,c.characterMapping)),h||(h=pxe(this._renderedViewLine?this._renderedViewLine.domNode:null,d,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof wp:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof wp?this._renderedViewLine.monospaceAssumptionsAreValid():Nm}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof wp&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&n>s+1)return new SM(!0,[new Ed(this.getWidth(i),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&n>s+1&&(n=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return r&&r.length>0?new SM(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};u(gP,"ViewLine");let Ua=gP;Ua.CLASS_NAME="view-line";const jie=class jie{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const i=Math.floor(t.lineContent.length/300);if(i>0){this._keyColumnPixelOffsetCache=new Float32Array(i);for(let s=0;s<i;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Nm;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Nm=!1)}return Nm}toSlowRenderedLine(){return pxe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getColumnPixelOffset(e,t,i),r=this._getColumnPixelOffset(e,n,i);return[new Ed(s,r-s)]}_getColumnPixelOffset(e,t,n){if(t<=300){const d=this._characterMapping.getHorizontalOffset(t);return this._charWidth*d}const i=Math.floor((t-1)/300)-1,s=(i+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[i],r===-1&&(r=this._actualReadPixelOffset(e,s,n),this._keyColumnPixelOffsetCache[i]=r)),r===-1){const d=this._characterMapping.getHorizontalOffset(t);return this._charWidth*d}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const i=this._characterMapping.getDomPosition(t),s=Im.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return BZ(this._characterMapping,e,t)}};u(jie,"FastRenderedViewLine");let wp=jie;const Kie=class Kie{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,i);if(s===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return r===-1?null:[new Ed(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const r=this._readPixelOffset(e,t,n,s);return r===-1?null:[new Ed(r,0)]}else return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(i);const s=this._getReadingTarget(e);return s.firstChild?(i.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[n];if(s!==-1)return s;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=Im.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(i);const s=this._characterMapping.getDomPosition(n),r=Im.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),d=Math.round(this.input.spaceWidth*l);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new Ed(0,this.getWidth(i))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return Im.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,i)}getColumnOfNodeOffset(e,t){return BZ(this._characterMapping,e,t)}};u(Kie,"RenderedViewLine");let TM=Kie;const $ie=class $ie extends TM{_readVisibleRangesForRange(e,t,n,i,s){const r=super._readVisibleRangesForRange(e,t,n,i,s);if(!r||r.length===0||n===i||n===1&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,s);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}};u($ie,"WebKitRenderedViewLine");let t7=$ie;const pxe=function(){return eg?qRe:YRe}();function qRe(o,e,t,n,i){return new t7(o,e,t,n,i)}u(qRe,"createWebKitRenderedLine");function YRe(o,e,t,n,i){return new TM(o,e,t,n,i)}u(YRe,"createNormalRenderedLine");function BZ(o,e,t){const n=e.textContent.length;let i=-1;for(;e;)e=e.previousSibling,i++;return o.getColumn(new aM(i,t),n)}u(BZ,"getColumnOfNodeOffset");const fP=class fP{static _nextVisibleColumn(e,t,n){return e===9?fP.nextRenderTabStop(t,n):hu(e)||wZ(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),r=new eb(s);let a=0;for(;!r.eol();){const l=SD(s,i,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new eb(e);let r=0,a=1;for(;!s.eol();){const l=SD(e,i,s.offset);s.nextGraphemeLength();const d=this._nextVisibleColumn(l,r,n),c=s.offset+1;if(d>=t){const h=t-r;return d-t<h?c:a}r=d,a=c}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};u(fP,"CursorColumns");let Rn=fP;const pP=class pP{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,r=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[r,a,s];switch(s%n===0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Rn.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[r,a,l]=pP.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let d;switch(i){case 0:d=!0;break;case 1:d=!1;break;case 2:if(l%n===0)return t;d=l%n<=n/2;break}if(d){if(r===-1)return-1;let g=a;for(let f=r;f<s;++f){if(g===a+n)return r;switch(e.charCodeAt(f)){case 32:g+=1;break;case 9:g=Rn.nextRenderTabStop(g,n);break;default:return-1}}return g===a+n?r:-1}const c=Rn.nextRenderTabStop(l,n);let h=l;for(let g=t;g<s;g++){if(h===c)return g;switch(e.charCodeAt(g)){case 32:h+=1;break;case 9:h=Rn.nextRenderTabStop(h,n);break;default:return-1}}return h===c?s:-1}};u(pP,"AtomicTabMoveOperations");let vw=pP;const qie=class qie{constructor(e=null){this.hitTarget=e,this.type=0}};u(qie,"UnknownHitTestResult");let Oa=qie;const Yie=class Yie{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}};u(Yie,"ContentHitTestResult");let LM=Yie;var vh;(function(o){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new LM(s,n,null):new Oa(n)}u(e,"createFromDOMInfo"),o.createFromDOMInfo=e})(vh||(vh={}));const Xie=class Xie{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}};u(Xie,"PointerHandlerLastRenderData");let n7=Xie;const Zie=class Zie{static _deduceRage(e,t=null){return!t&&e?new L(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,s,r){return{type:e,element:t,mouseColumn:n,position:i,range:s,detail:r}}static createViewZone(e,t,n,i,s){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:s}}static createContentText(e,t,n,i,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:s}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}};u(Zie,"MouseTarget");let _i=Zie;const Jie=class Jie{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}};u(Jie,"ElementPath");let gs=Jie;const V0=class V0{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(142),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(65),this.stickyTabStops=i.get(114),this.typicalHalfwidthCharacterWidth=i.get(49).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return V0.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==s&&(l=new W(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new W(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<i?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(i);return{range:new L(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new L(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return V0._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}};u(V0,"HitTestContext");let yw=V0;const Qie=class Qie{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,EM._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}};u(Qie,"BareHitTestRequest");let i7=Qie;const mP=class mP extends i7{constructor(e,t,n,i,s){super(e,t,n,i),this._ctx=e,s?(this.target=s,this.targetPath=kr.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Rn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return _i.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return _i.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return _i.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return _i.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return _i.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return _i.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return _i.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return _i.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return _i.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new mP(this._ctx,this.editorPos,this.pos,this.relativePos,e)}};u(mP,"HitTestRequest");let s7=mP;const j0e={isAfterLines:!0};function Z4(o){return{isAfterLines:!1,horizontalDistanceToText:o}}u(Z4,"createEmptyContentDataInLines");const bi=class bi{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=kr.collect(t,this._viewHelper.viewDomNode);return!!(gs.isChildOfContentWidgets(n)||gs.isChildOfOverflowingContentWidgets(n)||gs.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i,s){const r=new yw(this._context,this._viewHelper,e),a=new s7(r,t,n,i,s);try{const l=bi._createMouseTarget(r,a,!1);if(l.type===6&&r.stickyTabStops&&l.position!==null){const d=bi._snapToSoftTabBoundary(l.position,r.viewModel),c=L.fromPositions(d,d).plusRange(l.range);return a.fulfillContentText(d,c,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const r=bi._doHitTest(e,t);return r.type===1?bi.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const i=t;let s=null;return!gs.isChildOfOverflowGuard(t.targetPath)&&!gs.isChildOfOverflowingContentWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||bi._hitTestContentWidget(e,i),s=s||bi._hitTestOverlayWidget(e,i),s=s||bi._hitTestMinimap(e,i),s=s||bi._hitTestScrollbarSlider(e,i),s=s||bi._hitTestViewZone(e,i),s=s||bi._hitTestMargin(e,i),s=s||bi._hitTestViewCursor(e,i),s=s||bi._hitTestTextArea(e,i),s=s||bi._hitTestViewLines(e,i,n),s=s||bi._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(gs.isChildOfContentWidgets(t.targetPath)||gs.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(gs.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft||i>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=s&&s<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return gs.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,r):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r)))}return null}static _hitTestViewLines(e,t,n){if(!gs.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new W(1,1),j0e);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new W(s,r),j0e)}if(n){if(gs.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const a=e.getLineWidth(s),l=Z4(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new W(s,1),l)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const a=Z4(t.mouseContentHorizontalOffset-r),l=new W(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const i=bi._doHitTest(e,t);return i.type===1?bi.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(gs.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(gs.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W(i,s))}}return null}static _hitTestScrollbar(e,t){if(gs.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(142),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return bi._getMouseColumn(i,t.get(49).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const r=i.lineNumber,a=i.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const v=Z4(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,v)}const d=e.visibleRangeForPosition(r,a);if(!d)return t.fulfillUnknown(i);const c=d.left;if(Math.abs(t.mouseContentHorizontalOffset-c)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!s,injectedText:s});const h=[];if(h.push({offset:d.left,column:a}),a>1){const v=e.visibleRangeForPosition(r,a-1);v&&h.push({offset:v.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const v=e.visibleRangeForPosition(r,a+1);v&&h.push({offset:v.left,column:a+1})}h.sort((v,y)=>v.offset-y.offset);const f=t.pos.toClientCoordinates(),p=n.getBoundingClientRect(),b=p.left<=f.clientX&&f.clientX<=p.right;let _=null;for(let v=1;v<h.length;v++){const y=h[v-1],w=h[v];if(y.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){_=new L(r,y.column,r,w.column);const C=Math.abs(y.offset-t.mouseContentHorizontalOffset),S=Math.abs(w.offset-t.mouseContentHorizontalOffset);i=C<S?new W(r,y.column):new W(r,w.column);break}}return t.fulfillContentText(i,_,{mightBeForeignElement:!b||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),s=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((i+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const d=new pb(t.pos.x,l),c=this._actualDoHitTestWithCaretRangeFromPoint(e,d.toClientCoordinates());if(c.type===1)return c}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Ng(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=XRe(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Oa;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const r=s.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Ua.CLASS_NAME?vh.createFromDOMInfo(e,r,i.startOffset):new Oa(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const r=s.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Ua.CLASS_NAME?vh.createFromDOMInfo(e,s,s.textContent.length):new Oa(s)}return new Oa}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,r=s?s.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Ua.CLASS_NAME?vh.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Oa(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,r=i?i.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(s===Ua.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return vh.createFromDOMInfo(e,l,0)}else if(a===Ua.CLASS_NAME)return vh.createFromDOMInfo(e,n.offsetNode,0)}return new Oa(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),s=vw.atomicPosition(n,e.column-1,i,2);return s!==-1?new W(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Oa;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),s=e.viewModel.normalizePosition(n.position,2);(i||!s.equals(n.position))&&(n=new LM(s,n.spanNode,i))}return n}};u(bi,"MouseTargetFactory");let EM=bi;function XRe(o,e,t){const n=document.createRange();let i=o.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),r=window.getComputedStyle(i,null).getPropertyValue("font-style"),a=window.getComputedStyle(i,null).getPropertyValue("font-variant"),l=window.getComputedStyle(i,null).getPropertyValue("font-weight"),d=window.getComputedStyle(i,null).getPropertyValue("font-size"),c=window.getComputedStyle(i,null).getPropertyValue("line-height"),h=window.getComputedStyle(i,null).getPropertyValue("font-family"),g=`${r} ${a} ${l} ${d}/${c} ${h}`,f=i.innerText;let p=s.left,b=0,_;if(e>s.left+s.width)b=f.length;else{const v=kM.getInstance();for(let y=0;y<f.length+1;y++){if(_=v.getCharWidth(f.charAt(y),g)/2,p+=_,e<p){b=y;break}p+=_}}n.setStart(i.firstChild,b),n.setEnd(i.firstChild,b)}return n}u(XRe,"shadowCaretRangeFromPoint");const Rh=class Rh{static getInstance(){return Rh._INSTANCE||(Rh._INSTANCE=new Rh),Rh._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const r=i.measureText(e).width;return this._cache[n]=r,r}};u(Rh,"CharWidthReader");let kM=Rh;kM._INSTANCE=null;var H1;let Ar=(H1=class extends G{onclick(e,t){this._register(q(e,pe.CLICK,n=>t(new Bs(n))))}onmousedown(e,t){this._register(q(e,pe.MOUSE_DOWN,n=>t(new Bs(n))))}onmouseover(e,t){this._register(q(e,pe.MOUSE_OVER,n=>t(new Bs(n))))}onmouseleave(e,t){this._register(q(e,pe.MOUSE_LEAVE,n=>t(new Bs(n))))}onkeydown(e,t){this._register(q(e,pe.KEY_DOWN,n=>t(new Mt(n))))}onkeyup(e,t){this._register(q(e,pe.KEY_UP,n=>t(new Mt(n))))}oninput(e,t){this._register(q(e,pe.INPUT,t))}onblur(e,t){this._register(q(e,pe.BLUR,t))}onfocus(e,t){this._register(q(e,pe.FOCUS,t))}ignoreGesture(e){return oi.ignoreTarget(e)}},u(H1,"Widget"),H1);const bb=11,ese=class ese extends Ar{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Te.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=bb+"px",this.domNode.style.height=bb+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new wu),this._register(Jt(this.bgDomNode,pe.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Jt(this.domNode,pe.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Dg),this._pointerdownScheduleRepeatTimer=this._register(new bo)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=u(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)},"scheduleRepeater");this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};u(ese,"ScrollbarArrow");let o7=ese;const tse=class tse extends G{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new bo)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}};u(tse,"ScrollbarVisibilityController");let r7=tse;const ZRe=140,nse=class nse extends Ar{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new r7(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new wu),this._shouldRender=!0,this.domNode=ht(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(q(this.domNode.domNode,pe.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new o7(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=ht(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(q(this.slider.domNode,pe.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const s=Cn(this.domNode.domNode);t=e.pageX-s.left,n=e.pageY-s.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const r=this._sliderOrthogonalPointerPosition(s),a=Math.abs(r-n);if(Si&&a>ZRe){this._setDesiredScrollPositionNow(i.getScrollPosition());return}const d=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};u(nse,"AbstractScrollbar");let DM=nse;const JRe=20,W0=class W0{constructor(e,t,n,i,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new W0(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const d=Math.round(Math.max(JRe,Math.floor(n*a/i))),c=(a-d)/(i-n),h=s*c;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:c,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=W0._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};u(W0,"ScrollbarState");let ww=W0;const ise=class ise extends DM{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ww(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-bb)/2,a=(t.horizontalScrollbarSize-bb)/2;this._createArrow({className:"scra",icon:ue.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Od(null,1,0))}),this._createArrow({className:"scra",icon:ue.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Od(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};u(ise,"HorizontalScrollbar");let a7=ise;const sse=class sse extends DM{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ww(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-bb)/2,a=(t.verticalScrollbarSize-bb)/2;this._createArrow({className:"scra",icon:ue.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Od(null,0,1))}),this._createArrow({className:"scra",icon:ue.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Od(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};u(sse,"VerticalScrollbar");let l7=sse;const B0=class B0{constructor(e,t,n,i,s,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,s=s|0,r=r|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),s<0&&(s=0),a+s>r&&(a=r-s),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=s,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new B0(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new B0(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}};u(B0,"ScrollState");let d7=B0;const ose=class ose extends G{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new V),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new d7(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(n=this._smoothScrolling)===null||n===void 0||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new AM(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=AM.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}};u(ose,"Scrollable");let Og=ose;const rse=class rse{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};u(rse,"SmoothScrollingUpdate");let MM=rse;function J4(o,e){const t=e-o;return function(n){return o+t*t2e(n)}}u(J4,"createEaseOutCubic");function QRe(o,e,t){return function(n){return n<t?o(n/t):e((n-t)/(1-t))}}u(QRe,"createComposed");const U0=class U0{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,r;return e<t?(s=e+.75*n,r=t-.75*n):(s=e-.75*n,r=t+.75*n),QRe(J4(e,s),J4(r,t),.33)}return J4(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new MM(n,i,!1)}return new MM(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return U0.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new U0(e,t,i,n)}};u(U0,"SmoothScrollingOperation");let AM=U0;function e2e(o){return Math.pow(o,3)}u(e2e,"easeInCubic");function t2e(o){return 1-e2e(1-o)}u(t2e,"easeOutCubic");const n2e=500,K0e=50,ase=class ase{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}};u(ase,"MouseWheelClassifierItem");let c7=ase;const lse=class lse{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){const t=window.devicePixelRatio/cMe();Si||qi?this.accept(Date.now(),e.deltaX/t,e.deltaY/t):this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){const i=new c7(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};u(lse,"MouseWheelClassifier");let _b=lse;_b.INSTANCE=new _b;const dse=class dse extends Ar{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new V),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new V),e.style.overflow="hidden",this._options=i2e(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new l7(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new a7(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ht(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ht(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ht(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new bo),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=wt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ot&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Od(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=wt(this._mouseWheelToDispose),e)){const n=u(i=>{this._onMouseWheel(new Od(i))},"onMouseWheel");this._mouseWheelToDispose.push(q(this._listenOnDomNode,pe.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){var t;if(!((t=e.browserEvent)===null||t===void 0)&&t.defaultPrevented)return;const n=_b.INSTANCE;n.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!ot&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const d=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=K0e*r,g=d.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,g)}if(a){const h=K0e*a,g=d.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,g)}c=this._scrollable.validateScrollPosition(c),(d.scrollLeft!==c.scrollLeft||d.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&n.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),n2e)}};u(dse,"AbstractScrollableElement");let Cw=dse;const cse=class cse extends Cw{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Og({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>jo(i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}};u(cse,"ScrollableElement");let IM=cse;const use=class use extends Cw{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};u(use,"SmoothScrollableElement");let Sw=use;const hse=class hse extends Cw{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Og({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>jo(i)});super(e,t,n),this._register(n),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};u(hse,"DomScrollableElement");let Cu=hse;function i2e(o){const e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,ot&&(e.className+=" mac"),e}u(i2e,"resolveOptions$1");const gse=class gse extends Fg{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new EM(this._context,n),this._mouseDownOperation=this._register(new u7(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(142).height;const i=new $9(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=q(document,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new hl(a,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let s=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{s=a})),this._register(q(this.viewHelper.viewDomNode,pe.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=_b.INSTANCE;let t=0,n=No.getZoomLevel(),i=!1,s=0;const r=u(l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(74))return;const d=new Od(l);if(e.acceptStandardWheelEvent(d),e.isPhysicalMouseWheel()){if(a(l)){const c=No.getZoomLevel(),h=d.deltaY>0?1:-1;No.setZoomLevel(c+h),d.preventDefault(),d.stopPropagation()}}else Date.now()-t>50&&(n=No.getZoomLevel(),i=a(l),s=0),t=Date.now(),s+=d.deltaY,i&&(No.setZoomLevel(n+s/5),d.preventDefault(),d.stopPropagation())},"onMouseWheel");this._register(q(this.viewHelper.viewDomNode,pe.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return ot?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}u(a,"hasMouseWheelZoomModifiers")}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(142)){const t=this._context.configuration.options.get(142).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const i=new wM(e,t).toPageCoordinates(),s=VZ(this.viewHelper.viewDomNode);if(i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width)return null;const r=WZ(this.viewHelper.viewDomNode,s,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=Ng(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,s=n.type===2||n.type===3||n.type===4,r=n.type===3,a=this._context.configuration.options.get(107),l=n.type===8||n.type===5,d=n.type===9;let c=e.leftButton||e.middleButton;ot&&e.leftButton&&e.ctrlKey&&(c=!1);const h=u(()=>{e.preventDefault(),this.viewHelper.focusTextArea()},"focus");if(c&&(i||r&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(l){const g=n.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else d&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}};u(gse,"MouseHandler");let xw=gse;const fse=class fse extends G{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=i,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new Y9(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new h7(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,d)=>this._dispatchMouse(a,l,d))),this._mouseState=new NM,this._currentSelection=new xe(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(89)&&s.get(34)&&!s.get(21)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(i.getCurrentScrollTop()-a,0),d=yw.getZoneAtCoord(this._context,l);if(d){const h=this._helpPositionJumpOverViewZone(d);if(h)return _i.createOutsideEditor(s,h,"above",a)}const c=i.getLineNumberAtVerticalOffset(l);return _i.createOutsideEditor(s,new W(c,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=i.getCurrentScrollTop()+e.relativePos.y,d=yw.getZoneAtCoord(this._context,l);if(d){const h=this._helpPositionJumpOverViewZone(d);if(h)return _i.createOutsideEditor(s,h,"below",a)}const c=i.getLineNumberAtVerticalOffset(l);return _i.createOutsideEditor(s,new W(c,n.getLineMaxColumn(c)),"below",a)}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return _i.createOutsideEditor(s,new W(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return _i.createOutsideEditor(s,new W(r,n.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const r=this._helpPositionJumpOverViewZone(i.detail);if(r)return _i.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new W(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}};u(fse,"MouseDownOperation");let u7=fse;const pse=class pse extends G{constructor(e,t,n,i){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new g7(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}};u(pse,"TopBottomDragScrolling");let h7=pse;const mse=class mse extends G{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=jo(()=>this._execute())}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(65),t=this._context.configuration.options.get(142).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(65),t=this._getScrollSpeed(),n=this._tick(),i=t*(n/1e3)*e,s=this._position.outsidePosition==="above"?-i:i;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const d=VZ(this._viewHelper.viewDomNode),c=this._context.configuration.options.get(142).horizontalScrollbarHeight,h=new pb(this._mouseEvent.pos.x,d.y+d.height-c-.1),g=WZ(this._viewHelper.viewDomNode,d,h);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),d,h,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=_i.createOutsideEditor(this._position.mouseColumn,new W(a,1),"above",this._position.outsideDistance):l=_i.createOutsideEditor(this._position.mouseColumn,new W(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=jo(()=>this._execute())}};u(mse,"TopBottomDragScrollingOperation");let g7=mse;const bP=class bP{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>bP.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};u(bP,"MouseDownState");let NM=bP;NM.CLEAR_MOUSE_DOWN_COUNT_TIME=400;const bse=class bse{get event(){return this.emitter.event}constructor(e,t,n){const i=u(s=>this.emitter.fire(s),"fn");this.emitter=new V({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}};u(bse,"DomEmitter");let Qe=bse;var Hc;(function(o){const e={total:0,min:Number.MAX_VALUE,max:0},t=Object.assign({},e),n=Object.assign({},e),i=Object.assign({},e);let s=0;const r={keydown:0,input:0,render:0};function a(){v(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}u(a,"onKeyDown"),o.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}u(l,"markKeyDownEnd");function d(){performance.mark("input/start"),r.input=1,_()}u(d,"onBeforeInput"),o.onBeforeInput=d;function c(){r.input===0&&d(),queueMicrotask(h)}u(c,"onInput"),o.onInput=c;function h(){r.input===1&&(performance.mark("input/end"),r.input=2)}u(h,"markInputEnd");function g(){v()}u(g,"onKeyUp"),o.onKeyUp=g;function f(){v()}u(f,"onSelectionChange"),o.onSelectionChange=f;function p(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(b),_())}u(p,"onRenderStart"),o.onRenderStart=p;function b(){r.render===1&&(performance.mark("render/end"),r.render=2)}u(b,"markRenderEnd");function _(){setTimeout(v)}u(_,"scheduleRecordIfFinishedTask");function v(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),y("keydown",e),y("input",t),y("render",n),y("inputlatency",i),s++,w())}u(v,"recordIfFinished");function y(T,E){const D=performance.getEntriesByName(T)[0].duration;E.total+=D,E.min=Math.min(E.min,D),E.max=Math.max(E.max,D)}u(y,"addMeasure");function w(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}u(w,"reset");function C(){if(s===0)return;const T={keydown:S(e),input:S(t),render:S(n),total:S(i),sampleCount:s};return k(e),k(t),k(n),k(i),s=0,T}u(C,"getAndClearMeasurements"),o.getAndClearMeasurements=C;function S(T){return{average:T.total/s,max:T.max,min:T.min}}u(S,"cumulativeToFinalMeasurement");function k(T){T.total=0,T.min=Number.MAX_VALUE,T.max=0}u(k,"clearCumulativeMeasurement")})(Hc||(Hc={}));const z0=class z0{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=i,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),i=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){const a=n.substring(0,i),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new z0(n,i,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new z0(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,n,i,s,r,a,l,d;if(e<=this.selectionStart){const g=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((n=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&n!==void 0?n:null,g,-1)}if(e>=this.selectionEnd){const g=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((s=(i=this.selection)===null||i===void 0?void 0:i.getEndPosition())!==null&&s!==void 0?s:null,g,1)}const c=this.value.substring(this.selectionStart,e);if(c.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((a=(r=this.selection)===null||r===void 0?void 0:r.getStartPosition())!==null&&a!==void 0?a:null,c,1);const h=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((d=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&d!==void 0?d:null,h,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(xg(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(CD(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-s);const r=t.value.substring(i,t.value.length-s),a=e.selectionStart-i,l=e.selectionEnd-i,d=t.selectionStart-i,c=t.selectionEnd-i;if(d===c){const g=e.selectionStart-i;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(xg(e.value,t.value),e.selectionEnd),i=Math.min(CD(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-r.length}}};u(z0,"TextAreaState");let vi=z0;vi.EMPTY=new vi("",0,0,null,void 0);const Ph=class Ph{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new L(i,1,s+1,1)}static fromEditorSelection(e,t,n,i){const r=Ph._getPageOfLine(t.startLineNumber,n),a=Ph._getRangeForPage(r,n),l=Ph._getPageOfLine(t.endLineNumber,n),d=Ph._getRangeForPage(l,n);let c=a.intersectRanges(new L(1,1,t.startLineNumber,t.startColumn));if(i&&e.getValueLengthInRange(c,1)>500){const v=e.modifyPosition(c.getEndPosition(),-500);c=L.fromPositions(v,c.getEndPosition())}const h=e.getValueInRange(c,1),g=e.getLineCount(),f=e.getLineMaxColumn(g);let p=d.intersectRanges(new L(t.endLineNumber,t.endColumn,g,f));if(i&&e.getValueLengthInRange(p,1)>500){const v=e.modifyPosition(p.getStartPosition(),500);p=L.fromPositions(p.getStartPosition(),v)}const b=e.getValueInRange(p,1);let _;if(r===l||r+1===l)_=e.getValueInRange(t,1);else{const v=a.intersectRanges(t),y=d.intersectRanges(t);_=e.getValueInRange(v,1)+String.fromCharCode(8230)+e.getValueInRange(y,1)}return i&&_.length>2*500&&(_=_.substring(0,500)+String.fromCharCode(8230)+_.substring(_.length-500,_.length)),new vi(h+_+b,h.length,h.length+_.length,t,c.endLineNumber-c.startLineNumber)}};u(Ph,"PagedScreenReaderStrategy");let f7=Ph;var RM;(function(o){o.Tap="-monaco-textarea-synthetic-tap"})(RM||(RM={}));const p7={forceCopyWithSyntaxHighlighting:!1},_se=class _se{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};u(_se,"InMemoryClipboardMetadataManager");let Hg=_se;Hg.INSTANCE=new Hg;const vse=class vse{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}};u(vse,"CompositionContext");let m7=vse;const yse=class yse extends G{get textAreaState(){return this._textAreaState}constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new V),this.onFocus=this._onFocus.event,this._onBlur=this._register(new V),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new V),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new V),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new V),this.onCut=this._onCut.event,this._onPaste=this._register(new V),this.onPaste=this._onPaste.event,this._onType=this._register(new V),this.onType=this._onType.event,this._onCompositionStart=this._register(new V),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new V),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new V),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new V),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Et(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Et(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=vi.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(r=>{const a=new Mt(r);(a.keyCode===114||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),s=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new Mt(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new m7;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&s&&s.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(s.code==="ArrowRight"||s.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const d=vi.readFromTextArea(this._textArea,this._textAreaState),c=vi.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(c),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=vi.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const d=vi.readFromTextArea(this._textArea,this._textAreaState),c=vi.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(c),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=vi.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=vi.readFromTextArea(this._textArea,this._textAreaState),l=vi.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&(Un(l.text.charCodeAt(0))||l.text.charCodeAt(0)===127)||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=_7.getTextData(r.clipboardData);a&&(l=l||Hg.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return q(document,"selectionchange",t=>{if(Hc.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const d=this._textAreaState.deduceEditorPosition(a),c=this._host.deduceModelPosition(d[0],d[1],d[2]),h=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new xe(c.lineNumber,c.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Hg.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&_7.setTextData(e.clipboardData,t.text,t.html,n)}};u(yse,"TextAreaInput");let b7=yse;const _7={getTextData(o){const e=o.getData(bn.text);let t=null;const n=o.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&o.files.length>0?[Array.prototype.slice.call(o.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(o,e,t,n){o.setData(bn.text,e),typeof t=="string"&&o.setData("text/html",t),o.setData("vscode-editor-data",JSON.stringify(n))}},wse=class wse extends G{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Qe(this._actual,"keydown")).event,this.onKeyUp=this._register(new Qe(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Qe(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Qe(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Qe(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Qe(this._actual,"beforeinput")).event,this.onInput=this._register(new Qe(this._actual,"input")).event,this.onCut=this._register(new Qe(this._actual,"cut")).event,this.onCopy=this._register(new Qe(this._actual,"copy")).event,this.onPaste=this._register(new Qe(this._actual,"paste")).event,this.onFocus=this._register(new Qe(this._actual,"focus")).event,this.onBlur=this._register(new Qe(this._actual,"blur")).event,this._onSyntheticTap=this._register(new V),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Hc.onKeyDown())),this._register(this.onBeforeInput(()=>Hc.onBeforeInput())),this._register(this.onInput(()=>Hc.onInput())),this._register(this.onKeyUp(()=>Hc.onKeyUp())),this._register(q(this._actual,RM.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Ng(this._actual);return e?e.activeElement===this._actual:AZ(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const r=Ng(i);r?s=r.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,d=i.selectionEnd;if(a&&l===t&&d===n){Bo&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Bo&&window.parent!==window&&i.focus();return}try{const c=KIe(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),$Ie(i,c)}catch{}}};u(wse,"TextAreaWrapper");let v7=wse;const Cse=class Cse extends xw{constructor(e,t,n){super(e,t,n),this._register(oi.addTarget(this.viewHelper.linesContentDomNode)),this._register(q(this.viewHelper.linesContentDomNode,Nt.Tap,s=>this.onTap(s))),this._register(q(this.viewHelper.linesContentDomNode,Nt.Change,s=>this.onChange(s))),this._register(q(this.viewHelper.linesContentDomNode,Nt.Contextmenu,s=>this._onContextMenu(new hl(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(q(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const r=s.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new q9(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(s,r)=>this._onMouseDown(s,r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new hl(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}};u(Cse,"PointerEventHandler");let y7=Cse;const Sse=class Sse extends xw{constructor(e,t,n){super(e,t,n),this._register(oi.addTarget(this.viewHelper.linesContentDomNode)),this._register(q(this.viewHelper.linesContentDomNode,Nt.Tap,i=>this.onTap(i))),this._register(q(this.viewHelper.linesContentDomNode,Nt.Change,i=>this.onChange(i))),this._register(q(this.viewHelper.linesContentDomNode,Nt.Contextmenu,i=>this._onContextMenu(new hl(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new hl(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(RM.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}};u(Sse,"TouchHandler");let w7=Sse;const xse=class xse extends G{constructor(e,t,n){super(),Cr&&MZ.pointerEvents?this.handler=this._register(new y7(e,t,n)):window.TouchEvent?this.handler=this._register(new w7(e,t,n)):this.handler=this._register(new xw(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}};u(xse,"PointerHandler");let C7=xse;const Tse=class Tse extends Fg{};u(Tse,"DynamicViewOverlay");let Vd=Tse;const On=nt("themeService");function ln(o){return{id:o}}u(ln,"themeColorFromId");function PM(o){switch(o){case Oo.DARK:return"vs-dark";case Oo.HIGH_CONTRAST_DARK:return"hc-black";case Oo.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}u(PM,"getThemeTypeSelector");const mxe={ThemingContribution:"base.contributions.theming"},Lse=class Lse{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new V}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),He(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}};u(Lse,"ThemingRegistry");let S7=Lse;const bxe=new S7;on.add(mxe.ThemingContribution,bxe);function Ir(o){return bxe.onColorThemeChange(o)}u(Ir,"registerThemingParticipant");const Ese=class Ese extends G{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}};u(Ese,"Themable");let x7=Ese;const _xe=I("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("lineHighlight","Background color for the highlight of line at the cursor position.")),$0e=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:st},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Gt,hcLight:Gt},m("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0);I("editor.symbolHighlightBackground",{dark:bd,light:bd,hcDark:null,hcLight:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Gt,hcLight:Gt},m("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);const vxe=I("editorCursor.foreground",{dark:"#AEAFAD",light:K.black,hcDark:K.white,hcLight:"#0F4A85"},m("caret","Color of the editor cursor.")),s2e=I("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),wd=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m("editorWhitespaces","Color of whitespace characters in the editor.")),o2e=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:K.white,hcLight:"#292929"},m("editorLineNumbers","Color of editor line numbers.")),kE=I("editorIndentGuide.background",{dark:wd,light:wd,hcDark:wd,hcLight:wd},m("editorIndentGuides","Color of the editor indentation guides."),!1,m("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),DE=I("editorIndentGuide.activeBackground",{dark:wd,light:wd,hcDark:wd,hcLight:wd},m("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,m("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),tE=I("editorIndentGuide.background1",{dark:kE,light:kE,hcDark:kE,hcLight:kE},m("editorIndentGuides1","Color of the editor indentation guides (1).")),r2e=I("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides2","Color of the editor indentation guides (2).")),a2e=I("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides3","Color of the editor indentation guides (3).")),l2e=I("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides4","Color of the editor indentation guides (4).")),d2e=I("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides5","Color of the editor indentation guides (5).")),c2e=I("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides6","Color of the editor indentation guides (6).")),nE=I("editorIndentGuide.activeBackground1",{dark:DE,light:DE,hcDark:DE,hcLight:DE},m("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),u2e=I("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),h2e=I("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),g2e=I("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),f2e=I("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),p2e=I("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),ME=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Gt,hcLight:Gt},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));I("editorLineNumber.activeForeground",{dark:ME,light:ME,hcDark:ME,hcLight:ME},m("editorActiveLineNumber","Color of editor active line number"));const m2e=I("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));I("editorRuler.foreground",{dark:"#5A5A5A",light:K.lightgrey,hcDark:K.white,hcLight:"#292929"},m("editorRuler","Color of the editor rulers."));I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m("editorBracketMatchBackground","Background color behind matching brackets"));I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:st,hcLight:st},m("editorBracketMatchBorder","Color for matching brackets boxes"));const b2e=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),_2e=I("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler."));I("editorGutter.background",{dark:Gn,light:Gn,hcDark:Gn,hcLight:Gn},m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:K.fromHex("#fff").transparent(.8),hcLight:st},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const v2e=I("editorUnnecessaryCode.opacity",{dark:K.fromHex("#000a"),light:K.fromHex("#0007"),hcDark:null,hcLight:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));I("editorGhostText.border",{dark:null,light:null,hcDark:K.fromHex("#fff").transparent(.8),hcLight:K.fromHex("#292929").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor."));I("editorGhostText.foreground",{dark:K.fromHex("#ffffff56"),light:K.fromHex("#0007"),hcDark:null,hcLight:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor."));I("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorGhostTextBackground","Background color of the ghost text in the editor."));const AE=new K(new tt(0,122,204,.6)),yxe=I("editorOverviewRuler.rangeHighlightForeground",{dark:AE,light:AE,hcDark:AE,hcLight:AE},m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),y2e=I("editorOverviewRuler.errorForeground",{dark:new K(new tt(255,18,18,.7)),light:new K(new tt(255,18,18,.7)),hcDark:new K(new tt(255,50,50,1)),hcLight:"#B5200D"},m("overviewRuleError","Overview ruler marker color for errors.")),w2e=I("editorOverviewRuler.warningForeground",{dark:ao,light:ao,hcDark:mw,hcLight:mw},m("overviewRuleWarning","Overview ruler marker color for warnings.")),C2e=I("editorOverviewRuler.infoForeground",{dark:lo,light:lo,hcDark:z9,hcLight:z9},m("overviewRuleInfo","Overview ruler marker color for infos.")),wxe=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Cxe=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Sxe=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),xxe=I("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Txe=I("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Lxe=I("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),S2e=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new K(new tt(255,18,18,.8)),light:new K(new tt(255,18,18,.8)),hcDark:new K(new tt(255,50,50,1)),hcLight:""},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),x2e=I("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),T2e=I("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),L2e=I("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),E2e=I("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),k2e=I("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),D2e=I("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),M2e=I("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),A2e=I("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),I2e=I("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),N2e=I("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),R2e=I("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),P2e=I("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));I("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:"#CEA33D"},m("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));I("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:"#cea33d14"},m("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Ir((o,e)=>{const t=o.getColor(Gn),n=o.getColor(_xe),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});const _P=class _P extends Vd{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new W(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(65);const t=e.get(66);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(93);const n=e.get(142);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=qi?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._context.viewModel.getLineCount(),r=[];for(let a=n;a<=i;a++){const l=a-n,d=this._getLineRenderLineNumber(a);if(!d){r[l]="";continue}let c="";if(a===s&&this._context.viewModel.getLineLength(a)===0){if(this._renderFinalNewline==="off"){r[l]="";continue}this._renderFinalNewline==="dimmed"&&(c=" dimmed-line-number")}a===this._activeLineNumber&&(c=" active-line-number"),r[l]=`<div class="${_P.CLASS_NAME}${t}${c}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${d}</div>`}this._renderResult=r}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};u(_P,"LineNumbersOverlay");let Tw=_P;Tw.CLASS_NAME="line-numbers";Ir((o,e)=>{const t=o.getColor(o2e),n=o.getColor(m2e);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const G0=class G0 extends ls{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(142);this._canUseLayerHinting=!t.get(31),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=ht(document.createElement("div")),this._domNode.setClassName(G0.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ht(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(G0.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(142);return this._canUseLayerHinting=!t.get(31),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};u(G0,"Margin");let vb=G0;vb.CLASS_NAME="glyph-margin";vb.OUTER_CLASS_NAME="margin";const sg="monaco-mouse-cursor-text",kse=class kse{constructor(){this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}};u(kse,"IMEImpl");let T7=kse;const Bv=new T7,At=nt("keybindingService");var F2e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},O2e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Dse=class Dse{constructor(e,t,n,i,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new W(this.modelLineNumber,this.distanceToModelLineStart+1),n=new W(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}};u(Dse,"VisibleTextAreaData");let L7=Dse;const Q4=Bo;var V1;let E7=(V1=class extends ls{constructor(e,t,n,i){super(e),this._keybindingService=i,this._primaryCursorPosition=new W(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,r=s.get(142);this._setAccessibilityOptions(s),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=s.get(49),this._lineHeight=s.get(65),this._emptySelectionClipboard=s.get(36),this._copyWithSyntaxHighlighting=s.get(24),this._visibleTextArea=null,this._selections=[new xe(1,1,1,1)],this._modelSelections=[new xe(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ht(document.createElement("textarea")),kr.write(this.textArea,6),this.textArea.setClassName(`inputarea ${sg}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${a*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("aria-required",s.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(s.get(122))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",s.get(89)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=ht(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,g)=>this._context.viewModel.getValueInRange(h,g),getValueLengthInRange:(h,g)=>this._context.viewModel.getValueLengthInRange(h,g),modifyPosition:(h,g)=>this._context.viewModel.modifyPosition(h,g)},d={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Si),g=this._context.viewModel.model.getEOL(),f=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(h)?h:null,b=Array.isArray(h)?h.join(g):h;let _,v=null;if(p7.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&b.length<65536){const y=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);y&&(_=y.html,v=y.mode)}return{isFromEmptySelection:f,multicursorText:p,text:b,html:_,mode:v}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(ot&&h.isEmpty()){const f=h.getStartPosition();let p=this._getWordBeforePosition(f);if(p.length===0&&(p=this._getCharacterBeforePosition(f)),p.length>0)return new vi(p,p.length,p.length,L.fromPositions(f),0)}const g=500;if(ot&&!h.isEmpty()&&l.getValueLengthInRange(h,0)<g){const f=l.getValueInRange(h,0);return new vi(f,0,f.length,h,0)}if(Rd&&!h.isEmpty()){const f="vscode-placeholder";return new vi(f,0,f.length,null,void 0)}return vi.EMPTY}if(Hve){const h=this._selections[0];if(h.isEmpty()){const g=h.getStartPosition(),[f,p]=this._getAndroidWordAtPosition(g);if(f.length>0)return new vi(f,p,p,L.fromPositions(g),0)}return vi.EMPTY}return f7.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,g,f)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,g,f)},c=this._register(new v7(this.textArea.domNode));this._textAreaInput=this._register(new b7(d,c,oo,{isAndroid:Hve,isChrome:SZ,isFirefox:Bo,isSafari:Rd})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let g=!1,f=null,p=null;h.metadata&&(g=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,f=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,p=h.metadata.mode),this._viewController.paste(h.text,g,f,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const g=this.textArea.domNode,f=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:b}=(()=>{const v=g.value.substring(0,Math.min(g.selectionStart,g.selectionEnd)),y=v.lastIndexOf(`
`),w=v.substring(y+1),C=w.lastIndexOf("	"),S=w.length-C-1,k=f.getStartPosition(),T=Math.min(k.column-1,S),E=k.column-1-T,D=w.substring(0,w.length-T),{tabSize:O}=this._context.viewModel.model.getOptions(),B=H2e(D,this._fontInfo,O);return{distanceToModelLineStart:E,widthOfHiddenTextBefore:B}})(),{distanceToModelLineEnd:_}=(()=>{const v=g.value.substring(Math.max(g.selectionStart,g.selectionEnd)),y=v.indexOf(`
`),w=y===-1?v:v.substring(0,y),C=w.indexOf("	"),S=C===-1?w.length:w.length-C-1,k=f.getEndPosition(),T=Math.min(this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column,S);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column-T}})();this._context.viewModel.revealRange("keyboard",!0,L.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new L7(this._context,f.startLineNumber,p,b,_),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${sg} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${sg}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Bv.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=zo(t);let s=!0,r=e.column,a=!0,l=e.column,d=0;for(;d<50&&(s||a);){if(s&&r<=1&&(s=!1),s){const c=n.charCodeAt(r-2);i.get(c)!==0?s=!1:r--}if(a&&l>n.length&&(a=!1),a){const c=n.charCodeAt(l-1);i.get(c)!==0?a=!1:l++}d++}return[n.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=zo(this._context.configuration.options.get(128));let i=e.column,s=0;for(;i>1;){const r=t.charCodeAt(i-2);if(n.get(r)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Un(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){var t,n,i;if(e.get(2)===1){const r=(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||t===void 0?void 0:t.getAriaLabel(),a=(n=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||n===void 0?void 0:n.getAriaLabel(),l=(i=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||i===void 0?void 0:i.getAriaLabel(),d=m("accessibilityModeOff","The editor is not accessible at this time.");return r?m("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",d,r):a?m("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",d,a):l?m("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",d,l):d}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Mr.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(142).wrappingColumn;if(i!==-1&&this._accessibilitySupport!==1){const s=e.get(49);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=Q4?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(142);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(49),this._lineHeight=t.get(65),this._emptySelectionClipboard=t.get(36),this._copyWithSyntaxHighlighting=t.get(24),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:i}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${i*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(122))),(e.hasChanged(33)||e.hasChanged(89))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Bv.enabled||e.get(33)&&e.get(89)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new W(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(r&&a&&i&&s&&s.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,d=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,h=this._contentLeft+i.left-this._scrollLeft,g=s.left-i.left+1;if(h<this._contentLeft){const y=this._contentLeft-h;h+=y,c+=y,g-=y}g>this._contentWidth&&(g=this._contentWidth);const f=this._context.viewModel.getViewLineData(r.lineNumber),p=f.tokens.findTokenIndexAtOffset(r.column-1),b=f.tokens.findTokenIndexAtOffset(a.column-1),_=p===b,v=this._visibleTextArea.definePresentation(_?f.tokens.getPresentation(p):null);this.textArea.domNode.scrollTop=d*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:l,left:h,width:g,height:this._lineHeight,useCover:!1,color:(en.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(n<0||n>this._contentHeight){this._renderAtTopLeft();return}if(ot){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:Q4?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:Q4?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;Kn(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?K.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(56)?n.setClassName("monaco-editor-background textAreaCover "+vb.OUTER_CLASS_NAME):i.get(66).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+Tw.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}},u(V1,"TextAreaHandler"),V1);E7=F2e([O2e(3,At)],E7);function H2e(o,e,t){if(o.length===0)return 0;const n=document.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const i=document.createElement("span");Kn(i,e),i.style.whiteSpace="pre",i.style.tabSize=`${t*e.spaceWidth}px`,i.append(o),n.appendChild(i),document.body.appendChild(n);const s=i.offsetWidth;return document.body.removeChild(n),s}u(H2e,"measureText");function V2e(o,e,t){let n=0;for(let s=0;s<o.length;s++)o.charAt(s)==="	"?n=Rn.nextIndentTabStop(n,e):n++;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let r=0;r<s;r++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}u(V2e,"_normalizeIndentationFromWhitespace");function FM(o,e,t){let n=$i(o);return n===-1&&(n=o.length),V2e(o.substring(0,n),e,t)+o.substring(n)}u(FM,"normalizeIndentation");const W2e=u(()=>!0,"autoCloseAlways"),B2e=u(()=>!1,"autoCloseNever"),U2e=u(o=>o===" "||o==="	","autoCloseBeforeWhitespace"),Mse=class Mse{static shouldRecreate(e){return e.hasChanged(142)||e.hasChanged(128)||e.hasChanged(36)||e.hasChanged(75)||e.hasChanged(77)||e.hasChanged(78)||e.hasChanged(6)||e.hasChanged(10)||e.hasChanged(8)||e.hasChanged(9)||e.hasChanged(13)||e.hasChanged(126)||e.hasChanged(49)||e.hasChanged(89)}constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(142),a=s.get(49);this.readOnly=s.get(89),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(114),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(126),this.wordSeparators=s.get(128),this.emptySelectionClipboard=s.get(36),this.copyWithSyntaxHighlighting=s.get(24),this.multiCursorMergeOverlapping=s.get(75),this.multiCursorPaste=s.get(77),this.multiCursorLimit=s.get(78),this.autoClosingBrackets=s.get(6),this.autoClosingQuotes=s.get(10),this.autoClosingDelete=s.get(8),this.autoClosingOvertype=s.get(9),this.autoSurround=s.get(13),this.autoIndent=s.get(11),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=CO(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return FM(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return U2e;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return W2e;case"never":return B2e}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return i=>n.indexOf(i)!==-1}visibleColumnFromColumn(e,t){return Rn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=Rn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(i<s)return s;const r=e.getLineMaxColumn(t);return i>r?r:i}};u(Mse,"CursorConfiguration");let pc=Mse;var m_;let ut=(m_=class{static fromModelState(e){return new k7(e)}static fromViewState(e){return new D7(e)}static fromModelSelection(e){const t=xe.liftSelection(e),n=new Ei(L.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return m_.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},u(m_,"CursorState"),m_);const Ase=class Ase{constructor(e){this.modelState=e,this.viewState=null}};u(Ase,"PartialModelCursorState");let k7=Ase;const Ise=class Ise{constructor(e){this.modelState=null,this.viewState=e}};u(Ise,"PartialViewCursorState");let D7=Ise;const Zp=class Zp{constructor(e,t,n,i,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=Zp._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new Zp(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new W(t,n),i):new Zp(new L(t,n,t,n),0,i,new W(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?xe.fromPositions(e.getStartPosition(),t):xe.fromPositions(e.getEndPosition(),t)}};u(Zp,"SingleCursorState");let Ei=Zp;const Nse=class Nse{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}};u(Nse,"EditOperationResult");let ji=Nse;function lc(o){return o==="'"||o==='"'||o==="`"}u(lc,"isQuote");const vP=class vP{static columnSelect(e,t,n,i,s,r){const a=Math.abs(s-n)+1,l=n>s,d=i>r,c=i<r,h=[];for(let g=0;g<a;g++){const f=n+(l?-g:g),p=e.columnFromVisibleColumn(t,f,i),b=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new W(f,p)),v=e.visibleColumnFromColumn(t,new W(f,b));c&&(_>r||v<i)||d&&(v>i||_<r)||h.push(new Ei(new L(f,p,f,p),0,0,new W(f,b),0))}if(h.length===0)for(let g=0;g<a;g++){const f=n+(l?-g:g),p=t.getLineMaxColumn(f);h.push(new Ei(new L(f,p,f,p),0,0,new W(f,p),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,vP.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=r;l++){const d=t.getLineMaxColumn(l),c=e.visibleColumnFromColumn(t,new W(l,d));i=Math.max(i,c)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}};u(vP,"ColumnSelection");let yh=vP;const Rse=class Rse{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return xe.fromPositions(i.getEndPosition())}};u(Rse,"ReplaceCommand");let ni=Rse;const Pse=class Pse{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return xe.fromRange(i,0)}};u(Pse,"ReplaceCommandThatSelectsText");let M7=Pse;const Fse=class Fse{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return xe.fromPositions(i.getStartPosition())}};u(Fse,"ReplaceCommandWithoutChangingPosition");let Cp=Fse;const Ose=class Ose{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return xe.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}};u(Ose,"ReplaceCommandWithOffsetCursorState");let Rm=Ose;const Hse=class Hse{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};u(Hse,"ReplaceCommandThatPreservesSelection");let Lw=Hse;const Vse=class Vse{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}};u(Vse,"CursorPosition");let Uv=Vse;const zi=class zi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-eSe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new W(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=vw.atomicPosition(s,t.column-1,n,0);if(r!==-1&&r+1>=i)return new W(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?zi.leftPositionAtomicSoftTabs(t,n,e.tabSize):zi.leftPosition(t,n);return new Uv(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),d=t.normalizePosition(zi.clipPositionColumn(l,t),0),c=zi.left(e,t,d);r=c.lineNumber,a=c.column}return n.move(i,r,a,0)}static clipPositionColumn(e,t){return new W(e.lineNumber,zi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+yZ(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new W(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=vw.atomicPosition(r,n-1,i,1);if(a!==-1)return new W(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?zi.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):zi.rightPosition(t,n.lineNumber,n.column);return new Uv(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let r,a;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),d=t.normalizePosition(zi.clipPositionColumn(l,t),1),c=zi.right(e,t,d);r=c.lineNumber,a=c.column}return n.move(i,r,a,0)}static vertical(e,t,n,i,s,r,a,l){const d=Rn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,c=t.getLineCount(),h=n===1&&i===1,g=n===c&&i===t.getLineMaxColumn(n),f=r<n?h:g;if(n=r,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>c?(n=c,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,d),f?s=0:s=d-Rn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const p=new W(n,i),b=t.normalizePosition(p,l);s=s+(i-b.column),n=b.lineNumber,i=b.column}return new Uv(n,i,s)}static down(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n+r,a,4)}static moveDown(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);let l=0,d;do if(d=zi.down(e,t,r+l,a,n.leftoverVisibleColumns,s,!0),t.normalizePosition(new W(d.lineNumber,d.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return n.move(i,d.lineNumber,d.column,d.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,s=zi.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=zi.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Ei(new L(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,s,r,a){return this.vertical(e,t,n,i,s,n-r,a,3)}static moveUp(e,t,n,i,s){let r,a;n.hasSelection()&&!i?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=zi.up(e,t,r,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,s=zi.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=zi.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Ei(new L(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let r=n.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const s=n.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;let l;return n.position.column===a?l=r:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(i,r,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return n.move(i,s,r,0)}};u(zi,"MoveOperations");let an=zi;const j0=class j0{static deleteRight(e,t,n,i){const s=[];let r=e!==3;for(let a=0,l=i.length;a<l;a++){const d=i[a];let c=d;if(c.isEmpty()){const h=d.getPosition(),g=an.right(t,n,h);c=new L(g.lineNumber,g.column,h.lineNumber,h.column)}if(c.isEmpty()){s[a]=null;continue}c.startLineNumber!==c.endLineNumber&&(r=!0),s[a]=new ni(c,"")}return[r,s]}static isAutoClosingPairDelete(e,t,n,i,s,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,d=r.length;l<d;l++){const c=r[l],h=c.getPosition();if(!c.isEmpty())return!1;const g=s.getLineContent(h.lineNumber);if(h.column<2||h.column>=g.length+1)return!1;const f=g.charAt(h.column-2),p=i.get(f);if(!p)return!1;if(lc(f)){if(n==="never")return!1}else if(t==="never")return!1;const b=g.charAt(h.column-1);let _=!1;for(const v of p)v.open===f&&v.close===b&&(_=!0);if(!_)return!1;if(e==="auto"){let v=!1;for(let y=0,w=a.length;y<w;y++){const C=a[y];if(h.lineNumber===C.startLineNumber&&h.column===C.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].getPosition(),l=new L(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new ni(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const r=[];let a=e!==2;for(let l=0,d=i.length;l<d;l++){const c=j0.getDeleteRange(i[l],n,t);if(c.isEmpty()){r[l]=null;continue}c.startLineNumber!==c.endLineNumber&&(a=!0),r[l]=new ni(c,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),r=$i(s),a=r===-1?s.length+1:r+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),d=Rn.prevIndentTabStop(l,n.indentSize),c=n.columnFromVisibleColumn(t,i.lineNumber,d);return new L(i.lineNumber,c,i.lineNumber,i.column)}}return L.fromPositions(j0.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=aMe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new W(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let s=null;n.sort((r,a)=>W.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const d=l.getPosition();let c,h,g,f;d.lineNumber<t.getLineCount()?(c=d.lineNumber,h=1,g=d.lineNumber+1,f=1):d.lineNumber>1&&s?.endLineNumber!==d.lineNumber?(c=d.lineNumber-1,h=t.getLineMaxColumn(d.lineNumber-1),g=d.lineNumber,f=t.getLineMaxColumn(d.lineNumber)):(c=d.lineNumber,h=1,g=d.lineNumber,f=t.getLineMaxColumn(d.lineNumber));const p=new L(c,h,g,f);s=p,p.isEmpty()?i[r]=null:i[r]=new ni(p,"")}else i[r]=null;else i[r]=new ni(l,"")}return new ji(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}};u(j0,"DeleteOperations");let yb=j0;const yn=class yn{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const s=e.length;for(let r=i;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return r}return s}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const s=e.length;for(let r=n.column-1;r<s;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){const r=e.charCodeAt(s),a=t.get(r);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,r=n.column;r===1&&s>1&&(s=s-1,r=t.getLineMaxColumn(s));let a=yn._findPreviousWordOnLine(e,t,new W(s,r));if(i===0)return new W(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=yn._findPreviousWordOnLine(e,t,new W(s,a.start+1))),new W(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=yn._findPreviousWordOnLine(e,t,new W(s,a.start+1));return new W(s,a?a.start+1:1)}return a&&r<=a.end+1&&(a=yn._findPreviousWordOnLine(e,t,new W(s,a.start+1))),new W(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new W(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a===95&&l!==95)return new W(n,r);if(a===45&&l!==45)return new W(n,r);if((Rc(a)||wE(a))&&Va(l))return new W(n,r);if(Va(a)&&Va(l)&&r+1<i){const d=s.charCodeAt(r);if(Rc(d)||wE(d))return new W(n,r)}}return new W(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,r=1);let l=yn._findNextWordOnLine(e,t,new W(s,r));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=yn._findNextWordOnLine(e,t,new W(s,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(s);else if(i===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=yn._findNextWordOnLine(e,t,new W(s,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(s)}else l&&!a&&r>=l.start+1&&(l=yn._findNextWordOnLine(e,t,new W(s,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(s);return new W(s,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new W(n+1,1):t;const s=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a!==95&&l===95)return new W(n,r);if(a!==45&&l===45)return new W(n,r);if((Rc(a)||wE(a))&&Va(l))return new W(n,r);if(Va(a)&&Va(l)&&r+1<i){const d=s.charCodeAt(r);if(Rc(d)||wE(d))return new W(n,r)}}return new W(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=ha(n,i);return s+1<i?new L(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(yb.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new L(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new W(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,d=a.column;if(l===1&&d===1)return null;if(r){const h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let c=yn._findPreviousWordOnLine(n,i,a);return t===0?c?d=c.start+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l)):(c&&d<=c.end+1&&(c=yn._findPreviousWordOnLine(n,i,new W(l,c.start+1))),c?d=c.end+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l))),new L(l,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new W(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new L(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new L(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new L(n.lineNumber,1,n.lineNumber+1,1):new L(n.lineNumber,1,n.lineNumber,1);const r=u(h=>h.start+1<=n.column&&n.column<=h.end+1,"touchesWord"),a=u((h,g)=>(h=Math.min(h,n.column),g=Math.max(g,n.column),new L(n.lineNumber,h,n.lineNumber,g)),"createRangeWithPosition"),l=u(h=>{let g=h.start+1,f=h.end+1,p=!1;for(;f-1<s&&this._charAtIsWhitespace(i,f-1);)p=!0,f++;if(!p)for(;g>1&&this._charAtIsWhitespace(i,g-2);)g--;return a(g,f)},"deleteWordAndAdjacentWhitespace"),d=yn._findPreviousWordOnLine(e,t,n);if(d&&r(d))return l(d);const c=yn._findNextWordOnLine(e,t,n);return c&&r(c)?l(c):d&&c?a(d.end+1,c.start+1):d?a(d.start+1,d.end+1):c?a(c.start+1,c.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=yn._moveWordPartLeft(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new L(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new W(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,d=a.column;const c=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===c&&d===h)return null;if(r){const f=this._deleteWordRightWhitespace(i,a);if(f)return f}let g=yn._findNextWordOnLine(n,i,a);return t===2?g?d=g.end+1:d<h||l===c?d=h:(l++,g=yn._findNextWordOnLine(n,i,new W(l,1)),g?d=g.start+1:d=i.getLineMaxColumn(l)):(g&&d>=g.start+1&&(g=yn._findNextWordOnLine(n,i,new W(l,g.end+1))),g?d=g.start+1:d<h||l===c?d=h:(l++,g=yn._findNextWordOnLine(n,i,new W(l,1)),g?d=g.start+1:d=i.getLineMaxColumn(l))),new L(l,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=yn._moveWordPartRight(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new L(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=zo(t),s=yn._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return yn._createWordAtPosition(e,n.lineNumber,s);const r=yn._findNextWordOnLine(i,e,n);return r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end?yn._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,s){const r=zo(e.wordSeparators),a=yn._findPreviousWordOnLine(r,t,s),l=yn._findNextWordOnLine(r,t,s);if(!i){let f,p;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,p=l.end+1):(a?f=a.end+1:f=1,l?p=l.start+1:p=t.getLineMaxColumn(s.lineNumber)),new Ei(new L(s.lineNumber,f,s.lineNumber,p),1,0,new W(s.lineNumber,p),0)}let d,c;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(d=a.start+1,c=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(d=l.start+1,c=l.end+1):(d=s.column,c=s.column);const h=s.lineNumber;let g;if(n.selectionStart.containsPosition(s))g=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){g=d;const f=new W(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.endColumn)}else{g=c;const f=new W(h,g);n.selectionStart.containsPosition(f)&&(g=n.selectionStart.startColumn)}return n.move(!0,h,g,0)}};u(yn,"WordOperations");let Qn=yn;const Wse=class Wse extends Qn{static deleteWordPartLeft(e){const t=IE([Qn.deleteWordLeft(e,0),Qn.deleteWordLeft(e,2),Qn._deleteWordPartLeft(e.model,e.selection)]);return t.sort(L.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=IE([Qn.deleteWordRight(e,0),Qn.deleteWordRight(e,2),Qn._deleteWordPartRight(e.model,e.selection)]);return t.sort(L.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=IE([Qn.moveWordLeft(e,t,n,0),Qn.moveWordLeft(e,t,n,2),Qn._moveWordPartLeft(t,n)]);return i.sort(W.compare),i[2]}static moveWordPartRight(e,t,n){const i=IE([Qn.moveWordRight(e,t,n,0),Qn.moveWordRight(e,t,n,2),Qn._moveWordPartRight(t,n)]);return i.sort(W.compare),i[0]}};u(Wse,"WordPartOperations");let wb=Wse;function IE(o){return o.filter(e=>!!e)}u(IE,"enforceDefined");const Bse=class Bse{static addCursorDown(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new ut(l.modelState,l.viewState),n?i[s++]=ut.fromModelState(an.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=ut.fromViewState(an.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[s++]=new ut(l.modelState,l.viewState),n?i[s++]=ut.fromModelState(an.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=ut.fromViewState(an.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,r=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return ut.fromViewState(an.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return ut.fromModelState(an.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),a=s.column===r,l=t.modelState.position,d=e.model.getLineMaxColumn(l.lineNumber),c=r-s.column===d-l.column;return a||c?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return ut.fromViewState(an.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return ut.fromModelState(an.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let d=r.modelState.selection.endLineNumber,c;d===l?c=e.model.getLineMaxColumn(l):(d++,c=1),n[i]=ut.fromModelState(new Ei(new L(a,1,a,1),0,0,new W(d,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=ut.fromModelState(an.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];i[s]=ut.fromModelState(an.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return ut.fromModelState(new Ei(new L(1,1,1,1),0,0,new W(n,i),0))}static line(e,t,n,i,s){const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new W(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n){const d=e.model.getLineCount();let c=r.lineNumber+1,h=1;return c>d&&(c=d,h=e.model.getLineMaxColumn(c)),ut.fromModelState(new Ei(new L(r.lineNumber,1,c,h),2,0,new W(c,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return ut.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const d=e.getLineCount();let c=a.lineNumber+1,h=1;return c>d&&(c=d,h=e.getLineMaxColumn(c)),ut.fromViewState(t.viewState.move(!0,c,h,0))}else{const d=t.modelState.selectionStart.getEndPosition();return ut.fromModelState(t.modelState.move(!0,d.lineNumber,d.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return ut.fromModelState(Qn.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ut(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return ut.fromViewState(new Ei(new L(n,i,n,i),0,0,new W(n,i),0))}static moveTo(e,t,n,i,s){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,i);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,i,s)}const r=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new W(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return ut.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,r){switch(n){case 0:return r===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return r===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return r===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return r===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return r===2?t.map(a=>ut.fromViewState(an.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ut.fromModelState(an.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return r===2?t.map(a=>ut.fromViewState(an.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ut.fromModelState(an.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 14:{const l=[];for(let d=0,c=t.length;d<c;d++){const h=t[d];l[d]=this.findPositionInViewportIfOutside(e,h,r,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new ut(t.modelState,t.viewState);{let r;s>n.endLineNumber-1?r=n.endLineNumber-1:s<n.startLineNumber?r=n.startLineNumber:r=s;const a=an.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return ut.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>ut.fromViewState(an.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(l).length/2);i[s]=ut.fromViewState(an.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveRight(e,t,n,i){return t.map(s=>ut.fromViewState(an.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(l).length/2);i[s]=ut.fromViewState(an.moveRight(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveDownByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=ut.fromViewState(an.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=ut.fromModelState(an.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=ut.fromViewState(an.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=ut.fromModelState(an.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return ut.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return ut.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,d)}return i}};u(Bse,"CursorMoveCommands");let Bn=Bse;var OM;(function(o){const e=u(function(n){if(!ss(n))return!1;const i=n;return!(!rs(i.to)||!Vs(i.select)&&!k1e(i.select)||!Vs(i.by)&&!rs(i.by)||!Vs(i.value)&&!cu(i.value))},"isCursorMoveArgs");o.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},o.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case o.RawDirection.Left:i=0;break;case o.RawDirection.Right:i=1;break;case o.RawDirection.Up:i=2;break;case o.RawDirection.Down:i=3;break;case o.RawDirection.PrevBlankLine:i=4;break;case o.RawDirection.NextBlankLine:i=5;break;case o.RawDirection.WrappedLineStart:i=6;break;case o.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case o.RawDirection.WrappedLineColumnCenter:i=8;break;case o.RawDirection.WrappedLineEnd:i=9;break;case o.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case o.RawDirection.ViewPortTop:i=11;break;case o.RawDirection.ViewPortBottom:i=13;break;case o.RawDirection.ViewPortCenter:i=12;break;case o.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Character:s=3;break;case o.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}u(t,"parse"),o.parse=t})(OM||(OM={}));function Pm(o,e,t,n){const i=Tm(e,t.startLineNumber,t.startColumn),s=n.getLanguageConfiguration(i.languageId);if(!s)return null;const r=i.getLineContent(),a=r.substr(0,t.startColumn-1-i.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-i.firstCharOffset):l=Tm(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-i.firstCharOffset);let d="";if(t.startLineNumber>1&&i.firstCharOffset===0){const b=Tm(e,t.startLineNumber-1);b.languageId===i.languageId&&(d=b.getLineContent())}const c=s.onEnter(o,d,a,l);if(!c)return null;const h=c.indentAction;let g=c.appendText;const f=c.removeText||0;g?h===Tn.Indent&&(g="	"+g):h===Tn.Indent||h===Tn.IndentOutdent?g="	":g="";let p=vSe(e,t.startLineNumber,t.startColumn);return f&&(p=p.substring(0,p.length-f)),{indentAction:h,appendText:g,removeText:f,indentation:p}}u(Pm,"getEnterAction");var z2e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},G2e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ok;const eH=Object.create(null);function ih(o,e){if(e<=0)return"";eH[o]||(eH[o]=["",o]);const t=eH[o];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+o;return t[e]}u(ih,"cachedStringRepeat");var W1;let Ro=Ok=(W1=class{static unshiftIndent(e,t,n,i,s){const r=Rn.visibleColumnFromColumn(e,t,n);if(s){const a=ih(" ",i),d=Rn.prevIndentTabStop(r,i)/i;return ih(a,d)}else{const a="	",d=Rn.prevRenderTabStop(r,n)/n;return ih(a,d)}}static shiftIndent(e,t,n,i,s){const r=Rn.visibleColumnFromColumn(e,t,n);if(s){const a=ih(" ",i),d=Rn.nextIndentTabStop(r,i)/i;return ih(a,d)}else{const a="	",d=Rn.nextRenderTabStop(r,n)/n;return ih(a,d)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:r,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,c=0;for(let h=n;h<=i;h++,d=c){c=0;const g=e.getLineContent(h);let f=$i(g);if(this._opts.isUnshift&&(g.length===0||f===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(f===-1&&(f=g.length),h>1&&Rn.visibleColumnFromColumn(g,f+1,s)%r!==0&&e.tokenization.isCheapToTokenize(h-1)){const _=Pm(this._opts.autoIndent,e,new L(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(_){if(c=d,_.appendText)for(let v=0,y=_.appendText.length;v<y&&c<r&&_.appendText.charCodeAt(v)===32;v++)c++;_.removeText&&(c=Math.max(0,c-_.removeText));for(let v=0;v<c&&!(f===0||g.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let p;this._opts.isUnshift?p=Ok.unshiftIndent(g,f+1,s,r,a):p=Ok.shiftIndent(g,f+1,s,r,a),this._addEditOperation(t,new L(h,1,h,f+1),p),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?ih(" ",r):"	";for(let c=n;c<=i;c++){const h=e.getLineContent(c);let g=$i(h);if(!(this._opts.isUnshift&&(h.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(g===-1&&(g=h.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let f=0;f<g;f++)if(h.charCodeAt(f)===9){g=f+1;break}this._addEditOperation(t,new L(c,1,c,g+1),"")}else this._addEditOperation(t,new L(c,1,c,1),d),c===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new xe(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new xe(n.startLineNumber,i,n.endLineNumber,n.endColumn):new xe(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}},u(W1,"ShiftCommand"),W1);Ro=Ok=z2e([G2e(2,Pt)],Ro);const Use=class Use{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new L(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new xe(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}};u(Use,"SurroundSelectionCommand");let A7=Use;const zse=class zse{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new xe(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}};u(zse,"CompositionSurroundSelectionCommand");let I7=zse;function j2e(o,e,t){const n=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,s=-1;for(i=e-1;i>=1;i--){if(o.tokenization.getLanguageIdAtPosition(i,0)!==n)return s;const r=o.getLineContent(i);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){s=i;continue}return i}}return-1}u(j2e,"getPrecedingValidLine");function IO(o,e,t,n=!0,i){if(o<4)return null;const s=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const r=j2e(e,t,s);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:Dt(a),action:Tn.Indent,line:r};if(s.shouldDecrease(a))return{indentation:Dt(a),action:null,line:r};{if(r===1)return{indentation:Dt(e.getLineContent(r)),action:null,line:r};const l=r-1,d=s.getIndentMetadata(e.getLineContent(l));if(!(d&3)&&d&4){let c=0;for(let h=l-1;h>0;h--)if(!s.shouldIndentNextLine(e.getLineContent(h))){c=h;break}return{indentation:Dt(e.getLineContent(c+1)),action:null,line:c+1}}if(n)return{indentation:Dt(e.getLineContent(r)),action:null,line:r};for(let c=r;c>0;c--){const h=e.getLineContent(c);if(s.shouldIncrease(h))return{indentation:Dt(h),action:Tn.Indent,line:c};if(s.shouldIndentNextLine(h)){let g=0;for(let f=c-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(c))){g=f;break}return{indentation:Dt(e.getLineContent(g+1)),action:null,line:g+1}}else if(s.shouldDecrease(h))return{indentation:Dt(h),action:null,line:c}}return{indentation:Dt(e.getLineContent(1)),action:null,line:1}}}u(IO,"getInheritIndentForLine");function zv(o,e,t,n,i,s){if(o<4)return null;const r=s.getLanguageConfiguration(t);if(!r)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=IO(o,e,n,void 0,s),d=e.getLineContent(n);if(l){const c=l.line;if(c!==void 0){let h=!0;for(let g=c;g<n-1;g++)if(!/^\s*$/.test(e.getLineContent(g))){h=!1;break}if(h){const g=r.onEnter(o,"",e.getLineContent(c),"");if(g){let f=Dt(e.getLineContent(c));return g.removeText&&(f=f.substring(0,f.length-g.removeText)),g.indentAction===Tn.Indent||g.indentAction===Tn.IndentOutdent?f=i.shiftIndent(f):g.indentAction===Tn.Outdent&&(f=i.unshiftIndent(f)),a.shouldDecrease(d)&&(f=i.unshiftIndent(f)),g.appendText&&(f+=g.appendText),Dt(f)}}}return a.shouldDecrease(d)?l.action===Tn.Indent?l.indentation:i.unshiftIndent(l.indentation):l.action===Tn.Indent?i.shiftIndent(l.indentation):l.indentation}return null}u(zv,"getGoodIndentForLine");function K2e(o,e,t,n,i){if(o<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),r=CO(s,t.startColumn-1),a=r.getLineContent();let l=!1,d;r.firstCharOffset>0&&s.getLanguageId(0)!==r.languageId?(l=!0,d=a.substr(0,t.startColumn-1-r.firstCharOffset)):d=s.getLineContent().substring(0,t.startColumn-1);let c;t.isEmpty()?c=a.substr(t.startColumn-1-r.firstCharOffset):c=Tm(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const h=i.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!h)return null;const g=d,f=Dt(d),p={tokenization:{getLineTokens:y=>e.tokenization.getLineTokens(y),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(y,w)=>e.getLanguageIdAtPosition(y,w)},getLineContent:y=>y===t.startLineNumber?g:e.getLineContent(y)},b=Dt(s.getLineContent()),_=IO(o,p,t.startLineNumber+1,void 0,i);if(!_){const y=l?b:f;return{beforeEnter:y,afterEnter:y}}let v=l?b:_.indentation;return _.action===Tn.Indent&&(v=n.shiftIndent(v)),h.shouldDecrease(c)&&(v=n.unshiftIndent(v)),{beforeEnter:l?b:f,afterEnter:v}}u(K2e,"getIndentForEnter");function $2e(o,e,t,n,i,s){if(o<4)return null;const r=Tm(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=s.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),d=l.substr(0,t.startColumn-1-r.firstCharOffset);let c;if(t.isEmpty()?c=l.substr(t.startColumn-1-r.firstCharOffset):c=Tm(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(d+c)&&a.shouldDecrease(d+n+c)){const h=IO(o,e,t.startLineNumber,!1,s);if(!h)return null;let g=h.indentation;return h.action!==Tn.Indent&&(g=i.unshiftIndent(g)),g}return null}u($2e,"getIndentActionForType");function Exe(o,e,t){const n=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!n||e<1||e>o.getLineCount()?null:n.getIndentMetadata(o.getLineContent(e))}u(Exe,"getIndentMetadata");const Xn=class Xn{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new Ro(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new Ro(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,Ro.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Ro.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const s=[];for(let r=0,a=n.length;r<a;r++)s[r]=new ni(n[r],i[r]);return new ji(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){const r=[];for(let a=0,l=n.length;a<l;a++){const d=n[a],c=d.getPosition();if(s&&!d.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){const h=new L(c.lineNumber,1,c.lineNumber,1);r[a]=new Lw(h,i,d,!0)}else r[a]=new ni(d,i)}return new ji(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const r=cl(n);if(r.length===t.length)return r}return null}static paste(e,t,n,i,s,r){const a=this._distributePasteToCursors(e,n,i,s,r);return a?(n=n.sort(L.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const r=IO(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)i=r.action,s=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const c=t.getLineContent(a);if(ha(c)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),d=Pm(e.autoIndent,t,new L(a,l,a,l),e.languageConfigurationService);d&&(s=d.indentation+d.appendText)}return i&&(i===Tn.Indent&&(s=Xn.shiftIndent(e,s)),i===Tn.Outdent&&(s=Xn.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,d=l-a%l;for(let c=0;c<d;c++)s+=" "}else s="	";return new ni(n,s,i)}static tab(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";const c=e.normalizeIndentation(d);if(!l.startsWith(c)){i[s]=new ni(new L(a.startLineNumber,1,a.startLineNumber,l.length+1),c,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new Ro(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,s,r,a,l){const d=i.map(c=>this._compositionType(n,c,s,r,a,l));return new ji(4,d,{shouldPushStackElementBefore:NE(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),c=new L(a.lineNumber,l,a.lineNumber,d);return e.getValueInRange(c)===n&&r===0?null:new Rm(c,n,0,r)}static _typeCommand(e,t,n){return n?new Cp(e,t,!0):new ni(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Xn._typeCommand(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),d=Dt(l).substring(0,i.startColumn-1);return Xn._typeCommand(i,`
`+e.normalizeIndentation(d),n)}const s=Pm(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===Tn.None)return Xn._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===Tn.Indent)return Xn._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===Tn.IndentOutdent){const l=e.normalizeIndentation(s.indentation),d=e.normalizeIndentation(s.indentation+s.appendText),c=`
`+d+`
`+l;return n?new Cp(i,c,!0):new Rm(i,c,-1,d.length-l.length,!0)}else if(s.indentAction===Tn.Outdent){const l=Xn.unshiftIndent(e,s.indentation);return Xn._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const r=t.getLineContent(i.startLineNumber),a=Dt(r).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=K2e(e.autoIndent,t,i,{unshiftIndent:d=>Xn.unshiftIndent(e,d),shiftIndent:d=>Xn.shiftIndent(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)},e.languageConfigurationService);if(l){let d=e.visibleColumnFromColumn(t,i.getEndPosition());const c=i.endColumn,h=t.getLineContent(i.endLineNumber),g=$i(h);if(g>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,g+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new Cp(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return c<=g+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),f=Math.min(d+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Rm(i,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Xn._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=vSe(t,n.startLineNumber,n.startColumn),r=$2e(e.autoIndent,t,n,i,{shiftIndent:a=>Xn.shiftIndent(e,a),unshiftIndent:a=>Xn.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Xn._typeCommand(new L(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):Xn._typeCommand(new L(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())return!1;const d=l.getPosition(),c=t.getLineContent(d.lineNumber);if(c.charAt(d.column-1)!==s)return!1;const g=lc(s);if((d.column>2?c.charCodeAt(d.column-2):0)===92&&g)return!1;if(e.autoClosingOvertype==="auto"){let p=!1;for(let b=0,_=i.length;b<_;b++){const v=i[b];if(d.lineNumber===v.startLineNumber&&d.column===v.startColumn){p=!0;break}}if(!p)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a].getPosition(),h=new L(c.lineNumber,c.column,c.lineNumber,c.column+1);r[a]=new ni(h,s)}return new ji(4,r,{shouldPushStackElementBefore:NE(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let r=null;for(const a of s)if(r===null||a.open.length>r.open.length){let l=!0;for(const d of n)if(t.getValueInRange(new L(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+i!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _getAutoClosingPairClose(e,t,n,i,s){const r=lc(i),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const p of n)if(!p.isEmpty())return null;const d=n.map(p=>{const b=p.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-i.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),c=this._findAutoClosingPairOpen(e,t,d.map(p=>new W(p.lineNumber,p.beforeColumn)),i);if(!c)return null;const h=this._findContainedAutoClosingPair(e,c),g=h?h.close:"";let f=!0;for(const p of d){const{lineNumber:b,beforeColumn:_,afterColumn:v}=p,y=t.getLineContent(b),w=y.substring(0,_-1),C=y.substring(v-1);if(C.startsWith(g)||(f=!1),C.length>0){const E=C.charAt(0);if(!Xn._isBeforeClosingBrace(e,C)&&!l(E))return null}if(c.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const E=zo(e.wordSeparators);if(w.length>0){const D=w.charCodeAt(w.length-1);if(E.get(D)===0)return null}}if(!t.tokenization.isCheapToTokenize(b))return null;t.tokenization.forceTokenization(b);const S=t.tokenization.getLineTokens(b),k=CO(S,_-1);if(!c.shouldAutoClose(k,_-k.firstCharOffset))return null;const T=c.findNeutralCharacter();if(T){const E=t.tokenization.getTokenTypeIfInsertingCharacter(b,_,T);if(!c.isOK(E))return null}}return f?c.close.substring(0,c.close.length-g.length):c.close}static _runAutoClosingOpenCharType(e,t,n,i,s,r,a){const l=[];for(let d=0,c=i.length;d<c;d++){const h=i[d];l[d]=new HM(h,s,!r,a)}return new ji(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return lc(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Xn._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=lc(i);for(const r of n){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const d=t.getLineContent(l),c=l===r.startLineNumber?r.startColumn-1:0,h=l===r.endLineNumber?r.endColumn-1:d.length,g=d.substring(c,h);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(lc(l))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++){const d=i[a],c=t.surroundingPairs[s];r[a]=new A7(d,s,c)}return new ji(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;const r=i.getPosition();n.tokenization.forceTokenization(r.lineNumber);const a=n.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(s,a,r.column)}catch(d){return Be(d),null}if(!l)return null;if(l.matchOpenBracket){const d=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,c=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:d},500);if(c){if(c.startLineNumber===r.lineNumber)return null;const h=n.getLineContent(c.startLineNumber),g=Dt(h),f=t.normalizeIndentation(g),p=n.getLineContent(r.lineNumber),b=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=p.substring(b-1,r.column-1),v=f+_+s,y=new L(r.lineNumber,1,r.lineNumber,r.column),w=new ni(y,v);return new ji(tH(v,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,r){if(!i)return null;let a=null;for(const h of i)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let d=!1;for(const h of i)if(h.deletedText.length!==0){d=!0;break}if(d){if(!Xn._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=lc(l);for(const p of i)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&lc(p.deletedText))return null;const g=[];for(const p of s){if(!p.isEmpty())return null;g.push(p.getPosition())}if(g.length!==i.length)return null;const f=[];for(let p=0,b=g.length;p<b;p++)f.push(new I7(g[p],i[p].deletedText,t.surroundingPairs[l]));return new ji(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,r,l)){const h=s.map(g=>new ni(new L(g.positionLineNumber,g.positionColumn,g.positionLineNumber,g.positionColumn+1),"",!1));return new ji(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const c=this._getAutoClosingPairClose(t,n,s,l,!0);return c!==null?this._runAutoClosingOpenCharType(e,t,n,s,l,!0,c):null}static typeWithInterceptors(e,t,n,i,s,r,a){if(!e&&a===`
`){const c=[];for(let h=0,g=s.length;h<g;h++)c[h]=Xn._enter(n,i,!1,s[h]);return new ji(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){const c=[];let h=!1;for(let g=0,f=s.length;g<f;g++)if(c[g]=this._runAutoIndentType(n,i,s[g],a),!c[g]){h=!0;break}if(!h)return new ji(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,s,r,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const c=this._getAutoClosingPairClose(n,i,s,a,!1);if(c)return this._runAutoClosingOpenCharType(t,n,i,s,a,!1,c)}if(!e&&this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const c=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(c)return c}const l=[];for(let c=0,h=s.length;c<h;c++)l[c]=new ni(s[c],a);const d=tH(a,t);return new ji(d,l,{shouldPushStackElementBefore:NE(t,d),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){const r=[];for(let l=0,d=i.length;l<d;l++)r[l]=new ni(i[l],s);const a=tH(s,e);return new ji(a,r,{shouldPushStackElementBefore:NE(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new Cp(new L(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new L(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let s=0,r=n.length;s<r;s++){const a=n[s].positionLineNumber,l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new L(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=this._enter(e,t,!0,n[s]);return i}};u(Xn,"TypeOperations");let Po=Xn;const Gse=class Gse extends Rm{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new L(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new L(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}};u(Gse,"TypeWithAutoClosingCommand");let HM=Gse;const jse=class jse{constructor(e,t,n,i,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}};u(jse,"CompositionOutcome");let N7=jse;function tH(o,e){return o===" "?e===5||e===6?6:5:4}u(tH,"getTypingOperation");function NE(o,e){return Y0e(o)&&!Y0e(e)?!0:o===5?!1:q0e(o)!==q0e(e)}u(NE,"shouldPushStackElementBetween");function q0e(o){return o===6||o===5?"space":o}u(q0e,"normalizeOperationType");function Y0e(o){return o===4||o===5||o===6}u(Y0e,"isTypingOperation");var M;(function(o){o.editorSimpleInput=new _e("editorSimpleInput",!1,!0),o.editorTextFocus=new _e("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),o.focus=new _e("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),o.textInputFocus=new _e("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),o.readOnly=new _e("editorReadonly",!1,m("editorReadonly","Whether the editor is read-only")),o.inDiffEditor=new _e("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),o.isEmbeddedDiffEditor=new _e("isEmbeddedDiffEditor",!1,m("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),o.comparingMovedCode=new _e("comparingMovedCode",!1,m("comparingMovedCode","Whether a moved code block is selected for comparison")),o.accessibleDiffViewerVisible=new _e("accessibleDiffViewerVisible",!1,m("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),o.diffEditorRenderSideBySideInlineBreakpointReached=new _e("diffEditorRenderSideBySideInlineBreakpointReached",!1,m("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),o.columnSelection=new _e("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),o.writable=o.readOnly.toNegated(),o.hasNonEmptySelection=new _e("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),o.hasOnlyEmptySelection=o.hasNonEmptySelection.toNegated(),o.hasMultipleSelections=new _e("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),o.hasSingleSelection=o.hasMultipleSelections.toNegated(),o.tabMovesFocus=new _e("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),o.tabDoesNotMoveFocus=o.tabMovesFocus.toNegated(),o.isInWalkThroughSnippet=new _e("isInEmbeddedEditor",!1,!0),o.canUndo=new _e("canUndo",!1,!0),o.canRedo=new _e("canRedo",!1,!0),o.hoverVisible=new _e("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),o.hoverFocused=new _e("editorHoverFocused",!1,m("editorHoverFocused","Whether the editor hover is focused")),o.stickyScrollFocused=new _e("stickyScrollFocused",!1,m("stickyScrollFocused","Whether the sticky scroll is focused")),o.stickyScrollVisible=new _e("stickyScrollVisible",!1,m("stickyScrollVisible","Whether the sticky scroll is visible")),o.standaloneColorPickerVisible=new _e("standaloneColorPickerVisible",!1,m("standaloneColorPickerVisible","Whether the standalone color picker is visible")),o.standaloneColorPickerFocused=new _e("standaloneColorPickerFocused",!1,m("standaloneColorPickerFocused","Whether the standalone color picker is focused")),o.inCompositeEditor=new _e("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),o.notInCompositeEditor=o.inCompositeEditor.toNegated(),o.languageId=new _e("editorLangId","",m("editorLangId","The language identifier of the editor")),o.hasCompletionItemProvider=new _e("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),o.hasCodeActionsProvider=new _e("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),o.hasCodeLensProvider=new _e("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),o.hasDefinitionProvider=new _e("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),o.hasDeclarationProvider=new _e("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),o.hasImplementationProvider=new _e("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),o.hasTypeDefinitionProvider=new _e("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),o.hasHoverProvider=new _e("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),o.hasDocumentHighlightProvider=new _e("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),o.hasDocumentSymbolProvider=new _e("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),o.hasReferenceProvider=new _e("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),o.hasRenameProvider=new _e("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),o.hasSignatureHelpProvider=new _e("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),o.hasInlayHintsProvider=new _e("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),o.hasDocumentFormattingProvider=new _e("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),o.hasDocumentSelectionFormattingProvider=new _e("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),o.hasMultipleDocumentFormattingProvider=new _e("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),o.hasMultipleDocumentSelectionFormattingProvider=new _e("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(M||(M={}));const bt=0,Kse=class Kse extends hi{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}};u(Kse,"CoreEditorCommand");let Zt=Kse;var pi;(function(o){const e=u(function(n){if(!ss(n))return!1;const i=n;return!(!rs(i.to)||!Vs(i.by)&&!rs(i.by)||!Vs(i.value)&&!cu(i.value)||!Vs(i.revealCursor)&&!k1e(i.revealCursor))},"isEditorScrollArgs");o.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},o.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let i;switch(n.to){case o.RawDirection.Up:i=1;break;case o.RawDirection.Right:i=2;break;case o.RawDirection.Down:i=3;break;case o.RawDirection.Left:i=4;break;default:return null}let s;switch(n.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Page:s=3;break;case o.RawUnit.HalfPage:s=4;break;case o.RawUnit.Editor:s=5;break;case o.RawUnit.Column:s=6;break;default:s=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:r,revealCursor:a,select:!!n.select}}u(t,"parse"),o.parse=t})(pi||(pi={}));var Sp;(function(o){const e=u(function(t){if(!ss(t))return!1;const n=t;return!(!cu(n.lineNumber)&&!rs(n.lineNumber)||!Vs(n.at)&&!rs(n.at))},"isRevealLineArgs");o.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},o.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Sp||(Sp={}));const $se=class $se{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(gt).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(gt).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}};u($se,"EditorOrNativeTextInputCommand");let Ew=$se;var Jn;(function(o){const v=class v extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){if(!z.position)return;R.model.pushStackElement(),R.setCursorStates(z.source,3,[Bn.moveTo(R,R.getPrimaryCursorState(),this._inSelectionMode,z.position,z.viewPosition)])&&z.revealType!==2&&R.revealPrimaryCursor(z.source,!0,!0)}};u(v,"BaseMoveToCommand");let e=v;o.MoveTo=he(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),o.MoveToSelect=he(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));const y=class y extends Zt{runCoreEditorCommand(R,z){R.model.pushStackElement();const te=this._getColumnSelectResult(R,R.getPrimaryCursorState(),R.getCursorColumnSelectData(),z);te!==null&&(R.setCursorStates(z.source,3,te.viewStates.map(fe=>ut.fromViewState(fe))),R.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:te.fromLineNumber,fromViewVisualColumn:te.fromVisualColumn,toViewLineNumber:te.toLineNumber,toViewVisualColumn:te.toVisualColumn}),te.reversed?R.revealTopMostCursor(z.source):R.revealBottomMostCursor(z.source))}};u(y,"ColumnSelectCommand");let t=y;o.ColumnSelect=he(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(X,R,z,te){if(typeof te.position>"u"||typeof te.viewPosition>"u"||typeof te.mouseColumn>"u")return null;const fe=X.model.validatePosition(te.position),me=X.coordinatesConverter.validateViewPosition(new W(te.viewPosition.lineNumber,te.viewPosition.column),fe),ce=te.doColumnSelect?z.fromViewLineNumber:me.lineNumber,mt=te.doColumnSelect?z.fromViewVisualColumn:te.mouseColumn-1;return yh.columnSelect(X.cursorConfig,X,ce,mt,me.lineNumber,te.mouseColumn-1)}}),o.CursorColumnSelectLeft=he(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(X,R,z,te){return yh.columnSelectLeft(X.cursorConfig,X,z)}}),o.CursorColumnSelectRight=he(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(X,R,z,te){return yh.columnSelectRight(X.cursorConfig,X,z)}});const w=class w extends t{constructor(R){super(R),this._isPaged=R.isPaged}_getColumnSelectResult(R,z,te,fe){return yh.columnSelectUp(R.cursorConfig,R,te,this._isPaged)}};u(w,"ColumnSelectUpCommand");let n=w;o.CursorColumnSelectUp=he(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3600,linux:{primary:0}}})),o.CursorColumnSelectPageUp=he(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3595,linux:{primary:0}}}));const C=class C extends t{constructor(R){super(R),this._isPaged=R.isPaged}_getColumnSelectResult(R,z,te,fe){return yh.columnSelectDown(R.cursorConfig,R,te,this._isPaged)}};u(C,"ColumnSelectDownCommand");let i=C;o.CursorColumnSelectDown=he(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3602,linux:{primary:0}}})),o.CursorColumnSelectPageDown=he(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3596,linux:{primary:0}}}));const S=class S extends Zt{constructor(){super({id:"cursorMove",precondition:void 0,description:OM.description})}runCoreEditorCommand(R,z){const te=OM.parse(z);te&&this._runCursorMove(R,z.source,te)}_runCursorMove(R,z,te){R.model.pushStackElement(),R.setCursorStates(z,3,S._move(R,R.getCursorStates(),te)),R.revealPrimaryCursor(z,!0)}static _move(R,z,te){const fe=te.select,me=te.value;switch(te.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Bn.simpleMove(R,z,te.direction,fe,me,te.unit);case 11:case 13:case 12:case 14:return Bn.viewportMove(R,z,te.direction,fe,me);default:return null}}};u(S,"CursorMoveImpl");let s=S;o.CursorMoveImpl=s,o.CursorMove=he(new s);const k=class k extends Zt{constructor(R){super(R),this._staticArgs=R.args}runCoreEditorCommand(R,z){let te=this._staticArgs;this._staticArgs.value===-1&&(te={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:z.pageSize||R.cursorConfig.pageSize}),R.model.pushStackElement(),R.setCursorStates(z.source,3,Bn.simpleMove(R,R.getCursorStates(),te.direction,te.select,te.value,te.unit)),R.revealPrimaryCursor(z.source,!0)}};u(k,"CursorMoveBasedCommand");let r=k;o.CursorLeft=he(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),o.CursorLeftSelect=he(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1039}})),o.CursorRight=he(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),o.CursorRightSelect=he(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1041}})),o.CursorUp=he(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),o.CursorUpSelect=he(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),o.CursorPageUp=he(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:11}})),o.CursorPageUpSelect=he(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1035}})),o.CursorDown=he(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),o.CursorDownSelect=he(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),o.CursorPageDown=he(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:12}})),o.CursorPageDownSelect=he(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1036}})),o.CreateCursor=he(new class extends Zt{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(X,R){if(!R.position)return;let z;R.wholeLine?z=Bn.line(X,X.getPrimaryCursorState(),!1,R.position,R.viewPosition):z=Bn.moveTo(X,X.getPrimaryCursorState(),!1,R.position,R.viewPosition);const te=X.getCursorStates();if(te.length>1){const fe=z.modelState?z.modelState.position:null,me=z.viewState?z.viewState.position:null;for(let ce=0,mt=te.length;ce<mt;ce++){const $t=te[ce];if(!(fe&&!$t.modelState.selection.containsPosition(fe))&&!(me&&!$t.viewState.selection.containsPosition(me))){te.splice(ce,1),X.model.pushStackElement(),X.setCursorStates(R.source,3,te);return}}}te.push(z),X.model.pushStackElement(),X.setCursorStates(R.source,3,te)}}),o.LastCursorMoveToSelect=he(new class extends Zt{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(X,R){if(!R.position)return;const z=X.getLastAddedCursorIndex(),te=X.getCursorStates(),fe=te.slice(0);fe[z]=Bn.moveTo(X,te[z],!0,R.position,R.viewPosition),X.model.pushStackElement(),X.setCursorStates(R.source,3,fe)}});const T=class T extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,Bn.moveToBeginningOfLine(R,R.getCursorStates(),this._inSelectionMode)),R.revealPrimaryCursor(z.source,!0)}};u(T,"HomeCommand");let a=T;o.CursorHome=he(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),o.CursorHomeSelect=he(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));const E=class E extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,this._exec(R.getCursorStates())),R.revealPrimaryCursor(z.source,!0)}_exec(R){const z=[];for(let te=0,fe=R.length;te<fe;te++){const me=R[te],ce=me.modelState.position.lineNumber;z[te]=ut.fromModelState(me.modelState.move(this._inSelectionMode,ce,1,0))}return z}};u(E,"LineStartCommand");let l=E;o.CursorLineStart=he(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:0,mac:{primary:287}}})),o.CursorLineStartSelect=he(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:0,mac:{primary:1311}}}));const D=class D extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,Bn.moveToEndOfLine(R,R.getCursorStates(),this._inSelectionMode,z.sticky||!1)),R.revealPrimaryCursor(z.source,!0)}};u(D,"EndCommand");let d=D;o.CursorEnd=he(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:bt,kbExpr:M.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),o.CursorEndSelect=he(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:bt,kbExpr:M.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));const O=class O extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,this._exec(R,R.getCursorStates())),R.revealPrimaryCursor(z.source,!0)}_exec(R,z){const te=[];for(let fe=0,me=z.length;fe<me;fe++){const ce=z[fe],mt=ce.modelState.position.lineNumber,$t=R.model.getLineMaxColumn(mt);te[fe]=ut.fromModelState(ce.modelState.move(this._inSelectionMode,mt,$t,0))}return te}};u(O,"LineEndCommand");let c=O;o.CursorLineEnd=he(new c({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:0,mac:{primary:291}}})),o.CursorLineEndSelect=he(new c({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:0,mac:{primary:1315}}}));const B=class B extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,Bn.moveToBeginningOfBuffer(R,R.getCursorStates(),this._inSelectionMode)),R.revealPrimaryCursor(z.source,!0)}};u(B,"TopCommand");let h=B;o.CursorTop=he(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2062,mac:{primary:2064}}})),o.CursorTopSelect=he(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3086,mac:{primary:3088}}}));const H=class H extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){R.model.pushStackElement(),R.setCursorStates(z.source,3,Bn.moveToEndOfBuffer(R,R.getCursorStates(),this._inSelectionMode)),R.revealPrimaryCursor(z.source,!0)}};u(H,"BottomCommand");let g=H;o.CursorBottom=he(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2061,mac:{primary:2066}}})),o.CursorBottomSelect=he(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:3085,mac:{primary:3090}}}));const F=class F extends Zt{constructor(){super({id:"editorScroll",precondition:void 0,description:pi.description})}determineScrollMethod(R){const z=[6],te=[1,2,3,4,5,6],fe=[4,2],me=[1,3];return z.includes(R.unit)&&fe.includes(R.direction)?this._runHorizontalEditorScroll.bind(this):te.includes(R.unit)&&me.includes(R.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(R,z){const te=pi.parse(z);if(!te)return;const fe=this.determineScrollMethod(te);fe&&fe(R,z.source,te)}_runVerticalEditorScroll(R,z,te){const fe=this._computeDesiredScrollTop(R,te);if(te.revealCursor){const me=R.getCompletelyVisibleViewRangeAtScrollTop(fe);R.setCursorStates(z,3,[Bn.findPositionInViewportIfOutside(R,R.getPrimaryCursorState(),me,te.select)])}R.viewLayout.setScrollPosition({scrollTop:fe},0)}_computeDesiredScrollTop(R,z){if(z.unit===1){const me=R.viewLayout.getFutureViewport(),ce=R.getCompletelyVisibleViewRangeAtScrollTop(me.top),mt=R.coordinatesConverter.convertViewRangeToModelRange(ce);let $t;z.direction===1?$t=Math.max(1,mt.startLineNumber-z.value):$t=Math.min(R.model.getLineCount(),mt.startLineNumber+z.value);const hn=R.coordinatesConverter.convertModelPositionToViewPosition(new W($t,1));return R.viewLayout.getVerticalOffsetForLineNumber(hn.lineNumber)}if(z.unit===5){let me=0;return z.direction===3&&(me=R.model.getLineCount()-R.cursorConfig.pageSize),R.viewLayout.getVerticalOffsetForLineNumber(me)}let te;z.unit===3?te=R.cursorConfig.pageSize*z.value:z.unit===4?te=Math.round(R.cursorConfig.pageSize/2)*z.value:te=z.value;const fe=(z.direction===1?-1:1)*te;return R.viewLayout.getCurrentScrollTop()+fe*R.cursorConfig.lineHeight}_runHorizontalEditorScroll(R,z,te){const fe=this._computeDesiredScrollLeft(R,te);R.viewLayout.setScrollPosition({scrollLeft:fe},0)}_computeDesiredScrollLeft(R,z){const te=(z.direction===4?-1:1)*z.value;return R.viewLayout.getCurrentScrollLeft()+te*R.cursorConfig.typicalHalfwidthCharacterWidth}};u(F,"EditorScrollImpl");let f=F;o.EditorScrollImpl=f,o.EditorScroll=he(new f),o.ScrollLineUp=he(new class extends Zt{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Up,by:pi.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollPageUp=he(new class extends Zt{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Up,by:pi.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollEditorTop=he(new class extends Zt{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Up,by:pi.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollLineDown=he(new class extends Zt{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Down,by:pi.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollPageDown=he(new class extends Zt{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Down,by:pi.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollEditorBottom=he(new class extends Zt{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Down,by:pi.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollLeft=he(new class extends Zt{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Left,by:pi.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:R.source})}}),o.ScrollRight=he(new class extends Zt{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus}})}runCoreEditorCommand(X,R){o.EditorScroll.runCoreEditorCommand(X,{to:pi.RawDirection.Right,by:pi.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:R.source})}});const $=class $ extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){z.position&&(R.model.pushStackElement(),R.setCursorStates(z.source,3,[Bn.word(R,R.getPrimaryCursorState(),this._inSelectionMode,z.position)]),z.revealType!==2&&R.revealPrimaryCursor(z.source,!0,!0))}};u($,"WordCommand");let p=$;o.WordSelect=he(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),o.WordSelectDrag=he(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),o.LastCursorWordSelect=he(new class extends Zt{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(X,R){if(!R.position)return;const z=X.getLastAddedCursorIndex(),te=X.getCursorStates(),fe=te.slice(0),me=te[z];fe[z]=Bn.word(X,me,me.modelState.hasSelection(),R.position),X.model.pushStackElement(),X.setCursorStates(R.source,3,fe)}});const ee=class ee extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){z.position&&(R.model.pushStackElement(),R.setCursorStates(z.source,3,[Bn.line(R,R.getPrimaryCursorState(),this._inSelectionMode,z.position,z.viewPosition)]),z.revealType!==2&&R.revealPrimaryCursor(z.source,!1,!0))}};u(ee,"LineCommand");let b=ee;o.LineSelect=he(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),o.LineSelectDrag=he(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));const ge=class ge extends Zt{constructor(R){super(R),this._inSelectionMode=R.inSelectionMode}runCoreEditorCommand(R,z){if(!z.position)return;const te=R.getLastAddedCursorIndex(),fe=R.getCursorStates(),me=fe.slice(0);me[te]=Bn.line(R,fe[te],this._inSelectionMode,z.position,z.viewPosition),R.model.pushStackElement(),R.setCursorStates(z.source,3,me)}};u(ge,"LastCursorLineCommand");let _=ge;o.LastCursorLineSelect=he(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),o.LastCursorLineSelectDrag=he(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),o.CancelSelection=he(new class extends Zt{constructor(){super({id:"cancelSelection",precondition:M.hasNonEmptySelection,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(X,R){X.model.pushStackElement(),X.setCursorStates(R.source,3,[Bn.cancelSelection(X,X.getPrimaryCursorState())]),X.revealPrimaryCursor(R.source,!0)}}),o.RemoveSecondaryCursors=he(new class extends Zt{constructor(){super({id:"removeSecondaryCursors",precondition:M.hasMultipleSelections,kbOpts:{weight:bt+1,kbExpr:M.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(X,R){X.model.pushStackElement(),X.setCursorStates(R.source,3,[X.getPrimaryCursorState()]),X.revealPrimaryCursor(R.source,!0),Rg(m("removedCursor","Removed secondary cursors"))}}),o.RevealLine=he(new class extends Zt{constructor(){super({id:"revealLine",precondition:void 0,description:Sp.description})}runCoreEditorCommand(X,R){const z=R,te=z.lineNumber||0;let fe=typeof te=="number"?te+1:parseInt(te)+1;fe<1&&(fe=1);const me=X.model.getLineCount();fe>me&&(fe=me);const ce=new L(fe,1,fe,X.model.getLineMaxColumn(fe));let mt=0;if(z.at)switch(z.at){case Sp.RawAtArgument.Top:mt=3;break;case Sp.RawAtArgument.Center:mt=1;break;case Sp.RawAtArgument.Bottom:mt=4;break}const $t=X.coordinatesConverter.convertModelRangeToViewRange(ce);X.revealRange(R.source,!1,$t,mt,0)}}),o.SelectAll=new class extends Ew{constructor(){super(lNe)}runDOMCommand(){Bo&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(X,R,z){const te=R._getViewModel();te&&this.runCoreEditorCommand(te,z)}runCoreEditorCommand(X,R){X.model.pushStackElement(),X.setCursorStates("keyboard",3,[Bn.selectAll(X,X.getPrimaryCursorState())])}},o.SetSelection=he(new class extends Zt{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(X,R){R.selection&&(X.model.pushStackElement(),X.setCursorStates(R.source,3,[ut.fromModelSelection(R.selection)]))}})})(Jn||(Jn={}));const q2e=ne.and(M.textInputFocus,M.columnSelection);function C_(o,e){Ts.registerKeybindingRule({id:o,primary:e,when:q2e,weight:bt+1})}u(C_,"registerColumnSelection");C_(Jn.CursorColumnSelectLeft.id,1039);C_(Jn.CursorColumnSelectRight.id,1041);C_(Jn.CursorColumnSelectUp.id,1040);C_(Jn.CursorColumnSelectPageUp.id,1035);C_(Jn.CursorColumnSelectDown.id,1042);C_(Jn.CursorColumnSelectPageDown.id,1036);function X0e(o){return o.register(),o}u(X0e,"registerCommand$2");var Fm;(function(o){const t=class t extends hi{runEditorCommand(i,s,r){const a=s._getViewModel();a&&this.runCoreEditingCommand(s,a,r||{})}};u(t,"CoreEditingCommand");let e=t;o.CoreEditingCommand=e,o.LineBreakInsert=he(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:M.writable,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(n,i,s){n.pushUndoStop(),n.executeCommands(this.id,Po.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),o.Outdent=he(new class extends e{constructor(){super({id:"outdent",precondition:M.writable,kbOpts:{weight:bt,kbExpr:ne.and(M.editorTextFocus,M.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(n,i,s){n.pushUndoStop(),n.executeCommands(this.id,Po.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),n.pushUndoStop()}}),o.Tab=he(new class extends e{constructor(){super({id:"tab",precondition:M.writable,kbOpts:{weight:bt,kbExpr:ne.and(M.editorTextFocus,M.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(n,i,s){n.pushUndoStop(),n.executeCommands(this.id,Po.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),n.pushUndoStop()}}),o.DeleteLeft=he(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(n,i,s){const[r,a]=yb.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(l=>l.modelState.selection),i.getCursorAutoClosedCharacters());r&&n.pushUndoStop(),n.executeCommands(this.id,a),i.setPrevEditOperationType(2)}}),o.DeleteRight=he(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:M.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(n,i,s){const[r,a]=yb.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(l=>l.modelState.selection));r&&n.pushUndoStop(),n.executeCommands(this.id,a),i.setPrevEditOperationType(3)}}),o.Undo=new class extends Ew{constructor(){super(JSe)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(n,i,s){if(!(!i.hasModel()||i.getOption(89)===!0))return i.getModel().undo()}},o.Redo=new class extends Ew{constructor(){super(QSe)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(n,i,s){if(!(!i.hasModel()||i.getOption(89)===!0))return i.getModel().redo()}}})(Fm||(Fm={}));const qse=class qse extends ub{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(gt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}};u(qse,"EditorHandlerCommand");let VM=qse;function xf(o,e){X0e(new VM("default:"+o,o)),X0e(new VM(o,o,e))}u(xf,"registerOverwritableCommand");xf("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});xf("replacePreviousChar");xf("compositionType");xf("compositionStart");xf("compositionEnd");xf("paste");xf("cut");const Yse=class Yse{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Jn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new W(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(76)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(76)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=qi&&t.get(105),i=t.get(21);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Jn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Jn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Jn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Jn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Jn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Jn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Jn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Jn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Jn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Jn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Jn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Jn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Jn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}};u(Yse,"ViewController");let R7=Yse;const yP=class yP{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return yP.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new W(e.afterLineNumber,1)).lineNumber}}};u(yP,"ViewUserInputEvents");let WM=yP;const Xse=class Xse{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new An("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,r=0;for(let l=n;l<=i;l++){const d=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(s=d,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,r)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let a=e;a<=n;a++)a>=i&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const r=[];for(let h=0;h<n;h++)r[h]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(d),c}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,r=e.length;s<r;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let c=l;c<=d;c++){const h=c-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}};u(Xse,"RenderedLinesCollection");let BM=Xse;const Zse=class Zse{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new BM(()=>this._host.createVisibleLine())}_createDomNode(){const e=ht(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(142)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new kw(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}};u(Zse,"VisibleLinesCollection");let UM=Zse;const Lc=class Lc{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let r=t;r<=n;r++)s.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const r=t,a=Math.min(n,s.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart<t){const r=Math.min(s.linesLength,t-s.rendLineNumberStart);r>0&&(this._removeLinesBefore(s,r),s.linesLength-=r)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const r=s.rendLineNumberStart+s.linesLength,a=n;r<=a&&(this._insertLinesAfter(s,r,a,i,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const r=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-r+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const d=r+l;a[l].layoutLine(d,i[d-s])}}_insertLinesBefore(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){Lc._ttPolicy&&(n=Lc._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");Lc._ttPolicy&&(t=Lc._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const r=e.lines[s];if(n[s]){const a=i.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,n){const i=Lc._sb,s=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let d=!1;for(let c=0;c<s;c++){const h=r[c];l[c]=!1,!(h.getDomNode()||!h.renderLine(c+a,n[c],this.viewportData,i))&&(l[c]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let d=!1;const c=[];for(let h=0;h<s;h++){const g=r[h];c[h]=!1,!(l[h]||!g.renderLine(h+a,n[h],this.viewportData,i))&&(c[h]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,i.build(),c)}}};u(Lc,"ViewLayerRenderer");let kw=Lc;kw._ttPolicy=Kd("editorViewLayer",{createHTML:o=>o});kw._sb=new Pd(1e5);const Jse=class Jse extends ls{constructor(e){super(e),this._visibleLines=new UM(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(49);Kn(this.domNode,n),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new P7(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);const s=this._context.configuration.options.get(49);return Kn(this.domNode,s),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}};u(Jse,"ViewOverlays");let zM=Jse;const Qse=class Qse{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(65),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ht(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(65)}renderLine(e,t,n,i){let s="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++){const l=this._dynamicOverlays[r];s+=l.render(n.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,i.appendString('<div style="position:absolute;top:'),i.appendString(String(t)),i.appendString("px;width:100%;height:"),i.appendString(String(this._lineHeight)),i.appendString('px;">'),i.appendString(s),i.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}};u(Qse,"ViewOverlayLine");let P7=Qse;const eoe=class eoe extends zM{constructor(e){super(e);const n=this._context.configuration.options.get(142);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(142);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}};u(eoe,"ContentViewOverlays");let F7=eoe;const toe=class toe extends zM{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(142);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Kn(this.domNode,t.get(49))}onConfigurationChanged(e){const t=this._context.configuration.options;Kn(this.domNode,t.get(49));const n=t.get(142);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}};u(toe,"MarginViewOverlays");let O7=toe;const noe=class noe extends ls{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ht(document.createElement("div")),kr.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ht(document.createElement("div")),kr.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new V7(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i,s){this._widgets[e.getId()].setPosition(t,n,i,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}};u(noe,"ViewContentWidgets");let H7=noe;const ioe=class ioe{constructor(e,t,n){this._primaryAnchor=new wh(null,null),this._secondaryAnchor=new wh(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=ht(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(142);this._fixedOverflowWidgets=i.get(41),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(65),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(65),e.hasChanged(142)){const n=t.get(142);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity);function i(s,r,a){if(!s)return new wh(null,null);const l=r.model.validatePosition(s);if(r.coordinatesConverter.modelPositionIsVisible(l)){const d=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new wh(s,d)}return new wh(s,null)}u(i,"getValidPositionPair")}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i){const s=e.top,r=s,a=e.top+e.height,l=i.viewportHeight-a,d=s-n,c=r>=n,h=a,g=l>=n;let f=e.left;return f+t>i.scrollLeft+i.viewportWidth&&(f=i.scrollLeft+i.viewportWidth-t),f<i.scrollLeft&&(f=i.scrollLeft),{fitsAbove:c,aboveTop:d,fitsBelow:g,belowTop:h,left:f}}_layoutHorizontalSegmentInPage(e,t,n,i){const a=Math.max(15,t.left-i),l=Math.min(t.left+t.width+i,e.width-15);let d=t.left+n-window.scrollX;if(d+i>l){const c=d-(l-i);d-=c,n-=c}if(d<a){const c=d-a;d-=c,n-=c}return[n,d]}_layoutBoxInPage(e,t,n,i){const s=e.top-n,r=e.top+e.height,a=Cn(this._viewDomNode.domNode),l=a.top+s-window.scrollY,d=a.top+r-window.scrollY,c=w_(document.body),[h,g]=this._layoutHorizontalSegmentInPage(c,a,e.left-i.scrollLeft+this._contentLeft,t),f=22,p=22,b=l>=f,_=d+n<=c.height-p;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(l,f),fitsBelow:_,belowTop:d,left:g}:{fitsAbove:b,aboveTop:s,fitsBelow:_,belowTop:r,left:h}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Ch(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,n;const i=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),s=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((n=this._primaryAnchor.viewPosition)===null||n===void 0?void 0:n.lineNumber)?this._secondaryAnchor.viewPosition:null,r=a(s,this._affinity,this._lineHeight);return{primary:i,secondary:r};function a(l,d,c){if(!l)return null;const h=e.visibleRangeForPosition(l);if(!h)return null;const g=l.column===1&&d===3?0:h.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new GM(f,g,c)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const i=this._context.configuration.options.get(49);let s=t.left;return s<e.left?s=Math.max(s,e.left-n+i.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+n-i.typicalFullwidthCharacterWidth),new GM(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=nH(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const i=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new Ch(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new Ch(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Ch(i.top,i.left)),position:0}:{coordinate:new Ch(i.top,i.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&nH(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&nH(this._actual.afterRender,this._actual,this._renderData.position)}};u(ioe,"Widget");let V7=ioe;const soe=class soe{constructor(e,t){this.modelPosition=e,this.viewPosition=t}};u(soe,"PositionPair");let wh=soe;const ooe=class ooe{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}};u(ooe,"Coordinate");let Ch=ooe;const roe=class roe{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}};u(roe,"AnchorCoordinate");let GM=roe;function nH(o,e,...t){try{return o.call(e,...t)}catch{return null}}u(nH,"safeInvoke");const aoe=class aoe extends Vd{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(142);this._lineHeight=t.get(65),this._renderLineHighlight=t.get(94),this._renderLineHighlightOnlyWhenFocus=t.get(95),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new xe(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(i=>i.positionLineNumber);t.sort((i,s)=>i-s),jn(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(i=>i.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(142);return this._lineHeight=t.get(65),this._renderLineHighlight=t.get(94),this._renderLineHighlightOnlyWhenFocus=t.get(95),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=n;l<=i;l++){const d=l-n;for(;r<s&&this._cursorLineNumbers[r]<l;)r++;r<s&&this._cursorLineNumbers[r]===l?a[d]=t:a[d]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}};u(aoe,"AbstractLineHighlightOverlay");let jM=aoe;const loe=class loe extends jM{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}};u(loe,"CurrentLineHighlightOverlay");let W7=loe;const doe=class doe extends jM{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}};u(doe,"CurrentLineMarginHighlightOverlay");let B7=doe;Ir((o,e)=>{const t=o.getColor(_xe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||o.defines($0e)){const n=o.getColor($0e);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),tl(o.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});const coe=class coe extends Vd{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,d=t.length;l<d;l++){const c=t[l];c.options.className&&(n[i++]=c)}n=n.sort((l,d)=>{if(l.options.zIndex<d.options.zIndex)return-1;if(l.options.zIndex>d.options.zIndex)return 1;const c=l.options.className,h=d.options.className;return c<h?-1:c>h?1:L.compareRangesUsingStarts(l.range,d.range)});const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=r;l++){const d=l-s;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const d=t[a];if(!d.options.isWholeLine)continue;const c='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',h=Math.max(d.range.startLineNumber,s),g=Math.min(d.range.endLineNumber,r);for(let f=h;f<=g;f++){const p=f-s;n[p]+=c}}}_renderNormalDecorations(e,t,n){var i;const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let a=null,l=!1,d=null,c=!1;for(let h=0,g=t.length;h<g;h++){const f=t[h];if(f.options.isWholeLine)continue;const p=f.options.className,b=!!f.options.showIfCollapsed;let _=f.range;if(b&&_.endColumn===1&&_.endLineNumber!==_.startLineNumber&&(_=new L(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),a===p&&l===b&&L.areIntersectingOrTouching(d,_)){d=L.plusRange(d,_);continue}a!==null&&this._renderNormalDecoration(e,d,a,c,l,s,r,n),a=p,l=b,d=_,c=(i=f.options.shouldFillLineOnLineBreak)!==null&&i!==void 0?i:!1}a!==null&&this._renderNormalDecoration(e,d,a,c,l,s,r,n)}_renderNormalDecoration(e,t,n,i,s,r,a,l){const d=e.linesVisibleRangesForRange(t,n==="findMatch");if(d)for(let c=0,h=d.length;c<h;c++){const g=d[c];if(g.outsideRenderedLine)continue;const f=g.lineNumber-a;if(s&&g.ranges.length===1){const p=g.ranges[0];if(p.width<this._typicalHalfwidthCharacterWidth){const b=Math.round(p.left+p.width/2),_=Math.max(0,Math.round(b-this._typicalHalfwidthCharacterWidth/2));g.ranges[0]=new CM(_,this._typicalHalfwidthCharacterWidth)}}for(let p=0,b=g.ranges.length;p<b;p++){const _=i&&g.continuesOnNextLine&&b===1,v=g.ranges[p],y='<div class="cdr '+n+'" style="left:'+String(v.left)+(_?"px;width:100%;height:":"px;width:"+String(v.width)+"px;height:")+r+'px;"></div>';l[f]+=y}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};u(coe,"DecorationsOverlay");let U7=coe;const uoe=class uoe extends ls{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,r=s.get(101),a=s.get(73),l=s.get(39),d=s.get(104),c={listenOnDomNode:n.domNode,className:"editor-scrollable "+PM(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:d,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new Sw(t.domNode,c,this._context.viewLayout.getScrollable())),kr.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=ht(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=u((g,f,p)=>{const b={};if(f){const _=g.scrollTop;_&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,g.scrollTop=0)}if(p){const _=g.scrollLeft;_&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)},"onBrowserDesperateReveal");this._register(q(n.domNode,"scroll",g=>h(n.domNode,!0,!0))),this._register(q(t.domNode,"scroll",g=>h(t.domNode,!0,!1))),this._register(q(i.domNode,"scroll",g=>h(i.domNode,!0,!1))),this._register(q(this.scrollbarDomNode.domNode,"scroll",g=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(142);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(71).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(101)||e.hasChanged(73)||e.hasChanged(39)){const t=this._context.configuration.options,n=t.get(101),i=t.get(73),s=t.get(39),r=t.get(104),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(142)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+PM(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};u(uoe,"EditorScrollbar");let z7=uoe;const hoe=class hoe extends G{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};u(hoe,"TextModelPart");let KM=hoe;function NO(o,e){let t=0,n=0;const i=o.length;for(;n<i;){const s=o.charCodeAt(n);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;n++}return n===i?-1:t}u(NO,"computeIndentLevel");var og;(function(o){o[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled"})(og||(og={}));const goe=class goe{constructor(e,t,n,i,s,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}};u(goe,"IndentGuide");let Cd=goe;const foe=class foe{constructor(e,t){this.top=e,this.endColumn=t}};u(foe,"IndentGuideHorizontalLine");let rg=foe;const poe=class poe extends KM{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return NO(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new An("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide);let a=-2,l=-1,d=-2,c=-1;const h=u(T=>{if(a!==-1&&(a===-2||a>T-1)){a=-1,l=-1;for(let E=T-2;E>=0;E--){const D=this._computeIndentLevel(E);if(D>=0){a=E,l=D;break}}}if(d===-2){d=-1,c=-1;for(let E=T;E<i;E++){const D=this._computeIndentLevel(E);if(D>=0){d=E,c=D;break}}}},"up_resolveIndents");let g=-2,f=-1,p=-2,b=-1;const _=u(T=>{if(g===-2){g=-1,f=-1;for(let E=T-2;E>=0;E--){const D=this._computeIndentLevel(E);if(D>=0){g=E,f=D;break}}}if(p!==-1&&(p===-2||p<T-1)){p=-1,b=-1;for(let E=T;E<i;E++){const D=this._computeIndentLevel(E);if(D>=0){p=E,b=D;break}}}},"down_resolveIndents");let v=0,y=!0,w=0,C=!0,S=0,k=0;for(let T=0;y||C;T++){const E=e-T,D=e+T;T>1&&(E<1||E<t)&&(y=!1),T>1&&(D>i||D>n)&&(C=!1),T>5e4&&(y=!1,C=!1);let O=-1;if(y&&E>=1){const H=this._computeIndentLevel(E-1);H>=0?(d=E-1,c=H,O=Math.ceil(H/this.textModel.getOptions().indentSize)):(h(E),O=this._getIndentLevelForWhitespaceLine(r,l,c))}let B=-1;if(C&&D<=i){const H=this._computeIndentLevel(D-1);H>=0?(g=D-1,f=H,B=Math.ceil(H/this.textModel.getOptions().indentSize)):(_(D),B=this._getIndentLevelForWhitespaceLine(r,f,b))}if(T===0){k=O;continue}if(T===1){if(D<=i&&B>=0&&k+1===B){y=!1,v=D,w=D,S=B;continue}if(E>=1&&O>=0&&O-1===k){C=!1,v=E,w=E,S=O;continue}if(v=e,w=e,S=k,S===0)return{startLineNumber:v,endLineNumber:w,indent:S}}y&&(O>=S?v=E:y=!1),C&&(B>=S?w=D:C=!1)}return{startLineNumber:v,endLineNumber:w,indent:S}}getLinesBracketGuides(e,t,n,i){var s;const r=[];for(let g=e;g<=t;g++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new L(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let d;if(n&&l.length>0){const g=(e<=n.lineNumber&&n.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(L.fromPositions(n)).toArray()).filter(f=>L.strictContainsPosition(f.range,n));d=(s=S1e(g,f=>a))===null||s===void 0?void 0:s.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new $M;for(const g of l){if(!g.closingBracketRange)continue;const f=d&&g.range.equalsRange(d);if(!f&&!i.includeInactive)continue;const p=h.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,c)+(i.highlightActive&&f?" "+h.activeClassName:""),b=g.openingBracketRange.getStartPosition(),_=g.closingBracketRange.getStartPosition(),v=i.horizontalGuides===og.Enabled||i.horizontalGuides===og.EnabledForActive&&f;if(g.range.startLineNumber===g.range.endLineNumber){v&&r[g.range.startLineNumber-e].push(new Cd(-1,g.openingBracketRange.getEndPosition().column,p,new rg(!1,_.column),-1,-1));continue}const y=this.getVisibleColumnFromPosition(_),w=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),C=Math.min(w,y,g.minVisibleColumnIndentation+1);let S=!1;$i(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(S=!0);const E=Math.max(b.lineNumber,e),D=Math.min(_.lineNumber,t),O=S?1:0;for(let B=E;B<D+O;B++)r[B-e].push(new Cd(C,-1,p,null,B===b.lineNumber?b.column:-1,B===_.lineNumber?_.column:-1));v&&(b.lineNumber>=e&&w>C&&r[b.lineNumber-e].push(new Cd(C,-1,p,new rg(!1,b.column),-1,-1)),_.lineNumber<=t&&y>C&&r[_.lineNumber-e].push(new Cd(C,-1,p,new rg(!S,_.column),-1,-1)))}for(const g of r)g.sort((f,p)=>f.visibleColumn-p.visibleColumn);return r}getVisibleColumnFromPosition(e){return Rn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,d=-1,c=-2,h=-1;for(let g=e;g<=t;g++){const f=g-e,p=this._computeIndentLevel(g-1);if(p>=0){l=g-1,d=p,a[f]=Math.ceil(p/i.indentSize);continue}if(l===-2){l=-1,d=-1;for(let b=g-2;b>=0;b--){const _=this._computeIndentLevel(b);if(_>=0){l=b,d=_;break}}}if(c!==-1&&(c===-2||c<g-1)){c=-1,h=-1;for(let b=g;b<n;b++){const _=this._computeIndentLevel(b);if(_>=0){c=b,h=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,d,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}};u(poe,"GuidesTextModelPart");let G7=poe;const moe=class moe{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};u(moe,"BracketPairGuidesClassNames");let $M=moe;const boe=class boe extends Vd{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(143),i=t.get(49);this._lineHeight=t.get(65),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(15),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143),i=t.get(49);return this._lineHeight=t.get(65),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(15),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,d=this._lineHeight,c=this._primaryPosition,h=this.getGuidesByLine(r,Math.min(a+1,this._context.viewModel.getLineCount()),c),g=[];for(let f=r;f<=a;f++){const p=f-r,b=h[p];let _="";const v=(n=(t=e.visibleRangeForPosition(new W(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const y of b){const w=y.column===-1?v+(y.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new W(f,y.column)).left;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const C=y.horizontalLine?y.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",S=y.horizontalLine?((s=(i=e.visibleRangeForPosition(new W(f,y.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&s!==void 0?s:w+this._spaceWidth)-w:this._spaceWidth;_+=`<div class="core-guide ${y.className} ${C}" style="left:${w}px;height:${d}px;width:${S}px"></div>`}g[p]=_}this._renderResult=g}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?og.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?og.EnabledForActive:og.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:d}=this._context.viewModel.model.getOptions(),c=[];for(let h=e;h<=t;h++){const g=new Array;c.push(g);const f=i?i[h-e]:[],p=new pa(f),b=s?s[h-e]:0;for(let _=1;_<=b;_++){const v=(_-1)*d+1,y=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=h&&h<=a&&_===l;g.push(...p.takeWhile(C=>C.visibleColumn<v)||[]);const w=p.peek();(!w||w.visibleColumn!==v||w.horizontalLine)&&g.push(new Cd(v,-1,`core-guide-indent lvl-${(_-1)%30}`+(y?" indent-active":""),null,-1,-1))}g.push(...p.takeWhile(_=>!0)||[])}return c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};u(boe,"IndentGuidesOverlay");let j7=boe;function Wf(o){if(!(o&&o.isTransparent()))return o}u(Wf,"transparentToUndefined");Ir((o,e)=>{const t=[{bracketColor:wxe,guideColor:x2e,guideColorActive:M2e},{bracketColor:Cxe,guideColor:T2e,guideColorActive:A2e},{bracketColor:Sxe,guideColor:L2e,guideColorActive:I2e},{bracketColor:xxe,guideColor:E2e,guideColorActive:N2e},{bracketColor:Txe,guideColor:k2e,guideColorActive:R2e},{bracketColor:Lxe,guideColor:D2e,guideColorActive:P2e}],n=new $M,i=[{indentColor:tE,indentColorActive:nE},{indentColor:r2e,indentColorActive:u2e},{indentColor:a2e,indentColorActive:h2e},{indentColor:l2e,indentColorActive:g2e},{indentColor:d2e,indentColorActive:f2e},{indentColor:c2e,indentColorActive:p2e}],s=t.map(a=>{var l,d;const c=o.getColor(a.bracketColor),h=o.getColor(a.guideColor),g=o.getColor(a.guideColorActive),f=Wf((l=Wf(h))!==null&&l!==void 0?l:c?.transparent(.3)),p=Wf((d=Wf(g))!==null&&d!==void 0?d:c);if(!(!f||!p))return{guideColor:f,guideColorActive:p}}).filter(Ny),r=i.map(a=>{const l=o.getColor(a.indentColor),d=o.getColor(a.indentColorActive),c=Wf(l),h=Wf(d);if(!(!c||!h))return{indentColor:c,indentColorActive:h}}).filter(Ny);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});const _oe=class _oe{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}};u(_oe,"DomReadingContext");let Gv=_oe;const voe=class voe{constructor(){this._currentVisibleRange=new L(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}};u(voe,"LastRenderedData");let K7=voe;const yoe=class yoe{constructor(e,t,n,i,s,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}};u(yoe,"HorizontalRevealRangeRequest");let $7=yoe;const woe=class woe{constructor(e,t,n,i,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,d=t.length;l<d;l++){const c=t[l];r=Math.min(r,c.startLineNumber),a=Math.max(a,c.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}};u(woe,"HorizontalRevealSelectionsRequest");let q7=woe;const wP=class wP extends ls{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new UM(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(49),r=i.get(143);this._lineHeight=i.get(65),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(98),this._cursorSurroundingLines=i.get(28),this._cursorSurroundingLinesStyle=i.get(29),this._canUseLayerHinting=!i.get(31),this._viewLineOptions=new xM(n,this._context.theme.type),kr.write(this.domNode,7),this.domNode.setClassName(`view-lines ${sg}`),Kn(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Et(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Et(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new K7,this._horizontalRevealRequest=null,this._stickyScrollEnabled=i.get(113).enabled,this._maxNumberStickyLines=i.get(113).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Ua(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(143)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(49),i=t.get(143);return this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(98),this._cursorSurroundingLines=t.get(28),this._cursorSurroundingLinesStyle=t.get(29),this._canUseLayerHinting=!t.get(31),this._stickyScrollEnabled=t.get(113).enabled,this._maxNumberStickyLines=t.get(113).maxLineCount,Kn(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(142)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new xM(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new $7(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new q7(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new W(i,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<s||i>r)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new W(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Ua.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const i=new Gv(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=L.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const s=[];let r=0;const a=new Gv(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(i.startLineNumber,1)).lineNumber);const d=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<d||h>c)continue;const g=h===i.startLineNumber?i.startColumn:1,f=h!==i.endLineNumber,p=f?this._context.viewModel.getLineMaxColumn(h):i.endColumn,b=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,g,p,a);if(b){if(t&&h<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(h+1,1)).lineNumber,_!==l&&(b.ranges[b.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new Q9(b.outsideRenderedLine,h,CM.from(b.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:s}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const i=new Gv(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new e7(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth(null))}return s&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),qi&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s,r){const a=e.top,l=e.height,d=a+l;let c,h,g;if(s&&s.length>0){let v=s[0].startLineNumber,y=s[0].endLineNumber;for(let w=1,C=s.length;w<C;w++){const S=s[w];v=Math.min(v,S.startLineNumber),y=Math.max(y,S.endLineNumber)}c=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(v),g=this._context.viewLayout.getVerticalOffsetForLineNumber(y)+this._lineHeight}else if(i)c=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let p=0,b=0;if(f)n||(p=this._lineHeight);else{const v=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?p=Math.max(v,this._maxNumberStickyLines)*this._lineHeight:p=v*this._lineHeight,b=Math.max(0,v-1)*this._lineHeight}n||(r===0||r===4)&&(b+=this._lineHeight),h-=p,g+=b;let _;if(g-h>l){if(!c)return-1;_=h}else if(r===5||r===6)if(r===6&&a<=h&&g<=d)_=a;else{const v=Math.max(5*this._lineHeight,l*.2),y=h-v,w=g-l;_=Math.max(w,y)}else if(r===1||r===2)if(r===2&&a<=h&&g<=d)_=a;else{const v=(h+g)/2;_=Math.max(0,v-l/2)}else _=this._computeMinimumScrolling(a,d,h,g,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(142),i=t.left,s=i+t.width-n.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const d=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!d)return null;for(const c of d.ranges)r=Math.min(r,Math.round(c.left)),a=Math.max(a,Math.round(c.left+c.width))}else for(const d of e.selections){if(d.startLineNumber!==d.endLineNumber)return null;const c=this._visibleRangesForLineRange(d.startLineNumber,d.startColumn,d.endColumn);if(!c)return null;for(const h of c.ranges)r=Math.min(r,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}return e.minimalReveal||(r=Math.max(0,r-wP.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,s,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,i,s,r){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,r=!!r;const a=t-e;if(i-n<a){if(s)return n;if(r)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}};u(wP,"ViewLines");let qM=wP;qM.HORIZONTAL_EXTRA_PX=30;const Coe=class Coe{constructor(e,t,n,i){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n),this.zIndex=i??0}};u(Coe,"DecorationToRender");let Dw=Coe;const Soe=class Soe{constructor(e,t){this.className=e,this.zIndex=t}};u(Soe,"LineDecorationToRender");let Y7=Soe;const xoe=class xoe{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}};u(xoe,"VisibleLineDecorationsToRender");let X7=xoe;const Toe=class Toe extends Vd{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=new X7}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,r=0;for(let a=0,l=n.length;a<l;a++){const d=n[a],c=d.className,h=d.zIndex;let g=Math.max(d.startLineNumber,e)-e;const f=Math.min(d.endLineNumber,t)-e;s===c?(g=Math.max(r+1,g),r=Math.max(r,f)):(s=c,r=f);for(let p=g;p<=r;p++)i[p].add(new Y7(c,h))}return i}};u(Toe,"DedupOverlay");let YM=Toe;const Loe=class Loe extends ls{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(142);this.domNode=ht(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(65),this._glyphMargin=t.get(56),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(142);return this._lineHeight=t.get(65),this._glyphMargin=t.get(56),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=ht(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&L.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const n=e.getId();if(this._widgets[n]){const s=this._widgets[n].domNode.domNode;delete this._widgets[n],(t=s.parentNode)===null||t===void 0||t.removeChild(s),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var n,i,s;const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(const d of l){const c=d.options.glyphMarginClassName;if(!c)continue;const h=Math.max(d.range.startLineNumber,r),g=Math.min(d.range.endLineNumber,a),f=Math.min((i=(n=d.options.glyphMargin)===null||n===void 0?void 0:n.position)!==null&&i!==void 0?i:1,this._glyphMarginDecorationLaneCount),p=(s=d.options.zIndex)!==null&&s!==void 0?s:0;for(let b=h;b<=g;b++)t.push(new J7(b,f,p,c))}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const r=s.preference.range;if(r.endLineNumber<n||r.startLineNumber>i)continue;const a=Math.max(r.startLineNumber,n),l=Math.min(s.preference.lane,this._glyphMarginDecorationLaneCount);t.push(new Q7(a,l,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,i)=>n.lineNumber===i.lineNumber?n.lane===i.lane?n.zIndex===i.zIndex?i.type===n.type?n.type===0&&i.type===0?n.className<i.className?-1:1:0:i.type-n.type:i.zIndex-n.zIndex:n.lane-i.lane:n.lineNumber-i.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const i of Object.values(this._widgets))i.renderInfo=null;const t=new pa(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const i=t.peek();if(!i)break;const s=t.takeWhile(a=>a.lineNumber===i.lineNumber&&a.lane===i.lane);if(!s||s.length===0)break;const r=s[0];if(r.type===0){const a=[];for(const l of s){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,lane:r.lane}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const n=this._managedDomNodes.pop();n?.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const i=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+(n.renderInfo.lane-1)*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(i),n.domNode.setLeft(s),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const i=this._decorationGlyphsToRender[n],s=e.viewportData.relativeVerticalOffset[i.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+(i.lane-1)*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=ht(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+i.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const n=this._managedDomNodes.pop();n?.domNode.remove()}}};u(Loe,"GlyphMarginWidgets");let Z7=Loe;const Eoe=class Eoe{constructor(e,t,n,i){this.lineNumber=e,this.lane=t,this.zIndex=n,this.className=i,this.type=0}accept(e){return new eW(this.lineNumber,this.lane,e)}};u(Eoe,"DecorationBasedGlyphRenderRequest");let J7=Eoe;const koe=class koe{constructor(e,t,n,i){this.lineNumber=e,this.lane=t,this.zIndex=n,this.widget=i,this.type=1}};u(koe,"WidgetBasedGlyphRenderRequest");let Q7=koe;const Doe=class Doe{constructor(e,t,n){this.lineNumber=e,this.lane=t,this.combinedClassName=n}};u(Doe,"DecorationBasedGlyph");let eW=Doe;const Moe=class Moe extends YM{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(142);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(142);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.linesDecorationsClassName,d=a.options.zIndex;l&&(n[i++]=new Dw(a.range.startLineNumber,a.range.endLineNumber,l,d));const c=a.options.firstLineDecorationClassName;c&&(n[i++]=new Dw(a.range.startLineNumber,a.range.startLineNumber,c,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+r+'px;"></div>',l=[];for(let d=t;d<=n;d++){const c=d-t,h=i[c].getDecorations();let g="";for(const f of h)g+='<div class="cldr '+f.className+a;l[c]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};u(Moe,"LinesDecorationsOverlay");let tW=Moe;const Aoe=class Aoe extends YM{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.marginClassName,d=a.options.zIndex;l&&(n[i++]=new Dw(a.range.startLineNumber,a.range.endLineNumber,l,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let r=t;r<=n;r++){const a=r-t,l=i[a].getDecorations();let d="";for(const c of l)d+='<div class="cmdr '+c.className+'" style=""></div>';s[a]=d}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};u(Aoe,"MarginViewLineDecorationsOverlay");let nW=Aoe;const Fh=class Fh{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=Fh._clamp(e),this.g=Fh._clamp(t),this.b=Fh._clamp(n),this.a=Fh._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};u(Fh,"RGBA8");let nl=Fh;nl.Empty=new nl(0,0,0,0);const CP=class CP extends G{static getInstance(){return this._INSTANCE||(this._INSTANCE=new CP),this._INSTANCE}constructor(){super(),this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(en.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=en.getColorMap();if(!e){this._colors=[nl.Empty],this._backgroundIsLight=!0;return}this._colors=[nl.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new nl(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};u(CP,"MinimapTokensColorTracker");let Mw=CP;Mw._INSTANCE=null;const Y2e=(()=>{const o=[];for(let e=32;e<=126;e++)o.push(e);return o.push(65533),o})(),X2e=u((o,e)=>(o-=32,o<0||o>96?e<=2?(o+96)%96:96-1:o),"getCharIndex"),K0=class K0{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=K0.soften(e,12/15),this.charDataLight=K0.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=KD(e[i]*t);return n}renderChar(e,t,n,i,s,r,a,l,d,c,h){const g=1*this.scale,f=2*this.scale,p=h?1:f;if(t+g>e.width||n+p>e.height){console.warn("bad render request outside image data");return}const b=c?this.charDataLight:this.charDataNormal,_=X2e(i,d),v=e.width*4,y=a.r,w=a.g,C=a.b,S=s.r-y,k=s.g-w,T=s.b-C,E=Math.max(r,l),D=e.data;let O=_*g*f,B=n*v+t*4;for(let H=0;H<p;H++){let F=B;for(let $=0;$<g;$++){const ee=b[O++]/255*(r/255);D[F++]=y+S*ee,D[F++]=w+k*ee,D[F++]=C+T*ee,D[F++]=E}B+=v}}blockRenderChar(e,t,n,i,s,r,a,l){const d=1*this.scale,c=2*this.scale,h=l?1:c;if(t+d>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,f=.5*(s/255),p=r.r,b=r.g,_=r.b,v=i.r-p,y=i.g-b,w=i.b-_,C=p+v*f,S=b+y*f,k=_+w*f,T=Math.max(s,a),E=e.data;let D=n*g+t*4;for(let O=0;O<h;O++){let B=D;for(let H=0;H<d;H++)E[B++]=C,E[B++]=S,E[B++]=k,E[B++]=T;D+=g}}};u(K0,"MinimapCharRenderer");let XM=K0;const Z0e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},J0e=u(o=>{const e=new Uint8ClampedArray(o.length/2);for(let t=0;t<o.length;t+=2)e[t>>1]=Z0e[o[t]]<<4|Z0e[o[t+1]]&15;return e},"decodeData"),Q0e={1:ll(()=>J0e("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:ll(()=>J0e("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))},Jp=class Jp{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Q0e[e]?n=new XM(Q0e[e](),e):n=Jp.createFromSampleData(Jp.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(const s of Y2e)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=Jp._downsample(e,t);return new XM(i,t)}static _downsampleChar(e,t,n,i,s){const r=1*s,a=2*s;let l=i,d=0;for(let c=0;c<a;c++){const h=c/a*16,g=(c+1)/a*16;for(let f=0;f<r;f++){const p=f/r*10,b=(f+1)/r*10;let _=0,v=0;for(let w=h;w<g;w++){const C=t+Math.floor(w)*3840,S=1-(w-Math.floor(w));for(let k=p;k<b;k++){const T=1-(k-Math.floor(k)),E=C+Math.floor(k)*4,D=T*S;v+=D,_+=e[E]*e[E+3]/255*D}}const y=_/v;d=Math.max(d,y),n[l++]=KD(y)}}return d}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let r=0,a=0,l=0;for(let d=0;d<96;d++)l=Math.max(l,this._downsampleChar(e,a,s,r,t)),r+=n,a+=10*4;if(l>0){const d=255/l;for(let c=0;c<i;c++)s[c]*=d}return s}};u(Jp,"MinimapCharRendererFactory");let iW=Jp;const Z2e=140,J2e=2,$0=class $0{constructor(e,t,n){const i=e.options,s=i.get(140),r=i.get(142),a=r.minimap,l=i.get(49),d=i.get(71);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(103),this.paddingTop=i.get(82).top,this.paddingBottom=i.get(82).bottom,this.showSlider=d.showSlider,this.autohide=d.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(65),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=ll(()=>iW.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=$0._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=$0._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(VRe);return n?new nl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(WRe);return t?nl._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}};u($0,"MinimapOptions");let ZM=$0;const Qp=class Qp{constructor(e,t,n,i,s,r,a,l,d){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=d}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,i,s,r,a,l,d,c,h){const g=e.pixelRatio,f=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/f),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){let k=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(k+=Math.max(0,s-e.lineHeight-e.paddingBottom));const T=Math.max(1,Math.floor(s*s/k)),E=Math.max(0,e.minimapHeight-T),D=E/(c-s),O=d*D,B=E>0,H=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),F=Math.floor(e.paddingTop/e.lineHeight);return new Qp(d,c,B,D,O,T,F,1,Math.min(a,H))}let _;if(r&&n!==a){const k=n-t+1;_=Math.floor(k*f/g)}else{const k=s/b;_=Math.floor(k*f/g)}const v=Math.floor(e.paddingTop/b);let y=Math.floor(e.paddingBottom/b);if(e.scrollBeyondLastLine){const k=s/b;y=Math.max(y,k-1)}let w;if(y>0){const k=s/b;w=(v+a+y-k-1)*f/g}else w=Math.max(0,(v+a)*f/g-_);w=Math.min(e.minimapHeight-_,w);const C=w/(c-s),S=d*C;if(p>=v+a+y){const k=w>0;return new Qp(d,c,k,C,S,_,v,1,a)}else{let k;t>1?k=t+v:k=Math.max(1,d/b);let T,E=Math.max(1,Math.floor(k-S*g/f));E<v?(T=v-E+1,E=1):(T=0,E=Math.max(1,E-v)),h&&h.scrollHeight===c&&(h.scrollTop>d&&(E=Math.min(E,h.startLineNumber),T=Math.max(T,h.topPaddingLineCount)),h.scrollTop<d&&(E=Math.max(E,h.startLineNumber),T=Math.min(T,h.topPaddingLineCount)));const D=Math.min(a,E-T+p-1),O=(d-i)/b;let B;return d>=e.paddingTop?B=(t-E+T+O)*f/g:B=d/e.paddingTop*(T+O)*f/g,new Qp(d,c,!0,C,B,_,T,E,D)}}};u(Qp,"MinimapLayout");let sW=Qp;const Ioe=class Ioe{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};u(Ioe,"MinimapLine");let Cb=Ioe;Cb.INVALID=new Cb(-1);const Noe=class Noe{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new BM(()=>Cb.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}};u(Noe,"RenderData");let JM=Noe;const SP=class SP{constructor(e,t,n,i){this._backgroundFillData=SP._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let d=0;for(let c=0;c<t;c++)for(let h=0;h<e;h++)l[d]=i,l[d+1]=s,l[d+2]=r,l[d+3]=a,d+=4;return l}};u(SP,"MinimapBuffers");let oW=SP;const q0=class q0{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:i}=aD.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/i,r=s/2;if(!n||n.minimapLines.length===0){const _=[];if(_[0]=1,i>1){for(let v=0,y=i-1;v<y;v++)_[v]=Math.round(v*s+r);_[i-1]=t}return[new q0(s,_),[]]}const a=n.minimapLines,l=a.length,d=[];let c=0,h=0,g=1;const f=10;let p=[],b=null;for(let _=0;_<i;_++){const v=Math.max(g,Math.round(_*s)),y=Math.max(v,Math.round((_+1)*s));for(;c<l&&a[c]<v;){if(p.length<f){const C=c+1+h;b&&b.type==="deleted"&&b._oldIndex===c-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:c,deleteFromLineNumber:C,deleteToLineNumber:C},p.push(b)),h--}c++}let w;if(c<l&&a[c]<=y)w=a[c],c++;else if(_===0?w=1:_+1===i?w=t:w=Math.round(_*s+r),p.length<f){const C=c+1+h;b&&b.type==="inserted"&&b._i===_-1?b.insertToLineNumber++:(b={type:"inserted",_i:_,insertFromLineNumber:C,insertToLineNumber:C},p.push(b)),h++}d[_]=w,g=w}if(p.length<f)for(;c<l;){const _=c+1+h;b&&b.type==="deleted"&&b._oldIndex===c-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:c,deleteFromLineNumber:_,deleteToLineNumber:_},p.push(b)),h--,c++}else p=[{type:"flush"}];return[new q0(s,d),p]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}};u(q0,"MinimapSamplingState");let QM=q0;const Roe=class Roe extends ls{constructor(e){super(e),this.tokensColorTracker=Mw.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new ZM(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=QM.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new aW(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new ZM(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=QM.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let s=0,r=t-e+1;s<r;s++)n[s]?i[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new xe(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new L(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new L(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getMinimapDecorationsInRange(n);if(this._samplingState){const s=[];for(const r of i){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),d=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new dM(new L(l,a.startColumn,d,a.endColumn),r.options))}return s}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new L(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}};u(Roe,"Minimap");let rW=Roe;const Y0=class Y0 extends G{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(U0e),this._domNode=ht(document.createElement("div")),kr.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ht(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ht(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ht(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ht(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ht(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Jt(this._domNode.domNode,pe.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const d=Cn(this._slider.domNode),c=d.top+d.height/2;this._startSliderDragging(n,c,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(r/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new wu,this._sliderPointerDownListener=Jt(this._slider.domNode,pe.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=oi.addTarget(this._domNode.domNode),this._sliderTouchStartListener=q(this._domNode.domNode,Nt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=q(this._domNode.domNode,Nt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Jt(this._domNode.domNode,Nt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const s=u((r,a)=>{const l=Cn(this._domNode.domNode),d=Math.min(Math.abs(a-i),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Si&&d>Z2e){this._model.setScrollTop(n.scrollTop);return}const c=r-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(c))},"handlePointerMove");e.pageY!==t&&s(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>s(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new oW(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)===null||n===void 0||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(U0e),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=sW.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(L.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((g,f)=>(g.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,i,s);const c=new eA(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,c,e,r),this._renderDecorationsLineHighlights(d,n,c,e,r);const h=new eA(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,h,e,r,l,a,i),this._renderDecorationsHighlights(d,n,h,e,r,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const d=i.intersectWithViewport(l);if(!d)continue;const[c,h]=d;for(let p=c;p<=h;p++)n.set(p,!0);const g=i.getYForLineNumber(c,s),f=i.getYForLineNumber(h,s);a>=g||(a>r&&e.fillRect(ac,r,e.canvas.width,a-r),r=g),a=f}a>r&&e.fillRect(ac,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,i,s){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],d=l.options.minimap;if(!d||d.position!==ho.Inline)continue;const c=i.intersectWithViewport(l.range);if(!c)continue;const[h,g]=c,f=d.getColor(this._theme.value);if(!f||f.isTransparent())continue;let p=r.get(f.toString());p||(p=f.transparent(.5).toString(),r.set(f.toString(),p)),e.fillStyle=p;for(let b=h;b<=g;b++){if(n.has(b))continue;n.set(b,!0);const _=i.getYForLineNumber(h,s);e.fillRect(ac,_,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const d of t){const c=i.intersectWithViewport(d);if(!c)continue;const[h,g]=c;for(let f=h;f<=g;f++)this.renderDecorationOnLine(e,n,d,this._selectionColor,i,f,s,s,r,a,l)}}_renderDecorationsHighlights(e,t,n,i,s,r,a,l){for(const d of t){const c=d.options.minimap;if(!c)continue;const h=i.intersectWithViewport(d.range);if(!h)continue;const[g,f]=h,p=c.getColor(this._theme.value);if(!(!p||p.isTransparent()))for(let b=g;b<=f;b++)switch(c.position){case ho.Inline:this.renderDecorationOnLine(e,n,d.range,p,i,b,s,s,r,a,l);continue;case ho.Gutter:{const _=i.getYForLineNumber(b,s),v=2;this.renderDecoration(e,p,v,_,J2e,s);continue}}}}renderDecorationOnLine(e,t,n,i,s,r,a,l,d,c,h){const g=s.getYForLineNumber(r,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:p}=n,b=f===r?n.startColumn:1,_=p===r?n.endColumn:this._model.getLineMaxColumn(r),v=this.getXOffsetForPosition(t,r,b,d,c,h),y=this.getXOffsetForPosition(t,r,_,d,c,h);this.renderDecoration(e,i,v,g,y-v,a)}getXOffsetForPosition(e,t,n,i,s,r){if(n===1)return ac;if((n-1)*s>=r)return r;let l=e.get(t);if(!l){const d=this._model.getLineContent(t);l=[ac];let c=ac;for(let h=1;h<d.length+1;h++){const g=d.charCodeAt(h-1),f=g===9?i*s:hu(g)?2*s:s,p=c+f;if(p>=r){l[h]=r;break}l[h]=p,c=p}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,i,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,r)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ee=this._lastRenderData._get();return new JM(e,ee.imageData,ee.lines)}const s=this._getBuffer();if(!s)return null;const[r,a,l]=Y0._renderUntouchedLines(s,e.topPaddingLineCount,t,n,i,this._lastRenderData),d=this._model.getMinimapLinesRenderingData(t,n,l),c=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,b=p.backgroundIsLight(),_=this._model.options.renderMinimap,v=this._model.options.charRenderer(),y=this._model.options.fontScale,w=this._model.options.minimapCharWidth,S=(_===1?2:2+1)*y,k=i>S?Math.floor((i-S)/2):0,T=g.a/255,E=new nl(Math.round((g.r-h.r)*T+h.r),Math.round((g.g-h.g)*T+h.g),Math.round((g.b-h.b)*T+h.b),255);let D=e.topPaddingLineCount*i;const O=[];for(let ee=0,ge=n-t+1;ee<ge;ee++)l[ee]&&Y0._renderLine(s,E,g.a,b,_,w,p,f,v,D,k,c,d[ee],y,i),O[ee]=new Cb(D),D+=i;const B=r===-1?0:r,F=(a===-1?s.height:a)-B;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,B,s.width,F),new JM(e,s,O)}static _renderUntouchedLines(e,t,n,i,s,r){const a=[];if(!r){for(let D=0,O=i-n+1;D<O;D++)a[D]=!0;return[-1,-1,a]}const l=r._get(),d=l.imageData.data,c=l.rendLineNumberStart,h=l.lines,g=h.length,f=e.width,p=e.data,b=(i-n+1)*s*f*4;let _=-1,v=-1,y=-1,w=-1,C=-1,S=-1,k=t*s;for(let D=n;D<=i;D++){const O=D-n,B=D-c,H=B>=0&&B<g?h[B].dy:-1;if(H===-1){a[O]=!0,k+=s;continue}const F=H*f*4,$=(H+s)*f*4,ee=k*f*4,ge=(k+s)*f*4;w===F&&S===ee?(w=$,S=ge):(y!==-1&&(p.set(d.subarray(y,w),C),_===-1&&y===0&&y===C&&(_=w),v===-1&&w===b&&y===C&&(v=y)),y=F,w=$,C=ee,S=ge),a[O]=!1,k+=s}y!==-1&&(p.set(d.subarray(y,w),C),_===-1&&y===0&&y===C&&(_=w),v===-1&&w===b&&y===C&&(v=y));const T=_===-1?-1:_/(f*4),E=v===-1?-1:v/(f*4);return[T,E,a]}static _renderLine(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b){const _=f.content,v=f.tokens,y=e.width-r,w=b===1;let C=ac,S=0,k=0;for(let T=0,E=v.getCount();T<E;T++){const D=v.getEndOffset(T),O=v.getForeground(T),B=a.getColor(O);for(;S<D;S++){if(C>y)return;const H=_.charCodeAt(S);if(H===9){const F=g-(S+k)%g;k+=F-1,C+=F*r}else if(H===32)C+=r;else{const F=hu(H)?2:1;for(let $=0;$<F;$++)if(s===2?d.blockRenderChar(e,C,c+h,B,l,t,n,w):d.renderChar(e,C,c+h,H,B,l,t,n,p,i,w),C+=r,C>y)return}}}}};u(Y0,"InnerMinimap");let aW=Y0;const Poe=class Poe{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};u(Poe,"ContiguousLineMap");let eA=Poe;const Foe=class Foe extends ls{constructor(e){super(e);const n=this._context.configuration.options.get(142);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=ht(document.createElement("div")),kr.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(142);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=ht(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?(this._updateMaxMinWidth(),!1):(n.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let n=0;const i=Object.keys(this._widgets);for(let s=0,r=i.length;s<r;s++){const a=i[s],d=(t=(e=this._widgets[a].widget).getMinContentWidthInPx)===null||t===void 0?void 0:t.call(e);typeof d<"u"&&(n=Math.max(n,d))}this._context.viewLayout.setOverlayWidgetsMinWidth(n)}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}};u(Foe,"ViewOverlayWidgets");let lW=Foe;const Ooe=class Ooe{constructor(e,t){const n=e.options;this.lineHeight=n.get(65),this.pixelRatio=n.get(140),this.overviewRulerLanes=n.get(81),this.renderBorder=n.get(80);const i=t.getColor(b2e);this.borderColor=i?i.toString():null,this.hideCursor=n.get(58);const s=t.getColor(vxe);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const r=n.get(71),a=r.enabled,l=r.side,d=t.getColor(_2e),c=en.getDefaultBackground();d?this.backgroundColor=d:a&&l==="right"?this.backgroundColor=c:this.backgroundColor=null;const g=n.get(142).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,p]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=p}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),r=Math.floor(i/3),a=i-s-r,l=e,d=l+s,c=l+s+a;return[[0,l,d,l,c,l,d,l],[0,s,a,s+a,r,s+a+r,a+r,s+a+r]]}else if(n===2){const s=Math.floor(i/2),r=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,r,s+r,s+r,s+r]]}else{const s=e,r=i;return[[0,s,s,s,s,s,s,s],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&K.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}};u(Ooe,"Settings");let dW=Ooe;const Hoe=class Hoe extends ls{constructor(e){super(e),this._domNode=ht(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=en.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new dW(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(W.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?K.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const t=this._settings.canvasWidth,n=this._settings.canvasHeight,i=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),a=n/r,l=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),d=6*this._settings.pixelRatio|0,c=d/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=K.Format.CSS.formatHexA(e),h.fillRect(0,0,t,n)):(h.clearRect(0,0,t,n),h.fillStyle=K.Format.CSS.formatHexA(e),h.fillRect(0,0,t,n)):h.clearRect(0,0,t,n);const g=this._settings.x,f=this._settings.w;l.sort(cM.cmp);for(const p of l){const b=p.color,_=p.data;h.fillStyle=b;let v=0,y=0,w=0;for(let C=0,S=_.length/3;C<S;C++){const k=_[3*C],T=_[3*C+1],E=_[3*C+2];let D=s.getVerticalOffsetForLineNumber(T)*a|0,O=(s.getVerticalOffsetForLineNumber(E)+i)*a|0;if(O-D<d){let H=(D+O)/2|0;H<c?H=c:H+c>n&&(H=n-c),D=H-c,O=H+c}D>w+1||k!==v?(C!==0&&h.fillRect(g[v],y,f[v],w-y),v=k,y=D,w=O):O>w&&(w=O)}h.fillRect(g[v],y,f[v],w-y)}if(!this._settings.hideCursor&&this._settings.cursorColor){const p=2*this._settings.pixelRatio|0,b=p/2|0,_=this._settings.x[7],v=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let y=-100,w=-100;for(let C=0,S=this._cursorPositions.length;C<S;C++){const k=this._cursorPositions[C];let T=s.getVerticalOffsetForLineNumber(k.lineNumber)*a|0;T<b?T=b:T+b>n&&(T=n-b);const E=T-b,D=E+p;E>w+1?(C!==0&&h.fillRect(_,y,v,w-y),y=E,w=D):D>w&&(w=D)}h.fillRect(_,y,v,w-y)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,n),h.stroke(),h.moveTo(0,0),h.lineTo(t,0),h.stroke())}};u(Hoe,"DecorationsOverviewRuler");let cW=Hoe;const Voe=class Voe{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}};u(Voe,"ColorZone");let tA=Voe;const Woe=class Woe{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}};u(Woe,"OverviewRulerZone");let Su=Woe;const Boe=class Boe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Su.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,d=this._zones.length;l<d;l++){const c=this._zones[l];if(!e){const C=c.getColorZones();if(C){a.push(C);continue}}const h=this._getVerticalOffsetForLine(c.startLineNumber),g=c.heightInLines===0?this._getVerticalOffsetForLine(c.endLineNumber)+t:h+c.heightInLines*t,f=Math.floor(s*h),p=Math.floor(s*g);let b=Math.floor((f+p)/2),_=p-b;_<r&&(_=r),b-_<0&&(b=_),b+_>n&&(b=n-_);const v=c.color;let y=this._color2Id[v];y||(y=++this._lastAssignedId,this._color2Id[v]=y,this._id2Color[y]=v);const w=new tA(b-_,b+_,y);c.setColorZone(w),a.push(w)}return this._colorZonesInvalid=!1,a.sort(tA.compare),a}};u(Boe,"OverviewZoneManager");let uW=Boe;const Uoe=class Uoe extends Fg{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=ht(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new uW(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(65)),this._zoneManager.setPixelRatio(n.get(140)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(65)&&(this._zoneManager.setLineHeight(t.get(65)),this._render()),e.hasChanged(140)&&(this._zoneManager.setPixelRatio(t.get(140)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,r=0,a=0;for(const l of t){const d=l.colorId,c=l.from,h=l.to;d!==s?(e.fillRect(0,r,i,a-r),s=d,e.fillStyle=n[s],r=c,a=h):a>=c?a=Math.max(a,h):(e.fillRect(0,r,i,a-r),r=c,a=h)}e.fillRect(0,r,i,a-r)}};u(Uoe,"OverviewRuler");let hW=Uoe;const zoe=class zoe extends ls{constructor(e){super(e),this.domNode=ht(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),s=i;let r=t-e;for(;r>0;){const a=ht(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}};u(zoe,"Rulers");let gW=zoe;const Goe=class Goe extends ls{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(101);this._useShadows=n.useShadows,this._domNode=ht(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(142);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(101);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}};u(Goe,"ScrollDecorationViewPart");let fW=Goe;const joe=class joe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}};u(joe,"HorizontalRangeWithStyle");let pW=joe;const Koe=class Koe{constructor(e,t){this.lineNumber=e,this.ranges=t}};u(Koe,"LineVisibleRangesWithStyle");let mW=Koe;function Q2e(o){return new pW(o)}u(Q2e,"toStyledRange");function ePe(o){return new mW(o.lineNumber,o.ranges.map(Q2e))}u(ePe,"toStyled");const Zn=class Zn extends Vd{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(65),this._roundedSelection=t.get(99),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(65),this._roundedSelection=t.get(99),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!s&&d<n.length;d++)n[d].lineNumber===a&&(s=n[d].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let d=n.length-1;!r&&d>=0;d--)n[d].lineNumber===l&&(r=n[d].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const d=t[a].ranges[0],c=d.left,h=d.left+d.width,g={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const p=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;RE(c-p)<i?g.top=2:c>p&&(g.top=1),RE(h-b)<i?f.top=2:p<h&&h<b&&(f.top=1)}else s&&(g.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const p=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;RE(c-p)<i?g.bottom=2:p<c&&c<b&&(g.bottom=1),RE(h-b)<i?f.bottom=2:h<b&&(f.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);d.startStyle=g,d.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(ePe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,d=i[i.length-1].lineNumber;for(let c=0,h=i.length;c<h;c++){const g=i[c],f=g.lineNumber,p=f-t,b=n&&(f===d||f===l)?a:r,_=n&&f===l?1:0;let v="",y="";for(let w=0,C=g.ranges.length;w<C;w++){const S=g.ranges[w];if(s){const T=S.startStyle,E=S.endStyle;if(T.top===1||T.bottom===1){v+=this._createSelectionPiece(_,b,Zn.SELECTION_CLASS_NAME,S.left-Zn.ROUNDED_PIECE_WIDTH,Zn.ROUNDED_PIECE_WIDTH);let D=Zn.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(D+=" "+Zn.SELECTION_TOP_RIGHT),T.bottom===1&&(D+=" "+Zn.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(_,b,D,S.left-Zn.ROUNDED_PIECE_WIDTH,Zn.ROUNDED_PIECE_WIDTH)}if(E.top===1||E.bottom===1){v+=this._createSelectionPiece(_,b,Zn.SELECTION_CLASS_NAME,S.left+S.width,Zn.ROUNDED_PIECE_WIDTH);let D=Zn.EDITOR_BACKGROUND_CLASS_NAME;E.top===1&&(D+=" "+Zn.SELECTION_TOP_LEFT),E.bottom===1&&(D+=" "+Zn.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(_,b,D,S.left+S.width,Zn.ROUNDED_PIECE_WIDTH)}}let k=Zn.SELECTION_CLASS_NAME;if(s){const T=S.startStyle,E=S.endStyle;T.top===0&&(k+=" "+Zn.SELECTION_TOP_LEFT),T.bottom===0&&(k+=" "+Zn.SELECTION_BOTTOM_LEFT),E.top===0&&(k+=" "+Zn.SELECTION_TOP_RIGHT),E.bottom===0&&(k+=" "+Zn.SELECTION_BOTTOM_RIGHT)}y+=this._createSelectionPiece(_,b,k,S.left,S.width)}e[p][0]+=v,e[p][1]+=y}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){const a=r-n;t[a]=["",""]}const s=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){s[r]=null;continue}const d=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};u(Zn,"SelectionsOverlay");let gl=Zn;gl.SELECTION_CLASS_NAME="selected-text";gl.SELECTION_TOP_LEFT="top-left-radius";gl.SELECTION_BOTTOM_LEFT="bottom-left-radius";gl.SELECTION_TOP_RIGHT="top-right-radius";gl.SELECTION_BOTTOM_RIGHT="bottom-right-radius";gl.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";gl.ROUNDED_PIECE_WIDTH=10;Ir((o,e)=>{const t=o.getColor(YNe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function RE(o){return o<0?-o:o}u(RE,"abs");const $oe=class $oe{constructor(e,t,n,i,s,r,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=i,this.height=s,this.textContent=r,this.textContentClassName=a}};u($oe,"ViewCursorRenderData");let nA=$oe;const qoe=class qoe{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(49);this._cursorStyle=t.get(27),this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(30),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ht(document.createElement("div")),this._domNode.setClassName(`cursor ${sg}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Kn(this._domNode,n),this._domNode.setDisplay("none"),this._position=new W(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(49);return this._cursorStyle=t.get(27),this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(30),this._typicalHalfwidthCharacterWidth),Kn(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,s]=tMe(n,t-1);return[new W(e,i+1),n.substring(i,s)]}_prepareRender(e){let t="",n="";const[i,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===li.Line||this._cursorStyle===li.LineThin){const g=e.visibleRangeForPosition(i);if(!g||g.outsideRenderedLine)return null;let f;this._cursorStyle===li.Line?(f=M0e(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=s,n=this._getTokenClassName(i))):f=M0e(1);let p=g.left,b=0;f>=2&&p>=1&&(b=1,p-=b);const _=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new nA(_,p,b,f,this._lineHeight,t,n)}const r=e.linesVisibleRangesForRange(new L(i.lineNumber,i.column,i.lineNumber,i.column+s.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],d=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===li.Block&&(t=s,n=this._getTokenClassName(i));let c=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===li.Underline||this._cursorStyle===li.UnderlineThin)&&(c+=this._lineHeight-2,h=2),new nA(c,l.left,0,d,h,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${sg} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}};u(qoe,"ViewCursor");let iA=qoe;const X0=class X0 extends ls{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(89),this._cursorBlinking=t.get(25),this._cursorStyle=t.get(27),this._cursorSmoothCaretAnimation=t.get(26),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new iA(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=ht(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new bo,this._cursorFlatBlinkInterval=new Dg,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(89),this._cursorBlinking=t.get(25),this._cursorStyle=t.get(27),this._cursorSmoothCaretAnimation=t.get(26),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const i=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let r=0;r<s;r++){const a=new iA(this._context);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let r=0;r<s;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],i)}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=u(n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1},"shouldRender");if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},X0.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},X0.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case li.Line:e+=" cursor-line-style";break;case li.Block:e+=" cursor-block-style";break;case li.Underline:e+=" cursor-underline-style";break;case li.LineThin:e+=" cursor-line-thin-style";break;case li.BlockOutline:e+=" cursor-block-outline-style";break;case li.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};u(X0,"ViewCursors");let sA=X0;sA.BLINK_INTERVAL=500;Ir((o,e)=>{const t=o.getColor(vxe);if(t){let n=o.getColor(s2e);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),tl(o.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const iH=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc$1"),Yoe=class Yoe extends ls{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(142);this._lineHeight=t.get(65),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=ht(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ht(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],d=this._zones[l],c=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=c.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==c.afterViewLineNumber||h.height!==c.heightInPx)&&(i.changeOneWhitespace(l,c.afterViewLineNumber,c.heightInPx),this._safeCallOnComputedHeight(d.delegate,c.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(142);return this._lineHeight=t.get(65),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(65)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,n;return(n=(t=e.ordinal)!==null&&t!==void 0?t:e.afterColumn)!==null&&n!==void 0?n:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new W(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{s&&(t=this._removeZone(n,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(n,s)||t)}};tPe(e,i),i.addZone=iH,i.removeZone=iH,i.layoutZone=iH}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:ht(t.domNode),marginDomNode:t.marginDomNode?ht(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Be(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Be(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],d=this._zones[l];let c=0,h=0,g="none";n.hasOwnProperty(l)?(c=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,g="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(c),d.domNode.setHeight(h),d.domNode.setDisplay(g),d.marginDomNode&&(d.marginDomNode.setTop(c),d.marginDomNode.setHeight(h),d.marginDomNode.setDisplay(g))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};u(Yoe,"ViewZones");let bW=Yoe;function tPe(o,e){try{return o(e)}catch(t){Be(t)}}u(tPe,"safeInvoke1Arg");const Xoe=class Xoe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}};u(Xoe,"EditorTheme");let _W=Xoe;const Zoe=class Zoe{constructor(e,t,n){this.configuration=e,this.theme=new _W(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}};u(Zoe,"ViewContext");let vW=Zoe;const Joe=class Joe{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new L(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}};u(Joe,"ViewportData");let yW=Joe;const Qoe=class Qoe extends ls{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=ht(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(142),i=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);const s=n.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let n=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let r=this.blocks[n];r||(r=this.blocks[n]=ht(document.createElement("div")),this.domNode.appendChild(r));let a,l;s.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),l=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[d,c,h,g]=(t=s.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-g),r.setWidth(this.contentWidth+g+c),r.setTop(a-e.scrollTop-d),r.setHeight(l-a+d+h),n++}for(let s=n;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=n}};u(Qoe,"BlockDecorations");let wW=Qoe;const ere=class ere extends Vd{constructor(e){super(),this._context=e,this._options=new oA(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new oA(this._context.configuration);return this._options.equals(t)?e.hasChanged(142):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,s=new Array(i);for(let a=0;a<i;a++)s[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,d=r.data[l];let c=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const g of h){if(g.endLineNumber<a||g.startLineNumber>a)continue;const f=g.startLineNumber===a?g.startColumn:d.minColumn,p=g.endLineNumber===a?g.endColumn:d.maxColumn;f<p&&(c||(c=[]),c.push(new rM(f-1,p-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,c,d)}}_applyRenderWhitespace(e,t,n,i){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&i.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(wd),r=this._options.renderWithSVG,a=i.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),d=i.continuesWithWrappedLine,c=i.minColumn-1,h=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,p=this._options.middotWidth,b=this._options.wsmiddotWidth,_=this._options.spaceWidth,v=Math.abs(b-_),y=Math.abs(p-_),w=v<y?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let S="",k=!1,T=$i(a),E;T===-1?(k=!0,T=l,E=l):E=ha(a);let D=0,O=n&&n[D],B=0;for(let H=c;H<l;H++){const F=a.charCodeAt(H);if(O&&H>=O.endOffset&&(D++,O=n&&n[D]),F!==9&&F!==32||g&&!k&&H<=E)continue;if(h&&H>=T&&H<=E&&F===32){const ee=H-1>=0?a.charCodeAt(H-1):0,ge=H+1<l?a.charCodeAt(H+1):0;if(ee!==32&&ge!==32)continue}if(h&&d&&H===l-1){const ee=H-1>=0?a.charCodeAt(H-1):0;if(F===32&&ee!==32&&ee!==9)continue}if(n&&(!O||O.startOffset>H||O.endOffset<=H))continue;const $=e.visibleRangeForPosition(new W(t,H+1));$&&(r?(B=Math.max(B,$.left),F===9?S+=this._renderArrow(f,_,$.left):S+=`<circle cx="${($.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):F===9?S+=`<div class="mwh" style="left:${$.left}px;height:${f}px;">${C?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:S+=`<div class="mwh" style="left:${$.left}px;height:${f}px;">${String.fromCharCode(w)}</div>`)}return r?(B=Math.round(B+_),`<svg style="position:absolute;width:${B}px;height:${f}px" viewBox="0 0 ${B} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+S+"</svg>"):S}_renderArrow(e,t,n){const i=t/7,s=t,r=e/2,a=n,l={x:0,y:i/2},d={x:100/125*s,y:l.y},c={x:d.x-.2*d.x,y:d.y+.2*d.x},h={x:c.x+.1*d.x,y:c.y+.1*d.x},g={x:h.x+.35*d.x,y:h.y-.35*d.x},f={x:g.x,y:-g.y},p={x:h.x,y:-h.y},b={x:c.x,y:-c.y},_={x:d.x,y:-d.y},v={x:l.x,y:-l.y};return`<path d="M ${[l,d,c,h,g,f,p,b,_,v].map(C=>`${(a+C.x).toFixed(2)} ${(r+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};u(ere,"WhitespaceOverlay");let CW=ere;const tre=class tre{constructor(e){const t=e.options,n=t.get(49),i=t.get(37);i==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):i==="svg"?(this.renderWhitespace=t.get(97),this.renderWithSVG=!0):(this.renderWhitespace=t.get(97),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(65),this.stopRenderingLineAfter=t.get(115)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}};u(tre,"WhitespaceOptions");let oA=tre;var nPe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iPe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},B1;let SW=(B1=class extends Fg{constructor(e,t,n,i,s,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new xe(1,1,1,1)],this._renderAnimationFrame=null;const l=new R7(t,i,s,e);this._context=new vW(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(E7,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ht(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ht(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ht(document.createElement("div")),kr.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new z7(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new qM(this._context,this._linesContent),this._viewZones=new bW(this._context),this._viewParts.push(this._viewZones);const d=new cW(this._context);this._viewParts.push(d);const c=new fW(this._context);this._viewParts.push(c);const h=new F7(this._context);this._viewParts.push(h),h.addDynamicOverlay(new W7(this._context)),h.addDynamicOverlay(new gl(this._context)),h.addDynamicOverlay(new j7(this._context)),h.addDynamicOverlay(new U7(this._context)),h.addDynamicOverlay(new CW(this._context));const g=new O7(this._context);this._viewParts.push(g),g.addDynamicOverlay(new B7(this._context)),g.addDynamicOverlay(new nW(this._context)),g.addDynamicOverlay(new tW(this._context)),g.addDynamicOverlay(new Tw(this._context)),this._glyphMarginWidgets=new Z7(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new vb(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(g.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new H7(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new sA(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new lW(this._context),this._viewParts.push(this._overlayWidgets);const p=new gW(this._context);this._viewParts.push(p);const b=new wW(this._context);this._viewParts.push(b);const _=new rW(this._context);if(this._viewParts.push(_),d){const v=this._scrollbar.getOverviewRulerLayoutInfo();v.parent.insertBefore(d.getDomNode(),v.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(p.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(b.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new C7(this._context,l,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._shouldRecomputeGlyphMarginLanes&&(this._shouldRecomputeGlyphMarginLanes=!1,this._context.configuration.setGlyphMarginDecorationLaneCount(this._computeGlyphMarginLaneCount())),Hc.onRenderStart(),this._renderNow()}_computeGlyphMarginLaneCount(){const e=this._context.viewModel.model;let t=[];t=t.concat(e.getAllMarginDecorations().map(s=>{var r,a;const l=(a=(r=s.options.glyphMargin)===null||r===void 0?void 0:r.position)!==null&&a!==void 0?a:Sm.Left;return{range:s.range,lane:l}})),t=t.concat(this._glyphMarginWidgets.getWidgets().map(s=>({range:e.validateRange(s.preference.range),lane:s.preference.lane}))),t.sort((s,r)=>L.compareRangesUsingStarts(s.range,r.range));let n=null,i=null;for(const s of t)if(s.lane===Sm.Left&&(!n||L.compareRangesUsingEnds(n,s.range)<0)&&(n=s.range),s.lane===Sm.Right&&(!i||L.compareRangesUsingEnds(i,s.range)<0)&&(i=s.range),n&&i){if(n.endLineNumber<i.startLineNumber){n=null;continue}if(i.endLineNumber<n.startLineNumber){i=null;continue}return 2}return 1}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new n7(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new W(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(142);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(139)+" "+PM(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=hM(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){sPe(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!AZ(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new yW(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new J9(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new W(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?WM.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new hW(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,i,s,r,a,l,d;this._contentWidgets.setWidgetPosition(e.widget,(n=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&n!==void 0?n:null,(s=(i=e.position)===null||i===void 0?void 0:i.secondaryPosition)!==null&&s!==void 0?s:null,(a=(r=e.position)===null||r===void 0?void 0:r.preference)!==null&&a!==void 0?a:null,(d=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&d!==void 0?d:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}},u(B1,"View"),B1);SW=nPe([iPe(6,Pe)],SW);function sPe(o){try{return o()}catch(e){Be(e)}}u(sPe,"safeInvokeNoArg");const nre=class nre{constructor(e,t,n,i,s,r){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}};u(nre,"InternalEditorAction");let rA=nre;function xu(o){let e=0,t=0,n=0,i=0;for(let s=0,r=o.length;s<r;s++){const a=o.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<r&&o.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=o.length),[e,t,o.length-n,i]}u(xu,"countEOL");const ire=class ire{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}};u(ire,"BracketInfo");let aA=ire;const sre=class sre{constructor(e,t,n,i,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}};u(sre,"BracketPairInfo");let xW=sre;const ore=class ore extends xW{constructor(e,t,n,i,s,r,a){super(e,t,n,i,s,r),this.minVisibleColumnIndentation=a}};u(ore,"BracketPairWithMinIndentationInfo");let TW=ore;const rre=class rre{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}};u(rre,"LengthObj");let Aw=rre;Aw.zero=new Aw(0,0);function oPe(o,e,t,n){return o!==t?wn(t-o,n):wn(0,n-e)}u(oPe,"lengthDiff");const os=0;function lA(o){return o===0}u(lA,"lengthIsZero");const co=Math.pow(2,26);function wn(o,e){return o*co+e}u(wn,"toLength");function Vo(o){const e=o,t=Math.floor(e/co),n=e-t*co;return new Aw(t,n)}u(Vo,"lengthToObj");function rPe(o){return Math.floor(o/co)}u(rPe,"lengthGetLineCount");function nn(o,e){let t=o+e;return e>=co&&(t=t-o%co),t}u(nn,"lengthAdd");function aPe(o,e){return o.reduce((t,n)=>nn(t,e(n)),os)}u(aPe,"sumLengths");function kxe(o,e){return o===e}u(kxe,"lengthEquals");function Iw(o,e){const t=o,n=e;if(n-t<=0)return os;const s=Math.floor(t/co),r=Math.floor(n/co),a=n-r*co;if(s===r){const l=t-s*co;return wn(0,a-l)}else return wn(r-s,a)}u(Iw,"lengthDiffNonNegative");function Om(o,e){return o<e}u(Om,"lengthLessThan");function Hm(o,e){return o<=e}u(Hm,"lengthLessThanEqual");function mv(o,e){return o>=e}u(mv,"lengthGreaterThanEqual");function xp(o){return wn(o.lineNumber-1,o.column-1)}u(xp,"positionToLength");function ag(o,e){const t=o,n=Math.floor(t/co),i=t-n*co,s=e,r=Math.floor(s/co),a=s-r*co;return new L(n+1,i+1,r+1,a+1)}u(ag,"lengthsToRange");function lPe(o){const e=cl(o);return wn(e.length-1,e[e.length-1].length)}u(lPe,"lengthOfString");const xP=class xP{static fromModelContentChanges(e){return e.map(n=>{const i=L.lift(n.range);return new xP(xp(i.getStartPosition()),xp(i.getEndPosition()),lPe(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${Vo(this.startOffset)}...${Vo(this.endOffset)}) -> ${Vo(this.newLength)}`}};u(xP,"TextEditInfo");let Sd=xP;const are=class are{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>EW.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Iw(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?wn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):wn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Vo(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?wn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):wn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Hm(n,e)){this.nextEditIdx++;const i=Vo(n),s=Vo(this.translateOldToCur(t.endOffsetBeforeObj)),r=i.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}};u(are,"BeforeEditPositionMapper");let LW=are;const TP=class TP{static from(e){return new TP(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=Vo(t),this.endOffsetAfterObj=Vo(nn(e,n)),this.offsetObj=Vo(e)}};u(TP,"TextEditInfoCache");let EW=TP;const Hk=[],Kr=class Kr{static create(e,t){if(e<=128&&t.length===0){let n=Kr.cache[e];return n||(n=new Kr(e,t),Kr.cache[e]=n),n}return new Kr(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const r=1<<n|this.items;return r===this.items?this:Kr.create(r,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(n&31),Kr.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===Hk&&e.additionalItems===Hk)return t===this.items?this:t===e.items?e:Kr.create(t,Hk);const n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const s=this.additionalItems[i]||0,r=e.additionalItems[i]||0;n.push(s|r)}return Kr.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};u(Kr,"SmallImmutableSet");let Ki=Kr;Ki.cache=new Array(129);Ki.empty=Ki.create(0,Hk);const eye={getKey(o){return o}},lre=class lre{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}};u(lre,"DenseKeyProvider");let dA=lre;const dre=class dre{get length(){return this._length}constructor(e){this._length=e}};u(dre,"BaseAstNode");let Nw=dre;const Z0=class Z0 extends Nw{static create(e,t,n){let i=e.length;return t&&(i=nn(i,t.length)),n&&(i=nn(i,n.length)),new Z0(i,e,t,n,t?t.missingOpeningBracketIds:Ki.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Z0(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(nn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}};u(Z0,"PairAstNode");let cA=Z0;const cre=class cre extends Nw{static create23(e,t,n,i=!1){let s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=nn(s,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=nn(s,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new kW(s,e.listHeight+1,e,t,n,r):new Rw(s,e.listHeight+1,e,t,n,r)}static getEmpty(){return new DW(os,0,[],Ki.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new An;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const s=this.getChild(i);t=nn(t,s.length),n=n.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const r=this.getChild(s);r&&(n=Math.min(n,r.computeMinIndentation(i,t)),i=nn(i,r.length))}return this.cachedMinIndentation=n,n}};u(cre,"ListAstNode");let Dr=cre;const LP=class LP extends Dr{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,i,s,r){super(e,t,r),this._item1=n,this._item2=i,this._item3=s}deepClone(){return new LP(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}};u(LP,"TwoThreeListAstNode");let Rw=LP;const ure=class ure extends Rw{toMutable(){return new Rw(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}};u(ure,"Immutable23ListAstNode");let kW=ure;const EP=class EP extends Dr{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,i){super(e,t,i),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new EP(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}};u(EP,"ArrayListAstNode");let uA=EP;const hre=class hre extends uA{toMutable(){return new uA(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}};u(hre,"ImmutableArrayListAstNode");let DW=hre;const dPe=[],gre=class gre extends Nw{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return dPe}deepClone(){return this}};u(gre,"ImmutableLeafAstNode");let Pw=gre;const fre=class fre extends Pw{get kind(){return 0}get missingOpeningBracketIds(){return Ki.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Vo(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,s=rPe(nn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;const c=Rn.visibleColumnFromColumn(d,l,t.getOptions().tabSize);r=Math.min(r,c)}return r}};u(fre,"TextAstNode");let ld=fre;const kP=class kP extends Pw{static create(e,t,n){return new kP(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Ki.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};u(kP,"BracketAstNode");let hA=kP;const pre=class pre extends Pw{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};u(pre,"InvalidBracketAstNode");let MW=pre;var U1;let Nc=(U1=class{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}},u(U1,"Token"),U1);const mre=class mre{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new AW(this.textModel,this.bracketTokens),this._offset=os,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return wn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=nn(this._offset,e);const t=Vo(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=nn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}};u(mre,"TextBufferTokenizer");let gA=mre;const bre=class bre{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const s=this.lineTokens,r=s.getCount();let a=null;if(this.lineTokenOffset<r){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const d=ii.getTokenType(l)===0,c=ii.containsBalancedBrackets(l),h=s.getEndOffset(this.lineTokenOffset);if(c&&d&&this.lineCharOffset<h){const g=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),p=this.bracketTokens.getSingleLanguageBracketTokens(g),b=p.regExpGlobal;if(b){b.lastIndex=0;const _=b.exec(f);_&&(a=p.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=oPe(e,t,this.lineIdx,this.lineCharOffset);return new Nc(i,0,-1,Ki.getEmpty(),new ld(i))}};u(bre,"NonPeekableTextBufferTokenizer");let AW=bre;const _re=class _re{constructor(e,t){this.text=e,this._offset=os,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,s=[];let r,a=0,l=0,d=0,c=0;const h=[];for(let p=0;p<60;p++)h.push(new Nc(wn(0,p),0,-1,Ki.getEmpty(),new ld(wn(0,p))));const g=[];for(let p=0;p<60;p++)g.push(new Nc(wn(1,p),0,-1,Ki.getEmpty(),new ld(wn(1,p))));if(i)for(i.lastIndex=0;(r=i.exec(e))!==null;){const p=r.index,b=r[0];if(b===`
`)a++,l=p+1;else{if(d!==p){let _;if(c===a){const v=p-d;if(v<h.length)_=h[v];else{const y=wn(0,v);_=new Nc(y,0,-1,Ki.getEmpty(),new ld(y))}}else{const v=a-c,y=p-l;if(v===1&&y<g.length)_=g[y];else{const w=wn(v,y);_=new Nc(w,0,-1,Ki.getEmpty(),new ld(w))}}s.push(_)}s.push(t.getToken(b)),d=p+b.length,c=a}}const f=e.length;if(d!==f){const p=c===a?wn(0,f-d):wn(a-c,f-l);s.push(new Nc(p,0,-1,Ki.getEmpty(),new ld(p)))}this.length=wn(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new $V}};u(_re,"FastTokenizer");let IW=_re;const DP=class DP{static createFromLanguage(e,t){function n(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}u(n,"getId");const i=new Map;for(const s of e.bracketsNew.openingBrackets){const r=wn(0,s.bracketText.length),a=n(s),l=Ki.getEmpty().add(a,eye);i.set(s.bracketText,new Nc(r,1,a,l,hA.create(r,s,l)))}for(const s of e.bracketsNew.closingBrackets){const r=wn(0,s.bracketText.length);let a=Ki.getEmpty();const l=s.getOpeningBrackets();for(const d of l)a=a.add(n(d),eye);i.set(s.bracketText,new Nc(r,2,n(l[0]),a,hA.create(r,s,a)))}return new DP(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>cPe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};u(DP,"BracketTokens");let NW=DP;function cPe(o){let e=po(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}u(cPe,"prepareBracketForRegExp");const vre=class vre{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=NW.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}};u(vre,"LanguageAgnosticBracketTokens");let fA=vre;function uPe(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;const r=e,a=o[r].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-r>=2?Dxe(r===0&&e===o.length?o:o.slice(r,e),!1):o[r]}u(t,"readNode");let n=t(),i=t();if(!i)return n;for(let r=t();r;r=t())tye(n,i)<=tye(i,r)?(n=sH(n,i),i=r):i=sH(i,r);return sH(n,i)}u(uPe,"concat23Trees");function Dxe(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const s=i<<1;o[i]=Dr.create23(o[s],o[s+1],s+3===t?o[s+2]:null,e)}t=n}return Dr.create23(o[0],o[1],t>=3?o[2]:null,e)}u(Dxe,"concat23TreesOfSameHeight");function tye(o,e){return Math.abs(o.listHeight-e.listHeight)}u(tye,"heightDiff");function sH(o,e){return o.listHeight===e.listHeight?Dr.create23(o,e,null,!1):o.listHeight>e.listHeight?hPe(o,e):gPe(e,o)}u(sH,"concat$1");function hPe(o,e){o=o.toMutable();let t=o;const n=[];let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=Dr.create23(r.unappendChild(),i,null,!1):(r.appendChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Dr.create23(o,i,null,!1):o}u(hPe,"append");function gPe(o,e){o=o.toMutable();let t=o;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let s=n.length-1;s>=0;s--){const r=n[s];i?r.childrenLength>=3?i=Dr.create23(i,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Dr.create23(i,o,null,!1):o}u(gPe,"prepend");const yre=class yre{constructor(e){this.lastOffset=os,this.nextNodes=[e],this.offsets=[os],this.idxs=[]}readLongestNodeAt(e,t){if(Om(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=B_(this.nextNodes);if(!n)return;const i=B_(this.offsets);if(Om(e,i))return;if(Om(i,e))if(nn(i,n.length)<=e)this.nextNodeAfterCurrent();else{const s=oH(n);s!==-1?(this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const s=oH(n);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(s)),this.offsets.push(i),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=B_(this.offsets),t=B_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=B_(this.nextNodes),i=oH(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(nn(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}};u(yre,"NodeReader");let RW=yre;function oH(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}u(oH,"getNextChildIdx");function B_(o){return o.length>0?o[o.length-1]:void 0}u(B_,"lastOrUndefined");function PW(o,e,t,n){return new FW(o,e,t,n).parseDocument()}u(PW,"parseDocument");const wre=class wre{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new RW(n):void 0,this.positionMapper=new LW(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ki.getEmpty(),0);return e||(e=Dr.getEmpty()),e}parseList(e,t){const n=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||n.push(s)}return this.oldNodeReader?uPe(n):Dxe(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!lA(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!Om(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new MW(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new ld(n.length);const i=e.merge(n.bracketIds),s=this.parseList(i,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===n.bracketId||r.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),cA.create(n.astNode,s,r.astNode)):cA.create(n.astNode,s,null)}default:throw new Error("unexpected")}}};u(wre,"Parser");let FW=wre;function pA(o,e){if(o.length===0)return e;if(e.length===0)return o;const t=new pa(nye(o)),n=nye(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function s(d){if(d===void 0){const h=t.takeWhile(g=>!0)||[];return i&&h.unshift(i),h}const c=[];for(;i&&!lA(d);){const[h,g]=i.splitAt(d);c.push(h),d=Iw(h.lengthAfter,d),i=g??t.dequeue()}return lA(d)||c.push(new Fw(!1,d,d)),c}u(s,"nextS0ToS1MapWithS1LengthOf");const r=[];function a(d,c,h){if(r.length>0&&kxe(r[r.length-1].endOffset,d)){const g=r[r.length-1];r[r.length-1]=new Sd(g.startOffset,c,nn(g.newLength,h))}else r.push({startOffset:d,endOffset:c,newLength:h})}u(a,"pushEdit");let l=os;for(const d of n){const c=s(d.lengthBefore);if(d.modified){const h=aPe(c,f=>f.lengthBefore),g=nn(l,h);a(l,g,d.lengthAfter),l=g}else for(const h of c){const g=l;l=nn(l,h.lengthBefore),h.modified&&a(g,l,h.lengthAfter)}}return r}u(pA,"combineTextEditInfos");const Oh=class Oh{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=Iw(e,this.lengthAfter);return kxe(t,os)?[this,void 0]:this.modified?[new Oh(this.modified,this.lengthBefore,e),new Oh(this.modified,os,t)]:[new Oh(this.modified,e,e),new Oh(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Vo(this.lengthBefore)} -> ${Vo(this.lengthAfter)}`}};u(Oh,"LengthMapping");let Fw=Oh;function nye(o){const e=[];let t=os;for(const n of o){const i=Iw(t,n.startOffset);lA(i)||e.push(new Fw(!1,i,i));const s=Iw(n.startOffset,n.endOffset);e.push(new Fw(!0,s,n.newLength)),t=n.endOffset}return e}u(nye,"toLengthMapping");const Cre=class Cre extends G{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new V,this.denseKeyProvider=new dA,this.brackets=new fA(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new IW(this.textModel.getValue(),n);this.initialAstWithoutTokens=PW(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new Sd(wn(n.fromLineNumber-1,0),wn(n.toLineNumber,0),wn(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Sd.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=pA(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=pA(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const i=t,s=new gA(this.textModel,this.brackets);return PW(s,e,i,n)}getBracketsInRange(e,t){this.flushQueue();const n=wn(e.startLineNumber-1,e.startColumn-1),i=wn(e.endLineNumber-1,e.endColumn-1);return new Td(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens;HW(r,os,r.length,n,i,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=xp(e.getStartPosition()),i=xp(e.getEndPosition());return new Td(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new VW(s,t,this.textModel);WW(r,os,r.length,n,i,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Axe(t,os,t.length,xp(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Mxe(t,os,t.length,xp(e))}};u(Cre,"BracketPairsTree");let OW=Cre;function Mxe(o,e,t,n){if(o.kind===4||o.kind===2){const i=[];for(const s of o.children)t=nn(e,s.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=i.length-1;s>=0;s--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=i[s];if(Om(r,n)){const l=Mxe(o.children[s],r,a,n);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=ag(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(Mxe,"getFirstBracketBefore");function Axe(o,e,t,n){if(o.kind===4||o.kind===2){for(const i of o.children){if(t=nn(e,i.length),Om(n,t)){const s=Axe(i,e,t,n);if(s)return s}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){const i=ag(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}u(Axe,"getFirstBracketAfter");function HW(o,e,t,n,i,s,r,a,l,d,c=!1){if(r>200)return!0;e:for(;;)switch(o.kind){case 4:{const h=o.childrenLength;for(let g=0;g<h;g++){const f=o.getChild(g);if(f){if(t=nn(e,f.length),Hm(e,i)&&mv(t,n)){if(mv(t,i)){o=f;continue e}if(!HW(f,e,t,n,i,s,r,0,l,d))return!1}e=t}}return!0}case 2:{const h=!d||!o.closingBracket||o.closingBracket.bracketInfo.closesColorized(o.openingBracket.bracketInfo);let g=0;if(l){let p=l.get(o.openingBracket.text);p===void 0&&(p=0),g=p,h&&(p++,l.set(o.openingBracket.text,p))}const f=o.childrenLength;for(let p=0;p<f;p++){const b=o.getChild(p);if(b){if(t=nn(e,b.length),Hm(e,i)&&mv(t,n)){if(mv(t,i)&&b.kind!==1){o=b,h?(r++,a=g+1):a=g;continue e}if((h||b.kind!==1||!o.closingBracket)&&!HW(b,e,t,n,i,s,h?r+1:r,h?g+1:g,l,d,!o.closingBracket))return!1}e=t}}return l?.set(o.openingBracket.text,g),!0}case 3:{const h=ag(e,t);return s(new aA(h,r-1,0,!0))}case 1:{const h=ag(e,t);return s(new aA(h,r-1,a-1,c))}case 0:return!0}}u(HW,"collectBrackets");const Sre=class Sre{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}};u(Sre,"CollectBracketPairsContext");let VW=Sre;function WW(o,e,t,n,i,s,r,a){var l;if(r>200)return!0;let d=!0;if(o.kind===2){let c=0;if(a){let f=a.get(o.openingBracket.text);f===void 0&&(f=0),c=f,f++,a.set(o.openingBracket.text,f)}const h=nn(e,o.openingBracket.length);let g=-1;if(s.includeMinIndentation&&(g=o.computeMinIndentation(e,s.textModel)),d=s.push(new TW(ag(e,t),ag(e,h),o.closingBracket?ag(nn(h,((l=o.child)===null||l===void 0?void 0:l.length)||os),t):void 0,r,c,o,g)),e=h,d&&o.child){const f=o.child;if(t=nn(e,f.length),Hm(e,i)&&mv(t,n)&&(d=WW(f,e,t,n,i,s,r+1,a),!d))return!1}a?.set(o.openingBracket.text,c)}else{let c=e;for(const h of o.children){const g=c;if(c=nn(c,h.length),Hm(g,i)&&Hm(n,c)&&(d=WW(h,g,c,n,i,s,r,a),!d))return!1}}return d}u(WW,"collectBracketPairs");const xre=class xre extends G{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new si),this.onDidChangeEmitter=new V,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new ie;this.bracketPairsTree.value=fPe(e.add(new OW(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||Td.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||Td.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getBracketsInRange(e,t))||Td.empty}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(L.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?PE(this._findMatchingBracketUp(l,i,rH(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(L.fromPositions(e,e)).filter(i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(e)||i.closingBracketRange.containsPosition(e))).findLastMaxBy(_r(i=>i.openingBracketRange.containsPosition(e)?i.openingBracketRange:i.closingBracketRange,L.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=rH(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let d=i-1;d>=0;d--){const c=t.getEndOffset(d);if(c<=a)break;if(Aa(t.getStandardTokenType(d))||t.getLanguageId(d)!==r){a=c;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let d=i+1;d<s;d++){const c=t.getStartOffset(d);if(c>=l)break;if(Aa(t.getStandardTokenType(d))||t.getLanguageId(d)!==r){l=c;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(a&&!Aa(i.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:d}=this._establishBracketSearchOffsets(e,i,a,r),c=null;for(;;){const h=Qs.findNextBracketInRange(a.forwardRegex,n,s,l,d);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const g=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(f){if(f instanceof oa)return null;c=f}}l=h.endColumn-1}if(c)return c}if(r>0&&i.getStartOffset(r)===e.column-1){const l=r-1,d=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(d&&!Aa(i.getStandardTokenType(l))){const{searchStartOffset:c,searchEndOffset:h}=this._establishBracketSearchOffsets(e,i,d,l),g=Qs.findPrevBracketInRange(d.reversedRegex,n,s,c,h);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const f=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),p=this._matchFoundBracket(g,d.textIsBracket[f],d.textIsOpenBracket[f],t);if(p)return p instanceof oa?null:p}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof oa?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let r=-1,a=0;const l=u((d,c,h,g)=>{for(;;){if(n&&++a%100===0&&!n())return oa.INSTANCE;const f=Qs.findPrevBracketInRange(s,d,c,h,g);if(!f)break;const p=c.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return f;g=f.startColumn-1}return null},"searchPrevMatchingBracketInRange");for(let d=t.lineNumber;d>=1;d--){const c=this.textModel.tokenization.getLineTokens(d),h=c.getCount(),g=this.textModel.getLineContent(d);let f=h-1,p=g.length,b=g.length;d===t.lineNumber&&(f=c.findTokenIndexAtOffset(t.column-1),p=t.column-1,b=t.column-1);let _=!0;for(;f>=0;f--){const v=c.getLanguageId(f)===i&&!Aa(c.getStandardTokenType(f));if(v)_?p=c.getStartOffset(f):(p=c.getStartOffset(f),b=c.getEndOffset(f));else if(_&&p!==b){const y=l(d,g,p,b);if(y)return y}_=v}if(_&&p!==b){const v=l(d,g,p,b);if(v)return v}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let r=1,a=0;const l=u((c,h,g,f)=>{for(;;){if(n&&++a%100===0&&!n())return oa.INSTANCE;const p=Qs.findNextBracketInRange(s,c,h,g,f);if(!p)break;const b=h.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(b)?r++:e.isClose(b)&&r--,r===0)return p;g=p.endColumn-1}return null},"searchNextMatchingBracketInRange"),d=this.textModel.getLineCount();for(let c=t.lineNumber;c<=d;c++){const h=this.textModel.tokenization.getLineTokens(c),g=h.getCount(),f=this.textModel.getLineContent(c);let p=0,b=0,_=0;c===t.lineNumber&&(p=h.findTokenIndexAtOffset(t.column-1),b=t.column-1,_=t.column-1);let v=!0;for(;p<g;p++){const y=h.getLanguageId(p)===i&&!Aa(h.getStandardTokenType(p));if(y)v||(b=h.getStartOffset(p)),_=h.getEndOffset(p);else if(v&&b!==_){const w=l(c,f,b,_);if(w)return w}v=y}if(v&&b!==_){const y=l(c,f,b,_);if(y)return y}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(n))||null;let i=null,s=null,r=null;for(let a=n.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),d=l.getCount(),c=this.textModel.getLineContent(a);let h=d-1,g=c.length,f=c.length;if(a===n.lineNumber){h=l.findTokenIndexAtOffset(n.column-1),g=n.column-1,f=n.column-1;const b=l.getLanguageId(h);i!==b&&(i=b,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let p=!0;for(;h>=0;h--){const b=l.getLanguageId(h);if(i!==b){if(s&&r&&p&&g!==f){const v=Qs.findPrevBracketInRange(s.reversedRegex,a,c,g,f);if(v)return this._toFoundBracket(r,v);p=!1}i=b,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const _=!!s&&!Aa(l.getStandardTokenType(h));if(_)p?g=l.getStartOffset(h):(g=l.getStartOffset(h),f=l.getEndOffset(h));else if(r&&s&&p&&g!==f){const v=Qs.findPrevBracketInRange(s.reversedRegex,a,c,g,f);if(v)return this._toFoundBracket(r,v)}p=_}if(r&&s&&p&&g!==f){const b=Qs.findPrevBracketInRange(s.reversedRegex,a,c,g,f);if(b)return this._toFoundBracket(r,b)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,r=null,a=null;for(let l=n.lineNumber;l<=i;l++){const d=this.textModel.tokenization.getLineTokens(l),c=d.getCount(),h=this.textModel.getLineContent(l);let g=0,f=0,p=0;if(l===n.lineNumber){g=d.findTokenIndexAtOffset(n.column-1),f=n.column-1,p=n.column-1;const _=d.getLanguageId(g);s!==_&&(s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let b=!0;for(;g<c;g++){const _=d.getLanguageId(g);if(s!==_){if(a&&r&&b&&f!==p){const y=Qs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(y)return this._toFoundBracket(a,y);b=!1}s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const v=!!r&&!Aa(d.getStandardTokenType(g));if(v)b||(f=d.getStartOffset(g)),p=d.getEndOffset(g);else if(a&&r&&b&&f!==p){const y=Qs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(y)return this._toFoundBracket(a,y)}b=v}if(a&&r&&b&&f!==p){const _=Qs.findNextBracketInRange(r.forwardRegex,l,h,f,p);if(_)return this._toFoundBracket(a,_)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=L.fromPositions(n),p=this.getBracketPairsInRange(L.fromPositions(n,n)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(f));return p?[p.openingBracketRange,p.closingBracketRange]:null}const i=rH(t),s=this.textModel.getLineCount(),r=new Map;let a=[];const l=u((f,p)=>{if(!r.has(f)){const b=[];for(let _=0,v=p?p.brackets.length:0;_<v;_++)b[_]=0;r.set(f,b)}a=r.get(f)},"resetCounts");let d=0;const c=u((f,p,b,_,v)=>{for(;;){if(i&&++d%100===0&&!i())return oa.INSTANCE;const y=Qs.findNextBracketInRange(f.forwardRegex,p,b,_,v);if(!y)break;const w=b.substring(y.startColumn-1,y.endColumn-1).toLowerCase(),C=f.textIsBracket[w];if(C&&(C.isOpen(w)?a[C.index]++:C.isClose(w)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(y,C,!1,i);_=y.endColumn-1}return null},"searchInRange");let h=null,g=null;for(let f=n.lineNumber;f<=s;f++){const p=this.textModel.tokenization.getLineTokens(f),b=p.getCount(),_=this.textModel.getLineContent(f);let v=0,y=0,w=0;if(f===n.lineNumber){v=p.findTokenIndexAtOffset(n.column-1),y=n.column-1,w=n.column-1;const S=p.getLanguageId(v);h!==S&&(h=S,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g))}let C=!0;for(;v<b;v++){const S=p.getLanguageId(v);if(h!==S){if(g&&C&&y!==w){const T=c(g,f,_,y,w);if(T)return PE(T);C=!1}h=S,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,g)}const k=!!g&&!Aa(p.getStandardTokenType(v));if(k)C||(y=p.getStartOffset(v)),w=p.getEndOffset(v);else if(g&&C&&y!==w){const T=c(g,f,_,y,w);if(T)return PE(T)}C=k}if(g&&C&&y!==w){const S=c(g,f,_,y,w);if(S)return PE(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}};u(xre,"BracketPairsTextModelPart");let BW=xre;function fPe(o,e){return{object:o,dispose:()=>e?.dispose()}}u(fPe,"createDisposableRef");function rH(o){if(typeof o>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=o}}u(rH,"createTimeBasedContinueBracketSearchPredicate");const Tre=class Tre{constructor(){this._searchCanceledBrand=void 0}};u(Tre,"BracketSearchCanceled");let oa=Tre;oa.INSTANCE=new oa;function PE(o){return o instanceof oa?null:o}u(PE,"stripBracketSearchCanceled");const Lre=class Lre extends G{constructor(e){super(),this.textModel=e,this.colorProvider=new mA,this.onDidChangeEmitter=new V,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,i){return i?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new L(1,1,this.textModel.getLineCount(),1),e,t):[]}};u(Lre,"ColorizedBracketPairsDecorationProvider");let UW=Lre;const Ere=class Ere{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};u(Ere,"ColorProvider");let mA=Ere;Ir((o,e)=>{const t=[wxe,Cxe,Sxe,xxe,Txe,Lxe],n=new mA;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${o.getColor(S2e)}; }`);const i=t.map(s=>o.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const r=i[s%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(s)} { color: ${r}; }`)}});function FE(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}u(FE,"escapeNewLine");const or=class or{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${FE(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${FE(this.oldText)}")`:`(replace@${this.oldPosition} "${FE(this.oldText)}" with "${FE(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;Jr(e,i,n),n+=4;for(let s=0;s<i;s++)NMe(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=Zr(e,t);return t+=4,PMe(e,t,n)}writeSize(){return 4+4+or._writeStringSize(this.oldText)+or._writeStringSize(this.newText)}write(e,t){return Jr(e,this.oldPosition,t),t+=4,Jr(e,this.newPosition,t),t+=4,t=or._writeString(e,this.oldText,t),t=or._writeString(e,this.newText,t),t}static read(e,t,n){const i=Zr(e,t);t+=4;const s=Zr(e,t);t+=4;const r=or._readString(e,t);t+=or._writeStringSize(r);const a=or._readString(e,t);return t+=or._writeStringSize(a),n.push(new or(i,r,s,a)),t}};u(or,"TextChange");let cr=or;function pPe(o,e){return o===null||o.length===0?e:new zW(o,e).compress()}u(pPe,"compressConsecutiveTextChanges");const $r=class $r{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[d,c]=$r._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=c;continue}if(n.newPosition<i.oldPosition){const[d,c]=$r._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=c;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[d,c]=$r._splitPrev(n,i.oldLength);a=d,l=i,n=c,i=this._getCurr(++t)}else{const[d,c]=$r._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=c}this._result[this._resultLen++]=new cr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=$r._merge(this._result);return $r._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=$r._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=$r._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new cr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new cr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new cr(e.oldPosition,e.oldText,e.newPosition,n),new cr(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new cr(e.oldPosition,n,e.newPosition,e.newText),new cr(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new cr(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}};u($r,"TextChangeCompressor");let zW=$r;function tc(o){return o===47||o===92}u(tc,"isPathSeparator");function Ixe(o){return o.replace(/[\\/]/g,Mn.sep)}u(Ixe,"toSlashes");function mPe(o){return o.indexOf("/")===-1&&(o=Ixe(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}u(mPe,"toPosixPath");function iye(o,e=Mn.sep){if(!o)return"";const t=o.length,n=o.charCodeAt(0);if(tc(n)){if(tc(o.charCodeAt(1))&&!tc(o.charCodeAt(2))){let s=3;const r=s;for(;s<t&&!tc(o.charCodeAt(s));s++);if(r!==s&&!tc(o.charCodeAt(s+1))){for(s+=1;s<t;s++)if(tc(o.charCodeAt(s)))return o.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(Nxe(n)&&o.charCodeAt(1)===58)return tc(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let i=o.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(tc(o.charCodeAt(i)))return o.slice(0,i+1)}return""}u(iye,"getRoot");function GW(o,e,t,n=ua){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!_Z(o,e))return!1;if(e.length===o.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,o.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),o.indexOf(e)===0}u(GW,"isEqualOrParent");function Nxe(o){return o>=65&&o<=90||o>=97&&o<=122}u(Nxe,"isWindowsDriveLetter");function bPe(o,e=Si){return e?Nxe(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}u(bPe,"hasDriveLetter");function Ia(o){return mD(o,!0)}u(Ia,"originalFSPath");const kre=class kre{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:jy(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===qe.file)return GW(Ia(e),Ia(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(oye(e.authority,t.authority))return GW(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ae.joinPath(e,...t)}basenameOrAuthority(e){return qo(e)||e.authority}basename(e){return Mn.basename(e.path)}extname(e){return Mn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===qe.file?t=Ae.file(j1e(Ia(e))).path:(t=Mn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===qe.file?t=Ae.file(G1e(Ia(e))).path:t=Mn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!oye(e.authority,t.authority))return;if(e.scheme===qe.file){const s=PDe(Ia(e),Ia(t));return Si?Ixe(s):s}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const r=Math.min(n.length,i.length);s<r&&!(n.charCodeAt(s)!==i.charCodeAt(s)&&n.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);n=i.substr(0,s)+n.substr(s)}return Mn.relative(n,i)}resolvePath(e,t){if(e.scheme===qe.file){const n=Ae.file(RDe(Ia(e),t));return e.with({authority:n.authority,path:n.path})}return t=mPe(t),e.with({path:Mn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&up(e,t)}hasTrailingPathSeparator(e,t=ua){if(e.scheme===qe.file){const n=Ia(e);return n.length>iye(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ua){return rye(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ua){let n=!1;if(e.scheme===qe.file){const i=Ia(e);n=i!==void 0&&i.length===iye(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!rye(e,t)?e.with({path:e.path+"/"}):e}};u(kre,"ExtUri");let jW=kre;const jt=new jW(()=>!1),UZ=jt.isEqual.bind(jt);jt.isEqualOrParent.bind(jt);jt.getComparisonKey.bind(jt);const _Pe=jt.basenameOrAuthority.bind(jt),qo=jt.basename.bind(jt),vPe=jt.extname.bind(jt),RO=jt.dirname.bind(jt),yPe=jt.joinPath.bind(jt),wPe=jt.normalizePath.bind(jt),CPe=jt.relativePath.bind(jt),sye=jt.resolvePath.bind(jt);jt.isAbsolutePath.bind(jt);const oye=jt.isEqualAuthority.bind(jt),rye=jt.hasTrailingPathSeparator.bind(jt);jt.removeTrailingPathSeparator.bind(jt);jt.addTrailingPathSeparator.bind(jt);var Tu;(function(o){o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(o.META_DATA_MIME,s),n}u(e,"parseMetaData"),o.parseMetaData=e})(Tu||(Tu={}));function Bf(o){return o.toString()}u(Bf,"uriGetComparisonKey");const qr=class qr{static create(e,t){const n=e.getAlternativeVersionId(),i=$W(e);return new qr(n,n,i,i,t,t,[])}constructor(e,t,n,i,s,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=a}append(e,t,n,i,s){t.length>0&&(this.changes=pPe(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Jr(e,t?t.length:0,n),n+=4,t)for(const i of t)Jr(e,i.selectionStartLineNumber,n),n+=4,Jr(e,i.selectionStartColumn,n),n+=4,Jr(e,i.positionLineNumber,n),n+=4,Jr(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=Zr(e,t);t+=4;for(let s=0;s<i;s++){const r=Zr(e,t);t+=4;const a=Zr(e,t);t+=4;const l=Zr(e,t);t+=4;const d=Zr(e,t);t+=4,n.push(new xe(r,a,l,d))}return t}serialize(){let e=10+qr._writeSelectionsSize(this.beforeCursorState)+qr._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;Jr(t,this.beforeVersionId,n),n+=4,Jr(t,this.afterVersionId,n),n+=4,Gve(t,this.beforeEOL,n),n+=1,Gve(t,this.afterEOL,n),n+=1,n=qr._writeSelections(t,this.beforeCursorState,n),n=qr._writeSelections(t,this.afterCursorState,n),Jr(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=Zr(t,n);n+=4;const s=Zr(t,n);n+=4;const r=zve(t,n);n+=1;const a=zve(t,n);n+=1;const l=[];n=qr._readSelections(t,n,l);const d=[];n=qr._readSelections(t,n,d);const c=Zr(t,n);n+=4;const h=[];for(let g=0;g<c;g++)n=cr.read(t,n,h);return new qr(i,s,r,a,l,d,h)}};u(qr,"SingleModelEditStackData");let As=qr;const Dre=class Dre{get type(){return 0}get resource(){return Ae.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=As.create(n,i)}toString(){return(this._data instanceof As?this._data:As.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ae.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof As}append(e,t,n,i,s){this._data instanceof As&&this._data.append(e,t,n,i,s)}close(){this._data instanceof As&&(this._data=this._data.serialize())}open(){this._data instanceof As||(this._data=As.deserialize(this._data))}undo(){if(Ae.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof As&&(this._data=this._data.serialize());const e=As.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ae.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof As&&(this._data=this._data.serialize());const e=As.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof As&&(this._data=this._data.serialize()),this._data.byteLength+168}};u(Dre,"SingleModelEditStackElement");let bA=Dre;const Mre=class Mre{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const s=Bf(i.resource);this._editStackElementsMap.set(s,i)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Bf(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Bf(Ae.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Bf(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const r=Bf(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Bf(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${qo(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};u(Mre,"MultiModelEditStackElement");let KW=Mre;function $W(o){return o.getEOL()===`
`?0:1}u($W,"getModelEOL");function od(o){return o?o instanceof bA||o instanceof KW:!1}u(od,"isEditStackElement");const MP=class MP{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);od(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);od(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(od(n)&&n.canAppend(this._model))return n;const i=new bA(m("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],$W(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){const s=this._getOrCreateEditStackElement(e,i),r=this._model.applyEdits(t,!0),a=MP._computeCursorState(n,r),l=r.map((d,c)=>({index:c,textChange:d.textChange}));return l.sort((d,c)=>d.textChange.oldPosition===c.textChange.oldPosition?d.index-c.index:d.textChange.oldPosition-c.textChange.oldPosition),s.append(this._model,l.map(d=>d.textChange),$W(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Be(n),null}}};u(MP,"EditStack");let qW=MP;const Are=class Are{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};u(Are,"SpacesDiffResult");let YW=Are;function SPe(o,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){const g=o.charCodeAt(s),f=t.charCodeAt(s);if(g!==f)break}let r=0,a=0;for(let g=s;g<e;g++)o.charCodeAt(g)===32?r++:a++;let l=0,d=0;for(let g=s;g<n;g++)t.charCodeAt(g)===32?l++:d++;if(r>0&&a>0||l>0&&d>0)return;const c=Math.abs(a-d),h=Math.abs(r-l);if(c===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%c===0){i.spacesDiff=h/c;return}}u(SPe,"spacesDiff");function aye(o,e,t){const n=Math.min(o.getLineCount(),1e4);let i=0,s=0,r="",a=0;const l=[2,4,6,8,3,5,7],d=8,c=[0,0,0,0,0,0,0,0,0],h=new YW;for(let p=1;p<=n;p++){const b=o.getLineLength(p),_=o.getLineContent(p),v=b<=65536;let y=!1,w=0,C=0,S=0;for(let T=0,E=b;T<E;T++){const D=v?_.charCodeAt(T):o.getLineCharCode(p,T);if(D===9)S++;else if(D===32)C++;else{y=!0,w=T;break}}if(!y||(S>0?i++:C>1&&s++,SPe(r,a,_,w,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const k=h.spacesDiff;k<=d&&c[k]++,r=_,a=w}let g=t;i!==s&&(g=i<s);let f=e;if(g){let p=g?0:.1*n;l.forEach(b=>{const _=c[b];_>p&&(p=_,f=b)}),f===4&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(f=2)}return{insertSpaces:g,tabSize:f}}u(aye,"guessIndentation");function ps(o){return(o.metadata&1)>>>0}u(ps,"getNodeColor");function Bt(o,e){o.metadata=o.metadata&254|e<<0}u(Bt,"setNodeColor");function Ci(o){return(o.metadata&2)>>>1===1}u(Ci,"getNodeIsVisited");function Ht(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}u(Ht,"setNodeIsVisited");function Rxe(o){return(o.metadata&4)>>>2===1}u(Rxe,"getNodeIsForValidation");function lye(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}u(lye,"setNodeIsForValidation");function Pxe(o){return(o.metadata&64)>>>6===1}u(Pxe,"getNodeIsInGlyphMargin");function dye(o,e){o.metadata=o.metadata&191|(e?1:0)<<6}u(dye,"setNodeIsInGlyphMargin");function xPe(o){return(o.metadata&24)>>>3}u(xPe,"getNodeStickiness");function cye(o,e){o.metadata=o.metadata&231|e<<3}u(cye,"_setNodeStickiness");function TPe(o){return(o.metadata&32)>>>5===1}u(TPe,"getCollapseOnReplaceEdit");function uye(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}u(uye,"setCollapseOnReplaceEdit");const Ire=class Ire{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Bt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,lye(this,!1),dye(this,!1),cye(this,1),uye(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ht(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;lye(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),dye(this,this.options.glyphMarginClassName!==null),cye(this,this.options.stickiness),uye(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}};u(Ire,"IntervalNode");let _A=Ire;const Xe=new _A(null,0,0);Xe.parent=Xe;Xe.left=Xe;Xe.right=Xe;Bt(Xe,0);const Nre=class Nre{constructor(){this.root=Xe,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s,r){return this.root===Xe?[]:NPe(this,e,t,n,i,s,r)}search(e,t,n,i){return this.root===Xe?[]:IPe(this,e,t,n,i)}collectNodesFromOwner(e){return MPe(this,e)}collectNodesPostOrder(){return APe(this)}insert(e){hye(this,e),this._normalizeDeltaIfNecessary()}delete(e){gye(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,t)}acceptReplace(e,t,n,i){const s=kPe(this,e,e+t);for(let r=0,a=s.length;r<a;r++){const l=s[r];gye(this,l)}this._normalizeDeltaIfNecessary(),DPe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=s.length;r<a;r++){const l=s[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,EPe(l,e,e+t,n,i),l.maxEnd=l.end,hye(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,LPe(this))}};u(Nre,"IntervalTree");let jv=Nre;function LPe(o){let e=o.root,t=0;for(;e!==Xe;){if(e.left!==Xe&&!Ci(e.left)){e=e.left;continue}if(e.right!==Xe&&!Ci(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Lu(e),Ht(e,!0),Ht(e.left,!1),Ht(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ht(o.root,!1)}u(LPe,"normalizeDelta");function Uf(o,e,t,n){return o<t?!0:o>t||n===1?!1:n===2?!0:e}u(Uf,"adjustMarkerBeforeColumn");function EPe(o,e,t,n,i){const s=xPe(o),r=s===0||s===2,a=s===1||s===2,l=t-e,d=n,c=Math.min(l,d),h=o.start;let g=!1;const f=o.end;let p=!1;e<=h&&f<=t&&TPe(o)&&(o.start=e,g=!0,o.end=e,p=!0);{const _=i?1:l>0?2:0;!g&&Uf(h,r,e,_)&&(g=!0),!p&&Uf(f,a,e,_)&&(p=!0)}if(c>0&&!i){const _=l>d?2:0;!g&&Uf(h,r,e+c,_)&&(g=!0),!p&&Uf(f,a,e+c,_)&&(p=!0)}{const _=i?1:0;!g&&Uf(h,r,t,_)&&(o.start=e+d,g=!0),!p&&Uf(f,a,t,_)&&(o.end=e+d,p=!0)}const b=d-l;g||(o.start=Math.max(0,h+b)),p||(o.end=Math.max(0,f+b)),o.start>o.end&&(o.end=o.start)}u(EPe,"nodeAcceptEdit");function kPe(o,e,t){let n=o.root,i=0,s=0,r=0,a=0;const l=[];let d=0;for(;n!==Xe;){if(Ci(n)){Ht(n.left,!1),Ht(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!Ci(n.left)){if(s=i+n.maxEnd,s<e){Ht(n,!0);continue}if(n.left!==Xe){n=n.left;continue}}if(r=i+n.start,r>t){Ht(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[d++]=n),Ht(n,!0),n.right!==Xe&&!Ci(n.right)){i+=n.delta,n=n.right;continue}}return Ht(o.root,!1),l}u(kPe,"searchForEditing");function DPe(o,e,t,n){let i=o.root,s=0,r=0,a=0;const l=n-(t-e);for(;i!==Xe;){if(Ci(i)){Ht(i.left,!1),Ht(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),Lu(i),i=i.parent;continue}if(!Ci(i.left)){if(r=s+i.maxEnd,r<e){Ht(i,!0);continue}if(i.left!==Xe){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0),Ht(i,!0);continue}if(Ht(i,!0),i.right!==Xe&&!Ci(i.right)){s+=i.delta,i=i.right;continue}}Ht(o.root,!1)}u(DPe,"noOverlapReplace");function MPe(o,e){let t=o.root;const n=[];let i=0;for(;t!==Xe;){if(Ci(t)){Ht(t.left,!1),Ht(t.right,!1),t=t.parent;continue}if(t.left!==Xe&&!Ci(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Ht(t,!0),t.right!==Xe&&!Ci(t.right)){t=t.right;continue}}return Ht(o.root,!1),n}u(MPe,"collectNodesFromOwner");function APe(o){let e=o.root;const t=[];let n=0;for(;e!==Xe;){if(Ci(e)){Ht(e.left,!1),Ht(e.right,!1),e=e.parent;continue}if(e.left!==Xe&&!Ci(e.left)){e=e.left;continue}if(e.right!==Xe&&!Ci(e.right)){e=e.right;continue}t[n++]=e,Ht(e,!0)}return Ht(o.root,!1),t}u(APe,"collectNodesPostOrder");function IPe(o,e,t,n,i){let s=o.root,r=0,a=0,l=0;const d=[];let c=0;for(;s!==Xe;){if(Ci(s)){Ht(s.left,!1),Ht(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==Xe&&!Ci(s.left)){s=s.left;continue}a=r+s.start,l=r+s.end,s.setCachedOffsets(a,l,n);let h=!0;if(e&&s.ownerId&&s.ownerId!==e&&(h=!1),t&&Rxe(s)&&(h=!1),i&&!Pxe(s)&&(h=!1),h&&(d[c++]=s),Ht(s,!0),s.right!==Xe&&!Ci(s.right)){r+=s.delta,s=s.right;continue}}return Ht(o.root,!1),d}u(IPe,"search");function NPe(o,e,t,n,i,s,r){let a=o.root,l=0,d=0,c=0,h=0;const g=[];let f=0;for(;a!==Xe;){if(Ci(a)){Ht(a.left,!1),Ht(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Ci(a.left)){if(d=l+a.maxEnd,d<e){Ht(a,!0);continue}if(a.left!==Xe){a=a.left;continue}}if(c=l+a.start,c>t){Ht(a,!0);continue}if(h=l+a.end,h>=e){a.setCachedOffsets(c,h,s);let p=!0;n&&a.ownerId&&a.ownerId!==n&&(p=!1),i&&Rxe(a)&&(p=!1),r&&!Pxe(a)&&(p=!1),p&&(g[f++]=a)}if(Ht(a,!0),a.right!==Xe&&!Ci(a.right)){l+=a.delta,a=a.right;continue}}return Ht(o.root,!1),g}u(NPe,"intervalSearch");function hye(o,e){if(o.root===Xe)return e.parent=Xe,e.left=Xe,e.right=Xe,Bt(e,0),o.root=e,o.root;RPe(o,e),dc(e.parent);let t=e;for(;t!==o.root&&ps(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;ps(n)===1?(Bt(t.parent,0),Bt(n,0),Bt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Kv(o,t)),Bt(t.parent,0),Bt(t.parent.parent,1),$v(o,t.parent.parent))}else{const n=t.parent.parent.left;ps(n)===1?(Bt(t.parent,0),Bt(n,0),Bt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,$v(o,t)),Bt(t.parent,0),Bt(t.parent.parent,1),Kv(o,t.parent.parent))}return Bt(o.root,0),e}u(hye,"rbTreeInsert");function RPe(o,e){let t=0,n=o.root;const i=e.start,s=e.end;for(;;)if(FPe(i,s,n.start+t,n.end+t)<0)if(n.left===Xe){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Xe){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Xe,e.right=Xe,Bt(e,1)}u(RPe,"treeInsert");function gye(o,e){let t,n;if(e.left===Xe?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Xe?(t=e.left,n=e):(n=PPe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0)),n===o.root){o.root=t,Bt(t,0),e.detach(),aH(),Lu(t),o.root.parent=Xe;return}const i=ps(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Bt(n,ps(e)),e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Xe&&(n.left.parent=n),n.right!==Xe&&(n.right.parent=n)),e.detach(),i){dc(t.parent),n!==e&&(dc(n),dc(n.parent)),aH();return}dc(t),dc(t.parent),n!==e&&(dc(n),dc(n.parent));let s;for(;t!==o.root&&ps(t)===0;)t===t.parent.left?(s=t.parent.right,ps(s)===1&&(Bt(s,0),Bt(t.parent,1),Kv(o,t.parent),s=t.parent.right),ps(s.left)===0&&ps(s.right)===0?(Bt(s,1),t=t.parent):(ps(s.right)===0&&(Bt(s.left,0),Bt(s,1),$v(o,s),s=t.parent.right),Bt(s,ps(t.parent)),Bt(t.parent,0),Bt(s.right,0),Kv(o,t.parent),t=o.root)):(s=t.parent.left,ps(s)===1&&(Bt(s,0),Bt(t.parent,1),$v(o,t.parent),s=t.parent.left),ps(s.left)===0&&ps(s.right)===0?(Bt(s,1),t=t.parent):(ps(s.left)===0&&(Bt(s.right,0),Bt(s,1),Kv(o,s),s=t.parent.left),Bt(s,ps(t.parent)),Bt(t.parent,0),Bt(s.left,0),$v(o,t.parent),t=o.root));Bt(t,0),aH()}u(gye,"rbTreeDelete");function PPe(o){for(;o.left!==Xe;)o=o.left;return o}u(PPe,"leftest$1");function aH(){Xe.parent=Xe,Xe.delta=0,Xe.start=0,Xe.end=0}u(aH,"resetSentinel$1");function Kv(o,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Xe&&(t.left.parent=e),t.parent=e.parent,e.parent===Xe?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Lu(e),Lu(t)}u(Kv,"leftRotate$1");function $v(o,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Xe&&(t.right.parent=e),t.parent=e.parent,e.parent===Xe?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Lu(e),Lu(t)}u($v,"rightRotate$1");function Fxe(o){let e=o.end;if(o.left!==Xe){const t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==Xe){const t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}u(Fxe,"computeMaxEnd");function Lu(o){o.maxEnd=Fxe(o)}u(Lu,"recomputeMaxEnd");function dc(o){for(;o!==Xe;){const e=Fxe(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}u(dc,"recomputeMaxEndWalkToRoot");function FPe(o,e,t,n){return o===t?e-n:o-t}u(FPe,"intervalCompare");const Rre=class Rre{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Ue)return zZ(this.right);let e=this;for(;e.parent!==Ue&&e.parent.left!==e;)e=e.parent;return e.parent===Ue?Ue:e.parent}prev(){if(this.left!==Ue)return Oxe(this.left);let e=this;for(;e.parent!==Ue&&e.parent.right!==e;)e=e.parent;return e.parent===Ue?Ue:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};u(Rre,"TreeNode");let Ow=Rre;const Ue=new Ow(null,0);Ue.parent=Ue;Ue.left=Ue;Ue.right=Ue;Ue.color=0;function zZ(o){for(;o.left!==Ue;)o=o.left;return o}u(zZ,"leftest");function Oxe(o){for(;o.right!==Ue;)o=o.right;return o}u(Oxe,"righttest");function GZ(o){return o===Ue?0:o.size_left+o.piece.length+GZ(o.right)}u(GZ,"calculateSize");function jZ(o){return o===Ue?0:o.lf_left+o.piece.lineFeedCnt+jZ(o.right)}u(jZ,"calculateLF");function lH(){Ue.parent=Ue}u(lH,"resetSentinel");function qv(o,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Ue&&(t.left.parent=e),t.parent=e.parent,e.parent===Ue?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}u(qv,"leftRotate");function Yv(o,e){const t=e.left;e.left=t.right,t.right!==Ue&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Ue?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}u(Yv,"rightRotate");function OE(o,e){let t,n;if(e.left===Ue?(n=e,t=n.right):e.right===Ue?(n=e,t=n.left):(n=zZ(e.right),t=n.right),n===o.root){o.root=t,t.color=0,e.detach(),lH(),o.root.parent=Ue;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,bv(o,t)):(n.parent===e?t.parent=n:t.parent=n.parent,bv(o,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ue&&(n.left.parent=n),n.right!==Ue&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,bv(o,n)),e.detach(),t.parent.left===t){const r=GZ(t),a=jZ(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,Gl(o,t.parent,l,d)}}if(bv(o,t.parent),i){lH();return}let s;for(;t!==o.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,qv(o,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,Yv(o,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,qv(o,t.parent),t=o.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,Yv(o,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,qv(o,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,Yv(o,t.parent),t=o.root));t.color=0,lH()}u(OE,"rbDelete");function fye(o,e){for(bv(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,qv(o,e)),e.parent.color=0,e.parent.parent.color=1,Yv(o,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Yv(o,e)),e.parent.color=0,e.parent.parent.color=1,qv(o,e.parent.parent))}o.root.color=0}u(fye,"fixInsert");function Gl(o,e,t,n){for(;e!==o.root&&e!==Ue;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}u(Gl,"updateTreeMetadata");function bv(o,e){let t=0,n=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=GZ(e.left)-e.size_left,n=jZ(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==o.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}u(bv,"recomputeTreeMetadata");const Pl=65535;function Hxe(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}u(Hxe,"createUintArray");const Pre=class Pre{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}};u(Pre,"LineStarts");let XW=Pre;function jl(o,e=!0){const t=[0];let n=1;for(let i=0,s=o.length;i<s;i++){const r=o.charCodeAt(i);r===13?i+1<s&&o.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:r===10&&(t[n++]=i+1)}return e?Hxe(t):t}u(jl,"createLineStartsFast");function OPe(o,e){o.length=0,o[0]=0;let t=1,n=0,i=0,s=0,r=!0;for(let l=0,d=e.length;l<d;l++){const c=e.charCodeAt(l);c===13?l+1<d&&e.charCodeAt(l+1)===10?(s++,o[t++]=l+2,l++):(n++,o[t++]=l+1):c===10?(i++,o[t++]=l+1):r&&c!==9&&(c<32||c>126)&&(r=!1)}const a=new XW(Hxe(o),n,i,s,r);return o.length=0,a}u(OPe,"createLineStarts");const Fre=class Fre{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}};u(Fre,"Piece");let Xi=Fre;const Ore=class Ore{constructor(e,t){this.buffer=e,this.lineStarts=t}};u(Ore,"StringBuffer");let dd=Ore;const Hre=class Hre{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Ue&&e.iterate(e.root,n=>(n!==Ue&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}};u(Hre,"PieceTreeSnapshot");let ZW=Hre;const Vre=class Vre{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}};u(Vre,"PieceTreeSearchCache");let JW=Vre;const Wre=class Wre{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new dd("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Ue,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=jl(e[s].buffer));const a=new Xi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new JW(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Pl,n=t-Math.floor(t/3),i=n*2;let s="",r=0;const a=[];if(this.iterate(this.root,l=>{const d=this.getNodeContent(l),c=d.length;if(r<=n||r+c<i)return s+=d,r+=c,!0;const h=s.replace(/\r\n|\r|\n/g,e);return a.push(new dd(h,jl(h))),s=d,r=c,!0}),r>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new dd(l,jl(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new ZW(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Ue;)if(i.left!==Ue&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;const s=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==Ue;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){const r=this.getOffsetAt(n+1,1),a=i-r;return new W(n+1,a+1)}return new W(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Ue){const s=this.getOffsetAt(n+1,1),r=i-e-s;return new W(n+1,r+1)}else t=t.right;return new W(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Ue;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Ue)return!0;const r=s.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,d=this._buffers[r.bufferIndex].lineStarts,c=r.start.line,h=r.end.line;let g=d[c]+r.start.column;if(i&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(c===h)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(i=!0,n+=l.substr(g,a-1)):n+=l.substr(g,a),!0;n+=this._EOLNormalized?l.substring(g,Math.max(g,d[c+1]-this._EOLLength)):l.substring(g,d[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=c+1;f<h;f++)n=this._EOLNormalized?l.substring(d[f],d[f+1]-this._EOLLength):l.substring(d[f],d[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[h]+r.end.column-1)===13?(i=!0,r.end.column===0?t--:n=l.substr(d[h],r.end.column-1)):n=l.substr(d[h],r.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,r,a,l,d,c,h){const g=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const v={line:0,column:0};let y,w;t._wordSeparators?(y=g.buffer.substring(p,b),w=u(C=>C+p,"offsetInBuffer"),t.reset(0)):(y=g.buffer,w=u(C=>C,"offsetInBuffer"),t.reset(p));do if(_=t.next(y),_){if(w(_.index)>=b)return c;this.positionInBuffer(e,w(_.index)-f,v);const C=this.getLineFeedCnt(e.piece.bufferIndex,s,v),S=v.line===s.line?v.column-s.column+i:v.column+1,k=S+_[0].length;if(h[c++]=ph(new L(n+C,S,n+C,k),_,l),w(_.index)+_[0].length>=b||c>=d)return c}while(_);return c}findMatchesLineByLine(e,t,n,i){const s=[];let r=0;const a=new Pc(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let c=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,c,h,t,n,i,r,s),s;let g=e.startLineNumber,f=l.node;for(;f!==d.node;){const b=this.getLineFeedCnt(f.piece.bufferIndex,c,f.piece.end);if(b>=1){const v=this._buffers[f.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=v[c.line+b],C=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,g,C,c,this.positionInBuffer(f,w-y),t,n,i,r,s),r>=i)return s;g+=b}const _=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const v=this.getLineContent(g).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,v,e.endLineNumber,_,r,s,n,i),s}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(_),g,_,r,s,n,i),r>=i)return s;g++,l=this.nodeAt2(g,1),f=l.node,c=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const b=g===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(g).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,b,r,s,n,i),s}const p=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(d.node,a,g,p,c,h,t,n,i,r,s),s}_findMatchesInLine(e,t,n,i,s,r,a,l,d){const c=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,f=g.length,p=n.length;let b=-f;for(;(b=n.indexOf(g,b+f))!==-1;)if((!c||EZ(c,n,p,b,f))&&(a[r++]=new kg(new L(i,b+1+s,i,b+1+f+s),null),r>=d))return r;return r}let h;t.reset(0);do if(h=t.next(n),h&&(a[r++]=ph(new L(i,h.index+1+s,i,h.index+1+h[0].length+s),h,l),r>=d))return r;while(h);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Ue){const{node:i,remainder:s,nodeStartOffset:r}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<Pl){this.appendToNode(i,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const c=[];let h=new Xi(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){const b={line:h.start.line+1,column:0};h=new Xi(h.bufferIndex,b,h.end,this.getLineFeedCnt(h.bufferIndex,b,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){const b=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,b),t="\r"+t,i.piece.length===0&&c.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);const g=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let f=i;for(let p=0;p<g.length;p++)f=this.rbInsertRight(f,g[p]);this.deleteNodes(c)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let s=this.rbInsertLeft(null,i[0]);for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Ue)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,r=i.node;if(s===r){const g=this.positionInBuffer(s,n.remainder),f=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();OE(this,s),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,g),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,g,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const d=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,d),r.piece.length===0&&a.push(r);const c=s.next();for(let g=c;g!==Ue&&g!==r;g=g.next())a.push(g);const h=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new Xi(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,Gl(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let s=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)s=this.rbInsertLeft(s,i[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let s=i;for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,l=r[i.start.line]+i.start.column+t;let d=i.start.line,c=i.end.line,h=0,g=0,f=0;for(;d<=c&&(h=d+(c-d)/2|0,f=r[h],h!==c);)if(g=r[h+1],l<f)c=h-1;else if(l>=g)d=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const s=i[n.line+1],r=i[n.line]+n.column;if(s>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)OE(this,e[t])}createNewPieces(e){if(e.length>Pl){const c=[];for(;e.length>Pl;){const g=e.charCodeAt(Pl-1);let f;g===13||g>=55296&&g<=56319?(f=e.substring(0,Pl-1),e=e.substring(Pl-1)):(f=e.substring(0,Pl),e=e.substring(Pl));const p=jl(f);c.push(new Xi(this._buffers.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this._buffers.push(new dd(f,p))}const h=jl(e);return c.push(new Xi(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new dd(e,h)),c}let t=this._buffers[0].buffer.length;const n=jl(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let c=0;c<n.length;c++)n[c]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let c=0;c<n.length;c++)n[c]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[r],l={line:r,column:a},d=new Xi(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[d]}getLineRawContent(e,t=0){let n=this.root,i="";const s=this._searchCache.get2(e);if(s){n=s.node;const r=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+r,l+n.piece.length);else{const d=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+r,l+d-t)}}else{let r=0;const a=e;for(;n!==Ue;)if(n.left!==Ue&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),c=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),c.substring(h+l,h+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(c+l,c+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Ue;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=r.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=r.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Ue;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(r!==s)return{index:r,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),d=l-i,c=a-s,h=n.length+c;e.piece=new Xi(n.bufferIndex,n.start,r,l,h),Gl(this,e,c,d)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),d=a-i,c=s-l,h=n.length+c;e.piece=new Xi(n.bufferIndex,r,n.end,a,h),Gl(this,e,c,d)}shrinkNode(e,t,n){const i=e.piece,s=i.start,r=i.end,a=i.length,l=i.lineFeedCnt,d=t,c=this.getLineFeedCnt(i.bufferIndex,i.start,d),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new Xi(i.bufferIndex,i.start,d,c,h),Gl(this,e,h-a,c-l);const g=new Xi(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=jl(t,!1);for(let f=0;f<s.length;f++)s[f]+=i;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},d=e.piece.length+t.length,c=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),g=h-c;e.piece=new Xi(e.piece.bufferIndex,e.piece.start,l,h,d),this._lastChangeBufferPos=l,Gl(this,e,t.length,g)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Ue;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Ue;)if(n.left!==Ue&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,r),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Ue;){if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:r}}else if(n.piece.length>=t-1){const s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Ue||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Ue||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Xi(e.piece.bufferIndex,e.piece.start,s,a,r),Gl(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Xi(t.piece.bufferIndex,l,t.piece.end,c,d),Gl(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let g=0;g<n.length;g++)OE(this,n[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)OE(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},r=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new Xi(i.bufferIndex,s,i.end,a,r),Gl(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Ue)return t(Ue);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Ue)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new Ow(t,1);if(n.left=Ue,n.right=Ue,n.parent=Ue,n.size_left=0,n.lf_left=0,this.root===Ue)this.root=n,n.color=0;else if(e.right===Ue)e.right=n,n.parent=e;else{const s=zZ(e.right);s.left=n,n.parent=s}return fye(this,n),n}rbInsertLeft(e,t){const n=new Ow(t,1);if(n.left=Ue,n.right=Ue,n.parent=Ue,n.size_left=0,n.lf_left=0,this.root===Ue)this.root=n,n.color=0;else if(e.left===Ue)e.left=n,n.parent=e;else{const i=Oxe(e.left);i.right=n,n.parent=i}return fye(this,n),n}};u(Wre,"PieceTreeBase");let QW=Wre;const em=class em extends G{constructor(e,t,n,i,s,r,a){super(),this._onDidChangeContent=this._register(new V),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new QW(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),s=this.getPositionAt(n);return new L(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,d=e.endLineNumber-e.startLineNumber;s=l*d}return i-n+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let r=i;r<=s;r++){const a=this.getLineContent(r),l=r===i?e.startColumn-1:0,d=r===s?e.endColumn-1:a.length;for(let c=l;c<d;c++)Un(a.charCodeAt(c))?(n=n+1,c=c+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=$i(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=ha(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const _=e[b];a&&_._isTracked&&(a=!1);const v=_.range;if(_.text){let k=!0;r||(k=!ZL(_.text),r=k),!i&&k&&(i=tb(_.text)),!s&&k&&(s=nSe(_.text))}let y="",w=0,C=0,S=0;if(_.text){let k;[w,C,S,k]=xu(_.text);const T=this.getEOL();k===0||k===(T===`\r
`?2:1)?y=_.text:y=_.text.replace(/\r\n|\r|\n/g,T)}l[b]={sortIndex:b,identifier:_.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:y,eolCount:w,firstLineLength:C,lastLineLength:S,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(em._sortOpsAscending);let d=!1;for(let b=0,_=l.length-1;b<_;b++){const v=l[b].range.getEndPosition(),y=l[b+1].range.getStartPosition();if(y.isBeforeOrEqual(v)){if(y.isBefore(v))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));const c=n||t?em._getInverseEditRanges(l):[],h=[];if(t)for(let b=0;b<l.length;b++){const _=l[b],v=c[b];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let y=v.startLineNumber;y<=v.endLineNumber;y++){let w="";y===v.startLineNumber&&(w=this.getLineContent(_.range.startLineNumber),$i(w)!==-1)||h.push({lineNumber:y,oldContent:w})}}let g=null;if(n){let b=0;g=[];for(let _=0;_<l.length;_++){const v=l[_],y=c[_],w=this.getValueInRange(v.range),C=v.rangeOffset+b;b+=v.text.length-w.length,g[_]={sortIndex:v.sortIndex,identifier:v.identifier,range:y,text:w,textChange:new cr(v.rangeOffset,w,C,v.text)}}d||g.sort((_,v)=>_.sortIndex-v.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let p=null;if(t&&h.length>0){h.sort((b,_)=>_.lineNumber-b.lineNumber),p=[];for(let b=0,_=h.length;b<_;b++){const v=h[b].lineNumber;if(b>0&&h[b-1].lineNumber===v)continue;const y=h[b].oldContent,w=this.getLineContent(v);w.length===0||w===y||$i(w)!==-1||p.push(v)}}return this._onDidChangeContent.fire(),new a3(g,f,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new L(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,p=e.length;f<p;f++){const b=e[f],_=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new L(r,a,_.startLineNumber,_.startColumn))),b.text.length>0&&l.push(b.text),r=_.endLineNumber,a=_.endColumn}const d=l.join(""),[c,h,g]=xu(d);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:d,eolCount:c,firstLineLength:h,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(em._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=i.range.startLineNumber,r=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&r===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const d=new L(s,r,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,s=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let d,c;s?s.range.endLineNumber===l.range.startLineNumber?(d=n,c=i+(l.range.startColumn-s.range.endColumn)):(d=n+(l.range.startLineNumber-s.range.endLineNumber),c=l.range.startColumn):(d=l.range.startLineNumber,c=l.range.startColumn);let h;if(l.text.length>0){const g=l.eolCount+1;g===1?h=new L(d,c,d,c+l.firstLineLength):h=new L(d,c,d+g-1,l.lastLineLength+1)}else h=new L(d,c,d,c);n=h.endLineNumber,i=h.endColumn,t.push(h),s=l}return t}static _sortOpsAscending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};u(em,"PieceTreeTextBuffer");let vA=em;const Bre=class Bre{constructor(e,t,n,i,s,r,a,l,d){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=d}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,r=n.length;s<r;s++){const a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=jl(a);n[s]=new dd(a,l)}const i=new vA(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}};u(Bre,"PieceTreeTextBufferFactory");let e8=Bre;const Ure=class Ure{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&CZ(e)&&(this.BOM=sMe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=OPe(this._tmpLineStarts,e);this.chunks.push(new dd(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=tb(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=nSe(e)))}finish(e=!0){return this._finish(),new e8(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=jl(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};u(Ure,"PieceTreeTextBufferBuilder");let yA=Ure;const zre=class zre{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const i=this._store.slice(0,e),s=this._store.slice(e+t),r=HPe(n,this._default);this._store=i.concat(r,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=_O(this._store,e,n)}};u(zre,"FixedArray");let t8=zre;function HPe(o,e){const t=[];for(let n=0;n<o;n++)t[n]=e;return t}u(HPe,"arrayFill");const Gre=class Gre{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}};u(Gre,"ContiguousMultilineTokens");let n8=Gre;const jre=class jre{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new n8(e,[t]))}finalize(){return this._tokens}};u(jre,"ContiguousMultilineTokensBuilder");let Hw=jre;const Kre=class Kre{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Vw(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}};u(Kre,"TokenizerWithStateStore");let i8=Kre;const $re=class $re extends i8{constructor(e,t,n,i){super(e,t),this._textModel=n,this._languageIdCodec=i}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const i=this.getFirstInvalidLine();if(!i||i.lineNumber>t)break;const s=this._textModel.getLineContent(i.lineNumber),r=U_(this._languageIdCodec,n,this.tokenizationSupport,s,!0,i.startState);e.add(i.lineNumber,r.tokens),this.store.setEndState(i.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=U_(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n),l=new xi(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const d=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(d)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,s=e.column,r=this.getStartState(i);if(!r)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,s-1)+n+a.substring(s-1+t),d=this._textModel.getLanguageIdAtPosition(i,0),c=U_(this._languageIdCodec,d,this.tokenizationSupport,l,!0,r);return new xi(c.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let i=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=n;r++){const a=this._textModel.getLineContent(r),l=U_(this._languageIdCodec,s,this.tokenizationSupport,a,!0,i);e.add(r,l.tokens),i=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let i=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,i=this.getStartState(a),i))break}i||(i=this.tokenizationSupport.getInitialState()),n.reverse();const s=this._textModel.getLanguageId();let r=i;for(const a of n)r=U_(this._languageIdCodec,s,this.tokenizationSupport,a,!1,r).endState;return r}};u($re,"TokenizerWithStateStoreAndTextModel");let s8=$re;const qre=class qre{constructor(e){this.lineCount=e,this._tokenizationStateStore=new o8,this._invalidEndStatesLineNumbers=new r8,this._invalidEndStatesLineNumbers.addRange(new yt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new An("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new yt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new yt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=xu(t.text);this.acceptChange(new pt(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new yt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new An("Start state must be defined");return{lineNumber:t,startState:n}}};u(qre,"TrackingTokenizationStateStore");let Vw=qre;const Yre=class Yre{constructor(){this._lineEndStates=new t8(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}};u(Yre,"TokenizationStateStore");let o8=Yre;const Xre=class Xre{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new yt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new yt(n.start,e):this._ranges.splice(t,1,new yt(n.start,e),new yt(e+1,n.endExclusive))}}addRange(e){yt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;const s=t-e.length;for(let r=i;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(n===i){const r=new yt(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{const r=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new yt(r,a+s);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};u(Xre,"RangePriorityQueueImpl");let r8=Xre;function U_(o,e,t,n,i,s){let r=null;if(t)try{r=t.tokenizeEncoded(n,i,s.clone())}catch(a){Be(a)}return r||(r=LO(o.encodeLanguageId(e),s)),xi.convertToEndOffset(r.tokens,n.length),r}u(U_,"safeTokenize");const Zre=class Zre{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,fd(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=u(()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?N1e(n):this._beginBackgroundTokenization())},"execute");n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new Hw,n=Fi.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var t;const n=(t=this._tokenizerWithStateStore)===null||t===void 0?void 0:t.getFirstInvalidLine();return n?(this._tokenizerWithStateStore.updateTokensUntilLine(e,n.lineNumber),n.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new pt(e,t))}};u(Zre,"DefaultBackgroundTokenizer");let a8=Zre;const Kl=new Uint32Array(0).buffer,J0=class J0{static deleteBeginning(e,t){return e===null||e===Kl?e:J0.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Kl)return e;const n=cd(e),i=n[n.length-2];return J0.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Kl||t===n)return e;const i=cd(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return Kl;const r=xi.findIndexInTokensArray(i,t),a=r>0?i[r-1<<1]:0,l=i[r<<1];if(n<l){const f=n-t;for(let p=r;p<s;p++)i[p<<1]-=f;return e}let d,c;a!==t?(i[r<<1]=t,d=r+1<<1,c=t):(d=r<<1,c=a);const h=n-t;for(let f=r+1;f<s;f++){const p=i[f<<1]-h;p>c&&(i[d++]=p,i[d++]=i[(f<<1)+1],c=p)}if(d===i.length)return e;const g=new Uint32Array(d);return g.set(i.subarray(0,d),0),g.buffer}static append(e,t){if(t===Kl)return e;if(e===Kl)return t;if(e===null)return e;if(t===null)return null;const n=cd(e),i=cd(t),s=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let d=0;d<s;d++)r[a++]=i[d<<1]+l,r[a++]=i[(d<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===Kl)return e;const i=cd(e),s=i.length>>>1;let r=xi.findIndexInTokensArray(i,t);r>0&&i[r-1<<1]===t&&r--;for(let a=r;a<s;a++)i[a<<1]+=n;return e}};u(J0,"ContiguousTokensEditing");let $l=J0;function cd(o){return o instanceof Uint32Array?o:new Uint32Array(o)}u(cd,"toUint32Array");const Q0=class Q0{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Kl)return new xi(cd(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=pye(this._languageIdCodec.encodeLanguageId(e)),new xi(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?cd(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=ii.getLanguageId(i[1])!==e),!s)return Kl}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=pye(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=_O(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=Q0._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,s?!Q0._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=cd(e),i=cd(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=$l.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=$l.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=$l.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=$l.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=$l.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=$l.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=$l.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];let a=0,l=0,d=!1;for(let c=r.startLineNumber;c<=r.endLineNumber;c++)d?(this.setTokens(t.getLanguageId(),c-1,t.getLineLength(c),r.getLineTokens(c),!1),l=c):this.setTokens(t.getLanguageId(),c-1,t.getLineLength(c),r.getLineTokens(c),!0)&&(d=!0,a=c,l=c);d&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};u(Q0,"ContiguousTokensStore");let wA=Q0;function pye(o){return(o<<0|0|0|32768|2<<24|1024)>>>0}u(pye,"getDefaultMetadata");const AP=class AP{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),r=t[t.length-1].getRange();if(!s||!r)return e;n=e.plusRange(s).plusRange(r)}let i=null;for(let s=0,r=this._pieces.length;s<r;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}d.isEmpty()||(this._pieces.splice(s,1,l,d),s++,r++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=_O(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const i=AP._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const r=t.getCount(),a=s.getCount();let l=0;const d=[];let c=0,h=0;const g=u((f,p)=>{f!==h&&(h=f,d[c++]=f,d[c++]=p)},"emitToken");for(let f=0;f<a;f++){const p=s.getStartCharacter(f),b=s.getEndCharacter(f),_=s.getMetadata(f),v=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,y=~v>>>0;for(;l<r&&t.getEndOffset(l)<=p;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<p&&g(p,t.getMetadata(l));l<r&&t.getEndOffset(l)<b;)g(t.getEndOffset(l),t.getMetadata(l)&y|_&v),l++;if(l<r)g(b,t.getMetadata(l)&y|_&v),t.getEndOffset(l)===b&&l++;else{const w=Math.min(Math.max(0,l-1),r-1);g(b,t.getMetadata(w)&y|_&v)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new xi(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}};u(AP,"SparseTokensStore");let l8=AP;const ey=class ey extends KM{constructor(e,t,n,i,s,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this._bracketPairsTextModelPart=i,this._languageId=s,this._attachedViews=r,this._semanticTokens=new l8(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new V),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new V),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new V),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new c8(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,i,s]=xu(t.text);this._semanticTokens.acceptEdit(t.range,n,i,s,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new An("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this.grammarTokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this.getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,a]=ey._findLanguageBoundaries(i,s),l=Py(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&r===t.column-1){const[d,c]=ey._findLanguageBoundaries(i,s-1),h=Py(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(d,c),d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new W(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};u(ey,"TokenizationTextModelPart");let d8=ey;const Jre=class Jre extends G{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new si),this._tokens=new wA(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new si),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new V),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new V),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new Oy),this._register(en.onDidChange(s=>{const r=this.getLanguageId();s.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:s,state:r})=>{if(r){let a=this._attachedViewStates.get(s);a||(a=new u8(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Vw(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const n=u(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=en.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return Be(l),[null,null]}return[r,a]},"initializeTokenization"),[i,s]=n();if(i&&s?this._tokenizer=new s8(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var d;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((d=this._tokenizer)===null||d===void 0||d.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),this._backgroundTokenizer.value||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new a8(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i?.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new wA(this._languageIdCodec),this._debugBackgroundStates=new Vw(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var d;(d=this._debugBackgroundStates)===null||d===void 0||d.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,n,i;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[r,a]=xu(s.text);this._tokens.acceptEdit(s.range,r,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(s.range,r,a)}(n=this._debugBackgroundStates)===null||n===void 0||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=pt.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var n,i;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const s=new Hw,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(s,e,t),a=this.setTokens(s.finalize());if(r)for(const l of a.changes)(n=this._backgroundTokenizer.value)===null||n===void 0||n.requestTokens(l.fromLineNumber,l.toLineNumber+1);(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()}forceTokenization(e){var t,n;const i=new Hw;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(i,e),this.setTokens(i.finalize()),(n=this._defaultBackgroundTokenizer)===null||n===void 0||n.checkFinished()}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const n=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,n);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,n);!i.equals(s)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const i=this._textModel.validatePosition(new W(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const i=this._textModel.validatePosition(e);return this.forceTokenization(i.lineNumber),this._tokenizer.tokenizeLineWithEdit(i,t,n)}get hasTokens(){return this._tokens.hasTokens}};u(Jre,"GrammarTokens");let c8=Jre;const Qre=class Qre extends G{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Et(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){jn(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}};u(Qre,"AttachedViewHandler");let u8=Qre;const eae=class eae{constructor(){this.changeType=1}};u(eae,"ModelRawFlush");let h8=eae;const ty=class ty{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new ty(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new ty(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}};u(ty,"LineInjectedText");let fl=ty;const tae=class tae{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}};u(tae,"ModelRawLineChanged");let CA=tae;const nae=class nae{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}};u(nae,"ModelRawLinesDeleted");let g8=nae;const iae=class iae{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}};u(iae,"ModelRawLinesInserted");let f8=iae;const sae=class sae{constructor(){this.changeType=5}};u(sae,"ModelRawEOLChanged");let p8=sae;const IP=class IP{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new IP(n,i,s,r)}};u(IP,"ModelRawContentChangedEvent");let Vm=IP;const oae=class oae{constructor(e){this.changes=e}};u(oae,"ModelInjectedTextChangedEvent");let SA=oae;const ny=class ny{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Vm.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=ny._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new ny(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:d,versionId:s,isUndoing:r,isRedoing:a,isFlush:l}}};u(ny,"InternalModelContentChangeEvent");let Wm=ny;const PO=nt("undoRedoService"),rae=class rae{constructor(e,t){this.resource=e,this.elements=t}};u(rae,"ResourceEditStackSnapshot");let xA=rae;const NP=class NP{constructor(){this.id=NP._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};u(NP,"UndoRedoGroup");let Sb=NP;Sb._ID=0;Sb.None=new Sb;const RP=class RP{constructor(){this.id=RP._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};u(RP,"UndoRedoSource");let za=RP;za._ID=0;za.None=new za;var VPe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ep;function WPe(o){const e=new yA;return e.acceptChunk(o),e.finish()}u(WPe,"createTextBufferFactory");function BPe(o){const e=new yA;let t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}u(BPe,"createTextBufferFactoryFromSnapshot");function mye(o,e){let t;return typeof o=="string"?t=WPe(o):MMe(o)?t=BPe(o):t=o,t.create(e)}u(mye,"createTextBuffer");let HE=0;const UPe=999,zPe=1e4,aae=class aae{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}};u(aae,"TextModelSnapshot");let m8=aae;const z_=u(()=>{throw new Error("Invalid change accessor")},"invalidFunc");var z1;let Wd=ep=(z1=class extends G{static resolveOptions(e,t){if(t.detectIndentation){const n=aye(e,t.tabSize,t.insertSpaces);return new xm({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new xm(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return yr(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,i=null,s,r,a){super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new V),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new y8(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new V),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new V),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new V),this._eventEmitter=this._register(new w8),this._languageSelectionListener=this._register(new si),this._deltaDecorationCallCnt=0,this._attachedViews=new C8,HE++,this.id="$model"+HE,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=Ae.parse("inmemory://model/"+HE):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:d}=mye(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=d,this._options=ep.resolveOptions(this._buffer,n);const c=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new BW(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new G7(this,this._languageConfigurationService)),this._decorationProvider=this._register(new UW(this)),this._tokenizationTextModelPart=new d8(this._languageService,this._languageConfigurationService,this,this._bracketPairs,c,this._attachedViews);const h=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new L(1,1,h,this._buffer.getLineLength(h)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=g>ep.LARGE_FILE_SIZE_THRESHOLD||h>ep.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=g>ep._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=iSe(HE),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new TA,this._commandManager=new qW(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(c)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new vA([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=G.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Wm(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw Ho();const{textBuffer:t,disposable:n}=mye(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new TA,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Vm([new h8],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,s,r),0,i,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Vm([new p8],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,s,r),0,i,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],r=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),d=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=d,s.cachedVersionId=e,s.start=l-a,s.end=d-a,Lu(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=zPe?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new xm({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=aye(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),FM(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(tSe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new m8(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new An("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new An("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new An("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new An("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new An("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const h=this.getLineMaxColumn(s);r>=h&&(r=h)}const a=e.endLineNumber,l=e.endColumn;let d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),c=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(d<1)d=1,c=1;else if(d>t)d=t,c=this.getLineMaxColumn(d);else if(c<=1)c=1;else{const h=this.getLineMaxColumn(d);c>=h&&(c=h)}return n===s&&i===r&&a===d&&l===c&&e instanceof L&&!(e instanceof xe)?e:new L(s,r,d,c)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const r=this._buffer.getLineCharCode(e,t-2);if(Un(r))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(i<1)return new W(1,1);if(i>r)return new W(r,this.getLineMaxColumn(r));if(s<=1)return new W(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new W(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(Un(l))return new W(i,s-1)}return new W(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof W&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,r,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,d=Un(a),c=Un(l);return!d&&!c}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof L&&!(e instanceof xe)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;{const d=r>1?this._buffer.getLineCharCode(s,r-2):0,c=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=Un(d),g=Un(c);return!h&&!g?new L(s,r,a,l):s===a&&r===l?new L(s,r-1,a,l-1):h&&g?new L(s,r-1,a,l+1):h?new L(s,r-1,a,l):new L(s,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new L(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r,a=UPe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>L.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,g)=>h.startLineNumber-g.startLineNumber||h.startColumn-g.startColumn);const d=[];d.push(l.reduce((h,g)=>L.areIntersecting(h,g)?h.plusRange(g):(d.push(h),g)));let c;if(!n&&e.indexOf(`
`)<0){const g=new id(e,n,i,s).parseSearchRequest();if(!g)return[];c=u(f=>this.findMatchesLineByLine(f,g,r,a),"matchMapper")}else c=u(h=>hp.findMatches(this,new id(e,n,i,s),h,r,a),"matchMapper");return d.map(c).reduce((h,g)=>h.concat(g),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const d=new id(e,n,i,s).parseSearchRequest();if(!d)return null;const c=this.getLineCount();let h=new L(a.lineNumber,a.column,c,this.getLineMaxColumn(c)),g=this.findMatchesLineByLine(h,d,r,1);return hp.findNextMatch(this,new id(e,n,i,s),a,r),g.length>0||(h=new L(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(h,d,r,1),g.length>0)?g[0]:null}return hp.findNextMatch(this,new id(e,n,i,s),a,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const a=this.validatePosition(t);return hp.findPreviousMatch(this,new id(e,n,i,s),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Iv?e:new Iv(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const d=e[a];let c=!1;for(let h=0,g=s.length;h<g;h++){const f=s[h].range,p=f.startLineNumber>d.endLineNumber,b=d.startLineNumber>f.endLineNumber;if(!p&&!b){c=!0;break}}if(!c){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const d=this._trimAutoWhitespaceLines[a],c=this.getLineMaxColumn(d);let h=!0;for(let g=0,f=s.length;g<f;g++){const p=s[g].range,b=s[g].text;if(!(d<p.startLineNumber||d>p.endLineNumber)&&!(d===p.startLineNumber&&p.startColumn===c&&p.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(d===p.startLineNumber&&p.startColumn===1&&p.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){h=!1;break}}if(h){const g=new L(d,1,d,c);t.push(new Iv(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,i)}_applyUndo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,r.length!==0){for(let d=0,c=r.length;d<c;d++){const h=r[d];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let d=0,c=r.length;d<c;d++){const h=r[d],[g]=xu(h.text);this._onDidChangeDecorations.fire();const f=h.range.startLineNumber,p=h.range.endLineNumber,b=p-f,_=g,v=Math.min(b,_),y=_-b,w=s-l-y+f,C=w,S=w+_,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new W(C,1)),this.getOffsetAt(new W(S,this.getLineMaxColumn(S))),0),T=fl.fromDecorations(k),E=new pa(T);for(let D=v;D>=0;D--){const O=f+D,B=w+D;E.takeFromEndWhile(F=>F.lineNumber>B);const H=E.takeFromEndWhile(F=>F.lineNumber===B);a.push(new CA(O,this.getLineContent(B),H))}if(v<b){const D=f+v;a.push(new g8(D+1,p))}if(v<_){const D=new pa(T),O=f+v,B=_-v,H=s-l-B+O+1,F=[],$=[];for(let ee=0;ee<B;ee++){const ge=H+ee;$[ee]=this.getLineContent(ge),D.takeWhile(X=>X.lineNumber<ge),F[ee]=D.takeWhile(X=>X.lineNumber===ge)}a.push(new f8(O+1,f+_,$,F))}l+=y}this._emitContentChangedEvent(new Vm(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(i=>new CA(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new SA(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(s,r)=>this._deltaDecorationsImpl(e,[],[{range:s,options:r}])[0],changeDecoration:(s,r)=>{this._changeDecorationImpl(s,r)},changeDecorationOptions:(s,r)=>{this._changeDecorationOptionsImpl(s,_ye(r))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,r)=>s.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,s,r)};let i=null;try{i=t(n)}catch(s){Be(s)}return n.addDecoration=z_,n.changeDecoration=z_,n.changeDecorationOptions=z_,n.removeDecoration=z_,n.deltaDecorations=z_,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Be(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:bye[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,a,s),i.setOptions(bye[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1,s=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),d=this.getLineMaxColumn(l),c=new L(a,1,l,d),h=this._getDecorationsInRange(c,n,i,s);return Eve(h,this._decorationProvider.getDecorationsInRange(c,n,i)),h}getDecorationsInRange(e,t=0,n=!1,i=!1,s=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,n,s);return Eve(a,this._decorationProvider.getDecorationsInRange(r,t,n,i)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return fl.fromDecorations(i).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,i){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,n,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(n.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,i=!1){const s=this.getVersionId(),r=t.length;let a=0;const l=n.length;let d=0;this._onDidChangeDecorations.beginDeferredEmit();try{const c=new Array(l);for(;a<r||d<l;){let h=null;if(a<r){do h=this._decorations[t[a++]];while(!h&&a<r);if(h){if(h.options.after){const g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(h.options.before){const g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(h),i||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(d<l){if(!h){const v=++this._lastDecorationId,y=`${this._instanceId};${v}`;h=new _A(y,0,0),this._decorations[y]=h}const g=n[d],f=this._validateRangeRelaxedNoAllocations(g.range),p=_ye(g.options),b=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);h.ownerId=e,h.reset(s,b,_,f),h.setOptions(p),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),i||this._onDidChangeDecorations.checkAffectedAndFire(p),this._decorationsTree.insert(h),c[d]=h.id,d++}else h&&delete this._decorations[h.id]}return c}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return GPe(this.getLineContent(e))+1}},u(z1,"TextModel"),z1);Wd._MODEL_SYNC_LIMIT=50*1024*1024;Wd.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Wd.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Wd.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Di.tabSize,indentSize:Di.indentSize,insertSpaces:Di.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Di.trimAutoWhitespace,largeFileOptimizations:Di.largeFileOptimizations,bracketPairColorizationOptions:Di.bracketPairColorizationOptions};Wd=ep=VPe([dH(4,PO),dH(5,Kt),dH(6,Pt)],Wd);function GPe(o){let e=0;for(const t of o)if(t===" "||t==="	")e++;else break;return e}u(GPe,"indentOfLine");function cH(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}u(cH,"isNodeInOverviewRuler");function uH(o){return!!o.options.after||!!o.options.before}u(uH,"isNodeInjectedText");const lae=class lae{constructor(){this._decorationsTree0=new jv,this._decorationsTree1=new jv,this._injectedTextDecorationsTree=new jv}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s,r){const a=e.getVersionId(),l=this._intervalSearch(t,n,i,s,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,s,r){const a=this._decorationsTree0.intervalSearch(e,t,n,i,s,r),l=this._decorationsTree1.intervalSearch(e,t,n,i,s,r),d=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s,r);return a.concat(l).concat(d)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,n,i,s){const r=e.getVersionId(),a=this._search(t,n,i,r,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,s){if(n)return this._decorationsTree1.search(e,t,i,s);{const r=this._decorationsTree0.search(e,t,i,s),a=this._decorationsTree1.search(e,t,i,s),l=this._injectedTextDecorationsTree.search(e,t,i,s);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){uH(e)?this._injectedTextDecorationsTree.insert(e):cH(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){uH(e)?this._injectedTextDecorationsTree.delete(e):cH(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){uH(e)?this._injectedTextDecorationsTree.resolveNode(e,t):cH(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}};u(lae,"DecorationsTrees");let TA=lae;function Fl(o){return o.replace(/[^a-z0-9\-_]/gi," ")}u(Fl,"cleanClassName");const dae=class dae{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}};u(dae,"DecorationOptions");let LA=dae;const cae=class cae extends LA{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:mo.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}};u(cae,"ModelDecorationOverviewRulerOptions");let b8=cae;const uae=class uae{constructor(e){var t;this.position=(t=e?.position)!==null&&t!==void 0?t:Sm.Left}};u(uae,"ModelDecorationGlyphMarginOptions");let _8=uae;const hae=class hae extends LA{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?K.fromHex(e):t.getColor(e.id)}};u(hae,"ModelDecorationMinimapOptions");let v8=hae;const iy=class iy{static from(e){return e instanceof iy?e:new iy(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}};u(iy,"ModelDecorationInjectedTextOptions");let Vg=iy;const sy=class sy{static register(e){return new sy(e)}static createDynamic(e){return new sy(e)}constructor(e){var t,n,i,s,r,a;this.description=e.description,this.blockClassName=e.blockClassName?Fl(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(n=e.blockIsAfterEnd)!==null&&n!==void 0?n:null,this.blockPadding=(i=e.blockPadding)!==null&&i!==void 0?i:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Fl(e.className):null,this.shouldFillLineOnLineBreak=(s=e.shouldFillLineOnLineBreak)!==null&&s!==void 0?s:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new b8(e.overviewRuler):null,this.minimap=e.minimap?new v8(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new _8(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Fl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Fl(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Fl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Fl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Fl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Fl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Fl(e.afterContentClassName):null,this.after=e.after?Vg.from(e.after):null,this.before=e.before?Vg.from(e.before):null,this.hideInCommentTokens=(r=e.hideInCommentTokens)!==null&&r!==void 0?r:!1,this.hideInStringTokens=(a=e.hideInStringTokens)!==null&&a!==void 0?a:!1}};u(sy,"ModelDecorationOptions");let Fe=sy;Fe.EMPTY=Fe.register({description:"empty"});const bye=[Fe.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Fe.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Fe.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Fe.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _ye(o){return o instanceof Fe?o:Fe.createDynamic(o)}u(_ye,"_normalizeOptions");const gae=class gae extends G{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new V),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}};u(gae,"DidChangeDecorationsEmitter");let y8=gae;const fae=class fae extends G{constructor(){super(),this._fastEmitter=this._register(new V),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new V),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};u(fae,"DidChangeContentEmitter");let w8=fae;const pae=class pae{constructor(){this._onDidChangeVisibleRanges=new V,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new S8(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}};u(pae,"AttachedViews");let C8=pae;const mae=class mae{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(i=>new pt(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}};u(mae,"AttachedViewImpl");let S8=mae;const PP=class PP{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Ei(new L(1,1,1,1),0,0,new W(1,1),0),new Ei(new L(1,1,1,1),0,0,new W(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ut(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?xe.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):xe.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),l=this._validatePositionWithCache(e,s,i,a);return n.equals(r)&&i.equals(a)&&s.equals(l)?t:new Ei(L.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=PP._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new Ei(i,t.selectionStartKind,s,r,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Ei(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Ei(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new L(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Ei(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}};u(PP,"Cursor");let EA=PP;const bae=class bae{constructor(e){this.context=e,this.cursors=[new EA(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Uke(this.cursors,_r(e=>e.viewState.position,W.compare)).viewState.position}getBottomMostViewPosition(){return Bke(this.cursors,_r(e=>e.viewState.position,W.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(ut.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new EA(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(_r(n=>n.selection,L.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],r=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const d=i.index<s.index?n:n+1,c=i.index<s.index?n+1:n,h=t[c].index,g=t[d].index,f=t[c].selection,p=t[d].selection;if(!f.equalsSelection(p)){const b=f.plusRange(p),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn;let y;h===this.lastAddedCursorIndex?(y=_,this.lastAddedCursorIndex=g):y=v;let w;y?w=new xe(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):w=new xe(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[d].selection=w;const C=ut.fromModelSelection(w);e[g].setState(this.context,C.modelState,C.viewState)}for(const b of t)b.index>h&&b.index--;e.splice(h,1),t.splice(c,1),this._removeSecondaryCursor(h-1),n--}}}};u(bae,"CursorCollection");let kA=bae;const _ae=class _ae{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}};u(_ae,"CursorContext");let DA=_ae;const vae=class vae{constructor(){this.type=0}};u(vae,"ViewCompositionStartEvent");let x8=vae;const yae=class yae{constructor(){this.type=1}};u(yae,"ViewCompositionEndEvent");let T8=yae;const wae=class wae{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}};u(wae,"ViewConfigurationChangedEvent");let L8=wae;const Cae=class Cae{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}};u(Cae,"ViewCursorStateChangedEvent");let E8=Cae;const Sae=class Sae{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0)}};u(Sae,"ViewDecorationsChangedEvent");let mc=Sae;const xae=class xae{constructor(){this.type=5}};u(xae,"ViewFlushedEvent");let Tp=xae;const Tae=class Tae{constructor(e){this.type=6,this.isFocused=e}};u(Tae,"ViewFocusChangedEvent");let k8=Tae;const Lae=class Lae{constructor(){this.type=7}};u(Lae,"ViewLanguageConfigurationEvent");let D8=Lae;const Eae=class Eae{constructor(){this.type=8}};u(Eae,"ViewLineMappingChangedEvent");let Lp=Eae;const kae=class kae{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}};u(kae,"ViewLinesChangedEvent");let MA=kae;const Dae=class Dae{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}};u(Dae,"ViewLinesDeletedEvent");let Ww=Dae;const Mae=class Mae{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}};u(Mae,"ViewLinesInsertedEvent");let Bw=Mae;const Aae=class Aae{constructor(e,t,n,i,s,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=r,this.scrollType=a,this.type=12}};u(Aae,"ViewRevealRangeRequestEvent");let Bm=Aae;const Iae=class Iae{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}};u(Iae,"ViewScrollChangedEvent");let M8=Iae;const Nae=class Nae{constructor(e){this.theme=e,this.type=14}};u(Nae,"ViewThemeChangedEvent");let A8=Nae;const Rae=class Rae{constructor(e){this.type=15,this.ranges=e}};u(Rae,"ViewTokensChangedEvent");let I8=Rae;const Pae=class Pae{constructor(){this.type=16}};u(Pae,"ViewTokensColorsChangedEvent");let N8=Pae;var G1;let jPe=(G1=class{constructor(){this.type=17}},u(G1,"ViewZonesChangedEvent"),G1);const Fae=class Fae extends G{constructor(){super(),this._onEvent=this._register(new V),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new P8),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}};u(Fae,"ViewModelEventDispatcher");let R8=Fae;const Oae=class Oae{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}};u(Oae,"ViewModelEventsCollector");let P8=Oae;const FP=class FP{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new FP(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}};u(FP,"ContentSizeChangedEvent");let F8=FP;const OP=class OP{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new OP(this.oldHasFocus,e.hasFocus)}};u(OP,"FocusChangedEvent");let O8=OP;const HP=class HP{constructor(e,t,n,i,s,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new HP(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}};u(HP,"ScrollChangedEvent");let H8=HP;const Hae=class Hae{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};u(Hae,"ViewZonesChangedEvent");let V8=Hae;const Vae=class Vae{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};u(Vae,"HiddenAreasChangedEvent");let W8=Vae;const oy=class oy{constructor(e,t,n,i,s,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return oy._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new oy(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}};u(oy,"CursorStateChangedEvent");let B8=oy;const Wae=class Wae{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};u(Wae,"ReadOnlyEditAttemptEvent");let U8=Wae;const Bae=class Bae{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}};u(Bae,"ModelDecorationsChangedEvent");let z8=Bae;const Uae=class Uae{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}};u(Uae,"ModelLanguageChangedEvent");let G8=Uae;const zae=class zae{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}};u(zae,"ModelLanguageConfigurationChangedEvent");let j8=zae;const Gae=class Gae{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}};u(Gae,"ModelContentChangedEvent");let K8=Gae;const jae=class jae{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}};u(jae,"ModelOptionsChangedEvent");let $8=jae;const Kae=class Kae{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}};u(Kae,"ModelTokensChangedEvent");let q8=Kae;const $ae=class $ae extends G{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new DA(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new kA(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=wt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new DA(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;i!==null&&i.length>r&&(i=i.slice(0,r),s=!0);const a=Xv.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,s,r){const a=this._cursors.getViewPositions();let l=null,d=null;a.length>1?d=this._cursors.getViewSelections():l=L.fromPositions(a[0],a[0]),e.emitViewEvent(new Bm(t,n,l,d,i,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const r=t[i];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let d=a,c=l;r.selectionStart&&r.selectionStart.lineNumber&&(d=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(c=r.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:c,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ut.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof SA){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new kA(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const s=ut.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,s)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ut.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,ut.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new AA(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=X8.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let s=0;s<e.commands.length;s++){const r=e.commands[s];r instanceof HM&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),i.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const r=Xv.from(this._model,this);if(r.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new E8(l,a,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((d,c)=>!d.modelState.equals(i.cursorState[c].modelState))){const d=i?i.cursorState.map(h=>h.modelState.selection):null,c=i?i.modelVersionId:0;e.emitOutgoingEvent(new B8(d,a,c,r.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const r=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const d=l[0].open,c=s.text.length-r[2].length-1,h=s.text.lastIndexOf(d,c-1);if(h===-1)return null;t.push([h,c])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,d=>{if(s)for(let h=0,g=s.length;h<g;h++){const[f,p]=s[h],b=d[h],_=b.range.startLineNumber,v=b.range.startColumn-1+f,y=b.range.startColumn-1+p;r.push(new L(_,y+1,_,y+2)),a.push(new L(_,v+1,_,y+2))}const c=i(d);return c&&(this._isHandling=!0),c});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=Xv.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Be(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return AA.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new J8(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Po.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const r=yZ(t,s),a=t.substr(s,r);this._executeEditOperation(Po.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=r}}else this._executeEditOperation(Po.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,r){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const d=l.getPosition();return new xe(d.lineNumber,d.column+s,d.lineNumber,d.column+s)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Po.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,r)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(Po.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(yb.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ji(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new ji(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}};u($ae,"CursorsController");let Y8=$ae;const VP=class VP{static from(e,t){return new VP(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}};u(VP,"CursorModelState");let Xv=VP;const qae=class qae{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(L.compareRangesUsingStarts),e.sort(L.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}};u(qae,"AutoClosedAction");let AA=qae;const Yae=class Yae{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let r=0,a=i.trackedRanges.length;r<a;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let d=0,c=i.length;d<c;d++)s.hasOwnProperty(i[d].identifier.major.toString())||r.push(i[d]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,d=>{const c=[];for(let f=0;f<e.selectionsBefore.length;f++)c[f]=[];for(const f of d)f.identifier&&c[f.identifier.major].push(f);const h=u((f,p)=>f.identifier.minor-p.identifier.minor,"minorBasedSorter"),g=[];for(let f=0;f<e.selectionsBefore.length;f++)c[f].length>0?(c[f].sort(h),g[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>c[f],getTrackedSelection:p=>{const b=parseInt(p,10),_=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new xe(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new xe(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):g[f]=e.selectionsBefore[f];return g});a||(a=e.selectionsBefore);const l=[];for(const d in s)s.hasOwnProperty(d)&&l.push(parseInt(d,10));l.sort((d,c)=>c-d);for(const d of l)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let s=0;const r=u((h,g,f=!1)=>{L.isEmpty(h)&&g===""||i.push({identifier:{major:t,minor:s++},range:h,text:g,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},"addEditOperation");let a=!1;const c={addEditOperation:r,addTrackedEditOperation:u((h,g,f)=>{a=!0,r(h,g,f)},"addTrackedEditOperation"),trackSelection:u((h,g)=>{const f=xe.liftSelection(h);let p;if(f.isEmpty())if(typeof g=="boolean")g?p=2:p=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?p=2:p=3}else p=1;const b=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,p);return e.trackedRanges[b]=_,e.trackedRangesDirection[b]=f.getDirection(),b.toString()},"trackSelection")};try{n.getEditOperations(e.model,c)}catch(h){return Be(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-L.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(L.getStartPosition(i.range).isBefore(L.getEndPosition(s.range))){let r;i.identifier.major>s.identifier.major?r=i.identifier.major:r=s.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}};u(Yae,"CommandExecutor");let X8=Yae;const Xae=class Xae{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}};u(Xae,"CompositionLineState");let Z8=Xae;const tm=class tm{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new Z8(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=tm._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=tm._capture(e,t);if(!n||this._original.length!==n.length)return null;const i=[];for(let s=0,r=this._original.length;s<r;s++)i.push(tm._deduceOutcome(this._original[s],n[s]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,xg(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,CD(e.text,t.text)),s=e.text.substring(n,e.text.length-i),r=t.text.substring(n,t.text.length-i);return new N7(s,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}};u(tm,"CompositionState");let J8=tm;var KPe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const vye={getInitialState:()=>ib,tokenizeEncoded:(o,e,t)=>LO(0,t)};function $Pe(o,e,t){return KPe(this,void 0,void 0,function*(){if(!t)return yye(e,o.languageIdCodec,vye);const n=yield en.getOrCreate(t);return yye(e,o.languageIdCodec,n||vye)})}u($Pe,"tokenizeToString");function qPe(o,e,t,n,i,s,r){let a="<div>",l=n,d=0,c=!0;for(let h=0,g=e.getCount();h<g;h++){const f=e.getEndOffset(h);if(f<=n)continue;let p="";for(;l<f&&l<i;l++){const b=o.charCodeAt(l);switch(b){case 9:{let _=s-(l+d)%s;for(d+=_-1;_>0;)r&&c?(p+="&#160;",c=!1):(p+=" ",c=!0),_--;break}case 60:p+="&lt;",c=!1;break;case 62:p+="&gt;",c=!1;break;case 38:p+="&amp;",c=!1;break;case 0:p+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:p+="�",c=!1;break;case 13:p+="&#8203",c=!1;break;case 32:r&&c?(p+="&#160;",c=!1):(p+=" ",c=!0);break;default:p+=String.fromCharCode(b),c=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${p}</span>`,f>i||l>=i)break}return a+="</div>",a}u(qPe,"tokenizeLineToHTML");function yye(o,e,t){let n='<div class="monaco-tokenized-source">';const i=cl(o);let s=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r];r>0&&(n+="<br/>");const d=t.tokenizeEncoded(l,!0,s);xi.convertToEndOffset(d.tokens,l.length);const h=new xi(d.tokens,l,e).inflate();let g=0;for(let f=0,p=h.getCount();f<p;f++){const b=h.getClassName(f),_=h.getEndOffset(f);n+=`<span class="${b}">${wD(l.substring(g,_))}</span>`,g=_}s=d.endState}return n+="</div>",n}u(yye,"_tokenizeToString");const Zae=class Zae{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}};u(Zae,"PendingChanges");let Q8=Zae;const Jae=class Jae{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}};u(Jae,"EditorWhitespace");let eB=Jae;var _g;let Vxe=(_g=class{constructor(e,t,n,i){this._instanceId=iSe(++_g.INSTANCE_COUNT),this._pendingChanges=new Q8,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const r=i+s>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?s=r:i=r+1:t<e[r].afterLineNumber?s=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,r,a)=>{t=!0,i=i|0,s=s|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new eB(l,i,s,r,a)),l},changeOneWhitespace:(i,s,r)=>{t=!0,s=s|0,r=r|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:r})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const d=this._findWhitespaceIndex(l.id);d!==-1&&this._removeWhitespace(d)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const r=u(l=>{const d=[];for(const c of l)if(!i.has(c.id)){if(s.has(c.id)){const h=s.get(c.id);c.afterLineNumber=h.newAfterLineNumber,c.height=h.newHeight}d.push(c)}return d},"applyRemoveAndChange"),a=r(this._arr).concat(r(e));a.sort((l,d)=>l.afterLineNumber===d.afterLineNumber?l.ordinal-d.ordinal:l.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=_g.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const r=(i-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const r=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)i=r+1;else{if(e>=a)return r;s=r}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let d,c;a===-1?(a=l,c=r+1,d=0):(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let h=s,g=h;const f=5e5;let p=0;s>=f&&(p=Math.floor(s/f)*f,p=Math.floor(p/n)*n,g-=p);const b=[],_=e+(t-e)/2;let v=-1;for(let S=i;S<=r;S++){if(v===-1){const k=h,T=h+n;(k<=_&&_<T||k>_)&&(v=S)}for(h+=n,b[S-i]=g,g+=n;c===S;)g+=d,h+=d,a++,a>=l?c=r+1:(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){r=S;break}}v===-1&&(v=r);const y=this.getVerticalOffsetForLineNumber(r)|0;let w=i,C=r;return w<C&&s<e&&w++,w<C&&y+n>t&&C--,{bigNumbersDelta:p,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:v,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:C}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:r,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let r=n;r<=i;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},u(_g,"LinesLayout"),_g);Vxe.INSTANCE_COUNT=0;const YPe=125,Qae=class Qae{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}};u(Qae,"EditorScrollDimensions");let qh=Qae;const ele=class ele extends G{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new V),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new qh(0,0,0,0),this._scrollable=this._register(new Og({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new F8(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}};u(ele,"EditorScrollable");let tB=ele;const tle=class tle extends G{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(142),r=i.get(82);this._linesLayout=new Vxe(t,i.get(65),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new tB(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new qh(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(112)?YPe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(65)&&this._linesLayout.setLineHeight(t.get(65)),e.hasChanged(82)){const n=t.get(82);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(142)){const n=t.get(142),i=n.contentWidth,s=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new qh(i,r.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(112)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(101);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(103)?s+=Math.max(0,t-i.get(65)-i.get(82).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new qh(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new lM(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new lM(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(143),i=e.get(49),s=e.get(142);if(n.isViewportWrapping){const r=e.get(71);return t>s.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+s.verticalScrollbarWidth:t}else{const r=e.get(102)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new qh(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}};u(tle,"ViewLayout");let nB=tle;const nle=class nle{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let r;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new L(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new dM(r,s),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const i=new L(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,lD(this.configuration.options),t,n),s=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const d=[];for(let c=s;c<=r;c++)d[c-s]=[];for(let c=0,h=i.length;c<h;c++){const g=i[c],f=g.options;if(!KZ(this.model,g))continue;const p=this._getOrCreateViewModelDecoration(g),b=p.range;if(a[l++]=p,f.inlineClassName){const _=new Qc(b,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),v=Math.max(s,b.startLineNumber),y=Math.min(r,b.endLineNumber);for(let w=v;w<=y;w++)d[w-s].push(_)}if(f.beforeContentClassName&&s<=b.startLineNumber&&b.startLineNumber<=r){const _=new Qc(new L(b.startLineNumber,b.startColumn,b.startLineNumber,b.startColumn),f.beforeContentClassName,1);d[b.startLineNumber-s].push(_)}if(f.afterContentClassName&&s<=b.endLineNumber&&b.endLineNumber<=r){const _=new Qc(new L(b.endLineNumber,b.endColumn,b.endLineNumber,b.endColumn),f.afterContentClassName,2);d[b.endLineNumber-s].push(_)}}return{decorations:a,inlineDecorations:d}}};u(nle,"ViewModelDecorations");let iB=nle;function KZ(o,e){return!(e.options.hideInCommentTokens&&$Z(o,e)||e.options.hideInStringTokens&&qZ(o,e))}u(KZ,"isModelDecorationVisible");function $Z(o,e){return Wxe(o,e.range,t=>t===1)}u($Z,"isModelDecorationInComment");function qZ(o,e){return Wxe(o,e.range,t=>t===2)}u(qZ,"isModelDecorationInString");function Wxe(o,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=o.tokenization.getLineTokens(n),s=n===e.startLineNumber,r=n===e.endLineNumber;let a=s?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(r&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}u(Wxe,"testTokensInRange");function hH(o,e){return o===null?e?xb.INSTANCE:Tb.INSTANCE:new sB(o,e)}u(hH,"createModelLineProjection");const ile=class ile{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((d,c)=>new fl(0,0,d+1,this._projectionData.injectionOptions[c],0));r=fl.applyInjectedText(e.getLineContent(t),a).substring(i,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(r=wye(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,r,a){this._assertVisible();const l=this._projectionData,d=l.injectionOffsets,c=l.injectionOptions;let h=null;if(d){h=[];let f=0,p=0;for(let b=0;b<l.getOutputLineCount();b++){const _=new Array;h[b]=_;const v=b>0?l.breakOffsets[b-1]:0,y=l.breakOffsets[b];for(;p<d.length;){const w=c[p].content.length,C=d[p]+f,S=C+w;if(C>y)break;if(v<S){const k=c[p];if(k.inlineClassName){const T=b>0?l.wrappedTextIndentLength:0,E=T+Math.max(C-v,0),D=T+Math.min(S-v,y-v);E!==D&&_.push(new _9(E,D,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing))}}if(S<=y)f+=w,p++;else break}}}let g;d?g=e.tokenization.getLineTokens(t).withInserted(d.map((f,p)=>({offset:f,text:c[p].content,tokenMetadata:xi.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let f=n;f<n+i;f++){const p=s+f-n;if(!r[p]){a[p]=null;continue}a[p]=this._getViewLineData(g,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(r,a,s);let d=l.getLineContent();n>0&&(d=wye(i.wrappedTextIndentLength)+d);const c=this._projectionData.getMinOutputOffset(n)+1,h=d.length+1,g=n+1<this.getViewLineCount(),f=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new cw(d,g,c,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}};u(ile,"ModelLineProjection");let sB=ile;const sle=class sle{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Tb.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new cw(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,r,a){if(!r[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new W(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}};u(sle,"IdentityModelLineProjection");let xb=sle;xb.INSTANCE=new xb;const ole=class ole{constructor(){}isVisible(){return!1}setVisible(e){return e?xb.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};u(ole,"HiddenModelLineProjection");let Tb=ole;Tb.INSTANCE=new Tb;const gH=[""];function wye(o){if(o>=gH.length)for(let e=1;e<=o;e++)gH[e]=XPe(e);return gH[o]}u(wye,"spaces");function XPe(o){return new Array(o+1).join(" ")}u(XPe,"_makeSpaces");const rle=class rle{constructor(e,t,n,i,s,r,a,l,d,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=d,this.wordBreak=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new rB(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,r=this.createLineBreaksComputer(),a=new pa(fl.fromDecorations(i));for(let b=0;b<s;b++){const _=a.takeWhile(v=>v.lineNumber===b+1);r.addRequest(n[b],_,t?t[b]:null)}const l=r.finalize(),d=[],c=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(L.compareRangesUsingStarts);let h=1,g=0,f=-1,p=f+1<c.length?g+1:s+2;for(let b=0;b<s;b++){const _=b+1;_===p&&(f++,h=c[f].startLineNumber,g=c[f].endLineNumber,p=f+1<c.length?g+1:s+2);const v=_>=h&&_<=g,y=hH(l[b],!v);d[b]=y.getViewLineCount(),this.modelLineProjections[b]=y}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new W3(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),n=ZPe(t),i=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(L.compareRangesUsingStarts);if(n.length===i.length){let g=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(i[f])){g=!0;break}if(!g)return!1}const s=n.map(g=>({range:g,options:Fe.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=n;let a=1,l=0,d=-1,c=d+1<r.length?l+1:this.modelLineProjections.length+2,h=!1;for(let g=0;g<this.modelLineProjections.length;g++){const f=g+1;f===c&&(d++,a=r[d].startLineNumber,l=r[d].endLineNumber,c=d+1<r.length?l+1:this.modelLineProjections.length+2);let p=!1;if(f>=a&&f<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),p=!0):(h=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),p=!0)),p){const b=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,b)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,s){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,d=this.wrappingIndent===i,c=this.wordBreak===s;if(r&&a&&l&&d&&c)return!1;const h=r&&a&&!l&&d&&c;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=s;let g=null;if(h){g=[];for(let f=0,p=this.modelLineProjections.length;f<p;f++)g[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new Ww(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],d=[];for(let c=0,h=i.length;c<h;c++){const g=hH(i[c],!s);l.push(g);const f=g.getViewLineCount();a+=f,d[c]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new Bw(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),r=this.modelLineProjections[i].isVisible(),a=hH(n,r);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let d=!1,c=0,h=-1,g=0,f=-1,p=0,b=-1;s>l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=c+l-1,p=h+1,b=p+(s-l)-1,d=!0):s<l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=c+s-1,g=h+1,f=g+(l-s)-1,d=!0):(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=c+l-1),this.projectedModelLineLineCounts.setValue(i,l);const _=c<=h?new MA(c,h-c+1):null,v=g<=f?new Bw(g,f):null,y=p<=b?new Ww(p,b):null;return[d,_,v,y]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new IA(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const d=this.modelLineProjections[l-1];if(d.isVisible()){const c=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let g=c;g<h;g++)a.push(new IA(l,g))}if(!d.isVisible()&&r){const c=new W(l-1,this.model.getLineMaxColumn(l-1)+1),h=L.fromPositions(r,c);s.push(new NA(h,a)),a=[],r=null}else d.isVisible()&&!r&&(r=new W(l,1))}if(r){const l=L.fromPositions(r,this.getModelEndPositionOfViewLine(i));s.push(new NA(l,a))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,d=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,i);for(const c of a.viewLines){const g=d[c.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=c.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<c.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let p=-1;if(f.column!==-1){const v=this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(v.lineNumber===c.modelLineWrappedLineIdx)p=v.column;else if(v.lineNumber<c.modelLineWrappedLineIdx)p=this.getMinColumnOfViewLine(c);else if(v.lineNumber>c.modelLineWrappedLineIdx)return}const b=this.convertModelPositionToViewPosition(c.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===c.modelLineWrappedLineIdx?new Cd(f.visibleColumn,p,f.className,new rg(f.horizontalLine.top,b.column),-1,-1):_.lineNumber<c.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Cd(f.visibleColumn,p,f.className,new rg(f.horizontalLine.top,this.getMaxColumnOfViewLine(c)),-1,-1)});r.push(g.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],a=[],l=n.lineNumber-1,d=i.lineNumber-1;let c=null;for(let p=l;p<=d;p++){const b=this.modelLineProjections[p];if(b.isVisible()){const _=b.getViewLineNumberOfModelPosition(0,p===l?n.column:1),v=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),y=v-_+1;let w=0;y>1&&b.getViewLineMinColumn(this.model,p+1,v)===1&&(w=_===0?1:2),r.push(y),a.push(w),c===null&&(c=new W(p+1,0))}else c!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,p)),c=null)}c!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,i.lineNumber)),c=null);const h=t-e+1,g=new Array(h);let f=0;for(let p=0,b=s.length;p<b;p++){let _=s[p];const v=Math.min(h-f,r[p]),y=a[p];let w;y===2?w=0:y===1?w=1:w=v;for(let C=0;C<v;C++)C===w&&(_=0),g[f++]=_}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=i.index,a=i.remainder,l=[];for(let d=r,c=this.model.getLineCount();d<c;d++){const h=this.modelLineProjections[d];if(!h.isVisible())continue;const g=d===r?a:0;let f=h.getViewLineCount()-g,p=!1;if(s+f>t&&(p=!0,f=t-s+1),h.getViewLinesData(this.model,d+1,g,f,s-e,n,l),s+=f,p)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,r=i.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,r),d=a.getViewLineMaxColumn(this.model,s+1,r);t<l&&(t=l),t>d&&(t=d);const c=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new W(s+1,c)).equals(n)?new W(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new L(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new W(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new L(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,i=!1,s=!1){const r=this.model.validatePosition(new W(e,t)),a=r.lineNumber,l=r.column;let d=a-1,c=!1;if(s)for(;d<this.modelLineProjections.length&&!this.modelLineProjections[d].isVisible();)d++,c=!0;else for(;d>0&&!this.modelLineProjections[d].isVisible();)d--,c=!0;if(d===0&&!this.modelLineProjections[d].isVisible())return new W(i?0:1,1);const h=1+this.projectedModelLineLineCounts.getPrefixSum(d);let g;return c?s?g=this.modelLineProjections[d].getViewPositionOfModelPosition(h,1,n):g=this.modelLineProjections[d].getViewPositionOfModelPosition(h,this.model.getLineMaxColumn(d+1),n):g=this.modelLineProjections[a-1].getViewPositionOfModelPosition(h,l,n),g}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return L.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i,s){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new L(r.lineNumber,1,a.lineNumber,a.column),t,n,i,s);let l=[];const d=r.lineNumber-1,c=a.lineNumber-1;let h=null;for(let b=d;b<=c;b++)if(this.modelLineProjections[b].isVisible())h===null&&(h=new W(b+1,b===d?r.column:1));else if(h!==null){const v=this.model.getLineMaxColumn(b);l=l.concat(this.model.getDecorationsInRange(new L(h.lineNumber,h.column,b,v),t,n,i)),h=null}h!==null&&(l=l.concat(this.model.getDecorationsInRange(new L(h.lineNumber,h.column,a.lineNumber,a.column),t,n,i)),h=null),l.sort((b,_)=>{const v=L.compareRangesUsingStarts(b.range,_.range);return v===0?b.id<_.id?-1:b.id>_.id?1:0:v});const g=[];let f=0,p=null;for(const b of l){const _=b.id;p!==_&&(p=_,g[f++]=b)}return g}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}};u(rle,"ViewModelLinesFromProjectedModel");let oB=rle;function ZPe(o){if(o.length===0)return[];const e=o.slice();e.sort(L.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let s=1,r=e.length;s<r;s++){const a=e[s];a.startLineNumber>i+1?(t.push(new L(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new L(n,1,i,1)),t}u(ZPe,"normalizeLineRanges");const ale=class ale{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}};u(ale,"ViewLineInfo");let IA=ale;const lle=class lle{constructor(e,t){this.modelRange=e,this.viewLines=t}};u(lle,"ViewLineInfoGroupedByModelRange");let NA=lle;const dle=class dle{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}};u(dle,"CoordinatesConverter");let rB=dle;const cle=class cle{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new lB(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new Ww(t,n)}onModelLinesInserted(e,t,n,i){return new Bw(t,n)}onModelLineChanged(e,t,n){return[!1,new MA(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new cw(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let r=e;r<=t;r++){const a=r-e;s[a]=n[a]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,n,i,s){return this.model.getDecorationsInRange(e,t,n,i,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}};u(cle,"ViewModelLinesFromModelAsIs");let aB=cle;const ule=class ule{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}};u(ule,"IdentityCoordinatesConverter");let lB=ule;var j1;let JPe=(j1=class extends G{constructor(e,t,n,i,s,r,a,l,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=d,this.hiddenAreasModel=new uB,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new R8,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new pc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Et(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=dB.create(this.model),this.model.isTooLargeForTokenization())this._lines=new aB(this.model);else{const c=this._configuration.options,h=c.get(49),g=c.get(136),f=c.get(143),p=c.get(135),b=c.get(127);this._lines=new oB(this._editorId,this.model,i,s,h,this.model.getOptions().tabSize,g,f.wrappingColumn,p,b)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Y8(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new nB(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(c=>{c.scrollTopChanged&&this._handleVisibleLinesChanged(),c.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new M8(c)),this._eventDispatcher.emitOutgoingEvent(new H8(c.oldScrollWidth,c.oldScrollLeft,c.oldScrollHeight,c.oldScrollTop,c.scrollWidth,c.scrollLeft,c.scrollHeight,c.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(c=>{this._eventDispatcher.emitOutgoingEvent(c)})),this._decorations=new iB(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(c=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,c)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Mw.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new N8)})),this._register(this._themeService.onDidColorThemeChange(c=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new A8(c))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new L(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new k8(e)),this._eventDispatcher.emitOutgoingEvent(new O8(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new x8)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new T8)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new W(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new RA(t,this._viewportStart.startLineDelta)}return new RA(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),i=this._configuration.options,s=i.get(49),r=i.get(136),a=i.get(143),l=i.get(135),d=i.get(127);this._lines.setWrappingSettings(s,r,a.wrappingColumn,l,d)&&(e.emitViewEvent(new Tp),e.emitViewEvent(new Lp),e.emitViewEvent(new mc(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(89)&&(this._decorations.reset(),e.emitViewEvent(new mc(null))),e.emitViewEvent(new L8(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),pc.shouldRecreate(t)&&(this.cursorConfig=new pc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let i=!1,s=!1;const r=e instanceof Wm?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Wm?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let g=0;g<h.detail.length;g++){const f=h.detail[g];let p=h.injectedTexts[g];p&&(p=p.filter(b=>!b.ownerId||b.ownerId===this._editorId)),l.addRequest(f,p,null)}break}case 2:{let g=null;h.injectedText&&(g=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,g,null);break}}const d=l.finalize(),c=new pa(d);for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new Tp),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);g!==null&&(n.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),i=!0;break}case 4:{const g=c.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,g);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),i=!0;break}case 2:{const g=c.dequeue(),[f,p,b,_]=this._lines.onModelLineChanged(a,h.lineNumber,g);s=f,p&&n.emitViewEvent(p),b&&(n.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),_&&(n.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!i&&s&&(n.emitViewEvent(new Lp),n.emitViewEvent(new mc(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const i=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof Wm&&n.emitOutgoingEvent(new K8(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new W(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new W(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new I8(t)),this._eventDispatcher.emitOutgoingEvent(new q8(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new D8),this.cursorConfig=new pc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new j8(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new pc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new G8(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Tp),t.emitViewEvent(new Lp),t.emitViewEvent(new mc(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new pc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new $8(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new mc(e)),this._eventDispatcher.emitOutgoingEvent(new z8(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const i=this._captureStableViewport();let s=!1;try{const r=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(n),s&&(r.emitViewEvent(new Tp),r.emitViewEvent(new Lp),r.emitViewEvent(new mc(null)),this._cursor.onLineMappingChanged(r),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new W8)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(142),t=this._configuration.options.get(65),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new L(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let s=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,d=t.endColumn;for(let c=0,h=n.length;c<h;c++){const g=n[c].startLineNumber,f=n[c].endLineNumber;f<r||g>l||(r<g&&(i[s++]=new L(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=f+1,a=1)}return(r<l||r===l&&a<d)&&(i[s++]=new L(r,a,l,d)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new L(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new L(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new W(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=$i(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=ha(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new as(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new b9(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,lD(this._configuration.options)),n=new cB;for(const i of t){const s=i.options,r=s.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,s.zIndex,d,c,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n?.invalidateCachedColor();const i=t.options.minimap;i?.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(L.compareRangesUsingStarts);let s=!1,r=!1;for(const l of e)l.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const l=e.map(c=>c.startLineNumber);let d="";for(let c=0;c<l.length;c++)c>0&&l[c-1]===l[c]||(d+=this.model.getLineContent(l[c])+i);return d}if(s&&t){const l=[];let d=0;for(const c of e){const h=c.startLineNumber;c.isEmpty()?h!==d&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(c,n?2:0)),d=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===go||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const c=i.startLineNumber;i=new L(c,this.model.getLineMinColumn(c),c,this.model.getLineMaxColumn(c))}const s=this._configuration.options.get(49),r=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Us.fontFamily;let d;return l?d=Us.fontFamily:(d=s.fontFamily,d=d.replace(/"/g,"'"),/[,']/.test(d)||/[+ ]/.test(d)&&(d=`'${d}'`),d=`${d}, ${Us.fontFamily}`),{mode:n,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${d};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let d=n;d<=s;d++){const c=this.model.tokenization.getLineTokens(d),h=c.getLineContent(),g=d===n?i-1:0,f=d===s?r-1:h.length;h===""?l+="<br>":l+=qPe(h,c.inflate(),t,g,f,a,Si)}return l}_getColorMap(){const e=en.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=K.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new U8);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Bm(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Bm(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(r=>r.emitViewEvent(new Bm(e,!1,n,null,i,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new jPe),this._eventDispatcher.emitOutgoingEvent(new V8))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}},u(j1,"ViewModel"),j1);const WP=class WP{static create(e){const t=e._setTrackedRange(null,new L(1,1,1,1),1);return new WP(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new W(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new L(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=r-s}invalidate(){this._isValid=!1}};u(WP,"ViewportStart");let dB=WP;const hle=class hle{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],d=a[a.length-1];if(l===s&&d+1>=n){i>d&&(a[a.length-1]=i);return}a.push(s,n,i)}else{const a=new cM(e,t,[s,n,i]);this._asMap[e]=a,this.asArray.push(a)}}};u(hle,"OverviewRulerDecorations");let cB=hle;const gle=class gle{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&Cye(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>QPe(t,n),[]);return Cye(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}};u(gle,"HiddenAreasModel");let uB=gle;function QPe(o,e){const t=[];let n=0,i=0;for(;n<o.length&&i<e.length;){const s=o[n],r=e[i];if(s.endLineNumber<r.startLineNumber-1)t.push(o[n++]);else if(r.endLineNumber<s.startLineNumber-1)t.push(e[i++]);else{const a=Math.min(s.startLineNumber,r.startLineNumber),l=Math.max(s.endLineNumber,r.endLineNumber);t.push(new L(a,1,l,1)),n++,i++}}for(;n<o.length;)t.push(o[n++]);for(;i<e.length;)t.push(e[i++]);return t}u(QPe,"mergeLineRangeArray");function Cye(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].equalsRange(e[t]))return!1;return!0}u(Cye,"rangeArraysEqual");const fle=class fle{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}};u(fle,"StableViewport");let RA=fle;const ple=class ple{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}};u(ple,"ServiceCollection");let Wg=ple;var Uw;(function(o){o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error"})(Uw||(Uw={}));(function(o){const e="error",t="warning",n="warn",i="info",s="ignore";function r(l){return l?up(e,l)?o.Error:up(t,l)||up(n,l)?o.Warning:up(i,l)?o.Info:o.Ignore:o.Ignore}u(r,"fromValue"),o.fromValue=r;function a(l){switch(l){case o.Error:return e;case o.Warning:return t;case o.Info:return i;default:return s}}u(a,"toString"),o.toString=a})(Uw||(Uw={}));const mn=Uw;var FO=mn;const _n=nt("notificationService"),mle=class mle{};u(mle,"NoOpNotification");let hB=mle;const ble=class ble{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&i>this.injectionOffsets[s];s++)i<this.injectionOffsets[s]+this.injectionOptions[s].content.length?i=this.injectionOffsets[s]:i-=this.injectionOptions[s].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,s=0,r=0;for(;n<=i;){s=n+(i-n)/2|0;const l=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=r)i=s-1;else if(e>l)n=s+1;else break;else if(e<r)i=s-1;else if(e>=l)n=s+1;else break}let a=e-r;return s>0&&(a+=this.wrappedTextIndentLength),new Ep(s,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new Ep(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new Ep(e+1,this.getMinOutputOffset(e+1))}return new Ep(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&Sye(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(xye(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let s=n.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[n.injectedTextIndex]&&!(Sye(this.injectionOptions[s].cursorStops)||(i-=this.injectionOptions[s].content.length,xye(this.injectionOptions[s].cursorStops)));)s--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,s=n.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)i+=this.injectionOptions[s+1].content.length,s++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,s=n.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)i-=this.injectionOptions[s-1].content.length,s--;return i}yO()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let s=0;s<t.length;s++){const r=n[s].content.length,a=t[s]+i,l=t[s]+i+r;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:r};i+=r}}}};u(ble,"ModelLineProjectionData");let lg=ble;function Sye(o){return o==null?!0:o===da.Right||o===da.Both}u(Sye,"hasRightCursorStop");function xye(o){return o==null?!0:o===da.Left||o===da.Both}u(xye,"hasLeftCursorStop");const _le=class _le{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new W(e+this.outputLineIndex,this.outputOffset+1)}};u(_le,"OutputPosition");let Ep=_le;const BP=class BP{static create(e){return new BP(e.get(131),e.get(130))}constructor(e,t){this.classifier=new fB(e,t)}createLineBreaksComputer(e,t,n,i,s){const r=[],a=[],l=[];return{addRequest:(d,c,h)=>{r.push(d),a.push(c),l.push(h)},finalize:()=>{const d=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let h=0,g=r.length;h<g;h++){const f=a[h],p=l[h];p&&!p.injectionOptions&&!f?c[h]=eFe(this.classifier,p,r[h],t,n,d,i,s):c[h]=tFe(this.classifier,r[h],f,t,n,d,i,s)}return pB.length=0,mB.length=0,c}}}};u(BP,"MonospaceLineBreaksComputerFactory");let gB=BP;const vle=class vle extends rb{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}};u(vle,"WrappingCharacterClassifier");let fB=vle,pB=[],mB=[];function eFe(o,e,t,n,i,s,r,a){if(i===-1)return null;const l=t.length;if(l<=1)return null;const d=a==="keepAll",c=e.breakOffsets,h=e.breakOffsetsVisibleColumn,g=Bxe(t,n,i,s,r),f=i-g,p=pB,b=mB;let _=0,v=0,y=0,w=i;const C=c.length;let S=0;if(S>=0){let k=Math.abs(h[S]-w);for(;S+1<C;){const T=Math.abs(h[S+1]-w);if(T>=k)break;k=T,S++}}for(;S<C;){let k=S<0?0:c[S],T=S<0?0:h[S];v>k&&(k=v,T=y);let E=0,D=0,O=0,B=0;if(T<=w){let F=T,$=k===0?0:t.charCodeAt(k-1),ee=k===0?0:o.get($),ge=!0;for(let X=k;X<l;X++){const R=X,z=t.charCodeAt(X);let te,fe;if(Un(z)?(X++,te=0,fe=2):(te=o.get(z),fe=Zv(z,F,n,s)),R>v&&bB($,ee,z,te,d)&&(E=R,D=F),F+=fe,F>w){R>v?(O=R,B=F-fe):(O=X+1,B=F),F-D>f&&(E=0),ge=!1;break}$=z,ee=te}if(ge){_>0&&(p[_]=c[c.length-1],b[_]=h[c.length-1],_++);break}}if(E===0){let F=T,$=t.charCodeAt(k),ee=o.get($),ge=!1;for(let X=k-1;X>=v;X--){const R=X+1,z=t.charCodeAt(X);if(z===9){ge=!0;break}let te,fe;if(Tg(z)?(X--,te=0,fe=2):(te=o.get(z),fe=hu(z)?s:1),F<=w){if(O===0&&(O=R,B=F),F<=w-f)break;if(bB(z,te,$,ee,d)){E=R,D=F;break}}F-=fe,$=z,ee=te}if(E!==0){const X=f-(B-D);if(X<=n){const R=t.charCodeAt(O);let z;Un(R)?z=2:z=Zv(R,B,n,s),X-z<0&&(E=0)}}if(ge){S--;continue}}if(E===0&&(E=O,D=B),E<=v){const F=t.charCodeAt(v);Un(F)?(E=v+2,D=y+2):(E=v+1,D=y+Zv(F,y,n,s))}for(v=E,p[_]=E,y=D,b[_]=D,_++,w=D+f;S<0||S<C&&h[S]<D;)S++;let H=Math.abs(h[S]-w);for(;S+1<C;){const F=Math.abs(h[S+1]-w);if(F>=H)break;H=F,S++}}return _===0?null:(p.length=_,b.length=_,pB=e.breakOffsets,mB=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=b,e.wrappedTextIndentLength=g,e)}u(eFe,"createLineBreaksFromPreviousLineBreaks");function tFe(o,e,t,n,i,s,r,a){const l=fl.applyInjectedText(e,t);let d,c;if(t&&t.length>0?(d=t.map(D=>D.options),c=t.map(D=>D.column-1)):(d=null,c=null),i===-1)return d?new lg(c,d,[l.length],[],0):null;const h=l.length;if(h<=1)return d?new lg(c,d,[l.length],[],0):null;const g=a==="keepAll",f=Bxe(l,n,i,s,r),p=i-f,b=[],_=[];let v=0,y=0,w=0,C=i,S=l.charCodeAt(0),k=o.get(S),T=Zv(S,0,n,s),E=1;Un(S)&&(T+=1,S=l.charCodeAt(1),k=o.get(S),E++);for(let D=E;D<h;D++){const O=D,B=l.charCodeAt(D);let H,F;Un(B)?(D++,H=0,F=2):(H=o.get(B),F=Zv(B,T,n,s)),bB(S,k,B,H,g)&&(y=O,w=T),T+=F,T>C&&((y===0||T-w>p)&&(y=O,w=T-F),b[v]=y,_[v]=w,v++,C=w+p,y=0),S=B,k=H}return v===0&&(!t||t.length===0)?null:(b[v]=h,_[v]=T,new lg(c,d,b,_,f))}u(tFe,"createLineBreaks$1");function Zv(o,e,t,n){return o===9?t-e%t:hu(o)||o<32?n:1}u(Zv,"computeCharWidth");function Tye(o,e){return e-o%e}u(Tye,"tabCharacterWidth");function bB(o,e,t,n,i){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!i&&e===3&&n!==2||!i&&n===3&&e!==1)}u(bB,"canBreak");function Bxe(o,e,t,n,i){let s=0;if(i!==0){const r=$i(o);if(r!==-1){for(let l=0;l<r;l++){const d=o.charCodeAt(l)===9?Tye(s,e):1;s+=d}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const d=Tye(s,e);s+=d}s+n>t&&(s=0)}}return s}u(Bxe,"computeWrappedTextIndentLength");const fH=Kd("domLineBreaksComputer",{createHTML:o=>o}),UP=class UP{static create(){return new UP}constructor(){}createLineBreaksComputer(e,t,n,i,s){const r=[],a=[];return{addRequest:(l,d,c)=>{r.push(l),a.push(d)},finalize:()=>nFe(r,e,t,n,i,s,a)}}};u(UP,"DOMLineBreaksComputerFactory");let _B=UP;function nFe(o,e,t,n,i,s,r){var a;function l(D){const O=r[D];if(O){const B=fl.applyInjectedText(o[D],O),H=O.map($=>$.options),F=O.map($=>$.column-1);return new lg(F,H,[B.length],[],0)}else return null}if(u(l,"createEmptyLineBreakWithPossiblyInjectedText"),n===-1){const D=[];for(let O=0,B=o.length;O<B;O++)D[O]=l(O);return D}const d=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(i===3?2:i===2?1:0)),g=Math.ceil(e.spaceWidth*h),f=document.createElement("div");Kn(f,e);const p=new Pd(1e4),b=[],_=[],v=[],y=[],w=[];for(let D=0;D<o.length;D++){const O=fl.applyInjectedText(o[D],r[D]);let B=0,H=0,F=d;if(i!==0)if(B=$i(O),B===-1)B=0;else{for(let X=0;X<B;X++){const R=O.charCodeAt(X)===9?t-H%t:1;H+=R}const ge=Math.ceil(e.spaceWidth*H);ge+e.typicalFullwidthCharacterWidth>d?(B=0,H=0):F=d-ge}const $=O.substr(B),ee=iFe($,H,t,F,p,g);b[D]=B,_[D]=H,v[D]=$,y[D]=ee[0],w[D]=ee[1]}const C=p.build(),S=(a=fH?.createHTML(C))!==null&&a!==void 0?a:C;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",s==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),document.body.appendChild(f);const k=document.createRange(),T=Array.prototype.slice.call(f.children,0),E=[];for(let D=0;D<o.length;D++){const O=T[D],B=sFe(k,O,v[D],y[D]);if(B===null){E[D]=l(D);continue}const H=b[D],F=_[D]+h,$=w[D],ee=[];for(let z=0,te=B.length;z<te;z++)ee[z]=$[B[z]];if(H!==0)for(let z=0,te=B.length;z<te;z++)B[z]+=H;let ge,X;const R=r[D];R?(ge=R.map(z=>z.options),X=R.map(z=>z.column-1)):(ge=null,X=null),E[D]=new lg(X,ge,B,ee,F)}return document.body.removeChild(f),E}u(nFe,"createLineBreaks");function iFe(o,e,t,n,i,s){if(s!==0){const g=String(s);i.appendString('<div style="text-indent: -'),i.appendString(g),i.appendString("px; padding-left: "),i.appendString(g),i.appendString("px; box-sizing: border-box; width:")}else i.appendString('<div style="width:');i.appendString(String(n)),i.appendString('px;">');const r=o.length;let a=e,l=0;const d=[],c=[];let h=0<r?o.charCodeAt(0):0;i.appendString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&i.appendString("</span><span>"),d[g]=l,c[g]=a;const f=h;h=g+1<r?o.charCodeAt(g+1):0;let p=1,b=1;switch(f){case 9:p=t-a%t,b=p;for(let _=1;_<=p;_++)_<p?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 32:h===32?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 60:i.appendString("&lt;");break;case 62:i.appendString("&gt;");break;case 38:i.appendString("&amp;");break;case 0:i.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.appendCharCode(65533);break;default:hu(f)&&b++,f<32?i.appendCharCode(9216+f):i.appendCharCode(f)}l+=p,a+=b}return i.appendString("</span>"),d[o.length]=l,c[o.length]=a,i.appendString("</div>"),[d,c]}u(iFe,"renderLine");function sFe(o,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{vB(o,i,n,0,null,t.length-1,null,s)}catch(r){return console.log(r),null}return s.length===0?null:(s.push(t.length),s)}u(sFe,"readLineBreaks");function vB(o,e,t,n,i,s,r,a){if(n===s||(i=i||pH(o,e,t[n],t[n+1]),r=r||pH(o,e,t[s],t[s+1]),Math.abs(i[0].top-r[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,d=pH(o,e,t[l],t[l+1]);vB(o,e,t,n,i,l,d,a),vB(o,e,t,l,d,s,r,a)}u(vB,"discoverBreaks");function pH(o,e,t,n){return o.setStart(e[t/16384|0].firstChild,t%16384),o.setEnd(e[n/16384|0].firstChild,n%16384),o.getClientRects()}u(pH,"readClientRect");const Uxe={value:m("accessibleDiffViewer","Accessible Diff Viewer"),original:"Accessible Diff Viewer"},zP=class zP extends $o{constructor(){super({id:zP.id,title:{value:m("editor.action.accessibleDiffViewer.next","Go to Next Difference"),original:"Go to Next Difference"},category:Uxe,precondition:ne.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=zxe(e);t?.accessibleDiffViewerNext()}};u(zP,"AccessibleDiffViewerNext");let Lb=zP;Lb.id="editor.action.accessibleDiffViewer.next";Ni.appendMenuItem(A.EditorTitle,{command:{id:Lb.id,title:m("Open Accessible Diff Viewer","Open Accessible Diff Viewer")},order:10,group:"2_diff",when:ne.and(M.accessibleDiffViewerVisible.negate(),ne.has("isInDiffEditor"))});const GP=class GP extends $o{constructor(){super({id:GP.id,title:{value:m("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),original:"Go to Previous Difference"},category:Uxe,precondition:ne.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=zxe(e);t?.accessibleDiffViewerPrev()}};u(GP,"AccessibleDiffViewerPrev");let zw=GP;zw.id="editor.action.accessibleDiffViewer.prev";function zxe(o){var e;const t=o.get(gt),n=t.listDiffEditors(),i=(e=t.getFocusedCodeEditor())!==null&&e!==void 0?e:t.getActiveCodeEditor();if(!i)return null;for(let s=0,r=n.length;s<r;s++){const a=n[s];if(a.getModifiedEditor().getId()===i.getId()||a.getOriginalEditor().getId()===i.getId())return a}if(document.activeElement)for(const s of n){const r=s.getContainerDomNode();if(oFe(r,document.activeElement))return s}return null}u(zxe,"findFocusedDiffEditor");function oFe(o,e){let t=e;for(;t;){if(t===o)return!0;t=t.parentElement}return!1}u(oFe,"isElementOrParentOf");lt.registerCommandAlias("editor.action.diffReview.next",Lb.id);Sn(Lb);lt.registerCommandAlias("editor.action.diffReview.prev",zw.id);Sn(zw);const yle=class yle extends G{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new Oy),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const i of t){if(this._pending.has(i.id)){Be(new Error(`Cannot have two contributions with the same id ${i.id}`));continue}this._pending.set(i.id,i)}this._instantiateSome(0),this._register(fd(()=>{this._instantiateSome(1)})),this._register(fd(()=>{this._instantiateSome(2)})),this._register(fd(()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register(fd(()=>{this._instantiateSome(1)},50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){Be(n)}}}};u(yle,"CodeEditorContributions");let yB=yle;var rFe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ol=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},aFe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},ch;let lFe=0;var K1;let dFe=(K1=class{constructor(e,t,n,i,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s,this.attachedView=r}dispose(){wt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},u(K1,"ModelData"),K1);var $1;let Bg=ch=($1=class extends G{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,n,i,s,r,a,l,d,c,h,g){var f;super(),this.languageConfigurationService=h,this._deliveryQueue=CDe(),this._contributions=this._register(new yB),this._onDidDispose=this._register(new V),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new PA({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new PA({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new mi(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new mi(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new mi(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new mi(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new mi(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new mi(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new V({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const p=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=p.overflowWidgetsDomNode,delete p.overflowWidgetsDomNode,this._id=++lFe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,p,c)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const y=this._configuration.options;if(v.hasChanged(142)){const w=y.get(142);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=s,this._commandService=r,this._themeService=l,this._register(new wB(this,this._contextKeyService)),this._register(new CB(this,this._contextKeyService,g)),this._instantiationService=i.createChild(new Wg([Re,this._contextKeyService])),this._modelData=null,this._focusTracker=new SB(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let b;Array.isArray(n.contributions)?b=n.contributions:b=ng.getEditorContributions(),this._contributions.initialize(this,b,this._instantiationService);for(const v of ng.getEditorActions()){if(this._actions.has(v.id)){Be(new Error(`Cannot have two actions with the same id ${v.id}`));continue}const y=new rA(v.id,v.label,v.alias,(f=v.precondition)!==null&&f!==void 0?f:void 0,()=>this._instantiationService.invokeFunction(w=>Promise.resolve(v.runEditorCommand(w,this,null))),this._contextKeyService);this._actions.set(y.id,y)}const _=u(()=>!this._configuration.options.get(89)&&this._configuration.options.get(35).enabled,"isDropIntoEnabled");this._register(new I9(this._domElement,{onDragEnter:()=>{},onDragOver:v=>{if(!_())return;const y=this.getTargetAtClientPoint(v.clientX,v.clientY);y?.position&&this.showDropIndicatorAt(y.position)},onDrop:v=>aFe(this,void 0,void 0,function*(){if(!_()||(this.removeDropIndicator(),!v.dataTransfer))return;const y=this.getTargetAtClientPoint(v.clientX,v.clientY);y?.position&&this._onDropIntoEditor.fire({position:y.position,event:v})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n){return new H9(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return v_.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Qn.getWordAtPosition(this._modelData.model,this._configuration.options.get(128),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,i)}getTopForLineNumber(e,t=!1){return this._modelData?ch._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?ch._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,i=!1){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,i)}getBottomForLineNumber(e,t=!1){return this._modelData?ch._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var n;(n=this._modelData)===null||n===void 0||n.viewModel.setHiddenAreas(e.map(i=>L.lift(i)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Rn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!L.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new L(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=xe.isISelection(e),i=L.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new xe(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!L.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(L.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!xe.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}handleInitialized(){var e;(e=this._getViewModel())===null||e===void 0||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run(n)).then(void 0,Be);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,n,i,e);const l=r.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new L(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=ng.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,Be)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(89)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(89)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(89))return!1;let i;return n?Array.isArray(n)?i=u(()=>n,"cursorStateComputer"):i=n:i=u(()=>null,"cursorStateComputer"),this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new xB(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,lD(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,lD(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(142)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(142),s=ch._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:n.get(65)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Kn(e,this._configuration.options.get(49))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),i=new JPe(this._id,this._configuration,e,_B.create(),gB.create(this._configuration.options),a=>jo(a),this.languageConfigurationService,this._themeService,n);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const h=this.getOption(78),g=m("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",h);this._notificationService.prompt(FO.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:m("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let h=0,g=a.selections.length;h<g;h++)l[h]=a.selections[h].getPosition();const d={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(d);const c={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(c);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,d=a.length;l<d;l++){const c=a[l];s.addContentWidget(this._contentWidgets[c])}a=Object.keys(this._overlayWidgets);for(let l=0,d=a.length;l<d;l++){const c=a[l];s.addOverlayWidget(this._overlayWidgets[c])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,d=a.length;l<d;l++){const c=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[c])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new dFe(e,i,s,r,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,r,a,l)=>{this._paste("keyboard",s,r,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,r,a,l)=>{this._compositionType("keyboard",s,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,r,a,l)=>{const d={text:s,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",d)},type:s=>{const r={text:s};this._commandService.executeCommand("type",r)},compositionType:(s,r,a,l)=>{if(a||l){const d={text:s,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",d)}else{const d={text:s,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",d)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new WM(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new SW(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:ch.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}},u($1,"CodeEditorWidget"),$1);Bg.dropIntoEditorDecorationOptions=Fe.register({description:"workbench-dnd-target",className:"dnd-target"});Bg=ch=rFe([Ol(3,Pe),Ol(4,gt),Ol(5,un),Ol(6,Re),Ol(7,On),Ol(8,_n),Ol(9,El),Ol(10,Pt),Ol(11,we)],Bg);const wle=class wle extends G{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new V(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new V(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}};u(wle,"BooleanEventEmitter");let PA=wle;const Cle=class Cle extends V{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}};u(Cle,"InteractionEmitter");let mi=Cle;const Sle=class Sle extends G{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=M.editorSimpleInput.bindTo(t),this._editorFocus=M.focus.bindTo(t),this._textInputFocus=M.textInputFocus.bindTo(t),this._editorTextFocus=M.editorTextFocus.bindTo(t),this._editorTabMovesFocus=M.tabMovesFocus.bindTo(t),this._editorReadonly=M.readOnly.bindTo(t),this._inDiffEditor=M.inDiffEditor.bindTo(t),this._editorColumnSelection=M.columnSelection.bindTo(t),this._hasMultipleSelections=M.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=M.hasNonEmptySelection.bindTo(t),this._canUndo=M.canUndo.bindTo(t),this._canRedo=M.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(ig.onDidChangeTabFocus(()=>this._editorTabMovesFocus.set(ig.getTabFocusMode("editorFocus")))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(ig.getTabFocusMode("editorFocus")),this._editorReadonly.set(e.get(89)),this._inDiffEditor.set(e.get(60)),this._editorColumnSelection.set(e.get(21))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}};u(Sle,"EditorContextKeysManager");let wB=Sle;const xle=class xle extends G{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=M.languageId.bindTo(t),this._hasCompletionItemProvider=M.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=M.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=M.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=M.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=M.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=M.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=M.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=M.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=M.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=M.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=M.hasReferenceProvider.bindTo(t),this._hasRenameProvider=M.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=M.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=M.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=M.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=M.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=M.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=M.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=M.isInWalkThroughSnippet.bindTo(t);const i=u(()=>this._update(),"update");this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===qe.walkThroughSnippet)})}};u(xle,"EditorModeContext");let CB=xle;const Tle=class Tle extends G{constructor(e){super(),this._onChange=this._register(new V),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(ul(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}};u(Tle,"CodeEditorWidgetFocusTracker");let SB=Tle;const Lle=class Lle{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}};u(Lle,"EditorDecorationsCollection");let xB=Lle;const cFe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),uFe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function mH(o){return cFe+encodeURIComponent(o.toString())+uFe}u(mH,"getSquigglySVGData");const hFe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),gFe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function fFe(o){return hFe+encodeURIComponent(o.toString())+gFe}u(fFe,"getDotDotDotSVGData");Ir((o,e)=>{const t=o.getColor(Ya);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${mH(t)}") repeat-x bottom left; }`);const n=o.getColor(ao);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${mH(n)}") repeat-x bottom left; }`);const i=o.getColor(lo);i&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${mH(i)}") repeat-x bottom left; }`);const s=o.getColor(WNe);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${fFe(s)}") no-repeat bottom left; }`);const r=o.getColor(v2e);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});var S_=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const pFe=!1;var FA;(function(o){o.North="north",o.South="south",o.East="east",o.West="west"})(FA||(FA={}));let mFe=4;const bFe=new V;let _Fe=300;const vFe=new V,Ele=class Ele{constructor(){this.disposables=new ie}get onPointerMove(){return this.disposables.add(new Qe(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Qe(window,"mouseup")).event}dispose(){this.disposables.dispose()}};u(Ele,"MouseEventFactory");let Gw=Ele;S_([xn],Gw.prototype,"onPointerMove",null);S_([xn],Gw.prototype,"onPointerUp",null);const kle=class kle{get onPointerMove(){return this.disposables.add(new Qe(this.el,Nt.Change)).event}get onPointerUp(){return this.disposables.add(new Qe(this.el,Nt.End)).event}constructor(e){this.el=e,this.disposables=new ie}dispose(){this.disposables.dispose()}};u(kle,"GestureEventFactory");let jw=kle;S_([xn],jw.prototype,"onPointerMove",null);S_([xn],jw.prototype,"onPointerUp",null);const Dle=class Dle{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}};u(Dle,"OrthogonalPointerEventFactory");let Eb=Dle;S_([xn],Eb.prototype,"onPointerMove",null);S_([xn],Eb.prototype,"onPointerUp",null);const Lye="pointer-events-disabled",rr=class rr extends G{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=u(n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Q(this.el,re(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(He(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Qe(this._orthogonalStartDragHandle,"mouseenter")).event(()=>rr.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Qe(this._orthogonalStartDragHandle,"mouseleave")).event(()=>rr.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))},"onChange");this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=u(n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Q(this.el,re(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(He(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Qe(this._orthogonalEndDragHandle,"mouseenter")).event(()=>rr.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Qe(this._orthogonalEndDragHandle,"mouseleave")).event(()=>rr.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))},"onChange");this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=_Fe,this.hoverDelayer=this._register(new Uo(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new V),this._onDidStart=this._register(new V),this._onDidChange=this._register(new V),this._onDidReset=this._register(new V),this._onDidEnd=this._register(new V),this.orthogonalStartSashDisposables=this._register(new ie),this.orthogonalStartDragHandleDisposables=this._register(new ie),this.orthogonalEndSashDisposables=this._register(new ie),this.orthogonalEndDragHandleDisposables=this._register(new ie),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Q(e,re(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ot&&this.el.classList.add("mac");const i=this._register(new Qe(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new Gw),this));const s=this._register(new Qe(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new Qe(this.el,"mouseenter")).event;this._register(r(()=>rr.onMouseEnter(this)));const a=this._register(new Qe(this.el,"mouseleave")).event;this._register(a(()=>rr.onMouseLeave(this))),this._register(oi.addTarget(this.el));const l=this._register(new Qe(this.el,Nt.Start)).event;this._register(l(h=>this.onPointerStart(h,new jw(this.el)),this));const d=this._register(new Qe(this.el,Nt.Tap)).event;let c;this._register(d(h=>{if(c){clearTimeout(c),c=void 0,this.onPointerDoublePress(h);return}clearTimeout(c),c=setTimeout(()=>c=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=mFe,this._register(bFe.event(h=>{this.size=h,this.layout()}))),this._register(vFe.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",pFe),this.layout()}onPointerStart(e,t){Ke.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new Eb(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Eb(t))),!this.state)return;const i=document.getElementsByTagName("iframe");for(const p of i)p.classList.add(Lye);const s=e.pageX,r=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const d=Ko(this.el),c=u(()=>{let p="";n?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=ot?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=ot?"col-resize":"ew-resize",d.textContent=`* { cursor: ${p} !important; }`},"updateStyle"),h=new ie;c(),n||this.onDidEnablementChange.event(c,null,h);const g=u(p=>{Ke.stop(p,!1);const b={startX:s,currentX:p.pageX,startY:r,currentY:p.pageY,altKey:a};this._onDidChange.fire(b)},"onPointerMove"),f=u(p=>{Ke.stop(p,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const b of i)b.classList.remove(Lye)},"onPointerUp");t.onPointerMove(g,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&rr.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&rr.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){rr.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const n=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!n||!(n instanceof HTMLElement))&&n.classList.contains("orthogonal-drag-handle"))return n.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};u(rr,"Sash");let mr=rr;var Eye,kye;const Mle=class Mle{constructor(e,t){this.uri=e,this.value=t}};u(Mle,"ResourceMapEntry");let TB=Mle;const nm=class nm{constructor(e,t){this[Eye]="ResourceMap",e instanceof nm?(this.map=new Map(e.map),this.toKey=t??nm.defaultToKey):(this.map=new Map,this.toKey=e??nm.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new TB(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Eye=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};u(nm,"ResourceMap");let ws=nm;ws.defaultToKey=o=>o.toString();const Ale=class Ale{constructor(){this[kye]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(kye=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}};u(Ale,"LinkedMap");let LB=Ale;const Ile=class Ile extends LB{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};u(Ile,"LRUCache");let pl=Ile;function YZ(...o){return function(e,t){for(let n=0,i=o.length;n<i;n++){const s=o[n](e,t);if(s)return s}return null}}u(YZ,"or");Gxe.bind(void 0,!1);const Kw=Gxe.bind(void 0,!0);function Gxe(o,e,t){if(!t||t.length<e.length)return null;let n;return o?n=_Z(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}u(Gxe,"_matchesPrefix");function jxe(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}u(jxe,"matchesContiguousSubString");function Kxe(o,e){return EB(o.toLowerCase(),e.toLowerCase(),0,0)}u(Kxe,"matchesSubString");function EB(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]===e[n]){let i=null;return(i=EB(o,e,t+1,n+1))?JZ({start:n,end:n+1},i):null}return EB(o,e,t,n+1)}u(EB,"_matchesSubString");function XZ(o){return 97<=o&&o<=122}u(XZ,"isLower");function OO(o){return 65<=o&&o<=90}u(OO,"isUpper");function ZZ(o){return 48<=o&&o<=57}u(ZZ,"isNumber");function $xe(o){return o===32||o===9||o===10||o===13}u($xe,"isWhitespace");const qxe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>qxe.add(o.charCodeAt(0)));function OA(o){return $xe(o)||qxe.has(o)}u(OA,"isWordSeparator");function yFe(o,e){return o===e||OA(o)&&OA(e)}u(yFe,"charactersMatch");function Yxe(o){return XZ(o)||OO(o)||ZZ(o)}u(Yxe,"isAlphanumeric");function JZ(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}u(JZ,"join");function Xxe(o,e){for(let t=e;t<o.length;t++){const n=o.charCodeAt(t);if(OO(n)||ZZ(n)||t>0&&!Yxe(o.charCodeAt(t-1)))return t}return o.length}u(Xxe,"nextAnchor");function kB(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=kB(o,e,t+1,n+1);!i&&(s=Xxe(e,s))<e.length;)i=kB(o,e,t+1,s),s++;return i===null?null:JZ({start:n,end:n+1},i)}}u(kB,"_matchesCamelCase");function wFe(o){let e=0,t=0,n=0,i=0,s=0;for(let c=0;c<o.length;c++)s=o.charCodeAt(c),OO(s)&&e++,XZ(s)&&t++,Yxe(s)&&n++,ZZ(s)&&i++;const r=e/o.length,a=t/o.length,l=n/o.length,d=i/o.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:d}}u(wFe,"analyzeCamelCaseWord");function CFe(o){const{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}u(CFe,"isUpperCaseWord");function SFe(o){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=o;return t>.2&&e<.8&&n>.6&&i<.2}u(SFe,"isCamelCaseWord");function xFe(o){let e=0,t=0,n=0,i=0;for(let s=0;s<o.length;s++)n=o.charCodeAt(s),OO(n)&&e++,XZ(n)&&t++,$xe(n)&&i++;return(e===0||t===0)&&i===0?o.length<=30:e<=5}u(xFe,"isCamelCasePattern");function Zxe(o,e){if(!e||(e=e.trim(),e.length===0)||!xFe(o)||e.length>60)return null;const t=wFe(e);if(!SFe(t)){if(!CFe(t))return null;e=e.toLowerCase()}let n=null,i=0;for(o=o.toLowerCase();i<e.length&&(n=kB(o,e,0,i))===null;)i=Xxe(e,i+1);return n}u(Zxe,"matchesCamelCase");function TFe(o,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(o=o.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=DB(o,e,0,i,t))===null;)i=Jxe(e,i+1);return n}u(TFe,"matchesWords");function DB(o,e,t,n,i){if(t===o.length)return[];if(n===e.length)return null;if(yFe(o.charCodeAt(t),e.charCodeAt(n))){let s=null,r=n+1;if(s=DB(o,e,t+1,n+1,i),!i)for(;!s&&(r=Jxe(e,r))<e.length;)s=DB(o,e,t+1,r,i),r++;return s?o.charCodeAt(t)!==e.charCodeAt(n)?s:JZ({start:n,end:n+1},s):null}else return null}u(DB,"_matchesWords");function Jxe(o,e){for(let t=e;t<o.length;t++)if(OA(o.charCodeAt(t))||t>0&&OA(o.charCodeAt(t-1)))return t;return o.length}u(Jxe,"nextWord");const LFe=YZ(Kw,Zxe,jxe),EFe=YZ(Kw,Zxe,Kxe),Dye=new pl(1e4);function Mye(o,e,t=!1){if(typeof o!="string"||typeof e!="string")return null;let n=Dye.get(o);n||(n=new RegExp(ZDe(o),"i"),Dye.set(o,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?EFe(o,e):LFe(o,e)}u(Mye,"matchesFuzzy");function kFe(o,e){const t=Ug(o,o.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?iE(t):null}u(kFe,"matchesFuzzy2");function DFe(o,e,t,n,i,s){const r=Math.min(13,o.length);for(;t<r;t++){const a=Ug(o,e,t,n,i,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,s]}u(DFe,"anyScore");function iE(o){if(typeof o>"u")return[];const e=[],t=o[1];for(let n=o.length-1;n>1;n--){const i=o[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}u(iE,"createMatches");const Vc=128;function QZ(){const o=[],e=[];for(let t=0;t<=Vc;t++)e[t]=0;for(let t=0;t<=Vc;t++)o.push(e.slice(0));return o}u(QZ,"initTable");function Qxe(o){const e=[];for(let t=0;t<=o;t++)e[t]=0;return e}u(Qxe,"initArr");const eTe=Qxe(2*Vc),MB=Qxe(2*Vc),Hl=QZ(),sh=QZ(),VE=QZ();function WE(o,e){if(e<0||e>=o.length)return!1;const t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!wZ(t)}}u(WE,"isSeparatorAtPos");function Aye(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}u(Aye,"isWhitespaceAtPos");function Vk(o,e,t){return e[o]!==t[o]}u(Vk,"isUpperCaseAtPos");function MFe(o,e,t,n,i,s,r=!1){for(;e<t&&i<s;)o[e]===n[i]&&(r&&(eTe[e]=i),e+=1),i+=1;return e===t}u(MFe,"isPatternInWord");var fa;(function(o){o.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}u(e,"isDefault"),o.isDefault=e})(fa||(fa={}));const Nle=class Nle{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};u(Nle,"FuzzyScoreOptions");let kb=Nle;kb.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function Ug(o,e,t,n,i,s,r=kb.default){const a=o.length>Vc?Vc:o.length,l=n.length>Vc?Vc:n.length;if(t>=a||s>=l||a-t>l-s||!MFe(e,t,a,i,s,l,!0))return;AFe(a,l,t,s,e,i);let d=1,c=1,h=t,g=s;const f=[!1];for(d=1,h=t;h<a;d++,h++){const y=eTe[h],w=MB[h],C=h+1<a?MB[h+1]:l;for(c=y-s+1,g=y;g<C;c++,g++){let S=Number.MIN_SAFE_INTEGER,k=!1;g<=w&&(S=IFe(o,e,h,t,n,i,g,l,s,Hl[d-1][c-1]===0,f));let T=0;S!==Number.MAX_SAFE_INTEGER&&(k=!0,T=S+sh[d-1][c-1]);const E=g>y,D=E?sh[d][c-1]+(Hl[d][c-1]>0?-5:0):0,O=g>y+1&&Hl[d][c-1]>0,B=O?sh[d][c-2]+(Hl[d][c-2]>0?-5:0):0;if(O&&(!E||B>=D)&&(!k||B>=T))sh[d][c]=B,VE[d][c]=3,Hl[d][c]=0;else if(E&&(!k||D>=T))sh[d][c]=D,VE[d][c]=2,Hl[d][c]=0;else if(k)sh[d][c]=T,VE[d][c]=1,Hl[d][c]=Hl[d-1][c-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;d--,c--;const p=[sh[d][c],s];let b=0,_=0;for(;d>=1;){let y=c;do{const w=VE[d][y];if(w===3)y=y-2;else if(w===2)y=y-1;else break}while(y>=1);b>1&&e[t+d-1]===i[s+c-1]&&!Vk(y+s-1,n,i)&&b+1>Hl[d][y]&&(y=c),y===c?b++:b=1,_||(_=y),d--,c=y-1,p.push(c)}l===a&&r.boostFullMatch&&(p[0]+=2);const v=_-a;return p[0]-=v,p}u(Ug,"fuzzyScore");function AFe(o,e,t,n,i,s){let r=o-1,a=e-1;for(;r>=t&&a>=n;)i[r]===s[a]&&(MB[r]=a,r--),a--}u(AFe,"_fillInMaxWordMatchPos");function IFe(o,e,t,n,i,s,r,a,l,d,c){if(e[t]!==s[r])return Number.MIN_SAFE_INTEGER;let h=1,g=!1;return r===t-n?h=o[t]===i[r]?7:5:Vk(r,i,s)&&(r===0||!Vk(r-1,i,s))?(h=o[t]===i[r]?7:5,g=!0):WE(s,r)&&(r===0||!WE(s,r-1))?h=5:(WE(s,r-1)||Aye(s,r-1))&&(h=5,g=!0),h>1&&t===n&&(c[0]=!0),g||(g=Vk(r,i,s)||WE(s,r-1)||Aye(s,r-1)),t===n?r>l&&(h-=g?3:5):d?h+=g?2:0:h+=g?0:1,r+1===a&&(h-=g?3:5),h}u(IFe,"_doScore");function NFe(o,e,t,n,i,s,r){return RFe(o,e,t,n,i,s,!0,r)}u(NFe,"fuzzyScoreGracefulAggressive");function RFe(o,e,t,n,i,s,r,a){let l=Ug(o,e,t,n,i,s,a);if(l&&!r)return l;if(o.length>=3){const d=Math.min(7,o.length-1);for(let c=t+1;c<d;c++){const h=PFe(o,c);if(h){const g=Ug(h,h.toLowerCase(),t,n,i,s,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}u(RFe,"fuzzyScoreWithPermutations");function PFe(o,e){if(e+1>=o.length)return;const t=o[e],n=o[e+1];if(t!==n)return o.slice(0,e)+n+t+o.slice(e+2)}u(PFe,"nextTypoPermutation");const FFe="$(",eJ=new RegExp(`\\$\\(${Te.iconNameExpression}(?:${Te.iconModifierExpression})?\\)`,"g"),OFe=new RegExp(`(\\\\)?${eJ.source}`,"g");function HFe(o){return o.replace(OFe,(e,t)=>t?e:`\\${e}`)}u(HFe,"escapeIcons");const VFe=new RegExp(`\\\\${eJ.source}`,"g");function WFe(o){return o.replace(VFe,e=>`\\${e}`)}u(WFe,"markdownEscapeEscapedIcons");const BFe=new RegExp(`(\\s)?(\\\\)?${eJ.source}(\\s)?`,"g");function tJ(o){return o.indexOf(FFe)===-1?o:o.replace(BFe,(e,t,n,i)=>n?e:t||i||"")}u(tJ,"stripIcons");function UFe(o){return o?o.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}u(UFe,"getCodiconAriaLabel");const bH=new RegExp(`\\$\\(${Te.iconNameCharacter}+\\)`,"g");function _v(o){bH.lastIndex=0;let e="";const t=[];let n=0;for(;;){const i=bH.lastIndex,s=bH.exec(o),r=o.substring(i,s?.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(n)}if(!s)break;n+=s[0].length}return{text:e,iconOffsets:t}}u(_v,"parseLabelWithIcons");function _H(o,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return Mye(o,n,t);const s=YL(n," "),r=n.length-s.length,a=Mye(o,s,t);if(a)for(const l of a){const d=i[l.start+r]+r;l.start+=d,l.end+=d}return a}u(_H,"matchesFuzzyIconAware");const Rle=class Rle{constructor(e="",t=!1){var n,i,s;if(this.value=e,typeof this.value!="string")throw Ho("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=GFe(this.supportThemeIcons?HFe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(po(t),"g");return e.replace(n,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};u(Rle,"MarkdownString");let zn=Rle;function Db(o){return nu(o)?!o.value:Array.isArray(o)?o.every(Db):!0}u(Db,"isEmptyMarkdownString");function nu(o){return o instanceof zn?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||typeof o.isTrusted=="object"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}u(nu,"isMarkdownString");function zFe(o,e){return o===e?!0:!o||!e?!1:o.value===e.value&&o.isTrusted===e.isTrusted&&o.supportThemeIcons===e.supportThemeIcons&&o.supportHtml===e.supportHtml&&(o.baseUri===e.baseUri||!!o.baseUri&&!!e.baseUri&&UZ(Ae.from(o.baseUri),Ae.from(e.baseUri)))}u(zFe,"markdownStringEqual");function GFe(o){return o.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}u(GFe,"escapeMarkdownSyntaxTokens");function BE(o){return o.replace(/"/g,"&quot;")}u(BE,"escapeDoubleQuotes");function vH(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}u(vH,"removeMarkdownEscapes");function jFe(o){const e=[],t=o.split("|").map(i=>i.trim());o=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),r=i?i[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(r));l&&e.push(`width="${a}"`),d&&e.push(`height="${r}"`)}return{href:o,dimensions:e}}u(jFe,"parseHrefAndDimensions");const ry=class ry{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new ry(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}return new ry(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,i,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=i,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}};u(ry,"StableEditorScrollState");let ba=ry;const $w={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:bn.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var AB=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function KFe(o,e){rs(e)?o.title=tJ(e):e?.markdownNotSupportedFallback?o.title=e.markdownNotSupportedFallback:o.removeAttribute("title")}u(KFe,"setupNativeHover");const Ple=class Ple{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t,n){var i;return AB(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||rs(e)||e instanceof HTMLElement)s=e;else if(!Ry(e.markdown))s=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new En;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)})}show(e,t,n){const i=this._hoverWidget;if(this.hasContent(e)){const s=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i},n);this._hoverWidget=this.hoverDelegate.showHover(s,t)}i?.dispose()}hasContent(e){return e?nu(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}};u(Ple,"UpdatableHoverWidget");let IB=Ple;function tTe(o,e,t,n){let i,s;const r=u((h,g)=>{var f;const p=s!==void 0;h&&(s?.dispose(),s=void 0),g&&(i?.dispose(),i=void 0),p&&((f=o.onDidHideHover)===null||f===void 0||f.call(o))},"hideHover"),a=u((h,g,f)=>new bo(()=>AB(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new IB(o,f||e,h>0),yield s.update(t,g,n))}),h),"triggerShowHover"),l=u(()=>{if(i)return;const h=new ie,g=u(b=>r(!1,b.fromElement===e),"onMouseLeave");h.add(q(e,pe.MOUSE_LEAVE,g,!0));const f=u(()=>r(!0,!0),"onMouseDown");h.add(q(e,pe.MOUSE_DOWN,f,!0));const p={targetElements:[e],dispose:()=>{}};if(o.placement===void 0||o.placement==="mouse"){const b=u(_=>{p.x=_.x+10,_.target instanceof HTMLElement&&_.target.classList.contains("action-label")&&r(!0,!0)},"onMouseMove");h.add(q(e,pe.MOUSE_MOVE,b,!0))}h.add(a(o.delay,!1,p)),i=h},"onMouseOver"),d=q(e,pe.MOUSE_OVER,l,!0);return{show:h=>{r(!1,!0),a(0,h)},hide:()=>{r(!0,!0)},update:(h,g)=>AB(this,void 0,void 0,function*(){t=h,yield s?.update(t,void 0,g)}),dispose:()=>{d.dispose(),r(!0,!0)}}}u(tTe,"setupCustomHover");function $Fe(o,e={}){const t=nJ(e);return t.textContent=o,t}u($Fe,"renderText");function qFe(o,e={}){const t=nJ(e);return nTe(t,YFe(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}u(qFe,"renderFormattedText");function nJ(o){const e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}u(nJ,"createElement");const Fle=class Fle{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};u(Fle,"StringStream");let NB=Fle;function nTe(o,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(Jt(s,"click",r=>{t.callback(String(e.index),r)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=o);i&&o!==i&&o.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{nTe(i,s,t,n)})}u(nTe,"_renderFormattedText");function YFe(o,e){const t={type:1,children:[]};let n=0,i=t;const s=[],r=new NB(o);for(;!r.eos();){let a=r.next();const l=a==="\\"&&RB(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&XFe(a,e)&&a===r.peek()){r.advance(),i.type===2&&(i=s.pop());const d=RB(a,e);if(i.type===d||i.type===5&&d===6)i=s.pop();else{const c={type:d,children:[]};d===5&&(c.index=n,n++),i.children.push(c),s.push(i),i=c}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const d={type:2,content:a};i.children.push(d),s.push(i),i=d}else i.content+=a}return i.type===2&&(i=s.pop()),t}u(YFe,"parseFormattedText");function XFe(o,e){return RB(o,e)!==0}u(XFe,"isFormatTag");function RB(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}u(RB,"formatTagType");const ZFe=new RegExp(`(\\\\)?\\$\\((${Te.iconNameExpression}(?:${Te.iconModifierExpression})?)\\)`,"g");function iu(o){const e=new Array;let t,n=0,i=0;for(;(t=ZFe.exec(o))!==null;){i=t.index||0,n<i&&e.push(o.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,r]=t;e.push(s?`$(${r})`:PB({id:r}))}return n<o.length&&e.push(o.substring(n)),e}u(iu,"renderLabelWithIcons");function PB(o){const e=re("span");return e.classList.add(...Te.asClassNameArray(o)),e}u(PB,"renderIcon");const Ole=class Ole{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}};u(Ole,"IdGenerator");let qw=Ole;const FB=new qw("id#");let cs={};(function(){function o(e,t){t(cs)}u(o,"define"),o.amd=!0,function(e,t){typeof o=="function"&&o.amd?o(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(se,Z){for(var Y=0;Y<Z.length;Y++){var N=Z[Y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(se,N.key,N)}}u(t,"_defineProperties");function n(se,Z,Y){return Z&&t(se.prototype,Z),Y&&t(se,Y),Object.defineProperty(se,"prototype",{writable:!1}),se}u(n,"_createClass");function i(se,Z){if(se){if(typeof se=="string")return s(se,Z);var Y=Object.prototype.toString.call(se).slice(8,-1);if(Y==="Object"&&se.constructor&&(Y=se.constructor.name),Y==="Map"||Y==="Set")return Array.from(se);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return s(se,Z)}}u(i,"_unsupportedIterableToArray");function s(se,Z){(Z==null||Z>se.length)&&(Z=se.length);for(var Y=0,N=new Array(Z);Y<Z;Y++)N[Y]=se[Y];return N}u(s,"_arrayLikeToArray");function r(se,Z){var Y=typeof Symbol<"u"&&se[Symbol.iterator]||se["@@iterator"];if(Y)return(Y=Y.call(se)).next.bind(Y);if(Array.isArray(se)||(Y=i(se))||Z&&se&&typeof se.length=="number"){Y&&(se=Y);var N=0;return function(){return N>=se.length?{done:!0}:{done:!1,value:se[N++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u(r,"_createForOfIteratorHelperLoose");function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}u(a,"getDefaults"),e.defaults=a();function l(se){e.defaults=se}u(l,"changeDefaults");var d=/[&<>"']/,c=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,g=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=u(function(Z){return f[Z]},"getEscapeReplacement");function b(se,Z){if(Z){if(d.test(se))return se.replace(c,p)}else if(h.test(se))return se.replace(g,p);return se}u(b,"escape");var _=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(se){return se.replace(_,function(Z,Y){return Y=Y.toLowerCase(),Y==="colon"?":":Y.charAt(0)==="#"?Y.charAt(1)==="x"?String.fromCharCode(parseInt(Y.substring(2),16)):String.fromCharCode(+Y.substring(1)):""})}u(v,"unescape");var y=/(^|[^\[])\^/g;function w(se,Z){se=typeof se=="string"?se:se.source,Z=Z||"";var Y={replace:u(function(P,j){return j=j.source||j,j=j.replace(y,"$1"),se=se.replace(P,j),Y},"replace"),getRegex:u(function(){return new RegExp(se,Z)},"getRegex")};return Y}u(w,"edit");var C=/[^\w:]/g,S=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(se,Z,Y){if(se){var N;try{N=decodeURIComponent(v(Y)).replace(C,"").toLowerCase()}catch{return null}if(N.indexOf("javascript:")===0||N.indexOf("vbscript:")===0||N.indexOf("data:")===0)return null}Z&&!S.test(Y)&&(Y=B(Z,Y));try{Y=encodeURI(Y).replace(/%25/g,"%")}catch{return null}return Y}u(k,"cleanUrl");var T={},E=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/;function B(se,Z){T[" "+se]||(E.test(se)?T[" "+se]=se+"/":T[" "+se]=ee(se,"/",!0)),se=T[" "+se];var Y=se.indexOf(":")===-1;return Z.substring(0,2)==="//"?Y?Z:se.replace(D,"$1")+Z:Z.charAt(0)==="/"?Y?Z:se.replace(O,"$1")+Z:se+Z}u(B,"resolveUrl");var H={exec:u(function(){},"noopTest")};function F(se){for(var Z=1,Y,N;Z<arguments.length;Z++){Y=arguments[Z];for(N in Y)Object.prototype.hasOwnProperty.call(Y,N)&&(se[N]=Y[N])}return se}u(F,"merge");function $(se,Z){var Y=se.replace(/\|/g,function(j,U,oe){for(var ve=!1,Me=U;--Me>=0&&oe[Me]==="\\";)ve=!ve;return ve?"|":" |"}),N=Y.split(/ \|/),P=0;if(N[0].trim()||N.shift(),N.length>0&&!N[N.length-1].trim()&&N.pop(),N.length>Z)N.splice(Z);else for(;N.length<Z;)N.push("");for(;P<N.length;P++)N[P]=N[P].trim().replace(/\\\|/g,"|");return N}u($,"splitCells");function ee(se,Z,Y){var N=se.length;if(N===0)return"";for(var P=0;P<N;){var j=se.charAt(N-P-1);if(j===Z&&!Y)P++;else if(j!==Z&&Y)P++;else break}return se.slice(0,N-P)}u(ee,"rtrim");function ge(se,Z){if(se.indexOf(Z[1])===-1)return-1;for(var Y=se.length,N=0,P=0;P<Y;P++)if(se[P]==="\\")P++;else if(se[P]===Z[0])N++;else if(se[P]===Z[1]&&(N--,N<0))return P;return-1}u(ge,"findClosingBracket");function X(se){se&&se.sanitize&&!se.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u(X,"checkSanitizeDeprecation");function R(se,Z){if(Z<1)return"";for(var Y="";Z>1;)Z&1&&(Y+=se),Z>>=1,se+=se;return Y+se}u(R,"repeatString");function z(se,Z,Y,N){var P=Z.href,j=Z.title?b(Z.title):null,U=se[1].replace(/\\([\[\]])/g,"$1");if(se[0].charAt(0)!=="!"){N.state.inLink=!0;var oe={type:"link",raw:Y,href:P,title:j,text:U,tokens:N.inlineTokens(U)};return N.state.inLink=!1,oe}return{type:"image",raw:Y,href:P,title:j,text:b(U)}}u(z,"outputLink");function te(se,Z){var Y=se.match(/^(\s+)(?:```)/);if(Y===null)return Z;var N=Y[1];return Z.split(`
`).map(function(P){var j=P.match(/^\s+/);if(j===null)return P;var U=j[0];return U.length>=N.length?P.slice(N.length):P}).join(`
`)}u(te,"indentCodeCompensation");var fe=function(){function se(Y){this.options=Y||e.defaults}u(se,"Tokenizer");var Z=se.prototype;return Z.space=u(function(N){var P=this.rules.block.newline.exec(N);if(P&&P[0].length>0)return{type:"space",raw:P[0]}},"space"),Z.code=u(function(N){var P=this.rules.block.code.exec(N);if(P){var j=P[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:P[0],codeBlockStyle:"indented",text:this.options.pedantic?j:ee(j,`
`)}}},"code"),Z.fences=u(function(N){var P=this.rules.block.fences.exec(N);if(P){var j=P[0],U=te(j,P[3]||"");return{type:"code",raw:j,lang:P[2]?P[2].trim():P[2],text:U}}},"fences"),Z.heading=u(function(N){var P=this.rules.block.heading.exec(N);if(P){var j=P[2].trim();if(/#$/.test(j)){var U=ee(j,"#");(this.options.pedantic||!U||/ $/.test(U))&&(j=U.trim())}return{type:"heading",raw:P[0],depth:P[1].length,text:j,tokens:this.lexer.inline(j)}}},"heading"),Z.hr=u(function(N){var P=this.rules.block.hr.exec(N);if(P)return{type:"hr",raw:P[0]}},"hr"),Z.blockquote=u(function(N){var P=this.rules.block.blockquote.exec(N);if(P){var j=P[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:P[0],tokens:this.lexer.blockTokens(j,[]),text:j}}},"blockquote"),Z.list=u(function(N){var P=this.rules.block.list.exec(N);if(P){var j,U,oe,ve,Me,Ie,$e,Ge,Ft,kt,Ve,gn,fn=P[1].trim(),nr=fn.length>1,Ct={type:"list",raw:"",ordered:nr,start:nr?+fn.slice(0,-1):"",loose:!1,items:[]};fn=nr?"\\d{1,9}\\"+fn.slice(-1):"\\"+fn,this.options.pedantic&&(fn=nr?fn:"[*+-]");for(var Nn=new RegExp("^( {0,3}"+fn+")((?:[	 ][^\\n]*)?(?:\\n|$))");N&&(gn=!1,!(!(P=Nn.exec(N))||this.rules.block.hr.test(N)));){if(j=P[0],N=N.substring(j.length),Ge=P[2].split(`
`,1)[0],Ft=N.split(`
`,1)[0],this.options.pedantic?(ve=2,Ve=Ge.trimLeft()):(ve=P[2].search(/[^ ]/),ve=ve>4?1:ve,Ve=Ge.slice(ve),ve+=P[1].length),Ie=!1,!Ge&&/^ *$/.test(Ft)&&(j+=Ft+`
`,N=N.substring(Ft.length+1),gn=!0),!gn)for(var Ju=new RegExp("^ {0,"+Math.min(3,ve-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Qu=new RegExp("^ {0,"+Math.min(3,ve-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Or=new RegExp("^ {0,"+Math.min(3,ve-1)+"}(?:```|~~~)"),Zd=new RegExp("^ {0,"+Math.min(3,ve-1)+"}#");N&&(kt=N.split(`
`,1)[0],Ge=kt,this.options.pedantic&&(Ge=Ge.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Or.test(Ge)||Zd.test(Ge)||Ju.test(Ge)||Qu.test(N)));){if(Ge.search(/[^ ]/)>=ve||!Ge.trim())Ve+=`
`+Ge.slice(ve);else if(!Ie)Ve+=`
`+Ge;else break;!Ie&&!Ge.trim()&&(Ie=!0),j+=kt+`
`,N=N.substring(kt.length+1)}Ct.loose||($e?Ct.loose=!0:/\n *\n *$/.test(j)&&($e=!0)),this.options.gfm&&(U=/^\[[ xX]\] /.exec(Ve),U&&(oe=U[0]!=="[ ] ",Ve=Ve.replace(/^\[[ xX]\] +/,""))),Ct.items.push({type:"list_item",raw:j,task:!!U,checked:oe,loose:!1,text:Ve}),Ct.raw+=j}Ct.items[Ct.items.length-1].raw=j.trimRight(),Ct.items[Ct.items.length-1].text=Ve.trimRight(),Ct.raw=Ct.raw.trimRight();var eh=Ct.items.length;for(Me=0;Me<eh;Me++){this.lexer.state.top=!1,Ct.items[Me].tokens=this.lexer.blockTokens(Ct.items[Me].text,[]);var th=Ct.items[Me].tokens.filter(function(nh){return nh.type==="space"}),Ff=th.every(function(nh){for(var L4=nh.raw.split(""),La=0,D_=r(L4),M_;!(M_=D_()).done;){var mE=M_.value;if(mE===`
`&&(La+=1),La>1)return!0}return!1});!Ct.loose&&th.length&&Ff&&(Ct.loose=!0,Ct.items[Me].loose=!0)}return Ct}},"list"),Z.html=u(function(N){var P=this.rules.block.html.exec(N);if(P){var j={type:"html",raw:P[0],pre:!this.options.sanitizer&&(P[1]==="pre"||P[1]==="script"||P[1]==="style"),text:P[0]};if(this.options.sanitize){var U=this.options.sanitizer?this.options.sanitizer(P[0]):b(P[0]);j.type="paragraph",j.text=U,j.tokens=this.lexer.inline(U)}return j}},"html"),Z.def=u(function(N){var P=this.rules.block.def.exec(N);if(P){P[3]&&(P[3]=P[3].substring(1,P[3].length-1));var j=P[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:j,raw:P[0],href:P[2],title:P[3]}}},"def"),Z.table=u(function(N){var P=this.rules.block.table.exec(N);if(P){var j={type:"table",header:$(P[1]).map(function($e){return{text:$e}}),align:P[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:P[3]&&P[3].trim()?P[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(j.header.length===j.align.length){j.raw=P[0];var U=j.align.length,oe,ve,Me,Ie;for(oe=0;oe<U;oe++)/^ *-+: *$/.test(j.align[oe])?j.align[oe]="right":/^ *:-+: *$/.test(j.align[oe])?j.align[oe]="center":/^ *:-+ *$/.test(j.align[oe])?j.align[oe]="left":j.align[oe]=null;for(U=j.rows.length,oe=0;oe<U;oe++)j.rows[oe]=$(j.rows[oe],j.header.length).map(function($e){return{text:$e}});for(U=j.header.length,ve=0;ve<U;ve++)j.header[ve].tokens=this.lexer.inline(j.header[ve].text);for(U=j.rows.length,ve=0;ve<U;ve++)for(Ie=j.rows[ve],Me=0;Me<Ie.length;Me++)Ie[Me].tokens=this.lexer.inline(Ie[Me].text);return j}}},"table"),Z.lheading=u(function(N){var P=this.rules.block.lheading.exec(N);if(P)return{type:"heading",raw:P[0],depth:P[2].charAt(0)==="="?1:2,text:P[1],tokens:this.lexer.inline(P[1])}},"lheading"),Z.paragraph=u(function(N){var P=this.rules.block.paragraph.exec(N);if(P){var j=P[1].charAt(P[1].length-1)===`
`?P[1].slice(0,-1):P[1];return{type:"paragraph",raw:P[0],text:j,tokens:this.lexer.inline(j)}}},"paragraph"),Z.text=u(function(N){var P=this.rules.block.text.exec(N);if(P)return{type:"text",raw:P[0],text:P[0],tokens:this.lexer.inline(P[0])}},"text"),Z.escape=u(function(N){var P=this.rules.inline.escape.exec(N);if(P)return{type:"escape",raw:P[0],text:b(P[1])}},"escape$1"),Z.tag=u(function(N){var P=this.rules.inline.tag.exec(N);if(P)return!this.lexer.state.inLink&&/^<a /i.test(P[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(P[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(P[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(P[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:P[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(P[0]):b(P[0]):P[0]}},"tag"),Z.link=u(function(N){var P=this.rules.inline.link.exec(N);if(P){var j=P[2].trim();if(!this.options.pedantic&&/^</.test(j)){if(!/>$/.test(j))return;var U=ee(j.slice(0,-1),"\\");if((j.length-U.length)%2===0)return}else{var oe=ge(P[2],"()");if(oe>-1){var ve=P[0].indexOf("!")===0?5:4,Me=ve+P[1].length+oe;P[2]=P[2].substring(0,oe),P[0]=P[0].substring(0,Me).trim(),P[3]=""}}var Ie=P[2],$e="";if(this.options.pedantic){var Ge=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ie);Ge&&(Ie=Ge[1],$e=Ge[3])}else $e=P[3]?P[3].slice(1,-1):"";return Ie=Ie.trim(),/^</.test(Ie)&&(this.options.pedantic&&!/>$/.test(j)?Ie=Ie.slice(1):Ie=Ie.slice(1,-1)),z(P,{href:Ie&&Ie.replace(this.rules.inline._escapes,"$1"),title:$e&&$e.replace(this.rules.inline._escapes,"$1")},P[0],this.lexer)}},"link"),Z.reflink=u(function(N,P){var j;if((j=this.rules.inline.reflink.exec(N))||(j=this.rules.inline.nolink.exec(N))){var U=(j[2]||j[1]).replace(/\s+/g," ");if(U=P[U.toLowerCase()],!U||!U.href){var oe=j[0].charAt(0);return{type:"text",raw:oe,text:oe}}return z(j,U,j[0],this.lexer)}},"reflink"),Z.emStrong=u(function(N,P,j){j===void 0&&(j="");var U=this.rules.inline.emStrong.lDelim.exec(N);if(U&&!(U[3]&&j.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var oe=U[1]||U[2]||"";if(!oe||oe&&(j===""||this.rules.inline.punctuation.exec(j))){var ve=U[0].length-1,Me,Ie,$e=ve,Ge=0,Ft=U[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ft.lastIndex=0,P=P.slice(-1*N.length+ve);(U=Ft.exec(P))!=null;)if(Me=U[1]||U[2]||U[3]||U[4]||U[5]||U[6],!!Me){if(Ie=Me.length,U[3]||U[4]){$e+=Ie;continue}else if((U[5]||U[6])&&ve%3&&!((ve+Ie)%3)){Ge+=Ie;continue}if($e-=Ie,!($e>0)){if(Ie=Math.min(Ie,Ie+$e+Ge),Math.min(ve,Ie)%2){var kt=N.slice(1,ve+U.index+Ie);return{type:"em",raw:N.slice(0,ve+U.index+Ie+1),text:kt,tokens:this.lexer.inlineTokens(kt)}}var Ve=N.slice(2,ve+U.index+Ie-1);return{type:"strong",raw:N.slice(0,ve+U.index+Ie+1),text:Ve,tokens:this.lexer.inlineTokens(Ve)}}}}}},"emStrong"),Z.codespan=u(function(N){var P=this.rules.inline.code.exec(N);if(P){var j=P[2].replace(/\n/g," "),U=/[^ ]/.test(j),oe=/^ /.test(j)&&/ $/.test(j);return U&&oe&&(j=j.substring(1,j.length-1)),j=b(j,!0),{type:"codespan",raw:P[0],text:j}}},"codespan"),Z.br=u(function(N){var P=this.rules.inline.br.exec(N);if(P)return{type:"br",raw:P[0]}},"br"),Z.del=u(function(N){var P=this.rules.inline.del.exec(N);if(P)return{type:"del",raw:P[0],text:P[2],tokens:this.lexer.inlineTokens(P[2])}},"del"),Z.autolink=u(function(N,P){var j=this.rules.inline.autolink.exec(N);if(j){var U,oe;return j[2]==="@"?(U=b(this.options.mangle?P(j[1]):j[1]),oe="mailto:"+U):(U=b(j[1]),oe=U),{type:"link",raw:j[0],text:U,href:oe,tokens:[{type:"text",raw:U,text:U}]}}},"autolink"),Z.url=u(function(N,P){var j;if(j=this.rules.inline.url.exec(N)){var U,oe;if(j[2]==="@")U=b(this.options.mangle?P(j[0]):j[0]),oe="mailto:"+U;else{var ve;do ve=j[0],j[0]=this.rules.inline._backpedal.exec(j[0])[0];while(ve!==j[0]);U=b(j[0]),j[1]==="www."?oe="http://"+U:oe=U}return{type:"link",raw:j[0],text:U,href:oe,tokens:[{type:"text",raw:U,text:U}]}}},"url"),Z.inlineText=u(function(N,P){var j=this.rules.inline.text.exec(N);if(j){var U;return this.lexer.state.inRawBlock?U=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(j[0]):b(j[0]):j[0]:U=b(this.options.smartypants?P(j[0]):j[0]),{type:"text",raw:j[0],text:U}}},"inlineText"),se}(),me={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:H,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};me._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,me._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,me.def=w(me.def).replace("label",me._label).replace("title",me._title).getRegex(),me.bullet=/(?:[*+-]|\d{1,9}[.)])/,me.listItemStart=w(/^( *)(bull) */).replace("bull",me.bullet).getRegex(),me.list=w(me.list).replace(/bull/g,me.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+me.def.source+")").getRegex(),me._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",me._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,me.html=w(me.html,"i").replace("comment",me._comment).replace("tag",me._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),me.paragraph=w(me._paragraph).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.blockquote=w(me.blockquote).replace("paragraph",me.paragraph).getRegex(),me.normal=F({},me),me.gfm=F({},me.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),me.gfm.table=w(me.gfm.table).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.gfm.paragraph=w(me._paragraph).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",me.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.pedantic=F({},me.normal,{html:w(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",me._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H,paragraph:w(me.normal._paragraph).replace("hr",me.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",me.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ce={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:H,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:H,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};ce._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ce.punctuation=w(ce.punctuation).replace(/punctuation/g,ce._punctuation).getRegex(),ce.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ce.escapedEmSt=/\\\*|\\_/g,ce._comment=w(me._comment).replace("(?:-->|$)","-->").getRegex(),ce.emStrong.lDelim=w(ce.emStrong.lDelim).replace(/punct/g,ce._punctuation).getRegex(),ce.emStrong.rDelimAst=w(ce.emStrong.rDelimAst,"g").replace(/punct/g,ce._punctuation).getRegex(),ce.emStrong.rDelimUnd=w(ce.emStrong.rDelimUnd,"g").replace(/punct/g,ce._punctuation).getRegex(),ce._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ce._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ce._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ce.autolink=w(ce.autolink).replace("scheme",ce._scheme).replace("email",ce._email).getRegex(),ce._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ce.tag=w(ce.tag).replace("comment",ce._comment).replace("attribute",ce._attribute).getRegex(),ce._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ce._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ce._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ce.link=w(ce.link).replace("label",ce._label).replace("href",ce._href).replace("title",ce._title).getRegex(),ce.reflink=w(ce.reflink).replace("label",ce._label).replace("ref",me._label).getRegex(),ce.nolink=w(ce.nolink).replace("ref",me._label).getRegex(),ce.reflinkSearch=w(ce.reflinkSearch,"g").replace("reflink",ce.reflink).replace("nolink",ce.nolink).getRegex(),ce.normal=F({},ce),ce.pedantic=F({},ce.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",ce._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ce._label).getRegex()}),ce.gfm=F({},ce.normal,{escape:w(ce.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ce.gfm.url=w(ce.gfm.url,"i").replace("email",ce.gfm._extended_email).getRegex(),ce.breaks=F({},ce.gfm,{br:w(ce.br).replace("{2,}","*").getRegex(),text:w(ce.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function mt(se){return se.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}u(mt,"smartypants");function $t(se){var Z="",Y,N,P=se.length;for(Y=0;Y<P;Y++)N=se.charCodeAt(Y),Math.random()>.5&&(N="x"+N.toString(16)),Z+="&#"+N+";";return Z}u($t,"mangle");var hn=function(){function se(Y){this.tokens=[],this.tokens.links=Object.create(null),this.options=Y||e.defaults,this.options.tokenizer=this.options.tokenizer||new fe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var N={block:me.normal,inline:ce.normal};this.options.pedantic?(N.block=me.pedantic,N.inline=ce.pedantic):this.options.gfm&&(N.block=me.gfm,this.options.breaks?N.inline=ce.breaks:N.inline=ce.gfm),this.tokenizer.rules=N}u(se,"Lexer"),se.lex=u(function(N,P){var j=new se(P);return j.lex(N)},"lex"),se.lexInline=u(function(N,P){var j=new se(P);return j.inlineTokens(N)},"lexInline");var Z=se.prototype;return Z.lex=u(function(N){N=N.replace(/\r\n|\r/g,`
`),this.blockTokens(N,this.tokens);for(var P;P=this.inlineQueue.shift();)this.inlineTokens(P.src,P.tokens);return this.tokens},"lex"),Z.blockTokens=u(function(N,P){var j=this;P===void 0&&(P=[]),this.options.pedantic?N=N.replace(/\t/g,"    ").replace(/^ +$/gm,""):N=N.replace(/^( *)(\t+)/gm,function($e,Ge,Ft){return Ge+"    ".repeat(Ft.length)});for(var U,oe,ve,Me;N;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function($e){return(U=$e.call({lexer:j},N,P))?(N=N.substring(U.raw.length),P.push(U),!0):!1}))){if(U=this.tokenizer.space(N)){N=N.substring(U.raw.length),U.raw.length===1&&P.length>0?P[P.length-1].raw+=`
`:P.push(U);continue}if(U=this.tokenizer.code(N)){N=N.substring(U.raw.length),oe=P[P.length-1],oe&&(oe.type==="paragraph"||oe.type==="text")?(oe.raw+=`
`+U.raw,oe.text+=`
`+U.text,this.inlineQueue[this.inlineQueue.length-1].src=oe.text):P.push(U);continue}if(U=this.tokenizer.fences(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.heading(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.hr(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.blockquote(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.list(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.html(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.def(N)){N=N.substring(U.raw.length),oe=P[P.length-1],oe&&(oe.type==="paragraph"||oe.type==="text")?(oe.raw+=`
`+U.raw,oe.text+=`
`+U.raw,this.inlineQueue[this.inlineQueue.length-1].src=oe.text):this.tokens.links[U.tag]||(this.tokens.links[U.tag]={href:U.href,title:U.title});continue}if(U=this.tokenizer.table(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.lheading(N)){N=N.substring(U.raw.length),P.push(U);continue}if(ve=N,this.options.extensions&&this.options.extensions.startBlock&&function(){var $e=1/0,Ge=N.slice(1),Ft=void 0;j.options.extensions.startBlock.forEach(function(kt){Ft=kt.call({lexer:this},Ge),typeof Ft=="number"&&Ft>=0&&($e=Math.min($e,Ft))}),$e<1/0&&$e>=0&&(ve=N.substring(0,$e+1))}(),this.state.top&&(U=this.tokenizer.paragraph(ve))){oe=P[P.length-1],Me&&oe.type==="paragraph"?(oe.raw+=`
`+U.raw,oe.text+=`
`+U.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=oe.text):P.push(U),Me=ve.length!==N.length,N=N.substring(U.raw.length);continue}if(U=this.tokenizer.text(N)){N=N.substring(U.raw.length),oe=P[P.length-1],oe&&oe.type==="text"?(oe.raw+=`
`+U.raw,oe.text+=`
`+U.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=oe.text):P.push(U);continue}if(N){var Ie="Infinite loop on byte: "+N.charCodeAt(0);if(this.options.silent){console.error(Ie);break}else throw new Error(Ie)}}return this.state.top=!0,P},"blockTokens"),Z.inline=u(function(N,P){return P===void 0&&(P=[]),this.inlineQueue.push({src:N,tokens:P}),P},"inline"),Z.inlineTokens=u(function(N,P){var j=this;P===void 0&&(P=[]);var U,oe,ve,Me=N,Ie,$e,Ge;if(this.tokens.links){var Ft=Object.keys(this.tokens.links);if(Ft.length>0)for(;(Ie=this.tokenizer.rules.inline.reflinkSearch.exec(Me))!=null;)Ft.includes(Ie[0].slice(Ie[0].lastIndexOf("[")+1,-1))&&(Me=Me.slice(0,Ie.index)+"["+R("a",Ie[0].length-2)+"]"+Me.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ie=this.tokenizer.rules.inline.blockSkip.exec(Me))!=null;)Me=Me.slice(0,Ie.index)+"["+R("a",Ie[0].length-2)+"]"+Me.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ie=this.tokenizer.rules.inline.escapedEmSt.exec(Me))!=null;)Me=Me.slice(0,Ie.index)+"++"+Me.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;N;)if($e||(Ge=""),$e=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ve){return(U=Ve.call({lexer:j},N,P))?(N=N.substring(U.raw.length),P.push(U),!0):!1}))){if(U=this.tokenizer.escape(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.tag(N)){N=N.substring(U.raw.length),oe=P[P.length-1],oe&&U.type==="text"&&oe.type==="text"?(oe.raw+=U.raw,oe.text+=U.text):P.push(U);continue}if(U=this.tokenizer.link(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.reflink(N,this.tokens.links)){N=N.substring(U.raw.length),oe=P[P.length-1],oe&&U.type==="text"&&oe.type==="text"?(oe.raw+=U.raw,oe.text+=U.text):P.push(U);continue}if(U=this.tokenizer.emStrong(N,Me,Ge)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.codespan(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.br(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.del(N)){N=N.substring(U.raw.length),P.push(U);continue}if(U=this.tokenizer.autolink(N,$t)){N=N.substring(U.raw.length),P.push(U);continue}if(!this.state.inLink&&(U=this.tokenizer.url(N,$t))){N=N.substring(U.raw.length),P.push(U);continue}if(ve=N,this.options.extensions&&this.options.extensions.startInline&&function(){var Ve=1/0,gn=N.slice(1),fn=void 0;j.options.extensions.startInline.forEach(function(nr){fn=nr.call({lexer:this},gn),typeof fn=="number"&&fn>=0&&(Ve=Math.min(Ve,fn))}),Ve<1/0&&Ve>=0&&(ve=N.substring(0,Ve+1))}(),U=this.tokenizer.inlineText(ve,mt)){N=N.substring(U.raw.length),U.raw.slice(-1)!=="_"&&(Ge=U.raw.slice(-1)),$e=!0,oe=P[P.length-1],oe&&oe.type==="text"?(oe.raw+=U.raw,oe.text+=U.text):P.push(U);continue}if(N){var kt="Infinite loop on byte: "+N.charCodeAt(0);if(this.options.silent){console.error(kt);break}else throw new Error(kt)}}return P},"inlineTokens"),n(se,null,[{key:"rules",get:u(function(){return{block:me,inline:ce}},"get")}]),se}(),vt=function(){function se(Y){this.options=Y||e.defaults}u(se,"Renderer");var Z=se.prototype;return Z.code=u(function(N,P,j){var U=(P||"").match(/\S*/)[0];if(this.options.highlight){var oe=this.options.highlight(N,U);oe!=null&&oe!==N&&(j=!0,N=oe)}return N=N.replace(/\n$/,"")+`
`,U?'<pre><code class="'+this.options.langPrefix+b(U,!0)+'">'+(j?N:b(N,!0))+`</code></pre>
`:"<pre><code>"+(j?N:b(N,!0))+`</code></pre>
`},"code"),Z.blockquote=u(function(N){return`<blockquote>
`+N+`</blockquote>
`},"blockquote"),Z.html=u(function(N){return N},"html"),Z.heading=u(function(N,P,j,U){if(this.options.headerIds){var oe=this.options.headerPrefix+U.slug(j);return"<h"+P+' id="'+oe+'">'+N+"</h"+P+`>
`}return"<h"+P+">"+N+"</h"+P+`>
`},"heading"),Z.hr=u(function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},"hr"),Z.list=u(function(N,P,j){var U=P?"ol":"ul",oe=P&&j!==1?' start="'+j+'"':"";return"<"+U+oe+`>
`+N+"</"+U+`>
`},"list"),Z.listitem=u(function(N){return"<li>"+N+`</li>
`},"listitem"),Z.checkbox=u(function(N){return"<input "+(N?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},"checkbox"),Z.paragraph=u(function(N){return"<p>"+N+`</p>
`},"paragraph"),Z.table=u(function(N,P){return P&&(P="<tbody>"+P+"</tbody>"),`<table>
<thead>
`+N+`</thead>
`+P+`</table>
`},"table"),Z.tablerow=u(function(N){return`<tr>
`+N+`</tr>
`},"tablerow"),Z.tablecell=u(function(N,P){var j=P.header?"th":"td",U=P.align?"<"+j+' align="'+P.align+'">':"<"+j+">";return U+N+("</"+j+`>
`)},"tablecell"),Z.strong=u(function(N){return"<strong>"+N+"</strong>"},"strong"),Z.em=u(function(N){return"<em>"+N+"</em>"},"em"),Z.codespan=u(function(N){return"<code>"+N+"</code>"},"codespan"),Z.br=u(function(){return this.options.xhtml?"<br/>":"<br>"},"br"),Z.del=u(function(N){return"<del>"+N+"</del>"},"del"),Z.link=u(function(N,P,j){if(N=k(this.options.sanitize,this.options.baseUrl,N),N===null)return j;var U='<a href="'+b(N)+'"';return P&&(U+=' title="'+P+'"'),U+=">"+j+"</a>",U},"link"),Z.image=u(function(N,P,j){if(N=k(this.options.sanitize,this.options.baseUrl,N),N===null)return j;var U='<img src="'+N+'" alt="'+j+'"';return P&&(U+=' title="'+P+'"'),U+=this.options.xhtml?"/>":">",U},"image"),Z.text=u(function(N){return N},"text"),se}(),Hn=function(){function se(){}u(se,"TextRenderer");var Z=se.prototype;return Z.strong=u(function(N){return N},"strong"),Z.em=u(function(N){return N},"em"),Z.codespan=u(function(N){return N},"codespan"),Z.del=u(function(N){return N},"del"),Z.html=u(function(N){return N},"html"),Z.text=u(function(N){return N},"text"),Z.link=u(function(N,P,j){return""+j},"link"),Z.image=u(function(N,P,j){return""+j},"image"),Z.br=u(function(){return""},"br"),se}(),er=function(){function se(){this.seen={}}u(se,"Slugger");var Z=se.prototype;return Z.serialize=u(function(N){return N.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},"serialize"),Z.getNextSafeSlug=u(function(N,P){var j=N,U=0;if(this.seen.hasOwnProperty(j)){U=this.seen[N];do U++,j=N+"-"+U;while(this.seen.hasOwnProperty(j))}return P||(this.seen[N]=U,this.seen[j]=0),j},"getNextSafeSlug"),Z.slug=u(function(N,P){P===void 0&&(P={});var j=this.serialize(N);return this.getNextSafeSlug(j,P.dryrun)},"slug"),se}(),fi=function(){function se(Y){this.options=Y||e.defaults,this.options.renderer=this.options.renderer||new vt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Hn,this.slugger=new er}u(se,"Parser"),se.parse=u(function(N,P){var j=new se(P);return j.parse(N)},"parse"),se.parseInline=u(function(N,P){var j=new se(P);return j.parseInline(N)},"parseInline");var Z=se.prototype;return Z.parse=u(function(N,P){P===void 0&&(P=!0);var j="",U,oe,ve,Me,Ie,$e,Ge,Ft,kt,Ve,gn,fn,nr,Ct,Nn,Ju,Qu,Or,Zd,eh=N.length;for(U=0;U<eh;U++){if(Ve=N[U],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ve.type]&&(Zd=this.options.extensions.renderers[Ve.type].call({parser:this},Ve),Zd!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ve.type))){j+=Zd||"";continue}switch(Ve.type){case"space":continue;case"hr":{j+=this.renderer.hr();continue}case"heading":{j+=this.renderer.heading(this.parseInline(Ve.tokens),Ve.depth,v(this.parseInline(Ve.tokens,this.textRenderer)),this.slugger);continue}case"code":{j+=this.renderer.code(Ve.text,Ve.lang,Ve.escaped);continue}case"table":{for(Ft="",Ge="",Me=Ve.header.length,oe=0;oe<Me;oe++)Ge+=this.renderer.tablecell(this.parseInline(Ve.header[oe].tokens),{header:!0,align:Ve.align[oe]});for(Ft+=this.renderer.tablerow(Ge),kt="",Me=Ve.rows.length,oe=0;oe<Me;oe++){for($e=Ve.rows[oe],Ge="",Ie=$e.length,ve=0;ve<Ie;ve++)Ge+=this.renderer.tablecell(this.parseInline($e[ve].tokens),{header:!1,align:Ve.align[ve]});kt+=this.renderer.tablerow(Ge)}j+=this.renderer.table(Ft,kt);continue}case"blockquote":{kt=this.parse(Ve.tokens),j+=this.renderer.blockquote(kt);continue}case"list":{for(gn=Ve.ordered,fn=Ve.start,nr=Ve.loose,Me=Ve.items.length,kt="",oe=0;oe<Me;oe++)Nn=Ve.items[oe],Ju=Nn.checked,Qu=Nn.task,Ct="",Nn.task&&(Or=this.renderer.checkbox(Ju),nr?Nn.tokens.length>0&&Nn.tokens[0].type==="paragraph"?(Nn.tokens[0].text=Or+" "+Nn.tokens[0].text,Nn.tokens[0].tokens&&Nn.tokens[0].tokens.length>0&&Nn.tokens[0].tokens[0].type==="text"&&(Nn.tokens[0].tokens[0].text=Or+" "+Nn.tokens[0].tokens[0].text)):Nn.tokens.unshift({type:"text",text:Or}):Ct+=Or),Ct+=this.parse(Nn.tokens,nr),kt+=this.renderer.listitem(Ct,Qu,Ju);j+=this.renderer.list(kt,gn,fn);continue}case"html":{j+=this.renderer.html(Ve.text);continue}case"paragraph":{j+=this.renderer.paragraph(this.parseInline(Ve.tokens));continue}case"text":{for(kt=Ve.tokens?this.parseInline(Ve.tokens):Ve.text;U+1<eh&&N[U+1].type==="text";)Ve=N[++U],kt+=`
`+(Ve.tokens?this.parseInline(Ve.tokens):Ve.text);j+=P?this.renderer.paragraph(kt):kt;continue}default:{var th='Token with "'+Ve.type+'" type was not found.';if(this.options.silent){console.error(th);return}else throw new Error(th)}}}return j},"parse"),Z.parseInline=u(function(N,P){P=P||this.renderer;var j="",U,oe,ve,Me=N.length;for(U=0;U<Me;U++){if(oe=N[U],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[oe.type]&&(ve=this.options.extensions.renderers[oe.type].call({parser:this},oe),ve!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(oe.type))){j+=ve||"";continue}switch(oe.type){case"escape":{j+=P.text(oe.text);break}case"html":{j+=P.html(oe.text);break}case"link":{j+=P.link(oe.href,oe.title,this.parseInline(oe.tokens,P));break}case"image":{j+=P.image(oe.href,oe.title,oe.text);break}case"strong":{j+=P.strong(this.parseInline(oe.tokens,P));break}case"em":{j+=P.em(this.parseInline(oe.tokens,P));break}case"codespan":{j+=P.codespan(oe.text);break}case"br":{j+=P.br();break}case"del":{j+=P.del(this.parseInline(oe.tokens,P));break}case"text":{j+=P.text(oe.text);break}default:{var Ie='Token with "'+oe.type+'" type was not found.';if(this.options.silent){console.error(Ie);return}else throw new Error(Ie)}}}return j},"parseInline"),se}();function ze(se,Z,Y){if(typeof se>"u"||se===null)throw new Error("marked(): input parameter is undefined or null");if(typeof se!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(se)+", string expected");if(typeof Z=="function"&&(Y=Z,Z=null),Z=F({},ze.defaults,Z||{}),X(Z),Y){var N=Z.highlight,P;try{P=hn.lex(se,Z)}catch(Me){return Y(Me)}var j=u(function(Ie){var $e;if(!Ie)try{Z.walkTokens&&ze.walkTokens(P,Z.walkTokens),$e=fi.parse(P,Z)}catch(Ge){Ie=Ge}return Z.highlight=N,Ie?Y(Ie):Y(null,$e)},"done");if(!N||N.length<3||(delete Z.highlight,!P.length))return j();var U=0;ze.walkTokens(P,function(Me){Me.type==="code"&&(U++,setTimeout(function(){N(Me.text,Me.lang,function(Ie,$e){if(Ie)return j(Ie);$e!=null&&$e!==Me.text&&(Me.text=$e,Me.escaped=!0),U--,U===0&&j()})},0))}),U===0&&j();return}function oe(Me){if(Me.message+=`
Please report this to https://github.com/markedjs/marked.`,Z.silent)return"<p>An error occurred:</p><pre>"+b(Me.message+"",!0)+"</pre>";throw Me}u(oe,"onError");try{var ve=hn.lex(se,Z);if(Z.walkTokens){if(Z.async)return Promise.all(ze.walkTokens(ve,Z.walkTokens)).then(function(){return fi.parse(ve,Z)}).catch(oe);ze.walkTokens(ve,Z.walkTokens)}return fi.parse(ve,Z)}catch(Me){oe(Me)}}u(ze,"marked"),ze.options=ze.setOptions=function(se){return F(ze.defaults,se),l(ze.defaults),ze},ze.getDefaults=a,ze.defaults=e.defaults,ze.use=function(){for(var se=arguments.length,Z=new Array(se),Y=0;Y<se;Y++)Z[Y]=arguments[Y];var N=F.apply(void 0,[{}].concat(Z)),P=ze.defaults.extensions||{renderers:{},childTokens:{}},j;Z.forEach(function(U){if(U.extensions&&(j=!0,U.extensions.forEach(function(ve){if(!ve.name)throw new Error("extension name required");if(ve.renderer){var Me=P.renderers?P.renderers[ve.name]:null;Me?P.renderers[ve.name]=function(){for(var Ie=arguments.length,$e=new Array(Ie),Ge=0;Ge<Ie;Ge++)$e[Ge]=arguments[Ge];var Ft=ve.renderer.apply(this,$e);return Ft===!1&&(Ft=Me.apply(this,$e)),Ft}:P.renderers[ve.name]=ve.renderer}if(ve.tokenizer){if(!ve.level||ve.level!=="block"&&ve.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");P[ve.level]?P[ve.level].unshift(ve.tokenizer):P[ve.level]=[ve.tokenizer],ve.start&&(ve.level==="block"?P.startBlock?P.startBlock.push(ve.start):P.startBlock=[ve.start]:ve.level==="inline"&&(P.startInline?P.startInline.push(ve.start):P.startInline=[ve.start]))}ve.childTokens&&(P.childTokens[ve.name]=ve.childTokens)})),U.renderer&&function(){var ve=ze.defaults.renderer||new vt,Me=u(function(Ge){var Ft=ve[Ge];ve[Ge]=function(){for(var kt=arguments.length,Ve=new Array(kt),gn=0;gn<kt;gn++)Ve[gn]=arguments[gn];var fn=U.renderer[Ge].apply(ve,Ve);return fn===!1&&(fn=Ft.apply(ve,Ve)),fn}},"_loop");for(var Ie in U.renderer)Me(Ie);N.renderer=ve}(),U.tokenizer&&function(){var ve=ze.defaults.tokenizer||new fe,Me=u(function(Ge){var Ft=ve[Ge];ve[Ge]=function(){for(var kt=arguments.length,Ve=new Array(kt),gn=0;gn<kt;gn++)Ve[gn]=arguments[gn];var fn=U.tokenizer[Ge].apply(ve,Ve);return fn===!1&&(fn=Ft.apply(ve,Ve)),fn}},"_loop2");for(var Ie in U.tokenizer)Me(Ie);N.tokenizer=ve}(),U.walkTokens){var oe=ze.defaults.walkTokens;N.walkTokens=function(ve){var Me=[];return Me.push(U.walkTokens.call(this,ve)),oe&&(Me=Me.concat(oe.call(this,ve))),Me}}j&&(N.extensions=P),ze.setOptions(N)})},ze.walkTokens=function(se,Z){for(var Y=[],N=u(function(){var oe=j.value;switch(Y=Y.concat(Z.call(ze,oe)),oe.type){case"table":{for(var ve=r(oe.header),Me;!(Me=ve()).done;){var Ie=Me.value;Y=Y.concat(ze.walkTokens(Ie.tokens,Z))}for(var $e=r(oe.rows),Ge;!(Ge=$e()).done;)for(var Ft=Ge.value,kt=r(Ft),Ve;!(Ve=kt()).done;){var gn=Ve.value;Y=Y.concat(ze.walkTokens(gn.tokens,Z))}break}case"list":{Y=Y.concat(ze.walkTokens(oe.items,Z));break}default:ze.defaults.extensions&&ze.defaults.extensions.childTokens&&ze.defaults.extensions.childTokens[oe.type]?ze.defaults.extensions.childTokens[oe.type].forEach(function(fn){Y=Y.concat(ze.walkTokens(oe[fn],Z))}):oe.tokens&&(Y=Y.concat(ze.walkTokens(oe.tokens,Z)))}},"_loop3"),P=r(se),j;!(j=P()).done;)N();return Y},ze.parseInline=function(se,Z){if(typeof se>"u"||se===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof se!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(se)+", string expected");Z=F({},ze.defaults,Z||{}),X(Z);try{var Y=hn.lexInline(se,Z);return Z.walkTokens&&ze.walkTokens(Y,Z.walkTokens),fi.parseInline(Y,Z)}catch(N){if(N.message+=`
Please report this to https://github.com/markedjs/marked.`,Z.silent)return"<p>An error occurred:</p><pre>"+b(N.message+"",!0)+"</pre>";throw N}},ze.Parser=fi,ze.parser=fi.parse,ze.Renderer=vt,ze.TextRenderer=Hn,ze.Lexer=hn,ze.lexer=hn.lex,ze.Tokenizer=fe,ze.Slugger=er,ze.parse=ze;var tr=ze.options,Pr=ze.setOptions,Fr=ze.use,Yn=ze.walkTokens,Lo=ze.parseInline,fE=ze,pE=fi.parse,T4=hn.lex;e.Lexer=hn,e.Parser=fi,e.Renderer=vt,e.Slugger=er,e.TextRenderer=Hn,e.Tokenizer=fe,e.getDefaults=a,e.lexer=T4,e.marked=ze,e.options=tr,e.parse=fE,e.parseInline=Lo,e.parser=pE,e.setOptions=Pr,e.use=Fr,e.walkTokens=Yn,Object.defineProperty(e,"__esModule",{value:!0})})})();cs.Lexer||exports.Lexer;cs.Parser||exports.Parser;cs.Renderer||exports.Renderer;cs.Slugger||exports.Slugger;cs.TextRenderer||exports.TextRenderer;cs.Tokenizer||exports.Tokenizer;cs.getDefaults||exports.getDefaults;cs.lexer||exports.lexer;var Ga=cs.marked||exports.marked;cs.options||exports.options;cs.parse||exports.parse;cs.parseInline||exports.parseInline;cs.parser||exports.parser;cs.setOptions||exports.setOptions;cs.use||exports.use;cs.walkTokens||exports.walkTokens;function JFe(o){return JSON.stringify(o,QFe)}u(JFe,"stringify");function OB(o){let e=JSON.parse(o);return e=HB(e),e}u(OB,"parse$1");function QFe(o,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}u(QFe,"replacer");function HB(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return Ae.revive(o);case 2:return new RegExp(o.source,o.flags);case 16:return new Date(o.source)}if(o instanceof PD||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=HB(o[t],e+1);else for(const t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=HB(o[t],e+1))}return o}u(HB,"revive");const yH=Object.freeze({image:(o,e,t)=>{let n=[],i=[];return o&&({href:o,dimensions:n}=jFe(o),i.push(`src="${BE(o)}"`)),t&&i.push(`alt="${BE(t)}"`),e&&i.push(`title="${BE(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph:o=>`<p>${o}</p>`,link:(o,e,t)=>typeof o!="string"?"":(o===t&&(t=vH(t)),e=typeof e=="string"?BE(vH(e)):"",o=vH(o),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${o}" title="${e||o}">${t}</a>`)});function HO(o,e={},t={}){var n,i;const s=new ie;let r=!1;const a=nJ(e),l=u(function(v){let y;try{y=OB(decodeURIComponent(v))}catch{}return y?(y=M1e(y,w=>{if(o.uris&&o.uris[w])return Ae.revive(o.uris[w])}),encodeURIComponent(JSON.stringify(y))):v},"_uriMassage"),d=u(function(v,y){const w=o.uris&&o.uris[v];let C=Ae.revive(w);return y?v.startsWith(qe.data+":")?v:(C||(C=Ae.parse(v)),BSe.uriToBrowserUri(C).toString(!0)):!C||Ae.parse(v).toString()===C.toString()?v:(C.query&&(C=C.with({query:l(C.query)})),C.toString())},"_href"),c=new Ga.Renderer;c.image=yH.image,c.link=yH.link,c.paragraph=yH.paragraph;const h=[],g=[];if(e.codeBlockRendererSync?c.code=(v,y)=>{const w=FB.nextId(),C=e.codeBlockRendererSync(Iye(y),v);return g.push([w,C]),`<div class="code" data-code="${w}">${wD(v)}</div>`}:e.codeBlockRenderer&&(c.code=(v,y)=>{const w=FB.nextId(),C=e.codeBlockRenderer(Iye(y),v);return h.push(C.then(S=>[w,S])),`<div class="code" data-code="${w}">${wD(v)}</div>`}),e.actionHandler){const v=u(function(C){let S=C.target;if(!(S.tagName!=="A"&&(S=S.parentElement,!S||S.tagName!=="A")))try{let k=S.dataset.href;k&&(o.baseUri&&(k=wH(Ae.from(o.baseUri),k)),e.actionHandler.callback(k,C))}catch(k){Be(k)}finally{C.preventDefault()}},"_activateLink"),y=e.actionHandler.disposables.add(new Qe(a,"click")),w=e.actionHandler.disposables.add(new Qe(a,"auxclick"));e.actionHandler.disposables.add(Ce.any(y.event,w.event)(C=>{const S=new Bs(C);!S.leftButton&&!S.middleButton||v(S)})),e.actionHandler.disposables.add(q(a,"keydown",C=>{const S=new Mt(C);!S.equals(10)&&!S.equals(3)||v(S)}))}o.supportHtml||(t.sanitizer=v=>(o.isTrusted?v.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?v:"",t.sanitize=!0,t.silent=!0),t.renderer=c;let f=(n=o.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),o.supportThemeIcons&&(f=WFe(f));let p;if(e.fillInIncompleteTokens){const v=Object.assign(Object.assign({},Ga.defaults),t),y=Ga.lexer(f,v),w=aOe(y);p=Ga.parser(w,v)}else p=Ga.parse(f,t);o.supportThemeIcons&&(p=iu(p).map(y=>typeof y=="string"?y:y.outerHTML).join(""));const _=new DOMParser().parseFromString(VB(o,p),"text/html");if(_.body.querySelectorAll("img").forEach(v=>{const y=v.getAttribute("src");if(y){let w=y;try{o.baseUri&&(w=wH(Ae.from(o.baseUri),w))}catch{}v.src=d(w,!0)}}),_.body.querySelectorAll("a").forEach(v=>{const y=v.getAttribute("href");if(v.setAttribute("href",""),!y||/^data:|javascript:/i.test(y)||/^command:/i.test(y)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(y))v.replaceWith(...v.childNodes);else{let w=d(y,!1);o.baseUri&&(w=wH(Ae.from(o.baseUri),y)),v.dataset.href=w}}),a.innerHTML=VB(o,_.body.innerHTML),h.length>0)Promise.all(h).then(v=>{var y,w;if(r)return;const C=new Map(v),S=a.querySelectorAll("div[data-code]");for(const k of S){const T=C.get((y=k.dataset.code)!==null&&y!==void 0?y:"");T&&wi(k,T)}(w=e.asyncRenderCallback)===null||w===void 0||w.call(e)});else if(g.length>0){const v=new Map(g),y=a.querySelectorAll("div[data-code]");for(const w of y){const C=v.get((i=w.dataset.code)!==null&&i!==void 0?i:"");C&&wi(w,C)}}if(e.asyncRenderCallback)for(const v of a.getElementsByTagName("img")){const y=s.add(q(v,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,s.dispose()}}}u(HO,"renderMarkdown");function Iye(o){if(!o)return"";const e=o.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:o}u(Iye,"postProcessCodeBlockLanguageId");function wH(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?sye(o,e).toString():sye(RO(o),e).toString()}u(wH,"resolveWithBaseUri");function VB(o,e){const{config:t,allowedSchemes:n}=tOe(o);HSe("uponSanitizeAttribute",(s,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(s.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const i=ZIe(n);try{return OSe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{VSe("uponSanitizeAttribute"),i.dispose()}}u(VB,"sanitizeRenderedMarkdown");const eOe=["align","autoplay","alt","class","controls","data-code","data-href","height","href","loop","muted","playsinline","poster","src","style","target","title","width","start"];function tOe(o){const e=[qe.http,qe.https,qe.mailto,qe.data,qe.file,qe.vscodeFileResource,qe.vscodeRemote,qe.vscodeRemoteResource];return o.isTrusted&&e.push(qe.command),{config:{ALLOWED_TAGS:[...JIe],ALLOWED_ATTR:eOe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}u(tOe,"getSanitizerOptions");function nOe(o){return typeof o=="string"?o:iOe(o)}u(nOe,"renderStringAsPlaintext");function iOe(o){var e;let t=(e=o.value)!==null&&e!==void 0?e:"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=Ga.parse(t,{renderer:oOe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>{var s;return(s=sOe.get(i))!==null&&s!==void 0?s:i});return VB({isTrusted:!1},n).toString()}u(iOe,"renderMarkdownAsPlaintext");const sOe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),oOe=new dl(()=>{const o=new Ga.Renderer;return o.code=e=>e,o.blockquote=e=>e,o.html=e=>"",o.heading=(e,t,n)=>e+`
`,o.hr=()=>"",o.list=(e,t)=>e,o.listitem=e=>e+`
`,o.paragraph=e=>e+`
`,o.table=(e,t)=>e+t+`
`,o.tablerow=e=>e,o.tablecell=(e,t)=>e+" ",o.strong=e=>e,o.em=e=>e,o.codespan=e=>e,o.br=()=>`
`,o.del=e=>e,o.image=(e,t,n)=>"",o.text=e=>e,o.link=(e,t,n)=>n,o});function iJ(o){let e="";return o.forEach(t=>{e+=t.raw}),e}u(iJ,"mergeRawTokenText");function rOe(o){for(const e of o.tokens)if(e.type==="text"){const t=e.raw.split(`
`),n=t[t.length-1];if(n.includes("`"))return dOe(o);if(n.includes("**"))return fOe(o);if(n.match(/\*\w/))return cOe(o);if(n.match(/(^|\s)__\w/))return pOe(o);if(n.match(/(^|\s)_\w/))return uOe(o);if(n.match(/(^|\s)\[.*\]\(\w*/))return hOe(o);if(n.match(/(^|\s)\[\w/))return gOe(o)}}u(rOe,"completeSingleLinePattern");function aOe(o){let e,t;for(e=0;e<o.length;e++){const n=o[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)```/)){t=lOe(o.slice(e));break}if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=mOe(o.slice(e));break}if(e===o.length-1&&n.type==="paragraph"){const i=rOe(n);if(i){t=[i];break}}}if(t){const n=[...o.slice(0,e),...t];return n.links=o.links,n}return o}u(aOe,"fillInIncompleteTokens");function lOe(o){const e=iJ(o);return Ga.lexer(e+"\n```")}u(lOe,"completeCodeBlock");function dOe(o){return Tf(o,"`")}u(dOe,"completeCodespan");function cOe(o){return Tf(o,"*")}u(cOe,"completeStar");function uOe(o){return Tf(o,"_")}u(uOe,"completeUnderscore");function hOe(o){return Tf(o,")")}u(hOe,"completeLinkTarget");function gOe(o){return Tf(o,"](about:blank)")}u(gOe,"completeLinkText");function fOe(o){return Tf(o,"**")}u(fOe,"completeDoublestar");function pOe(o){return Tf(o,"__")}u(pOe,"completeDoubleUnderscore");function Tf(o,e){const t=iJ(Array.isArray(o)?o:[o]);return Ga.lexer(t+e)[0]}u(Tf,"completeWithString");function mOe(o){const e=iJ(o),t=e.split(`
`);let n,i=!1;for(let s=0;s<t.length;s++){const r=t[s].trim();if(typeof n>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(r.match(/^\s*\|/)){if(s!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){const s=i?t.slice(0,-1).join(`
`):e,r=!!s.match(/\|\s*$/),a=s+(r?"":"|")+`
|${" --- |".repeat(n)}`;return Ga.lexer(a)}}u(mOe,"completeTable");const Hle=class Hle{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}};u(Hle,"CombinedSpliceable");let WB=Hle;function Rs(o,e,t){return Math.min(Math.max(o,e),t)}u(Rs,"clamp");const Vle=class Vle{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}};u(Vle,"MovingAverage");let HA=Vle;const Wle=class Wle{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}};u(Wle,"SlidingWindowAverage");let BB=Wle;const Ble=class Ble extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};u(Ble,"ListError");let bc=Ble;var Li;(function(o){function e(s,r){if(s.start>=r.end||r.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,r.start),l=Math.min(s.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}u(e,"intersect"),o.intersect=e;function t(s){return s.end-s.start<=0}u(t,"isEmpty"),o.isEmpty=t;function n(s,r){return!t(e(s,r))}u(n,"intersects"),o.intersects=n;function i(s,r){const a=[],l={start:s.start,end:Math.min(r.start,s.end)},d={start:Math.max(r.end,s.start),end:s.end};return t(l)||a.push(l),t(d)||a.push(d),a}u(i,"relativeComplement"),o.relativeComplement=i})(Li||(Li={}));function Nye(o,e){const t=[];for(const n of e){if(o.start>=n.range.end)continue;if(o.end<n.range.start)break;const i=Li.intersect(o,n.range);Li.isEmpty(i)||t.push({range:i,size:n.size})}return t}u(Nye,"groupIntersect");function UB({start:o,end:e},t){return{start:o+t,end:e+t}}u(UB,"shift");function bOe(o){const e=[];let t=null;for(const n of o){const i=n.range.start,s=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:r},e.push(t)}return e}u(bOe,"consolidate");function _Oe(...o){return bOe(o.reduce((e,t)=>e.concat(t),[]))}u(_Oe,"concat");const Ule=class Ule{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const i=n.length-t,s=Nye({start:0,end:e},this.groups),r=Nye({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:UB(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=_Oe(s,a,r),this._size=this._paddingTop+this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=s,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s;if(e<r)return this._paddingTop+t+(e-n)*i.size;t+=s*i.size,n=r}return-1}};u(Ule,"RangeMap");let VA=Ule;function vOe(o){var e;try{(e=o.parentElement)===null||e===void 0||e.removeChild(o)}catch{}}u(vOe,"removeFromParent");const zle=class zle{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const i=re(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),vOe(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};u(zle,"RowCache");let zB=zle;var $d=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const oh={CurrentDragAndDropData:void 0},ka={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},Gle=class Gle{constructor(e){this.elements=e}update(){}getData(){return this.elements}};u(Gle,"ElementsDragAndDropData");let zg=Gle;const jle=class jle{constructor(e){this.elements=e}update(){}getData(){return this.elements}};u(jle,"ExternalElementsDragAndDropData");let GB=jle;const Kle=class Kle{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};u(Kle,"NativeDragAndDropData");let jB=Kle;function yOe(o,e){return Array.isArray(o)&&Array.isArray(e)?jn(o,e):o===e}u(yOe,"equalsDragFeedback");const $le=class $le{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}};u($le,"ListViewAccessibilityProvider");let KB=$le;const jP=class jP{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:q4(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,i=ka){var s,r,a,l,d,c,h,g,f,p,b,_,v;if(this.virtualDelegate=t,this.domId=`list_id_${++jP.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Uo(50),this.splicing=!1,this.dragOverAnimationStopDisposable=G.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=G.None,this.onDragLeaveTimeout=G.None,this.disposables=new ie,this._onDidChangeContentHeight=new V,this._onDidChangeContentWidth=new V,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new VA((s=i.paddingTop)!==null&&s!==void 0?s:0);for(const w of n)this.renderers.set(w.templateId,w);this.cache=this.disposables.add(new zB(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=(r=i.horizontalScrolling)!==null&&r!==void 0?r:ka.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new KB(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=i.transformOptimization)!==null&&a!==void 0?a:ka.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(oi.addTarget(this.rowsContainer)),this.scrollable=new Og({forceIntegerValues:!0,smoothScrollDuration:(l=i.smoothScrolling)!==null&&l!==void 0&&l?125:0,scheduleAtNextAnimationFrame:w=>jo(w)}),this.scrollableElement=this.disposables.add(new Sw(this.rowsContainer,{alwaysConsumeMouseWheel:(d=i.alwaysConsumeMouseWheel)!==null&&d!==void 0?d:ka.alwaysConsumeMouseWheel,horizontal:1,vertical:(c=i.verticalScrollMode)!==null&&c!==void 0?c:ka.verticalScrollMode,useShadows:(h=i.useShadows)!==null&&h!==void 0?h:ka.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(q(this.rowsContainer,Nt.Change,w=>this.onTouchChange(w))),this.disposables.add(q(this.scrollableElement.getDomNode(),"scroll",w=>w.target.scrollTop=0)),this.disposables.add(q(this.domNode,"dragover",w=>this.onDragOver(this.toDragEvent(w)))),this.disposables.add(q(this.domNode,"drop",w=>this.onDrop(this.toDragEvent(w)))),this.disposables.add(q(this.domNode,"dragleave",w=>this.onDragLeave(this.toDragEvent(w)))),this.disposables.add(q(this.domNode,"dragend",w=>this.onDragEnd(w))),this.setRowLineHeight=(g=i.setRowLineHeight)!==null&&g!==void 0?g:ka.setRowLineHeight,this.setRowHeight=(f=i.setRowHeight)!==null&&f!==void 0?f:ka.setRowHeight,this.supportDynamicHeights=(p=i.supportDynamicHeights)!==null&&p!==void 0?p:ka.supportDynamicHeights,this.dnd=(b=i.dnd)!==null&&b!==void 0?b:ka.dnd,this.layout((_=i.initialSize)===null||_===void 0?void 0:_.height,(v=i.initialSize)===null||v===void 0?void 0:v.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t=Object.assign(Object.assign({},t??{}),{scrollByPage:e.scrollByPage})),e.mouseWheelScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),e.fastScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=Li.intersect(i,s),a=new Map;for(let k=r.end-1;k>=r.start;k--){const T=this.items[k];if(T.dragStartDisposable.dispose(),T.checkedDisposable.dispose(),T.row){let E=a.get(T.templateId);E||(E=[],a.set(T.templateId,E));const D=this.renderers.get(T.templateId);D&&D.disposeElement&&D.disposeElement(T.element,k,T.row.templateData,T.size),E.push(T.row)}T.row=null}const l={start:e+t,end:this.items.length},d=Li.intersect(l,i),c=Li.relativeComplement(l,i),h=n.map(k=>({id:String(this.itemId++),element:k,templateId:this.virtualDelegate.getTemplateId(k),size:this.virtualDelegate.getHeight(k),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(k),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:G.None,checkedDisposable:G.None}));let g;e===0&&t>=this.items.length?(this.rangeMap=new VA(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,h),g=this.items,this.items=h):(this.rangeMap.splice(e,t,h),g=this.items.splice(e,t,...h));const f=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=UB(d,f),_=Li.intersect(p,b);for(let k=_.start;k<_.end;k++)this.updateItemInDOM(this.items[k],k);const v=Li.relativeComplement(b,p);for(const k of v)for(let T=k.start;T<k.end;T++)this.removeItemFromDOM(T);const y=c.map(k=>UB(k,f)),C=[{start:e,end:e+n.length},...y].map(k=>Li.intersect(p,k)),S=this.getNextToLastElement(C);for(const k of C)for(let T=k.start;T<k.end;T++){const E=this.items[T],D=a.get(E.templateId),O=D?.pop();this.insertItemInDOM(T,S,O)}for(const k of a.values())for(const T of k)this.cache.release(T);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(k=>k.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=jo(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),t=this.rangeMap.positionAt(e.start),n=this.rangeMap.positionAt(e.start+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e.start+1:e.start}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:zIe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:q4(this.domNode)})}render(e,t,n,i,s,r=!1){const a=this.getRenderRange(t,n),l=Li.relativeComplement(a,e),d=Li.relativeComplement(e,a),c=this.getNextToLastElement(l);if(r){const h=Li.intersect(e,a);for(let g=h.start;g<h.end;g++)this.updateItemInDOM(this.items[g],g)}this.cache.transact(()=>{for(const h of d)for(let g=h.start;g<h.end;g++)this.removeItemFromDOM(g);for(const h of l)for(let g=h.start;g<h.end;g++)this.insertItemInDOM(g,c)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];let s=!1;if(!i.row)if(n)i.row=n;else{const c=this.cache.alloc(i.templateId);i.row=c.row,s=c.isReusingConnectedDomNode}const r=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",r);const a=this.accessibilityProvider.isChecked(i.element);if(typeof a=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!a));else if(a){const c=u(h=>i.row.domNode.setAttribute("aria-checked",String(!!h)),"update");c(a.value),i.checkedDisposable=a.onDidChange(c)}(s||!i.row.domNode.parentElement)&&(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const l=this.renderers.get(i.templateId);if(!l)throw new Error(`No renderer found for template id ${i.templateId}`);l?.renderElement(i.element,e,i.row.templateData,i.size);const d=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!d,d&&(i.dragStartDisposable=q(i.row.domNode,"dragstart",c=>this.onDragStart(i.element,d,c))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=q4(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Ce.map(this.disposables.add(new Qe(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Ce.map(this.disposables.add(new Qe(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Ce.filter(Ce.map(this.disposables.add(new Qe(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Ce.map(this.disposables.add(new Qe(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Ce.map(this.disposables.add(new Qe(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Ce.map(this.disposables.add(new Qe(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Ce.any(Ce.map(this.disposables.add(new Qe(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Ce.map(this.disposables.add(new Qe(this.domNode,Nt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Ce.map(this.disposables.add(new Qe(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Ce.map(this.disposables.add(new Qe(this.rowsContainer,Nt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var i,s;if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData($w.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,n)),typeof a>"u"&&(a=String(r.length));const l=re(".monaco-drag-image");l.textContent=a;const c=u(h=>{for(;h&&!h.classList.contains("monaco-workbench");)h=h.parentElement;return h||document.body},"getDragImageContainer")(this.domNode);c.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>c.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new zg(r),oh.CurrentDragAndDropData=new GB(r),(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,this.currentDragData,n)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),oh.CurrentDragAndDropData&&oh.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(oh.CurrentDragAndDropData)this.currentDragData=oh.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new jB}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&n.effect===0?"copy":"move";let i;if(typeof n!="boolean"&&n.feedback?i=n.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=du(i).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),i=i[0]===-1?[-1]:i,yOe(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=He(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of i){const r=this.items[s];r.dropTarget=!0,(t=r.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=He(()=>{var s;for(const r of i){const a=this.items[r];a.dropTarget=!1,(s=a.row)===null||s===void 0||s.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=pu(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,oh.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,oh.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=G.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=zSe(this.domNode).top;this.dragOverAnimationDisposable=XIe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=pu(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,r;e===this.elementTop(i.start)?(s=i.start,r=0):i.end-i.start>1&&(s=i.start+1,r=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let d=!1;for(let c=l.start;c<l.end;c++){const h=this.probeDynamicHeight(c);h!==0&&this.rangeMap.splice(c,1,[this.items[c]]),a+=h,d=d||h!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();const c=Li.relativeComplement(i,l);for(const g of c)for(let f=g.start;f<g.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=Li.relativeComplement(l,i);for(const g of h)for(let f=g.start;f<g.end;f++){const p=f+1,b=p<this.items.length?this.items[p].row:null,_=b?b.domNode:null;this.insertItemInDOM(f,_)}for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof s=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-r+g;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,n,i;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const d=this.virtualDelegate.getDynamicHeight(s.element);if(d!==null){const c=s.size;return s.size=d,s.lastDynamicHeightWidth=this.renderWidth,d-c}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const r=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,s.lastDynamicHeightWidth=this.renderWidth,s.size-r;const{row:a}=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);if(!l)throw new An("Missing renderer for templateId: "+s.templateId);return l.renderElement(s.element,e,a.templateData,void 0),s.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0),(i=(n=this.virtualDelegate).setDynamicHeight)===null||i===void 0||i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const n=this.renderers.get(t.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,t.element,-1,t.row.templateData,void 0),n.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),wt(this.disposables)}};u(jP,"ListView");let Yo=jP;Yo.InstanceCount=0;$d([xn],Yo.prototype,"onMouseClick",null);$d([xn],Yo.prototype,"onMouseDblClick",null);$d([xn],Yo.prototype,"onMouseMiddleClick",null);$d([xn],Yo.prototype,"onMouseDown",null);$d([xn],Yo.prototype,"onMouseOver",null);$d([xn],Yo.prototype,"onMouseOut",null);$d([xn],Yo.prototype,"onContextMenu",null);$d([xn],Yo.prototype,"onTouchStart",null);$d([xn],Yo.prototype,"onTap",null);var Lf=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Rye=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const qle=class qle{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}};u(qle,"TraitRenderer");let $B=qle;var q1;let WA=(q1=class{get name(){return this._trait}get renderer(){return new $B(this)}constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new V,this.onChange=this._onChange.event}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,r=e+t,a=[];let l=0;for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]<e;)a.push(this.sortedIndexes[l++]);for(let c=0;c<n.length;c++)n[c]&&a.push(c+e);for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]>=r;)a.push(this.sortedIndexes[l++]+s);const d=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&d>0){const c=(i=this.sortedIndexes.find(h=>h>=e))!==null&&i!==void 0?i:d-1;a.push(Math.min(c,d-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=d}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Fye),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=ZB(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return Iy(this.sortedIndexes,e,Fye)>=0}dispose(){wt(this._onChange)}},u(q1,"Trait"),q1);Lf([xn],WA.prototype,"renderer",null);const Yle=class Yle extends WA{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}};u(Yle,"SelectionTrait");let qB=Yle;const Xle=class Xle{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=new Set(i),r=n.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}};u(Xle,"TraitSpliceable");let Jv=Xle;function su(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}u(su,"isInputElement");function kp(o){return o.classList.contains("monaco-editor")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:kp(o.parentElement)}u(kp,"isMonacoEditor");function iTe(o){return o.tagName==="A"&&o.classList.contains("monaco-button")||o.tagName==="DIV"&&o.classList.contains("monaco-button-dropdown")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:iTe(o.parentElement)}u(iTe,"isButton");const Zle=class Zle{get onKeyDown(){return this.disposables.add(Ce.chain(this.disposables.add(new Qe(this.view.domNode,"keydown")).event).filter(e=>!su(e.target)).map(e=>new Mt(e)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new ie,this.multipleSelectionDisposables=new ie,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(ot?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(ot?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Ji(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};u(Zle,"KeyboardController");let BA=Zle;Lf([xn],BA.prototype,"onKeyDown",null);var ja;(function(o){o[o.Automatic=0]="Automatic",o[o.Trigger=1]="Trigger"})(ja||(ja={}));var Dp;(function(o){o[o.Idle=0]="Idle",o[o.Typing=1]="Typing"})(Dp||(Dp={}));const wOe=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=98&&o.keyCode<=107||o.keyCode>=85&&o.keyCode<=95}},Jle=class Jle{constructor(e,t,n,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=s,this.enabled=!1,this.state=Dp.Idle,this.mode=ja.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ie,this.disposables=new ie,this.updateOptions(e.options)}updateOptions(e){var t,n;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(n=e.typeNavigationMode)!==null&&n!==void 0?n:ja.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(Ce.chain(this.enabledDisposables.add(new Qe(this.view.domNode,"keydown")).event)).filter(s=>!su(s.target)).filter(()=>this.mode===ja.Automatic||this.triggered).map(s=>new Mt(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>Ke.stop(s,!0)).map(s=>s.browserEvent.key).event,n=Ce.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Ce.reduce(Ce.any(t,n),(s,r)=>r===null?null:(s||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Ii(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Dp.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===Dp.Idle?1:0;this.state=Dp.Typing;for(let s=0;s<this.list.length;s++){const r=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){const d=Kw(e,l),c=kFe(e,l);if(c){const h=c[0].end-c[0].start;if(d||h>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}}else if(typeof l>"u"||Kw(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}};u(Jle,"TypeNavigationController");let YB=Jle;const Qle=class Qle{constructor(e,t){this.list=e,this.view=t,this.disposables=new ie,this.disposables.add(Ce.chain(this.disposables.add(new Qe(t.domNode,"keydown")).event)).filter(i=>!su(i.target)).map(i=>new Mt(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}};u(Qle,"DOMFocusController");let XB=Qle;function sTe(o){return ot?o.browserEvent.metaKey:o.browserEvent.ctrlKey}u(sTe,"isSelectionSingleChangeEvent");function oTe(o){return o.browserEvent.shiftKey}u(oTe,"isSelectionRangeChangeEvent");function COe(o){return o instanceof MouseEvent&&o.button===2}u(COe,"isMouseRightClick");const Pye={isSelectionSingleChangeEvent:sTe,isSelectionRangeChangeEvent:oTe},ede=class ede{constructor(e){this.list=e,this.disposables=new ie,this._onPointer=new V,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Pye),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(oi.addTarget(e.getHTMLElement()))),Ce.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Pye))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){kp(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(su(e.browserEvent.target)||kp(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||su(e.browserEvent.target)||kp(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),COe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(su(e.browserEvent.target)||kp(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const c=this.list.getFocus()[0];n=c??t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),r=Ji(i,s+1),a=this.list.getSelection(),l=TOe(ZB(a,[n]),n);if(l.length===0)return;const d=ZB(r,LOe(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}};u(ede,"MouseController");let UA=ede;const tde=class tde{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,n;const i=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&s.push(`.monaco-list${i} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(s.push(`.monaco-list${i}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${i}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${i}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${i}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${i}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${i} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${i} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${i} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${i} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${i} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${i} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${i} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${i} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${i}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${i}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=tg(e.listFocusAndSelectionOutline,tg(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));r&&s.push(`.monaco-list${i}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&s.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=tg(e.listSelectionOutline,(n=e.listInactiveFocusOutline)!==null&&n!==void 0?n:"");a&&s.push(`.monaco-list${i} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&s.push(`.monaco-list${i} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&s.push(`.monaco-list${i} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${i} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&s.push(`
				.monaco-list${i}.drop-target,
				.monaco-list${i} .monaco-list-rows.drop-target,
				.monaco-list${i} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&s.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&s.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=s.join(`
`)}};u(tde,"DefaultStyleController");let zA=tde;const SOe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropBackground:"#383B3D",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:K.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:K.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:K.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},xOe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function TOe(o,e){const t=o.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&o[i]===e-(t-i);)n.push(o[i--]);for(n.reverse(),i=t;i<o.length&&o[i]===e+(i-t);)n.push(o[i++]);return n}u(TOe,"getContiguousRangeContaining");function ZB(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){t.push(o[n]),n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):t.push(e[i++]);return t}u(ZB,"disjunction");function LOe(o,e){const t=[];let n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):i++;return t}u(LOe,"relativeComplement");const Fye=u((o,e)=>o-e,"numericSort"),nde=class nde{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const r of this.renderers)r.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){var s;let r=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,n[r],i),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}};u(nde,"PipelineRenderer");let JB=nde;const ide=class ide{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}};u(ide,"AccessibiltyRenderer");let QB=ide;const sde=class sde{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,r;(r=(s=this.dnd).onDragLeave)===null||r===void 0||r.call(s,e,t,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}};u(sde,"ListViewDragAndDrop");let e6=sde;const ode=class ode{get onDidChangeFocus(){return Ce.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Ce.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(Ce.chain(this.disposables.add(new Qe(this.view.domNode,"keydown")).event)).map(s=>new Mt(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ke.stop(s,!0)).filter(()=>!1).event,n=this.disposables.add(Ce.chain(this.disposables.add(new Qe(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(s=>new Mt(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ke.stop(s,!0)).map(({browserEvent:s})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,d=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:d,browserEvent:s}}).event,i=this.disposables.add(Ce.chain(this.view.onContextMenu)).filter(s=>!e).map(({element:s,index:r,browserEvent:a})=>({element:s,index:r,anchor:new Bs(a),browserEvent:a})).event;return Ce.any(t,n,i)}get onKeyDown(){return this.disposables.add(new Qe(this.view.domNode,"keydown")).event}get onDidFocus(){return Ce.signal(this.disposables.add(new Qe(this.view.domNode,"focus",!0)).event)}constructor(e,t,n,i,s=xOe){var r,a,l,d;this.user=e,this._options=s,this.focus=new WA("focused"),this.anchor=new WA("anchor"),this.eventBufferer=new Vy,this._ariaLabel="",this.disposables=new ie,this._onDidDispose=new V,this.onDidDispose=this._onDidDispose.event;const c=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new qB(c!=="listbox");const h=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(h.push(new QB(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(f=>new JB(f.templateId,[...h,f]));const g=Object.assign(Object.assign({},s),{dnd:s.dnd&&new e6(this,s.dnd)});if(this.view=this.createListView(t,n,i,g),this.view.domNode.setAttribute("role",c),s.styleController)this.styleController=s.styleController(this.view.domId);else{const f=Ko(this.view.domNode);this.styleController=new zA(f,this.view.domId)}if(this.spliceable=new WB([new Jv(this.focus,this.view,s.identityProvider),new Jv(this.selection,this.view,s.identityProvider),new Jv(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new XB(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new BA(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const f=s.keyboardNavigationDelegate||wOe;this.typeNavigationController=new YB(this,this.view,s.keyboardNavigationLabelProvider,(d=s.keyboardNavigationEventFilter)!==null&&d!==void 0?d:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,i){return new Yo(e,t,n,i)}createMouseController(e){return new UA(this)}updateOptions(e={}){var t,n;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)===null||n===void 0||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new bc(this.user,`Invalid start index: ${e}`);if(t<0)throw new bc(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new bc(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new bc(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return x1e(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new bc(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}focusNextPage(e,t){return Rye(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){const s=this.findPreviousIndex(n,!1,t);s>-1&&i!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;n>i&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),yield fu(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return Rye(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const r=this.findNextIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield fu(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new bc(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(cu(t)){const r=s-this.view.renderHeight;this.view.setScrollTop(r*Rs(t,0,1)+i)}else{const r=i+s,a=n+this.view.renderHeight;i<n&&r>=a||(i<n||r>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};u(ode,"List");let vo=ode;Lf([xn],vo.prototype,"onDidChangeFocus",null);Lf([xn],vo.prototype,"onDidChangeSelection",null);Lf([xn],vo.prototype,"onContextMenu",null);Lf([xn],vo.prototype,"onKeyDown",null);Lf([xn],vo.prototype,"onDidFocus",null);const Yh=re,rTe="selectOption.entry.template",rde=class rde{get templateId(){return rTe}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Q(e,Yh(".option-text")),t.detail=Q(e,Yh(".option-detail")),t.decoratorRight=Q(e,Yh(".option-decorator-right")),t}renderElement(e,t,n){const i=n,s=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=s,i.detail.textContent=r||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}};u(rde,"SelectListRenderer");let t6=rde;const Ec=class Ec extends G{constructor(e,t,n,i,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=i,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Ec.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new V,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return rTe}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=re(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Q(this.selectDropDownContainer,Yh(".select-box-details-pane"));const t=Q(this.selectDropDownContainer,Yh(".select-box-dropdown-container-width-control")),n=Q(t,Yh(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Q(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Ko(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(q(this.selectDropDownContainer,pe.DRAG_START,i=>{Ke.stop(i,!0)}))}registerListeners(){this._register(Jt(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)})),this._register(q(this.selectElement,pe.CLICK,t=>{Ke.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(q(this.selectElement,pe.MOUSE_DOWN,t=>{Ke.stop(t)}));let e;this._register(q(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(q(this.selectElement,"touchend",t=>{Ke.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(q(this.selectElement,pe.KEY_DOWN,t=>{const n=new Mt(t);let i=!1;ot?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),Ke.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){jn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,n;const i=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",r=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"";this.selectElement.style.backgroundColor=i,this.selectElement.style.color=s,this.selectElement.style.borderColor=r}styleList(){var e,t;const n=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",i=tg(this.styles.selectListBackground,n);this.selectDropDownListContainer.style.backgroundColor=i,this.selectionDetailsPane.style.backgroundColor=i;const s=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Cn(this.selectElement),n=getComputedStyle(this.selectElement),i=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),s=window.innerHeight-t.top-t.height-(this.selectBoxOptions.minBottomMargin||0),r=t.top-Ec.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),d=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let c=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,g=c+i+h,f=Math.floor((s-i-h)/this.getHeight()),p=Math.floor((r-i-h)/this.getHeight());if(e)return t.top+t.height>window.innerHeight-22||t.top<Ec.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&p<1?!1:(f<Ec.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(t.top+t.height>window.innerHeight-22||t.top<Ec.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+p<1)return this.hideSelectDropDown(!0),!1;g>s&&(c=f*this.getHeight())}else g>r&&(c=p*this.getHeight());return this.selectList.layout(c),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=c+i+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=c+i+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((s,r)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,d=s.text.length+a+l;d>i&&(n=r,i=d)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=bs(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Q(e,Yh(".select-box-dropdown-list-container")),this.listRenderer=new t6,this.selectList=new vo("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let s=i.text;return i.detail&&(s+=`. ${i.detail}`),i.decoratorRight&&(s+=`. ${i.decoratorRight}`),i.description&&(s+=`. ${i.description}`),s},getWidgetAriaLabel:()=>m({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>ot?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Qe(this.selectDropDownListContainer,"keydown")),n=Ce.chain(t.event).filter(()=>this.selectList.length>0).map(i=>new Mt(i));this._register(n.filter(i=>i.keyCode===3).on(i=>this.onEnter(i),this)),this._register(n.filter(i=>i.keyCode===2).on(i=>this.onEnter(i),this)),this._register(n.filter(i=>i.keyCode===9).on(i=>this.onEscape(i),this)),this._register(n.filter(i=>i.keyCode===16).on(i=>this.onUpArrow(i),this)),this._register(n.filter(i=>i.keyCode===18).on(i=>this.onDownArrow(i),this)),this._register(n.filter(i=>i.keyCode===12).on(this.onPageDown,this)),this._register(n.filter(i=>i.keyCode===11).on(this.onPageUp,this)),this._register(n.filter(i=>i.keyCode===14).on(this.onHome,this)),this._register(n.filter(i=>i.keyCode===13).on(this.onEnd,this)),this._register(n.filter(i=>i.keyCode>=21&&i.keyCode<=56||i.keyCode>=85&&i.keyCode<=113).on(this.onCharacter,this)),this._register(q(this.selectList.getHTMLElement(),pe.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register(q(this.selectDropDownContainer,pe.FOCUS_OUT,i=>{!this._isVisible||Mi(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Ke.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const i=Number(n.getAttribute("data-index")),s=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!s&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=u(s=>{for(let r=0;r<s.childNodes.length;r++){const a=s.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?s.removeChild(a):n(a)}},"cleanRenderedMarkdown"),i=HO({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,n;this.selectionDetailsPane.innerText="";const i=this.options[e],s=(t=i?.description)!==null&&t!==void 0?t:"",r=(n=i?.descriptionIsMarkdown)!==null&&n!==void 0?n:!1;if(s){if(r){const a=i.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(s,a))}else this.selectionDetailsPane.innerText=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Ke.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Ke.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Ke.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Ke.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Ke.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Ke.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Ke.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Ke.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=ad.toString(e.keyCode);let n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Ke.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};u(Ec,"SelectBoxList");let Mb=Ec;Mb.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;Mb.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;Mb.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;const ade=class ade extends G{constructor(e,t,n,i){super(),this.selected=0,this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new V),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(oi.addTarget(this.selectElement)),[Nt.Tap].forEach(e=>{this._register(q(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Jt(this.selectElement,"click",e=>{Ke.stop(e,!0)})),this._register(Jt(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Jt(this.selectElement,"keydown",e=>{let t=!1;ot?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!jn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,n;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(n=this.styles.selectBorder)!==null&&n!==void 0?n:"")}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}};u(ade,"SelectBoxNative");let n6=ade;const lde=class lde extends Ar{constructor(e,t,n,i,s){super(),ot&&!s?.useCustomDrawn?this.selectBoxDelegate=new n6(e,t,i,s):this.selectBoxDelegate=new Mb(e,t,n,i,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}};u(lde,"SelectBox");let i6=lde;const dde=class dde extends G{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof qn&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new _u)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(oi.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Bo&&this._register(q(e,pe.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData($w.TEXT,this._action.label)}))),this._register(q(t,Nt.Tap,i=>this.onClick(i,!0))),this._register(q(t,pe.MOUSE_DOWN,i=>{n||Ke.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),ot&&this._register(q(t,pe.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(q(t,pe.CLICK,i=>{Ke.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(q(t,pe.DBLCLICK,i=>{Ke.stop(i,!0)})),[pe.MOUSE_UP,pe.MOUSE_OUT].forEach(i=>{this._register(q(t,i,s=>{Ke.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ke.stop(e,!0);const i=no(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.action.tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=tTe(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}};u(dde,"BaseActionViewItem");let Ao=dde;const cde=class cde extends Ao{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Q(this.element,re("a.action-label"))),this.label&&this.label.setAttribute("role",this.getDefaultAriaRole()),this.options.label&&this.options.keybinding&&this.element&&(Q(this.element,re("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===ui.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.action.class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.setAttribute("aria-checked",""),this.label.setAttribute("role",this.getDefaultAriaRole())))}};u(cde,"ActionViewItem");let Eu=cde;const ude=class ude extends Ao{constructor(e,t,n,i,s,r,a){super(e,t),this.selectBox=new i6(n,i,s,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}};u(ude,"SelectActionViewItem");let s6=ude;var EOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const hde=class hde extends G{constructor(e,t={}){var n,i,s,r,a,l;super(),this._actionRunnerDisposables=this._register(new ie),this.viewItemDisposables=this._register(new Oy),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new V),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new V({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new V),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new V),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(r=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new _u,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(h=>this._onWillRun.fire(h))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let d,c;switch(this._orientation){case 0:d=[15],c=[17];break;case 1:d=[16],c=[18],this.domNode.className+=" vertical";break}this._register(q(this.domNode,pe.KEY_DOWN,h=>{const g=new Mt(h);let f=!0;const p=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(g.equals(d[0])||g.equals(d[1]))?f=this.focusPrevious():c&&(g.equals(c[0])||g.equals(c[1]))?f=this.focusNext():g.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():g.equals(14)?f=this.focusFirst():g.equals(13)?f=this.focusLast():g.equals(2)&&p instanceof Ao&&p.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(g)?this._triggerKeys.keyDown?this.doTrigger(g):this.triggerKeyDown=!0:f=!1,f&&(g.preventDefault(),g.stopPropagation())})),this._register(q(this.domNode,pe.KEY_UP,h=>{const g=new Mt(h);this.isTriggerKeyEvent(g)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(g)),g.preventDefault(),g.stopPropagation()):(g.equals(2)||g.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(ul(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(tu()===this.domNode||!Mi(tu(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Ao&&n.isEnabled());t instanceof Ao&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Ao&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Mi(tu(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=cu(t.index)?t.index:null;n.forEach(s=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l=Object.assign({hoverDelegate:this.options.hoverDelegate},t);this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new Eu(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,q(r,pe.CONTEXT_MENU,d=>{Ke.stop(d,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Ao&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=wt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),$n(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ui.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ui.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const s=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(s){let r=!0;Ry(s.focus)||(r=!1),this.options.focusOnlyEnabledItems&&Ry(s.isEnabled)&&!s.isEnabled()&&(r=!1),s.action.id===ui.ID&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Ao){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return EOe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){this._context=void 0,this.viewItems=wt(this.viewItems),this.getContainer().remove(),super.dispose()}};u(hde,"ActionBar");let Ls=hde;const kOe={IconContribution:"base.contributions.icons"};var Oye;(function(o){function e(t,n){let i=t.defaults;for(;Te.isThemeIcon(i);){const s=Ef.getIcon(i.id);if(!s)return;i=s.defaults}return i}u(e,"getDefinition"),o.getDefinition=e})(Oye||(Oye={}));var Hye;(function(o){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}u(e,"toJSONObject"),o.toJSONObject=e;function t(n){const i=u(s=>rs(s)?s:void 0,"stringOrUndef");if(n&&Array.isArray(n.src)&&n.src.every(s=>rs(s.format)&&rs(s.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(s=>({format:s.format,location:Ae.parse(s.location)}))}}u(t,"fromJSONObject"),o.fromJSONObject=t})(Hye||(Hye={}));const gde=class gde{constructor(){this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Te.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}const r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=u((s,r)=>s.id.localeCompare(r.id),"sorter"),t=u(s=>{for(;Te.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},"classNames"),n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${Te.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(r=>!Te.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}};u(gde,"IconRegistry");let o6=gde;const Ef=new o6;on.add(kOe.IconContribution,Ef);function Yt(o,e,t,n){return Ef.registerIcon(o,e,t,n)}u(Yt,"registerIcon");function aTe(){return Ef}u(aTe,"getIconRegistry");function DOe(){const o=Y1e();for(const e in o){const t="\\"+o[e].toString(16);Ef.registerIcon(e,{fontCharacter:t})}}u(DOe,"initialize");DOe();const lTe="vscode://schemas/icons",dTe=on.as(TO.JSONContribution);dTe.registerSchema(lTe,Ef.getIconSchema());const Vye=new Et(()=>dTe.notifySchemaChanged(lTe),200);Ef.onDidChange(()=>{Vye.isScheduled()||Vye.schedule()});const cTe=Yt("widget-close",ue.close,m("widgetClose","Icon for the close action in widgets."));Yt("goto-previous-location",ue.arrowUp,m("previousChangeIcon","Icon for goto previous editor location."));Yt("goto-next-location",ue.arrowDown,m("nextChangeIcon","Icon for goto next editor location."));Te.modify(ue.sync,"spin");Te.modify(ue.loading,"spin");var MOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},CH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},AOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},cc;const UE=3,fde=class fde{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}};u(fde,"DiffEntry");let Sh=fde;const pde=class pde{constructor(e){this.entries=e}};u(pde,"Diff");let Qv=pde;const IOe=Yt("diff-review-insert",ue.add,m("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),NOe=Yt("diff-review-remove",ue.remove,m("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),ROe=Yt("diff-review-close",ue.close,m("diffReviewCloseIcon","Icon for 'Close' in diff review."));var Y1;let Wc=cc=(Y1=class extends G{constructor(e,t,n,i){super(),this._languageService=t,this._audioCueService=n,this._configurationService=i,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=ht(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=ht(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Ls(this.actionBarContainer.domNode)),this._actionBar.push(new qn("diffreview.close",m("label.close","Close"),"close-diff-review "+Te.asClassName(ROe),!0,()=>AOe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=ht(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=ht(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new Cu(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Jt(this.domNode.domNode,"click",s=>{s.preventDefault();const r=GSe(s.target,"diff-review-row");r&&this._goToRow(r)})),this._register(Jt(this.domNode.domNode,"keydown",s=>{(s.equals(18)||s.equals(2066)||s.equals(530))&&(s.preventDefault(),this._goToRow(this._getNextRow(),"next")),(s.equals(16)||s.equals(2064)||s.equals(528))&&(s.preventDefault(),this._goToRow(this._getPrevRow(),"previous")),(s.equals(9)||s.equals(2057)||s.equals(521)||s.equals(1033)||s.equals(10)||s.equals(3))&&(s.preventDefault(),this.accept())})),this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("accessibility.verbosity.diffEditor")&&this._diffEditor.updateOptions({accessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.diffEditor")})})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getPrevRow(),"previous")}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow(),"next")}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new W(e,1)),this._diffEditor.revealPosition(new W(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e,t){const n=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),n&&n!==e&&(n.tabIndex=-1);const i=t?t==="next"?n?.nextElementSibling:n?.previousElementSibling:n;i?.classList.contains("line-insert")?this._audioCueService.playAudioCue(rt.diffLineInserted,{allowManyInParallel:!0}):i?.classList.contains("line-delete")&&this._audioCueService.playAudioCue(rt.diffLineDeleted,{allowManyInParallel:!0}),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:cc._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];const i=[];let s=0;for(let d=0,c=e.length;d<c;d++){const h=e[d],g=h.originalStartLineNumber,f=h.originalEndLineNumber,p=h.modifiedStartLineNumber,b=h.modifiedEndLineNumber,_=[];let v=0;{const y=f===0?g:g-1,w=b===0?p:p-1;let C=1,S=1;if(d>0){const E=e[d-1];E.originalEndLineNumber===0?C=E.originalStartLineNumber+1:C=E.originalEndLineNumber+1,E.modifiedEndLineNumber===0?S=E.modifiedStartLineNumber+1:S=E.modifiedEndLineNumber+1}let k=y-UE+1,T=w-UE+1;if(k<C){const E=C-k;k=k+E,T=T+E}if(T<S){const E=S-T;k=k+E,T=T+E}_[v++]=new Sh(k,y,T,w)}f!==0&&(_[v++]=new Sh(g,f,0,0)),b!==0&&(_[v++]=new Sh(0,0,p,b));{const y=f===0?g+1:f+1,w=b===0?p+1:b+1;let C=t,S=n;if(d+1<c){const E=e[d+1];E.originalEndLineNumber===0?C=E.originalStartLineNumber:C=E.originalStartLineNumber-1,E.modifiedEndLineNumber===0?S=E.modifiedStartLineNumber:S=E.modifiedStartLineNumber-1}let k=y+UE-1,T=w+UE-1;if(k>C){const E=C-k;k=k+E,T=T+E}if(T>S){const E=S-T;k=k+E,T=T+E}_[v++]=new Sh(y,k,w,T)}i[s++]=new Qv(_)}let r=i[0].entries;const a=[];let l=0;for(let d=1,c=i.length;d<c;d++){const h=i[d].entries,g=r[r.length-1],f=h[0];if(g.getType()===0&&f.getType()===0&&f.originalLineStart<=g.originalLineEnd){r[r.length-1]=new Sh(g.originalLineStart,f.originalLineEnd,g.modifiedLineStart,f.modifiedLineEnd),r=r.concat(h.slice(1));continue}a[l++]=new Qv(r),r=h}return a[l++]=new Qv(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,r=s[s.length-1].modifiedLineEnd;if(t<=r)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),r=i.getOptions();if(!this._isVisible||!n||!i){$n(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,d=document.createElement("div");d.className="diff-review-table",d.setAttribute("role","list"),d.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Kn(d,t.get(49));let c=0,h=0,g=0,f=0;for(let T=0,E=l.length;T<E;T++){const D=l[T],O=D.originalLineStart,B=D.originalLineEnd,H=D.modifiedLineStart,F=D.modifiedLineEnd;O!==0&&(c===0||O<c)&&(c=O),B!==0&&(h===0||B>h)&&(h=B),H!==0&&(g===0||H<g)&&(g=H),F!==0&&(f===0||F>f)&&(f=F)}const p=document.createElement("div");p.className="diff-review-row";const b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const _=h-c+1,v=f-g+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${c},${_} +${g},${v} @@`)),p.setAttribute("data-line",String(g));const y=u(T=>T===0?m("no_lines_changed","no lines changed"):T===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",T),"getAriaLines"),w=y(_),C=y(v);p.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,c,w,g,C)),p.appendChild(b),p.setAttribute("role","listitem"),d.appendChild(p);const S=t.get(65);let k=g;for(let T=0,E=l.length;T<E;T++){const D=l[T];cc._renderSection(d,D,k,S,this._width,e,n,s,t,i,r,this._languageService.languageIdCodec),D.modifiedLineStart!==0&&(k=D.modifiedLineEnd)}$n(this._content.domNode),this._content.domNode.appendChild(d),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,r,a,l,d,c,h,g){const f=t.getType();let p="diff-review-row",b="";const _="diff-review-spacer";let v=null;switch(f){case 1:p="diff-review-row line-insert",b=" char-insert",v=IOe;break;case 2:p="diff-review-row line-delete",b=" char-delete",v=NOe;break}const y=t.originalLineStart,w=t.originalLineEnd,C=t.modifiedLineStart,S=t.modifiedLineEnd,k=Math.max(S-C,w-y),T=r.get(142),E=T.glyphMarginWidth+T.lineNumbersWidth,D=d.get(142),O=10+D.glyphMarginWidth+D.lineNumbersWidth;for(let B=0;B<=k;B++){const H=y===0?0:y+B,F=C===0?0:C+B,$=document.createElement("div");$.style.minWidth=s+"px",$.className=p,$.setAttribute("role","listitem"),F!==0&&(n=F),$.setAttribute("data-line",String(n));const ee=document.createElement("div");ee.className="diff-review-cell",ee.style.height=`${i}px`,$.appendChild(ee);const ge=document.createElement("span");ge.style.width=E+"px",ge.style.minWidth=E+"px",ge.className="diff-review-line-number"+b,H!==0?ge.appendChild(document.createTextNode(String(H))):ge.innerText=" ",ee.appendChild(ge);const X=document.createElement("span");X.style.width=O+"px",X.style.minWidth=O+"px",X.style.paddingRight="10px",X.className="diff-review-line-number"+b,F!==0?X.appendChild(document.createTextNode(String(F))):X.innerText=" ",ee.appendChild(X);const R=document.createElement("span");if(R.className=_,v){const fe=document.createElement("span");fe.className=Te.asClassName(v),fe.innerText="  ",R.appendChild(fe)}else R.innerText="  ";ee.appendChild(R);let z;if(F!==0){let fe=this._renderLine(c,d,h.tabSize,F,g);cc._ttPolicy&&(fe=cc._ttPolicy.createHTML(fe)),ee.insertAdjacentHTML("beforeend",fe),z=c.getLineContent(F)}else{let fe=this._renderLine(a,r,l.tabSize,H,g);cc._ttPolicy&&(fe=cc._ttPolicy.createHTML(fe)),ee.insertAdjacentHTML("beforeend",fe),z=a.getLineContent(H)}z.length===0&&(z=m("blankLine","blank"));let te="";switch(f){case 0:H===F?te=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",z,H):te=m("equalLine","{0} original line {1} modified line {2}",z,H,F);break;case 1:te=m("insertLine","+ {0} modified line {1}",z,F);break;case 2:te=m("deleteLine","- {0} original line {1}",z,H);break}$.setAttribute("aria-label",te),e.appendChild($)}}static _renderLine(e,t,n,i,s){const r=e.getLineContent(i),a=t.get(49),l=xi.createEmpty(r,s),d=as.isBasicASCII(r,e.mightContainNonBasicASCII()),c=as.containsRTL(r,d,e.mightContainRTL());return QL(new Tr(a.isMonospace&&!t.get(32),a.canUseHalfwidthRightwardsArrow,r,!1,d,c,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(115),t.get(97),t.get(92),t.get(50)!==Sr.OFF,null)).html}},u(Y1,"DiffReview"),Y1);Wc._ttPolicy=Kd("diffReview",{createHTML:o=>o});Wc=cc=MOe([CH(1,Kt),CH(2,wf),CH(3,at)],Wc);var SH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const mde=class mde extends G{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}constructor(e,t,n,i,s,r){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Te.asClassName(ue.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(65),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const d=[],c=i.modifiedEndLineNumber===0;d.push(new qn("diff.clipboard.copyDeletedContent",c?i.originalEndLineNumber>i.modifiedStartLineNumber?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>SH(this,void 0,void 0,function*(){const _=new L(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),v=i.originalModel.getValueInRange(_);yield this._clipboardService.writeText(v)})));let h=0,g;i.originalEndLineNumber>i.modifiedStartLineNumber&&(g=new qn("diff.clipboard.copyDeletedLineContent",c?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>SH(this,void 0,void 0,function*(){const _=i.originalModel.getLineContent(i.originalStartLineNumber+h);if(_===""){const v=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(v===0?`
`:`\r
`)}else yield this._clipboardService.writeText(_)})),d.push(g)),n.getOption(89)||d.push(new qn("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>SH(this,void 0,void 0,function*(){const _=new L(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),v=i.originalModel.getValueInRange(_);if(i.modifiedEndLineNumber===0){const y=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new L(i.modifiedStartLineNumber,y,i.modifiedStartLineNumber,y),text:l+v}])}else{const y=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new L(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,y),text:v}])}})));const p=n.getOption(125)&&!Cr,b=u((_,v)=>{var y;this._contextMenuService.showContextMenu({domForShadowRoot:p&&(y=n.getDomNode())!==null&&y!==void 0?y:void 0,getAnchor:()=>({x:_,y:v}),getActions:()=>(g&&(g.label=c?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+h)),d),autoSelectFirstItem:!0})},"showContextMenu");this._register(Jt(this._diffActions,"mousedown",_=>{const{top:v,height:y}=Cn(this._diffActions),w=Math.floor(a/3);_.preventDefault(),b(_.posx,v+y+w)})),this._register(n.onMouseMove(_=>{_.target.type===8||_.target.type===5?_.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(_=>{_.event.rightButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._viewZoneId&&(_.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a),b(_.event.posx,_.event.posy+a))}))}_updateLightBulbPosition(e,t,n){const{top:i}=Cn(e),s=t-i,r=Math.floor(s/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let d=0;d<this.diff.viewLineCounts.length;d++)if(l+=this.diff.viewLineCounts[d],r<l)return d}return r}};u(mde,"InlineDiffMargin");let r6=mde;const Nr=nt("editorWorkerService");var POe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wye=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},FOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},uh,X1;let Yw=uh=(X1=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new V,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}computeDiff(e,t,n,i){var s,r;return FOe(this,void 0,void 0,function*(){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n,i);if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new xr(new pt(1,2),new pt(1,t.getLineCount()+1),[new mu(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const a=JSON.stringify([e.uri.toString(),t.uri.toString()]),l=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),d=uh.diffCache.get(a);if(d&&d.context===l)return d.result;const c=Fi.create(),h=yield this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),g=c.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:g,timedOut:(s=h?.quitEarly)!==null&&s!==void 0?s:!0,detectedMoves:n.computeMoves?(r=h?.moves.length)!==null&&r!==void 0?r:0:-1}),i.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!h)throw new Error("no diff result available");return uh.diffCache.size>10&&uh.diffCache.delete(uh.diffCache.keys().next().value),uh.diffCache.set(a,{result:h,context:l}),h})}setOptions(e){var t;let n=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),n=!0),n&&this.onDidChangeEventEmitter.fire()}},u(X1,"WorkerBasedDocumentDiffProvider"),X1);Yw.diffCache=new Map;Yw=uh=POe([Wye(1,Nr),Wye(2,xo)],Yw);const Sa=nt("clipboardService"),qd=nt("contextViewService"),To=nt("contextMenuService"),uTe=nt("progressService"),bde=class bde{constructor(e,t){this.callback=e,this.report=t?.async?this._reportAsync.bind(this):this._reportSync.bind(this)}_reportSync(e){this._value=e,this.callback(this._value)}_reportAsync(e){Promise.resolve(this._lastTask).finally(()=>{this._value=e;const t=this.callback(this._value);this._lastTask=Promise.resolve(t).finally(()=>this._lastTask=void 0)})}};u(bde,"Progress");let Bd=bde;Bd.None=Object.freeze({report(){}});const Il=nt("editorProgressService");var OOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nc=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},HOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},ri;const _de=class _de{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,n,i){const s=i?ba.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,d=n.zones.length;l<d;l++){const c=n.zones[l];c.suppressMouseDown=!0,c.showInHiddenAreas=!0;const h=r.addZone(c);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&c.marginDomNode&&(c.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new r6(h,c.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),s?.restore(e),e.changeDecorations(r=>{this._decorations=r.deltaDecorations(this._decorations,n.decorations)}),t?.setZones(n.overviewZones)}};u(_de,"VisualEditorState");let GA=_de,VOe=0;const WOe=Yt("diff-insert",ue.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),hTe=Yt("diff-remove",ue.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),a6=Kd("diffEditorWidget",{createHTML:o=>o}),Bye=m("diff-aria-navigation-tip"," use Shift + F7 to navigate changes");var Z1;let ku=ri=(Z1=class extends G{constructor(e,t,n,i,s,r,a,l,d,c,h){super(),this._editorProgressService=h,this._onDidDispose=this._register(new V),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModel=this._register(new V),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidUpdateDiff=this._register(new V),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new V),this._lastOriginalWarning=null,this._lastModifiedWarning=null,a.willCreateDiffEditor(),this._documentDiffProvider=this._register(r.createInstance(Yw,t)),this._register(this._documentDiffProvider.onDidChange(f=>this._beginUpdateDecorationsSoon())),this._codeEditorService=a,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=r.createChild(new Wg([Re,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=l,this._notificationService=d,this._id=++VOe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=Uye(t,{enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showEmptyDecorations:!1,showMoves:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:0,minimumLineCount:0,revealLineCount:0},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:0,useInlineViewWhenSpaceIsLimited:!1}),this.isEmbeddedDiffEditorKey=M.isEmbeddedDiffEditor.bindTo(this._contextKeyService),this.isEmbeddedDiffEditorKey.set(typeof t.isInEmbeddedEditor<"u"?t.isInEmbeddedEditor:!1),this._updateDecorationsRunner=this._register(new Et(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=ri._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=ht(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Jt(this._overviewDomElement,pe.POINTER_DOWN,f=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(f)})),this._register(q(this._overviewDomElement,pe.MOUSE_WHEEL,f=>{this._modifiedEditor.delegateScrollFromMouseWheelEvent(f)},{passive:!1})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new GA(c,i),this._modifiedEditorState=new GA(c,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new pw(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=r.createInstance(Wc,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Xw(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new qA(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(l.onDidColorThemeChange(f=>{this._strategy&&this._strategy.applyColors(f)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=ri._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const g=ng.getDiffEditorContributions();for(const f of g)try{this._register(r.createInstance(f.ctor,this))}catch(p){Be(p)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}accessibleDiffViewerNext(){this._reviewPane.next()}accessibleDiffViewerPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=PM(e.type),n}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(Mv(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(49)&&this._updateDecorationsRunner.schedule(),s.hasChanged(143)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ri.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{n.getModel()&&(s.hasChanged(49)&&this._updateDecorationsRunner.schedule(),s.hasChanged(143)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ri.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),this._register(n.onMouseDown(s=>{var r,a;if(!s.event.rightButton&&s.target.position&&(!((r=s.target.element)===null||r===void 0)&&r.className.includes("arrow-revert-change"))){const l=s.target.position.lineNumber,d=s.target,c=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(h=>d?.detail.afterLineNumber===h.modifiedStartLineNumber||h.modifiedEndLineNumber>0&&h.modifiedStartLineNumber===l);c&&this.revertChange(c),s.event.stopPropagation(),this._updateDecorations();return}})),n}revertChange(e){const t=this._modifiedEditor,n=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!n||!i||!t)return;const s=e.originalEndLineNumber>0?new L(e.originalStartLineNumber,1,e.originalEndLineNumber,n.getLineMaxColumn(e.originalEndLineNumber)):null,r=s?n.getValueInRange(s):null,a=e.modifiedEndLineNumber>0?new L(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,i.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=i.getEOL();if(e.originalEndLineNumber===0&&a){let d=a;e.modifiedStartLineNumber>1?d=a.setStartPosition(e.modifiedStartLineNumber-1,i.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<i.getLineCount()&&(d=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:d,text:""}])}else if(e.modifiedEndLineNumber===0&&r!==null){const d=e.modifiedStartLineNumber<i.getLineCount()?new W(e.modifiedStartLineNumber+1,1):new W(e.modifiedStartLineNumber,i.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:L.fromPositions(d,d),text:e.modifiedStartLineNumber<i.getLineCount()?r+l:l+r}])}else a&&r!==null&&t.executeEdits("diffEditor",[{range:a,text:r}])}_createInnerEditor(e,t,n,i){return e.createInstance(Bg,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return v_.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=Uye(e,this._options),n=zOe(this._options,t);this._options=t,this.isEmbeddedDiffEditorKey.set(typeof e.isInEmbeddedEditor<"u"?e.isInEmbeddedEditor:!1);const i=n.ignoreTrimWhitespace||n.renderIndicators||n.renderMarginRevertIcon,s=this._isVisible&&(n.maxComputationTime||n.maxFileSize);this._documentDiffProvider.setOptions(t),i?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Xw(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new qA(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=ri._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}createViewModel(e){return{model:e,waitForDiff(){return HOe(this,void 0,void 0,function*(){})}}}setModel(e){if(e&&"model"in e&&(e=e.model),e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport(),this._onDidChangeModel.fire(),this._diffNavigator=this._register(this._instantiationService.createInstance(RD,this,{alwaysRevealFirst:!1,findResultLoop:this.getModifiedEditor().getOption(40).loop}))}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}focus(){this._modifiedEditor.focus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=ri.ENTIRE_DIFF_OVERVIEW_WIDTH-2*ri.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:ri.ONE_OVERVIEW_WIDTH,right:n+ri.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:ri.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),ri.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1);const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,s=u(r=>{const a=r.getValueLength();return i===0||a<=i},"canSyncModelForDiff");if(!s(e)||!s(t)){(!ri._equals(e.uri,this._lastOriginalWarning)||!ri._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(m("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._documentDiffProvider.computeDiff(e,t,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace,maxComputationTimeMs:this._options.maxComputationTime,computeMoves:!1},Ze.None).then(r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult={identical:r.identical,quitEarly:r.quitEarly,changes2:r.changes,changes:r.changes.map(a=>{let l,d,c,h,g=a.innerChanges;return a.originalRange.isEmpty?(l=a.originalRange.startLineNumber-1,d=0,g=void 0):(l=a.originalRange.startLineNumber,d=a.originalRange.endLineNumberExclusive-1),a.modifiedRange.isEmpty?(c=a.modifiedRange.startLineNumber-1,h=0,g=void 0):(c=a.modifiedRange.startLineNumber,h=a.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:l,originalEndLineNumber:d,modifiedStartLineNumber:c,modifiedEndLineNumber:h,charChanges:g?.map(f=>({originalStartLineNumber:f.originalRange.startLineNumber,originalStartColumn:f.originalRange.startColumn,originalEndLineNumber:f.originalRange.endLineNumber,originalEndColumn:f.originalRange.endColumn,modifiedStartLineNumber:f.modifiedRange.startLineNumber,modifiedStartColumn:f.modifiedRange.startColumn,modifiedEndLineNumber:f.modifiedRange.endLineNumber,modifiedEndColumn:f.modifiedRange.endColumn}))}})},this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._options.renderMarginRevertIcon&&!this._modifiedEditor.getOption(89),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,i,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1}),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),this._updateAriaLabel(t),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_updateAriaLabel(e){var t;let n=(t=e.ariaLabel)!==null&&t!==void 0?t:"";this._options.accessibilityVerbose?n+=Bye:n&&(n=n.replaceAll(Bye,"")),e.ariaLabel=n}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),this._updateAriaLabel(t),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Mr.revealHorizontalRightPadding.defaultValue+ri.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i-ri.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=ri.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-ri.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(ri.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?ri.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),r=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){var t;(t=this._strategy)===null||t===void 0||t.dispose(),this._strategy=e,this._boundarySashes&&e.setBoundarySashes(this._boundarySashes),e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}},u(Z1,"DiffEditorWidget"),Z1);ku.ONE_OVERVIEW_WIDTH=15;ku.ENTIRE_DIFF_OVERVIEW_WIDTH=30;ku.UPDATE_DIFF_DECORATIONS_DELAY=200;ku=ri=OOe([nc(3,Sa),nc(4,Re),nc(5,Pe),nc(6,gt),nc(7,On),nc(8,_n),nc(9,To),nc(10,Il)],ku);const vde=class vde extends G{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(lxe)||(e.getColor(rxe)||vM).transparent(2),n=e.getColor(dxe)||(e.getColor(axe)||yM).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s,r){r=r.sort((c,h)=>c.afterLineNumber-h.afterLineNumber),s=s.sort((c,h)=>c.afterLineNumber-h.afterLineNumber);const a=this._getViewZones(e,s,r,n),l=this._getOriginalEditorDecorations(a,e,t,n),d=this._getModifiedEditorDecorations(a,e,t,n,i);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:d.decorations,overviewZones:d.overviewZones,zones:a.modified}}}setBoundarySashes(e){}};u(vde,"DiffEditorWidgetStyle");let jA=vde;const yde=class yde{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}};u(yde,"ForeignViewZonesIterator");let KA=yde;const Hh=class Hh{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const r=Zw(i,s,t,n);return r.endLineNumber-r.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(65),t=this._modifiedEditor.getOption(65),n=this._originalEditor.getOption(143).wrappingColumn!==-1,i=this._modifiedEditor.getOption(143).wrappingColumn!==-1,s=n||i,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let c=0,h=0,g=0,f=0,p=0,b=0;const _=u((k,T)=>k.afterLineNumber-T.afterLineNumber,"sortMyViewZones"),v=u((k,T)=>{if(T.domNode===null&&k.length>0){const E=k[k.length-1];if(E.afterLineNumber===T.afterLineNumber&&E.domNode===null){E.heightInLines+=T.heightInLines;return}}k.push(T)},"addAndCombineIfPossible"),y=new KA(this._modifiedForeignVZ),w=new KA(this._originalForeignVZ);let C=1,S=1;for(let k=0,T=this._lineChanges.length;k<=T;k++){const E=k<T?this._lineChanges[k]:null;E!==null?(g=E.originalStartLineNumber+(E.originalEndLineNumber>0?-1:0),f=E.modifiedStartLineNumber+(E.modifiedEndLineNumber>0?-1:0),h=E.originalEndLineNumber>0?Hh._getViewLineCount(this._originalEditor,E.originalStartLineNumber,E.originalEndLineNumber):0,c=E.modifiedEndLineNumber>0?Hh._getViewLineCount(this._modifiedEditor,E.modifiedStartLineNumber,E.modifiedEndLineNumber):0,p=Math.max(E.originalStartLineNumber,E.originalEndLineNumber),b=Math.max(E.modifiedStartLineNumber,E.modifiedEndLineNumber)):(g+=1e7+h,f+=1e7+c,p=g,b=f);let D=[],O=[];if(s){let F;E?E.originalEndLineNumber>0?F=E.originalStartLineNumber-C:F=E.modifiedStartLineNumber-S:F=r.getLineCount()-C+1;for(let $=0;$<F;$++){const ee=C+$,ge=S+$,X=a.getModelLineViewLineCount(ee),R=l.getModelLineViewLineCount(ge);X<R?D.push({afterLineNumber:ee,heightInLines:R-X,domNode:null,marginDomNode:null}):X>R&&O.push({afterLineNumber:ge,heightInLines:X-R,domNode:null,marginDomNode:null})}E&&(C=(E.originalEndLineNumber>0?E.originalEndLineNumber:E.originalStartLineNumber)+1,S=(E.modifiedEndLineNumber>0?E.modifiedEndLineNumber:E.modifiedStartLineNumber)+1)}for(;y.current&&y.current.afterLineNumber<=b;){let F;y.current.afterLineNumber<=f?F=g-f+y.current.afterLineNumber:F=p;let $=null;E&&E.modifiedStartLineNumber<=y.current.afterLineNumber&&y.current.afterLineNumber<=E.modifiedEndLineNumber&&($=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),D.push({afterLineNumber:F,heightInLines:y.current.height/t,domNode:null,marginDomNode:$}),y.advance()}for(;w.current&&w.current.afterLineNumber<=p;){let F;w.current.afterLineNumber<=g?F=f-g+w.current.afterLineNumber:F=b,O.push({afterLineNumber:F,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(E!==null&&YA(E)){const F=this._produceOriginalFromDiff(E,h,c);F&&D.push(F)}if(E!==null&&XA(E)){const F=this._produceModifiedFromDiff(E,h,c);F&&O.push(F)}let B=0,H=0;for(D=D.sort(_),O=O.sort(_);B<D.length&&H<O.length;){const F=D[B],$=O[H],ee=F.afterLineNumber-g,ge=$.afterLineNumber-f;ee<ge?(v(d.original,F),B++):ge<ee?(v(d.modified,$),H++):F.shouldNotShrink?(v(d.original,F),B++):$.shouldNotShrink?(v(d.modified,$),H++):F.heightInLines>=$.heightInLines?(F.heightInLines-=$.heightInLines,H++):($.heightInLines-=F.heightInLines,B++)}for(;B<D.length;)v(d.original,D[B]),B++;for(;H<O.length;)v(d.modified,O[H]),H++}return{original:Hh._ensureDomNodes(d.original),modified:Hh._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=pTe()),t))}};u(Hh,"ViewZonesComputer");let $A=Hh;function rd(o,e,t,n,i){return{range:new L(o,e,t,n),options:i}}u(rd,"createDecoration");const Qi={arrowRevertChange:Fe.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new zn(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+Te.asClassName(ue.arrowRight),zIndex:10001}),charDelete:Fe.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Fe.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Fe.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Fe.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Fe.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Fe.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+Te.asClassName(WOe),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Fe.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Fe.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+Te.asClassName(hTe),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Fe.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})},kc=class kc extends jA{constructor(e,t,n){super(e),this._disableSash=t===!1,this._defaultRatio=n,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new mr(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(i=>this._onSashDrag(i)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e,t){this._defaultRatio=t;const n=e===!1;this._disableSash!==n&&(this._disableSash=n,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio||this._defaultRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?ku.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||this._defaultRatio)*n);const s=Math.floor(this._defaultRatio*n);return i=this._disableSash?s:i||s,n>kc.MINIMUM_EDITOR_WIDTH*2?(i<kc.MINIMUM_EDITOR_WIDTH&&(i=kc.MINIMUM_EDITOR_WIDTH),i>n-kc.MINIMUM_EDITOR_WIDTH&&(i=n-kc.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?ku.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=this._defaultRatio,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new l6(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=s.getModel(),d=s._getViewModel();for(const c of t)if(XA(c)){a.decorations.push({range:new L(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:i?Qi.lineDeleteWithSign:Qi.lineDelete}),(!YA(c)||!c.charChanges)&&a.decorations.push(rd(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,Qi.charDeleteWholeLine));const h=Zw(l,d,c.originalStartLineNumber,c.originalEndLineNumber);if(a.overviewZones.push(new Su(h.startLineNumber,h.endLineNumber,0,r)),c.charChanges){for(const g of c.charChanges)if(fTe(g))if(n)for(let f=g.originalStartLineNumber;f<=g.originalEndLineNumber;f++){let p,b;f===g.originalStartLineNumber?p=g.originalStartColumn:p=l.getLineFirstNonWhitespaceColumn(f),f===g.originalEndLineNumber?b=g.originalEndColumn:b=l.getLineLastNonWhitespaceColumn(f),a.decorations.push(rd(f,p,f,b,Qi.charDelete))}else a.decorations.push(rd(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn,Qi.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},d=r.getModel(),c=r._getViewModel();for(const h of t){if(s)if(h.modifiedEndLineNumber>0)l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedStartLineNumber,1),options:Qi.arrowRevertChange});else{const g=e.modified.find(f=>f.afterLineNumber===h.modifiedStartLineNumber);g&&(g.marginDomNode=UOe())}if(YA(h)){l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Qi.lineInsertWithSign:Qi.lineInsert}),(!XA(h)||!h.charChanges)&&l.decorations.push(rd(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Qi.charInsertWholeLine));const g=Zw(d,c,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new Su(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(gTe(f))if(n)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let b,_;p===f.modifiedStartLineNumber?b=f.modifiedStartColumn:b=d.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=d.getLineLastNonWhitespaceColumn(p),l.decorations.push(rd(p,b,p,_,Qi.charInsert))}else l.decorations.push(rd(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Qi.charInsert))}}}return l}};u(kc,"DiffEditorWidgetSideBySide");let Xw=kc;Xw.MINIMUM_EDITOR_WIDTH=100;const wde=class wde extends $A{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}};u(wde,"SideBySideViewZonesComputer");let l6=wde;const Cde=class Cde extends jA{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new d6(e,t,n,s,r,i).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),d=a._getViewModel();let c=0;for(const h of t)if(XA(h)){for(r.decorations.push({range:new L(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Qi.lineDeleteMargin});c<e.modified.length;){const p=e.modified[c];if(p.diff&&p.diff.originalStartLineNumber>=h.originalStartLineNumber)break;c++}let g=0;if(c<e.modified.length){const p=e.modified[c];p.diff&&p.diff.originalStartLineNumber===h.originalStartLineNumber&&p.diff.originalEndLineNumber===h.originalEndLineNumber&&p.diff.modifiedStartLineNumber===h.modifiedStartLineNumber&&p.diff.modifiedEndLineNumber===h.modifiedEndLineNumber&&(g=p.heightInLines)}const f=Zw(l,d,h.originalStartLineNumber,h.originalEndLineNumber);r.overviewZones.push(new Su(f.startLineNumber,f.endLineNumber,g,s))}return r}_getModifiedEditorDecorations(e,t,n,i,s){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},d=r.getModel(),c=r._getViewModel();for(const h of t)if(YA(h)){l.decorations.push({range:new L(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:i?Qi.lineInsertWithSign:Qi.lineInsert});const g=Zw(d,c,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(l.overviewZones.push(new Su(g.startLineNumber,g.endLineNumber,0,a)),h.charChanges){for(const f of h.charChanges)if(gTe(f))if(n)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let b,_;p===f.modifiedStartLineNumber?b=f.modifiedStartColumn:b=d.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=d.getLineLastNonWhitespaceColumn(p),l.decorations.push(rd(p,b,p,_,Qi.charInsert))}else l.decorations.push(rd(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Qi.charInsert))}else l.decorations.push(rd(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Qi.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}};u(Cde,"DiffEditorWidgetInline");let qA=Cde;const Sde=class Sde extends $A{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._originalModel=i.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${sg}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(49),s=t.get(32),r=i.typicalHalfwidthCharacterWidth,a=t.get(102),l=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),c=t.get(65),g=t.get(142).decorationsWidth,f=t.get(115),p=t.get(97),b=t.get(92),_=t.get(50),v=this._lineBreaksComputer.finalize();let y=0;for(let w=0;w<this._pendingLineChange.length;w++){const C=this._pendingLineChange[w],S=this._pendingViewZones[w],k=S.domNode;Kn(k,i);const T=S.marginDomNode;Kn(T,i);const E=[];if(C.charChanges)for(const ge of C.charChanges)fTe(ge)&&E.push(new Qc(new L(ge.originalStartLineNumber,ge.originalStartColumn,ge.originalEndLineNumber,ge.originalEndColumn),"char-delete",0));const D=E.length>0,O=new Pd(1e4);let B=0,H=0,F=null;for(let ge=C.originalStartLineNumber;ge<=C.originalEndLineNumber;ge++){const X=ge-C.originalStartLineNumber,R=this._originalModel.tokenization.getLineTokens(ge),z=R.getLineContent(),te=v[y++],fe=_o.filter(E,ge,1,z.length+1);if(te){let me=0;for(const mt of te.breakOffsets){const $t=R.sliceAndInflate(me,mt,0),hn=z.substring(me,mt);B=Math.max(B,this._renderOriginalLine(H++,hn,$t,_o.extractWrapped(fe,me,mt),D,l,d,i,s,c,g,f,p,b,_,n,O,T)),me=mt}for(F||(F=[]);F.length<X;)F[F.length]=1;F[X]=te.breakOffsets.length,S.heightInLines+=te.breakOffsets.length-1;const ce=document.createElement("div");ce.className="gutter-delete",e.original.push({afterLineNumber:ge,afterColumn:0,heightInLines:te.breakOffsets.length-1,domNode:pTe(),marginDomNode:ce})}else B=Math.max(B,this._renderOriginalLine(H++,z,R,fe,D,l,d,i,s,c,g,f,p,b,_,n,O,T))}B+=a;const $=O.build(),ee=a6?a6.createHTML($):$;if(k.innerHTML=ee,S.minWidthInPx=B*r,F){const ge=C.originalEndLineNumber-C.originalStartLineNumber;for(;F.length<=ge;)F[F.length]=1}S.diff.viewLineCounts=F}e.original.sort((w,C)=>w.afterLineNumber-C.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b,_,v,y){v.appendString('<div class="view-line'),s||v.appendString(" char-delete"),v.appendString('" style="top:'),v.appendString(String(e*c)),v.appendString('px;width:1000000px;">');const w=as.isBasicASCII(t,r),C=as.containsRTL(t,w,a),S=y_(new Tr(l.isMonospace&&!d,l.canUseHalfwidthRightwardsArrow,t,!1,w,C,0,n,i,_,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,g,f,p,b!==Sr.OFF,null),v);if(v.appendString("</div>"),this._renderIndicators){const k=document.createElement("div");k.className=`delete-sign ${Te.asClassName(hTe)}`,k.setAttribute("style",`position:absolute;top:${e*c}px;width:${h}px;height:${c}px;right:0;`),y.appendChild(k)}return S.characterMapping.getHorizontalOffset(S.characterMapping.length)}};u(Sde,"InlineViewZonesComputer");let d6=Sde;function BOe(o,e){return dn(o,e,["off","on","inherit"])}u(BOe,"validateDiffWordWrap");function YA(o){return o.modifiedEndLineNumber>0}u(YA,"isChangeOrInsert");function XA(o){return o.originalEndLineNumber>0}u(XA,"isChangeOrDelete");function gTe(o){return o.modifiedStartLineNumber===o.modifiedEndLineNumber?o.modifiedEndColumn-o.modifiedStartColumn>0:o.modifiedEndLineNumber-o.modifiedStartLineNumber>0}u(gTe,"isCharChangeOrInsert");function fTe(o){return o.originalStartLineNumber===o.originalEndLineNumber?o.originalEndColumn-o.originalStartColumn>0:o.originalEndLineNumber-o.originalStartLineNumber>0}u(fTe,"isCharChangeOrDelete");function pTe(){const o=document.createElement("div");return o.className="diagonal-fill",o}u(pTe,"createFakeLinesDiv");function UOe(){const o=document.createElement("div");return o.className="arrow-revert-change "+Te.asClassName(ue.arrowRight),re("div",{},o)}u(UOe,"createViewZoneMarginArrow");function Zw(o,e,t,n){const i=o.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new L(t,o.getLineMinColumn(t),n,o.getLineMaxColumn(n)))}u(Zw,"getViewRange");function Uye(o,e){return{enableSplitViewResizing:Se(o.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:V1e(o.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Se(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Se(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:nd(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:nd(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Se(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Se(o.renderIndicators,e.renderIndicators),originalEditable:Se(o.originalEditable,e.originalEditable),diffCodeLens:Se(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Se(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:BOe(o.diffWordWrap,e.diffWordWrap),diffAlgorithm:dn(o.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Se(o.accessibilityVerbose,e.accessibilityVerbose),hideUnchangedRegions:{enabled:!1,contextLineCount:0,minimumLineCount:0,revealLineCount:0},experimental:{showEmptyDecorations:!1,showMoves:!1},isInEmbeddedEditor:Se(o.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:0,useInlineViewWhenSpaceIsLimited:!1}}u(Uye,"validateDiffEditorOptions$1");function zOe(o,e){return{enableSplitViewResizing:o.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:o.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:o.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:o.maxComputationTime!==e.maxComputationTime,maxFileSize:o.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:o.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:o.renderIndicators!==e.renderIndicators,originalEditable:o.originalEditable!==e.originalEditable,diffCodeLens:o.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:o.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:o.diffWordWrap!==e.diffWordWrap,diffAlgorithm:o.diffAlgorithm!==e.diffAlgorithm,accessibilityVerbose:o.accessibilityVerbose!==e.accessibilityVerbose}}u(zOe,"changedDiffEditorOptions");Ir((o,e)=>{const t=o.getColor(rRe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${t} 12.5%,
			#0000 12.5%, #0000 50%,
			${t} 50%, ${t} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var GOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jOe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},KOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},J1;let c6=(J1=class extends G{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new V),this._onCodeEditorAdd=this._register(new V),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new V),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new V),this._onDiffEditorAdd=this._register(new V),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new V),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Ai,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}openCodeEditor(e,t,n){return KOe(this,void 0,void 0,function*(){for(const i of this._codeEditorOpenHandlers){const s=yield i(e,t,n);if(s!==null)return s}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return He(t)}},u(J1,"AbstractCodeEditorService"),J1);c6=GOe([jOe(0,On)],c6);var $Oe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zye=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},qOe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Q1;let ZA=(Q1=class extends c6{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((n,i,s)=>qOe(this,void 0,void 0,function*(){return i?this.doOpenEditor(i,n):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===qe.http||s===qe.https)return XSe(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}},u(Q1,"StandaloneCodeEditorService"),Q1);ZA=$Oe([zye(0,Re),zye(1,On)],ZA);ct(gt,ZA,0);const x_=nt("layoutService");var mTe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bTe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},eS;let JA=(eS=class{get dimension(){return this._dimension||(this._dimension=w_(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayout=Ce.None,this.offset={top:0,quickPickTop:0}}},u(eS,"StandaloneLayoutService"),eS);JA=mTe([bTe(0,gt)],JA);var tS;let u6=(tS=class extends JA{get hasContainer(){return!1}get container(){return this._container}constructor(e,t){super(t),this._container=e}},u(tS,"EditorScopedLayoutService"),tS);u6=mTe([bTe(1,gt)],u6);ct(x_,JA,1);const sE=nt("dialogService");var YOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gye=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zE=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function GE(o){return o.scheme===qe.file?o.fsPath:o.path}u(GE,"getResourceLabel");let _Te=0;const xde=class xde{constructor(e,t,n,i,s,r,a){this.id=++_Te,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}};u(xde,"ResourceStackElement");let Mp=xde;const Tde=class Tde{constructor(e,t){this.resourceLabel=e,this.reason=t}};u(Tde,"ResourceReasonPair");let QA=Tde;const Lde=class Lde{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);const n=[];return e.length>0&&n.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}};u(Lde,"RemovedResources");let eI=Lde;const Ede=class Ede{constructor(e,t,n,i,s,r,a){this.id=++_Te,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new eI),this.removedResources.has(t)||this.removedResources.set(t,new QA(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new eI),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new QA(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}};u(Ede,"WorkspaceStackElement");let h6=Ede;const kde=class kde{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new xA(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const d=this._past[a];n&&(i>=t||d.id!==e.elements[i])&&(n=!1,s=0),!n&&d.type===1&&d.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,r=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}};u(kde,"ResourceEditStack");let tI=kde;const Dde=class Dde{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}};u(Dde,"EditStackSnapshot");let e0=Dde;const vTe=new tI("","");vTe.locked=!0;var nS;let g6=(nS=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Sb.None,n=za.None){if(e.type===0){const i=GE(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new Mp(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],r=[];for(const a of e.resources){const l=GE(a),d=this.getUriComparisonKey(a);i.has(d)||(i.add(d),s.push(l),r.push(d))}s.length===1?this._pushElement(new Mp(e,s[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new h6(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let r;this._editStacks.has(s)?r=this._editStacks.get(s):(r=new tI(i,s),this._editStacks.set(s,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=GE(s.resource),a=this.getUriComparisonKey(s.resource),l=new Mp(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const r=GE(s.resource),a=this.getUriComparisonKey(s.resource),l=new Mp(s,r,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new xA(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i)}return[t,n]}canUndo(e){if(e instanceof za){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Be(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const r=this._acquireLocks(n);let a;try{a=t()}catch(l){return r(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),i.dispose(),s()),l=>(r(),i.dispose(),this._onError(l,e))):(r(),i.dispose(),s())}_invokeWorkspacePrepare(e){return zE(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return G.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?G.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(G.None);const n=e.actual.prepareUndoRedo();return n?pZ(n)?t(n):n.then(i=>t(i)):t(G.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||vTe);return new e0(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new Ap(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new Ap}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return zE(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(c){c[c.All=0]="All",c[c.This=1]="This",c[c.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=yield this._dialogService.prompt({type:mn.Info,message:m("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:m({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:m({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const d=this._checkWorkspaceUndo(e,t,n,!1);if(d)return d.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new e0([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof za){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{}}_confirmAndContinueUndo(e,t,n){return zE(this,void 0,void 0,function*(){if((yield this._dialogService.confirm({message:m("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:m({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:m("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i)}return[t,n]}canRedo(e){if(e instanceof za){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new Ap(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new Ap}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return zE(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const r of n.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new e0([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof za){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}},u(nS,"UndoRedoService"),nS);g6=YOe([Gye(0,sE),Gye(1,_n)],g6);const Mde=class Mde{constructor(e){this.returnValue=e}};u(Mde,"WorkspaceVerificationError");let Ap=Mde;ct(PO,g6,1);const sJ=nt("environmentService"),Ks=nt("openerService");function oJ(o,e){return Ae.isUri(o)?up(o.scheme,e):_Z(o,e+":")}u(oJ,"matchesScheme");function jye(o,...e){return e.some(t=>oJ(o,t))}u(jye,"matchesSomeScheme");function XOe(o){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}u(XOe,"extractSelection");var ZOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Kye=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Jo=nt("ILanguageFeatureDebounceService");var nI;(function(o){const e=new WeakMap;let t=0;function n(i){let s=e.get(i);return s===void 0&&(s=++t,e.set(i,s)),s}u(n,"of"),o.of=n})(nI||(nI={}));const Ade=class Ade{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}};u(Ade,"NullDebounceInformation");let f6=Ade;const Ide=class Ide{constructor(e,t,n,i,s,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=s,this._max=r,this._cache=new pl(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>kO(nI.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?Rs(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new BB(6),this._cache.set(n,i));const s=Rs(i.update(t),this._min,this._max);return oJ(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new HA;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Rs(e,this._min,this._max)}};u(Ide,"FeatureDebounceInformation");let p6=Ide;var iS;let m6=(iS=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){var i,s,r;const a=(i=n?.min)!==null&&i!==void 0?i:50,l=(s=n?.max)!==null&&s!==void 0?s:Math.pow(a,2),d=(r=n?.key)!==null&&r!==void 0?r:void 0,c=`${nI.of(e)},${a}${d?","+d:""}`;let h=this._data.get(c);return h||(this._isDev?h=new p6(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l):(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),h=new f6(a*1.5)),this._data.set(c,h)),h}_overallAverage(){const e=new HA;for(const t of this._data.values())e.update(t.default());return e.value}},u(iS,"LanguageFeatureDebounceService"),iS);m6=ZOe([Kye(0,So),Kye(1,sJ)],m6);ct(Jo,m6,1);const im=class im{static create(e,t){return new im(e,new _6(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new L(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,s,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new im(this._startLineNumber,i),new im(this._startLineNumber+r,s)]}applyEdit(e,t){const[n,i,s]=xu(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,s)}};u(im,"SparseMultilineTokens");let b6=im;const ay=class ay{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new L(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new iI(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new iI(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,r=this._tokenCount;let a=0,l=!1,d=0;for(let c=0;c<r;c++){const h=4*c,g=s[h],f=s[h+1],p=s[h+2],b=s[h+3];if((g>e||g===e&&p>=t)&&(g<n||g===n&&f<=i))l=!0;else{if(a===0&&(d=g),l){const _=4*a;s[_]=g-d,s[_+1]=f,s[_+2]=p,s[_+3]=b}a++}}return this._tokenCount=a,d}split(e,t,n,i){const s=this._tokens,r=this._tokenCount,a=[],l=[];let d=a,c=0,h=0;for(let g=0;g<r;g++){const f=4*g,p=s[f],b=s[f+1],_=s[f+2],v=s[f+3];if(p>e||p===e&&_>=t){if(p<n||p===n&&b<=i)continue;d!==l&&(d=l,c=0,h=p)}d[c++]=p-h,d[c++]=b,d[c++]=_,d[c++]=v}return[new ay(new Uint32Array(a)),new ay(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,s){const r=this._tokens,a=this._tokenCount,l=i-t;let d=0,c=!1;for(let h=0;h<a;h++){const g=4*h;let f=r[g],p=r[g+1],b=r[g+2];const _=r[g+3];if(f<t||f===t&&b<=n){d++;continue}else if(f===t&&p<n)f===i&&b>s?b-=s-n:b=n;else if(f===t&&p===n)if(f===i&&b>s)b-=s-n;else{c=!0;continue}else if(f<i||f===i&&p<s)if(f===i&&b>s)f=t,p=n,b=p+(b-s);else{c=!0;continue}else if(f>i){if(l===0&&!c){d=a;break}f-=l}else if(f===i&&p>=s)e&&f===0&&(p+=e,b+=e),f-=l,p-=s-n,b-=s-n;else throw new Error("Not possible!");const v=4*d;r[v]=f,r[v+1]=p,r[v+2]=b,r[v+3]=_,d++}this._tokenCount=d}acceptInsertText(e,t,n,i,s,r){const a=n===0&&i===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,d=this._tokenCount;for(let c=0;c<d;c++){const h=4*c;let g=l[h],f=l[h+1],p=l[h+2];if(!(g<e||g===e&&p<t)){if(g===e&&p===t)if(a)p+=1;else continue;else if(g===e&&f<t&&t<p)n===0?p+=i:p=t;else{if(g===e&&f===t&&a)continue;if(g===e)if(g+=n,n===0)f+=i,p+=i;else{const b=p-f;f=s+(f-t),p=f+b}else g+=n}l[h]=g,l[h+1]=f,l[h+2]=p}}}};u(ay,"SparseMultilineTokensStorage");let _6=ay;const Nde=class Nde{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}};u(Nde,"SparseLineTokens");let iI=Nde;var JOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},sS;let v6=(sS=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new sI}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let r;if(s)r=s.metadata,this._logService.getLevel()===yi.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${ii.getForeground(r)}, fontStyle ${ii.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let d=t;for(let h=0;d>0&&h<this._legend.tokenModifiers.length;h++)d&1&&l.push(this._legend.tokenModifiers[h]),d=d>>1;d>0&&this._logService.getLevel()===yi.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const c=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof c>"u")r=2147483647;else{if(r=0,typeof c.italic<"u"){const h=(c.italic?1:0)<<11;r|=h|1}if(typeof c.bold<"u"){const h=(c.bold?2:0)<<11;r|=h|2}if(typeof c.underline<"u"){const h=(c.underline?4:0)<<11;r|=h|4}if(typeof c.strikethrough<"u"){const h=(c.strikethrough?8:0)<<11;r|=h|8}if(c.foreground){const h=c.foreground<<15;r|=h|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===yi.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,r),this._logService.getLevel()===yi.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${ii.getForeground(r)}, fontStyle ${ii.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,i,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${s}).`))}},u(sS,"SemanticTokensProviderStyling"),sS);v6=JOe([xH(1,On),xH(2,Kt),xH(3,So)],v6);function yTe(o,e,t){const n=o.data,i=o.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),r=[];let a=0,l=1,d=0;for(;a<i;){const c=a;let h=Math.min(c+s,i);if(h<i){let y=h;for(;y-1>c&&n[5*y]===0;)y--;if(y-1===c){let w=h;for(;w+1<i&&n[5*w]===0;)w++;h=w}else h=y}let g=new Uint32Array((h-c)*4),f=0,p=0,b=0,_=0;for(;a<h;){const y=5*a,w=n[y],C=n[y+1],S=l+w|0,k=w===0?d+C|0:C,T=n[y+2],E=k+T|0,D=n[y+3],O=n[y+4];if(E<=k)e.warnInvalidLengthSemanticTokens(S,k+1);else if(b===S&&_>k)e.warnOverlappingSemanticTokens(S,k+1);else{const B=e.getMetadata(D,O,t);B!==2147483647&&(p===0&&(p=S),g[f]=S-p,g[f+1]=k,g[f+2]=E,g[f+3]=B,f+=4,b=S,_=E)}l=S,d=k,a++}f!==g.length&&(g=g.subarray(0,f));const v=b6.create(p,g);r.push(v)}return r}u(yTe,"toMultilineTokens2");const Rde=class Rde{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}};u(Rde,"HashTableEntry");let y6=Rde;const Zl=class Zl{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Zl._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Zl._SIZES.length?2/3*this._currentLength:0),this._elements=[],Zl._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Zl._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Zl._SIZES.length?2/3*this._currentLength:0),this._elements=[],Zl._nullOutEntries(this._elements,this._currentLength);for(const r of s){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new y6(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};u(Zl,"HashTable");let sI=Zl;sI._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const VO=nt("semanticTokensStylingService");var QOe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},TH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},oS;let w6=(oS=class extends G{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new v6(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}},u(oS,"SemanticTokensStylingService"),oS);w6=QOe([TH(0,On),TH(1,So),TH(2,Kt)],w6);ct(VO,w6,1);var $ye=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const jE="**",qye="/",Wk="[/\\\\]",Bk="[^/\\\\]",e4e=/\//g;function Yye(o,e){switch(o){case 0:return"";case 1:return`${Bk}*?`;default:return`(?:${Wk}|${Bk}+${Wk}${e?`|${Wk}${Bk}+`:""})*?`}}u(Yye,"starsToRegExp");function Xye(o,e){if(!o)return[];const t=[];let n=!1,i=!1,s="";for(const r of o){switch(r){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=r}return s&&t.push(s),t}u(Xye,"splitGlobAware");function wTe(o){if(!o)return"";let e="";const t=Xye(o,qye);if(t.every(n=>n===jE))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===jE){if(n)return;e+=Yye(2,s===t.length-1)}else{let r=!1,a="",l=!1,d="";for(const c of i){if(c!=="}"&&r){a+=c;continue}if(l&&(c!=="]"||!d)){let h;c==="-"?h=c:(c==="^"||c==="!")&&!d?h="^":c===qye?h="":h=po(c),d+=h;continue}switch(c){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${Xye(a,",").map(f=>wTe(f)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+d+"]",l=!1,d="";break}case"?":e+=Bk;continue;case"*":e+=Yye(1);continue;default:e+=po(c)}}s<t.length-1&&(t[s+1]!==jE||s+2<t.length)&&(e+=Wk)}n=i===jE})}return e}u(wTe,"parseRegExp");const t4e=/^\*\*\/\*\.[\w\.-]+$/,n4e=/^\*\*\/([\w\.-]+)\/?$/,i4e=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,s4e=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,o4e=/^\*\*((\/[\w\.-]+)+)\/?$/,r4e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Zye=new pl(1e4),Jye=u(function(){return!1},"FALSE"),il=u(function(){return null},"NULL");function rJ(o,e){if(!o)return il;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=Zye.get(n);if(i)return Qye(i,o);let s;return t4e.test(t)?i=a4e(t.substr(4),t):(s=n4e.exec(LH(t,e)))?i=l4e(s[1],t):(e.trimForExclusions?s4e:i4e).test(t)?i=d4e(t,e):(s=o4e.exec(LH(t,e)))?i=ewe(s[1].substr(1),t,!0):(s=r4e.exec(LH(t,e)))?i=ewe(s[1],t,!1):i=c4e(t),Zye.set(n,i),Qye(i,o)}u(rJ,"parsePattern");function Qye(o,e){if(typeof e=="string")return o;const t=u(function(n,i){return GW(n,e.base,!qi)?o(YL(n.substr(e.base.length),ua),i):null},"wrappedPattern");return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}u(Qye,"wrapRelativePattern");function LH(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}u(LH,"trimForExclusions");function a4e(o,e){return function(t,n){return typeof t=="string"&&t.endsWith(o)?e:null}}u(a4e,"trivia1");function l4e(o,e){const t=`/${o}`,n=`\\${o}`,i=u(function(r,a){return typeof r!="string"?null:a?a===o?e:null:r===o||r.endsWith(t)||r.endsWith(n)?e:null},"parsedPattern"),s=[o];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}u(l4e,"trivia2");function d4e(o,e){const t=STe(o.slice(1,-1).split(",").map(a=>rJ(a,e)).filter(a=>a!==il),o),n=t.length;if(!n)return il;if(n===1)return t[0];const i=u(function(a,l){for(let d=0,c=t.length;d<c;d++)if(t[d](a,l))return o;return null},"parsedPattern"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(d4e,"trivia3");function ewe(o,e,t){const n=ua===Mn.sep,i=n?o:o.replace(e4e,ua),s=ua+i,r=Mn.sep+o;let a;return t?a=u(function(l,d){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===o||l.endsWith(r)))?e:null},"parsedPattern"):a=u(function(l,d){return typeof l=="string"&&(l===i||!n&&l===o)?e:null},"parsedPattern"),a.allPaths=[(t?"*/":"./")+o],a}u(ewe,"trivia4and5");function c4e(o){try{const e=new RegExp(`^${wTe(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return il}}u(c4e,"toRegExp");function u4e(o,e,t){return!o||typeof e!="string"?!1:CTe(o)(e,void 0,t)}u(u4e,"match");function CTe(o,e={}){if(!o)return Jye;if(typeof o=="string"||h4e(o)){const t=rJ(o,e);if(t===il)return Jye;const n=u(function(i,s){return!!t(i,s)},"resultPattern");return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return g4e(o,e)}u(CTe,"parse");function h4e(o){const e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}u(h4e,"isRelativePattern");function g4e(o,e){const t=STe(Object.getOwnPropertyNames(o).map(a=>f4e(a,o[a],e)).filter(a=>a!==il)),n=t.length;if(!n)return il;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=u(function(c,h){let g;for(let f=0,p=t.length;f<p;f++){const b=t[f](c,h);if(typeof b=="string")return b;E3(b)&&(g||(g=[]),g.push(b))}return g?(()=>$ye(this,void 0,void 0,function*(){for(const f of g){const p=yield f;if(typeof p=="string")return p}return null}))():null},"resultExpression"),l=t.find(c=>!!c.allBasenames);l&&(a.allBasenames=l.allBasenames);const d=t.reduce((c,h)=>h.allPaths?c.concat(h.allPaths):c,[]);return d.length&&(a.allPaths=d),a}const i=u(function(a,l,d){let c,h;for(let g=0,f=t.length;g<f;g++){const p=t[g];p.requiresSiblings&&d&&(l||(l=Yc(a)),c||(c=l.substr(0,l.length-FDe(a).length)));const b=p(a,l,c,d);if(typeof b=="string")return b;E3(b)&&(h||(h=[]),h.push(b))}return h?(()=>$ye(this,void 0,void 0,function*(){for(const g of h){const f=yield g;if(typeof f=="string")return f}return null}))():null},"resultExpression"),s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}u(g4e,"parsedExpression");function f4e(o,e,t){if(e===!1)return il;const n=rJ(o,t);if(n===il)return il;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=u((r,a,l,d)=>{if(!d||!n(r,a))return null;const c=i.replace("$(basename)",()=>l),h=d(c);return E3(h)?h.then(g=>g?o:null):h?o:null},"result");return s.requiresSiblings=!0,s}}return n}u(f4e,"parseExpressionPattern");function STe(o,e){const t=o.filter(a=>!!a.basenames);if(t.length<2)return o;const n=t.reduce((a,l)=>{const d=l.basenames;return d?a.concat(d):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const d=l.patterns;return d?a.concat(d):a},[]);const s=u(function(a,l){if(typeof a!="string")return null;if(!l){let c;for(c=a.length;c>0;c--){const h=a.charCodeAt(c-1);if(h===47||h===92)break}l=a.substr(c)}const d=n.indexOf(l);return d!==-1?i[d]:null},"aggregate");s.basenames=n,s.patterns=i,s.allBasenames=n;const r=o.filter(a=>!a.basenames);return r.push(s),r}u(STe,"aggregateBasenameMatches");function xTe(o,e,t,n,i,s){if(Array.isArray(o)){let r=0;for(const a of o){const l=xTe(a,e,t,n,i,s);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof o=="string")return n?o==="*"?5:o===t?10:0:0;if(o){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:d,notebookType:c}=o;if(!n&&!d)return 0;c&&i&&(e=i);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(r)if(r===t)h=10;else if(r==="*")h=Math.max(h,5);else return 0;if(c)if(c===s)h=10;else if(c==="*"&&s!==void 0)h=Math.max(h,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g=Object.assign(Object.assign({},a),{base:G1e(a.base)}),g===e.fsPath||u4e(g,e.fsPath))h=10;else return 0}return h}else return 0}}u(xTe,"score");function TTe(o){return typeof o=="string"?!1:Array.isArray(o)?o.every(TTe):!!o.exclusive}u(TTe,"isExclusive");const Pde=class Pde{constructor(e,t,n,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((n=e.notebookUri)===null||n===void 0?void 0:n.toString())}};u(Pde,"MatchCandidate");let oI=Pde;const KP=class KP{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new V,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),He(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const i=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=i?new oI(e.uri,e.getLanguageId(),i.uri,i.type):new oI(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((n=this._lastCandidate)===null||n===void 0)&&n.equals(s))){this._lastCandidate=s;for(const r of this._entries)if(r._score=xTe(r.selector,s.uri,s.languageId,AMe(e),s.notebookUri,s.notebookType),TTe(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort(KP._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:vv(e.selector)&&!vv(t.selector)?1:!vv(e.selector)&&vv(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}};u(KP,"LanguageFeatureRegistry");let rn=KP;function vv(o){return typeof o=="string"?!1:Array.isArray(o)?o.some(vv):!!o.isBuiltin}u(vv,"isBuiltinSelector");const Fde=class Fde{constructor(){this.referenceProvider=new rn(this._score.bind(this)),this.renameProvider=new rn(this._score.bind(this)),this.codeActionProvider=new rn(this._score.bind(this)),this.definitionProvider=new rn(this._score.bind(this)),this.typeDefinitionProvider=new rn(this._score.bind(this)),this.declarationProvider=new rn(this._score.bind(this)),this.implementationProvider=new rn(this._score.bind(this)),this.documentSymbolProvider=new rn(this._score.bind(this)),this.inlayHintsProvider=new rn(this._score.bind(this)),this.colorProvider=new rn(this._score.bind(this)),this.codeLensProvider=new rn(this._score.bind(this)),this.documentFormattingEditProvider=new rn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new rn(this._score.bind(this)),this.onTypeFormattingEditProvider=new rn(this._score.bind(this)),this.signatureHelpProvider=new rn(this._score.bind(this)),this.hoverProvider=new rn(this._score.bind(this)),this.documentHighlightProvider=new rn(this._score.bind(this)),this.selectionRangeProvider=new rn(this._score.bind(this)),this.foldingRangeProvider=new rn(this._score.bind(this)),this.linkProvider=new rn(this._score.bind(this)),this.inlineCompletionsProvider=new rn(this._score.bind(this)),this.completionProvider=new rn(this._score.bind(this)),this.linkedEditingRangeProvider=new rn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new rn(this._score.bind(this)),this.documentSemanticTokensProvider=new rn(this._score.bind(this)),this.documentOnDropEditProvider=new rn(this._score.bind(this)),this.documentPasteEditProvider=new rn(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}};u(Fde,"LanguageFeaturesService");let C6=Fde;ct(we,C6,1);const oE=nt("IWorkspaceEditService"),Ode=class Ode{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Gg.is(t))return Gg.lift(t);if(rI.is(t))return rI.lift(t);throw new Error("Unsupported edit")})}};u(Ode,"ResourceEdit");let Jw=Ode;const sm=class sm extends Jw{static is(e){return e instanceof sm?!0:ss(e)&&Ae.isUri(e.resource)&&ss(e.textEdit)}static lift(e){return e instanceof sm?e:new sm(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}};u(sm,"ResourceTextEdit");let Gg=sm;const om=class om extends Jw{static is(e){return e instanceof om?!0:ss(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof om?e:new om(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},i){super(i),this.oldResource=e,this.newResource=t,this.options=n}};u(om,"ResourceFileEdit");let rI=om;const Bi={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},aJ=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),aI=Object.assign(Object.assign({},aJ),{properties:{"editor.tabSize":{type:"number",default:Di.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:m("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Di.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Di.detectIndentation,markdownDescription:m("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Di.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Di.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Bi.maxComputationTime,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Bi.maxFileSize,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Bi.renderSideBySide,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Bi.renderSideBySideInlineBreakpoint,description:m("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Bi.useInlineViewWhenSpaceIsLimited,description:m("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Bi.renderMarginRevertIcon,description:m("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Bi.ignoreTrimWhitespace,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Bi.renderIndicators,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Bi.diffCodeLens,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Bi.diffWordWrap,markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Bi.diffAlgorithm,markdownEnumDescriptions:[m("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),m("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Bi.hideUnchangedRegions.enabled,markdownDescription:m("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Bi.hideUnchangedRegions.revealLineCount,markdownDescription:m("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Bi.hideUnchangedRegions.minimumLineCount,markdownDescription:m("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Bi.hideUnchangedRegions.contextLineCount,markdownDescription:m("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Bi.experimental.showMoves,markdownDescription:m("showMoves","Controls whether the diff editor should show detected code moves. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`")},"diffEditor.experimental.useVersion2":{type:"boolean",default:!0,description:m("useVersion2","Controls whether the diff editor uses the new or the old implementation."),tags:["experimental"]},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Bi.experimental.showEmptyDecorations,description:m("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}});function p4e(o){return typeof o.type<"u"||typeof o.anyOf<"u"}u(p4e,"isConfigurationPropertySchema");for(const o of cp){const e=o.schema;if(typeof e<"u")if(p4e(e))aI.properties[`editor.${o.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(aI.properties[t]=e[t])}let KE=null;function LTe(){return KE===null&&(KE=Object.create(null),Object.keys(aI.properties).forEach(o=>{KE[o]=!0})),KE}u(LTe,"getEditorConfigurationKeys");function m4e(o){return LTe()[`editor.${o}`]||!1}u(m4e,"isEditorConfigurationKey");function b4e(o){return LTe()[`diffEditor.${o}`]||!1}u(b4e,"isDiffEditorConfigurationKey");const _4e=on.as(kl.Configuration);_4e.registerConfiguration(aI);const Hde=class Hde{static insert(e,t){return{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}};u(Hde,"EditOperation");let zt=Hde;function EH(o){return Object.isFrozen(o)?o:$ke(o)}u(EH,"freeze");const Vh=class Vh{constructor(e={},t=[],n=[],i){this._contents=e,this._keys=t,this._overrides=n,this.raw=i,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(n=>{if(n instanceof Vh)return n;const i=new S6("");return i.parseRaw(n),i.configurationModel});this._rawConfiguration=t.reduce((n,i)=>i===n?i:n.merge(i),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?jve(this.contents,e):this.contents}inspect(e,t){const n=this.rawConfiguration.getValue(e),i=t?this.rawConfiguration.getOverrideValue(e,t):void 0,s=t?this.rawConfiguration.override(t).getValue(e):n;return{value:n,override:i,merged:s}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?jve(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,n;const i=td(this.contents),s=td(this.overrides),r=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((n=l.raw)===null||n===void 0)&&n.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(i,l.contents);for(const d of l.overrides){const[c]=s.filter(h=>jn(h.identifiers,d.identifiers));c?(this.mergeContents(c.contents,d.contents),c.keys.push(...d.keys),c.keys=du(c.keys)):s.push(td(d))}for(const d of l.keys)r.indexOf(d)===-1&&r.push(d)}return new Vh(i,r,s,a.every(l=>l instanceof Vh)?void 0:a)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const i of du([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i];const r=t[i];r&&(typeof s=="object"&&typeof r=="object"?(s=td(s),this.mergeContents(s,r)):s=r),n[i]=s}return new Vh(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&ss(e[n])&&ss(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=td(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=u(s=>{s&&(n?this.mergeContents(n,s):n=td(s))},"mergeContents");for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),zMe(this.contents,e),gu.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>jn(n.identifiers,FD(e))),1))}updateValue(e,t,n){pSe(this.contents,e,t,i=>console.error(i)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),gu.test(e)&&this.overrides.push({identifiers:FD(e),keys:Object.keys(this.contents[e]),contents:p3(this.contents[e],i=>console.error(i))})}};u(Vh,"ConfigurationModel");let vs=Vh;const Vde=class Vde{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new vs}parseRaw(e,t){this._raw=e;const{contents:n,keys:i,overrides:s,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new vs(n,i,s,a?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const n=on.as(kl.Configuration).getConfigurationProperties(),i=this.filter(e,n,!0,t);e=i.raw;const s=p3(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:r,overrides:a,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}filter(e,t,n,i){var s,r,a;let l=!1;if(!i?.scopes&&!i?.skipRestricted&&!(!((s=i?.exclude)===null||s===void 0)&&s.length))return{raw:e,restricted:[],hasExcludedProperties:l};const d={},c=[];for(const h in e)if(gu.test(h)&&n){const g=this.filter(e[h],t,!1,i);d[h]=g.raw,l=l||g.hasExcludedProperties,c.push(...g.restricted)}else{const g=t[h],f=g?typeof g.scope<"u"?g.scope:3:void 0;g?.restricted&&c.push(h),!(!((r=i.exclude)===null||r===void 0)&&r.includes(h))&&(!((a=i.include)===null||a===void 0)&&a.includes(h)||(f===void 0||i.scopes===void 0||i.scopes.includes(f))&&!(i.skipRestricted&&g?.restricted))?d[h]=e[h]:l=!0}return{raw:d,restricted:c,hasExcludedProperties:l}}toOverrides(e,t){const n=[];for(const i of Object.keys(e))if(gu.test(i)){const s={};for(const r in e[i])s[r]=e[i][r];n.push({identifiers:FD(i),keys:Object.keys(s),contents:p3(s,t)})}return n}};u(Vde,"ConfigurationModelParser");let S6=Vde;const Wde=class Wde{constructor(e,t,n,i,s,r,a,l,d,c,h,g,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=i,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=d,this.remoteUserConfiguration=c,this.workspaceConfiguration=h,this.folderConfigurationModel=g,this.memoryConfigurationModel=f}inspect(e,t,n){const i=e.inspect(t,n);return{get value(){return EH(i.value)},get override(){return EH(i.override)},get merged(){return EH(i.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}};u(Wde,"ConfigurationInspectValue");let x6=Wde;const $P=class $P{constructor(e,t,n,i,s=new vs,r=new vs,a=new ws,l=new vs,d=new ws){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ws,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new vs,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of i.overrides)for(const d of l.identifiers)i.getOverrideValue(e,d)!==void 0&&a.add(d);return new x6(e,t,i.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),i=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,d)=>(l.set(Ae.revive(d[0]),this.parseConfigurationModel(d[1])),l),new ws);return new $P(t,n,i,s,new vs,r,a,new vs,new ws)}static parseConfigurationModel(e){return new vs(e.contents,e.keys,e.overrides)}};u($P,"Configuration");let lI=$P;const Bde=class Bde{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const r of s)this.affectedKeys.add(r);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=lI.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const r=s+i.length;if(r>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(r);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,d=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!uo(l,d)}return!0}};u(Bde,"ConfigurationChangeEvent");let T6=Bde;const dI={kind:0},v4e={kind:1};function y4e(o,e,t){return{kind:2,commandId:o,commandArgs:e,isBubble:t}}u(y4e,"KbFound");const rm=class rm{constructor(e,t,n){var i;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const r=s.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=rm.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(i=a.when)===null||i===void 0?void 0:i.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1}return!(n&&n.type!==1&&(!e.when||!EMe(n,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const d of a){const c=d.when;if(this._isTargetedForRemoval(r,d.chords,c)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.command===t.command)continue;let r=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){r=!1;break}r&&rm.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:o3(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){const i=[...t,n];this._log(`| Resolving ${i}`);const s=this._map.get(i[0]);if(s===void 0)return this._log("\\ No keybinding entries."),dI;let r=null;if(i.length<2)r=s;else{r=[];for(let l=0,d=s.length;l<d;l++){const c=s[l];if(i.length>c.chords.length)continue;let h=!0;for(let g=1;g<i.length;g++)if(c.chords[g]!==i[g]){h=!1;break}h&&r.push(c)}}const a=this._findCommand(e,r);return a?i.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-i.length} more chord(s), when: ${twe(a.when)}, source: ${nwe(a)}.`),v4e):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${twe(a.when)}, source: ${nwe(a)}.`),y4e(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),dI)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(rm._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}};u(rm,"KeybindingResolver");let L6=rm;function twe(o){return o?`${o.serialize()}`:"no when condition"}u(twe,"printWhenExplanation");function nwe(o){return o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}u(nwe,"printSourceExplanation");const w4e=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/,Ude=class Ude extends G{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ce.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new V),this._currentChords=[],this._currentChordChecker=new Dg,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Bc.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new bo,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),dI;const[i]=n.getDispatchChords();if(i===null)return this._log("\\ Keyboard event cannot be dispatched"),dI;const s=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,r,i)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw fZ("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:i})=>i).join(", ");this._currentChordStatusMessage=this._notificationService.status(m("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),Bv.enabled&&Bv.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Bv.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchChords();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Bc.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Bc.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getChords();return this._ignoreSingleModifiers=new Bc(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){var i;let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,a=null;if(n){const[h]=e.getSingleModifierDispatchChords();r=h,a=h?[h]:[]}else[r]=e.getDispatchChords(),a=this._currentChords.map(({keypress:h})=>h);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const l=this._contextKeyService.getContext(t),d=e.getLabel(),c=this._getResolver().resolve(l,a,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",d,"[ No matching keybinding ]"),this.inChordMode){const h=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${h}, ${d}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",h,d),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",d,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,d),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",d,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const h=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${h}, ${d}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",h,d),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h)),w4e.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:(i=e.getUserSettingsLabel())!==null&&i!==void 0?i:void 0});return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}};u(Ude,"AbstractKeybindingService");let E6=Ude;const zde=class zde{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};u(zde,"KeybindingModifierSet");let Bc=zde;Bc.EMPTY=new Bc(null);const Gde=class Gde{constructor(e,t,n,i,s,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?k6(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=k6(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=a}};u(Gde,"ResolvedKeybindingItem");let cI=Gde;function k6(o){const e=[];for(let t=0,n=o.length;t<n;t++){const i=o[t];if(!i)return[];e.push(i)}return e}u(k6,"toEmptyArrayIfContainsNull");const jde=class jde{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=T4e(a,l,this.modifierLabels[e])}return i.join(" ")}};u(jde,"ModifierLabelProvider");let Ab=jde;const lJ=new Ab({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),C4e=new Ab({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),S4e=new Ab({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),x4e=new Ab({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function T4e(o,e,t){if(e===null)return"";const n=[];return o.ctrlKey&&n.push(t.ctrlKey),o.shiftKey&&n.push(t.shiftKey),o.altKey&&n.push(t.altKey),o.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}u(T4e,"_simpleAsString");const Kde=class Kde extends x9{constructor(e,t){if(super(),t.length===0)throw Ho("chords");this._os=e,this._chords=t}getLabel(){return lJ.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return C4e.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:S4e.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return x4e.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new S9(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}};u(Kde,"BaseResolvedKeybinding");let D6=Kde;const ly=class ly extends D6{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return ad.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ad.toString(e.keyCode)}_getElectronAccelerator(e){return ad.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=ad.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return ly.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ad.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=mZ[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Fd)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Fd(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=k6(e.chords.map(i=>this._toKeyCodeChord(i)));return n.length>0?[new ly(n,t)]:[]}};u(ly,"USLayoutResolvedKeybinding");let uI=ly;const Ib=nt("labelService"),$de=class $de{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}};u($de,"StringIterator");let M6=$de;const qde=class qde{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?bZ(e,this._value,0,e.length,this._from,this._to):XL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};u(qde,"ConfigKeysIterator");let A6=qde;const Yde=class Yde{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?bZ(e,this._value,0,e.length,this._from,this._to):XL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};u(Yde,"PathIterator");let I6=Yde;const Xde=class Xde{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new I6(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Y5(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Y5(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return jy(e,this._value.query);if(this._states[this._stateIdx]===5)return jy(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}};u(Xde,"UriIterator");let N6=Xde;const Zde=class Zde{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}};u(Zde,"TernarySearchTreeNode");let Ip=Zde;const am=class am{static forUris(e=()=>!1,t=()=>!1){return new am(new N6(e,t))}static forStrings(){return new am(new M6)}static forConfigKeys(){return new am(new A6)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new Ip,this._root.segment=n.value());const s=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new Ip,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new Ip,i.right.segment=n.value()),s.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Ip,i.mid.segment=n.value()),s.push([0,i]),i=i.mid;else break}const r=i.value;i.value=t,i.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const d=l.balanceFactor();if(d<-1||d>1){const c=s[a][0],h=s[a+1][0];if(c===1&&h===1)s[a][1]=l.rotateLeft();else if(c===-1&&h===-1)s[a][1]=l.rotateRight();else if(c===1&&h===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(c===-1&&h===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let r=this._root;for(;r;){const a=i.cmp(r.segment);if(a>0)s.push([-1,r]),r=r.left;else if(a<0)s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right);if(a.key){const{key:l,value:d,segment:c}=a;this._delete(a.key,!1),r.key=l,r.value=d,r.segment=c}}else{const a=(n=r.left)!==null&&n!==void 0?n:r.right;if(s.length>0){const[l,d]=s[s.length-1];switch(l){case-1:d.left=a;break;case 0:d.mid=a;break;case 1:d.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const d=l.balanceFactor();if(d>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):d<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let i=this._root;for(;i;){const s=n.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(n.hasNext())n.next(),i=i.mid;else return i.mid?this._entries(i.mid):t?i.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}};u(am,"TernarySearchTree");let hI=am;const jg=nt("contextService");function R6(o){const e=o;return typeof e?.id=="string"&&Ae.isUri(e.uri)}u(R6,"isSingleFolderWorkspaceIdentifier");function L4e(o){const e=o;return typeof e?.id=="string"&&!R6(o)&&!M4e(o)}u(L4e,"isEmptyWorkspaceIdentifier");const E4e={id:"ext-dev"},k4e={id:"empty-window"};function D4e(o,e){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:Yc(o)}:e?E4e:k4e;const t=o;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}u(D4e,"toWorkspaceIdentifier");function M4e(o){const e=o;return typeof e?.id=="string"&&Ae.isUri(e.configPath)}u(M4e,"isWorkspaceIdentifier");const Jde=class Jde{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};u(Jde,"WorkspaceFolder");let P6=Jde;const F6="code-workspace";m("codeWorkspace","Code Workspace");const ETe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function A4e(o){return o.id===ETe}u(A4e,"isStandaloneEditorWorkspace");var O6;(function(o){o.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(O6||(O6={}));var gI;(function(o){o.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(gI||(gI={}));var H6;(function(o){o.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(H6||(H6={}));var fI;(function(o){o.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(fI||(fI={}));var Qw;(function(o){o.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Qw||(Qw={}));var pI;(function(o){o.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content"),o.accessibilityHelpMessage=m("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(pI||(pI={}));var V6;(function(o){o.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})(V6||(V6={}));var W6;(function(o){o.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})(W6||(W6={}));const kTe=nt("workspaceTrustManagementService");function I4e(o){const e=o;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}u(I4e,"isAnchor");var Uc;(function(o){o[o.AVOID=0]="AVOID",o[o.ALIGN=1]="ALIGN"})(Uc||(Uc={}));function Np(o,e,t){const n=t.mode===Uc.ALIGN?t.offset:t.offset+t.size,i=t.mode===Uc.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=o-n?n:e<=i?i-e:Math.max(o-e,0):e<=i?i-e:e<=o-n?n:0}u(Np,"layout");const dy=class dy extends G{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=G.None,this.toDisposeOnSetContainer=G.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=re(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,ts(this.view),this.setContainer(e,t),this._register(He(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=re(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=N4e,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(re("slot"))}else this.container.appendChild(this.view);const i=new ie;dy.BUBBLE_UP_EVENTS.forEach(s=>{i.add(Jt(this.container,s,r=>{this.onDOMEvent(r,!1)}))}),dy.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(Jt(this.container,s,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){var t,n;this.isVisible()&&this.hide(),$n(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Os(this.view),this.toDisposeOnClean=e.render(this.view)||G.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)===null||n===void 0||n.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Cr&&MZ.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if($Se(e)){const h=Cn(e),g=UIe(e);t={top:h.top*g,left:h.left*g,width:h.width*g,height:h.height*g}}else I4e(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=bs(this.view),i=zh(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,d;if(a===0){const h={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},g={offset:t.left,size:t.width,position:r===0?0:1,mode:Uc.ALIGN};l=Np(window.innerHeight,i,h)+window.pageYOffset,Li.intersects({start:l,end:l+i},{start:h.offset,end:h.offset+h.size})&&(g.mode=Uc.AVOID),d=Np(window.innerWidth,n,g)}else{const h={offset:t.left,size:t.width,position:r===0?0:1},g={offset:t.top,size:t.height,position:s===0?0:1,mode:Uc.ALIGN};d=Np(window.innerWidth,n,h),Li.intersects({start:d,end:d+n},{start:h.offset,end:h.offset+h.size})&&(g.mode=Uc.AVOID),l=Np(window.innerHeight,i,g)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const c=Cn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Cn(this.view).top:c.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?Cn(this.view).left:c.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),ts(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Mi(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};u(dy,"ContextView");let eC=dy;eC.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];eC.BUBBLE_DOWN_EVENTS=["click"];const N4e=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var R4e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},P4e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},rS;let B6=(rS=class extends G{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=G.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new eC(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?(t!==this.container||this.shadowRoot!==n)&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=n,this.contextView.show(e);const i=He(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}},u(rS,"ContextViewService"),rS);B6=R4e([P4e(0,x_)],B6);let Nb=[],dJ=[],DTe=[];function $E(o,e=!1){F4e(o,!1,e)}u($E,"registerPlatformLanguageAssociation");function F4e(o,e,t){const n=O4e(o,e);Nb.push(n),n.userConfigured?DTe.push(n):dJ.push(n),t&&!n.userConfigured&&Nb.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}u(F4e,"_registerLanguageAssociation");function O4e(o,e){return{id:o.id,mime:o.mime,filename:o.filename,extension:o.extension,filepattern:o.filepattern,firstline:o.firstline,userConfigured:e,filenameLowercase:o.filename?o.filename.toLowerCase():void 0,extensionLowercase:o.extension?o.extension.toLowerCase():void 0,filepatternLowercase:o.filepattern?CTe(o.filepattern.toLowerCase()):void 0,filepatternOnPath:o.filepattern?o.filepattern.indexOf(Mn.sep)>=0:!1}}u(O4e,"toLanguageAssociationItem");function H4e(){Nb=Nb.filter(o=>o.userConfigured),dJ=[]}u(H4e,"clearPlatformLanguageAssociations");function V4e(o,e){return W4e(o,e).map(t=>t.id)}u(V4e,"getLanguageIds");function W4e(o,e){let t;if(o)switch(o.scheme){case qe.file:t=o.fsPath;break;case qe.data:{t=Tu.parseMetaData(o).get(Tu.META_DATA_LABEL);break}case qe.vscodeNotebookCell:t=void 0;break;default:t=o.path}if(!t)return[{id:"unknown",mime:bn.unknown}];t=t.toLowerCase();const n=Yc(t),i=iwe(t,n,DTe);if(i)return[i,{id:go,mime:bn.text}];const s=iwe(t,n,dJ);if(s)return[s,{id:go,mime:bn.text}];if(e){const r=B4e(e);if(r)return[r,{id:go,mime:bn.text}]}return[{id:"unknown",mime:bn.unknown}]}u(W4e,"getAssociations");function iwe(o,e,t){var n;let i,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const d=l.filepatternOnPath?o:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,d)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(i)return i;if(s)return s;if(r)return r}u(iwe,"getAssociationByPath");function B4e(o){if(CZ(o)&&(o=o.substr(1)),o.length>0)for(let e=Nb.length-1;e>=0;e--){const t=Nb[e];if(!t.firstline)continue;const n=o.match(t.firstline);if(n&&n.length>0)return t}}u(B4e,"getAssociationByFirstline");const qE=Object.prototype.hasOwnProperty,swe="vs.editor.nullLanguage",Qde=class Qde{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(swe,0),this._register(go,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||swe}};u(Qde,"LanguageIdCodec");let U6=Qde;const cy=class cy extends G{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,cy.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new U6,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(nb.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){cy.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},H4e();const e=[].concat(nb.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),on.as(kl.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;qE.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)$E({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)$E({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)$E({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);QDe(l)||$E({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const r=s!==null&&s.length>0;if(!(r&&s[0]===null)){const a=(r?s[0]:null)||n;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?qE.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return qE.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&qE.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:V4e(e,t)}};u(cy,"LanguagesRegistry");let mI=cy;mI.instanceCount=0;const uy=class uy extends G{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new V),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new V),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new V({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,uy.instanceCount++,this._registry=this._register(new mI(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){uy.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return x1e(n,null)}createById(e){return new _I(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new _I(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=go),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),en.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};u(uy,"LanguageService");let bI=uy;bI.instanceCount=0;const ece=class ece{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new V({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}};u(ece,"LanguageSelection");let _I=ece;const tce=class tce extends _u{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Q(e,re(".monaco-dropdown")),this._label=Q(this._element,re(".dropdown-label"));let n=t.labelRenderer;n||(n=u(s=>(s.textContent=t.label||"",null),"labelRenderer"));for(const s of[pe.CLICK,pe.MOUSE_DOWN,Nt.Tap])this._register(q(this.element,s,r=>Ke.stop(r,!0)));for(const s of[pe.MOUSE_DOWN,Nt.Tap])this._register(q(this._label,s,r=>{r instanceof MouseEvent&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(q(this._label,pe.KEY_UP,s=>{const r=new Mt(s);(r.equals(3)||r.equals(10))&&(Ke.stop(s,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(oi.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}};u(tce,"BaseDropdown");let z6=tce;const nce=class nce extends z6{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};u(nce,"DropdownMenu");let G6=nce;const ice=class ice extends Ao{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=u(s=>{this.element=Q(s,re("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},"labelRenderer"),n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new G6(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return s.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const n=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}};u(ice,"DropdownMenuActionViewItem");let Rb=ice;function U4e(o){return o?o.condition!==void 0:!1}u(U4e,"isICommandActionToggleInfo");var yv=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},t0;(function(o){o[o.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",o[o.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(t0||(t0={}));var Rp;(function(o){o[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed"})(Rp||(Rp={}));const qP=class qP extends G{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Id),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Rp.None,this.cache=new Map,this.flushDelayer=new WD(qP.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.acceptExternal(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.acceptExternal(i,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Rp.Closed)return;let n=!1;no(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return no(n)?t:n}getBoolean(e,t){const n=this.get(e);return no(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return no(n)?t:parseInt(n,10)}set(e,t,n=!1){return yv(this,void 0,void 0,function*(){if(this.state===Rp.Closed)return;if(no(t))return this.delete(e,n);const i=ss(t)||Array.isArray(t)?JFe(t):String(t);if(this.cache.get(e)!==i)return this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()})}delete(e,t=!1){return yv(this,void 0,void 0,function*(){if(!(this.state===Rp.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return yv(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return yv(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}};u(qP,"Storage");let Um=qP;Um.DEFAULT_FLUSH_DELAY=100;const sce=class sce{constructor(){this.onDidChangeItemsExternal=Ce.None,this.items=new Map}updateItems(e){var t,n;return yv(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((i,s)=>this.items.set(s,i)),(n=e.delete)===null||n===void 0||n.forEach(i=>this.items.delete(i))})}};u(sce,"InMemoryStorageDatabase");let n0=sce;const Uk="__$__targetStorageMarker",Rr=nt("storageService");var vI;(function(o){o[o.NONE=0]="NONE",o[o.SHUTDOWN=1]="SHUTDOWN"})(vI||(vI={}));function z4e(o){const e=o.get(Uk);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}u(z4e,"loadKeyTargets");const YP=class YP extends G{constructor(e={flushInterval:YP.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Id),this._onDidChangeTarget=this._register(new Id),this._onWillSaveState=this._register(new V),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return Ce.filter(this._onDidChangeValue.event,i=>i.scope===e&&(t===void 0||i.key===t),n)}emitDidChangeValue(e,t){const{key:n,external:i}=t;if(n===Uk){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:i})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i,s=!1){if(no(t)){this.remove(e,n,s);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,i),(r=this.getStorage(n))===null||r===void 0||r.set(e,t,s)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,t,void 0),(i=this.getStorage(t))===null||i===void 0||i.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n,i=!1){var s,r;const a=this.getKeyTargets(t);typeof n=="number"?a[e]!==n&&(a[e]=n,(s=this.getStorage(t))===null||s===void 0||s.set(Uk,JSON.stringify(a),i)):typeof a[e]=="number"&&(delete a[e],(r=this.getStorage(t))===null||r===void 0||r.set(Uk,JSON.stringify(a),i))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?z4e(t):Object.create(null)}};u(YP,"AbstractStorageService");let yI=YP;yI.DEFAULT_FLUSH_INTERVAL=60*1e3;const oce=class oce extends yI{constructor(){super(),this.applicationStorage=this._register(new Um(new n0,{hint:t0.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Um(new n0,{hint:t0.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Um(new n0,{hint:t0.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}};u(oce,"InMemoryStorageService");let j6=oce;function G4e(o,e){const t=Object.assign({},e);for(const n in o){const i=o[n];t[n]=i!==void 0?be(i):void 0}return t}u(G4e,"overrideStyles");const j4e={keybindingLabelBackground:be(jNe),keybindingLabelForeground:be(KNe),keybindingLabelBorder:be($Ne),keybindingLabelBottomBorder:be(qNe),keybindingLabelShadow:be($a)},K4e={buttonForeground:be(lv),buttonSeparator:be(ANe),buttonBackground:be(dv),buttonHoverBackground:be(INe),buttonSecondaryForeground:be(RNe),buttonSecondaryBackground:be(U9),buttonSecondaryHoverBackground:be(PNe),buttonBorder:be(NNe)},$4e={progressBarBackground:be(HNe)},wI={inputActiveOptionBorder:be(PZ),inputActiveOptionForeground:be(FZ),inputActiveOptionBackground:be(Gh)};be(xRe),be(LRe),be(TRe);be(cn),be(Xa),be($a),be(st),be(BRe),be(URe),be(zRe),be(yNe);const CI={inputBackground:be(txe),inputForeground:be(nxe),inputBorder:be(ixe),inputValidationInfoBorder:be(SNe),inputValidationInfoBackground:be(wNe),inputValidationInfoForeground:be(CNe),inputValidationWarningBorder:be(LNe),inputValidationWarningBackground:be(xNe),inputValidationWarningForeground:be(TNe),inputValidationErrorBorder:be(DNe),inputValidationErrorBackground:be(ENe),inputValidationErrorForeground:be(kNe)},q4e={listFilterWidgetBackground:be(bRe),listFilterWidgetOutline:be(_Re),listFilterWidgetNoMatchesOutline:be(vRe),listFilterWidgetShadow:be(yRe),inputBoxStyles:CI,toggleStyles:wI},MTe={badgeBackground:be(Fk),badgeForeground:be(FNe),badgeBorder:be(st)};be(PRe),be(RRe),be(H0e),be(H0e),be(FRe);const kf={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:be(aRe),listFocusForeground:be(lRe),listFocusOutline:be(dRe),listActiveSelectionBackground:be(yd),listActiveSelectionForeground:be(Ja),listActiveSelectionIconForeground:be(gv),listFocusAndSelectionOutline:be(cRe),listFocusAndSelectionBackground:be(yd),listFocusAndSelectionForeground:be(Ja),listInactiveSelectionBackground:be(uRe),listInactiveSelectionIconForeground:be(gRe),listInactiveSelectionForeground:be(hRe),listInactiveFocusBackground:be(fRe),listInactiveFocusOutline:be(pRe),listHoverBackground:be(cxe),listHoverForeground:be(uxe),listDropBackground:be(mRe),listSelectionOutline:be(Gt),listHoverOutline:be(Gt),treeIndentGuidesStroke:be(fv),treeInactiveIndentGuidesStroke:be(wRe),tableColumnsBorder:be(CRe),tableOddRowsBackgroundColor:be(SRe)};function T_(o){return G4e(o,kf)}u(T_,"getListStyles");const Y4e={selectBackground:be(qa),selectListBackground:be(MNe),selectForeground:be(md),decoratorRightForeground:be(sxe),selectBorder:be(pp),focusBorder:be(ro),listFocusBackground:be($h),listInactiveSelectionIconForeground:be(mp),listFocusForeground:be(Kh),listFocusOutline:_Ne(Gt,K.transparent.toString()),listHoverBackground:be(cxe),listHoverForeground:be(uxe),listHoverOutline:be(Gt),selectListBorder:be(Za),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},X4e={shadowColor:be($a),borderColor:be(ERe),foregroundColor:be(kRe),backgroundColor:be(DRe),selectionForegroundColor:be(MRe),selectionBackgroundColor:be(ARe),selectionBorderColor:be(IRe),separatorColor:be(NRe),scrollbarShadow:be(ONe),scrollbarSliderBackground:be(cv),scrollbarSliderHoverBackground:be(uv),scrollbarSliderActiveBackground:be(hv)};var WO=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ys=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ATe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function Z4e(o,e,t,n){const i=o.getActions(e),s=db.getInstance(),r=s.keyStatus.altKey||(Si||qi)&&s.keyStatus.shiftKey;NTe(i,t,r,n?a=>a===n:a=>a==="navigation")}u(Z4e,"createAndFillInContextMenuActions");function ITe(o,e,t,n,i,s){const r=o.getActions(e);NTe(r,t,!1,typeof n=="string"?l=>l===n:n,i,s)}u(ITe,"createAndFillInActionBarActions");function NTe(o,e,t,n=r=>r==="navigation",i=()=>!1,s=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[d,c]of o){let h;n(d)?(h=r,h.length>0&&s&&h.push(new ui)):(h=a,h.length>0&&h.push(new ui));for(let g of c){t&&(g=g instanceof Er&&g.alt?g.alt:g);const f=h.push(g);g instanceof vu&&l.add({group:d,action:g,index:f-1})}}for(const{group:d,action:c,index:h}of l){const g=n(d)?r:a,f=c.actions;f.length<=1&&i(c,d,g.length)&&g.splice(h,1,...f)}}u(NTe,"fillInActions");var aS;let Kg=(aS=class extends Eu{constructor(e,t,n,i,s,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new si),this._altKey=db.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return ATe(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=u(()=>{var i;const s=!!(!((i=this._menuItemAction.alt)===null||i===void 0)&&i.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())},"updateAltState");this._register(this._altKey.event(n)),this._register(q(e,"mouseleave",i=>{t=!1,n()})),this._register(q(e,"mouseenter",i=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=n?m("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),d=l?m("titleAndKb","{0} ({1})",r,l):r;s=m("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,lJ.modifierLabels[oo].altKey,d)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const i=this._commandAction.checked&&U4e(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(i)if(Te.isThemeIcon(i)){const s=Te.asClassNameArray(i);n.classList.add(...s),this._itemClassDispose.value=He(()=>{n.classList.remove(...s)})}else n.style.backgroundImage=mb(this._themeService.getColorTheme().type)?bu(i.dark):bu(i.light),n.classList.add("icon"),this._itemClassDispose.value=yr(He(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}},u(aS,"MenuEntryActionViewItem"),aS);Kg=WO([ys(2,At),ys(3,_n),ys(4,Re),ys(5,On),ys(6,To),ys(7,El)],Kg);var lS;let K6=(lS=class extends Rb{constructor(e,t,n,i,s){var r,a,l;const d=Object.assign(Object.assign({},t),{menuAsChild:(r=t?.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(a=t?.classNames)!==null&&a!==void 0?a:Te.isThemeIcon(e.item.icon)?Te.asClassName(e.item.icon):void 0,keybindingProvider:(l=t?.keybindingProvider)!==null&&l!==void 0?l:c=>n.lookupKeybinding(c.id)});super(e,{getActions:()=>e.actions},i,d),this._keybindingService=n,this._contextMenuService=i,this._themeService=s}render(e){super.render(e),Lt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!Te.isThemeIcon(n)){this.element.classList.add("icon");const i=u(()=>{this.element&&(this.element.style.backgroundImage=mb(this._themeService.getColorTheme().type)?bu(n.dark):bu(n.light))},"setBackgroundImage");i(),this._register(this._themeService.onDidColorThemeChange(()=>{i()}))}}},u(lS,"SubmenuEntryActionViewItem"),lS);K6=WO([ys(2,At),ys(3,To),ys(4,On)],K6);var dS;let $6=(dS=class extends Ao{constructor(e,t,n,i,s,r,a,l){var d,c,h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let g;const f=t?.persistLastActionId?l.get(this._storageKey,1):void 0;f&&(g=e.actions.find(b=>f===b.id)),g||(g=e.actions[0]),this._defaultAction=this._instaService.createInstance(Kg,g,{keybinding:this._getDefaultActionKeybindingLabel(g)});const p=Object.assign(Object.assign({keybindingProvider:b=>this._keybindingService.lookupKeybinding(b.id)},t),{menuAsChild:(d=t?.menuAsChild)!==null&&d!==void 0?d:!0,classNames:(c=t?.classNames)!==null&&c!==void 0?c:["codicon","codicon-chevron-down"],actionRunner:(h=t?.actionRunner)!==null&&h!==void 0?h:new _u});this._dropdown=new Rb(e,e.actions,this._contextMenuService,p),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof Er&&this.update(b.action)})}update(e){var t;!((t=this._options)===null||t===void 0)&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Kg,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends _u{runAction(n,i){return ATe(this,void 0,void 0,function*(){yield n.run(void 0)})}},this._container&&this._defaultAction.render(qSe(this._container,re(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=re(".action-container");this._defaultAction.render(Q(this._container,t)),this._register(q(t,pe.KEY_DOWN,i=>{const s=new Mt(i);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const n=re(".dropdown-action-container");this._dropdown.render(Q(this._container,n)),this._register(q(n,pe.KEY_DOWN,i=>{var s;const r=new Mt(i);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}},u(dS,"DropdownWithDefaultActionViewItem"),dS);$6=WO([ys(2,At),ys(3,_n),ys(4,To),ys(5,Ml),ys(6,Pe),ys(7,Rr)],$6);var cS;let q6=(cS=class extends s6{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===ui.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,Y4e,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=be(pp)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}},u(cS,"SubmenuEntrySelectActionViewItem"),cS);q6=WO([ys(1,qd)],q6);function J4e(o,e,t){return e instanceof Er?o.createInstance(Kg,e,t):e instanceof Pg?e.item.isSelection?o.createInstance(q6,e):e.item.rememberDefaultAction?o.createInstance($6,e,Object.assign(Object.assign({},t),{persistLastActionId:!0})):o.createInstance(K6,e,t):void 0}u(J4e,"createActionViewItem");const Y6=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,kH=/(&amp;)?(&amp;)([^\s&])/g;var SI;(function(o){o[o.Right=0]="Right",o[o.Left=1]="Left"})(SI||(SI={}));const lm=class lm extends Ls{constructor(e,t,n,i){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:l=>this.doGetActionViewItem(l,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ot||qi?[10]:[]],keyDown:!0}}),this.menuStyles=i,this.menuElement=s,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new ie),this.initializeOrUpdateStyleSheet(e,i),this._register(oi.addTarget(s)),q(s,pe.KEY_DOWN,l=>{new Mt(l).equals(2)&&l.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(q(s,pe.KEY_DOWN,l=>{const d=l.key.toLocaleLowerCase();if(this.mnemonics.has(d)){Ke.stop(l,!0);const c=this.mnemonics.get(d);if(c.length===1&&(c[0]instanceof LI&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(l)),c.length>1){const h=c.shift();h&&h.container&&(this.focusItemByElement(h.container),c.push(h)),this.mnemonics.set(d,c)}}})),qi&&this._register(q(s,pe.KEY_DOWN,l=>{const d=new Mt(l);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ke.stop(l,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ke.stop(l,!0))})),this._register(q(this.domNode,pe.MOUSE_OUT,l=>{const d=l.relatedTarget;Mi(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),l.stopPropagation())})),this._register(q(this.actionsList,pe.MOUSE_OVER,l=>{let d=l.target;if(!(!d||!Mi(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(d),c!==this.focusedItem&&this.updateFocus()}}})),this._register(oi.addTarget(this.actionsList)),this._register(q(this.actionsList,Nt.Tap,l=>{let d=l.initialTarget;if(!(!d||!Mi(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(d),c!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Cu(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,i),this._register(q(s,Nt.Change,l=>{Ke.stop(l,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-l.translationY})})),this._register(q(a,pe.MOUSE_UP,l=>{l.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(l=>{var d;return!((d=n.submenuIds)===null||d===void 0)&&d.has(l.id)?(console.warn(`Found submenu cycle: ${l.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(l=>!(l instanceof EI)).forEach((l,d,c)=>{l.updatePositionInSet(d+1,c.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(gM(e)?this.styleSheet=Ko(e):(lm.globalStyleSheet||(lm.globalStyleSheet=Ko()),this.styleSheet=lm.globalStyleSheet)),this.styleSheet.textContent=eHe(t,gM(e))}styleScrollElement(e,t){var n,i;const s=(n=t.foregroundColor)!==null&&n!==void 0?n:"",r=(i=t.backgroundColor)!==null&&i!==void 0?i:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",d=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=s,e.style.backgroundColor=r,e.style.boxShadow=d}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ui)return new EI(t.context,e,{icon:!0},this.menuStyles);if(e instanceof vu){const i=new LI(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}),this.menuStyles);if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let r=[];this.mnemonics.has(s)&&(r=this.mnemonics.get(s)),r.push(i),this.mnemonics.set(s,r)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(i.keybinding=a)}}const s=new TI(t.context,e,i,this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(s),this.mnemonics.set(r,a)}}return s}}};u(lm,"Menu");let xI=lm;const rce=class rce extends Ao{constructor(e,t,n,i){if(n.isMenu=!0,super(t,t,n),this.menuStyle=i,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const s=this.action.label;if(s){const r=Y6.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Et(()=>{this.element&&(this._register(q(this.element,pe.MOUSE_UP,s=>{if(Ke.stop(s,!0),Bo){if(new Bs(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(q(this.element,pe.CONTEXT_MENU,s=>{Ke.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Q(this.element,re("a.action-menu-item")),this._action.id===ui.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Q(this.item,re("span.menu-item-check"+Te.asCSSSelector(ue.menuSelection))),this.check.setAttribute("role","none"),this.label=Q(this.item,re("span.action-label")),this.options.label&&this.options.keybinding&&(Q(this.item,re("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){$n(this.label);let t=tJ(this.action.label);if(t){const n=Q4e(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=Y6.exec(t);if(i){t=wD(t),kH.lastIndex=0;let s=kH.exec(t);for(;s&&s[1];)s=kH.exec(t);const r=u(a=>a.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");s?this.label.append(YL(r(t.substr(0,s.index))," "),re("u",{"aria-hidden":"true"},s[3]),J1e(r(t.substr(s.index+s[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=i,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}};u(rce,"BaseMenuActionViewItem");let TI=rce;const ace=class ace extends TI{constructor(e,t,n,i,s){super(e,e,i,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new ie),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:SI.Right,this.showScheduler=new Et(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Et(()=>{this.element&&!Mi(tu(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Q(this.item,re("span.submenu-indicator"+Te.asCSSSelector(ue.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(q(this.element,pe.KEY_UP,t=>{const n=new Mt(t);(n.equals(17)||n.equals(3))&&(Ke.stop(t,!0),this.createSubmenu(!0))})),this._register(q(this.element,pe.KEY_DOWN,t=>{const n=new Mt(t);tu()===this.item&&(n.equals(17)||n.equals(3))&&Ke.stop(t,!0)})),this._register(q(this.element,pe.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(q(this.element,pe.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(q(this.element,pe.FOCUS_OUT,t=>{this.element&&!Mi(tu(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Ke.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=Np(e.width,t.width,{position:i===SI.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=Np(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Q(this.element,re("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new xI(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new pM],this.submenuOptions,this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new _t(window.innerWidth,window.innerHeight),_t.lift(r),s,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add(q(this.submenuContainer,pe.KEY_UP,d=>{new Mt(d).equals(15)&&(Ke.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(q(this.submenuContainer,pe.KEY_DOWN,d=>{new Mt(d).equals(15)&&Ke.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}};u(ace,"SubmenuMenuActionViewItem");let LI=ace;const lce=class lce extends Eu{constructor(e,t,n,i){super(e,t,n),this.menuStyles=i}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}};u(lce,"MenuSeparatorActionViewItem");let EI=lce;function Q4e(o){const e=Y6,t=e.exec(o);if(!t)return o;const n=!t[1];return o.replace(e,n?"$2$3":"").trim()}u(Q4e,"cleanMnemonic");function owe(o){const e=Y1e()[o.id];return`.codicon-${o.id}:before { content: '\\${e.toString(16)}'; }`}u(owe,"formatRule");function eHe(o,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${owe(ue.menuSelection)}
${owe(ue.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=o.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=o.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const s=o.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const r=o.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}u(eHe,"getMenuWidgetCSS");const dce=class dce{constructor(e,t,n,i){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n;const i=$Se(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var r;this.lastContainer=s;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(s.className+=" "+a),this.options.blockMouse&&(this.block=s.appendChild(re(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(r=this.blockDisposable)===null||r===void 0||r.dispose(),this.blockDisposable=q(this.block,pe.MOUSE_DOWN,c=>c.stopPropagation()));const l=new ie,d=e.actionRunner||new _u;return d.onWillRun(c=>this.onActionRun(c,!e.skipTelemetry),this,l),d.onDidRun(this.onDidActionRun,this,l),n=new xI(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:d,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)},X4e),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l),l.add(q(window,pe.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add(q(window,pe.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;const h=new Bs(c);let g=h.target;if(!h.rightButton){for(;g;){if(g===s)return;g=g.parentElement}this.contextViewService.hideContextView(!0)}})),yr(l,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:s=>{var r,a,l;(r=e.onHide)===null||r===void 0||r.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(tu()===this.lastContainer||Mi(tu(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},i,!!i)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Ca(e.error)&&this.notificationService.error(e.error)}};u(dce,"ContextMenuHandler");let X6=dce;var tHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uS;let Z6=(uS=class extends G{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new X6(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,i,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=i,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new V),this._onDidHideContextMenu=this._store.add(new V)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=J6.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var n;(n=e.onHide)===null||n===void 0||n.call(e,t),this._onDidHideContextMenu.fire()}})),db.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}},u(uS,"ContextMenuService"),uS);Z6=tHe([zf(0,xo),zf(1,_n),zf(2,qd),zf(3,At),zf(4,Ml),zf(5,Re)],Z6);var J6;(function(o){function e(n){return n&&n.menuId instanceof A}u(e,"is");function t(n,i,s){if(!e(n))return n;const{menuId:r,menuActionOptions:a,contextKeyService:l}=n;return Object.assign(Object.assign({},n),{getActions:()=>{const d=[];if(r){const c=i.createMenu(r,l??s);Z4e(c,a,d),c.dispose()}return n.getActions?ui.join(n.getActions(),d):d}})}u(t,"transform"),o.transform=t})(J6||(J6={}));var kI;(function(o){o[o.API=0]="API",o[o.USER=1]="USER"})(kI||(kI={}));var cJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},DI=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},xh=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},hS;let Q6=(hS=class{constructor(e){this._commandService=e}open(e,t){return xh(this,void 0,void 0,function*(){if(!oJ(e,qe.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Ae.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=OB(decodeURIComponent(e.query))}catch{try{n=OB(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}},u(hS,"CommandOpener"),hS);Q6=cJ([DI(0,un)],Q6);var gS;let eU=(gS=class{constructor(e){this._editorService=e}open(e,t){return xh(this,void 0,void 0,function*(){typeof e=="string"&&(e=Ae.parse(e));const{selection:n,uri:i}=XOe(e);return e=i,e.scheme===qe.file&&(e=wPe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t?.fromUserGesture?kI.USER:kI.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}},u(gS,"EditorOpener"),gS);eU=cJ([DI(0,gt)],eU);var fS;let tU=(fS=class{constructor(e,t){this._openers=new Ai,this._validators=new Ai,this._resolvers=new Ai,this._resolvedUriTargets=new ws(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Ai,this._defaultExternalOpener={openExternal:n=>xh(this,void 0,void 0,function*(){return jye(n,qe.http,qe.https)?XSe(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>xh(this,void 0,void 0,function*(){return i?.openExternal||jye(n,qe.mailto,qe.http,qe.https,qe.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new Q6(t)),this._openers.push(new eU(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}open(e,t){var n;return xh(this,void 0,void 0,function*(){const i=typeof e=="string"?Ae.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const r of this._validators)if(!(yield r.shouldOpen(s,t)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return xh(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return xh(this,void 0,void 0,function*(){const n=typeof e=="string"?Ae.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t?.allowContributedOpeners){const r=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:r},Ze.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},Ze.None)})}dispose(){this._validators.clear()}},u(fS,"OpenerService"),fS);tU=cJ([DI(0,gt),DI(1,un)],tU);var sn;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(sn||(sn={}));(function(o){function e(r,a){return a-r}u(e,"compare"),o.compare=e;const t=Object.create(null);t[o.Error]=m("sev.error","Error"),t[o.Warning]=m("sev.warning","Warning"),t[o.Info]=m("sev.info","Info");function n(r){return t[r]||""}u(n,"toString"),o.toString=n;function i(r){switch(r){case mn.Error:return o.Error;case mn.Warning:return o.Warning;case mn.Info:return o.Info;case mn.Ignore:return o.Hint}}u(i,"fromSeverity"),o.fromSeverity=i;function s(r){switch(r){case o.Error:return mn.Error;case o.Warning:return mn.Warning;case o.Info:return mn.Info;case o.Hint:return mn.Ignore}}u(s,"toSeverity"),o.toSeverity=s})(sn||(sn={}));var MI;(function(o){const e="";function t(i){return n(i,!0)}u(t,"makeKey"),o.makeKey=t;function n(i,s){const r=[e];return i.source?r.push(i.source.replace("¦","\\¦")):r.push(e),i.code?typeof i.code=="string"?r.push(i.code.replace("¦","\\¦")):r.push(i.code.value.replace("¦","\\¦")):r.push(e),i.severity!==void 0&&i.severity!==null?r.push(sn.toString(i.severity)):r.push(e),i.message&&s?r.push(i.message.replace("¦","\\¦")):r.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?r.push(i.startLineNumber.toString()):r.push(e),i.startColumn!==void 0&&i.startColumn!==null?r.push(i.startColumn.toString()):r.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?r.push(i.endLineNumber.toString()):r.push(e),i.endColumn!==void 0&&i.endColumn!==null?r.push(i.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}u(n,"makeKeyOptionalMessage"),o.makeKeyOptionalMessage=n})(MI||(MI={}));const Nl=nt("markerService");var nHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rwe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const cce=class cce extends G{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(He(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}};u(cce,"MarkerDecorations");let nU=cce;var pS;let iU=(pS=class extends G{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new V),this._markerDecorations=new ws,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new nU(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===qe.inMemory||e.uri.scheme===qe.internal||e.uri.scheme===qe.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=L.lift(t);if(t.severity===sn.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const s=e.getWordAtPosition(n.getStartPosition());s&&(n=new L(n.startLineNumber,s.startColumn,n.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new L(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,r;switch(e.severity){case sn.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case sn.Warning:t="squiggly-warning",n=ln(w2e),i=20,r={color:ln(HRe),position:ho.Inline};break;case sn.Info:t="squiggly-info",n=ln(C2e),i=10;break;case sn.Error:default:t="squiggly-error",n=ln(y2e),i=30,r={color:ln(ORe),position:ho.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:mo.Right},minimap:r,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}},u(pS,"MarkerDecorationsService"),pS);iU=nHe([rwe(0,Xt),rwe(1,Nl)],iU);var iHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},G_=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},tp;function rh(o){return o.toString()}u(rh,"MODEL_ID");function awe(o){const e=new zD,t=o.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}u(awe,"computeModelSha1");const uce=class uce{constructor(e,t,n){this.model=e,this._modelEventListeners=new ie,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}dispose(){this._modelEventListeners.dispose()}};u(uce,"ModelData");let sU=uce;const sHe=qi||ot?1:2,hce=class hce{constructor(e,t,n,i,s,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}};u(hce,"DisposedModelInfo");let oU=hce;var mS;let AI=tp=(mS=class extends G{constructor(e,t,n,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._languageService=i,this._languageConfigurationService=s,this._onModelAdded=this._register(new V),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new V),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new V),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var n;let i=Di.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let r=Di.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=sHe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let d=Di.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(d=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Di.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=Di.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let g=Di.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:a,trimAutoWhitespace:d,largeFileOptimizations:h,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:oo===3||oo===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const i=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[i+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),a=this._getEOL(t,i);s=tp._readModelOptions({editor:r,eol:a},n),this._modelCreationOptionsByLanguageAndResource[i+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let i=0,s=n.length;i<s;i++){const r=n[i],a=this._models[r],l=a.model.getLanguageId(),d=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:d})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:d}))continue;const c=t[l+d],h=this.getCreationOptions(l,d,a.model.isForSimpleWidget);tp._setModelOptionsForModel(a.model,h,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&uo(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(rh(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(rh(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(rh(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),r=new Wd(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(rh(n))){const d=this._removeDisposedModel(n),c=this._undoRedoService.getElements(n),h=awe(r)===d.sha1;if(h||d.sharesUndoRedoStack){for(const g of c.past)od(g)&&g.matchesResource(n)&&g.setModel(r);for(const g of c.future)od(g)&&g.matchesResource(n)&&g.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,g=>od(g)&&g.matchesResource(n)),h&&(r._overwriteVersionId(d.versionId),r._overwriteAlternativeVersionId(d.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(d.initialUndoRedoSnapshot))}else d.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(d.initialUndoRedoSnapshot)}const a=rh(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new sU(r,d=>this._onWillDispose(d),(d,c)=>this._onDidChangeLanguage(d,c));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?s=this._createModelData(e,t,n,i):s=this._createModelData(e,go,n,i),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=rh(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===qe.file||e.scheme===qe.vscodeRemote||e.scheme===qe.vscodeUserData||e.scheme===qe.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=rh(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const d of l.past)od(d)&&d.matchesResource(e.uri)&&(s=!0,r+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of l.future)od(d)&&d.matchesResource(e.uri)&&(s=!0,r+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=tp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&r>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>od(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new oU(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,awe(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);tp._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}},u(mS,"ModelService"),mS);AI.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;AI=tp=iHe([G_(0,at),G_(1,kSe),G_(2,PO),G_(3,Kt),G_(4,Pt)],AI);const gce=class gce{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:G.None}}renderElement(e,t,n,i){var s;if((s=n.disposable)===null||s===void 0||s.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,i);const a=new En,l=r.resolve(e,a.token);n.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,n.data),l.then(d=>this.renderer.renderElement(d,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}};u(gce,"PagedRenderer");let rU=gce;const fce=class fce{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};u(fce,"PagedAccessibilityProvider");let aU=fce;function oHe(o,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new aU(o,e.accessibilityProvider)})}u(oHe,"fromPagedListOptions");const pce=class pce{constructor(e,t,n,i,s={}){const r=u(()=>this.model,"modelProvider"),a=i.map(l=>new rU(l,r));this.list=new vo(e,t,n,a,oHe(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Ce.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Ce.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Ce.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Ji(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}};u(pce,"PagedList");let lU=pce;const rHe={separatorBorder:K.transparent},mce=class mce{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,i;e!==this.visible&&(e?(this.size=Rs(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(i=(n=this.view).setVisible)===null||i===void 0||i.call(n,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){this.disposable.dispose()}};u(mce,"ViewItem");let II=mce;const bce=class bce extends II{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}};u(bce,"VerticalViewItem");let dU=bce;const _ce=class _ce extends II{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}};u(_ce,"HorizontalViewItem");let cU=_ce;var ql;(function(o){o[o.Idle=0]="Idle",o[o.Busy=1]="Busy"})(ql||(ql={}));var NI;(function(o){o.Distribute={type:"distribute"};function e(i){return{type:"split",index:i}}u(e,"Split"),o.Split=e;function t(i){return{type:"auto",index:i}}u(t,"Auto"),o.Auto=t;function n(i){return{type:"invisible",cachedVisibleSize:i}}u(n,"Invisible"),o.Invisible=n})(NI||(NI={}));const vce=class vce extends G{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var n,i,s,r,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ql.Idle,this._onDidSashChange=this._register(new V),this._onDidSashReset=this._register(new V),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Q(this.el,re(".sash-container")),this.viewContainer=re(".split-view-container"),this.scrollable=this._register(new Og({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:jo})),this.scrollableElement=this._register(new Sw(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new Qe(this.viewContainer,"scroll")).event;this._register(l(d=>{const c=this.scrollableElement.getScrollPosition(),h=Math.abs(this.viewContainer.scrollLeft-c.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,g=Math.abs(this.viewContainer.scrollTop-c.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(h!==void 0||g!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:h,scrollTop:g})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(d=>{d.scrollTopChanged&&(this.viewContainer.scrollTop=d.scrollTop),d.scrollLeftChanged&&(this.viewContainer.scrollLeft=d.scrollLeft)})),Q(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||rHe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((d,c)=>{const h=Vs(d.visible)||d.visible?d.size:{type:"invisible",cachedVisibleSize:d.size},g=d.view;this.doAddView(g,h,c,!0)}),this.contentSize=this.viewItems.reduce((d,c)=>d+c.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"?i+=a:e-=r.size}for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&(r.size=Rs(Math.round(a*e/i),r.minimumSize,r.maximumSize))}}else{const i=Ji(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout?e.size/this.contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=yr(q(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),q(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=u((a,l)=>{const d=this.viewItems.map(p=>p.size);let c=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const b=this.viewItems[i];c=(b.minimumSize-b.size)/2,h=(b.maximumSize-b.size)/2}else{const b=this.viewItems[i+1];c=(b.size-b.maximumSize)/2,h=(b.size-b.minimumSize)/2}let g,f;if(!l){const p=Ji(i,-1),b=Ji(i+1,this.viewItems.length),_=p.reduce((E,D)=>E+(this.viewItems[D].minimumSize-d[D]),0),v=p.reduce((E,D)=>E+(this.viewItems[D].viewMaximumSize-d[D]),0),y=b.length===0?Number.POSITIVE_INFINITY:b.reduce((E,D)=>E+(d[D]-this.viewItems[D].minimumSize),0),w=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((E,D)=>E+(d[D]-this.viewItems[D].viewMaximumSize),0),C=Math.max(_,w),S=Math.min(y,v),k=this.findFirstSnapIndex(p),T=this.findFirstSnapIndex(b);if(typeof k=="number"){const E=this.viewItems[k],D=Math.floor(E.viewMinimumSize/2);g={index:k,limitDelta:E.visible?C-D:C+D,size:E.size}}if(typeof T=="number"){const E=this.viewItems[T],D=Math.floor(E.viewMinimumSize/2);f={index:T,limitDelta:E.visible?S+D:S-D,size:E.size}}}this.sashDragState={start:a,current:a,index:i,sizes:d,minDelta:c,maxDelta:h,alt:l,snapBefore:g,snapAfter:f,disposable:s}},"resetSashDragState");r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const c=e-n,h=this.resize(t,c,i,void 0,void 0,r,a,l,d);if(s){const g=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),p=g?t:t+1,b=this.viewItems[p],_=b.size-b.maximumSize,v=b.size-b.minimumSize,y=g?t-1:t+1;this.resize(y,-h,f,void 0,void 0,_,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Rs(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==ql.Idle)throw new Error("Cant modify splitview");if(this.state=ql.Busy,e<0||e>=this.viewItems.length)return;const n=Ji(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=Rs(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,s),this.state=ql.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Rs(n,a.minimumSize,a.maximumSize);const i=Ji(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==ql.Idle)throw new Error("Cant modify splitview");this.state=ql.Busy;const s=re(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const r=e.onDidChange(g=>this.onViewChange(c,g)),a=He(()=>this.viewContainer.removeChild(s)),l=yr(r,a);let d;typeof t=="number"?d=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize);const c=this.orientation===0?new dU(s,e,d,l):new cU(s,e,d,l);if(this.viewItems.splice(n,0,c),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new mr(this.sashContainer,{getHorizontalSashTop:E=>this.getSashPosition(E),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:1})):new mr(this.sashContainer,{getVerticalSashLeft:E=>this.getSashPosition(E),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},g),{orientation:0})),p=this.orientation===0?E=>({sash:f,start:E.startY,current:E.currentY,alt:E.altKey}):E=>({sash:f,start:E.startX,current:E.currentX,alt:E.altKey}),_=Ce.map(f.onDidStart,p)(this.onSashStart,this),y=Ce.map(f.onDidChange,p)(this.onSashChange,this),C=Ce.map(f.onDidEnd,()=>this.sashItems.findIndex(E=>E.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const E=this.sashItems.findIndex(F=>F.sash===f),D=Ji(E,-1),O=Ji(E+1,this.viewItems.length),B=this.findFirstSnapIndex(D),H=this.findFirstSnapIndex(O);typeof B=="number"&&!this.viewItems[B].visible||typeof H=="number"&&!this.viewItems[H].visible||this._onDidSashReset.fire(E)}),k=yr(_,y,C,S,f),T={sash:f,disposable:k};this.sashItems.splice(n-1,0,T)}s.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),this.state=ql.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(c=>c.size),i,s,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;const c=Ji(e,-1),h=Ji(e+1,this.viewItems.length);if(s)for(const T of s)k4(c,T),k4(h,T);if(i)for(const T of i)_E(c,T),_E(h,T);const g=c.map(T=>this.viewItems[T]),f=c.map(T=>n[T]),p=h.map(T=>this.viewItems[T]),b=h.map(T=>n[T]),_=c.reduce((T,E)=>T+(this.viewItems[E].minimumSize-n[E]),0),v=c.reduce((T,E)=>T+(this.viewItems[E].maximumSize-n[E]),0),y=h.length===0?Number.POSITIVE_INFINITY:h.reduce((T,E)=>T+(n[E]-this.viewItems[E].minimumSize),0),w=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((T,E)=>T+(n[E]-this.viewItems[E].maximumSize),0),C=Math.max(_,w,r),S=Math.min(y,v,a);let k=!1;if(l){const T=this.viewItems[l.index],E=t>=l.limitDelta;k=E!==T.visible,T.setVisible(E,l.size)}if(!k&&d){const T=this.viewItems[d.index],E=t<d.limitDelta;k=E!==T.visible,T.setVisible(E,d.size)}if(k)return this.resize(e,t,n,i,s,r,a);t=Rs(t,C,S);for(let T=0,E=t;T<g.length;T++){const D=g[T],O=Rs(f[T]+E,D.minimumSize,D.maximumSize),B=O-f[T];E-=B,D.size=O}for(let T=0,E=t;T<p.length;T++){const D=p[T],O=Rs(b[T]-E,D.minimumSize,D.maximumSize),B=O-b[T];E+=B,D.size=O}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=Ji(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);for(const a of r)k4(i,a);for(const a of s)_E(i,a);typeof e=="number"&&_E(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],d=Rs(l.size+n,l.minimumSize,l.maximumSize),c=d-l.size;n-=c,l.size=d}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:d}=this.sashItems[l],c=this.viewItems[l];a+=c.size;const h=!(t[l]&&r[l+1]),g=!(n[l]&&s[l+1]);if(h&&g){const f=Ji(l,-1),p=Ji(l+1,this.viewItems.length),b=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(p),v=typeof b=="number"&&!this.viewItems[b].visible,y=typeof _=="number"&&!this.viewItems[_].visible;v&&s[l]&&(a>0||this.startSnappingEnabled)?d.state=1:y&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else h&&!g?d.state=1:!h&&g?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),wt(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}};u(vce,"SplitView");let RI=vce;const XP=class XP{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=XP.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const r=i.get(s.templateId);if(!r)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=Q(e,re(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=Q(t,re(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const l=this.columns[s].project(e);r.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);$n(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};u(XP,"TableListRenderer");let tC=XP;tC.TemplateId="row";function aHe(o){return{getHeight(e){return o.getHeight(e)},getTemplateId(){return tC.TemplateId}}}u(aHe,"asListVirtualDelegate");const yce=class yce{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Ce.None}constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new V,this.onDidLayout=this._onDidLayout.event,this.element=re(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}layout(e){this._onDidLayout.fire([this.index,e])}};u(yce,"ColumnHeader");let uU=yce;const ZP=class ZP{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,i,s,r){this.virtualDelegate=n,this.domId=`table_id_${++ZP.InstanceCount}`,this.disposables=new ie,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Q(t,re(`.monaco-table.${this.domId}`));const a=i.map((c,h)=>new uU(c,h)),l={size:a.reduce((c,h)=>c+h.column.weight,0),views:a.map(c=>({size:c.column.weight,view:c}))};this.splitview=this.disposables.add(new RI(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const d=new tC(i,s,c=>this.splitview.getViewSize(c));this.list=this.disposables.add(new vo(e,this.domNode,aHe(n),[d],r)),Ce.any(...a.map(c=>c.onDidLayout))(([c,h])=>d.layoutColumn(c,h),null,this.disposables),this.splitview.onDidSashReset(c=>{const h=i.reduce((f,p)=>f+p.weight,0),g=i[c].weight/h*this.cachedWidth;this.splitview.resizeView(c,g)},null,this.disposables),this.styleElement=Ko(this.domNode),this.style(SOe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};u(ZP,"Table");let PI=ZP;PI.InstanceCount=0;const wce=class wce extends Ar{constructor(e){super(),this._onChange=this._register(new V),this.onChange=this._onChange.event,this._onKeyDown=this._register(new V),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Te.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}};u(wce,"Toggle");let Du=wce;const lHe=m("caseDescription","Match Case"),dHe=m("wordsDescription","Match Whole Word"),cHe=m("regexDescription","Use Regular Expression"),Cce=class Cce extends Du{constructor(e){super({icon:ue.caseSensitive,title:lHe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};u(Cce,"CaseSensitiveToggle");let FI=Cce;const Sce=class Sce extends Du{constructor(e){super({icon:ue.wholeWord,title:dHe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};u(Sce,"WholeWordsToggle");let OI=Sce;const xce=class xce extends Du{constructor(e){super({icon:ue.regex,title:cHe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};u(xce,"RegexToggle");let HI=xce;const Tce=class Tce{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};u(Tce,"ArrayNavigator");let hU=Tce;const Lce=class Lce{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new hU(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}};u(Lce,"HistoryNavigator");let gU=Lce;const j_=re;var bS;let uHe=(bS=class extends Ar{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new V),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Q(e,j_(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=Q(this.element,j_(".ibwrapper"));if(this.input=Q(r,j_(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Q(r,j_("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new IM(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Q(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(d=>this.input.scrollTop=d.scrollTop));const a=this._register(new Qe(document,"selectionchange")),l=Ce.filter(a.event,()=>{const d=document.getSelection();return d?.anchorNode===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Ls(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:zh(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&uo(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${tg(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=u(()=>e.style.width=bs(this.element)+"px","layout");this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{var s,r;if(!this.message)return null;e=Q(i,j_(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?qFe(this.message.content,a):$Fe(this.message.content,a);l.classList.add(this.classForType(this.message.type));const d=this.stylesForType(this.message.type);return l.style.backgroundColor=(s=d.background)!==null&&s!==void 0?s:"",l.style.color=(r=d.foreground)!==null&&r!==void 0?r:"",l.style.border=d.border?`1px solid ${d.border}`:"",Q(e,l),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=m("alertWarningMessage","Warning: {0}",this.message.content):n=m("alertInfoMessage","Info: {0}",this.message.content),Ii(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){var e,t,n;const i=this.options.inputBoxStyles,s=(e=i.inputBackground)!==null&&e!==void 0?e:"",r=(t=i.inputForeground)!==null&&t!==void 0?t:"",a=(n=i.inputBorder)!==null&&n!==void 0?n:"";this.element.style.backgroundColor=s,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border=`1px solid ${tg(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=zh(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}},u(bS,"InputBox"),bS);const Ece=class Ece extends uHe{constructor(e,t,n){const i=m({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),s=` or ⇅ ${i}`,r=` (⇅ ${i})`;super(e,t,n),this._onDidFocus=this._register(new V),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new V),this.onDidBlur=this._onDidBlur.event,this.history=new gU(n.history,100);const a=u(()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?s:r,d=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=d:this.setPlaceHolder(d)}},"addSuffix");this.observer=new MutationObserver((l,d)=>{l.forEach(c=>{c.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=u(d=>{if(this.placeholder.endsWith(d)){const c=this.placeholder.slice(0,this.placeholder.length-d.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1},"resetPlaceholder");l(r)||l(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Rg(this.value?this.value:m("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Rg(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};u(Ece,"HistoryInputBox");let VI=Ece;const hHe=m("defaultLabel","input"),kce=class kce extends Ar{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=new ie,this.additionalToggles=[],this._onDidOptionChange=this._register(new V),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new V),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new V),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new V),this._onKeyUp=this._register(new V),this._onCaseSensitiveKeyDown=this._register(new V),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new V),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||hHe,this.showCommonFindToggles=!!n.showCommonFindToggles;const i=n.appendCaseSensitiveLabel||"",s=n.appendWholeWordsLabel||"",r=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,d=!!n.flexibleWidth,c=n.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new VI(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new HI(Object.assign({appendTitle:r,isChecked:!1},n.toggleStyles))),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new OI(Object.assign({appendTitle:s,isChecked:!1},n.toggleStyles))),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new FI(Object.assign({appendTitle:i,isChecked:!1},n.toggleStyles))),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const f=h.indexOf(document.activeElement);if(f>=0){let p=-1;g.equals(17)?p=(f+1)%h.length:g.equals(15)&&(f===0?p=h.length-1:p=f-1),g.equals(9)?(h[f].blur(),this.inputBox.focus()):p>=0&&h[p].focus(),Ke.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(q(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(q(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(n=this.caseSensitive)===null||n===void 0||n.enable();for(const i of this.additionalToggles)i.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(n=this.caseSensitive)===null||n===void 0||n.disable();for(const i of this.additionalToggles)i.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.dispose(),this.additionalTogglesDisposables=new ie;for(const t of e??[])this.additionalTogglesDisposables.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,i,s,r,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((n=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&n!==void 0?n:0)+((s=(i=this.wholeWords)===null||i===void 0?void 0:i.width())!==null&&s!==void 0?s:0)+((a=(r=this.regex)===null||r===void 0?void 0:r.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,d)=>l+d.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}};u(kce,"FindInput");let WI=kce;var Ra;(function(o){o[o.Expanded=0]="Expanded",o[o.Collapsed=1]="Collapsed",o[o.PreserveOrExpanded=2]="PreserveOrExpanded",o[o.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Ra||(Ra={}));var Xh;(function(o){o[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter"})(Xh||(Xh={}));const Dce=class Dce extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}};u(Dce,"TreeError");let Cs=Dce;const Mce=class Mce{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};u(Mce,"WeakMapper");let nC=Mce;function uJ(o){return typeof o=="object"&&"visibility"in o&&"data"in o}u(uJ,"isFilterResult");function iC(o){switch(o){case!0:return 1;case!1:return 0;default:return o}}u(iC,"getVisibleState");function DH(o){return typeof o.collapsible=="boolean"}u(DH,"isCollapsibleStateUpdate");const Ace=class Ace{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new Vy,this._onDidChangeCollapseState=new V,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new V,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new V,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Uo(wSe),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=et.empty(),i={}){if(e.length===0)throw new Cs(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,r){var a;i===void 0&&(i=et.empty()),r===void 0&&(r=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,s);const d=[...i],c=t[t.length-1],h=new ob({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,c),...d,...l.children.slice(c+n)].map(_=>e.getId(_.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,d,s);const g=t.slice(0,-1),f=u((_,v,y)=>{if(r>0)for(let w=0;w<y;w++)_--,v--,this.spliceSmart(e,[...g,_,0],Number.MAX_SAFE_INTEGER,d[v].children,s,r-1)},"recurseSplice");let p=Math.min(l.children.length,c+n),b=d.length;for(const _ of h.changes.sort((v,y)=>y.originalStart-v.originalStart))f(p,b,p-(_.originalStart+_.originalLength)),p=_.originalStart,b=_.modifiedStart-c,this.spliceSimple([...g,p],_.originalLength,et.slice(d,b,b+_.modifiedLength),s);f(p,b,p)}spliceSimple(e,t,n=et.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:d,visible:c}=this.getParentNodeWithListIndex(e),h=[],g=et.map(n,T=>this.createTreeNode(T,a,a.visible?1:0,d,h,i)),f=e[e.length-1],p=a.children.length>0;let b=0;for(let T=f;T>=0&&T<a.children.length;T--){const E=a.children[T];if(E.visible){b=E.visibleChildIndex;break}}const _=[];let v=0,y=0;for(const T of g)_.push(T),y+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=b+v++);const w=kve(a.children,f,t,_);r?a.lastDiffIds?kve(a.lastDiffIds,f,t,_.map(T=>r.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>r.getId(T.element).toString()):a.lastDiffIds=void 0;let C=0;for(const T of w)T.visible&&C++;if(C!==0)for(let T=f+_.length;T<a.children.length;T++){const E=a.children[T];E.visible&&(E.visibleChildIndex-=C)}if(a.visibleChildrenCount+=v-C,d&&c){const T=w.reduce((E,D)=>E+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,y-T),this.list.splice(l,T,h)}if(w.length>0&&s){const T=u(E=>{s(E),E.children.forEach(T)},"visit");w.forEach(T)}this._onDidSplice.fire({insertedNodes:_,deletedNodes:w});const S=a.children.length>0;p!==S&&this.setCollapsible(e.slice(0,-1),S);let k=a;for(;k;){if(k.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}k=k.parent}}rerender(e){if(e.length===0)throw new Cs(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!DH(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(DH(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!DH(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,s,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const d=e.children||et.empty(),c=i&&l!==0&&!a.collapsed;let h=0,g=1;for(const f of d){const p=this.createTreeNode(f,a,l,c,s,r);a.children.push(p),g+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=h++)}return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=h,a.visible=l===2?h>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,i&&s.pop()),r?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const d of e.children)a=this._updateNodeAfterFilterChange(d,s,n,i&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):uJ(n)?(e.filterData=n.data,iC(n.visibility)):(e.filterData=void 0,iC(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new Cs(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Cs(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Cs(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[r],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Rke(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}};u(Ace,"IndexTreeModel");let fU=Ace;globalThis&&globalThis.__awaiter;const Ice=class Ice extends zg{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}};u(Ice,"TreeElementsDragAndDropData");let pU=Ice;function MH(o){return o instanceof zg?new pU(o):o}u(MH,"asTreeDragAndDropData");const Nce=class Nce{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=G.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,MH(e),t)}onDragOver(e,t,n,i,s=!0){const r=this.dnd.onDragOver(MH(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=pu(()=>{const g=this.modelProvider(),f=g.getNodeLocation(t);g.isCollapsed(f)&&g.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!s){const g=typeof r=="boolean"?r:r.accept,f=typeof r=="boolean"?void 0:r.effect;return{accept:g,effect:f,feedback:[n]}}return r}if(r.bubble===1){const g=this.modelProvider(),f=g.getNodeLocation(t),p=g.getParentNodeLocation(f),b=g.getNode(p),_=p&&g.getListIndex(p);return this.onDragOver(e,b,_,i,!1)}const l=this.modelProvider(),d=l.getNodeLocation(t),c=l.getListIndex(d),h=l.getListRenderCount(d);return Object.assign(Object.assign({},r),{feedback:Ji(c,c+h)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(MH(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}};u(Nce,"TreeNodeListDragAndDrop");let mU=Nce;function gHe(o,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new mU(o,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=o(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}u(gHe,"asListOptions");const Rce=class Rce{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;(i=(n=this.delegate).setDynamicHeight)===null||i===void 0||i.call(n,e.element,t)}};u(Rce,"ComposedTreeDelegate");let sC=Rce;var oC;(function(o){o.None="none",o.OnHover="onHover",o.Always="always"})(oC||(oC={}));const Pce=class Pce{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new ie,this.onDidChange=Ce.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}};u(Pce,"EventCollection");let bU=Pce;const hy=class hy{constructor(e,t,n,i,s,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=hy.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=G.None,this.disposables=new ie,this.templateId=e.templateId,this.updateOptions(r),Ce.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Rs(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,i]of this.renderedNodes)this.renderTreeElement(n,i)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==oC.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,i]of this.renderedNodes)this._renderIndentGuides(n,i);if(this.indentGuidesDisposable.dispose(),t){const n=new ie;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Q(e,re(".monaco-tl-row")),n=Q(t,re(".monaco-tl-indent")),i=Q(t,re(".monaco-tl-twistie")),s=Q(t,re(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:G.None,templateData:r}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var s,r;n.indentGuidesDisposable.dispose(),(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=hy.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Te.asClassNameArray(ue.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...Te.asClassNameArray(ue.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if($n(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new ie,i=this.modelProvider();for(;;){const s=i.getNodeLocation(e),r=i.getParentNodeLocation(s);if(!r)break;const a=i.getNode(r),l=re(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(He(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const r=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(n.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),wt(this.disposables)}};u(hy,"TreeRenderer");let BI=hy;BI.DefaultIndent=8;const Fce=class Fce{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ie,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?n=r?1:0:uJ(r)?n=iC(r.visibility):n=r,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:fa.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const r of s){const a=r&&r.toString();if(typeof a>"u")return{data:fa.Default,visibility:n};let l;if(this.tree.findMatchType===$g.Contiguous){const d=a.toLowerCase().indexOf(this._lowercasePattern);if(d>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let c=this._lowercasePattern.length;c>0;c--)l.push(d+c-1)}}else l=Ug(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===Qa.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:fa.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){wt(this.disposables)}};u(Fce,"FindFilter");let _U=Fce;var Qa;(function(o){o[o.Highlight=0]="Highlight",o[o.Filter=1]="Filter"})(Qa||(Qa={}));var $g;(function(o){o[o.Fuzzy=0]="Fuzzy",o[o.Contiguous=1]="Contiguous"})($g||($g={}));var _S;let fHe=(_S=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,i,s,r={}){var a,l;this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new V,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new V,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new V,this._onDidChangeOpenState=new V,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ie,this.disposables=new ie,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:Qa.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:$g.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,n,i;const s=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&s?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:m("not found","No elements found.")}):(n=this.widget)===null||n===void 0||n.showMessage({type:2}):(i=this.widget)===null||i===void 0||i.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===Qa.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!fa.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}},u(_S,"FindController"),_S);function lwe(o){let e=Xh.Unknown;return Y4(o.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Xh.Twistie:Y4(o.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Xh.Element:Y4(o.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Xh.Filter),{browserEvent:o.browserEvent,element:o.element?o.element.element:null,target:e}}u(lwe,"asTreeMouseEvent$1");function zk(o,e){e(o),o.children.forEach(t=>zk(t,e))}u(zk,"dfs$1");const Oce=class Oce{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new V,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&jn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),d=u(c=>l.delete(c),"visit");t.forEach(c=>zk(c,d)),this.set([...l.values()]);return}const n=new Set,i=u(l=>n.add(this.identityProvider.getId(l.element).toString()),"deletedNodesVisitor");t.forEach(l=>zk(l,i));const s=new Map,r=u(l=>s.set(this.identityProvider.getId(l.element).toString(),l),"insertedNodesVisitor");e.forEach(l=>zk(l,r));const a=[];for(const l of this.nodes){const d=this.identityProvider.getId(l.element).toString();if(!n.has(d))a.push(l);else{const h=s.get(d);h&&h.visible&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}};u(Oce,"Trait");let i0=Oce;const Hce=class Hce extends UA{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(iTe(e.browserEvent.target)||su(e.browserEvent.target)||kp(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.getNodeLocation(t),a=e.browserEvent.altKey;if(this.tree.setFocus([r]),this.tree.toggleCollapsed(r,a),s&&i){e.browserEvent.isHandledByList=!0;return}}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}};u(Hce,"TreeNodeListMouseController");let vU=Hce;const Vce=class Vce extends vo{constructor(e,t,n,i,s,r,a,l){super(e,t,n,i,l),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new vU(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),i.length>0&&super.setFocus(du([...super.getFocus(),...i])),s.length>0&&super.setSelection(du([...super.getSelection(),...s])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}};u(Vce,"TreeNodeList");let yU=Vce;const Wce=class Wce{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Ce.filter(Ce.map(this.view.onMouseDblClick,lwe),e=>e.target!==Xh.Filter)}get onPointer(){return Ce.map(this.view.onPointer,lwe)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Ce.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:Qa.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:$g.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,i,s={}){var r;this._user=e,this._options=s,this.eventBufferer=new Vy,this.onDidChangeFindOpenState=Ce.None,this.disposables=new ie,this._onWillRefilter=new V,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new V;const a=new sC(n),l=new hD,d=new hD,c=this.disposables.add(new bU(d.event)),h=new rw;this.renderers=i.map(p=>new BI(p,()=>this.model,l.event,c,h,s));for(const p of this.renderers)this.disposables.add(p);let g;s.keyboardNavigationLabelProvider&&(g=new _U(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:g}),this.disposables.add(g)),this.focus=new i0(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new i0(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new i0(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new yU(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},gHe(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),l.input=this.model.onDidChangeCollapseState;const f=Ce.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})},this.disposables);if(f(()=>null,null,this.disposables),d.input=Ce.chain(Ce.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const b of this.focus.getNodes())p.add(b);for(const b of this.selection.getNodes())p.add(b);return[...p.values()]}).event,s.keyboardSupport!==!1){const p=Ce.chain(this.view.onKeyDown).filter(b=>!su(b.target)).map(b=>new Mt(b));p.filter(b=>b.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(b=>b.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(b=>b.keyCode===10).on(this.onSpace,this,this.disposables)}if((!((r=s.findWidgetEnabled)!==null&&r!==void 0)||r)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const p=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new fHe(this,this.model,this.view,g,s.contextViewProvider,p),this.focusNavigationFilter=b=>this.findController.shouldAllowFocus(b),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Ce.None,this.onDidChangeFindMatchType=Ce.None;this.styleElement=Ko(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===oC.Always)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e);for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===oC.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),cu(t)&&((n=this.findController)===null||n===void 0||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const r=this.model.getParentNodeLocation(i);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){wt(this.disposables),this.view.dispose()}};u(Wce,"AbstractTree");let UI=Wce;const Bce=class Bce{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new fU(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=et.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=et.empty(),n){const i=new Set,s=new Set,r=u(l=>{var d;if(l.element===null)return;const c=l;if(i.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();s.add(h),this.nodesByIdentity.set(h,c)}(d=n.onDidCreateNode)===null||d===void 0||d.call(n,c)},"onDidCreateNode"),a=u(l=>{var d;if(l.element===null)return;const c=l;if(i.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();s.has(h)||this.nodesByIdentity.delete(h)}(d=n.onDidDeleteNode)===null||d===void 0||d.call(n,c)},"onDidDeleteNode");this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=et.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),et.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===Ra.Collapsed||t.collapsed===Ra.PreserveOrCollapsed?r=!0:t.collapsed===Ra.Expanded||t.collapsed===Ra.PreserveOrExpanded?r=!1:r=!!t.collapsed,Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children),collapsed:r})}const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===Ra.PreserveOrCollapsed||t.collapsed===Ra.PreserveOrExpanded?s=n.collapsed:t.collapsed===Ra.Collapsed?s=!0:t.collapsed===Ra.Expanded?s=!1:s=!!t.collapsed,Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Cs(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Cs(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Cs(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Cs(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};u(Bce,"ObjectTreeModel");let rC=Bce;function Gk(o){const e=[o.element],t=o.incompressible||!1;return{element:{elements:e,incompressible:t},children:et.map(et.from(o.children),Gk),collapsible:o.collapsible,collapsed:o.collapsed}}u(Gk,"noCompress");function jk(o){const e=[o.element],t=o.incompressible||!1;let n,i;for(;[i,n]=et.consume(et.from(o.children),2),!(i.length!==1||i[0].incompressible);)o=i[0],e.push(o.element);return{element:{elements:e,incompressible:t},children:et.map(et.concat(i,n),jk),collapsible:o.collapsible,collapsed:o.collapsed}}u(jk,"compress");function wU(o,e=0){let t;return e<o.element.elements.length-1?t=[wU(o,e+1)]:t=et.map(et.from(o.children),n=>wU(n,0)),e===0&&o.element.incompressible?{element:o.element.elements[e],children:t,incompressible:!0,collapsible:o.collapsible,collapsed:o.collapsed}:{element:o.element.elements[e],children:t,collapsible:o.collapsible,collapsed:o.collapsed}}u(wU,"_decompress");function dwe(o){return wU(o,0)}u(dwe,"decompress");function RTe(o,e,t){return o.element===e?Object.assign(Object.assign({},o),{children:t}):Object.assign(Object.assign({},o),{children:et.map(et.from(o.children),n=>RTe(n,e,t))})}u(RTe,"splice");const pHe=u(o=>({getId(e){return e.elements.map(t=>o.getId(t).toString()).join("\0")}}),"wrapIdentityProvider"),Uce=class Uce{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new rC(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=et.empty(),n){const i=n.diffIdentityProvider&&pHe(n.diffIdentityProvider);if(e===null){const p=et.map(t,this.enabled?jk:Gk);this._setChildren(null,p,{diffIdentityProvider:i,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Cs(this.user,"Unknown compressed tree node");const r=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),d=dwe(r),c=RTe(d,e,t),h=(this.enabled?jk:Gk)(c),g=n.diffIdentityProvider?(p,b)=>n.diffIdentityProvider.getId(p)===n.diffIdentityProvider.getId(b):void 0;if(jn(h.element.elements,r.element.elements,g)){this._setChildren(s,h.children||et.empty(),{diffIdentityProvider:i,diffDepth:1});return}const f=l.children.map(p=>p===r?h:p);this._setChildren(l.element,f,{diffIdentityProvider:i,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=et.map(n,dwe),s=et.map(i,e?jk:Gk);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,s=u(a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},"onDidCreateNode"),r=u(a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)},"onDidDeleteNode");this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Cs(this.user,`Tree element not found: ${e}`);return t}};u(Uce,"CompressedObjectTreeModel");let CU=Uce;const mHe=u(o=>o[o.length-1],"DefaultElementMapper"),JP=class JP{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new JP(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}};u(JP,"CompressedTreeNodeWrapper");let SU=JP;function bHe(o,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>o.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}u(bHe,"mapList");function _He(o,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(o(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(o(t),n)}}})}u(_He,"mapOptions");const zce=class zce{get onDidSplice(){return Ce.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Ce.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Ce.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||mHe;const i=u(s=>this.elementMapper(s.elements),"compressedNodeUnwrapper");this.nodeMapper=new nC(s=>new SU(i,s)),this.model=new CU(e,bHe(this.nodeMapper,t),_He(i,n))}setChildren(e,t=et.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}};u(zce,"CompressibleObjectTreeModel");let xU=zce;var vHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const Gce=class Gce extends UI{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,i,s={}){super(e,t,n,i,s),this.user=e}setChildren(e,t=et.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new rC(e,t,n)}};u(Gce,"ObjectTree");let aC=Gce;const jce=class jce{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){var s,r,a,l;n.compressedTreeNode?(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,n.compressedTreeNode,t,n.data,i):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};u(jce,"CompressibleRenderer");let zI=jce;vHe([xn],zI.prototype,"compressedTreeNodeProvider",null);function yHe(o,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=o().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}u(yHe,"asObjectTreeOptions$1");const Kce=class Kce extends aC{constructor(e,t,n,i,s={}){const r=u(()=>this,"compressedTreeNodeProvider"),a=i.map(l=>new zI(r,l));super(e,t,n,a,yHe(r,s))}setChildren(e,t=et.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new xU(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};u(Kce,"CompressibleObjectTree");let GI=Kce;var ic=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function AH(o){return Object.assign(Object.assign({},o),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}u(AH,"createAsyncDataTreeNode");function TU(o,e){return e.parent?e.parent===o?!0:TU(o,e.parent):!1}u(TU,"isAncestor");function wHe(o,e){return o===e||TU(o,e)||TU(e,o)}u(wHe,"intersects");const QP=class QP{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new QP(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}};u(QP,"AsyncDataTreeNodeWrapper");let LU=QP;const $ce=class $ce{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Te.asClassNameArray(ue.treeItemLoading)),!0):(t.classList.remove(...Te.asClassNameArray(ue.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};u($ce,"AsyncDataTreeRenderer");let EU=$ce;function cwe(o){return{browserEvent:o.browserEvent,elements:o.elements.map(e=>e.element)}}u(cwe,"asTreeEvent");function uwe(o){return{browserEvent:o.browserEvent,element:o.element&&o.element.element,target:o.target}}u(uwe,"asTreeMouseEvent");const qce=class qce extends zg{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}};u(qce,"AsyncDataTreeElementsDragAndDropData");let kU=qce;function IH(o){return o instanceof zg?new kU(o):o}u(IH,"asAsyncDataTreeDragAndDropData");const Yce=class Yce{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)===null||i===void 0||i.call(n,IH(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(IH(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(IH(e),t&&t.element,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)===null||n===void 0||n.call(t,e)}};u(Yce,"AsyncDataTreeNodeListDragAndDrop");let DU=Yce;function PTe(o){return o&&Object.assign(Object.assign({},o),{collapseByDefault:!0,identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new DU(o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:o.accessibilityProvider&&Object.assign(Object.assign({},o.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:o.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=o.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider.getAriaLevel&&(e=>o.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))}),filter:o.filter&&{filter(e,t){return o.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},o.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof o.expandOnlyOnTwistieClick>"u"?void 0:typeof o.expandOnlyOnTwistieClick!="function"?o.expandOnlyOnTwistieClick:e=>o.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof o.defaultFindVisibility=="number"?o.defaultFindVisibility:typeof o.defaultFindVisibility>"u"?2:o.defaultFindVisibility(e.element)})}u(PTe,"asObjectTreeOptions");function MU(o,e){e(o),o.children.forEach(t=>MU(t,e))}u(MU,"dfs");const Xce=class Xce{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Ce.map(this.tree.onDidChangeFocus,cwe)}get onDidChangeSelection(){return Ce.map(this.tree.onDidChangeSelection,cwe)}get onMouseDblClick(){return Ce.map(this.tree.onMouseDblClick,uwe)}get onPointer(){return Ce.map(this.tree.onPointer,uwe)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,i,s,r={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new V,this._onDidChangeNodeSlowState=new V,this.nodeMapper=new nC(a=>new LU(a)),this.disposables=new ie,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,n,i,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=AH({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,i,s){const r=new sC(n),a=i.map(d=>new EU(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=PTe(s)||{};return new aC(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return ic(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return ic(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Cs(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Ce.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,i,s),n)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return ic(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Cs(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Ce.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Ce.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Ce.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Cs(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return ic(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return ic(this,void 0,void 0,function*(){let i;if(this.subTreeRefreshPromises.forEach((s,r)=>{!i&&wHe(r,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return ic(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield D3.settled(s.map(r=>this.doRefreshSubTree(r,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return ic(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(et.empty());else{const s=this.doGetChildren(e);if(Dve(s))i=Promise.resolve(s);else{const r=fu(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=s.finally(()=>r.cancel())}}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Ca(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return Dve(n)?this.processChildren(n):(t=Fn(()=>ic(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Be))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const r=new Map,a=new Map;for(const c of e.children)if(r.set(c.element,c),this.identityProvider){const h=this.tree.isCollapsed(c);a.set(c.id,{node:c,collapsed:h})}const l=[],d=s.map(c=>{const h=!!this.dataSource.hasChildren(c);if(!this.identityProvider){const b=AH({element:c,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(c)&&(b.collapsedByDefault=!1,l.push(b)),b}const g=this.identityProvider.getId(c).toString(),f=a.get(g);if(f){const b=f.node;return r.delete(b.element),this.nodes.delete(b.element),this.nodes.set(c,b),b.element=c,b.hasChildren=h,n?f.collapsed?(b.children.forEach(_=>MU(_,v=>this.nodes.delete(v.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):h&&this.collapseByDefault&&!this.collapseByDefault(c)&&(b.collapsedByDefault=!1,l.push(b)),b}const p=AH({element:c,parent:e,id:g,hasChildren:h});return i&&i.viewState.focus&&i.viewState.focus.indexOf(g)>-1&&i.focus.push(p),i&&i.viewState.selection&&i.viewState.selection.indexOf(g)>-1&&i.selection.push(p),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(g)>-1?l.push(p):h&&this.collapseByDefault&&!this.collapseByDefault(c)&&(p.collapsedByDefault=!1,l.push(p)),p});for(const c of r.values())MU(c,h=>this.nodes.delete(h.element));for(const c of d)this.nodes.set(c.element,c);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&l.length===0&&(d[0].collapsedByDefault=!1,l.push(d[0])),l}render(e,t,n){const i=e.children.map(r=>this.asTreeElement(r,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?et.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}};u(Xce,"AsyncDataTree");let jI=Xce;const eF=class eF{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new eF(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}};u(eF,"CompressibleAsyncDataTreeNodeWrapper");let AU=eF;const Zce=class Zce{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Te.asClassNameArray(ue.treeItemLoading)),!0):(t.classList.remove(...Te.asClassNameArray(ue.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var s,r;(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=wt(this.disposables)}};u(Zce,"CompressibleAsyncDataTreeRenderer");let IU=Zce;function CHe(o){const e=o&&PTe(o);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}u(CHe,"asCompressibleObjectTreeOptions");const Jce=class Jce extends jI{constructor(e,t,n,i,s,r,a={}){super(e,t,n,s,r,a),this.compressionDelegate=i,this.compressibleNodeMapper=new nC(l=>new AU(l)),this.filter=a.filter}createTree(e,t,n,i,s){const r=new sC(n),a=i.map(d=>new IU(d,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=CHe(s)||{};return new GI(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=u(g=>this.identityProvider.getId(g).toString(),"getId"),i=u(g=>{const f=new Set;for(const p of g){const b=this.tree.getCompressedTreeNode(p===this.root?null:p);if(b.element)for(const _ of b.element.elements)f.add(n(_.element))}return f},"getUncompressedIds"),s=i(this.tree.getSelection()),r=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const d=this.getFocus();let c=!1;const h=u(g=>{const f=g.element;if(f)for(let p=0;p<f.elements.length;p++){const b=n(f.elements[p].element),_=f.elements[f.elements.length-1].element;s.has(b)&&a.indexOf(_)===-1&&(a.push(_),l=!0),r.has(b)&&d.indexOf(_)===-1&&(d.push(_),c=!0)}g.children.forEach(h)},"visit");h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),c&&this.setFocus(d)}processChildren(e){return this.filter&&(e=et.filter(e,t=>{const n=this.filter.filter(t,1),i=SHe(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}};u(Jce,"CompressibleAsyncDataTree");let NU=Jce;function SHe(o){return typeof o=="boolean"?o?1:0:uJ(o)?iC(o.visibility):iC(o)}u(SHe,"getVisibility");const Qce=class Qce extends UI{constructor(e,t,n,i,s,r={}){super(e,t,n,i,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,n){return new rC(e,t,n)}};u(Qce,"DataTree");let RU=Qce;new _e("isMac",ot,m("isMac","Whether the operating system is macOS"));new _e("isLinux",qi,m("isLinux","Whether the operating system is Linux"));const BO=new _e("isWindows",Si,m("isWindows","Whether the operating system is Windows")),FTe=new _e("isWeb",Ku,m("isWeb","Whether the platform is a web browser"));new _e("isMacNative",ot&&!Ku,m("isMacNative","Whether the operating system is macOS on a non-browser platform"));new _e("isIOS",Cr,m("isIOS","Whether the operating system is iOS"));new _e("isMobile",nDe,m("isMobile","Whether the platform is a mobile web browser"));new _e("isDevelopment",!1,!0);new _e("productQualityType","",m("productQualityType","Quality type of VS Code"));const OTe="inputFocus";new _e(OTe,!1,m("inputFocus","Whether keyboard focus is inside an input box"));var Yd=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wt=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Qo=nt("listService"),eue=class eue{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new ie,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new zA(Ko(),"").style(kf)),this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),yr(e.onDidFocus(()=>this.setLastFocusedList(e)),He(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};u(eue,"ListService");let PU=eue;const lC=new _e("listScrollAtBoundary","none");ne.or(lC.isEqualTo("top"),lC.isEqualTo("both"));ne.or(lC.isEqualTo("bottom"),lC.isEqualTo("both"));const HTe=new _e("listFocus",!0),UO=new _e("listSupportsMultiselect",!0),VTe=ne.and(HTe,ne.not(OTe)),hJ=new _e("listHasSelectionOrFocus",!1),gJ=new _e("listDoubleSelection",!1),fJ=new _e("listMultiSelection",!1),zO=new _e("listSelectionNavigation",!1),xHe=new _e("listSupportsFind",!0),pJ=new _e("treeElementCanCollapse",!1),THe=new _e("treeElementHasParent",!1),mJ=new _e("treeElementCanExpand",!1),LHe=new _e("treeElementHasChild",!1),EHe=new _e("treeFindOpen",!1),WTe="listTypeNavigationMode",BTe="listAutomaticKeyboardNavigation";function GO(o,e){const t=o.createScoped(e.getHTMLElement());return HTe.bindTo(t),t}u(GO,"createScopedContextKeyService");function jO(o,e){const t=lC.bindTo(o),n=u(()=>{const i=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;i&&s?t.set("both"):i?t.set("top"):s?t.set("bottom"):t.set("none")},"update");return n(),e.onDidScroll(n)}u(jO,"createScrollObserver");const Df="workbench.list.multiSelectModifier",Kk="workbench.list.openMode",Wo="workbench.list.horizontalScrolling",bJ="workbench.list.defaultFindMode",_J="workbench.list.typeNavigationMode",KI="workbench.list.keyboardNavigation",_a="workbench.list.scrollByPage",vJ="workbench.list.defaultFindMatchType",dC="workbench.tree.indent",$I="workbench.tree.renderIndentGuides",va="workbench.list.smoothScrolling",ml="workbench.list.mouseWheelScrollSensitivity",bl="workbench.list.fastScrollSensitivity",qI="workbench.tree.expandMode";function _l(o){return o.getValue(Df)==="alt"}u(_l,"useAltAsMultipleSelectionModifier");const tue=class tue extends G{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=_l(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Df)&&(this.useAltAsMultipleSelectionModifier=_l(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:sTe(e)}isSelectionRangeChangeEvent(e){return oTe(e)}};u(tue,"MultipleSelectionController");let FU=tue;function KO(o,e){var t;const n=o.get(at),i=o.get(At),s=new ie;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return i.mightProducePrintableCharacter(a)}},smoothScrolling:!!n.getValue(va),mouseWheelScrollSensitivity:n.getValue(ml),fastScrollSensitivity:n.getValue(bl),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new FU(n)),keyboardNavigationEventFilter:kHe(i),scrollByPage:!!n.getValue(_a)}),s]}u(KO,"toWorkbenchListOptions");var vS;let OU=(vS=class extends vo{constructor(e,t,n,i,s,r,a,l,d){const c=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Wo),[h,g]=d.invokeFunction(KO,s);super(e,t,n,i,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:c})),this.disposables.add(g),this.contextKeyService=GO(r,this),this.disposables.add(jO(this.contextKeyService,this)),this.listSupportsMultiSelect=UO.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),zO.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.listDoubleSelection=gJ.bindTo(this.contextKeyService),this.listMultiSelection=fJ.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=_l(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||b.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||b.length>0)})),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(Df)&&(this._useAltAsMultipleSelectionModifier=_l(l));let b={};if(p.affectsConfiguration(Wo)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Wo);b=Object.assign(Object.assign({},b),{horizontalScrolling:_})}if(p.affectsConfiguration(_a)){const _=!!l.getValue(_a);b=Object.assign(Object.assign({},b),{scrollByPage:_})}if(p.affectsConfiguration(va)){const _=!!l.getValue(va);b=Object.assign(Object.assign({},b),{smoothScrolling:_})}if(p.affectsConfiguration(ml)){const _=l.getValue(ml);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:_})}if(p.affectsConfiguration(bl)){const _=l.getValue(bl);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:_})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new YI(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?T_(e):kf)}},u(vS,"WorkbenchList"),vS);OU=Yd([Wt(5,Re),Wt(6,Qo),Wt(7,at),Wt(8,Pe)],OU);var yS;let hwe=(yS=class extends lU{constructor(e,t,n,i,s,r,a,l,d){const c=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Wo),[h,g]=d.invokeFunction(KO,s);super(e,t,n,i,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:c})),this.disposables=new ie,this.disposables.add(g),this.contextKeyService=GO(r,this),this.disposables.add(jO(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=UO.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),zO.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=_l(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(Df)&&(this._useAltAsMultipleSelectionModifier=_l(l));let b={};if(p.affectsConfiguration(Wo)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Wo);b=Object.assign(Object.assign({},b),{horizontalScrolling:_})}if(p.affectsConfiguration(_a)){const _=!!l.getValue(_a);b=Object.assign(Object.assign({},b),{scrollByPage:_})}if(p.affectsConfiguration(va)){const _=!!l.getValue(va);b=Object.assign(Object.assign({},b),{smoothScrolling:_})}if(p.affectsConfiguration(ml)){const _=l.getValue(ml);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:_})}if(p.affectsConfiguration(bl)){const _=l.getValue(bl);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:_})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new YI(this,Object.assign({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?T_(e):kf)}dispose(){this.disposables.dispose(),super.dispose()}},u(yS,"WorkbenchPagedList"),yS);hwe=Yd([Wt(5,Re),Wt(6,Qo),Wt(7,at),Wt(8,Pe)],hwe);var wS;let gwe=(wS=class extends PI{constructor(e,t,n,i,s,r,a,l,d,c){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!d.getValue(Wo),[g,f]=c.invokeFunction(KO,r);super(e,t,n,i,s,Object.assign(Object.assign({keyboardSupport:!1},g),{horizontalScrolling:h})),this.disposables.add(f),this.contextKeyService=GO(a,this),this.disposables.add(jO(this.contextKeyService,this)),this.listSupportsMultiSelect=UO.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),zO.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.listDoubleSelection=gJ.bindTo(this.contextKeyService),this.listMultiSelection=fJ.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=_l(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||_.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||_.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(Df)&&(this._useAltAsMultipleSelectionModifier=_l(d));let _={};if(b.affectsConfiguration(Wo)&&this.horizontalScrolling===void 0){const v=!!d.getValue(Wo);_=Object.assign(Object.assign({},_),{horizontalScrolling:v})}if(b.affectsConfiguration(_a)){const v=!!d.getValue(_a);_=Object.assign(Object.assign({},_),{scrollByPage:v})}if(b.affectsConfiguration(va)){const v=!!d.getValue(va);_=Object.assign(Object.assign({},_),{smoothScrolling:v})}if(b.affectsConfiguration(ml)){const v=d.getValue(ml);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:v})}if(b.affectsConfiguration(bl)){const v=d.getValue(bl);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:v})}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new HU(this,Object.assign({configurationService:d},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?T_(e):kf)}dispose(){this.disposables.dispose(),super.dispose()}},u(wS,"WorkbenchTable"),wS);gwe=Yd([Wt(6,Re),Wt(7,Qo),Wt(8,at),Wt(9,Pe)],gwe);const nue=class nue extends G{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new V),this.onDidOpen=this._onDidOpen.event,this._register(Ce.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(Kk)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(Kk)&&(this.openOnSingleClick=t?.configurationService.getValue(Kk)!=="doubleClick")}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,r=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}};u(nue,"ResourceNavigator");let cC=nue;const iue=class iue extends cC{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}};u(iue,"ListResourceNavigator");let YI=iue;const sue=class sue extends cC{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}};u(sue,"TableResourceNavigator");let HU=sue;const oue=class oue extends cC{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}};u(oue,"TreeResourceNavigator");let VU=oue;function kHe(o){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=o.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}u(kHe,"createKeyboardNavigationEventFilter");var CS;let fwe=(CS=class extends aC{constructor(e,t,n,i,s,r,a,l,d){const{options:c,getTypeNavigationMode:h,disposable:g}=r.invokeFunction(rE,s);super(e,t,n,i,c),this.disposables.add(g),this.internals=new qg(this,s,h,s.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},u(CS,"WorkbenchObjectTree"),CS);fwe=Yd([Wt(5,Pe),Wt(6,Re),Wt(7,Qo),Wt(8,at)],fwe);var SS;let pwe=(SS=class extends GI{constructor(e,t,n,i,s,r,a,l,d){const{options:c,getTypeNavigationMode:h,disposable:g}=r.invokeFunction(rE,s);super(e,t,n,i,c),this.disposables.add(g),this.internals=new qg(this,s,h,s.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},u(SS,"WorkbenchCompressibleObjectTree"),SS);pwe=Yd([Wt(5,Pe),Wt(6,Re),Wt(7,Qo),Wt(8,at)],pwe);var xS;let mwe=(xS=class extends RU{constructor(e,t,n,i,s,r,a,l,d,c){const{options:h,getTypeNavigationMode:g,disposable:f}=a.invokeFunction(rE,r);super(e,t,n,i,s,h),this.disposables.add(f),this.internals=new qg(this,r,g,r.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},u(xS,"WorkbenchDataTree"),xS);mwe=Yd([Wt(6,Pe),Wt(7,Re),Wt(8,Qo),Wt(9,at)],mwe);var TS;let WU=(TS=class extends jI{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,s,r,a,l,d,c){const{options:h,getTypeNavigationMode:g,disposable:f}=a.invokeFunction(rE,r);super(e,t,n,i,s,h),this.disposables.add(f),this.internals=new qg(this,r,g,r.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},u(TS,"WorkbenchAsyncDataTree"),TS);WU=Yd([Wt(6,Pe),Wt(7,Re),Wt(8,Qo),Wt(9,at)],WU);var LS;let bwe=(LS=class extends NU{constructor(e,t,n,i,s,r,a,l,d,c,h){const{options:g,getTypeNavigationMode:f,disposable:p}=l.invokeFunction(rE,a);super(e,t,n,i,s,r,g),this.disposables.add(p),this.internals=new qg(this,a,f,a.overrideStyles,d,c,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},u(LS,"WorkbenchCompressibleAsyncDataTree"),LS);bwe=Yd([Wt(7,Pe),Wt(8,Re),Wt(9,Qo),Wt(10,at)],bwe);function UTe(o){const e=o.getValue(bJ);if(e==="highlight")return Qa.Highlight;if(e==="filter")return Qa.Filter;const t=o.getValue(KI);if(t==="simple"||t==="highlight")return Qa.Highlight;if(t==="filter")return Qa.Filter}u(UTe,"getDefaultTreeFindMode");function zTe(o){const e=o.getValue(vJ);if(e==="fuzzy")return $g.Fuzzy;if(e==="contiguous")return $g.Contiguous}u(zTe,"getDefaultTreeFindMatchType");function rE(o,e){var t;const n=o.get(at),i=o.get(qd),s=o.get(Re),r=o.get(Pe),a=u(()=>{const f=s.getContextKeyValue(WTe);if(f==="automatic")return ja.Automatic;if(f==="trigger"||s.getContextKeyValue(BTe)===!1)return ja.Trigger;const b=n.getValue(_J);if(b==="automatic")return ja.Automatic;if(b==="trigger")return ja.Trigger},"getTypeNavigationMode"),l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(Wo),[d,c]=r.invokeFunction(KO,e),h=e.paddingBottom,g=e.renderIndentGuides!==void 0?e.renderIndentGuides:n.getValue($I);return{getTypeNavigationMode:a,disposable:c,options:Object.assign(Object.assign({keyboardSupport:!1},d),{indent:typeof n.getValue(dC)=="number"?n.getValue(dC):void 0,renderIndentGuides:g,smoothScrolling:!!n.getValue(va),defaultFindMode:UTe(n),defaultFindMatchType:zTe(n),horizontalScrolling:l,scrollByPage:!!n.getValue(_a),paddingBottom:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:n.getValue(qI)==="doubleClick",contextViewProvider:i,findWidgetStyles:q4e})}}u(rE,"workbenchTreeDataPreamble");var ES;let qg=(ES=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,s,r,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=GO(s,e),this.disposables.push(jO(this.contextKeyService,e)),this.listSupportsMultiSelect=UO.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),zO.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=xHe.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=hJ.bindTo(this.contextKeyService),this.hasDoubleSelection=gJ.bindTo(this.contextKeyService),this.hasMultiSelection=fJ.bindTo(this.contextKeyService),this.treeElementCanCollapse=pJ.bindTo(this.contextKeyService),this.treeElementHasParent=THe.bindTo(this.contextKeyService),this.treeElementCanExpand=mJ.bindTo(this.contextKeyService),this.treeElementHasChild=LHe.bindTo(this.contextKeyService),this.treeFindOpen=EHe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=_l(a),this.updateStyleOverrides(i);const c=u(()=>{const g=e.getFocus()[0];if(!g)return;const f=e.getNode(g);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(g)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(g))},"updateCollapseContextKeys"),h=new Set;h.add(WTe),h.add(BTe),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const g=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(g.length>0||f.length>0),this.hasMultiSelection.set(g.length>1),this.hasDoubleSelection.set(g.length===2)})}),e.onDidChangeFocus(()=>{const g=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(g.length>0||f.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(g=>this.treeFindOpen.set(g)),a.onDidChangeConfiguration(g=>{let f={};if(g.affectsConfiguration(Df)&&(this._useAltAsMultipleSelectionModifier=_l(a)),g.affectsConfiguration(dC)){const p=a.getValue(dC);f=Object.assign(Object.assign({},f),{indent:p})}if(g.affectsConfiguration($I)&&t.renderIndentGuides===void 0){const p=a.getValue($I);f=Object.assign(Object.assign({},f),{renderIndentGuides:p})}if(g.affectsConfiguration(va)){const p=!!a.getValue(va);f=Object.assign(Object.assign({},f),{smoothScrolling:p})}if(g.affectsConfiguration(bJ)||g.affectsConfiguration(KI)){const p=UTe(a);f=Object.assign(Object.assign({},f),{defaultFindMode:p})}if(g.affectsConfiguration(_J)||g.affectsConfiguration(KI)){const p=n();f=Object.assign(Object.assign({},f),{typeNavigationMode:p})}if(g.affectsConfiguration(vJ)){const p=zTe(a);f=Object.assign(Object.assign({},f),{defaultFindMatchType:p})}if(g.affectsConfiguration(Wo)&&t.horizontalScrolling===void 0){const p=!!a.getValue(Wo);f=Object.assign(Object.assign({},f),{horizontalScrolling:p})}if(g.affectsConfiguration(_a)){const p=!!a.getValue(_a);f=Object.assign(Object.assign({},f),{scrollByPage:p})}if(g.affectsConfiguration(qI)&&t.expandOnlyOnTwistieClick===void 0&&(f=Object.assign(Object.assign({},f),{expandOnlyOnTwistieClick:a.getValue(qI)==="doubleClick"})),g.affectsConfiguration(ml)){const p=a.getValue(ml);f=Object.assign(Object.assign({},f),{mouseWheelScrollSensitivity:p})}if(g.affectsConfiguration(bl)){const p=a.getValue(bl);f=Object.assign(Object.assign({},f),{fastScrollSensitivity:p})}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(g=>{g.affectsSome(h)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new VU(e,Object.assign({configurationService:a},t)),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?T_(e):kf)}dispose(){this.disposables=wt(this.disposables)}},u(ES,"WorkbenchTreeInternals"),ES);qg=Yd([Wt(4,Re),Wt(5,Qo),Wt(6,at)],qg);const DHe=on.as(kl.Configuration);DHe.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Df]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Kk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Wo]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[_a]:{type:"boolean",default:!1,description:m("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[dC]:{type:"number",default:8,minimum:4,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[$I]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[va]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ml]:{type:"number",default:1,markdownDescription:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[bl]:{type:"number",default:5,markdownDescription:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[bJ]:{type:"string",enum:["highlight","filter"],enumDescriptions:[m("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),m("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:m("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[KI]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:m("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[vJ]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[m("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),m("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:m("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[qI]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[_J]:{type:"string",enum:["automatic","trigger"],default:"automatic",description:m("typeNavigationMode","Controls the how type navigation works in lists and trees in the workbench. When set to 'trigger', type navigation begins once the 'list.triggerTypeNavigation' command is run.")}}});var BU;(function(o){o[o.PRESERVE=0]="PRESERVE",o[o.LAST=1]="LAST"})(BU||(BU={}));const Mf={Quickaccess:"workbench.contributions.quickaccess"},rue=class rue{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),He(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return ol([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};u(rue,"QuickAccessRegistry");let UU=rue;on.add(Mf.Quickaccess,new UU);const MHe={ctrlCmd:!1,alt:!1};var uC;(function(o){o[o.Blur=1]="Blur",o[o.Gesture=2]="Gesture",o[o.Other=3]="Other"})(uC||(uC={}));var Qr;(function(o){o[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST"})(Qr||(Qr={}));const xa=nt("quickInputService");var AHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_we=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},kS;let zU=(kS=class extends G{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=on.as(Mf.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a?.descriptor;if(a&&r&&l===r){e!==r.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,n);return}if(r&&!n?.preserveValue){let f;if(a&&l&&l!==r){const p=a.value.substr(l.prefix.length);p&&(f=`${r.prefix}${p}`)}if(!f){const p=s?.defaultFilterValue;p===BU.LAST?f=this.lastAcceptedPickerValues.get(r):typeof p=="string"&&(f=`${r.prefix}${p}`)}typeof f=="string"&&(e=f)}const d=new ie,c=d.add(this.quickInputService.createQuickPick());c.value=e,this.adjustValueSelection(c,r,n),c.placeholder=r?.placeholder,c.quickNavigate=n?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!a,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(c.itemActivation=(i=n?.itemActivation)!==null&&i!==void 0?i:Qr.SECOND),c.contextKey=r?.contextKey,c.filterValue=f=>f.substring(r?r.prefix.length:0);let h;t&&(h=new sb,d.add(ll(c.onWillAccept)(f=>{f.veto(),c.hide()}))),d.add(this.registerPickerListeners(c,s,r,e,n?.providerOptions));const g=d.add(new En);if(s&&d.add(s.provide(c,g.token,n?.providerOptions)),ll(c.onDidHide)(()=>{c.selectedItems.length===0&&g.cancel(),d.dispose(),h?.complete(c.selectedItems.slice(0))}),c.show(),t)return h?.p}adjustValueSelection(e,t,n){var i;let s;n?.preserveValue?s=[e.value.length,e.value.length]:s=[(i=t?.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i,s){const r=new ie,a=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return r.add(He(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[d]=this.getOrInstantiateProvider(l);d!==t?this.show(l,{preserveValue:!0,providerOptions:s}):a.value=l})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}},u(kS,"QuickAccessController"),kS);zU=AHe([_we(0,xa),_we(1,Pe)],zU);K.white.toString(),K.white.toString();const aue=class aue extends G{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new V),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),e.appendChild(this._element),this._register(oi.addTarget(this._element)),[pe.CLICK,Nt.Tap].forEach(s=>{this._register(q(this._element,s,r=>{if(!this.enabled){Ke.stop(r);return}this._onDidClick.fire(r)}))}),this._register(q(this._element,pe.KEY_DOWN,s=>{const r=new Mt(s);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(s),a=!0):r.equals(9)&&(this._element.blur(),a=!0),a&&Ke.stop(r,!0)})),this._register(q(this._element,pe.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(q(this._element,pe.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(ul(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of iu(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||nu(this._label)&&nu(e)&&zFe(this._label,e))return;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(nu(e)){const i=HO(e,{inline:!0});i.dispose();const s=(t=i.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(s){const r=OSe(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=r}else wi(n)}else this.options.supportIcons?wi(n,...this.getContentElements(e)):n.textContent=e;typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=nOe(e)),this._label=e}get label(){return this._label}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}};u(aue,"Button");let hC=aue;const lue=class lue{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=Q(e,re(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=Sg(this.countFormat,this.count),this.element.title=Sg(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}};u(lue,"CountBadge");let gC=lue;const vwe="done",ywe="active",NH="infinite",RH="infinite-long-running",wwe="discrete",tF=class tF extends G{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new Et(()=>Os(this.element),0)),this.longRunningScheduler=this._register(new Et(()=>this.infiniteLongRunning(),tF.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(ywe,NH,RH,wwe),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(vwe),this.element.classList.contains(NH)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(wwe,vwe,RH),this.element.classList.add(ywe,NH),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(RH)}getContainer(){return this.element}};u(tF,"ProgressBar");let XI=tF;XI.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const IHe=re,due=class due extends G{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=s=>q(this.findInput.inputBox.inputElement,pe.KEY_DOWN,r=>{s(new Mt(r))}),this.onMouseDown=s=>q(this.findInput.inputBox.inputElement,pe.MOUSE_DOWN,r=>{s(new Bs(r))}),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=Q(this.parent,IHe(".quick-input-box")),this.findInput=this._register(new WI(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const i=this.findInput.inputBox.inputElement;i.role="combobox",i.ariaHasPopup="menu",i.ariaAutoComplete="list",i.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===mn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===mn.Info?1:e===mn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===mn.Info?1:e===mn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}};u(due,"QuickInputBox");let GU=due;const nF=class nF{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=Q(e,re("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=nF.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&uo(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const r=this.text.substring(t,n.start);this.supportIcons?e.push(...iu(r)):e.push(r),t=n.start}const i=this.text.substring(t,n.end),s=re("span.highlight",void 0,...this.supportIcons?iu(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...iu(n)):e.push(n)}wi(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,r)=>{i=s===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=i),a.end>=r&&(a.end+=i));return n+=i,"⏎"})}};u(nF,"HighlightedLabel");let ou=nF;const cue=class cue{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}};u(cue,"FastLabelNode");let s0=cue;const uue=class uue extends G{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new s0(Q(e,re(".monaco-icon-label")))),this.labelContainer=Q(this.domNode.element,re(".monaco-icon-label-container"));const n=Q(this.labelContainer,re("span.monaco-icon-name-container"));t?.supportHighlights||t?.supportIcons?this.nameNode=new KU(n,!!t.supportIcons):this.nameNode=new jU(n),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"],s=["monaco-icon-label-container"];let r="";if(n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough"),n.disabledCommand&&s.push("disabled"),n.title&&(r+=n.title)),this.domNode.className=i.join(" "),this.domNode.element.setAttribute("aria-label",r),this.labelContainer.className=s.join(" "),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const a=this.getOrCreateDescriptionNode();a instanceof ou?(a.set(t||"",n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines),this.setupHover(a.element,n?.descriptionTitle)):(a.textContent=t&&n?.labelEscapeNewLines?ou.escapeNewLines(t,[]):t||"",this.setupHover(a.element,n?.descriptionTitle||""),a.empty=!t)}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)KFe(e,t);else{const i=tTe(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new s0(Q(this.labelContainer,re("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=new ou(Q(t.element,re("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new s0(Q(t.element,re("span.label-description"))))}return this.descriptionNode}};u(uue,"IconLabel");let Pb=uue;const hue=class hue{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&uo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Q(this.container,re("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=t?.domId&&`${t?.domId}_${n}`;Q(this.container,re("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&Q(this.container,re("span.label-separator",void 0,t?.separator||"/"))}}}};u(hue,"Label");let jU=hue;function NHe(o,e,t){if(!t)return;let n=0;return o.map(i=>{const s={start:n,end:n+i.length},r=t.map(a=>Li.intersect(s,a)).filter(a=>!Li.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,r})}u(NHe,"splitMatches");const gue=class gue{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&uo(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new ou(Q(this.container,re("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",i=NHe(e,n,t?.matches);for(let s=0;s<e.length;s++){const r=e[s],a=i?i[s]:void 0,l=t?.domId&&`${t?.domId}_${s}`,d=re("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new ou(Q(this.container,d),{supportIcons:this.supportIcons}).set(r,a,void 0,t?.labelEscapeNewLines),s<e.length-1&&Q(d,re("span.label-separator",void 0,n))}}}};u(gue,"LabelWithHighlights");let KU=gue;const YE=re,RHe={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0},iF=class iF{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const i=this.options.keybindingLabelForeground;this.domNode=Q(e,YE(".monaco-keybinding")),i&&(this.domNode.style.color=i),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&iF.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let i=1;i<t.length;i++)Q(this.domNode,YE("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[i],this.matches?this.matches.chordPart:null);const n=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;n!==void 0?this.domNode.title=n:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){$n(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const i=lJ.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!n?.ctrlKey,i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!n?.shiftKey,i.separator),t.altKey&&this.renderKey(e,i.altKey,!!n?.altKey,i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!n?.metaKey,i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!n?.keyCode,"")}renderKey(e,t,n,i){Q(e,this.createKeyElement(t,n?".highlight":"")),i&&Q(e,YE("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){Q(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){const n=YE("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&uo(e.firstPart,t.firstPart)&&uo(e.chordPart,t.chordPart)}};u(iF,"KeybindingLabel");let fC=iF;const Cwe=new dl(()=>{const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}});function PHe(o,e,t=!1){const n=o||"",i=e||"",s=Cwe.value.collator.compare(n,i);return Cwe.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}u(PHe,"compareFileNames");function FHe(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=OHe(o,e,t);if(s)return s;const r=n.endsWith(t),a=i.endsWith(t);if(r!==a)return r?-1:1;const l=PHe(n,i);return l!==0?l:n.localeCompare(i)}u(FHe,"compareAnything");function OHe(o,e,t){const n=o.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),r=i.startsWith(t);if(s!==r)return s?-1:1;if(s&&r){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}u(OHe,"compareByPrefix");var HHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const fue=class fue{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}};u(fue,"LinkedText");let ZI=fue;HHe([xn],ZI.prototype,"toString",null);const VHe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function WHe(o){const e=[];let t=0,n;for(;n=VHe.exec(o);){n.index-t>0&&e.push(o.substring(t,n.index));const[,i,s,,r]=n;r?e.push({label:i,href:s,title:r}):e.push({label:i,href:s}),t=n.index+n[0].length}return t<o.length&&e.push(o.substring(t)),new ZI(e)}u(WHe,"parseLinkedText");const PH={},BHe=new qw("quick-input-button-icon-");function $U(o){if(!o)return;let e;const t=o.dark.toString();return PH[t]?e=PH[t]:(e=BHe.nextId(),M9(`.${e}, .hc-light .${e}`,`background-image: ${bu(o.light||o.dark)}`),M9(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${bu(o.dark)}`),PH[t]=e),e}u($U,"getIconClass");function UHe(o,e,t){wi(e);const n=WHe(o);let i=0;for(const s of n.nodes)if(typeof s=="string")e.append(...iu(s));else{let r=s.title;!r&&s.href.startsWith("command:")?r=m("executeCommand","Click to execute command '{0}'",s.href.substring(8)):r||(r=s.href);const a=re("a",{href:s.href,title:r,tabIndex:i++},s.label);a.style.textDecoration="underline";const l=u(f=>{jIe(f)&&Ke.stop(f,!0),t.callback(s.href)},"handleOpen"),d=t.disposables.add(new Qe(a,pe.CLICK)).event,c=t.disposables.add(new Qe(a,pe.KEY_DOWN)).event,h=t.disposables.add(Ce.chain(c)).filter(f=>{const p=new Mt(f);return p.equals(10)||p.equals(3)}).event;t.disposables.add(oi.addTarget(a));const g=t.disposables.add(new Qe(a,Nt.Tap)).event;Ce.any(d,g,h)(l,null,t.disposables),e.appendChild(a)}}u(UHe,"renderQuickInputDescription");var GTe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Swe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Ur=re,pue=class pue{constructor(e,t,n,i,s,r,a){var l,d,c;this._checked=!1,this._hidden=!1,this.hasCheckbox=i,this.index=n,this.fireButtonTriggered=s,this.fireSeparatorButtonTriggered=r,this._onChecked=a,this.onChecked=i?Ce.map(Ce.filter(this._onChecked.event,h=>h.listElement===this),h=>h.checked):Ce.None,e.type==="separator"?this._separator=e:(this.item=e,t&&t.type==="separator"&&!t.buttons&&(this._separator=t),this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=(l=this.item.highlights)===null||l===void 0?void 0:l.label,this._descriptionHighlights=(d=this.item.highlights)===null||d===void 0?void 0:d.description,this._detailHighlights=(c=this.item.highlights)===null||c===void 0?void 0:c.detail,this.saneTooltip=this.item.tooltip),this._init=new dl(()=>{var h;const g=(h=e.label)!==null&&h!==void 0?h:"",f=_v(g).text.trim(),p=e.ariaLabel||[g,this.saneDescription,this.saneDetail].map(b=>UFe(b)).filter(b=>!!b).join(", ");return{saneLabel:g,saneSortLabel:f,saneAriaLabel:p}})}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({listElement:this,checked:e}))}get separator(){return this._separator}set separator(e){this._separator=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}};u(pue,"ListElement");let qU=pue;const sF=class sF{constructor(e){this.themeService=e}get templateId(){return sF.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Q(e,Ur(".quick-input-list-entry"));const n=Q(t.entry,Ur("label.quick-input-list-label"));t.toDisposeTemplate.push(Jt(n,pe.CLICK,d=>{t.checkbox.offsetParent||d.preventDefault()})),t.checkbox=Q(n,Ur("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Jt(t.checkbox,pe.CHANGE,d=>{t.element.checked=t.checkbox.checked}));const i=Q(n,Ur(".quick-input-list-rows")),s=Q(i,Ur(".quick-input-list-row")),r=Q(i,Ur(".quick-input-list-row"));t.label=new Pb(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0}),t.icon=qSe(t.label.element,Ur(".quick-input-list-icon"));const a=Q(s,Ur(".quick-input-list-entry-keybinding"));t.keybinding=new fC(a,oo);const l=Q(r,Ur(".quick-input-list-label-meta"));return t.detail=new Pb(l,{supportHighlights:!0,supportIcons:!0}),t.separator=Q(t.entry,Ur(".quick-input-list-separator")),t.actionBar=new Ls(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){var i,s,r,a;n.element=e,e.element=(i=n.entry)!==null&&i!==void 0?i:void 0;const l=e.item?e.item:e.separator;n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(p=>n.checkbox.checked=p));const{labelHighlights:d,descriptionHighlights:c,detailHighlights:h}=e;if(!((s=e.item)===null||s===void 0)&&s.iconPath){const p=mb(this.themeService.getColorTheme().type)?e.item.iconPath.dark:(r=e.item.iconPath.light)!==null&&r!==void 0?r:e.item.iconPath.dark,b=Ae.revive(p);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=bu(b)}else n.icon.style.backgroundImage="",n.icon.className=!((a=e.item)===null||a===void 0)&&a.iconClass?`quick-input-list-icon ${e.item.iconClass}`:"";const g={matches:d||[],descriptionTitle:e.saneDescription,descriptionMatches:c||[],labelEscapeNewLines:!0};l.type!=="separator"?(g.extraClasses=l.iconClasses,g.italic=l.italic,g.strikethrough=l.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item")):n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(e.saneLabel,e.saneDescription,g),n.keybinding.set(l.type==="separator"?void 0:l.keybinding),e.saneDetail?(n.detail.element.style.display="",n.detail.setLabel(e.saneDetail,void 0,{matches:h,title:e.saneDetail,labelEscapeNewLines:!0})):n.detail.element.style.display="none",e.item&&e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);const f=l.buttons;f&&f.length?(n.actionBar.push(f.map((p,b)=>{let _=p.iconClass||(p.iconPath?$U(p.iconPath):void 0);return p.alwaysVisible&&(_=_?`${_} always-visible`:"always-visible"),{id:`id-${b}`,class:_,enabled:!0,label:"",tooltip:p.tooltip||"",run:()=>{l.type!=="separator"?e.fireButtonTriggered({button:p,item:l}):e.fireSeparatorButtonTriggered({button:p,separator:l})}}}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=wt(n.toDisposeElement),n.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=wt(e.toDisposeElement),e.toDisposeTemplate=wt(e.toDisposeTemplate)}};u(sF,"ListElementRenderer");let pC=sF;pC.ID="listelement";const mue=class mue{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return pC.ID}};u(mue,"ListElementDelegate");let YU=mue;var ti;(function(o){o[o.First=1]="First",o[o.Second=2]="Second",o[o.Last=3]="Last",o[o.Next=4]="Next",o[o.Previous=5]="Previous",o[o.NextPage=6]="NextPage",o[o.PreviousPage=7]="PreviousPage"})(ti||(ti={}));const bue=class bue{constructor(e,t,n,i){this.parent=e,this.options=n,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new V,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new V,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new V,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new V,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new V,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new V,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new V,this.onKeyDown=this._onKeyDown.event,this._onLeave=new V,this.onLeave=this._onLeave.event,this._listElementChecked=new V,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Q(this.parent,Ur(".quick-input-list"));const s=new YU,r=new XU;if(this.list=n.createList("QuickInput",this.container,s,[new pC(i)],{identityProvider:{getId:a=>{var l,d,c,h,g,f,p,b;return(b=(f=(h=(d=(l=a.item)===null||l===void 0?void 0:l.id)!==null&&d!==void 0?d:(c=a.item)===null||c===void 0?void 0:c.label)!==null&&h!==void 0?h:(g=a.separator)===null||g===void 0?void 0:g.id)!==null&&f!==void 0?f:(p=a.separator)===null||p===void 0?void 0:p.label)!==null&&b!==void 0?b:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(a=>{const l=new Mt(a);switch(l.keyCode){case 10:this.toggleCheckbox();break;case 31:(ot?a.metaKey:a.ctrlKey)&&this.list.setFocus(Ji(this.list.length));break;case 16:{const d=this.list.getFocus();d.length===1&&d[0]===0&&this._onLeave.fire();break}case 18:{const d=this.list.getFocus();d.length===1&&d[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(l)})),this.disposables.push(this.list.onMouseDown(a=>{a.browserEvent.button!==2&&a.browserEvent.preventDefault()})),this.disposables.push(q(this.container,pe.CLICK,a=>{(a.x||a.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(a=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(a=>{typeof a.index=="number"&&(a.browserEvent.preventDefault(),this.list.setSelection([a.index]))})),n.hoverDelegate){const a=new WD(n.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(l=>Swe(this,void 0,void 0,function*(){var d;if(l.browserEvent.target instanceof HTMLAnchorElement){a.cancel();return}if(!(!(l.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&Mi(l.browserEvent.relatedTarget,(d=l.element)===null||d===void 0?void 0:d.element)))try{yield a.trigger(()=>Swe(this,void 0,void 0,function*(){l.element&&this.showHover(l.element)}))}catch(c){if(!Ca(c))throw c}}))),this.disposables.push(this.list.onMouseOut(l=>{var d;Mi(l.browserEvent.relatedTarget,(d=l.element)===null||d===void 0?void 0:d.element)||a.cancel()})),this.disposables.push(a)}this.disposables.push(this._listElementChecked.event(a=>this.fireCheckedEvents())),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Ce.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Ce.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=wt(this.elementDisposables);const t=u(r=>this.fireButtonTriggered(r),"fireButtonTriggered"),n=u(r=>this.fireSeparatorButtonTriggered(r),"fireSeparatorButtonTriggered");this.inputElements=e;const i=new Map,s=this.parent.classList.contains("show-checkboxes");this.elements=e.reduce((r,a,l)=>{var d;const c=l>0?e[l-1]:void 0;if(a.type==="separator"&&!a.buttons)return r;const h=new qU(a,c,l,s,t,n,this._listElementChecked),g=r.length;return r.push(h),i.set((d=h.item)!==null&&d!==void 0?d:h.separator,g),r},[]),this.elementsToIndexes=i,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item).filter(e=>!!e)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===ti.Second&&this.list.length<2&&(e=ti.First),e){case ti.First:this.list.scrollTop=0,this.list.focusFirst(void 0,n=>!!n.item);break;case ti.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,n=>!!n.item);break;case ti.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,n=>!!n.item);break;case ti.Next:{this.list.focusNext(void 0,!0,void 0,i=>!!i.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case ti.Previous:{this.list.focusPrevious(void 0,!0,void 0,i=>!!i.item);const n=this.list.getFocus()[0];n!==0&&!this.elements[n-1].item&&this.list.firstVisibleIndex>n-1&&this.list.reveal(n-1);break}case ti.NextPage:this.list.focusNextPage(void 0,n=>!!n.item);break;case ti.PreviousPage:this.list.focusPreviousPage(void 0,n=>!!n.item);break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,n,i;this.options.hoverDelegate!==void 0&&(this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.options.hoverDelegate).onDidHideHover)===null||n===void 0||n.call(t),(i=this._lastHover)===null||i===void 0||i.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.options.linkOpenerDelegate(s)},showPointer:!0,container:this.container,hoverPosition:1},!1)))}layout(e){this.list.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this.inputElements[i.index-1];i.item&&(i.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let i;this.elements.forEach(s=>{var r,a,l,d;let c;this.matchOnLabelMode==="fuzzy"?c=this.matchOnLabel&&(r=_H(e,_v(s.saneLabel)))!==null&&r!==void 0?r:void 0:c=this.matchOnLabel&&(a=zHe(t,_v(s.saneLabel)))!==null&&a!==void 0?a:void 0;const h=this.matchOnDescription&&(l=_H(e,_v(s.saneDescription||"")))!==null&&l!==void 0?l:void 0,g=this.matchOnDetail&&(d=_H(e,_v(s.saneDetail||"")))!==null&&d!==void 0?d:void 0;if(c||h||g?(s.labelHighlights=c,s.descriptionHighlights=h,s.detailHighlights=g,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const f=s.index&&this.inputElements[s.index-1];i=f&&f.type==="separator"?f:i,i&&!s.hidden&&(s.separator=i,i=void 0)}})}const n=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){const i=e.toLowerCase();n.sort((s,r)=>GHe(s,r,i))}return this.elementsToIndexes=n.reduce((i,s,r)=>{var a;return i.set((a=s.item)!==null&&a!==void 0?a:s.separator,r),i},new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=wt(this.elementDisposables),this.disposables=wt(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){const e=this.list.getFocusedElements()[0];if(!e?.saneTooltip)return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}const t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);const n=new ie;n.add(this.list.onDidChangeFocus(i=>{i.indexes.length&&this.showHover(i.elements[0])})),this._lastHover&&n.add(this._lastHover),this._toggleHover=n,this.elementDisposables.push(this._toggleHover)}};u(bue,"QuickInputList");let mC=bue;GTe([xn],mC.prototype,"onDidChangeFocus",null);GTe([xn],mC.prototype,"onDidChangeSelection",null);function zHe(o,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return xwe(o,t);const i=YL(t," "),s=t.length-i.length,r=xwe(o,i);if(r)for(const a of r){const l=n[a.start+s]+s;a.start+=l,a.end+=l}return r}u(zHe,"matchesContiguousIconAware");function xwe(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t!==-1?[{start:t,end:t+o.length}]:null}u(xwe,"matchesContiguous");function GHe(o,e,t){const n=o.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:FHe(o.saneSortLabel,e.saneSortLabel,t)}u(GHe,"compareEntries");const _ue=class _ue{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}};u(_ue,"QuickInputAccessibilityProvider");let XU=_ue;var Twe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const ZU={iconClass:Te.asClassName(ue.quickInputBack),tooltip:m("quickInput.back","Back"),handle:-1},oF=class oF extends G{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=oF.noPromptMessage,this._severity=mn.Ignore,this.onDidTriggerButtonEmitter=this._register(new V),this.onDidHideEmitter=this._register(new V),this.onDisposeEmitter=this._register(new V),this.visibleDisposables=this._register(new ie),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Cr;this._ignoreFocusOut=e&&!Cr,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=uC.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const n=this.getTitle();n&&this.ui.title.textContent!==n?this.ui.title.textContent=n:!n&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const i=this.getDescription();if(this.ui.description1.textContent!==i&&(this.ui.description1.textContent=i),this.ui.description2.textContent!==i&&(this.ui.description2.textContent=i),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?wi(this.ui.widget,this._widget):wi(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new bo,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(l=>l===ZU);this.ui.leftActionBar.push(r.map((l,d)=>{const c=new qn(`id-${d}`,"",l.iconClass||$U(l.iconPath),!0,()=>Twe(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return c.tooltip=l.tooltip||"",c}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==ZU);this.ui.rightActionBar.push(a.map((l,d)=>{const c=new qn(`id-${d}`,"",l.iconClass||$U(l.iconPath),!0,()=>Twe(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return c.tooltip=l.tooltip||"",c}),{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof Du))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,wi(this.ui.message),UHe(s,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==mn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};u(oF,"QuickInput");let bC=oF;bC.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");const rF=class rF extends bC{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new V),this.onWillAcceptEmitter=this._register(new V),this.onDidAcceptEmitter=this._register(new V),this.onDidCustomEmitter=this._register(new V),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=Qr.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new V),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new V),this.onDidTriggerItemButtonEmitter=this._register(new V),this.onDidTriggerSeparatorButtonEmitter=this._register(new V),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?MHe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(ti.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(ti.Next),this.canSelectMany&&this.ui.list.domFocus(),Ke.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(ti.Previous):this.ui.list.focus(ti.Last),this.canSelectMany&&this.ui.list.domFocus(),Ke.stop(e,!0);break;case 12:this.ui.list.focus(ti.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ke.stop(e,!0);break;case 11:this.ui.list.focus(ti.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ke.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ti.First),Ke.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ti.Last),Ke.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&jn(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&jn(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&jn(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return q(this.ui.container,pe.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Mt(e),n=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;if(!i&&n.inputBox&&(i=this.placeholder||rF.DEFAULT_ARIA_LABEL,this.title&&(i+=` - ${this.title}`)),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=i??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Qr.NONE:this._itemActivation=Qr.FIRST;break;case Qr.SECOND:this.ui.list.focus(ti.Second),this._itemActivation=Qr.FIRST;break;case Qr.LAST:this.ui.list.focus(ti.Last),this._itemActivation=Qr.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(ti.First)),this.keepScrollPosition&&(this.scrollTop=e)}};u(rF,"QuickPick");let _C=rF;_C.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");const vue=class vue extends bC{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new V),this.onDidAcceptEmitter=this._register(new V),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}};u(vue,"InputBox");let JU=vue;const Ms=re,aF=class aF extends G{constructor(e,t){super(),this.options=e,this.themeService=t,this.enabled=!0,this.onDidAcceptEmitter=this._register(new V),this.onDidCustomEmitter=this._register(new V),this.onDidTriggerButtonEmitter=this._register(new V),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new V),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new V),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=u(t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey},"listener");this._register(q(window,pe.KEY_DOWN,e,!0)),this._register(q(window,pe.KEY_UP,e,!0)),this._register(q(window,pe.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Q(this.parentElement,Ms(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Ko(e),n=Q(e,Ms(".quick-input-titlebar")),i=this.options.hoverDelegate?{hoverDelegate:this.options.hoverDelegate}:void 0,s=this._register(new Ls(n,i));s.domNode.classList.add("quick-input-left-action-bar");const r=Q(n,Ms(".quick-input-title")),a=this._register(new Ls(n,i));a.domNode.classList.add("quick-input-right-action-bar");const l=Q(e,Ms(".quick-input-header")),d=Q(l,Ms("input.quick-input-check-all"));d.type="checkbox",d.setAttribute("aria-label",m("quickInput.checkAll","Toggle all checkboxes")),this._register(Jt(d,pe.CHANGE,F=>{const $=d.checked;B.setAllVisibleChecked($)})),this._register(q(d,pe.CLICK,F=>{(F.x||F.y)&&f.setFocus()}));const c=Q(l,Ms(".quick-input-description")),h=Q(l,Ms(".quick-input-and-message")),g=Q(h,Ms(".quick-input-filter")),f=this._register(new GU(g,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=Q(g,Ms(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const b=new gC(p,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=Q(g,Ms(".quick-input-count"));_.setAttribute("aria-live","polite");const v=new gC(_,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),y=Q(l,Ms(".quick-input-action")),w=new hC(y,this.styles.button);w.label=m("ok","OK"),this._register(w.onDidClick(F=>{this.onDidAcceptEmitter.fire()}));const C=Q(l,Ms(".quick-input-action")),S=new hC(C,this.styles.button);S.label=m("custom","Custom"),this._register(S.onDidClick(F=>{this.onDidCustomEmitter.fire()}));const k=Q(h,Ms(`#${this.idPrefix}message.quick-input-message`)),T=new XI(e,this.styles.progressBar);T.getContainer().classList.add("quick-input-progress");const E=Q(e,Ms(".quick-input-html-widget"));E.tabIndex=-1;const D=Q(e,Ms(".quick-input-description")),O=this.idPrefix+"list",B=this._register(new mC(e,O,this.options,this.themeService));f.setAttribute("aria-controls",O),this._register(B.onDidChangeFocus(()=>{var F;f.setAttribute("aria-activedescendant",(F=B.getActiveDescendant())!==null&&F!==void 0?F:"")})),this._register(B.onChangedAllVisibleChecked(F=>{d.checked=F})),this._register(B.onChangedVisibleCount(F=>{b.setCount(F)})),this._register(B.onChangedCheckedCount(F=>{v.setCount(F)})),this._register(B.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof _C&&this.controller.canSelectMany&&B.clearFocus()},0)}));const H=ul(e);return this._register(H),this._register(q(e,pe.FOCUS,F=>{Mi(F.relatedTarget,e)||(this.previousFocusElement=F.relatedTarget instanceof HTMLElement?F.relatedTarget:void 0)},!0)),this._register(H.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(uC.Blur),this.previousFocusElement=void 0})),this._register(q(e,pe.FOCUS,F=>{f.setFocus()})),this._register(Jt(e,pe.KEY_DOWN,F=>{if(!Mi(F.target,E))switch(F.keyCode){case 3:Ke.stop(F,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Ke.stop(F,!0),this.hide(uC.Gesture);break;case 2:if(!F.altKey&&!F.ctrlKey&&!F.metaKey){const $=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(e.classList.contains("show-checkboxes")?$.push("input"):$.push("input[type=text]"),this.getUI().list.isDisplayed()&&$.push(".monaco-list"),this.getUI().message&&$.push(".quick-input-message a"),this.getUI().widget){if(Mi(F.target,this.getUI().widget))break;$.push(".quick-input-html-widget")}const ee=e.querySelectorAll($.join(", "));F.shiftKey&&F.target===ee[0]?(Ke.stop(F,!0),B.clearFocus()):!F.shiftKey&&Mi(F.target,ee[ee.length-1])&&(Ke.stop(F,!0),ee[0].focus())}break;case 10:F.ctrlKey&&(Ke.stop(F,!0),this.getUI().list.toggleHover());break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:n,title:r,description1:D,description2:c,widget:E,rightActionBar:a,checkAll:d,inputContainer:h,filterContainer:g,inputBox:f,visibleCountContainer:p,visibleCount:b,countContainer:_,count:v,okContainer:y,ok:w,message:k,customButtonContainer:C,customButton:S,list:B,progressBar:T,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:F=>this.show(F),hide:()=>this.hide(),setVisibilities:F=>this.setVisibilities(F),setEnabled:F=>this.setEnabled(F),setContextKey:F=>this.options.setContextKey(F),linkOpenerDelegate:F=>this.options.linkOpenerDelegate(F)},this.updateStyles(),this.ui}pick(e,t={},n=Ze.None){return new Promise((i,s)=>{let r=u(c=>{var h;r=i,(h=t.onKeyMods)===null||h===void 0||h.call(t,a.keyMods),i(c)},"resolve");if(n.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const d=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const c=a.activeItems[0];c&&(r(c),a.hide())}}),a.onDidChangeActive(c=>{const h=c[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(c=>{if(!a.canSelectMany){const h=c[0];h&&(r(h),a.hide())}}),a.onDidTriggerItemButton(c=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},c),{removeItem:()=>{const h=a.items.indexOf(c.item);if(h!==-1){const g=a.items.slice(),f=g.splice(h,1),p=a.activeItems.filter(_=>_!==f[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,p&&(a.activeItems=p),a.keepScrollPosition=b}}}))),a.onDidTriggerSeparatorButton(c=>{var h;return(h=t.onDidTriggerSeparatorButton)===null||h===void 0?void 0:h.call(t,c)}),a.onDidChangeValue(c=>{l&&!c&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{wt(d),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([c,h])=>{l=h,a.busy=!1,a.items=c,a.canSelectMany&&(a.selectedItems=c.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,c=>{s(c),a.hide()})})}createQuickPick(){const e=this.getUI();return new _C(e)}createInputBox(){const e=this.getUI();return new JU(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",wi(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(mn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),wi(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const i=this.options.backKeybindingLabel();ZU.tooltip=i?m("quickInput.backWithKeybinding","Back ({0})",i):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,n,i;const s=this.controller;if(!s)return;const r=!Mi(document.activeElement,(n=(t=this.ui)===null||t===void 0?void 0:t.container)!==null&&n!==void 0?n:null);if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!r){let a=this.previousFocusElement;for(;a&&!a.offsetParent;)a=(i=a.parentElement)!==null&&i!==void 0?i:void 0;a?.offsetParent?(a.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}s.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isDisplayed()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,aF.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}isDisplayed(){return this.ui&&this.ui.container.style.display!=="none"}};u(aF,"QuickInputController");let JI=aF;JI.MAX_WIDTH=600;var jHe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XE=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},DS;let QU=(DS=class extends x7{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(zU))),this._quickAccess}constructor(e,t,n,i){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=i,this._onShow=this._register(new V),this._onHide=this._register(new V),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(r=>{r.get(Ks).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),createList:(s,r,a,l,d)=>this.instantiationService.createInstance(OU,s,r,a,l,d),styles:this.computeStyles()},i=this._register(new JI(Object.assign(Object.assign({},n),t),this.themeService));return i.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(s=>i.layout(s,e.offset.quickPickTop))),this._register(i.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(i.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new _e(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Ze.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:be(F0e),quickInputForeground:be(UNe),quickInputTitleBackground:be(zNe),widgetBorder:be(RZ),widgetShadow:be($a)},inputBox:CI,toggle:wI,countBadge:MTe,button:K4e,progressBar:$4e,keybindingLabel:j4e,list:T_({listBackground:F0e,listFocusBackground:$h,listFocusForeground:Kh,listInactiveFocusForeground:Kh,listInactiveSelectionIconForeground:mp,listInactiveFocusBackground:$h,listFocusOutline:Gt,listInactiveFocusOutline:Gt}),pickerGroup:{pickerGroupBorder:be(GNe),pickerGroupForeground:be(sxe)}}}},u(DS,"QuickInputService"),DS);QU=jHe([XE(0,Pe),XE(1,Re),XE(2,On),XE(3,x_)],QU);var jTe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Pp=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},MS;let ez=(MS=class extends QU{constructor(e,t,n,i,s){super(t,n,i,new u6(e.getContainerDomNode(),s)),this.host=void 0;const r=Fb.get(e);if(r){const a=r.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return a.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}},u(MS,"EditorScopedQuickInputService"),MS);ez=jTe([Pp(1,Pe),Pp(2,Re),Pp(3,On),Pp(4,gt)],ez);var AS;let tz=(AS=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(ez,e);this.mapEditorToService.set(e,t),ll(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},n=Ze.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}},u(AS,"StandaloneQuickInputService"),AS);tz=jTe([Pp(0,Pe),Pp(1,gt)],tz);const lF=class lF{static get(e){return e.getContribution(lF.ID)}constructor(e){this.editor=e,this.widget=new QI(this.editor)}dispose(){this.widget.dispose()}};u(lF,"QuickInputEditorContribution");let Fb=lF;Fb.ID="editor.controller.quickInput";const dF=class dF{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return dF.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};u(dF,"QuickInputEditorWidget");let QI=dF;QI.ID="editor.contrib.quickInputWidget";ft(Fb.ID,Fb,4);const yue=class yue{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}};u(yue,"ParsedTokenThemeRule");let nz=yue;function KHe(o){if(!o||!Array.isArray(o))return[];const e=[];let t=0;for(let n=0,i=o.length;n<i;n++){const s=o[n];let r=-1;if(typeof s.fontStyle=="string"){r=0;const d=s.fontStyle.split(" ");for(let c=0,h=d.length;c<h;c++)switch(d[c]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new nz(s.token||"",n,r,a,l)}return e}u(KHe,"parseTokenTheme");function $He(o,e){o.sort((c,h)=>{const g=ZHe(c.token,h.token);return g!==0?g:c.index-h.index});let t=0,n="000000",i="ffffff";for(;o.length>=1&&o[0].token==="";){const c=o.shift();c.fontStyle!==-1&&(t=c.fontStyle),c.foreground!==null&&(n=c.foreground),c.background!==null&&(i=c.background)}const s=new iz;for(const c of e)s.getId(c);const r=s.getId(n),a=s.getId(i),l=new sz(t,r,a),d=new oz(l);for(let c=0,h=o.length;c<h;c++){const g=o[c];d.insert(g.token,g.fontStyle,s.getId(g.foreground),s.getId(g.background))}return new eN(s,d)}u($He,"resolveParsedTokenThemeRules");const qHe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,wue=class wue{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(qHe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=K.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}};u(wue,"ColorMap");let iz=wue;const Cue=class Cue{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(KHe(e),t)}static createFromParsedTokenTheme(e,t){return $He(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),s=XHe(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}};u(Cue,"TokenTheme");let eN=Cue;const YHe=/\b(comment|string|regex|regexp)\b/;function XHe(o){const e=o.match(YHe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}u(XHe,"toStandardTokenType");function ZHe(o,e){return o<e?-1:o>e?1:0}u(ZHe,"strcmp");const cF=class cF{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new cF(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}};u(cF,"ThemeTrieElementRule");let sz=cF;const uF=class uF{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const s=this._children.get(n);return typeof s<"u"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const s=e.indexOf(".");let r,a;s===-1?(r=e,a=""):(r=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(r);typeof l>"u"&&(l=new uF(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,n,i)}};u(uF,"ThemeTrieElement");let oz=uF;function JHe(o){const e=[];for(let t=1,n=o.length;t<n;t++){const i=o[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}u(JHe,"generateTokensCSSForColorMap");const QHe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Gn]:"#FFFFFE",[gr]:"#000000",[oxe]:"#E5EBF1",[tE]:"#D3D3D3",[nE]:"#939393",[OZ]:"#ADD6FF4D"}},eVe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Gn]:"#1E1E1E",[gr]:"#D4D4D4",[oxe]:"#3A3D41",[tE]:"#404040",[nE]:"#707070",[OZ]:"#ADD6FF26"}},tVe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Gn]:"#000000",[gr]:"#FFFFFF",[tE]:"#FFFFFF",[nE]:"#FFFFFF"}},nVe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Gn]:"#FFFFFF",[gr]:"#292929",[tE]:"#292929",[nE]:"#292929"}};function iVe(o){const e=new V,t=aTe();return t.onDidChange(()=>e.fire()),o?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const n=o?o.getProductIconTheme():new tN,i={},s=u(a=>{const l=n.getIcon(a);if(!l)return;const d=l.font;return d?(i[d.id]=d.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${A0e(d.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},"formatIconRule"),r=[];for(const a of t.getIcons()){const l=s(a);l&&r.push(l)}for(const a in i){const l=i[a],d=l.weight?`font-weight: ${l.weight};`:"",c=l.style?`font-style: ${l.style};`:"",h=l.src.map(g=>`${bu(g.location)} format('${g.format}')`).join(", ");r.push(`@font-face { src: ${h}; font-family: ${A0e(a)};${d}${c} font-display: block; }`)}return r.join(`
`)}}}u(iVe,"getIconsStyleSheet");const Sue=class Sue{getIcon(e){const t=aTe();let n=e.defaults;for(;Te.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}};u(Sue,"UnthemedProductIconTheme");let tN=Sue;const ud="vs",zm="vs-dark",dg="hc-black",cg="hc-light",KTe=on.as(exe.ColorContribution),sVe=on.as(mxe.ThemingContribution),xue=class xue{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?($k(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,K.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=rz(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,K.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=KTe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case ud:return Oo.LIGHT;case dg:return Oo.HIGH_CONTRAST_DARK;case cg:return Oo.HIGH_CONTRAST_LIGHT;default:return Oo.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=rz(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const s={token:""};n&&(s.foreground=n),i&&(s.background=i),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=eN.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=ii.getForeground(s),a=ii.getFontStyle(s);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}};u(xue,"StandaloneTheme");let nN=xue;function $k(o){return o===ud||o===zm||o===dg||o===cg}u($k,"isBuiltinTheme");function rz(o){switch(o){case ud:return QHe;case zm:return eVe;case dg:return tVe;case cg:return nVe}}u(rz,"getBuiltinRules");function ZE(o){const e=rz(o);return new nN(o,e)}u(ZE,"newBuiltInTheme");const Tue=class Tue extends G{constructor(){super(),this._onColorThemeChange=this._register(new V),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new V),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new tN,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(ud,ZE(ud)),this._knownThemes.set(zm,ZE(zm)),this._knownThemes.set(dg,ZE(dg)),this._knownThemes.set(cg,ZE(cg));const e=iVe(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(ud),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),oSe("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return gM(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Ko(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),G.None}_registerShadowDomContainer(e){const t=Ko(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!$k(t.base)&&!$k(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new nN(e,t)),$k(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(ud),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==tl(this._theme.type)){let t;mb(this._theme.type)?t=e?dg:zm:t=e?cg:ud,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};sVe.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const i=[];for(const r of KTe.getColors()){const a=this._theme.getColor(r.id,!0);a&&i.push(`${NZ(r.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor { ${i.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(JHe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),en.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}};u(Tue,"StandaloneThemeService");let az=Tue;const $s=nt("themeService");var oVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},FH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},IS;let lz=(IS=class extends G{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new V,this._onDidChangeReducedMotion=new V,this._accessibilityModeEnabledContext=JL.bindTo(this._contextKeyService);const i=u(()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized()),"updateContextKey");this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),i(),this._register(this.onDidChangeScreenReaderOptimized(()=>i()));const s=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(q(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=u(()=>{const n=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",n),this._layoutService.container.classList.toggle("enable-motion",!n)},"updateRootClasses");t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}},u(IS,"AccessibilityService"),IS);lz=oVe([FH(0,Re),FH(1,x_),FH(2,at)],lz);var $O=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},np,uc,NS;let dz=(NS=class{constructor(e,t){this._commandService=e,this._hiddenStates=new iN(t)}createMenu(e,t,n){return new uz(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}},u(NS,"MenuService"),NS);dz=$O([Yg(0,un),Yg(1,Rr)],dz);var RS;let iN=np=(RS=class{constructor(e){this._storageService=e,this._disposables=new ie,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(np._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,np._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(np._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var n;return(n=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&n!==void 0?n:!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var n,i;const s=this._isHiddenByDefault(e,t),r=(i=(n=this._data[e.id])===null||n===void 0?void 0:n.includes(t))!==null&&i!==void 0?i:!1;return s?!r:r}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const s=this._data[e.id];if(n)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const r=s.indexOf(t);r>=0&&Pke(s,r),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(np._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},u(RS,"PersistedMenuHideState"),RS);iN._key="menu.hiddenCommands";iN=np=$O([Yg(0,Rr)],iN);var PS;let cz=uc=(PS=class{constructor(e,t,n,i,s){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=n,this._commandService=i,this._contextKeyService=s,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Ni.getMenuItems(this._id);let t;e.sort(uc._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(uc._fillInKbExprKeys(e.when,this._structureContextKeys),fp(e)){if(e.command.precondition&&uc._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;uc._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Ni.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[i,s]=n,r=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=fp(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const d=rVe(this._id,l?a.command:a,this._hiddenStates);if(l)r.push(new Er(a.command,a.alt,e,d,this._contextKeyService,this._commandService));else{const c=new uc(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),h=ui.join(...c.map(g=>g[1]));h.length>0&&r.push(new Pg(a,d,h))}}r.length>0&&t.push([i,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;const a=n.localeCompare(i);if(a!==0)return a}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:uc._compareTitles(fp(e)?e.command.title:e.title,fp(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}},u(PS,"MenuInfo"),PS);cz=uc=$O([Yg(3,un),Yg(4,Re)],cz);var FS;let uz=(FS=class{constructor(e,t,n,i,s){this._disposables=new ie,this._menuInfo=new cz(e,t,n.emitEventsForSubmenuChanges,i,s);const r=new Et(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Ni.onDidChangeMenu(c=>{c.has(e)&&r.schedule()}));const a=this._disposables.add(new ie),l=u(c=>{let h=!1,g=!1,f=!1;for(const p of c)if(h=h||p.isStructuralChange,g=g||p.isEnablementChange,f=f||p.isToggleChange,h&&g&&f)break;return{menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:f}},"merge"),d=u(()=>{a.add(s.onDidChangeContext(c=>{const h=c.affectsSome(this._menuInfo.structureContextKeys),g=c.affectsSome(this._menuInfo.preconditionContextKeys),f=c.affectsSome(this._menuInfo.toggledContextKeys);(h||g||f)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:f})})),a.add(t.onDidChange(c=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},"startLazyListener");this._onDidChange=new uD({onWillAddFirstListener:d,onDidRemoveLastListener:a.clear.bind(a),delay:n.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}},u(FS,"MenuImpl"),FS);uz=$O([Yg(3,un),Yg(4,Re)],uz);function rVe(o,e,t){const n=oNe(e)?e.submenu.id:e.id,i=typeof e.title=="string"?e.title:e.title.value,s=Am({id:`hide/${o.id}/${n}`,label:m("hide.label","Hide '{0}'",i),run(){t.updateHidden(o,n,!0)}}),r=Am({id:`toggle/${o.id}/${n}`,label:i,get checked(){return!t.isHidden(o,n)},run(){t.updateHidden(o,n,!!this.checked)}});return{hide:s,toggle:r,get isHidden(){return!r.checked}}}u(rVe,"createMenuHide");var aVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Lwe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ah=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},OS;let hz=(OS=class extends G{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(Rd||rSe)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=u(()=>{const t=new sb;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>ah(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))},"handler");this.layoutService.hasContainer&&(this._register(q(this.layoutService.container,"click",e)),this._register(q(this.layoutService.container,"keydown",e)))}writeText(e,t){return ah(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(re("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return ah(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return ah(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return ah(this,void 0,void 0,function*(){this.findText=e})}writeResources(e){return ah(this,void 0,void 0,function*(){this.resources=e})}readResources(){return ah(this,void 0,void 0,function*(){return this.resources})}},u(OS,"BrowserClipboardService"),OS);hz=aVe([Lwe(0,x_),Lwe(1,So)],hz);var lVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dVe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const o0="data-keybinding-context";var HS;let yJ=(HS=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}},u(HS,"Context"),HS);const Lue=class Lue extends yJ{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};u(Lue,"NullContext");let Mu=Lue;Mu.INSTANCE=new Mu;const gy=class gy extends yJ{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=hI.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===7){const s=Array.from(this._values,([r])=>r);this._values.clear(),n.fire(new rN(s))}else{const s=[];for(const r of i.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...et.map(l,([d])=>d)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new rN(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(gy._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(gy._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};u(gy,"ConfigAwareContextValuesContainer");let sN=gy;sN._keyPrefix="config.";const Eue=class Eue{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}};u(Eue,"ContextKey");let gz=Eue;const kue=class kue{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}};u(kue,"SimpleContextKeyChangeEvent");let oN=kue;const Due=class Due{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}};u(Due,"ArrayContextKeyChangeEvent");let rN=Due;const Mue=class Mue{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}};u(Mue,"CompositeContextKeyChangeEvent");let fz=Mue;function cVe(o,e){return o.allKeysContainedIn(new Set(Object.keys(e)))}u(cVe,"allEventKeysInContext");const Aue=class Aue{constructor(e){this._onDidChangeContext=new Id({merge:t=>new fz(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new gz(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new mz(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new oN(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new oN(e))}getContext(e){return this._isDisposed?Mu.INSTANCE:this.getContextValuesContainer(uVe(e))}};u(Aue,"AbstractContextKeyService");let aN=Aue;var VS;let pz=(VS=class extends aN{constructor(e){super(0),this._contexts=new Map,this._toDispose=new ie,this._lastContextId=0;const t=new sN(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Mu.INSTANCE:this._contexts.get(e)||Mu.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new yJ(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}},u(VS,"ContextKeyService"),VS);pz=lVe([dVe(0,at)],pz);const Iue=class Iue extends aN{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new si,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(o0)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(o0,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;cVe(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(o0),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?Mu.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}};u(Iue,"ScopedContextKeyService");let mz=Iue;function uVe(o){for(;o;){if(o.hasAttribute(o0)){const e=o.getAttribute(o0);return e?parseInt(e,10):NaN}o=o.parentElement}return 0}u(uVe,"findContextAttr");function hVe(o,e,t){o.get(Re).createKey(String(e),gVe(t))}u(hVe,"setContext");function gVe(o){return M1e(o,e=>{if(typeof e=="object"&&e.$mid===1)return Ae.revive(e).toString();if(e instanceof Ae)return e.toString()})}u(gVe,"stringifyURIs");lt.registerCommand("_setContext",hVe);lt.registerCommand({id:"getContextKeyInfo",handler(){return[..._e.all()].sort((o,e)=>o.key.localeCompare(e.key))},description:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});lt.registerCommand("_generateContextKeyInfo",function(){const o=[],e=new Set;for(const t of _e.all())e.has(t.key)||(e.add(t.key),o.push(t));o.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(o,void 0,2))});var WS;let fVe=(WS=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},u(WS,"Node"),WS);const Nue=class Nue{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new fVe(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}};u(Nue,"Graph");let lN=Nue;const pVe=!1,Rue=class Rue extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}};u(Rue,"CyclicDependencyError");let dN=Rue;const fy=class fy{constructor(e=new Wg,t=!1,n,i=pVe){var s;this._services=e,this._strict=t,this._parent=n,this._enableTracing=i,this._activeInstantiations=new Set,this._services.set(Pe,this),this._globalGraph=i?(s=n?._globalGraph)!==null&&s!==void 0?s:new lN(r=>r):void 0}createChild(e){return new fy(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const n=kd.traceInvocation(this._enableTracing,e);let i=!1;try{return e({get:r=>{if(i)throw fZ("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof ur?(n=kd.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=kd.traceCreation(this._enableTracing,e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=la.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const r=i.length>0?i[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof ur)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof ur?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var i;const s=new lN(l=>l.id.toString());let r=0;const a=[{id:e,desc:t,_trace:n}];for(;a.length;){const l=a.pop();if(s.lookupOrInsertNode(l),r++>1e3)throw new dN(s);for(const d of la.getServiceDependencies(l.desc.ctor)){const c=this._getServiceInstanceOrDescriptor(d.id);if(c||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),(i=this._globalGraph)===null||i===void 0||i.insertEdge(String(l.id),String(d.id)),c instanceof ur){const h={id:d.id,desc:c,_trace:l._trace.branch(d.id,!0)};s.insertEdge(l,h),a.push(h)}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new dN(s);break}for(const{data:d}of l){if(this._getServiceInstanceOrDescriptor(d.id)instanceof ur){const h=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setServiceInstance(d.id,h)}s.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof ur)return this._createServiceInstance(e,t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],i,s){if(i){const r=new fy(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const a=new Map,l=new Em(()=>{const d=r._createInstance(t,n,s);for(const[c,h]of a){const g=d[c];if(typeof g=="function")for(const f of h)g.apply(d,f)}return a.clear(),d});return new Proxy(Object.create(null),{get(d,c){if(!l.isInitialized&&typeof c=="string"&&(c.startsWith("onDid")||c.startsWith("onWill"))){let f=a.get(c);return f||(f=new Ai,a.set(c,f)),u((b,_,v)=>{const y=f.push([b,_,v]);return He(y)},"event")}if(c in d)return d[c];const h=l.value;let g=h[c];return typeof g!="function"||(g=g.bind(h),d[c]=g),g},set(d,c,h){return l.value[c]=h,!0},getPrototypeOf(d){return t.prototype}})}else return this._createInstance(t,n,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}};u(fy,"InstantiationService");let bz=fy;const Yr=class Yr{static traceInvocation(e,t){return e?new Yr(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Yr._None}static traceCreation(e,t){return e?new Yr(1,t.name):Yr._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new Yr(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Yr._totals+=e;let t=!1;function n(s,r){const a=[],l=new Array(s+1).join("	");for(const[d,c,h]of r._dep)if(c&&h){t=!0,a.push(`${l}CREATES -> ${d}`);const g=n(s+1,h);g&&a.push(g)}else a.push(`${l}uses -> ${d}`);return a.join(`
`)}u(n,"printChild");const i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Yr._totals.toFixed(2)}ms)`];(e>2||t)&&Yr.all.add(i.join(`
`))}};u(Yr,"Trace");let kd=Yr;kd.all=new Set;kd._None=new class extends kd{constructor(){super(0,null)}stop(){}branch(){return this}};kd._totals=0;const mVe=new Set([qe.inMemory,qe.vscodeSourceControl,qe.walkThrough,qe.walkThroughSnippet]),Pue=class Pue{constructor(){this._byResource=new ws,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new ws,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,i=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:et.empty():Ae.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:et.empty():et.map(et.concat(...this._byOwner.values()),r=>r[1])}};u(Pue,"DoubleResourceMap");let _z=Pue;const Fue=class Fue{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ws,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(mVe.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===sn.Error?t.errors+=1:n===sn.Warning?t.warnings+=1:n===sn.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}};u(Fue,"MarkerStats");let vz=Fue;const Jl=class Jl{constructor(){this._onMarkerChanged=new uD({delay:0,merge:Jl._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new _z,this._stats=new vz(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(C1e(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const r=Jl._toMarker(e,t,s);r&&i.push(r)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:h,relatedInformation:g,tags:f}=n;if(r)return l=l>0?l:1,d=d>0?d:1,c=c>=l?c:l,h=h>0?h:d,{resource:t,owner:e,code:i,severity:s,message:r,source:a,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:h,relatedInformation:g,tags:f}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const s of i){const r=et.first(s);r&&(n.push(r.resource),this._data.delete(r.resource,e))}if(Ri(t)){const s=new ws;for(const{resource:r,marker:a}of t){const l=Jl._toMarker(e,r,a);if(!l)continue;const d=s.get(r);d?d.push(l):(s.set(r,[l]),n.push(r))}for(const[r,a]of s)this._data.set(r,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const r=this._data.get(n,t);if(r){const a=[];for(const l of r)if(Jl._accept(l,i)){const d=a.push(l);if(s>0&&d===s)break}return a}else return[]}else if(!t&&!n){const r=[];for(const a of this._data.values())for(const l of a)if(Jl._accept(l,i)){const d=r.push(l);if(s>0&&d===s)return r}return r}else{const r=this._data.values(n??t),a=[];for(const l of r)for(const d of l)if(Jl._accept(d,i)){const c=a.push(d);if(s>0&&c===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new ws;for(const n of e)for(const i of n)t.set(i,!0);return Array.from(t.keys())}};u(Jl,"MarkerService");let yz=Jl;const Oue=class Oue extends G{constructor(){super(...arguments),this._configurationModel=new vs}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new vs;const e=on.as(kl.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const i of e){const s=n[i],r=t[i];s!==void 0?this._configurationModel.addValue(i,s):r?this._configurationModel.addValue(i,r.default):this._configurationModel.removeValue(i)}}};u(Oue,"DefaultConfiguration");let wz=Oue;const Hue=class Hue extends G{constructor(e,t=[]){super(),this.logger=new r9([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}};u(Hue,"LogService");let Cz=Hue;const $Te=[];function qO(o){$Te.push(o)}u(qO,"registerEditorFeature");function bVe(){return $Te.slice(0)}u(bVe,"getEditorFeatures");var Yu=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},di=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Gm=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Vue=class Vue{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new V}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}};u(Vue,"SimpleModel");let Sz=Vue;var BS;let xz=(BS=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new YV(new Sz(t))):Promise.reject(new Error("Model not found"))}},u(BS,"StandaloneTextModelService"),BS);xz=Yu([di(0,Xt)],xz);const hF=class hF{show(){return hF.NULL_PROGRESS_RUNNER}showWhile(e,t){return Gm(this,void 0,void 0,function*(){yield e})}};u(hF,"StandaloneEditorProgressService");let cN=hF;cN.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};const Wue=class Wue{withProgress(e,t,n){return t({report:()=>{}})}};u(Wue,"StandaloneProgressService");let Tz=Wue;const Bue=class Bue{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}};u(Bue,"StandaloneEnvironmentService");let Lz=Bue;const Uue=class Uue{confirm(e){return Gm(this,void 0,void 0,function*(){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}})}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),window.confirm(n)}prompt(e){var t,n;return Gm(this,void 0,void 0,function*(){let i;if(this.doConfirm(e.message,e.detail)){const r=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),i=yield(n=r[0])===null||n===void 0?void 0:n.run({checkboxChecked:!1})}return{result:i}})}error(e,t){return Gm(this,void 0,void 0,function*(){yield this.prompt({type:mn.Error,message:e,detail:t})})}};u(Uue,"StandaloneDialogService");let Ez=Uue;const py=class py{info(e){return this.notify({severity:mn.Info,message:e})}warn(e){return this.notify({severity:mn.Warning,message:e})}error(e){return this.notify({severity:mn.Error,message:e})}notify(e){switch(e.severity){case mn.Error:console.error(e.message);break;case mn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return py.NO_OP}prompt(e,t,n,i){return py.NO_OP}status(e,t){return G.None}};u(py,"StandaloneNotificationService");let uN=py;uN.NO_OP=new hB;var US;let kz=(US=class{constructor(e){this._onWillExecuteCommand=new V,this._onDidExecuteCommand=new V,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=lt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}},u(US,"StandaloneCommandService"),US);kz=Yu([di(0,Pe)],kz);var zS;let Ob=(zS=class extends E6{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=u(f=>{const p=new ie;p.add(q(f,pe.KEY_DOWN,b=>{const _=new Mt(b);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),p.add(q(f,pe.KEY_UP,b=>{const _=new Mt(b);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new Dz(f,p))},"addContainer"),l=u(f=>{for(let p=0;p<this._domNodeListeners.length;p++){const b=this._domNodeListeners[p];b.domNode===f&&(this._domNodeListeners.splice(p,1),b.dispose())}},"removeContainer"),d=u(f=>{f.getOption(60)||a(f.getContainerDomNode())},"addCodeEditor"),c=u(f=>{f.getOption(60)||l(f.getContainerDomNode())},"removeCodeEditor");this._register(r.onCodeEditorAdd(d)),this._register(r.onCodeEditorRemove(c)),r.listCodeEditors().forEach(d);const h=u(f=>{a(f.getContainerDomNode())},"addDiffEditor"),g=u(f=>{l(f.getContainerDomNode())},"removeDiffEditor");this._register(r.onDiffEditorAdd(h)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,n,i){return yr(lt.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map(n=>{var i;return{keybinding:C9(n.keybinding,oo),command:(i=n.command)!==null&&i!==void 0?i:null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),He(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ts.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new L6(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const s of e){const r=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new cI(void 0,s.command,s.commandArgs,r,t,null,!1);else{const l=uI.resolveKeybinding(a,oo);for(const d of l)n[i++]=new cI(d,s.command,s.commandArgs,r,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new Fd(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new uI([t],oo)}},u(zS,"StandaloneKeybindingService"),zS);Ob=Yu([di(0,Re),di(1,un),di(2,xo),di(3,_n),di(4,So),di(5,gt)],Ob);const zue=class zue extends G{constructor(e,t){super(),this.domNode=e,this._register(t)}};u(zue,"DomNodeListeners");let Dz=zue;function Ewe(o){return o&&typeof o=="object"&&(!o.overrideIdentifier||typeof o.overrideIdentifier=="string")&&(!o.resource||o.resource instanceof Ae)}u(Ewe,"isConfigurationOverrides");const Gue=class Gue{constructor(){this._onDidChangeConfiguration=new V,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new wz;this._configuration=new lI(e.reload(),new vs,new vs,new vs),e.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,i=Ewe(e)?e:Ewe(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[s,r]=i;this.getValue(s)!==r&&(this._configuration.updateValue(s,r),n.push(s))}if(n.length>0){const i=new T6({keys:n,overrides:[]},t,this._configuration);i.source=8,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};u(Gue,"StandaloneConfigurationService");let hN=Gue;var GS;let Mz=(GS=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new V,this.configurationService.onDidChangeConfiguration(i=>{this._onDidChangeConfiguration.fire({affectedKeys:i.affectedKeys,affectsConfiguration:(s,r)=>i.affectsConfiguration(r)})})}getValue(e,t,n){const i=W.isIPosition(t)?t:null,s=i?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,i):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}},u(GS,"StandaloneResourceConfigurationService"),GS);Mz=Yu([di(0,at),di(1,Xt),di(2,Kt)],Mz);var jS;let Az=(jS=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:qi||ot?`
`:`\r
`}},u(jS,"StandaloneResourcePropertiesService"),jS);Az=Yu([di(0,at)],Az);const jue=class jue{publicLog2(){}};u(jue,"StandaloneTelemetryService");let Iz=jue;const my=class my{constructor(){const e=Ae.from({scheme:my.SCHEME,authority:"model",path:"/"});this.workspace={id:ETe,folders:[new P6({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===my.SCHEME?this.workspace.folders[0]:null}};u(my,"StandaloneWorkspaceContextService");let gN=my;gN.SCHEME="inmemory";function Hb(o,e,t){if(!e||!(o instanceof hN))return;const n=[];Object.keys(e).forEach(i=>{m4e(i)&&n.push([`editor.${i}`,e[i]]),t&&b4e(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&o.updateValues(n)}u(Hb,"updateConfigurationService");var KS;let Nz=(KS=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Gm(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:Jw.convert(e),i=new Map;for(const a of n){if(!(a instanceof Gg))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let d=i.get(l);d||(d=[],i.set(l,d)),d.push(zt.replaceMove(L.lift(a.textEdit.range),a.textEdit.text))}let s=0,r=0;for(const[a,l]of i)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,s+=l.length;return{ariaSummary:Sg(W6.bulkEditServiceSummary,s,r),isApplied:s>0}})}},u(KS,"StandaloneBulkEditService"),KS);Nz=Yu([di(0,Xt)],Nz);const Kue=class Kue{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return qo(e)}};u(Kue,"StandaloneUriLabelService");let Rz=Kue;var $S;let Pz=($S=class extends B6{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}},u($S,"StandaloneContextViewService"),$S);Pz=Yu([di(0,x_),di(1,gt)],Pz);const $ue=class $ue{constructor(){this._neverEmitter=new V,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}};u($ue,"StandaloneWorkspaceTrustManagementService");let Fz=$ue;const que=class que extends bI{constructor(){super()}};u(que,"StandaloneLanguageService");let Oz=que;const Yue=class Yue extends Cz{constructor(){super(new o9)}};u(Yue,"StandaloneLogService");let Hz=Yue;var qS;let Vz=(qS=class extends Z6{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r),this.configure({blockMouse:!1})}},u(qS,"StandaloneContextMenuService"),qS);Vz=Yu([di(0,xo),di(1,_n),di(2,qd),di(3,At),di(4,Ml),di(5,Re)],Vz);const Xue=class Xue{playAudioCue(e,t){return Gm(this,void 0,void 0,function*(){})}};u(Xue,"StandaloneAudioService");let Wz=Xue;ct(at,hN,0);ct(DZ,Mz,0);ct(kSe,Az,0);ct(jg,gN,0);ct(Ib,Rz,0);ct(xo,Iz,0);ct(sE,Ez,0);ct(sJ,Lz,0);ct(_n,uN,0);ct(Nl,yz,0);ct(Kt,Oz,0);ct($s,az,0);ct(So,Hz,0);ct(Xt,AI,0);ct(IZ,iU,0);ct(Re,pz,0);ct(uTe,Tz,0);ct(Il,cN,0);ct(Rr,j6,0);ct(Nr,a9,0);ct(oE,Nz,0);ct(kTe,Fz,0);ct(Ds,xz,0);ct(El,lz,0);ct(Qo,PU,0);ct(un,kz,0);ct(At,Ob,0);ct(xa,tz,0);ct(qd,Pz,0);ct(Ks,tU,0);ct(Sa,hz,0);ct(To,Vz,0);ct(Ml,dz,0);ct(wf,Wz,0);var Ne;(function(o){const e=new Wg;for(const[l,d]of Kve())e.set(l,d);const t=new bz(e,!0);e.set(Pe,t);function n(l){i||r({});const d=e.get(l);if(!d)throw new Error("Missing service "+l);return d instanceof ur?t.invokeFunction(c=>c.get(l)):d}u(n,"get"),o.get=n;let i=!1;const s=new V;function r(l){if(i)return t;i=!0;for(const[c,h]of Kve())e.get(c)||e.set(c,h);for(const c in l)if(l.hasOwnProperty(c)){const h=nt(c);e.get(h)instanceof ur&&e.set(h,l[c])}const d=bVe();for(const c of d)try{t.createInstance(c)}catch(h){Be(h)}return s.fire(),t}u(r,"initialize"),o.initialize=r;function a(l){if(i)return l();const d=new ie,c=d.add(s.event(()=>{c.dispose(),d.add(l())}));return d}u(a,"withServices"),o.withServices=a})(Ne||(Ne={}));let _Ve;function Dd(){return _Ve}u(Dd,"getLogger");let qTe;function vVe(o){qTe=o}u(vVe,"_setDerived");const Zue=class Zue{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e){return qTe(t=>e(this.read(t),t),()=>{const t=L_(e);if(t!==void 0)return t;const i=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(e.toString());return i?`${this.debugName}.${i[2]}`:`${this.debugName} (mapped)`})}};u(Zue,"ConvenientObservable");let fN=Zue;const Jue=class Jue extends fN{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};u(Jue,"BaseObservable");let Xg=Jue;function tn(o,e){const t=new pN(o,e);try{o(t)}finally{t.finish()}}u(tn,"transaction");function Bz(o,e,t){o?e(o):tn(e,t)}u(Bz,"subtransaction");const Que=class Que{constructor(e,t){var n;this._fn=e,this._getDebugName=t,this.updatingObservers=[],(n=Dd())===null||n===void 0||n.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():L_(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;this.updatingObservers=null;for(const{observer:n,observable:i}of t)n.endUpdate(i);(e=Dd())===null||e===void 0||e.handleEndTransaction()}};u(Que,"TransactionImpl");let pN=Que;function L_(o){const e=o.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),i=n?n[1]:void 0;return i?.trim()}u(L_,"getFunctionName");function Vt(o,e){return new mN(o,e)}u(Vt,"observableValue");const ehe=class ehe extends Xg{constructor(e,t){super(),this.debugName=e,this._value=t}get(){return this._value}set(e,t,n){var i;if(this._value===e)return;let s;t||(t=s=new pN(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(i=Dd())===null||i===void 0||i.handleObservableChanged(this,{oldValue:r,newValue:e,change:n,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}};u(ehe,"ObservableValue");let mN=ehe;function bN(o,e){return new Uz(o,e)}u(bN,"disposableObservableValue");const the=class the extends mN{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)===null||e===void 0||e.dispose()}};u(the,"DisposableObservableValue");let Uz=the;const YO=u((o,e)=>o===e,"defaultEqualityComparer");function dt(o,e){return new Vb(e,o,void 0,void 0,void 0,YO)}u(dt,"derived");function kwe(o,e){var t;return new Vb(o.debugName,e,void 0,void 0,void 0,(t=o.equalityComparer)!==null&&t!==void 0?t:YO)}u(kwe,"derivedOpts");function yVe(o,e,t){return new Vb(o,t,e.createEmptyChangeSummary,e.handleChange,void 0,YO)}u(yVe,"derivedHandleChanges");function vC(o,e){const t=new ie;return new Vb(o,n=>(t.clear(),e(n,t)),void 0,void 0,()=>t.dispose(),YO)}u(vC,"derivedWithStore");vVe(dt);const nhe=class nhe extends Xg{get debugName(){return this._debugName?typeof this._debugName=="function"?this._debugName():this._debugName:L_(this._computeFn)||"(anonymous)"}constructor(e,t,n,i,s=void 0,r){var a,l;super(),this._debugName=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=i,this._handleLastObserverRemoved=s,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)===null||a===void 0?void 0:a.call(this),(l=Dd())===null||l===void 0||l.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)===null||e===void 0||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var e,t;if(this.state===3)return;const n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;const i=this.state!==0,s=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{for(const l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}const a=i&&!this._equalityComparator(s,this.value);if((t=Dd())===null||t===void 0||t.handleDerivedRecomputed(this,{oldValue:s,newValue:this.value,change:void 0,didChange:a,hadValue:i}),a)for(const l of this.observers)l.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}if(this.updateCount<0)throw new An}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,i=this.state===3;if(n&&(this.state===1||i)&&(this.state=2,i))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}};u(nhe,"Derived");let Vb=nhe;function wJ(o,e){return new Wb(o.debugName,e,void 0,void 0)}u(wJ,"autorunOpts");function Rt(o){return new Wb(void 0,o,void 0,void 0)}u(Rt,"autorun");function XO(o,e){return new Wb(o.debugName,e,o.createEmptyChangeSummary,o.handleChange)}u(XO,"autorunHandleChanges");function Fs(o){const e=new ie,t=wJ({debugName:()=>L_(o)||"(anonymous)"},n=>{e.clear(),o(n,e)});return He(()=>{t.dispose(),e.dispose()})}u(Fs,"autorunWithStore");const ihe=class ihe{get debugName(){if(typeof this._debugName=="string")return this._debugName;if(typeof this._debugName=="function"){const t=this._debugName();if(t!==void 0)return t}const e=L_(this._runFn);return e!==void 0?e:"(anonymous)"}constructor(e,t,n,i){var s,r;this._debugName=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=i,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(s=this.createChangeSummary)===null||s===void 0?void 0:s.call(this),(r=Dd())===null||r===void 0||r.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var e,t,n;if(this.state===3)return;const i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i,this.state=3;try{if(!this.disposed){(e=Dd())===null||e===void 0||e.handleAutorunTriggered(this);const s=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this),this._runFn(this,s)}}finally{(n=Dd())===null||n===void 0||n.handleAutorunFinished(this);for(const s of this.dependenciesToBeRemoved)s.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Jy(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};u(ihe,"AutorunObserver");let Wb=ihe;(function(o){o.Observer=Wb})(Rt||(Rt={}));function _N(o){return new zz(o)}u(_N,"constObservable");const she=class she extends fN{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}};u(she,"ConstObservable");let zz=she;function wVe(o,e){return new Promise(t=>{let n=!1,i=!1;const s=Rt(r=>{const a=o.read(r);e(a)&&(n?s.dispose():i=!0,t(a))});n=!0,i&&s.dispose()})}u(wVe,"waitForState");function ci(o,e){return new vN(o,e)}u(ci,"observableFromEvent");const ohe=class ohe extends Xg{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=n=>{var i;const s=this._getValue(n),r=!this.hasValue||this.value!==s;(i=Dd())===null||i===void 0||i.handleFromEventObservableTriggered(this,{oldValue:this.value,newValue:s,change:void 0,didChange:r,hadValue:this.hasValue}),r&&(this.value=s,this.hasValue&&tn(a=>{for(const l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{const a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")}),this.hasValue=!0)}}getDebugName(){return L_(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};u(ohe,"FromEventObservable");let vN=ohe;(function(o){o.Observer=vN})(ci||(ci={}));function io(o,e){return new Gz(o,e)}u(io,"observableSignalFromEvent");const rhe=class rhe extends Xg{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{tn(n=>{for(const i of this.observers)n.updateObserver(i,this),i.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}};u(rhe,"FromEventObservableSignal");let Gz=rhe;function YTe(o){return new jz(o)}u(YTe,"observableSignal");const ahe=class ahe extends Xg{constructor(e){super(),this.debugName=e}trigger(e,t){if(!e){tn(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}};u(ahe,"ObservableSignal");let jz=ahe;function yC(o,e){const t=new Kz(e??!1);return o.addObserver(t),e&&o.reportChanges(),He(()=>{o.removeObserver(t)})}u(yC,"keepAlive");const lhe=class lhe{constructor(e){this.forceRecompute=e,this.counter=0}beginUpdate(e){this.counter++}endUpdate(e){this.counter--,this.counter===0&&this.forceRecompute&&e.reportChanges()}handlePossibleChange(e){}handleChange(e,t){}};u(lhe,"KeepAliveObserver");let Kz=lhe;function CVe(o,e,t,n){if(o.length===0)return e;if(e.length===0)return o;const i=[];let s=0,r=0;for(;s<o.length&&r<e.length;){const a=o[s],l=e[r],d=t(a),c=t(l);d<c?(i.push(a),s++):d>c?(i.push(l),r++):(i.push(n(a,l)),s++,r++)}for(;s<o.length;)i.push(o[s]),s++;for(;r<e.length;)i.push(e[r]),r++;return i}u(CVe,"joinCombine");function yN(o,e){const t=new ie,n=o.createDecorationsCollection();return t.add(wJ({debugName:`Apply decorations from ${e.debugName}`},i=>{const s=e.read(i);n.set(s)})),t.add({dispose:()=>{n.clear()}}),t}u(yN,"applyObservableDecorations$1");function JE(o,e){return o.appendChild(e),He(()=>{o.removeChild(e)})}u(JE,"appendRemoveOnDispose");const dhe=class dhe extends G{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new pw(e,t)),this._width=Vt("width",this.elementSizeObserver.getWidth()),this._height=Vt("height",this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>tn(i=>{this._width.set(this.elementSizeObserver.getWidth(),i),this._height.set(this.elementSizeObserver.getHeight(),i)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}};u(dhe,"ObservableElementSizeObserver");let $z=dhe;function Dwe(o,e){let t=o.get(),n=t,i=t;const s=Vt("animatedValue",t);let r=-1;const a=300;let l;e.add(XO({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(c,h)=>(c.didChange(o)&&(h.animate=h.animate||c.change),!0)},(c,h)=>{l!==void 0&&(cancelAnimationFrame(l),l=void 0),n=i,t=o.read(c),r=Date.now()-(h.animate?0:a),d()}));function d(){const c=Date.now()-r;i=Math.floor(SVe(c,n,t-n,a)),c<a?l=requestAnimationFrame(d):i=t,s.set(i,void 0)}return u(d,"update"),s}u(Dwe,"animatedObservable");function SVe(o,e,t,n){return o===n?e+t:t*(-Math.pow(2,-10*o/n)+1)+e}u(SVe,"easeOutExpo");const che=class che extends G{constructor(e,t,n){super(),this._register(new CN(e,n)),this._register(ru(n,{height:t.actualHeight,top:t.actualTop}))}};u(che,"ViewZoneOverlayWidget");let wN=che;const uhe=class uhe{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Vt("actualTop",void 0),this._actualHeight=Vt("actualHeight",void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=n=>{this._actualTop.set(n,void 0)},this.onComputedHeight=n=>{this._actualHeight.set(n,void 0)}}};u(uhe,"PlaceholderViewZone");let Bb=uhe;const gF=class gF{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${gF._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};u(gF,"ManagedOverlayWidget");let CN=gF;CN._counter=0;function ru(o,e){return Rt(t=>{for(let[n,i]of Object.entries(e))i&&typeof i=="object"&&"read"in i&&(i=i.read(t)),typeof i=="number"&&(i=`${i}px`),n=n.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),o.style[n]=i})}u(ru,"applyStyle");function hh(o,e){return xVe([o],e),o}u(hh,"readHotReloadableExport");function xVe(o,e){const t=globalThis.$hotReload_deprecateExports;if(!t)return;io("reload",i=>{function s(r,a){return[...Object.values(r)].some(l=>o.includes(l))?(i(void 0),!0):!1}return u(s,"handleExports"),t.add(s),{dispose(){t.delete(s)}}}).read(e)}u(xVe,"observeHotReloadableExports");function SN(o,e,t){const n=new ie,i=[];return n.add(Rt(s=>{const r=e.read(s),a=new Map,l=new Map;t&&t(!0),o.changeViewZones(d=>{for(const c of i)d.removeZone(c);i.length=0;for(const c of r){const h=d.addZone(c);i.push(h),a.set(c,h)}}),t&&t(!1),n.add(XO({createEmptyChangeSummary(){return[]},handleChange(d,c){const h=l.get(d.changedObservable);return h!==void 0&&c.push(h),!0}},(d,c)=>{for(const h of r)h.onChange&&(l.set(h.onChange,a.get(h)),h.onChange.read(d));t&&t(!0),o.changeViewZones(h=>{for(const g of c)h.layoutZone(g)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),o.changeViewZones(s=>{for(const r of i)s.removeZone(r)}),t&&t(!1)}}),n}u(SN,"applyViewZones");var CJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},SJ=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},TVe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const LVe=Yt("diff-review-insert",ue.add,m("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),EVe=Yt("diff-review-remove",ue.remove,m("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),kVe=Yt("diff-review-close",ue.close,m("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var YS;let qz=(YS=class extends G{constructor(e,t,n,i,s,r,a,l,d){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=i,this._width=s,this._height=r,this._diffs=a,this._editors=l,this._instantiationService=d,this.model=vC("model",(c,h)=>{const g=this._visible.read(c);if(this._parentNode.style.visibility=g?"visible":"hidden",!g)return null;const f=h.add(this._instantiationService.createInstance(Yz,this._diffs,this._editors,this._setVisible,this._canClose)),p=h.add(this._instantiationService.createInstance(tG,this._parentNode,f,this._width,this._height,this._editors));return{model:f,view:p}}),this._register(yC(this.model,!0))}next(){tn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this.model.get().model.nextGroup(e)})}prev(){tn(e=>{this._setVisible(!0,e),this.model.get().model.previousGroup(e)})}close(){tn(e=>{this._setVisible(!1,e)})}},u(YS,"AccessibleDiffViewer"),YS);qz=CJ([SJ(8,Pe)],qz);var XS;let Yz=(XS=class extends G{constructor(e,t,n,i,s){super(),this._diffs=e,this._editors=t,this._setVisible=n,this.canClose=i,this._audioCueService=s,this._groups=Vt("groups",[]),this._currentGroupIdx=Vt("currentGroupIdx",0),this._currentElementIdx=Vt("currentElementIdx",0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))===null||l===void 0?void 0:l.lines[r]}),this._register(Rt(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=DVe(a,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());tn(d=>{const c=this._editors.modified.getPosition();if(c){const h=l.findIndex(g=>c?.lineNumber<g.range.modified.endLineNumberExclusive);h!==-1&&this._currentGroupIdx.set(h,d)}this._groups.set(l,d)})})),this._register(Rt(r=>{const a=this.currentElement.read(r);a?.type===ns.Deleted?this._audioCueService.playAudioCue(rt.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):a?.type===ns.Added&&this._audioCueService.playAudioCue(rt.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Rt(r=>{var a;const l=this.currentElement.read(r);if(l&&l.type!==ns.Header){const d=(a=l.modifiedLineNumber)!==null&&a!==void 0?a:l.diff.modifiedRange.startLineNumber;this._editors.modified.setSelection(L.fromPositions(new W(d,1)))}}))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||Bz(t,i=>{this._currentGroupIdx.set(yt.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),i),this._currentElementIdx.set(0,i)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||tn(n=>{this._currentElementIdx.set(yt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);n!==-1&&tn(i=>{this._currentElementIdx.set(n,i)})}revealCurrentElementInEditor(){this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===ns.Deleted?(this._editors.original.setSelection(L.fromPositions(new W(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==ns.Header&&(this._editors.modified.setSelection(L.fromPositions(new W(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}},u(XS,"ViewModel"),XS);Yz=CJ([SJ(4,wf)],Yz);const K_=3;function DVe(o,e,t){const n=[];for(const i of AVe(o,(s,r)=>r.modifiedRange.startLineNumber-s.modifiedRange.endLineNumberExclusive<2*K_)){const s=[];s.push(new Zz);const r=new pt(Math.max(1,i[0].originalRange.startLineNumber-K_),Math.min(i[i.length-1].originalRange.endLineNumberExclusive+K_,e+1)),a=new pt(Math.max(1,i[0].modifiedRange.startLineNumber-K_),Math.min(i[i.length-1].modifiedRange.endLineNumberExclusive+K_,t+1));MVe(i,(c,h)=>{const g=new pt(c?c.originalRange.endLineNumberExclusive:r.startLineNumber,h?h.originalRange.startLineNumber:r.endLineNumberExclusive),f=new pt(c?c.modifiedRange.endLineNumberExclusive:a.startLineNumber,h?h.modifiedRange.startLineNumber:a.endLineNumberExclusive);g.forEach(p=>{s.push(new eG(p,f.startLineNumber+(p-g.startLineNumber)))}),h&&(h.originalRange.forEach(p=>{s.push(new Jz(h,p))}),h.modifiedRange.forEach(p=>{s.push(new Qz(h,p))}))});const l=i[0].modifiedRange.join(i[i.length-1].modifiedRange),d=i[0].originalRange.join(i[i.length-1].originalRange);n.push(new Xz(new Mg(l,d),s))}return n}u(DVe,"computeViewElementGroups");var ns;(function(o){o[o.Header=0]="Header",o[o.Unchanged=1]="Unchanged",o[o.Deleted=2]="Deleted",o[o.Added=3]="Added"})(ns||(ns={}));const hhe=class hhe{constructor(e,t){this.range=e,this.lines=t}};u(hhe,"ViewElementGroup");let Xz=hhe;const ghe=class ghe{constructor(){this.type=ns.Header}};u(ghe,"HeaderViewElement");let Zz=ghe;const fhe=class fhe{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=ns.Deleted,this.modifiedLineNumber=void 0}};u(fhe,"DeletedLineViewElement");let Jz=fhe;const phe=class phe{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=ns.Added,this.originalLineNumber=void 0}};u(phe,"AddedLineViewElement");let Qz=phe;const mhe=class mhe{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=ns.Unchanged}};u(mhe,"UnchangedLineViewElement");let eG=mhe;var ZS;let tG=(ZS=class extends G{constructor(e,t,n,i,s,r){super(),this._element=e,this._model=t,this._width=n,this._height=i,this._editors=s,this._languageService=r,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Ls(a)),this._register(Rt(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new qn("diffreview.close",m("label.close","Close"),"close-diff-review "+Te.asClassName(kVe),!0,()=>TVe(this,void 0,void 0,function*(){return t.close()})),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new Cu(this._content,{})),wi(this.domNode,this._scrollbar.getDomNode(),a),this._register(He(()=>{wi(this.domNode)})),this._register(ru(this.domNode,{width:this._width,height:this._height})),this._register(ru(this._content,{width:this._width,height:this._height})),this._register(Fs((l,d)=>{this._model.currentGroup.read(l),this._render(d)})),this._register(Jt(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._editors.original.getOptions(),n=this._editors.modified.getOptions(),i=document.createElement("div");i.className="diff-review-table",i.setAttribute("role","list"),i.setAttribute("aria-label",m("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Kn(i,n.get(49)),wi(this._content,i);const s=this._editors.original.getModel(),r=this._editors.modified.getModel();if(!s||!r)return;const a=s.getOptions(),l=r.getOptions(),d=n.get(65),c=this._model.currentGroup.get();for(const h of c?.lines||[]){if(!c)break;let g;if(h.type===ns.Header){const p=document.createElement("div");p.className="diff-review-row",p.setAttribute("role","listitem");const b=c.range,_=this._model.currentGroupIndex.get(),v=this._model.groups.get().length,y=u(k=>k===0?m("no_lines_changed","no lines changed"):k===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",k),"getAriaLines"),w=y(b.original.length),C=y(b.modified.length);p.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,v,b.original.startLineNumber,w,b.modified.startLineNumber,C));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${_+1}/${v}: @@ -${b.original.startLineNumber},${b.original.length} +${b.modified.startLineNumber},${b.modified.length} @@`)),p.appendChild(S),g=p}else g=this._createRow(h,d,this._width.get(),t,s,a,n,r,l);i.appendChild(g);const f=dt(p=>this._model.currentElement.read(p)===h);e.add(Rt(p=>{const b=f.read(p);g.tabIndex=b?0:-1,b&&g.focus()})),e.add(q(g,"focus",()=>{this._model.goToLine(h)}))}this._scrollbar.scanDomNode()}_createRow(e,t,n,i,s,r,a,l,d){const c=i.get(142),h=c.glyphMarginWidth+c.lineNumbersWidth,g=a.get(142),f=10+g.glyphMarginWidth+g.lineNumbersWidth;let p="diff-review-row",b="";const _="diff-review-spacer";let v=null;switch(e.type){case ns.Added:p="diff-review-row line-insert",b=" char-insert",v=LVe;break;case ns.Deleted:p="diff-review-row line-delete",b=" char-delete",v=EVe;break}const y=document.createElement("div");y.style.minWidth=n+"px",y.className=p,y.setAttribute("role","listitem"),y.ariaLevel="";const w=document.createElement("div");w.className="diff-review-cell",w.style.height=`${t}px`,y.appendChild(w);const C=document.createElement("span");C.style.width=h+"px",C.style.minWidth=h+"px",C.className="diff-review-line-number"+b,e.originalLineNumber!==void 0?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText=" ",w.appendChild(C);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+b,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText=" ",w.appendChild(S);const k=document.createElement("span");if(k.className=_,v){const D=document.createElement("span");D.className=Te.asClassName(v),D.innerText="  ",k.appendChild(D)}else k.innerText="  ";w.appendChild(k);let T;if(e.modifiedLineNumber!==void 0){let D=this._getLineHtml(l,a,d.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Wc._ttPolicy&&(D=Wc._ttPolicy.createHTML(D)),w.insertAdjacentHTML("beforeend",D),T=l.getLineContent(e.modifiedLineNumber)}else{let D=this._getLineHtml(s,i,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Wc._ttPolicy&&(D=Wc._ttPolicy.createHTML(D)),w.insertAdjacentHTML("beforeend",D),T=s.getLineContent(e.originalLineNumber)}T.length===0&&(T=m("blankLine","blank"));let E="";switch(e.type){case ns.Unchanged:e.originalLineNumber===e.modifiedLineNumber?E=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",T,e.originalLineNumber):E=m("equalLine","{0} original line {1} modified line {2}",T,e.originalLineNumber,e.modifiedLineNumber);break;case ns.Added:E=m("insertLine","+ {0} modified line {1}",T,e.modifiedLineNumber);break;case ns.Deleted:E=m("deleteLine","- {0} original line {1}",T,e.originalLineNumber);break}return y.setAttribute("aria-label",E),y}_getLineHtml(e,t,n,i,s){const r=e.getLineContent(i),a=t.get(49),l=xi.createEmpty(r,s),d=as.isBasicASCII(r,e.mightContainNonBasicASCII()),c=as.containsRTL(r,d,e.mightContainRTL());return QL(new Tr(a.isMonospace&&!t.get(32),a.canUseHalfwidthRightwardsArrow,r,!1,d,c,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(115),t.get(97),t.get(92),t.get(50)!==Sr.OFF,null)).html}},u(ZS,"View"),ZS);tG=CJ([SJ(5,Kt)],tG);function MVe(o,e){let t;for(const n of o)e(t,n),t=n;e(t,void 0)}u(MVe,"forEachAdjacentItems");function*AVe(o,e){let t,n;for(const i of o)n!==void 0&&e(n,i)?t.push(i):(t&&(yield t),t=[i]),n=i;t&&(yield t)}u(AVe,"group");const IVe=Yt("diff-insert",ue.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),XTe=Yt("diff-remove",ue.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),Mwe=Fe.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Te.asClassName(IVe),marginClassName:"gutter-insert"}),Awe=Fe.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Te.asClassName(XTe),marginClassName:"gutter-delete"}),Iwe=Fe.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Nwe=Fe.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),Rwe=Fe.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),NVe=Fe.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),RVe=Fe.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),nG=Fe.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),PVe=Fe.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),FVe=Fe.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),OVe=Fe.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new zn(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+Te.asClassName(ue.arrowRight),zIndex:10001}),by=class by extends G{constructor(e,t,n,i,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=i,this._editors=s,this._originalScrollTop=ci(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ci(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=io("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Vt("width",0),this._modifiedViewZonesChangedSignal=io("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=io("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=vC("state",(g,f)=>{var p;this._element.replaceChildren();const b=this._diffModel.read(g),_=(p=b?.diff.read(g))===null||p===void 0?void 0:p.movedTexts;if(!_||_.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(g);const v=this._originalEditorLayoutInfo.read(g),y=this._modifiedEditorLayoutInfo.read(g);if(!v||!y){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(g),this._originalViewZonesChangedSignal.read(g);const w=_.map(O=>{function B(te,fe){const me=fe.getTopForLineNumber(te.startLineNumber,!0),ce=fe.getTopForLineNumber(te.endLineNumberExclusive,!0);return(me+ce)/2}u(B,"computeLineStart");const H=B(O.lineRangeMapping.original,this._editors.original),F=this._originalScrollTop.read(g),$=B(O.lineRangeMapping.modified,this._editors.modified),ee=this._modifiedScrollTop.read(g),ge=H-F,X=$-ee,R=Math.min(H,$),z=Math.max(H,$);return{range:new yt(R,z),from:ge,to:X,fromWithoutScroll:H,toWithoutScroll:$,move:O}});w.sort(Vke(_r(O=>O.fromWithoutScroll>O.toWithoutScroll,Wke),_r(O=>O.fromWithoutScroll>O.toWithoutScroll?O.fromWithoutScroll:-O.toWithoutScroll,gd)));const C=iG.compute(w.map(O=>O.range)),S=10,k=v.verticalScrollbarWidth,T=(C.getTrackCount()-1)*10+S*2,E=k+T+(y.contentLeft-by.movedCodeBlockPadding);let D=0;for(const O of w){const B=C.getTrack(D),H=k+S+B*10,F=15,$=15,ee=E,ge=y.glyphMarginWidth+y.lineNumbersWidth,X=18,R=document.createElementNS("http://www.w3.org/2000/svg","rect");R.classList.add("arrow-rectangle"),R.setAttribute("x",`${ee-ge}`),R.setAttribute("y",`${O.to-X/2}`),R.setAttribute("width",`${ge}`),R.setAttribute("height",`${X}`),this._element.appendChild(R);const z=document.createElementNS("http://www.w3.org/2000/svg","g"),te=document.createElementNS("http://www.w3.org/2000/svg","path");te.setAttribute("d",`M 0 ${O.from} L ${H} ${O.from} L ${H} ${O.to} L ${ee-$} ${O.to}`),te.setAttribute("fill","none"),z.appendChild(te);const fe=document.createElementNS("http://www.w3.org/2000/svg","polygon");fe.classList.add("arrow"),f.add(Rt(me=>{te.classList.toggle("currentMove",O.move===b.activeMovedText.read(me)),fe.classList.toggle("currentMove",O.move===b.activeMovedText.read(me))})),fe.setAttribute("points",`${ee-$},${O.to-F/2} ${ee},${O.to} ${ee-$},${O.to+F/2}`),z.appendChild(fe),this._element.appendChild(z),D++}this.width.set(T,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(He(()=>this._element.remove())),this._register(Rt(g=>{const f=this._originalEditorLayoutInfo.read(g),p=this._modifiedEditorLayoutInfo.read(g);!f||!p||(this._element.style.left=`${f.width-f.verticalScrollbarWidth}px`,this._element.style.height=`${f.height}px`,this._element.style.width=`${f.verticalScrollbarWidth+f.contentLeft-by.movedCodeBlockPadding+this.width.read(g)}px`)})),this._register(yC(this._state,!0));const r=dt(g=>{const f=this._diffModel.read(g),p=f?.diff.read(g);return p?p.movedTexts.map(b=>({move:b,original:new Bb(_N(b.lineRangeMapping.original.startLineNumber-1),18),modified:new Bb(_N(b.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(SN(this._editors.original,r.map(g=>g.map(f=>f.original)))),this._register(SN(this._editors.modified,r.map(g=>g.map(f=>f.modified)))),this._register(Fs((g,f)=>{const p=r.read(g);for(const b of p)f.add(new xN(this._editors.original,b.original,b.move,"original",this._diffModel.get())),f.add(new xN(this._editors.modified,b.modified,b.move,"modified",this._diffModel.get()))}));const a=ci(this._editors.original.onDidChangeCursorPosition,()=>this._editors.original.getPosition()),l=ci(this._editors.modified.onDidChangeCursorPosition,()=>this._editors.modified.getPosition()),d=io("original.onDidFocusEditorWidget",g=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>g(void 0),0))),c=io("modified.onDidFocusEditorWidget",g=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>g(void 0),0)));let h="modified";this._register(XO({createEmptyChangeSummary:()=>{},handleChange:(g,f)=>(g.didChange(d)&&(h="original"),g.didChange(c)&&(h="modified"),!0)},g=>{d.read(g),c.read(g);const f=this._diffModel.read(g);if(!f)return;const p=f.diff.read(g);let b;if(p&&h==="original"){const _=a.read(g);_&&(b=p.movedTexts.find(v=>v.lineRangeMapping.original.contains(_.lineNumber)))}if(p&&h==="modified"){const _=l.read(g);_&&(b=p.movedTexts.find(v=>v.lineRangeMapping.modified.contains(_.lineNumber)))}b!==f.movedTextToCompare.get()&&f.movedTextToCompare.set(void 0,void 0),f.setActiveMovedText(b)}))}};u(by,"MovedBlocksLinesPart");let ug=by;ug.movedCodeBlockPadding=4;const fF=class fF{static compute(e){const t=[],n=[];for(const i of e){let s=t.findIndex(r=>!r.intersectsStrict(i));s===-1&&(t.length>=6?s=zke(t,_r(a=>a.intersectWithRangeLength(i),gd)):(s=t.length,t.push(new K3))),t[s].addRange(i),n.push(s)}return new fF(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}};u(fF,"LinesLayout");let iG=fF;const bhe=class bhe extends wN{constructor(e,t,n,i,s){const r=ai("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=n,this._kind=i,this._diffModel=s,this._nodes=ai("div.diff-moved-code-block",{style:{marginRight:"4px"}},[ai("div.text-content@textContent"),ai("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=ci(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(ru(this._nodes.root,{paddingRight:a.map(g=>g.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?m("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive):m("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive):l=this._kind==="original"?m("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive):m("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive);const d=this._register(new Ls(this._nodes.actionBar,{highlightToggledItems:!0})),c=new qn("",l,"",!1);d.push(c,{icon:!1,label:!0});const h=new qn("","Compare",Te.asClassName(ue.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Rt(g=>{const f=this._diffModel.movedTextToCompare.read(g)===n;h.checked=f})),d.push(h,{icon:!1,label:!0})}};u(bhe,"MovedBlockOverlayWidget");let xN=bhe;const _he=class _he extends G{constructor(e,t,n){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=dt(i=>{var s;const r=(s=this._diffModel.read(i))===null||s===void 0?void 0:s.diff.read(i);if(!r)return null;const a=this._diffModel.read(i).movedTextToCompare.read(i),l=this._options.renderIndicators.read(i),d=this._options.showEmptyDecorations.read(i),c=[],h=[];if(!a)for(const f of r.mappings){if(f.lineRangeMapping.originalRange.isEmpty||c.push({range:f.lineRangeMapping.originalRange.toInclusiveRange(),options:l?Awe:Nwe}),f.lineRangeMapping.modifiedRange.isEmpty||h.push({range:f.lineRangeMapping.modifiedRange.toInclusiveRange(),options:l?Mwe:Iwe}),f.lineRangeMapping.modifiedRange.isEmpty||f.lineRangeMapping.originalRange.isEmpty)f.lineRangeMapping.originalRange.isEmpty||c.push({range:f.lineRangeMapping.originalRange.toInclusiveRange(),options:PVe}),f.lineRangeMapping.modifiedRange.isEmpty||h.push({range:f.lineRangeMapping.modifiedRange.toInclusiveRange(),options:NVe});else for(const p of f.lineRangeMapping.innerChanges||[])f.lineRangeMapping.originalRange.contains(p.originalRange.startLineNumber)&&c.push({range:p.originalRange,options:p.originalRange.isEmpty()&&d?FVe:nG}),f.lineRangeMapping.modifiedRange.contains(p.modifiedRange.startLineNumber)&&h.push({range:p.modifiedRange,options:p.modifiedRange.isEmpty()&&d?RVe:Rwe});!f.lineRangeMapping.modifiedRange.isEmpty&&this._options.shouldRenderRevertArrows.read(i)&&!a&&h.push({range:L.fromPositions(new W(f.lineRangeMapping.modifiedRange.startLineNumber,1)),options:OVe})}if(a)for(const f of a.changes){const p=f.originalRange.toInclusiveRange();p&&c.push({range:p,options:l?Awe:Nwe});const b=f.modifiedRange.toInclusiveRange();b&&h.push({range:b,options:l?Mwe:Iwe});for(const _ of f.innerChanges||[])c.push({range:_.originalRange,options:nG}),h.push({range:_.modifiedRange,options:Rwe})}const g=this._diffModel.read(i).activeMovedText.read(i);for(const f of r.movedTexts)c.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(f===g?" currentMove":""),blockPadding:[ug.movedCodeBlockPadding,0,ug.movedCodeBlockPadding,ug.movedCodeBlockPadding]}}),h.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(f===g?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:c,modifiedDecorations:h}}),this._register(yN(this._editors.original,this._decorations.map(i=>i?.originalDecorations||[]))),this._register(yN(this._editors.modified,this._decorations.map(i=>i?.modifiedDecorations||[])))}};u(_he,"DiffEditorDecorations");let sG=_he;const vhe=class vhe extends G{constructor(e,t,n){super(),this._options=e,this._domNode=t,this._dimensions=n,this._sashRatio=Vt("sashRatio",void 0),this.sashLeft=dt(i=>{var s;const r=(s=this._sashRatio.read(i))!==null&&s!==void 0?s:this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(r,i)}),this._sash=this._register(new mr(this._domNode,{getVerticalSashTop:i=>0,getVerticalSashLeft:i=>this.sashLeft.get(),getVerticalSashHeight:i=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(i=>{const s=this._dimensions.width.get(),r=this._computeSashLeft((this._startSashPosition+(i.currentX-i.startX))/s,void 0);this._sashRatio.set(r/s,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register(Rt(i=>{const s=this._options.enableSplitViewResizing.read(i);this._sash.state=s?3:0,this.sashLeft.read(i),this._sash.layout()}))}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_computeSashLeft(e,t){const n=this._dimensions.width.read(t),i=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):i,r=100;return n<=r*2?i:s<r?r:s>n-r?n-r:s}};u(vhe,"DiffEditorSash");let oG=vhe;var Pwe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const yhe=class yhe extends G{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n){super(),this.model=e,this._options=t,this._isDiffUpToDate=Vt("isDiffUpToDate",!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Vt("diff",void 0),this.diff=this._diff,this._unchangedRegions=Vt("unchangedRegion",{regions:[],originalDecorationIds:[],modifiedDecorationIds:[]}),this.unchangedRegions=dt(l=>this._options.hideUnchangedRegions.read(l)?this._unchangedRegions.read(l).regions:(tn(d=>{for(const c of this._unchangedRegions.get().regions)c.collapseAll(d)}),[])),this.movedTextToCompare=Vt("movedTextToCompare",void 0),this._activeMovedText=Vt("activeMovedText",void 0),this._hoveredMovedText=Vt("hoveredMovedText",void 0),this.activeMovedText=dt(l=>{var d,c;return(c=(d=this.movedTextToCompare.read(l))!==null&&d!==void 0?d:this._hoveredMovedText.read(l))!==null&&c!==void 0?c:this._activeMovedText.read(l)}),this._cancellationTokenSource=new En,this._register(He(()=>this._cancellationTokenSource.cancel()));const i=YTe("contentChangedSignal"),s=this._register(new Et(()=>i.trigger(void 0),200)),r=u((l,d,c)=>{const h=lG.fromDiffs(l.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsminimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c)),g=this._unchangedRegions.get(),f=g.originalDecorationIds.map(v=>e.original.getDecorationRange(v)).filter(v=>!!v).map(v=>pt.fromRange(v)),p=g.modifiedDecorationIds.map(v=>e.modified.getDecorationRange(v)).filter(v=>!!v).map(v=>pt.fromRange(v)),b=e.original.deltaDecorations(g.originalDecorationIds,h.map(v=>({range:v.originalRange.toInclusiveRange(),options:{description:"unchanged"}}))),_=e.modified.deltaDecorations(g.modifiedDecorationIds,h.map(v=>({range:v.modifiedRange.toInclusiveRange(),options:{description:"unchanged"}})));for(const v of h)for(let y=0;y<g.regions.length;y++)if(v.originalRange.intersectsStrict(f[y])&&v.modifiedRange.intersectsStrict(p[y])){v.setHiddenModifiedRange(g.regions[y].getHiddenModifiedRange(void 0),d);break}this._unchangedRegions.set({regions:h,originalDecorationIds:b,modifiedDecorationIds:_},d)},"updateUnchangedRegions");this._register(e.modified.onDidChangeContent(l=>{if(this._diff.get()){const c=Sd.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}s.schedule()})),this._register(e.original.onDidChangeContent(l=>{if(this._diff.get()){const c=Sd.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}s.schedule()}));const a=io("documentDiffProviderOptionChanged",n.onDidChange);this._register(Fs((l,d)=>Pwe(this,void 0,void 0,function*(){var c,h;this._options.hideUnchangedRegionsminimumLineCount.read(l),this._options.hideUnchangedRegionsContextLineCount.read(l),s.cancel(),i.read(l),a.read(l),hh(ZD,l),this._isDiffUpToDate.set(!1,void 0);let g=[];d.add(e.original.onDidChangeContent(b=>{const _=Sd.fromModelContentChanges(b.changes);g=pA(g,_)}));let f=[];d.add(e.modified.onDidChangeContent(b=>{const _=Sd.fromModelContentChanges(b.changes);f=pA(f,_)}));let p=yield n.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(l),maxComputationTimeMs:this._options.maxComputationTimeMs.read(l),computeMoves:this._options.showMoves.read(l)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(p=(c=(e.original,e.modified,void 0))!==null&&c!==void 0?c:p,p=(h=(e.original,e.modified,void 0))!==null&&h!==void 0?h:p,tn(b=>{r(p,b),this._lastDiff=p;const _=aG.fromDiffResult(p);this._diff.set(_,b),this._isDiffUpToDate.set(!0,b);const v=this.movedTextToCompare.get();this.movedTextToCompare.set(v?this._lastDiff.moves.find(y=>y.lineRangeMapping.modified.intersect(v.lineRangeMapping.modified)):void 0,b)}))})))}ensureModifiedLineIsVisible(e,t){var n;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const i=this._unchangedRegions.get().regions;for(const s of i)if(s.getHiddenModifiedRange(void 0).contains(e)){s.showModifiedLine(e,t);return}}ensureOriginalLineIsVisible(e,t){var n;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const i=this._unchangedRegions.get().regions;for(const s of i)if(s.getHiddenOriginalRange(void 0).contains(e)){s.showOriginalLine(e,t);return}}waitForDiff(){return Pwe(this,void 0,void 0,function*(){yield wVe(this.isDiffUpToDate,e=>e)})}serializeState(){return{collapsedRegions:this._unchangedRegions.get().regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions.map(i=>pt.deserialize(i.range)),n=this._unchangedRegions.get();tn(i=>{for(const s of n.regions)for(const r of t)if(s.modifiedRange.intersect(r)){s.setHiddenModifiedRange(r,i);break}})}};u(yhe,"DiffEditorViewModel");let rG=yhe;const pF=class pF{static fromDiffResult(e){return new pF(e.changes.map(t=>new TN(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,i){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=i}};u(pF,"DiffState");let aG=pF;const whe=class whe{constructor(e){this.lineRangeMapping=e}};u(whe,"DiffMapping");let TN=whe;const _y=class _y{static fromDiffs(e,t,n,i,s){const r=xr.inverse(e,t,n),a=[];for(const l of r){let d=l.originalRange.startLineNumber,c=l.modifiedRange.startLineNumber,h=l.originalRange.length;const g=d===1&&c===1,f=d+h===t+1&&c+h===n+1;(g||f)&&h>=s+i?(g&&!f&&(h-=s),f&&!g&&(d+=s,c+=s,h-=s),a.push(new _y(d,c,h,0,0))):h>=s*2+i&&(d+=s,c+=s,h-=s*2,a.push(new _y(d,c,h,0,0)))}return a}get originalRange(){return pt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedRange(){return pt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,i,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=Vt("visibleLineCountTop",0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Vt("visibleLineCountBottom",0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=dt(r=>this.visibleLineCountTop.read(r)+this.visibleLineCountBottom.read(r)===this.lineCount&&!this.isDragged.read(r)),this.isDragged=Vt("isDragged",!1),this._visibleLineCountTop.set(i,void 0),this._visibleLineCountBottom.set(s,void 0)}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return pt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return pt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,i=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,i,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),i=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;n<i?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,t):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+i,t)}showOriginalLine(e,t){const n=e-this.originalLineNumber,i=this.originalLineNumber+this.lineCount-e;n<i?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+i-n,this.getMaxVisibleLineCountTop()),t):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-i,this.getMaxVisibleLineCountBottom()),t)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}};u(_y,"UnchangedRegion");let lG=_y;var OH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Che=class Che extends G{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,i,s,r,a,l,d){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=i,this._editor=s,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=d,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Te.asClassName(ue.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const c=this._modifiedEditor.getOption(65);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${c}px`,this._diffActions.style.lineHeight=`${c}px`,this._marginDomNode.appendChild(this._diffActions);let h=0;const g=n.getOption(125)&&!Cr,f=u((p,b)=>{var _;this._contextMenuService.showContextMenu({domForShadowRoot:g&&(_=n.getDomNode())!==null&&_!==void 0?_:void 0,getAnchor:()=>({x:p,y:b}),getActions:()=>{const v=[],y=i.modifiedRange.isEmpty;return v.push(new qn("diff.clipboard.copyDeletedContent",y?i.originalRange.length>1?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalRange.length>1?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>OH(this,void 0,void 0,function*(){const C=this._originalTextModel.getValueInRange(i.originalRange.toExclusiveRange());yield this._clipboardService.writeText(C)}))),i.originalRange.length>1&&v.push(new qn("diff.clipboard.copyDeletedLineContent",y?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalRange.startLineNumber+h):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalRange.startLineNumber+h),void 0,!0,()=>OH(this,void 0,void 0,function*(){let C=this._originalTextModel.getLineContent(i.originalRange.startLineNumber+h);C===""&&(C=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),yield this._clipboardService.writeText(C)}))),n.getOption(89)||v.push(new qn("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>OH(this,void 0,void 0,function*(){this._editor.revert(this._diff)}))),v},autoSelectFirstItem:!0})},"showContextMenu");this._register(Jt(this._diffActions,"mousedown",p=>{const{top:b,height:_}=Cn(this._diffActions),v=Math.floor(c/3);p.preventDefault(),f(p.posx,b+_+v)})),this._register(n.onMouseMove(p=>{(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()?(h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,c),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.rightButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()&&(p.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,c),f(p.event.posx,p.event.posy+c))}))}_updateLightBulbPosition(e,t,n){const{top:i}=Cn(e),s=t-i,r=Math.floor(s/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let d=0;d<this._viewLineCounts.length;d++)if(l+=this._viewLineCounts[d],r<l)return d}return r}};u(Che,"InlineDiffDeletedCodeMargin");let dG=Che;const Fwe=a6;function HVe(o,e,t,n){Kn(n,e.fontInfo);const i=t.length>0,s=new Pd(1e4);let r=0,a=0;const l=[];for(let g=0;g<o.lineTokens.length;g++){const f=g+1,p=o.lineTokens[g],b=o.lineBreakData[g],_=_o.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(b){let v=0;for(const y of b.breakOffsets){const w=p.sliceAndInflate(v,y,0);r=Math.max(r,Owe(a,w,_o.extractWrapped(_,v,y),i,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++,v=y}l.push(b.breakOffsets.length)}else l.push(1),r=Math.max(r,Owe(a,p,_,i,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++}r+=e.scrollBeyondLastColumn;const d=s.build(),c=Fwe?Fwe.createHTML(d):d;n.innerHTML=c;const h=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:h,viewLineCounts:l}}u(HVe,"renderLines$1");const She=class She{constructor(e,t,n,i){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=i}};u(She,"LineSource");let cG=She;const mF=class mF{static fromEditor(e){var t;const n=e.getOptions(),i=n.get(49),s=n.get(142);return new mF(((t=e.getModel())===null||t===void 0?void 0:t.getOptions().tabSize)||0,i,n.get(32),i.typicalHalfwidthCharacterWidth,n.get(102),n.get(65),s.decorationsWidth,n.get(115),n.get(97),n.get(92),n.get(50))}constructor(e,t,n,i,s,r,a,l,d,c,h){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=i,this.scrollBeyondLastColumn=s,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=d,this.renderControlCharacters=c,this.fontLigatures=h}};u(mF,"RenderOptions");let uG=mF;function Owe(o,e,t,n,i,s,r,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(o*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),d=as.isBasicASCII(l,i),c=as.containsRTL(l,d,s),h=y_(new Tr(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,d,c,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Sr.OFF,null),a);return a.appendString("</div>"),h.characterMapping.getHorizontalOffset(h.characterMapping.length)}u(Owe,"renderOriginalLine");var VVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hwe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},JS;let hG=(JS=class extends G{constructor(e,t,n,i,s,r,a){super(),this._editors=e,this._diffModel=t,this._options=n,this._diffEditorWidget=i,this._canIgnoreViewZoneUpdateEvent=s,this._clipboardService=r,this._contextMenuService=a,this._originalTopPadding=Vt("originalTopPadding",0),this._originalScrollOffset=Vt("originalScrollOffset",0),this._originalScrollOffsetAnimated=Dwe(this._originalScrollOffset,this._store),this._modifiedTopPadding=Vt("modifiedTopPadding",0),this._modifiedScrollOffset=Vt("modifiedScrollOffset",0),this._modifiedScrollOffsetAnimated=Dwe(this._modifiedScrollOffset,this._store);let l=!1;const d=Vt("state",0),c=this._register(new Et(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(C=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&c.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(C=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&c.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(C=>{(C.hasChanged(143)||C.hasChanged(65))&&c.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(C=>{(C.hasChanged(143)||C.hasChanged(65))&&c.schedule()}));const h=this._diffModel.map(C=>C?ci(C.model.original.onDidChangeTokens,()=>C.model.original.tokenization.backgroundTokenizationState===2):void 0).map((C,S)=>C?.read(S)),g=new Set,f=new Set,p=dt(C=>{const S=this._diffModel.read(C),k=S?.diff.read(C);if(!S||!k)return null;d.read(C);const E=this._options.renderSideBySide.read(C);return Vwe(this._editors.original,this._editors.modified,k.mappings,g,f,E)}),b=dt(C=>{var S;const k=(S=this._diffModel.read(C))===null||S===void 0?void 0:S.movedTextToCompare.read(C);if(!k)return null;d.read(C);const T=k.changes.map(E=>new TN(E));return Vwe(this._editors.original,this._editors.modified,T,g,f,!0)});function _(){const C=document.createElement("div");return C.className="diagonal-fill",C}u(_,"createFakeLinesDiv");const v=this._register(new ie),y=dt(C=>{var S,k,T,E,D,O,B,H;v.clear();const F=p.read(C)||[],$=[],ee=[],ge=this._modifiedTopPadding.read(C);ge>0&&ee.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:ge,showInHiddenAreas:!0});const X=this._originalTopPadding.read(C);X>0&&$.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:X,showInHiddenAreas:!0});const R=this._options.renderSideBySide.read(C),z=R||(S=this._editors.modified._getViewModel())===null||S===void 0?void 0:S.createLineBreaksComputer();if(z){for(const vt of F)if(vt.diff)for(let Hn=vt.originalRange.startLineNumber;Hn<vt.originalRange.endLineNumberExclusive;Hn++)z?.addRequest(this._editors.original.getModel().getLineContent(Hn),null,null)}const te=(k=z?.finalize())!==null&&k!==void 0?k:[];let fe=0;const me=this._editors.modified.getOption(65),ce=(T=this._diffModel.read(C))===null||T===void 0?void 0:T.movedTextToCompare.read(C),mt=(D=(E=this._editors.original.getModel())===null||E===void 0?void 0:E.mightContainNonBasicASCII())!==null&&D!==void 0?D:!1,$t=(B=(O=this._editors.original.getModel())===null||O===void 0?void 0:O.mightContainRTL())!==null&&B!==void 0?B:!1,hn=uG.fromEditor(this._editors.modified);for(const vt of F)if(vt.diff&&!R){if(!vt.originalRange.isEmpty){h.read(C);const er=document.createElement("div");er.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const fi=new cG(vt.originalRange.mapToLineArray(Yn=>this._editors.original.getModel().tokenization.getLineTokens(Yn)),vt.originalRange.mapToLineArray(Yn=>te[fe++]),mt,$t),ze=[];for(const Yn of vt.diff.innerChanges||[])ze.push(new Qc(Yn.originalRange.delta(-(vt.diff.originalRange.startLineNumber-1)),nG.className,0));const tr=HVe(fi,hn,ze,er),Pr=document.createElement("div");if(Pr.className="inline-deleted-margin-view-zone",Kn(Pr,hn.fontInfo),this._options.renderIndicators.read(C))for(let Yn=0;Yn<tr.heightInLines;Yn++){const Lo=document.createElement("div");Lo.className=`delete-sign ${Te.asClassName(XTe)}`,Lo.setAttribute("style",`position:absolute;top:${Yn*me}px;width:${hn.lineDecorationsWidth}px;height:${me}px;right:0;`),Pr.appendChild(Lo)}let Fr;v.add(new dG(()=>Uh(Fr),Pr,this._editors.modified,vt.diff,this._diffEditorWidget,tr.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Yn=0;Yn<tr.viewLineCounts.length;Yn++){const Lo=tr.viewLineCounts[Yn];Lo>1&&$.push({afterLineNumber:vt.originalRange.startLineNumber+Yn,domNode:_(),heightInPx:(Lo-1)*me,showInHiddenAreas:!0})}ee.push({afterLineNumber:vt.modifiedRange.startLineNumber-1,domNode:er,heightInPx:tr.heightInLines*me,minWidthInPx:tr.minWidthInPx,marginDomNode:Pr,setZoneId(Yn){Fr=Yn},showInHiddenAreas:!0})}const Hn=document.createElement("div");Hn.className="gutter-delete",$.push({afterLineNumber:vt.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:vt.modifiedHeightInPx,marginDomNode:Hn,showInHiddenAreas:!0})}else{const Hn=vt.modifiedHeightInPx-vt.originalHeightInPx;if(Hn>0){if(ce?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(vt.originalRange.endLineNumberExclusive-1))continue;$.push({afterLineNumber:vt.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Hn,showInHiddenAreas:!0})}else{let er=function(){const ze=document.createElement("div");return ze.className="arrow-revert-change "+Te.asClassName(ue.arrowRight),re("div",{},ze)};if(u(er,"createViewZoneMarginArrow"),ce?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(vt.modifiedRange.endLineNumberExclusive-1))continue;let fi;vt.diff&&vt.diff.modifiedRange.isEmpty&&this._options.shouldRenderRevertArrows.read(C)&&(fi=er()),ee.push({afterLineNumber:vt.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-Hn,marginDomNode:fi,showInHiddenAreas:!0})}}for(const vt of(H=b.read(C))!==null&&H!==void 0?H:[]){if(!ce?.lineRangeMapping.original.intersect(vt.originalRange)||!ce?.lineRangeMapping.modified.intersect(vt.modifiedRange))continue;const Hn=vt.modifiedHeightInPx-vt.originalHeightInPx;Hn>0?$.push({afterLineNumber:vt.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Hn,showInHiddenAreas:!0}):ee.push({afterLineNumber:vt.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-Hn,showInHiddenAreas:!0})}return{orig:$,mod:ee}});this._register(Fs(C=>{const S=ba.capture(this._editors.modified),k=y.read(C);l=!0,this._editors.original.changeViewZones(T=>{for(const E of g)T.removeZone(E);g.clear();for(const E of k.orig){const D=T.addZone(E);E.setZoneId&&E.setZoneId(D),g.add(D)}}),this._editors.modified.changeViewZones(T=>{for(const E of f)T.removeZone(E);f.clear();for(const E of k.mod){const D=T.addZone(E);E.setZoneId&&E.setZoneId(D),f.add(D)}}),l=!1,S.restore(this._editors.modified)})),this._register(He(()=>{this._editors.original.changeViewZones(C=>{for(const S of g)C.removeZone(S);g.clear()}),this._editors.modified.changeViewZones(C=>{for(const S of f)C.removeZone(S);f.clear()})}));let w=!1;this._register(this._editors.original.onDidScrollChange(C=>{C.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(C.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(C=>{C.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(C.scrollLeft),w=!1)})),this._originalScrollTop=ci(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ci(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Rt(C=>{const S=this._originalScrollTop.read(C)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(C))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(C));S!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(S,1)})),this._register(Rt(C=>{const S=this._modifiedScrollTop.read(C)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(C))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(C));S!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(S,1)})),this._register(Rt(C=>{var S;const k=(S=this._diffModel.read(C))===null||S===void 0?void 0:S.movedTextToCompare.read(C);let T=0;if(k){const E=this._editors.original.getTopForLineNumber(k.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();T=this._editors.modified.getTopForLineNumber(k.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-E}T>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(T,void 0)):T<0?(this._modifiedTopPadding.set(-T,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-T,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+T,void 0,!0)}))}},u(JS,"ViewZoneManager"),JS);hG=VVe([Hwe(5,Sa),Hwe(6,To)],hG);function Vwe(o,e,t,n,i,s){const r=new pa(Wwe(o,n)),a=new pa(Wwe(e,i)),l=o.getOption(65),d=e.getOption(65),c=[];let h=0,g=0;function f(p,b){for(;;){let _=r.peek(),v=a.peek();if(_&&_.lineNumber>=p&&(_=void 0),v&&v.lineNumber>=b&&(v=void 0),!_&&!v)break;const y=_?_.lineNumber-h:Number.MAX_VALUE,w=v?v.lineNumber-g:Number.MAX_VALUE;y<w?(r.dequeue(),v={lineNumber:_.lineNumber-h+g,heightInPx:0}):y>w?(a.dequeue(),_={lineNumber:v.lineNumber-g+h,heightInPx:0}):(r.dequeue(),a.dequeue()),c.push({originalRange:pt.ofLength(_.lineNumber,1),modifiedRange:pt.ofLength(v.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:d+v.heightInPx,diff:void 0})}}u(f,"handleAlignmentsOutsideOfDiffs");for(const p of t){let w=function(C,S){var k,T,E,D;if(C<y||S<v)return;if(_)_=!1;else if(C===y||S===v)return;const O=new pt(y,C),B=new pt(v,S);if(O.isEmpty&&B.isEmpty)return;const H=(T=(k=r.takeWhile($=>$.lineNumber<C))===null||k===void 0?void 0:k.reduce(($,ee)=>$+ee.heightInPx,0))!==null&&T!==void 0?T:0,F=(D=(E=a.takeWhile($=>$.lineNumber<S))===null||E===void 0?void 0:E.reduce(($,ee)=>$+ee.heightInPx,0))!==null&&D!==void 0?D:0;c.push({originalRange:O,modifiedRange:B,originalHeightInPx:O.length*l+H,modifiedHeightInPx:B.length*d+F,diff:p.lineRangeMapping}),y=C,v=S};u(w,"emitAlignment");const b=p.lineRangeMapping;f(b.originalRange.startLineNumber,b.modifiedRange.startLineNumber);let _=!0,v=b.modifiedRange.startLineNumber,y=b.originalRange.startLineNumber;if(s)for(const C of b.innerChanges||[])C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&w(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber),C.originalRange.endColumn<o.getModel().getLineMaxColumn(C.originalRange.endLineNumber)&&w(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber);w(b.originalRange.endLineNumberExclusive,b.modifiedRange.endLineNumberExclusive),h=b.originalRange.endLineNumberExclusive,g=b.modifiedRange.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),c}u(Vwe,"computeRangeAlignment");function Wwe(o,e){const t=[],n=[],i=o.getOption(143).wrappingColumn!==-1,s=o._getViewModel().coordinatesConverter,r=o.getOption(65);if(i)for(let l=1;l<=o.getModel().getLineCount();l++){const d=s.getModelLineViewLineCount(l);d>1&&n.push({lineNumber:l,heightInPx:r*(d-1)})}for(const l of o.getWhitespaces()){if(e.has(l.id))continue;const d=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new W(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:d,heightInPx:l.height})}return CVe(t,n,l=>l.lineNumber,(l,d)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+d.heightInPx}))}u(Wwe,"getAdditionalLineHeights");var WVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BVe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Gr,QS;let Md=Gr=(QS=class extends G{constructor(e,t,n,i,s,r,a,l){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=i,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._options=a,this._themeService=l;const d=ci(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=dt(f=>{const p=d.read(f),b=p.getColor(lxe)||(p.getColor(rxe)||vM).transparent(2),_=p.getColor(dxe)||(p.getColor(axe)||yM).transparent(2);return{insertColor:b,removeColor:_}}),h=ci(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),g=ci(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollHeight());this._register(Fs((f,p)=>{if(!this._options.renderOverviewRuler.read(f))return;const b=ht(document.createElement("div"));b.setClassName("diffViewport"),b.setPosition("absolute");const _=ai("div.diffOverview",{style:{position:"absolute",top:"0px",width:Gr.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;p.add(JE(_,b.domNode)),p.add(Jt(_,pe.POINTER_DOWN,v=>{this._editors.modified.delegateVerticalScrollbarPointerDown(v)})),p.add(q(_,pe.MOUSE_WHEEL,v=>{this._editors.modified.delegateScrollFromMouseWheelEvent(v)},{passive:!1})),p.add(JE(this._rootElement,_)),p.add(Fs((v,y)=>{const w=this._diffModel.read(v),C=this._editors.original.createOverviewRuler("original diffOverviewRuler");C&&(y.add(C),y.add(JE(_,C.getDomNode())));const S=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(S&&(y.add(S),y.add(JE(_,S.getDomNode()))),!C||!S)return;const k=io("viewZoneChanged",this._editors.original.onDidChangeViewZones),T=io("viewZoneChanged",this._editors.modified.onDidChangeViewZones),E=io("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),D=io("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);y.add(Rt(O=>{var B;k.read(O),T.read(O),E.read(O),D.read(O);const H=c.read(O),F=(B=w?.diff.read(O))===null||B===void 0?void 0:B.mappings;function $(X,R,z){const te=z._getViewModel();return te?X.filter(fe=>fe.length>0).map(fe=>{const me=te.coordinatesConverter.convertModelPositionToViewPosition(new W(fe.startLineNumber,1)),ce=te.coordinatesConverter.convertModelPositionToViewPosition(new W(fe.endLineNumberExclusive,1)),mt=ce.lineNumber-me.lineNumber;return new Su(me.lineNumber,ce.lineNumber,mt,R.toString())}):[]}u($,"createZones");const ee=$((F||[]).map(X=>X.lineRangeMapping.originalRange),H.removeColor,this._editors.original),ge=$((F||[]).map(X=>X.lineRangeMapping.modifiedRange),H.insertColor,this._editors.modified);C?.setZones(ee),S?.setZones(ge)})),y.add(Rt(O=>{const B=this._rootHeight.read(O),H=this._rootWidth.read(O),F=this._modifiedEditorLayoutInfo.read(O);if(F){const $=Gr.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Gr.ONE_OVERVIEW_WIDTH;C.setLayout({top:0,height:B,right:$+Gr.ONE_OVERVIEW_WIDTH,width:Gr.ONE_OVERVIEW_WIDTH}),S.setLayout({top:0,height:B,right:0,width:Gr.ONE_OVERVIEW_WIDTH});const ee=h.read(O),ge=g.read(O),X=this._editors.modified.getOption(101),R=new ww(X.verticalHasArrows?X.arrowSize:0,X.verticalScrollbarSize,0,F.height,ge,ee);b.setTop(R.getSliderPosition()),b.setHeight(R.getSliderSize())}else b.setTop(0),b.setHeight(0);_.style.height=B+"px",_.style.left=H-Gr.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",b.setWidth(Gr.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}))}},u(QS,"OverviewRulerPart"),QS);Md.ONE_OVERVIEW_WIDTH=15;Md.ENTIRE_DIFF_OVERVIEW_WIDTH=Gr.ONE_OVERVIEW_WIDTH*2;Md=Gr=WVe([BVe(7,On)],Md);var ex;let Fp=(ex=class{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}},u(ex,"TreeElement"),ex);var tx;let Bwe=(tx=class extends Fp{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}},u(tx,"OutlineElement"),tx);var nx;let UVe=(nx=class extends Fp{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}},u(nx,"OutlineGroup"),nx);var ia;let zVe=(ia=class extends Fp{static create(e,t,n){const i=new En(n),s=new ia(t.uri),r=e.ordered(t),a=r.map((d,c)=>{var h;const g=Fp.findId(`provider_${c}`,s),f=new UVe(g,s,(h=d.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",c);return Promise.resolve(d.provideDocumentSymbols(t,i.token)).then(p=>{for(const b of p||[])ia._makeOutlineElement(b,f);return f},p=>(Ln(p),f)).then(p=>{Fp.empty(p)?p.remove():s._groups.set(g,p)})}),l=e.onDidChange(()=>{const d=e.ordered(t);jn(d,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?ia.create(e,t,n):s._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const n=Fp.findId(e,t),i=new Bwe(n,t,e);if(e.children)for(const s of e.children)ia._makeOutlineElement(s,i);t.children.set(i.id,i)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=et.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof Bwe?e.push(t.symbol):e.push(...et.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return ia._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>W.compare(L.getStartPosition(n.range),L.getStartPosition(i.range))||W.compare(L.getEndPosition(i.range),L.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&ia._flattenDocumentSymbols(e,i.children,i.name)}},u(ia,"OutlineModel"),ia);var ZTe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JTe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},GVe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},ix;let gG=(ix=class extends G{get isUpdatingViewZones(){return this._isUpdatingViewZones}constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._languageFeaturesService=i,this._isUpdatingViewZones=!1,this._modifiedModel=ci(this._editors.modified.onDidChangeModel,()=>this._editors.modified.getModel()),this._modifiedOutlineSource=vC("modified outline source",(d,c)=>{const h=this._modifiedModel.read(d);if(h)return c.add(new pG(this._languageFeaturesService,h))}),this._register(this._editors.original.onDidChangeCursorPosition(d=>{if(d.reason===3){const c=this._diffModel.get();tn(h=>{for(const g of this._editors.original.getSelections()||[])c?.ensureOriginalLineIsVisible(g.getStartPosition().lineNumber,h),c?.ensureOriginalLineIsVisible(g.getEndPosition().lineNumber,h)})}})),this._register(this._editors.modified.onDidChangeCursorPosition(d=>{if(d.reason===3){const c=this._diffModel.get();tn(h=>{for(const g of this._editors.modified.getSelections()||[])c?.ensureModifiedLineIsVisible(g.getStartPosition().lineNumber,h),c?.ensureModifiedLineIsVisible(g.getEndPosition().lineNumber,h)})}}));const s=this._diffModel.map((d,c)=>{var h,g;return((h=d?.diff.read(c))===null||h===void 0?void 0:h.mappings.length)===0?[]:(g=d?.unchangedRegions.read(c))!==null&&g!==void 0?g:[]}),r=vC("view zones",(d,c)=>{const h=[],g=[],f=this._options.renderSideBySide.read(d),p=this._modifiedOutlineSource.read(d);if(!p)return{origViewZones:h,modViewZones:g};const b=s.read(d);for(const _ of b)if(!_.shouldHideControls(d)){{const v=dt(w=>_.getHiddenOriginalRange(w).startLineNumber-1),y=new Bb(v,24);h.push(y),c.add(new LN(this._editors.original,y,_,_.originalRange,!f,p,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,void 0),this._options))}{const v=dt(w=>_.getHiddenModifiedRange(w).startLineNumber-1),y=new Bb(v,24);g.push(y),c.add(new LN(this._editors.modified,y,_,_.modifiedRange,!1,p,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,void 0),this._options))}}return{origViewZones:h,modViewZones:g}}),a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},l={description:"Fold Unchanged",glyphMarginHoverMessage:new zn(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Te.asClassName(ue.fold),zIndex:10001};this._register(yN(this._editors.original,dt(d=>{const c=s.read(d),h=c.map(g=>({range:g.originalRange.toInclusiveRange(),options:a}));for(const g of c)g.shouldHideControls(d)&&h.push({range:L.fromPositions(new W(g.originalLineNumber,1)),options:l});return h}))),this._register(yN(this._editors.modified,dt(d=>{const c=s.read(d),h=c.map(g=>({range:g.modifiedRange.toInclusiveRange(),options:a}));for(const g of c)g.shouldHideControls(d)&&h.push({range:pt.ofLength(g.modifiedLineNumber,1).toInclusiveRange(),options:l});return h}))),this._register(SN(this._editors.original,r.map(d=>d.origViewZones),d=>this._isUpdatingViewZones=d)),this._register(SN(this._editors.modified,r.map(d=>d.modViewZones),d=>this._isUpdatingViewZones=d)),this._register(Rt(d=>{const c=s.read(d);this._editors.original.setHiddenAreas(c.map(h=>h.getHiddenOriginalRange(d).toInclusiveRange()).filter(Ny)),this._editors.modified.setHiddenAreas(c.map(h=>h.getHiddenModifiedRange(d).toInclusiveRange()).filter(Ny))})),this._register(this._editors.modified.onMouseUp(d=>{var c;if(!d.event.rightButton&&d.target.position&&(!((c=d.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const h=d.target.position.lineNumber,g=this._diffModel.get();if(!g)return;const f=g.unchangedRegions.get().find(p=>p.modifiedRange.includes(h));if(!f)return;f.collapseAll(void 0),d.event.stopPropagation(),d.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(d=>{var c;if(!d.event.rightButton&&d.target.position&&(!((c=d.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const h=d.target.position.lineNumber,g=this._diffModel.get();if(!g)return;const f=g.unchangedRegions.get().find(p=>p.originalRange.includes(h));if(!f)return;f.collapseAll(void 0),d.event.stopPropagation(),d.event.preventDefault()}}))}},u(ix,"UnchangedRangesFeature"),ix);gG=ZTe([JTe(3,we)],gG);const xhe=class xhe extends En{dispose(){super.dispose(!0)}};u(xhe,"DisposableCancellationTokenSource");let fG=xhe;var sx;let pG=(sx=class extends G{constructor(e,t){super(),this._languageFeaturesService=e,this._textModel=t,this._currentModel=Vt("current model",void 0);const n=io("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),i=io("_textModel.onDidChangeContent",Ce.debounce(s=>this._textModel.onDidChangeContent(s),()=>{},100));this._register(Fs((s,r)=>GVe(this,void 0,void 0,function*(){n.read(s),i.read(s);const a=r.add(new fG),l=yield zVe.create(this._languageFeaturesService.documentSymbolProvider,this._textModel,a.token);r.isDisposed||this._currentModel.set(l,void 0)})))}getBreadcrumbItems(e,t){const n=this._currentModel.read(t);if(!n)return[];const i=n.asListOfDocumentSymbols().filter(s=>e.contains(s.range.startLineNumber)&&!e.contains(s.range.endLineNumber));return i.sort(L1e(_r(s=>s.range.endLineNumber-s.range.startLineNumber,gd))),i.map(s=>({name:s.name,kind:s.kind,startLineNumber:s.range.startLineNumber}))}},u(sx,"OutlineSource"),sx);pG=ZTe([JTe(0,we)],pG);const The=class The extends wN{constructor(e,t,n,i,s,r,a,l){const d=ai("div.diff-hidden-lines-widget");super(e,t,d.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=i,this.hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=ai("div.diff-hidden-lines",[ai("div.top@top",{title:m("diff.hiddenLines.top","Click or drag to show more above")}),ai("div.center@content",{style:{display:"flex"}},[ai("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[re("a",{title:m("showAll","Show all"),role:"button",onclick:()=>{this.showAll()}},...iu("$(unfold)"))]),ai("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),ai("div.bottom@bottom",{title:m("diff.bottom","Click or drag to show more below"),role:"button"})]),d.root.appendChild(this._nodes.root);const c=ci(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this.hide?wi(this._nodes.first):this._register(ru(this._nodes.first,{width:c.map(g=>g.contentLeft)}));const h=this._editor;this._register(q(this._nodes.top,"mousedown",g=>{if(g.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),g.preventDefault();const f=g.clientY;let p=!1;const b=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set(!0,void 0);const _=q(window,"mousemove",y=>{const C=y.clientY-f;p=p||Math.abs(C)>2;const S=Math.round(C/h.getOption(65)),k=Math.max(0,Math.min(b+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(k,void 0)}),v=q(window,"mouseup",y=>{p||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(!1,void 0),_.dispose(),v.dispose()})})),this._register(q(this._nodes.bottom,"mousedown",g=>{if(g.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),g.preventDefault();const f=g.clientY;let p=!1;const b=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set(!0,void 0);const _=q(window,"mousemove",y=>{const C=y.clientY-f;p=p||Math.abs(C)>2;const S=Math.round(C/h.getOption(65)),k=Math.max(0,Math.min(b-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),T=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(k,void 0);const E=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(E-T))}),v=q(window,"mouseup",y=>{if(this._unchangedRegion.isDragged.set(!1,void 0),!p){const w=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(C-w))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),v.dispose()})})),this._register(Rt(g=>{const f=[];if(!this.hide){const p=n.getHiddenModifiedRange(g).length,b=m("hiddenLines","{0} hidden lines",p),_=re("span",{title:m("diff.hiddenLines.expandAll","Double click to unfold")},b);_.addEventListener("dblclick",w=>{w.button===0&&(w.preventDefault(),this.showAll())}),f.push(_);const v=this._unchangedRegion.getHiddenModifiedRange(g),y=this._modifiedOutlineSource.getBreadcrumbItems(v,g);if(y.length>0){f.push(re("span",void 0,"  |  "));for(let w=0;w<y.length;w++){const C=y[w],S=_D.toIcon(C.kind),k=ai("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[PB(S)," ",C.name,...w===y.length-1?[]:[PB(ue.chevronRight)]]).root;f.push(k),k.onclick=()=>{this._revealModifiedHiddenLine(C.startLineNumber)}}}}wi(this._nodes.others,...f)}))}showAll(){this._unchangedRegion.showAll(void 0)}};u(The,"CollapsedCodeOverlayWidget");let LN=The;I("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},m("diffEditor.move.border","The border color for text that got moved in the diff editor."));I("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},m("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));const bF=class bF extends G{constructor(){super(...arguments),this._id=++bF.idCounter,this._onDidDispose=this._register(new V),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=0){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._targetEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};u(bF,"DelegatingEditor");let EN=bF;EN.idCounter=0;var jVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Uwe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ox;let mG=(ox=class extends G{constructor(e,t,n,i,s,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._createInnerEditor=s,this._instantiationService=r,this._keybindingService=a,this._onDidContentSizeChange=this._register(new V),this.original=this._register(this._createLeftHandSideEditor(n.editorOptions.get(),i.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(n.editorOptions.get(),i.modifiedEditor||{})),this._register(XO({createEmptyChangeSummary:()=>({}),handleChange:(l,d)=>(l.didChange(n.editorOptions)&&Object.assign(d,l.change.changedOptions),!0)},(l,d)=>{n.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,d)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,d))}))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return i.setContextValue("isInDiffLeftEditor",!0),i}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return i.setContextValue("isInDiffRightEditor",!0),i}_constructInnerEditor(e,t,n,i){const s=this._createInnerEditor(e,t,n,i);return this._register(s.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Md.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=Mr.revealHorizontalRightPadding.defaultValue+Md.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t=Object.assign(Object.assign({},e),{dimension:{height:0,width:0}});return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const n=m("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||t===void 0?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+n:e?e.replaceAll(n,""):""}},u(ox,"DiffEditorEditors"),ox);mG=jVe([Uwe(5,Pe),Uwe(6,At)],mG);const Lhe=class Lhe{get editorOptions(){return this._options}constructor(e,t){this.diffEditorWidth=t,this.couldShowInlineViewBecauseOfSize=dt(i=>this._options.read(i).renderSideBySide&&this.diffEditorWidth.read(i)<=this._options.read(i).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=dt(i=>this._options.read(i).renderOverviewRuler),this.renderSideBySide=dt(i=>this._options.read(i).renderSideBySide&&!(this._options.read(i).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(i))),this.readOnly=dt(i=>this._options.read(i).readOnly),this.shouldRenderRevertArrows=dt(i=>!(!this._options.read(i).renderMarginRevertIcon||!this.renderSideBySide.read(i)||this.readOnly.read(i))),this.renderIndicators=dt(i=>this._options.read(i).renderIndicators),this.enableSplitViewResizing=dt(i=>this._options.read(i).enableSplitViewResizing),this.splitViewDefaultRatio=dt(i=>this._options.read(i).splitViewDefaultRatio),this.ignoreTrimWhitespace=dt(i=>this._options.read(i).ignoreTrimWhitespace),this.maxComputationTimeMs=dt(i=>this._options.read(i).maxComputationTime),this.showMoves=dt(i=>this._options.read(i).experimental.showMoves&&this.renderSideBySide.read(i)),this.isInEmbeddedEditor=dt(i=>this._options.read(i).isInEmbeddedEditor),this.diffWordWrap=dt(i=>this._options.read(i).diffWordWrap),this.originalEditable=dt(i=>this._options.read(i).originalEditable),this.diffCodeLens=dt(i=>this._options.read(i).diffCodeLens),this.accessibilityVerbose=dt(i=>this._options.read(i).accessibilityVerbose),this.diffAlgorithm=dt(i=>this._options.read(i).diffAlgorithm),this.showEmptyDecorations=dt(i=>this._options.read(i).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=dt(i=>this._options.read(i).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=dt(i=>this._options.read(i).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=dt(i=>this._options.read(i).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=dt(i=>this._options.read(i).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsminimumLineCount=dt(i=>this._options.read(i).hideUnchangedRegions.minimumLineCount);const n=Object.assign(Object.assign({},e),zwe(e,Bi));this._options=Vt("options",n)}updateOptions(e){const t=zwe(e,this._options.get()),n=Object.assign(Object.assign(Object.assign({},this._options.get()),e),t);this._options.set(n,void 0,{changedOptions:e})}};u(Lhe,"DiffEditorOptions");let bG=Lhe;function zwe(o,e){var t,n,i,s,r,a,l,d;return{enableSplitViewResizing:Se(o.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:V1e(o.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Se(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Se(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:nd(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:nd(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Se(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Se(o.renderIndicators,e.renderIndicators),originalEditable:Se(o.originalEditable,e.originalEditable),diffCodeLens:Se(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Se(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:dn(o.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:dn(o.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Se(o.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Se((t=o.experimental)===null||t===void 0?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:Se((n=o.experimental)===null||n===void 0?void 0:n.showEmptyDecorations,e.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:Se((s=(i=o.hideUnchangedRegions)===null||i===void 0?void 0:i.enabled)!==null&&s!==void 0?s:(r=o.experimental)===null||r===void 0?void 0:r.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:nd((a=o.hideUnchangedRegions)===null||a===void 0?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:nd((l=o.hideUnchangedRegions)===null||l===void 0?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:nd((d=o.hideUnchangedRegions)===null||d===void 0?void 0:d.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Se(o.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Se(o.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:nd(o.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Se(o.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited)}}u(zwe,"validateDiffEditorOptions");var KVe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$_=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},rx;let _G=(rx=class extends EN{constructor(e,t,n,i,s,r,a,l){var d;super(),this._domElement=e,this._parentContextKeyService=i,this._parentInstantiationService=s,this._audioCueService=a,this._editorProgressService=l,this.elements=ai("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[ai("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[re("span",{},"No Changes")]),ai("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),ai("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),ai("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=this._register(bN("diffModel",void 0)),this.onDidChangeModel=Ce.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new Wg([Re,this._contextKeyService])),this._boundarySashes=Vt("boundarySashes",void 0),this._accessibleDiffViewerShouldBeVisible=Vt("accessibleDiffViewerShouldBeVisible",!1),this._accessibleDiffViewerVisible=dt(b=>this._options.onlyShowAccessibleDiffViewer.read(b)?!0:this._accessibleDiffViewerShouldBeVisible.read(b)),this.movedBlocksLinesPart=Vt("MovedBlocksLinesPart",void 0),this._layoutInfo=dt(b=>{var _,v,y;const w=this._rootSizeObserver.width.read(b),C=this._rootSizeObserver.height.read(b),S=(_=this._sash.read(b))===null||_===void 0?void 0:_.sashLeft.read(b),k=S??Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),T=w-k-(this._options.renderOverviewRuler.read(b)?Md.ENTIRE_DIFF_OVERVIEW_WIDTH:0),E=(y=(v=this.movedBlocksLinesPart.read(b))===null||v===void 0?void 0:v.width.read(b))!==null&&y!==void 0?y:0,D=k-E;return this.elements.original.style.width=D+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=T+"px",this.elements.modified.style.left=k+"px",this._editors.original.layout({width:D,height:C}),this._editors.modified.layout({width:T,height:C}),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((b,_)=>b?.diff.read(_)),this.onDidUpdateDiff=Ce.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._contextKeyService.createKey("diffEditorVersion",2),this._domElement.appendChild(this.elements.root),this._register(He(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new $z(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout((d=t.automaticLayout)!==null&&d!==void 0?d:!1),this._options=new bG(t,this._rootSizeObserver.width),this._contextKeyService.createKey(M.isEmbeddedDiffEditor.key,!1);const c=M.isEmbeddedDiffEditor.bindTo(this._contextKeyService);this._register(Rt(b=>{c.set(this._options.isInEmbeddedEditor.read(b))}));const h=M.comparingMovedCode.bindTo(this._contextKeyService);this._register(Rt(b=>{var _;h.set(!!(!((_=this._diffModel.read(b))===null||_===void 0)&&_.movedTextToCompare.read(b)))}));const g=M.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);this._register(Rt(b=>{g.set(this._options.couldShowInlineViewBecauseOfSize.read(b))})),this._editors=this._register(this._instantiationService.createInstance(mG,this.elements.original,this.elements.modified,this._options,n,(b,_,v,y)=>this._createInnerEditor(b,_,v,y))),this._sash=vC("sash",(b,_)=>{const v=this._options.renderSideBySide.read(b);if(this.elements.root.classList.toggle("side-by-side",v),!v)return;const y=_.add(new oG(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((w,C)=>w-(this._options.renderOverviewRuler.read(C)?Md.ENTIRE_DIFF_OVERVIEW_WIDTH:0))}));return _.add(Rt(w=>{const C=this._boundarySashes.read(w);C&&y.setBoundarySashes(C)})),y}),this._register(yC(this._sash,!0)),this._register(Fs((b,_)=>{this.unchangedRangesFeature=_.add(this._instantiationService.createInstance(hh(gG,b),this._editors,this._diffModel,this._options))})),this._register(Fs((b,_)=>{_.add(new(hh(sG,b))(this._editors,this._diffModel,this._options))})),this._register(Fs((b,_)=>{_.add(this._instantiationService.createInstance(hh(hG,b),this._editors,this._diffModel,this._options,this,()=>this.unchangedRangesFeature.isUpdatingViewZones))})),this._register(Fs((b,_)=>{_.add(this._instantiationService.createInstance(hh(Md,b),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(v=>v.modifiedEditor),this._options))})),this._register(Fs((b,_)=>{this._accessibleDiffViewer=_.add(this._register(this._instantiationService.createInstance(hh(qz,b),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(v,y)=>this._accessibleDiffViewerShouldBeVisible.set(v,y),this._options.onlyShowAccessibleDiffViewer.map(v=>!v),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((v,y)=>{var w;return(w=v?.diff.read(y))===null||w===void 0?void 0:w.mappings.map(C=>C.lineRangeMapping)}),this._editors)))}));const f=this._accessibleDiffViewerVisible.map(b=>b?"hidden":"visible");this._register(ru(this.elements.modified,{visibility:f})),this._register(ru(this.elements.original,{visibility:f})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._register(yC(this._layoutInfo,!0)),this._register(Fs((b,_)=>{this.movedBlocksLinesPart.set(_.add(new(hh(ug,b))(this.elements.root,this._diffModel,this._layoutInfo.map(v=>v.originalEditor),this._layoutInfo.map(v=>v.modifiedEditor),this._editors)),void 0)})),this._register(ru(this.elements.overlay,{width:this._layoutInfo.map((b,_)=>b.originalEditor.width+(this._options.renderSideBySide.read(_)?0:b.modifiedEditor.width)),visibility:dt(b=>{var _,v;return this._options.hideUnchangedRegions.read(b)&&((v=(_=this._diffModel.read(b))===null||_===void 0?void 0:_.diff.read(b))===null||v===void 0?void 0:v.mappings.length)===0?"visible":"hidden"})})),this._register(this._editors.modified.onMouseDown(b=>{var _,v;if(!b.event.rightButton&&b.target.position&&(!((_=b.target.element)===null||_===void 0)&&_.className.includes("arrow-revert-change"))){const y=b.target.position.lineNumber,w=b.target,C=this._diffModel.get();if(!C)return;const S=(v=C.diff.get())===null||v===void 0?void 0:v.mappings;if(!S)return;const k=S.find(T=>w?.detail.afterLineNumber===T.lineRangeMapping.modifiedRange.startLineNumber-1||T.lineRangeMapping.modifiedRange.startLineNumber===y);if(!k)return;this.revert(k.lineRangeMapping),b.event.stopPropagation()}})),this._register(Ce.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,b=>{var _,v;if(b?.reason===3){const y=(v=(_=this._diffModel.get())===null||_===void 0?void 0:_.diff.get())===null||v===void 0?void 0:v.mappings.find(w=>w.lineRangeMapping.modifiedRange.contains(b.position.lineNumber));y?.lineRangeMapping.modifiedRange.isEmpty?this._audioCueService.playAudioCue(rt.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):y?.lineRangeMapping.originalRange.isEmpty?this._audioCueService.playAudioCue(rt.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):y&&this._audioCueService.playAudioCue(rt.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}));const p=this._diffModel.map((b,_)=>b?.isDiffUpToDate.read(_));this._register(Fs((b,_)=>{if(p.read(b)===!1){const v=this._editorProgressService.show(!0,1e3);_.add(He(()=>v.done()))}}))}_createInnerEditor(e,t,n,i){return e.createInstance(Bg,t,n,i)}_createDiffEditorContributions(){const e=ng.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(n){Be(n)}}get _targetEditor(){return this._editors.modified}getEditorType(){return v_.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;const t=this._editors.original.saveViewState(),n=this._editors.modified.saveViewState();return{original:t,modified:n,modelState:(e=this._diffModel.get())===null||e===void 0?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&((t=this._diffModel.get())===null||t===void 0||t.restoreSerializedState(n.modelState))}}createViewModel(e){return new rG(e,this._options,this._instantiationService.createInstance(Yw,{diffAlgorithm:this._options.diffAlgorithm.get()}))}getModel(){var e,t;return(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.model)!==null&&t!==void 0?t:null}setModel(e){!e&&this._diffModel.get()&&this._accessibleDiffViewer.close();const t=e?"model"in e?e:this.createViewModel(e):void 0;this._editors.original.setModel(t?t.model.original:null),this._editors.modified.setModel(t?t.model.modified:null),tn(n=>{this._diffModel.set(t,n)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get();return t?$Ve(t):null}revert(e){var t;const n=(t=this._diffModel.get())===null||t===void 0?void 0:t.model;if(!n)return;const i=e.innerChanges?e.innerChanges.map(s=>({range:s.modifiedRange,text:n.original.getValueInRange(s.originalRange)})):[{range:e.modifiedRange.toExclusiveRange(),text:n.original.getValueInRange(e.originalRange.toExclusiveRange())}];this._editors.modified.executeEdits("diffEditor",i)}accessibleDiffViewerNext(){this._accessibleDiffViewer.next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.prev()}},u(rx,"DiffEditorWidget2"),rx);_G=KVe([$_(3,Re),$_(4,Pe),$_(5,gt),$_(6,wf),$_(7,Il)],_G);function $Ve(o){return o.mappings.map(e=>{const t=e.lineRangeMapping;let n,i,s,r,a=t.innerChanges;return t.originalRange.isEmpty?(n=t.originalRange.startLineNumber-1,i=0,a=void 0):(n=t.originalRange.startLineNumber,i=t.originalRange.endLineNumberExclusive-1),t.modifiedRange.isEmpty?(s=t.modifiedRange.startLineNumber-1,r=0,a=void 0):(s=t.modifiedRange.startLineNumber,r=t.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:i,modifiedStartLineNumber:s,modifiedEndLineNumber:r,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}u($Ve,"toLineChanges");var ZO=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},St=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};let qVe=0,Gwe=!1;function YVe(o){if(!o){if(Gwe)return;Gwe=!0}eNe(o||document.body)}u(YVe,"createAriaDomNode");var ax;let wC=(ax=class extends Bg{constructor(e,t,n,i,s,r,a,l,d,c,h,g){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||pI.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+pI.accessibilityHelpMessage,super(e,f,{},n,i,s,r,l,d,c,h,g),a instanceof Ob?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,YVe(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++qVe,s=ne.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),G.None;const t=e.id,n=e.label,i=ne.and(ne.equals("editorId",this.getId()),ne.deserialize(e.precondition)),s=e.keybindings,r=ne.and(i,ne.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,d=u((f,...p)=>Promise.resolve(e.run(this,...p)),"run"),c=new ie,h=this.getId()+":"+t;if(c.add(lt.registerCommand(h,d)),a){const f={command:{id:h,title:n},when:i,group:a,order:l};c.add(Ni.appendMenuItem(A.EditorContext,f))}if(Array.isArray(s))for(const f of s)c.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,d,r));const g=new rA(h,n,n,i,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,g),c.add(He(()=>{this._actions.delete(t)})),c}_triggerCommand(e,t){if(this._codeEditorService instanceof ZA)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}},u(ax,"StandaloneCodeEditor"),ax);wC=ZO([St(2,Pe),St(3,gt),St(4,un),St(5,Re),St(6,At),St(7,On),St(8,_n),St(9,El),St(10,Pt),St(11,we)],wC);var lx;let vG=(lx=class extends wC{constructor(e,t,n,i,s,r,a,l,d,c,h,g,f,p,b){const _=Object.assign({},t);Hb(c,_,!1);const v=l.registerEditorContainer(e);typeof _.theme=="string"&&l.setTheme(_.theme),typeof _.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(!!_.autoDetectHighContrast);const y=_.model;delete _.model,super(e,_,n,i,s,r,a,l,d,h,p,b),this._configurationService=c,this._standaloneThemeService=l,this._register(v);let w;if(typeof y>"u"){const C=f.getLanguageIdByMimeType(_.language)||_.language||go;w=QTe(g,f,_.value||"",C,void 0),this._ownsModel=!0}else w=y,this._ownsModel=!1;if(this._attachModel(w),w){const C={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(C)}}dispose(){super.dispose()}updateOptions(e){Hb(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}},u(lx,"StandaloneEditor"),lx);vG=ZO([St(2,Pe),St(3,gt),St(4,un),St(5,Re),St(6,At),St(7,$s),St(8,_n),St(9,at),St(10,El),St(11,Xt),St(12,Kt),St(13,Pt),St(14,we)],vG);var dx;let yG=(dx=class extends ku{constructor(e,t,n,i,s,r,a,l,d,c,h){const g=Object.assign({},t);Hb(l,g,!0);const f=r.registerEditorContainer(e);typeof g.theme=="string"&&r.setTheme(g.theme),typeof g.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!g.autoDetectHighContrast),super(e,g,{},h,i,n,s,r,a,d,c),this._configurationService=l,this._standaloneThemeService=r,this._register(f)}dispose(){super.dispose()}updateOptions(e){Hb(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(wC,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}},u(dx,"StandaloneDiffEditor"),dx);yG=ZO([St(2,Pe),St(3,Re),St(4,gt),St(5,$s),St(6,_n),St(7,at),St(8,To),St(9,Il),St(10,Sa)],yG);var cx;let wG=(cx=class extends _G{constructor(e,t,n,i,s,r,a,l,d,c,h,g){const f=Object.assign({},t);Hb(l,f,!0);const p=r.registerEditorContainer(e);typeof f.theme=="string"&&r.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},i,n,s,g,c),this._configurationService=l,this._standaloneThemeService=r,this._register(p)}dispose(){super.dispose()}updateOptions(e){Hb(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(wC,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}},u(cx,"StandaloneDiffEditor2"),cx);wG=ZO([St(2,Pe),St(3,Re),St(4,gt),St(5,$s),St(6,_n),St(7,at),St(8,To),St(9,Il),St(10,Sa),St(11,wf)],wG);function QTe(o,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let r=t;return s!==-1&&(r=t.substring(0,s)),jwe(o,t,e.createByFilepathOrFirstLine(i||null,r),i)}return jwe(o,t,e.createById(n),i)}u(QTe,"createTextModel");function jwe(o,e,t,n){return o.createModel(e,t,n)}u(jwe,"doCreateModel");var eLe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function XVe(o,e,t){return Ne.initialize(t||{}).createInstance(vG,o,e)}u(XVe,"create");function ZVe(o){return Ne.get(gt).onCodeEditorAdd(t=>{o(t)})}u(ZVe,"onDidCreateEditor");function JVe(o){return Ne.get(gt).onDiffEditorAdd(t=>{o(t)})}u(JVe,"onDidCreateDiffEditor");function QVe(){return Ne.get(gt).listCodeEditors()}u(QVe,"getEditors");function e5e(){return Ne.get(gt).listDiffEditors()}u(e5e,"getDiffEditors");function t5e(o,e,t){var n;const i=Ne.initialize(t||{});return!((n=e?.experimental)===null||n===void 0)&&n.useVersion2?i.createInstance(wG,o,e):i.createInstance(yG,o,e)}u(t5e,"createDiffEditor");function n5e(o,e){return Ne.initialize({}).createInstance(RD,o,e)}u(n5e,"createDiffNavigator");function i5e(o){if(typeof o.id!="string"||typeof o.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return lt.registerCommand(o.id,o.run)}u(i5e,"addCommand");function s5e(o){if(typeof o.id!="string"||typeof o.label!="string"||typeof o.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=ne.deserialize(o.precondition),t=u((i,...s)=>hi.runEditorCommand(i,s,e,(r,a,l)=>Promise.resolve(o.run(a,...l))),"run"),n=new ie;if(n.add(lt.registerCommand(o.id,t)),o.contextMenuGroupId){const i={command:{id:o.id,title:o.label},when:e,group:o.contextMenuGroupId,order:o.contextMenuOrder||0};n.add(Ni.appendMenuItem(A.EditorContext,i))}if(Array.isArray(o.keybindings)){const i=Ne.get(At);if(!(i instanceof Ob))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=ne.and(e,ne.deserialize(o.keybindingContext));n.add(i.addDynamicKeybindings(o.keybindings.map(r=>({keybinding:r,command:o.id,when:s}))))}}return n}u(s5e,"addEditorAction");function o5e(o){return tLe([o])}u(o5e,"addKeybindingRule");function tLe(o){const e=Ne.get(At);return e instanceof Ob?e.addDynamicKeybindings(o.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:ne.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),G.None)}u(tLe,"addKeybindingRules");function r5e(o,e,t){const n=Ne.get(Kt),i=n.getLanguageIdByMimeType(e)||e;return QTe(Ne.get(Xt),n,o,i,t)}u(r5e,"createModel");function a5e(o,e){const t=Ne.get(Kt),n=t.getLanguageIdByMimeType(e)||e||go;o.setLanguage(t.createById(n))}u(a5e,"setModelLanguage");function l5e(o,e,t){o&&Ne.get(Nl).changeOne(e,o.uri,t)}u(l5e,"setModelMarkers");function d5e(o){Ne.get(Nl).changeAll(o,[])}u(d5e,"removeAllMarkers");function c5e(o){return Ne.get(Nl).read(o)}u(c5e,"getModelMarkers");function u5e(o){return Ne.get(Nl).onMarkerChanged(o)}u(u5e,"onDidChangeMarkers");function h5e(o){return Ne.get(Xt).getModel(o)}u(h5e,"getModel");function g5e(){return Ne.get(Xt).getModels()}u(g5e,"getModels");function f5e(o){return Ne.get(Xt).onModelAdded(o)}u(f5e,"onDidCreateModel");function p5e(o){return Ne.get(Xt).onModelRemoved(o)}u(p5e,"onWillDisposeModel");function m5e(o){return Ne.get(Xt).onModelLanguageChanged(t=>{o({model:t.model,oldLanguage:t.oldLanguageId})})}u(m5e,"onDidChangeModelLanguage");function b5e(o){return jAe(Ne.get(Xt),Ne.get(Pt),o)}u(b5e,"createWebWorker");function _5e(o,e){const t=Ne.get(Kt),n=Ne.get($s);return hw.colorizeElement(n,t,o,e).then(()=>{n.registerEditorContainer(o)})}u(_5e,"colorizeElement");function v5e(o,e,t){const n=Ne.get(Kt);return Ne.get($s).registerEditorContainer(document.body),hw.colorize(n,o,e,t)}u(v5e,"colorize");function y5e(o,e,t=4){return Ne.get($s).registerEditorContainer(document.body),hw.colorizeModelLine(o,e,t)}u(y5e,"colorizeModelLine");function w5e(o){const e=en.get(o);return e||{getInitialState:()=>ib,tokenize:(t,n,i)=>TZ(o,i)}}u(w5e,"getSafeTokenizationSupport$1");function C5e(o,e){en.getOrCreate(e);const t=w5e(e),n=cl(o),i=[];let s=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],d=t.tokenize(l,!0,s);i[r]=d.tokens,s=d.endState}return i}u(C5e,"tokenize");function S5e(o,e){Ne.get($s).defineTheme(o,e)}u(S5e,"defineTheme");function x5e(o){Ne.get($s).setTheme(o)}u(x5e,"setTheme");function T5e(){n3.clearAllFontInfos()}u(T5e,"remeasureFonts");function L5e(o,e){return lt.registerCommand({id:o,handler:e})}u(L5e,"registerCommand$1");function E5e(o){return Ne.get(Ks).registerOpener({open(t){return eLe(this,void 0,void 0,function*(){return typeof t=="string"&&(t=Ae.parse(t)),o.open(t)})}})}u(E5e,"registerLinkOpener");function k5e(o){return Ne.get(gt).registerCodeEditorOpenHandler((t,n,i)=>eLe(this,void 0,void 0,function*(){var s;if(!n)return null;const r=(s=t.options)===null||s===void 0?void 0:s.selection;let a;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?a=r:r&&(a={lineNumber:r.startLineNumber,column:r.startColumn}),(yield o.openCodeEditor(n,t.resource,a))?n:null}))}u(k5e,"registerEditorOpener");function D5e(){return{create:XVe,getEditors:QVe,getDiffEditors:e5e,onDidCreateEditor:ZVe,onDidCreateDiffEditor:JVe,createDiffEditor:t5e,createDiffNavigator:n5e,addCommand:i5e,addEditorAction:s5e,addKeybindingRule:o5e,addKeybindingRules:tLe,createModel:r5e,setModelLanguage:a5e,setModelMarkers:l5e,getModelMarkers:c5e,removeAllMarkers:d5e,onDidChangeMarkers:u5e,getModels:g5e,getModel:h5e,onDidCreateModel:f5e,onWillDisposeModel:p5e,onDidChangeModelLanguage:m5e,createWebWorker:b5e,colorizeElement:_5e,colorize:v5e,colorizeModelLine:y5e,tokenize:C5e,defineTheme:S5e,setTheme:x5e,remeasureFonts:T5e,registerCommand:L5e,registerLinkOpener:E5e,registerEditorOpener:k5e,AccessibilitySupport:d5,ContentWidgetPositionPreference:p5,CursorChangeReason:m5,DefaultEndOfLine:b5,EditorAutoIndentStrategy:v5,EditorOption:y5,EndOfLinePreference:w5,EndOfLineSequence:C5,MinimapPosition:A5,MouseTargetType:I5,OverlayWidgetPositionPreference:N5,OverviewRulerLane:R5,GlyphMarginLane:S5,RenderLineNumbersType:F5,RenderMinimap:O5,ScrollbarVisibility:V5,ScrollType:H5,TextEditorCursorBlinkingStyle:G5,TextEditorCursorStyle:j5,TrackedRangeStickiness:K5,WrappingIndent:$5,InjectedTextCursorStops:T5,PositionAffinity:P5,ConfigurationChangedEvent:oD,BareFontInfo:Xy,FontInfo:Zy,TextModelResolvedOptions:xm,FindMatch:kg,ApplyUpdateResult:Qh,LineRange:pt,LineRangeMapping:xr,RangeMapping:mu,EditorZoom:No,MovedText:ow,SimpleLineRangeMapping:Mg,EditorType:v_,EditorOptions:Mr}}u(D5e,"createMonacoEditorAPI");function M5e(o,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!o(t))return!1;return!0}u(M5e,"isArrayOf");function QE(o,e){return typeof o=="boolean"?o:e}u(QE,"bool");function Kwe(o,e){return typeof o=="string"?o:e}u(Kwe,"string");function A5e(o){const e={};for(const t of o)e[t]=!0;return e}u(A5e,"arrayToHash");function $we(o,e=!1){e&&(o=o.map(function(n){return n.toLowerCase()}));const t=A5e(o);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}u($we,"createKeywordMatcher");function CG(o,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,r){n=!0;let a="";if(typeof o[r]=="string")a=o[r];else if(o[r]&&o[r]instanceof RegExp)a=o[r].source;else throw o[r]===void 0?Ut(o,"language definition does not contain attribute '"+r+"', used at: "+e):Ut(o,"attribute reference '"+r+"' must be a string, used at: "+e);return Qf(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const i=(o.ignoreCase?"i":"")+(o.unicode?"u":"");return new RegExp(e,i)}u(CG,"compileRegExp");function I5e(o,e,t,n){if(n<0)return o;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}u(I5e,"selectScrutinee");function N5e(o,e,t,n){let i=-1,s=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(i=parseInt(r[3]),r[2]&&(i=i+100)),s=r[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let d;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const c=$we(l.split("|"),o.ignoreCase);d=u(function(h){return a==="~"?c(h):!c(h)},"tester")}else if(a==="@"||a==="!@"){const c=o[l];if(!c)throw Ut(o,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!M5e(function(g){return typeof g=="string"},c))throw Ut(o,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const h=$we(c,o.ignoreCase);d=u(function(g){return a==="@"?h(g):!h(g)},"tester")}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const c=CG(o,"^"+l+"$");d=u(function(h){return a==="~"?c.test(h):!c.test(h)},"tester")}else d=u(function(c,h,g,f){return CG(o,"^"+Ac(o,l,h,g,f)+"$").test(c)},"tester");else if(l.indexOf("$")<0){const c=eu(o,l);d=u(function(h){return a==="=="?h===c:h!==c},"tester")}else{const c=eu(o,l);d=u(function(h,g,f,p,b){const _=Ac(o,c,g,f,p);return a==="=="?h===_:h!==_},"tester")}return i===-1?{name:t,value:n,test:function(c,h,g,f){return d(c,c,h,g,f)}}:{name:t,value:n,test:function(c,h,g,f){const p=I5e(c,h,g,i);return d(p||"",c,h,g,f)}}}u(N5e,"createGuard");function SG(o,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ut(o,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Ut(o,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ut(o,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!sIe(o,Ac(o,i,"",[],""))))throw Ut(o,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,o.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,s=t.length;i<s;i++)n[i]=SG(o,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const r=SG(o,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:r,name:s}):s==="@eos"?n.push({test:function(a,l,d,c){return c},value:r,name:s}):n.push(N5e(o,e,s,r))}const i=o.defaultToken;return{test:function(s,r,a,l){for(const d of n)if(!d.test||d.test(s,r,a,l))return d.value;return i}}}else throw Ut(o,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}u(SG,"compileAction");const Ehe=class Ehe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Ut(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=CG(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=SG(e,this.name,t)}};u(Ehe,"Rule");let xG=Ehe;function nLe(o,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=o,t.includeLF=QE(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=QE(e.ignoreCase,!1),t.unicode=QE(e.unicode,!1),t.tokenPostfix=Kwe(e.tokenPostfix,"."+t.languageId),t.defaultToken=Kwe(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=o,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(r,a,l){for(const d of l){let c=d.include;if(c){if(typeof c!="string")throw Ut(t,"an 'include' attribute must be a string at: "+r);if(c[0]==="@"&&(c=c.substr(1)),!e.tokenizer[c])throw Ut(t,"include target '"+c+"' is not defined at: "+r);i(r+"."+c,a,e.tokenizer[c])}else{const h=new xG(r);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(h.setRegex(n,d[0]),d.length>=3)if(typeof d[1]=="string")h.setAction(n,{token:d[1],next:d[2]});else if(typeof d[1]=="object"){const g=d[1];g.next=d[2],h.setAction(n,g)}else throw Ut(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else h.setAction(n,d[1]);else{if(!d.regex)throw Ut(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);d.name&&typeof d.name=="string"&&(h.name=d.name),d.matchOnlyAtStart&&(h.matchOnlyAtLineStart=QE(d.matchOnlyAtLineStart,!1)),h.setRegex(n,d.regex),h.setAction(n,d.action)}a.push(h)}}}if(u(i,"addRules"),!e.tokenizer||typeof e.tokenizer!="object")throw Ut(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,i("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ut(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ut(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:eu(t,a.open),close:eu(t,a.close)});else throw Ut(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}u(nLe,"compile");var R5e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function P5e(o){nb.registerLanguage(o)}u(P5e,"register");function F5e(){let o=[];return o=o.concat(nb.getLanguages()),o}u(F5e,"getLanguages");function O5e(o){return Ne.get(Kt).languageIdCodec.encodeLanguageId(o)}u(O5e,"getEncodedLanguageId");function H5e(o,e){return Ne.withServices(()=>{const n=Ne.get(Kt).onDidRequestRichLanguageFeatures(i=>{i===o&&(n.dispose(),e())});return n})}u(H5e,"onLanguage");function V5e(o,e){return Ne.withServices(()=>{const n=Ne.get(Kt).onDidRequestBasicLanguageFeatures(i=>{i===o&&(n.dispose(),e())});return n})}u(V5e,"onLanguageEncountered");function W5e(o,e){if(!Ne.get(Kt).isRegisteredLanguageId(o))throw new Error(`Cannot set configuration for unknown language ${o}`);return Ne.get(Pt).register(o,e,100)}u(W5e,"setLanguageConfiguration");const khe=class khe{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return kN.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new Jm(i.tokens,i.endState)}};u(khe,"EncodedTokenizationSupportAdapter");let TG=khe;const vy=class vy{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let s=0,r=e.length;s<r;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<i&&(l=i),n[s]=new By(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const s=t.tokenize(n,i),r=vy._toClassicTokens(s.tokens,e);let a;return s.endState.equals(i)?a=i:a=s.endState,new Uy(r,a)}tokenize(e,t,n){return vy.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,a=0;for(let d=0,c=t.length;d<c;d++){const h=t[d],g=i.match(n,h.scopes)|1024;if(r>0&&s[r-1]===g)continue;let f=h.startIndex;d===0?f=0:f<a&&(f=a),s[r++]=f,s[r++]=g,a=f}const l=new Uint32Array(r);for(let d=0;d<r;d++)l[d]=s[d];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return i.endState.equals(n)?r=n:r=i.endState,new Jm(s,r)}};u(vy,"TokenizationSupportAdapter");let kN=vy;function B5e(o){return typeof o.getInitialState=="function"}u(B5e,"isATokensProvider");function U5e(o){return"tokenizeEncoded"in o}u(U5e,"isEncodedTokensProvider");function iLe(o){return o&&typeof o.then=="function"}u(iLe,"isThenable");function z5e(o){const e=Ne.get($s);if(o){const t=[null];for(let n=1,i=o.length;n<i;n++)t[n]=K.fromHex(o[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}u(z5e,"setColorMap");function sLe(o,e){return U5e(e)?new TG(o,e):new kN(o,e,Ne.get(Kt),Ne.get($s))}u(sLe,"createTokenizationSupportAdapter");function xJ(o,e){const t=new l5(()=>R5e(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?B5e(n)?sLe(o,n):new uw(Ne.get(Kt),Ne.get($s),o,nLe(o,n),Ne.get(at)):null}));return en.registerFactory(o,t)}u(xJ,"registerTokensProviderFactory");function G5e(o,e){if(!Ne.get(Kt).isRegisteredLanguageId(o))throw new Error(`Cannot set tokens provider for unknown language ${o}`);return iLe(e)?xJ(o,{create:()=>e}):en.register(o,sLe(o,e))}u(G5e,"setTokensProvider");function j5e(o,e){const t=u(n=>new uw(Ne.get(Kt),Ne.get($s),o,nLe(o,n),Ne.get(at)),"create");return iLe(e)?xJ(o,{create:()=>e}):en.register(o,t(e))}u(j5e,"setMonarchTokensProvider");function K5e(o,e){return Ne.get(we).referenceProvider.register(o,e)}u(K5e,"registerReferenceProvider");function $5e(o,e){return Ne.get(we).renameProvider.register(o,e)}u($5e,"registerRenameProvider");function q5e(o,e){return Ne.get(we).signatureHelpProvider.register(o,e)}u(q5e,"registerSignatureHelpProvider");function Y5e(o,e){return Ne.get(we).hoverProvider.register(o,{provideHover:(n,i,s)=>{const r=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,s)).then(a=>{if(a)return!a.range&&r&&(a.range=new L(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),a.range||(a.range=new L(i.lineNumber,i.column,i.lineNumber,i.column)),a})}})}u(Y5e,"registerHoverProvider");function X5e(o,e){return Ne.get(we).documentSymbolProvider.register(o,e)}u(X5e,"registerDocumentSymbolProvider");function Z5e(o,e){return Ne.get(we).documentHighlightProvider.register(o,e)}u(Z5e,"registerDocumentHighlightProvider");function J5e(o,e){return Ne.get(we).linkedEditingRangeProvider.register(o,e)}u(J5e,"registerLinkedEditingRangeProvider");function Q5e(o,e){return Ne.get(we).definitionProvider.register(o,e)}u(Q5e,"registerDefinitionProvider");function e3e(o,e){return Ne.get(we).implementationProvider.register(o,e)}u(e3e,"registerImplementationProvider");function t3e(o,e){return Ne.get(we).typeDefinitionProvider.register(o,e)}u(t3e,"registerTypeDefinitionProvider");function n3e(o,e){return Ne.get(we).codeLensProvider.register(o,e)}u(n3e,"registerCodeLensProvider");function i3e(o,e,t){return Ne.get(we).codeActionProvider.register(o,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(i,s,r,a)=>{const d=Ne.get(Nl).read({resource:i.uri}).filter(c=>L.areIntersectingOrTouching(c,s));return e.provideCodeActions(i,s,{markers:d,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}u(i3e,"registerCodeActionProvider");function s3e(o,e){return Ne.get(we).documentFormattingEditProvider.register(o,e)}u(s3e,"registerDocumentFormattingEditProvider");function o3e(o,e){return Ne.get(we).documentRangeFormattingEditProvider.register(o,e)}u(o3e,"registerDocumentRangeFormattingEditProvider");function r3e(o,e){return Ne.get(we).onTypeFormattingEditProvider.register(o,e)}u(r3e,"registerOnTypeFormattingEditProvider");function a3e(o,e){return Ne.get(we).linkProvider.register(o,e)}u(a3e,"registerLinkProvider");function l3e(o,e){return Ne.get(we).completionProvider.register(o,e)}u(l3e,"registerCompletionItemProvider");function d3e(o,e){return Ne.get(we).colorProvider.register(o,e)}u(d3e,"registerColorProvider");function c3e(o,e){return Ne.get(we).foldingRangeProvider.register(o,e)}u(c3e,"registerFoldingRangeProvider");function u3e(o,e){return Ne.get(we).declarationProvider.register(o,e)}u(u3e,"registerDeclarationProvider");function h3e(o,e){return Ne.get(we).selectionRangeProvider.register(o,e)}u(h3e,"registerSelectionRangeProvider");function g3e(o,e){return Ne.get(we).documentSemanticTokensProvider.register(o,e)}u(g3e,"registerDocumentSemanticTokensProvider");function f3e(o,e){return Ne.get(we).documentRangeSemanticTokensProvider.register(o,e)}u(f3e,"registerDocumentRangeSemanticTokensProvider");function p3e(o,e){return Ne.get(we).inlineCompletionsProvider.register(o,e)}u(p3e,"registerInlineCompletionsProvider");function m3e(o,e){return Ne.get(we).inlayHintsProvider.register(o,e)}u(m3e,"registerInlayHintsProvider");function b3e(){return{register:P5e,getLanguages:F5e,onLanguage:H5e,onLanguageEncountered:V5e,getEncodedLanguageId:O5e,setLanguageConfiguration:W5e,setColorMap:z5e,registerTokensProviderFactory:xJ,setTokensProvider:G5e,setMonarchTokensProvider:j5e,registerReferenceProvider:K5e,registerRenameProvider:$5e,registerCompletionItemProvider:l3e,registerSignatureHelpProvider:q5e,registerHoverProvider:Y5e,registerDocumentSymbolProvider:X5e,registerDocumentHighlightProvider:Z5e,registerLinkedEditingRangeProvider:J5e,registerDefinitionProvider:Q5e,registerImplementationProvider:e3e,registerTypeDefinitionProvider:t3e,registerCodeLensProvider:n3e,registerCodeActionProvider:i3e,registerDocumentFormattingEditProvider:s3e,registerDocumentRangeFormattingEditProvider:o3e,registerOnTypeFormattingEditProvider:r3e,registerLinkProvider:a3e,registerColorProvider:d3e,registerFoldingRangeProvider:c3e,registerDeclarationProvider:u3e,registerSelectionRangeProvider:h3e,registerDocumentSemanticTokensProvider:g3e,registerDocumentRangeSemanticTokensProvider:f3e,registerInlineCompletionsProvider:p3e,registerInlayHintsProvider:m3e,DocumentHighlightKind:_5,CompletionItemKind:h5,CompletionItemTag:g5,CompletionItemInsertTextRule:u5,SymbolKind:U5,SymbolTag:z5,IndentAction:x5,CompletionTriggerKind:f5,SignatureHelpTriggerKind:B5,InlayHintKind:L5,InlineCompletionTriggerKind:E5,CodeActionTriggerType:c5,FoldingRangeKind:fo,SelectedSuggestionInfo:bD}}u(b3e,"createMonacoLanguagesAPI");const TJ=nt("IEditorCancelService"),oLe=new _e("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));ct(TJ,class{constructor(){this._tokens=new WeakMap}add(o,e){let t=this._tokens.get(o);t||(t=o.invokeWithinContext(i=>{const s=oLe.bindTo(i.get(Re)),r=new Ai;return{key:s,tokens:r}}),this._tokens.set(o,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(o){const e=this._tokens.get(o);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);const Dhe=class Dhe extends En{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(TJ).add(e,this))}dispose(){this._unregister(),super.dispose()}};u(Dhe,"EditorKeybindingCancellationTokenSource");let LG=Dhe;he(new class extends hi{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:oLe})}runEditorCommand(o,e){o.get(TJ).cancel(e)}});var vg;let rLe=(vg=class{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?Sg("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof vg))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new vg(e,this.flags))}},u(vg,"EditorState"),vg);const Mhe=class Mhe extends LG{constructor(e,t,n,i){super(e,i),this._listener=new ie,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!L.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!L.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}};u(Mhe,"EditorStateCancellationTokenSource");let vl=Mhe;const Ahe=class Ahe extends En{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}};u(Ahe,"TextModelCancellationTokenSource");let CC=Ahe;function yl(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===v_.ICodeEditor:!1}u(yl,"isCodeEditor");function aLe(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===v_.IDiffEditor:!1}u(aLe,"isDiffEditor");function _3e(o){return!!o&&typeof o=="object"&&typeof o.onDidChangeActiveEditor=="function"}u(_3e,"isCompositeEditor");function lLe(o){return yl(o)?o:aLe(o)?o.getModifiedEditor():_3e(o)&&yl(o.activeCodeEditor)?o.activeCodeEditor:null}u(lLe,"getCodeEditor");const yy=class yy{static _handleEolEdits(e,t){let n;const i=[];for(const s of t)typeof s.eol=="number"&&(n=s.eol),s.range&&typeof s.text=="string"&&i.push(s);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=ba.capture(e),s=yy._handleEolEdits(e,t);s.length===1&&yy._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(r=>zt.replace(L.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",s.map(r=>zt.replaceMove(L.lift(r.range),r.text))),n&&e.pushUndoStop(),i.restoreRelativeVerticalPositionOfCursor(e)}};u(yy,"FormattingEdit");let SC=yy;const Ihe=class Ihe{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}};u(Ihe,"ExtensionIdentifier");let DN=Ihe;const Nhe=class Nhe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(DN.toKey(e))}has(e){return this._set.has(DN.toKey(e))}};u(Nhe,"ExtensionIdentifierSet");let EG=Nhe;var ya=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function LJ(o){if(o=o.filter(i=>i.range),!o.length)return;let{range:e}=o[0];for(let i=1;i<o.length;i++)e=L.plusRange(e,o[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?o.length===1?Ii(m("hint11","Made 1 formatting edit on line {0}",t)):Ii(m("hintn1","Made {0} formatting edits on line {1}",o.length,t)):o.length===1?Ii(m("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):Ii(m("hintnn","Made {0} formatting edits between lines {1} and {2}",o.length,t,n))}u(LJ,"alertFormattingEdits");function dLe(o,e,t){const n=[],i=new EG,s=o.ordered(t);for(const a of s)n.push(a),a.extensionId&&i.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(i.has(a.extensionId))continue;i.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,d,c){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),d,c)}})}return n}u(dLe,"getRealAndSyntheticDocumentFormattersOrdered");const wy=class wy{static setFormatterSelector(e){return{dispose:wy._selectors.unshift(e)}}static select(e,t,n){return ya(this,void 0,void 0,function*(){if(e.length===0)return;const i=et.first(wy._selectors);if(i)return yield i(e,t,n)})}};u(wy,"FormattingConflicts");let Ub=wy;Ub._selectors=new Ai;function cLe(o,e,t,n,i,s){return ya(this,void 0,void 0,function*(){const r=o.get(Pe),{documentRangeFormattingEditProvider:a}=o.get(we),l=yl(e)?e.getModel():e,d=a.ordered(l),c=yield Ub.select(d,l,n);c&&(i.report(c),yield r.invokeFunction(v3e,c,e,t,s))})}u(cLe,"formatDocumentRangesWithSelectedProvider");function v3e(o,e,t,n,i){var s,r;return ya(this,void 0,void 0,function*(){const a=o.get(Nr),l=o.get(So);let d,c;yl(t)?(d=t.getModel(),c=new vl(t,5,void 0,i)):(d=t,c=new CC(t,i));const h=[];let g=0;for(const v of dZ(n).sort(L.compareRangesUsingStarts))g>0&&L.areIntersectingOrTouching(h[g-1],v)?h[g-1]=L.fromPositions(h[g-1].getStartPosition(),v.getEndPosition()):g=h.push(v);const f=u(v=>ya(this,void 0,void 0,function*(){var y,w;l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(y=e.extensionId)===null||y===void 0?void 0:y.value,v);const C=(yield e.provideDocumentRangeFormattingEdits(d,v,d.getFormattingOptions(),c.token))||[];return l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(w=e.extensionId)===null||w===void 0?void 0:w.value,C),C}),"computeEdits"),p=u((v,y)=>{if(!v.length||!y.length)return!1;const w=v.reduce((C,S)=>L.plusRange(C,S.range),v[0].range);if(!y.some(C=>L.intersectRanges(w,C.range)))return!1;for(const C of v)for(const S of y)if(L.intersectRanges(C.range,S.range))return!0;return!1},"hasIntersectingEdit"),b=[],_=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){l.trace("[format][provideDocumentRangeFormattingEdits] (request)",(s=e.extensionId)===null||s===void 0?void 0:s.value,h);const v=(yield e.provideDocumentRangesFormattingEdits(d,h,d.getFormattingOptions(),c.token))||[];l.trace("[format][provideDocumentRangeFormattingEdits] (response)",(r=e.extensionId)===null||r===void 0?void 0:r.value,v),_.push(v)}else{for(const v of h){if(c.token.isCancellationRequested)return!0;_.push(yield f(v))}for(let v=0;v<h.length;++v)for(let y=v+1;y<h.length;++y){if(c.token.isCancellationRequested)return!0;if(p(_[v],_[y])){const w=L.plusRange(h[v],h[y]),C=yield f(w);h.splice(y,1),h.splice(v,1),h.push(w),_.splice(y,1),_.splice(v,1),_.push(C),v=0,y=0}}}for(const v of _){if(c.token.isCancellationRequested)return!0;const y=yield a.computeMoreMinimalEdits(d.uri,v);y&&b.push(...y)}}finally{c.dispose()}if(b.length===0)return!1;if(yl(t))SC.execute(t,b,!0),LJ(b),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:v}]=b,y=new xe(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn);d.pushEditOperations([y],b.map(w=>({text:w.text,range:L.lift(w.range),forceMoveMarkers:!0})),w=>{for(const{range:C}of w)if(L.areIntersectingOrTouching(C,y))return[new xe(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn)];return null})}return!0})}u(v3e,"formatDocumentRangesWithProvider");function y3e(o,e,t,n,i){return ya(this,void 0,void 0,function*(){const s=o.get(Pe),r=o.get(we),a=yl(e)?e.getModel():e,l=dLe(r.documentFormattingEditProvider,r.documentRangeFormattingEditProvider,a),d=yield Ub.select(l,a,t);d&&(n.report(d),yield s.invokeFunction(w3e,d,e,t,i))})}u(y3e,"formatDocumentWithSelectedProvider");function w3e(o,e,t,n,i){return ya(this,void 0,void 0,function*(){const s=o.get(Nr);let r,a;yl(t)?(r=t.getModel(),a=new vl(t,5,void 0,i)):(r=t,a=new CC(t,i));let l;try{const d=yield e.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(r.uri,d),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(yl(t))SC.execute(t,l,n!==2),n!==2&&(LJ(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:d}]=l,c=new xe(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn);r.pushEditOperations([c],l.map(h=>({text:h.text,range:L.lift(h.range),forceMoveMarkers:!0})),h=>{for(const{range:g}of h)if(L.areIntersectingOrTouching(g,c))return[new xe(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return!0})}u(w3e,"formatDocumentWithProvider");function C3e(o,e,t,n,i,s){return ya(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,s)).catch(Ln);if(Ri(l))return yield o.computeMoreMinimalEdits(t.uri,l)}})}u(C3e,"getDocumentRangeFormattingEditsUntilResult");function S3e(o,e,t,n,i){return ya(this,void 0,void 0,function*(){const s=dLe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of s){const a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,n,i)).catch(Ln);if(Ri(a))return yield o.computeMoreMinimalEdits(t.uri,a)}})}u(S3e,"getDocumentFormattingEditsUntilResult");function uLe(o,e,t,n,i,s,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,s,r)).catch(Ln).then(l=>o.computeMoreMinimalEdits(t.uri,l))}u(uLe,"getOnTypeFormattingEdits");lt.registerCommand("_executeFormatRangeProvider",function(o,...e){return ya(this,void 0,void 0,function*(){const[t,n,i]=e;Lt(Ae.isUri(t)),Lt(L.isIRange(n));const s=o.get(Ds),r=o.get(Nr),a=o.get(we),l=yield s.createModelReference(t);try{return C3e(r,a,l.object.textEditorModel,L.lift(n),i,Ze.None)}finally{l.dispose()}})});lt.registerCommand("_executeFormatDocumentProvider",function(o,...e){return ya(this,void 0,void 0,function*(){const[t,n]=e;Lt(Ae.isUri(t));const i=o.get(Ds),s=o.get(Nr),r=o.get(we),a=yield i.createModelReference(t);try{return S3e(s,r,a.object.textEditorModel,n,Ze.None)}finally{a.dispose()}})});lt.registerCommand("_executeFormatOnTypeProvider",function(o,...e){return ya(this,void 0,void 0,function*(){const[t,n,i,s]=e;Lt(Ae.isUri(t)),Lt(W.isIPosition(n)),Lt(typeof i=="string");const r=o.get(Ds),a=o.get(Nr),l=o.get(we),d=yield r.createModelReference(t);try{return uLe(a,l,d.object.textEditorModel,W.lift(n),i,s,Ze.None)}finally{d.dispose()}})});Mr.wrappingIndent.defaultValue=0;Mr.glyphMargin.defaultValue=!1;Mr.autoIndent.defaultValue=3;Mr.overviewRulerLanes.defaultValue=2;Ub.setFormatterSelector((o,e,t)=>Promise.resolve(o[0]));const us=X1e();us.editor=D5e();us.languages=b3e();const x3e=us.CancellationTokenSource,T3e=us.Emitter,L3e=us.KeyCode,E3e=us.KeyMod,k3e=us.Position,D3e=us.Range,M3e=us.Selection,A3e=us.SelectionDirection,I3e=us.MarkerSeverity,N3e=us.MarkerTag,MN=us.Uri,R3e=us.Token,jm=us.editor,ip=us.languages,HH=globalThis.MonacoEnvironment;(HH?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=us);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const aE=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:x3e,Emitter:T3e,KeyCode:L3e,KeyMod:E3e,MarkerSeverity:I3e,MarkerTag:N3e,Position:k3e,Range:D3e,Selection:M3e,SelectionDirection:A3e,Token:R3e,Uri:MN,editor:jm,languages:ip},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.43.0(94c055bcbdd49f04a0fa15515e848542a79fb948)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var P3e=Object.defineProperty,F3e=Object.getOwnPropertyDescriptor,O3e=Object.getOwnPropertyNames,H3e=Object.prototype.hasOwnProperty,qwe=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O3e(e))!H3e.call(o,i)&&i!==t&&P3e(o,i,{get:()=>e[i],enumerable:!(n=F3e(e,i))||n.enumerable});return o},"__copyProps$4"),V3e=u((o,e,t)=>(qwe(o,e,"default"),t&&qwe(t,e,"default")),"__reExport$4"),wv={};V3e(wv,aE);var hLe={},VH={},ux,gLe=(ux=class{static getOrCreate(e){return VH[e]||(VH[e]=new gLe(e)),VH[e]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,hLe[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}},u(ux,"LazyLanguageLoader"),ux);function De(o){const e=o.id;hLe[e]=o,wv.languages.register(o);const t=gLe.getOrCreate(e);wv.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),wv.languages.onLanguageEncountered(e,async()=>{const n=await t.load();wv.languages.setLanguageConfiguration(e,n.conf)})}u(De,"registerLanguage");De({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>Le(()=>import("./abap-b90a1f1e.js"),[])});De({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>Le(()=>import("./apex-cacd0c12.js"),[])});De({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>Le(()=>import("./azcli-23a1b956.js"),[])});De({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>Le(()=>import("./bat-2c82a72d.js"),[])});De({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>Le(()=>import("./bicep-43f2141d.js"),[])});De({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>Le(()=>import("./cameligo-1c616f6f.js"),[])});De({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>Le(()=>import("./clojure-9bb82a82.js"),[])});De({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>Le(()=>import("./coffee-ec486f98.js"),[])});De({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>Le(()=>import("./cpp-98740ad6.js"),[])});De({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>Le(()=>import("./cpp-98740ad6.js"),[])});De({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>Le(()=>import("./csharp-d2941385.js"),[])});De({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>Le(()=>import("./csp-aed6305a.js"),[])});De({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>Le(()=>import("./css-a82dd746.js"),[])});De({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>Le(()=>import("./cypher-3ffc0570.js"),[])});De({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>Le(()=>import("./dart-68bf5326.js"),[])});De({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>Le(()=>import("./dockerfile-c55b64af.js"),[])});De({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>Le(()=>import("./ecl-e008be52.js"),[])});De({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>Le(()=>import("./elixir-932a57fd.js"),[])});De({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>Le(()=>import("./flow9-d862b93b.js"),[])});De({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>Le(()=>import("./fsharp-f2bb837e.js"),[])});De({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagAutoInterpolationDollar)});De({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagAngleInterpolationDollar)});De({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagBracketInterpolationDollar)});De({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagAngleInterpolationBracket)});De({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagBracketInterpolationBracket)});De({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagAutoInterpolationDollar)});De({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>Le(()=>import("./freemarker2-6c20d461.js"),["assets/freemarker2-6c20d461.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"]).then(o=>o.TagAutoInterpolationBracket)});De({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>Le(()=>import("./go-b074840c.js"),[])});De({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>Le(()=>import("./graphql-a707cdaa.js"),[])});De({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>Le(()=>import("./handlebars-2f40a249.js"),["assets/handlebars-2f40a249.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>Le(()=>import("./hcl-d4ee186a.js"),[])});De({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>Le(()=>import("./html-d877b7ef.js"),["assets/html-d877b7ef.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>Le(()=>import("./ini-41c1946f.js"),[])});De({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>Le(()=>import("./java-47f7782f.js"),[])});De({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>Le(()=>import("./javascript-cfca5a99.js"),["assets/javascript-cfca5a99.js","assets/typescript-8ed84600.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>Le(()=>import("./julia-f7e41405.js"),[])});De({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>Le(()=>import("./kotlin-ae5ef343.js"),[])});De({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>Le(()=>import("./less-1fe8fdbb.js"),[])});De({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>Le(()=>import("./lexon-b30b84ba.js"),[])});De({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>Le(()=>import("./lua-98fb5662.js"),[])});De({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>Le(()=>import("./liquid-f745f2e8.js"),["assets/liquid-f745f2e8.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>Le(()=>import("./m3-bebbe313.js"),[])});De({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>Le(()=>import("./markdown-d21a565e.js"),[])});De({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>Le(()=>import("./mdx-3e8f303b.js"),["assets/mdx-3e8f303b.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>Le(()=>import("./mips-a6f8cea7.js"),[])});De({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>Le(()=>import("./msdax-b68e245c.js"),[])});De({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>Le(()=>import("./mysql-5b539782.js"),[])});De({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>Le(()=>import("./objective-c-2b1285e8.js"),[])});De({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>Le(()=>import("./pascal-4649eefa.js"),[])});De({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>Le(()=>import("./pascaligo-ae9a3940.js"),[])});De({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>Le(()=>import("./perl-36ad82fa.js"),[])});De({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>Le(()=>import("./pgsql-e710ca22.js"),[])});De({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>Le(()=>import("./php-9f7865da.js"),[])});De({id:"pla",extensions:[".pla"],loader:()=>Le(()=>import("./pla-54a12d9b.js"),[])});De({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>Le(()=>import("./postiats-7c2e9d70.js"),[])});De({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>Le(()=>import("./powerquery-f1a5c841.js"),[])});De({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>Le(()=>import("./powershell-da6840f5.js"),[])});De({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>Le(()=>import("./protobuf-1aff1783.js"),[])});De({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>Le(()=>import("./pug-58d85519.js"),[])});De({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>Le(()=>import("./python-3e89bb73.js"),["assets/python-3e89bb73.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>Le(()=>import("./qsharp-3747268d.js"),[])});De({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>Le(()=>import("./r-3faaa0ed.js"),[])});De({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>Le(()=>import("./razor-f200e679.js"),["assets/razor-f200e679.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>Le(()=>import("./redis-e60e99b1.js"),[])});De({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>Le(()=>import("./redshift-9471542a.js"),[])});De({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>Le(()=>import("./restructuredtext-2ed0fd83.js"),[])});De({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>Le(()=>import("./ruby-25cf1311.js"),[])});De({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>Le(()=>import("./rust-ed06c9d7.js"),[])});De({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>Le(()=>import("./sb-c1c59486.js"),[])});De({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>Le(()=>import("./scala-b8919493.js"),[])});De({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>Le(()=>import("./scheme-03c92c15.js"),[])});De({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>Le(()=>import("./scss-3439df1c.js"),[])});De({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>Le(()=>import("./shell-5561a5b3.js"),[])});De({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>Le(()=>import("./solidity-d6124224.js"),[])});De({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>Le(()=>import("./sophia-8f79d2a2.js"),[])});De({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>Le(()=>import("./sparql-8602c7d8.js"),[])});De({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>Le(()=>import("./sql-435600dc.js"),[])});De({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>Le(()=>import("./st-aef311b0.js"),[])});De({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>Le(()=>import("./swift-9dc68841.js"),[])});De({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>Le(()=>import("./systemverilog-46198f6a.js"),[])});De({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>Le(()=>import("./systemverilog-46198f6a.js"),[])});De({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>Le(()=>import("./tcl-cb6e370b.js"),[])});De({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>Le(()=>import("./twig-2fc36860.js"),[])});De({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>Le(()=>import("./typescript-8ed84600.js"),["assets/typescript-8ed84600.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>Le(()=>import("./vb-c8fb3e3d.js"),[])});De({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>Le(()=>import("./wgsl-6392e48e.js"),[])});De({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>Le(()=>import("./xml-4781fbc8.js"),["assets/xml-4781fbc8.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});De({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>Le(()=>import("./yaml-f7b0532a.js"),["assets/yaml-f7b0532a.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.43.0(94c055bcbdd49f04a0fa15515e848542a79fb948)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var W3e=Object.defineProperty,B3e=Object.getOwnPropertyDescriptor,U3e=Object.getOwnPropertyNames,z3e=Object.prototype.hasOwnProperty,Ywe=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of U3e(e))!z3e.call(o,i)&&i!==t&&W3e(o,i,{get:()=>e[i],enumerable:!(n=B3e(e,i))||n.enumerable});return o},"__copyProps$3"),G3e=u((o,e,t)=>(Ywe(o,e,"default"),t&&Ywe(t,e,"default")),"__reExport$3"),E_={};G3e(E_,aE);var hx,EJ=(hx=class{_onDidChange=new E_.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},u(hx,"LanguageServiceDefaultsImpl"),hx),kJ={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},DJ={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},fLe=new EJ("css",kJ,DJ),pLe=new EJ("scss",kJ,DJ),mLe=new EJ("less",kJ,DJ);E_.languages.css={cssDefaults:fLe,lessDefaults:mLe,scssDefaults:pLe};function MJ(){return Le(()=>import("./cssMode-a0129db7.js"),["assets/cssMode-a0129db7.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])}u(MJ,"getMode$3");E_.languages.onLanguage("less",()=>{MJ().then(o=>o.setupMode(mLe))});E_.languages.onLanguage("scss",()=>{MJ().then(o=>o.setupMode(pLe))});E_.languages.onLanguage("css",()=>{MJ().then(o=>o.setupMode(fLe))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.43.0(94c055bcbdd49f04a0fa15515e848542a79fb948)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var j3e=Object.defineProperty,K3e=Object.getOwnPropertyDescriptor,$3e=Object.getOwnPropertyNames,q3e=Object.prototype.hasOwnProperty,Xwe=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $3e(e))!q3e.call(o,i)&&i!==t&&j3e(o,i,{get:()=>e[i],enumerable:!(n=K3e(e,i))||n.enumerable});return o},"__copyProps$2"),Y3e=u((o,e,t)=>(Xwe(o,e,"default"),t&&Xwe(t,e,"default")),"__reExport$2"),JO={};Y3e(JO,aE);var gx,X3e=(gx=class{_onDidChange=new JO.Emitter;_options;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},u(gx,"LanguageServiceDefaultsImpl"),gx),Z3e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},QO={format:Z3e,suggest:{},data:{useDefaultDataProvider:!0}};function e4(o){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:o===r0,documentFormattingEdits:o===r0,documentRangeFormattingEdits:o===r0}}u(e4,"getConfigurationDefault");var r0="html",Zwe="handlebars",Jwe="razor",bLe=t4(r0,QO,e4(r0)),J3e=bLe.defaults,_Le=t4(Zwe,QO,e4(Zwe)),Q3e=_Le.defaults,vLe=t4(Jwe,QO,e4(Jwe)),e9e=vLe.defaults;JO.languages.html={htmlDefaults:J3e,razorDefaults:e9e,handlebarDefaults:Q3e,htmlLanguageService:bLe,handlebarLanguageService:_Le,razorLanguageService:vLe,registerHTMLLanguageService:t4};function t9e(){return Le(()=>import("./htmlMode-70b563fd.js"),["assets/htmlMode-70b563fd.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])}u(t9e,"getMode$2");function t4(o,e=QO,t=e4(o)){const n=new X3e(o,e,t);let i;const s=JO.languages.onLanguage(o,async()=>{i=(await t9e()).setupMode(n)});return{defaults:n,dispose(){s.dispose(),i?.dispose(),i=void 0}}}u(t4,"registerHTMLLanguageService");/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.43.0(94c055bcbdd49f04a0fa15515e848542a79fb948)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var n9e=Object.defineProperty,i9e=Object.getOwnPropertyDescriptor,s9e=Object.getOwnPropertyNames,o9e=Object.prototype.hasOwnProperty,Qwe=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of s9e(e))!o9e.call(o,i)&&i!==t&&n9e(o,i,{get:()=>e[i],enumerable:!(n=i9e(e,i))||n.enumerable});return o},"__copyProps$1"),r9e=u((o,e,t)=>(Qwe(o,e,"default"),t&&Qwe(t,e,"default")),"__reExport$1"),lE={};r9e(lE,aE);var fx,a9e=(fx=class{_onDidChange=new lE.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(e,t,n){this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},u(fx,"LanguageServiceDefaultsImpl"),fx),l9e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},d9e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},yLe=new a9e("json",l9e,d9e);lE.languages.json={jsonDefaults:yLe};function c9e(){return Le(()=>import("./jsonMode-9e8a0199.js"),["assets/jsonMode-9e8a0199.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])}u(c9e,"getMode$1");lE.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});lE.languages.onLanguage("json",()=>{c9e().then(o=>o.setupMode(yLe))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.43.0(94c055bcbdd49f04a0fa15515e848542a79fb948)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var u9e=Object.defineProperty,h9e=Object.getOwnPropertyDescriptor,g9e=Object.getOwnPropertyNames,f9e=Object.prototype.hasOwnProperty,eCe=u((o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of g9e(e))!f9e.call(o,i)&&i!==t&&u9e(o,i,{get:()=>e[i],enumerable:!(n=h9e(e,i))||n.enumerable});return o},"__copyProps"),p9e=u((o,e,t)=>(eCe(o,e,"default"),t&&eCe(t,e,"default")),"__reExport"),m9e="5.0.2",zb={};p9e(zb,aE);var wLe=(o=>(o[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o))(wLe||{}),CLe=(o=>(o[o.None=0]="None",o[o.Preserve=1]="Preserve",o[o.React=2]="React",o[o.ReactNative=3]="ReactNative",o[o.ReactJSX=4]="ReactJSX",o[o.ReactJSXDev=5]="ReactJSXDev",o))(CLe||{}),SLe=(o=>(o[o.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",o[o.LineFeed=1]="LineFeed",o))(SLe||{}),xLe=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(xLe||{}),TLe=(o=>(o[o.Classic=1]="Classic",o[o.NodeJs=2]="NodeJs",o))(TLe||{}),px,LLe=(px=class{_onDidChange=new zb.Emitter;_onDidExtraLibsChange=new zb.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;_modeConfiguration;constructor(e,t,n,i,s){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(i),this.setModeConfiguration(s),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[n]&&(i=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(i=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[n];s&&s.version===i&&(delete this._extraLibs[n],this._removedExtraLibs[n]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=t.content;let s=1;this._removedExtraLibs[n]&&(s=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:i,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(void 0)}},u(px,"LanguageServiceDefaultsImpl"),px),b9e=m9e,ELe={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},kLe=new LLe({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},ELe),DLe=new LLe({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},ELe),_9e=u(()=>n4().then(o=>o.getTypeScriptWorker()),"getTypeScriptWorker"),v9e=u(()=>n4().then(o=>o.getJavaScriptWorker()),"getJavaScriptWorker");zb.languages.typescript={ModuleKind:wLe,JsxEmit:CLe,NewLineKind:SLe,ScriptTarget:xLe,ModuleResolutionKind:TLe,typescriptVersion:b9e,typescriptDefaults:kLe,javascriptDefaults:DLe,getTypeScriptWorker:_9e,getJavaScriptWorker:v9e};function n4(){return Le(()=>import("./tsMode-34c2e8db.js"),["assets/tsMode-34c2e8db.js","assets/index-dcf73f67.js","assets/useControlled-3adf31ee.js"])}u(n4,"getMode");zb.languages.onLanguage("typescript",()=>n4().then(o=>o.setupTypeScript(kLe)));zb.languages.onLanguage("javascript",()=>n4().then(o=>o.setupJavaScript(DLe)));var y9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},w9e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},i4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},kG;const s4=new _e("selectionAnchorSet",!1);var mx;let Ud=kG=(mx=class{static get(e){return e.getContribution(kG.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=s4.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(xe.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new zn().appendText(m("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Ii(m("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(xe.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},u(mx,"SelectionAnchorController"),mx);Ud.ID="editor.contrib.selectionAnchorController";Ud=kG=y9e([w9e(1,Re)],Ud);const Rhe=class Rhe extends ye{constructor(){super({id:"editor.action.setSelectionAnchor",label:m("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2080),weight:100}})}run(e,t){var n;return i4(this,void 0,void 0,function*(){(n=Ud.get(t))===null||n===void 0||n.setSelectionAnchor()})}};u(Rhe,"SetSelectionAnchor");let DG=Rhe;const Phe=class Phe extends ye{constructor(){super({id:"editor.action.goToSelectionAnchor",label:m("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:s4})}run(e,t){var n;return i4(this,void 0,void 0,function*(){(n=Ud.get(t))===null||n===void 0||n.goToSelectionAnchor()})}};u(Phe,"GoToSelectionAnchor");let MG=Phe;const Fhe=class Fhe extends ye{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:m("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:s4,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2089),weight:100}})}run(e,t){var n;return i4(this,void 0,void 0,function*(){(n=Ud.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}};u(Fhe,"SelectFromAnchorToCursor");let AG=Fhe;const Ohe=class Ohe extends ye{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:m("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:s4,kbOpts:{kbExpr:M.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return i4(this,void 0,void 0,function*(){(n=Ud.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}};u(Ohe,"CancelSelectionAnchor");let IG=Ohe;ft(Ud.ID,Ud,4);ae(DG);ae(MG);ae(AG);ae(IG);const C9e=I("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},m("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),Hhe=class Hhe extends ye{constructor(){super({id:"editor.action.jumpToBracket",label:m("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:3165,weight:100}})}run(e,t){var n;(n=wl.get(t))===null||n===void 0||n.jumpToBracket()}};u(Hhe,"JumpToBracketAction");let NG=Hhe;const Vhe=class Vhe extends ye{constructor(){super({id:"editor.action.selectToBracket",label:m("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var i;let s=!0;n&&n.selectBrackets===!1&&(s=!1),(i=wl.get(t))===null||i===void 0||i.selectToBracket(s)}};u(Vhe,"SelectToBracketAction");let RG=Vhe;const Whe=class Whe extends ye{constructor(){super({id:"editor.action.removeBrackets",label:m("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:2561,weight:100}})}run(e,t){var n;(n=wl.get(t))===null||n===void 0||n.removeBrackets(this.id)}};u(Whe,"RemoveBracketsAction");let PG=Whe;const Bhe=class Bhe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}};u(Bhe,"BracketsData");let FG=Bhe;const dm=class dm extends G{static get(e){return e.getContribution(dm.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Et(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(70),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(70)&&(this._matchBrackets=this._editor.getOption(70),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),s=e.bracketPairs.matchBracket(i);let r=null;if(s)s[0].containsPosition(i)&&!s[1].containsPosition(i)?r=s[1].getStartPosition():s[1].containsPosition(i)&&(r=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(r=l.range.getStartPosition())}}return r?new xe(r.lineNumber,r.column,r.lineNumber,r.column):new xe(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const s=i.getStartPosition();let r=t.bracketPairs.matchBracket(s);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(s),!r)){const d=t.bracketPairs.findNextBracket(s);d&&d.range&&(r=t.bracketPairs.matchBracket(d.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(L.compareRangesUsingStarts);const[d,c]=r;if(a=e?d.getStartPosition():d.getEndPosition(),l=e?c.getEndPosition():c.getStartPosition(),c.containsPosition(s)){const h=a;a=l,l=h}}a&&l&&n.push(new xe(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(n=>{const i=n.getPosition();let s=t.bracketPairs.matchBracket(i);s||(s=t.bracketPairs.findEnclosingBrackets(i)),s&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:s[0],text:""},{range:s[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);const s=[];let r=0;for(let h=0,g=e.length;h<g;h++){const f=e[h];f.isEmpty()&&(s[r++]=f.getStartPosition())}s.length>1&&s.sort(W.compare);const a=[];let l=0,d=0;const c=i.length;for(let h=0,g=s.length;h<g;h++){const f=s[h];for(;d<c&&i[d].position.isBefore(f);)d++;if(d<c&&i[d].position.equals(f))a[l++]=i[d];else{let p=t.bracketPairs.matchBracket(f,20),b=dm._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!p&&this._matchBrackets==="always"&&(p=t.bracketPairs.findEnclosingBrackets(f,20),b=dm._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new FG(f,p,b)}}this._lastBracketsData=a,this._lastVersionId=n}};u(dm,"BracketMatchingController");let wl=dm;wl.ID="editor.contrib.bracketMatchingController";wl._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Fe.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:ln(C9e),position:mo.Center}});wl._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Fe.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});ft(wl.ID,wl,1);ae(RG);ae(NG);ae(PG);Ni.appendMenuItem(A.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:m({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});const Uhe=class Uhe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(n)))if(this._isMovingLeft){const r=new L(n,i-1,n,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,s,n,s),a)}else{const r=new L(n,s,n,s+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new xe(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new xe(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}};u(Uhe,"MoveCaretCommand");let OG=Uhe;const zhe=class zhe extends ye{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const s of i)n.push(new OG(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};u(zhe,"MoveCaretAction");let AN=zhe;const Ghe=class Ghe extends AN{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:m("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:M.writable})}};u(Ghe,"MoveCaretLeftAction");let HG=Ghe;const jhe=class jhe extends AN{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:m("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:M.writable})}};u(jhe,"MoveCaretRightAction");let VG=jhe;ae(HG);ae(VG);const Khe=class Khe extends ye{constructor(){super({id:"editor.action.transposeLetters",label:m("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],s=t.getSelections();for(const r of s){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,d=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&d===2))continue;const c=l===d?r.getPosition():an.rightPosition(n,r.getPosition().lineNumber,r.getPosition().column),h=an.leftPosition(n,c),g=an.leftPosition(n,h),f=n.getValueInRange(L.fromPositions(g,h)),p=n.getValueInRange(L.fromPositions(h,c)),b=L.fromPositions(g,c);i.push(new ni(b,p+f))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}};u(Khe,"TransposeLettersAction");let WG=Khe;ae(WG);var S9e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Zg="9_cutcopypaste",x9e=ca||document.queryCommandSupported("cut"),MLe=ca||document.queryCommandSupported("copy"),T9e=typeof navigator.clipboard>"u"||Bo?document.queryCommandSupported("paste"):!0;function AJ(o){return o.register(),o}u(AJ,"registerCommand");const L9e=x9e?AJ(new yu({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:ca?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:m({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:A.EditorContext,group:Zg,title:m("actions.clipboard.cutLabel","Cut"),when:M.writable,order:1},{menuId:A.CommandPalette,group:"",title:m("actions.clipboard.cutLabel","Cut"),order:1},{menuId:A.SimpleEditorContext,group:Zg,title:m("actions.clipboard.cutLabel","Cut"),when:M.writable,order:1}]})):void 0,E9e=MLe?AJ(new yu({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:ca?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:m({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:A.EditorContext,group:Zg,title:m("actions.clipboard.copyLabel","Copy"),order:2},{menuId:A.CommandPalette,group:"",title:m("actions.clipboard.copyLabel","Copy"),order:1},{menuId:A.SimpleEditorContext,group:Zg,title:m("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Ni.appendMenuItem(A.MenubarEditMenu,{submenu:A.MenubarCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Ni.appendMenuItem(A.EditorContext,{submenu:A.EditorContextCopy,title:{value:m("copy as","Copy As"),original:"Copy As"},group:Zg,order:3});Ni.appendMenuItem(A.EditorContext,{submenu:A.EditorContextShare,title:{value:m("share","Share"),original:"Share"},group:"11_share",order:-1,when:ne.and(ne.notEquals("resourceScheme","output"),M.editorTextFocus)});Ni.appendMenuItem(A.EditorTitleContext,{submenu:A.EditorTitleContextShare,title:{value:m("share","Share"),original:"Share"},group:"11_share",order:-1});Ni.appendMenuItem(A.ExplorerContext,{submenu:A.ExplorerContextShare,title:{value:m("share","Share"),original:"Share"},group:"11_share",order:-1});const WH=T9e?AJ(new yu({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:ca?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:A.MenubarEditMenu,group:"2_ccp",title:m({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:A.EditorContext,group:Zg,title:m("actions.clipboard.pasteLabel","Paste"),when:M.writable,order:4},{menuId:A.CommandPalette,group:"",title:m("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:A.SimpleEditorContext,group:Zg,title:m("actions.clipboard.pasteLabel","Paste"),when:M.writable,order:4}]})):void 0,$he=class $he extends ye{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:m("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(36)&&t.getSelection().isEmpty()||(p7.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),p7.forceCopyWithSyntaxHighlighting=!1)}};u($he,"ExecCommandCopyWithSyntaxHighlightingAction");let BG=$he;function ALe(o,e){o&&(o.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(gt).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const s=i.getOption(36),r=i.getSelection();return r&&r.isEmpty()&&!s||document.execCommand(e),!0}return!1}),o.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}u(ALe,"registerExecCommandImpl");ALe(L9e,"cut");ALe(E9e,"copy");WH&&(WH.addImplementation(1e4,"code-editor",(o,e)=>{const t=o.get(gt),n=o.get(Sa),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&Ku?(()=>S9e(void 0,void 0,void 0,function*(){const r=yield n.readText();if(r!==""){const a=Hg.INSTANCE.get(r);let l=!1,d=null,c=null;a&&(l=i.getOption(36)&&!!a.isFromEmptySelection,d=typeof a.multicursorText<"u"?a.multicursorText:null,c=a.mode),i.trigger("keyboard","paste",{text:r,pasteOnNewLine:l,multicursorText:d,mode:c})}}))():!0:!1}),WH.addImplementation(0,"generic-dom",(o,e)=>(document.execCommand("paste"),!0)));MLe&&ae(BG);var k9e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const cm=class cm{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+cm.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new cm(this.value+cm.sep+e)}};u(cm,"CodeActionKind");let We=cm;We.sep=".";We.None=new We("@@none@@");We.Empty=new We("");We.QuickFix=new We("quickfix");We.Refactor=new We("refactor");We.RefactorExtract=We.Refactor.append("extract");We.RefactorInline=We.Refactor.append("inline");We.RefactorMove=We.Refactor.append("move");We.RefactorRewrite=We.Refactor.append("rewrite");We.Source=new We("source");We.SourceOrganizeImports=We.Source.append("organizeImports");We.SourceFixAll=We.Source.append("fixAll");We.SurroundWith=We.Refactor.append("surround");var yo;(function(o){o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view"})(yo||(yo={}));function D9e(o,e){return!(o.include&&!o.include.intersects(e)||o.excludes&&o.excludes.some(t=>ILe(e,t,o.include))||!o.includeSourceActions&&We.Source.contains(e))}u(D9e,"mayIncludeActionsOfKind");function M9e(o,e){const t=e.kind?new We(e.kind):void 0;return!(o.include&&(!t||!o.include.contains(t))||o.excludes&&t&&o.excludes.some(n=>ILe(t,n,o.include))||!o.includeSourceActions&&t&&We.Source.contains(t)||o.onlyIncludePreferredActions&&!e.isPreferred)}u(M9e,"filtersAction");function ILe(o,e,t){return!(!e.contains(o)||t&&e.contains(t))}u(ILe,"excludesAction");const Dc=class Dc{static fromUser(e,t){return!e||typeof e!="object"?new Dc(t.kind,t.apply,!1):new Dc(Dc.getKindFromUser(e,t.kind),Dc.getApplyFromUser(e,t.apply),Dc.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new We(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}};u(Dc,"CodeActionCommandArgs");let Gb=Dc;const qhe=class qhe{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return k9e(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Ln(i)}n&&(this.action.edit=n.edit)}return this})}};u(qhe,"CodeActionItem");let UG=qhe;var IN=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const NLe="editor.action.codeAction",IJ="editor.action.quickFix",RLe="editor.action.autoFix",PLe="editor.action.refactor",FLe="editor.action.sourceAction",NJ="editor.action.organizeImports",RJ="editor.action.fixAll",um=class um extends G{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return Ri(e.diagnostics)?Ri(t.diagnostics)?um.codeActionsPreferredComparator(e,t):-1:Ri(t.diagnostics)?1:um.codeActionsPreferredComparator(e,t)}constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(um.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&We.QuickFix.contains(new We(e.kind))&&!!e.isPreferred)}};u(um,"ManagedCodeActionSet");let zG=um;const tCe={actions:[],documentation:void 0};function PJ(o,e,t,n,i,s){var r;return IN(this,void 0,void 0,function*(){const a=n.filter||{},l={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:n.type},d=new CC(e,s),c=A9e(o,e,a),h=new ie,g=c.map(p=>IN(this,void 0,void 0,function*(){try{i.report(p);const b=yield p.provideCodeActions(e,t,l,d.token);if(b&&h.add(b),d.token.isCancellationRequested)return tCe;const _=(b?.actions||[]).filter(y=>y&&M9e(a,y)),v=N9e(p,_,a.include);return{actions:_.map(y=>new UG(y,p)),documentation:v}}catch(b){if(Ca(b))throw b;return Ln(b),tCe}})),f=o.onDidChange(()=>{const p=o.all(e);jn(p,c)||d.cancel()});try{const p=yield Promise.all(g),b=p.map(v=>v.actions).flat(),_=[...ol(p.map(v=>v.documentation)),...I9e(o,e,n,b)];return new zG(b,_,h)}finally{f.dispose(),d.dispose()}})}u(PJ,"getCodeActions");function A9e(o,e,t){return o.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>D9e(t,new We(i))):!0)}u(A9e,"getCodeActionProviders");function*I9e(o,e,t,n){var i,s,r;if(e&&n.length)for(const a of o.all(e))a._getAdditionalMenuItems&&(yield*(i=a._getAdditionalMenuItems)===null||i===void 0?void 0:i.call(a,{trigger:t.type,only:(r=(s=t.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},n.map(l=>l.action)))}u(I9e,"getAdditionalDocumentationForShowingActions");function N9e(o,e,t){if(!o.documentation)return;const n=o.documentation.map(i=>({kind:new We(i.kind),command:i.command}));if(t){let i;for(const s of n)s.kind.contains(t)&&(i?i.kind.contains(s.kind)&&(i=s):i=s);if(i)return i?.command}for(const i of e)if(i.kind){for(const s of n)if(s.kind.contains(new We(i.kind)))return s.command}}u(N9e,"getDocumentationFromProvider");var NN;(function(o){o.OnSave="onSave",o.FromProblemsView="fromProblemsView",o.FromCodeActions="fromCodeActions"})(NN||(NN={}));function R9e(o,e,t,n,i=Ze.None){var s;return IN(this,void 0,void 0,function*(){const r=o.get(oE),a=o.get(un),l=o.get(xo),d=o.get(_n);if(l.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),yield e.resolve(i),!i.isCancellationRequested&&!(!((s=e.action.edit)===null||s===void 0)&&s.edits.length&&!(yield r.apply(e.action.edit,{editor:n?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==NN.OnSave,showPreview:n?.preview})).isApplied)&&e.action.command)try{yield a.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(c){const h=P9e(c);d.error(typeof h=="string"?h:m("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}u(R9e,"applyCodeAction");function P9e(o){return typeof o=="string"?o:o instanceof Error&&typeof o.message=="string"?o.message:void 0}u(P9e,"asMessage");lt.registerCommand("_executeCodeActionProvider",function(o,e,t,n,i){return IN(this,void 0,void 0,function*(){if(!(e instanceof Ae))throw Ho();const{codeActionProvider:s}=o.get(we),r=o.get(Xt).getModel(e);if(!r)throw Ho();const a=xe.isISelection(t)?xe.liftSelection(t):L.isIRange(t)?r.validateRange(t):void 0;if(!a)throw Ho();const l=typeof n=="string"?new We(n):void 0,d=yield PJ(s,r,a,{type:1,triggerAction:yo.Default,filter:{includeSourceActions:!0,include:l}},Bd.None,Ze.None),c=[],h=Math.min(d.validActions.length,typeof i=="number"?i:0);for(let g=0;g<h;g++)c.push(d.validActions[g].resolve(Ze.None));try{return yield Promise.all(c),d.validActions.map(g=>g.action)}finally{setTimeout(()=>d.dispose(),100)}})});var F9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},O9e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},GG,bx;let RN=GG=(bx=class{constructor(e){this.keybindingService=e}getResolver(){const e=new dl(()=>this.keybindingService.getKeybindings().filter(t=>GG.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===NJ?n={kind:We.SourceOrganizeImports.value}:t.command===RJ&&(n={kind:We.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Gb.fromUser(n,{kind:We.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.value);return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new We(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,s)=>i?i.kind.contains(s.kind)?s:i:s,void 0)}},u(bx,"CodeActionKeybindingResolver"),bx);RN.codeActionCommands=[PLe,NLe,FLe,NJ,RJ];RN=GG=F9e([O9e(0,At)],RN);I("symbolIcon.arrayForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.booleanForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.colorForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.constantForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.fileForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.folderForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.keyForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.keywordForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.moduleForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.namespaceForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.nullForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.numberForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.objectForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.operatorForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.packageForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.propertyForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.referenceForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.snippetForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.stringForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.structForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.textForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.typeParameterForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.unitForeground",{dark:de,light:de,hcDark:de,hcLight:de},m("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));I("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const OLe=Object.freeze({kind:We.Empty,title:m("codeAction.widget.id.more","More Actions...")}),H9e=Object.freeze([{kind:We.QuickFix,title:m("codeAction.widget.id.quickfix","Quick Fix")},{kind:We.RefactorExtract,title:m("codeAction.widget.id.extract","Extract"),icon:ue.wrench},{kind:We.RefactorInline,title:m("codeAction.widget.id.inline","Inline"),icon:ue.wrench},{kind:We.RefactorRewrite,title:m("codeAction.widget.id.convert","Rewrite"),icon:ue.wrench},{kind:We.RefactorMove,title:m("codeAction.widget.id.move","Move"),icon:ue.wrench},{kind:We.SurroundWith,title:m("codeAction.widget.id.surround","Surround With"),icon:ue.symbolSnippet},{kind:We.Source,title:m("codeAction.widget.id.source","Source Action"),icon:ue.symbolFile},OLe]);function V9e(o,e,t){if(!e)return o.map(s=>({kind:"action",item:s,group:OLe,disabled:!!s.action.disabled,label:s.action.disabled||s.action.title}));const n=H9e.map(s=>({group:s,actions:[]}));for(const s of o){const r=s.action.kind?new We(s.action.kind):We.None;for(const a of n)if(a.group.kind.contains(r)){a.actions.push(s);break}}const i=[];for(const s of n)if(s.actions.length){i.push({kind:"header",group:s.group});for(const r of s.actions)i.push({kind:"action",item:r,group:s.group,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}return i}u(V9e,"toMenuItems");var W9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},B9e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},jG,Op;(function(o){o.Hidden={type:0};const t=class t{constructor(i,s,r,a){this.actions=i,this.trigger=s,this.editorPosition=r,this.widgetPosition=a,this.type=1}};u(t,"Showing");let e=t;o.Showing=e})(Op||(Op={}));var _x;let Jg=jG=(_x=class extends G{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new V),this.onClick=this._onClick.event,this._state=Op.Hidden,this._domNode=re("div.lightBulbWidget"),this._register(oi.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(n=>{const i=this._editor.getModel();(this.state.type!==1||!i||this.state.editorPosition.lineNumber>=i.getLineCount())&&this.hide()})),this._register(VIe(this._domNode,n=>{if(this.state.type!==1)return;this._editor.focus(),n.preventDefault();const{top:i,height:s}=Cn(this._domNode),r=this._editor.getOption(65);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:n.posx,y:i+s+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(q(this._domNode,"mouseenter",n=>{(n.buttons&1)===1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(63)&&!this._editor.getOption(63).enabled&&this.hide()})),this._register(Ce.runAndSubscribe(t.onDidUpdateKeybindings,()=>{var n,i,s,r;this._preferredKbLabel=(i=(n=t.lookupKeybinding(RLe))===null||n===void 0?void 0:n.getLabel())!==null&&i!==void 0?i:void 0,this._quickFixKbLabel=(r=(s=t.lookupKeybinding(IJ))===null||s===void 0?void 0:s.getLabel())!==null&&r!==void 0?r:void 0,this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(63).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(n),l=s.getOptions().tabSize,d=i.get(49),c=s.getLineContent(r),h=NO(c,l),g=d.spaceWidth*h>22,f=u(b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1),"isFolded");let p=r;if(!g){if(r>1&&!f(r-1))p-=1;else if(!f(r+1))p+=1;else if(a*d.spaceWidth<22)return this.hide()}this.state=new Op.Showing(e,t,n,{position:{lineNumber:p,column:1},preference:jG._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==Op.Hidden&&(this.state=Op.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...Te.asClassNameArray(ue.lightBulb)),this._domNode.classList.add(...Te.asClassNameArray(ue.lightbulbAutofix)),this._preferredKbLabel)){this.title=m("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel);return}this._domNode.classList.remove(...Te.asClassNameArray(ue.lightbulbAutofix)),this._domNode.classList.add(...Te.asClassNameArray(ue.lightBulb)),this._quickFixKbLabel?this.title=m("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=m("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}},u(_x,"LightBulbWidget"),_x);Jg.ID="editor.contrib.lightbulbWidget";Jg._posPref=[0];Jg=jG=W9e([B9e(1,At)],Jg);var U9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nCe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},HLe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},KG,vx;let zd=KG=(vx=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new V,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new ie,s=i.add(HO(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,i)=>HLe(this,void 0,void 0,function*(){var s,r,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=go);const d=yield $Pe(this._languageService,i,l),c=document.createElement("span");if(c.innerHTML=(a=(r=KG._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(d))!==null&&a!==void 0?a:d,this._options.editor){const h=this._options.editor.getOption(49);Kn(c,h)}else this._options.codeBlockFontFamily&&(c.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(c.style.fontSize=this._options.codeBlockFontSize),c}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>VLe(this._openerService,n,e.isTrusted),disposables:t}}}},u(vx,"MarkdownRenderer"),vx);zd._ttpTokenizer=Kd("tokenizeToString",{createHTML(o){return o}});zd=KG=U9e([nCe(1,Kt),nCe(2,Ks)],zd);function VLe(o,e,t){return HLe(this,void 0,void 0,function*(){try{return yield o.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:z9e(t)})}catch(n){return Be(n),!1}})}u(VLe,"openLinkFromMarkdown");function z9e(o){return o===!0?!0:o&&Array.isArray(o.enabledCommands)?o.enabledCommands:!1}u(z9e,"toAllowCommandsOption");var G9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iCe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},qk,yx;let zs=qk=(yx=class{static get(e){return e.getContribution(qk.ID)}constructor(e,t,n){this._openerService=n,this._messageWidget=new si,this._messageListeners=new ie,this._mouseOverMessage=!1,this._editor=e,this._visible=qk.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)===null||e===void 0||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Ii(nu(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=nu(e)?HO(e,{actionHandler:{callback:i=>VLe(this._openerService,i,nu(e)?e.isTrusted:void 0),disposables:this._messageListeners}}):void 0,this._messageWidget.value=new sCe(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Ce.debounce(this._editor.onDidBlurEditorText,(i,s)=>s,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Mi(document.activeElement,this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(q(this._messageWidget.value.getDomNode(),pe.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(q(this._messageWidget.value.getDomNode(),pe.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new L(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(sCe.fadeOut(this._messageWidget.value))}},u(yx,"MessageController"),yx);zs.ID="editor.contrib.messageController";zs.MESSAGE_VISIBLE=new _e("messageVisible",!1,m("messageVisible","Whether the editor is currently showing an inline message"));zs=qk=G9e([iCe(1,Re),iCe(2,Ks)],zs);const j9e=hi.bindToContribution(zs.get);he(new j9e({id:"leaveEditorMessage",precondition:zs.MESSAGE_VISIBLE,handler:o=>o.closeMessage(),kbOpts:{weight:100+30,primary:9}}));var wx;let sCe=(wx=class{static fadeOut(e){const t=u(()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},"dispose"),n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const r=document.createElement("div");typeof i=="string"?(r.classList.add("message"),r.textContent=i):(i.classList.add("message"),r.appendChild(i)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}},u(wx,"MessageWidget"),wx);ft(zs.ID,zs,4);var WLe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$G=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const BLe="acceptSelectedCodeAction",ULe="previewSelectedCodeAction",Yhe=class Yhe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,n){var i,s;n.text.textContent=(s=(i=e.group)===null||i===void 0?void 0:i.title)!==null&&s!==void 0?s:""}disposeTemplate(e){}};u(Yhe,"HeaderRenderer");let qG=Yhe;var Cx;let YG=(Cx=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const n=document.createElement("span");n.className="title",e.append(n);const i=new fC(e,oo);return{container:e,icon:t,text:n,keybinding:i}}renderElement(e,t,n){var i,s,r;if(!((i=e.group)===null||i===void 0)&&i.icon?(n.icon.className=Te.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=be(e.group.icon.color.id))):(n.icon.className=Te.asClassName(ue.lightBulb),n.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;n.text.textContent=zLe(e.label),n.keybinding.set(e.keybinding),YIe(!!e.keybinding,n.keybinding.element);const a=(s=this._keybindingService.lookupKeybinding(BLe))===null||s===void 0?void 0:s.getLabel(),l=(r=this._keybindingService.lookupKeybinding(ULe))===null||r===void 0?void 0:r.getLabel();n.container.classList.toggle("option-disabled",e.disabled),e.disabled?n.container.title=e.label:a&&l?this._supportsPreview?n.container.title=m({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to apply, Shift+F2 to preview"']},"{0} to apply, {1} to preview",a,l):n.container.title=m({key:"label",comment:['placeholder is a keybinding, e.g "F2 to apply"']},"{0} to apply",a):n.container.title=""}disposeTemplate(e){}},u(Cx,"ActionItemRenderer"),Cx);YG=WLe([$G(1,At)],YG);const Xhe=class Xhe extends UIEvent{constructor(){super("acceptSelectedAction")}};u(Xhe,"AcceptSelectedEvent");let XG=Xhe;const Zhe=class Zhe extends UIEvent{constructor(){super("previewSelectedAction")}};u(Zhe,"PreviewSelectedEvent");let PN=Zhe;function K9e(o){if(o.kind==="action")return o.label}u(K9e,"getKeyboardNavigationLabel");var Sx;let ZG=(Sx=class extends G{constructor(e,t,n,i,s,r){super(),this._delegate=i,this._contextViewService=s,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new vo(e,this.domNode,a,[new YG(t,this._keybindingService),new qG],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:K9e},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let d=l.label?zLe(l?.label):"";return l.disabled&&(d=m({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",d,l.disabled)),d}return null},getWidgetAriaLabel:()=>m({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(kf),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this._list.domFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=n,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(d=>d.kind==="header").length,i=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(i);const s=this._allMenuItems.map((d,c)=>{const h=document.getElementById(this._list.getElementID(c));if(h){h.style.width="auto";const g=h.getBoundingClientRect().width;return h.style.width="",g}return 0}),r=Math.max(...s,e),a=.7,l=Math.min(i,document.body.clientHeight*a);return this._list.layout(l,r),this.domNode.style.height=`${l}px`,this._list.domFocus(),r}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const n=t[0],i=this._list.element(n);if(!this.focusCondition(i))return;const s=e?new PN:new XG;this._list.setSelection([n],s)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof PN):this._list.setSelection([])}onListHover(e){this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}},u(Sx,"ActionList"),Sx);ZG=WLe([$G(4,qd),$G(5,At)],ZG);function zLe(o){return o.replace(/\r\n|\r|\n/g," ")}u(zLe,"stripNewlines");var $9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},BH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};I("actionBar.toggledBackground",{dark:Gh,light:Gh,hcDark:Gh,hcLight:Gh},m("actionBar.toggledBackground","Background color for toggled action items in action bar."));const Qg={Visible:new _e("codeActionMenuVisible",!1,m("codeActionMenuVisible","Whether the action widget list is visible"))},Af=nt("actionWidgetService");var xx;let ef=(xx=class extends G{get isVisible(){return Qg.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,n){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=n,this._list=this._register(new si)}show(e,t,n,i,s,r,a){const l=Qg.Visible.bindTo(this._contextKeyService),d=this._instantiationService.createInstance(ZG,e,t,n,i);this._contextViewService.showContextView({getAnchor:()=>s,render:c=>(l.set(!0),this._renderWidget(c,d,a??[])),onHide:c=>{l.reset(),this._onWidgetClosed(c)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)===null||t===void 0||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusNext()}hide(){var e;(e=this._list.value)===null||e===void 0||e.hide(),this._list.clear()}_renderWidget(e,t,n){var i;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const r=new ie,a=document.createElement("div"),l=e.appendChild(a);l.classList.add("context-view-block"),r.add(q(l,pe.MOUSE_DOWN,p=>p.stopPropagation()));const d=document.createElement("div"),c=e.appendChild(d);c.classList.add("context-view-pointerBlock"),r.add(q(c,pe.POINTER_MOVE,()=>c.remove())),r.add(q(c,pe.MOUSE_DOWN,()=>c.remove()));let h=0;if(n.length){const p=this._createActionBar(".action-widget-action-bar",n);p&&(s.appendChild(p.getContainer().parentElement),r.add(p),h=p.getContainer().offsetWidth)}const g=(i=this._list.value)===null||i===void 0?void 0:i.layout(h);s.style.width=`${g}px`;const f=r.add(ul(e));return r.add(f.onDidBlur(()=>this.hide())),r}_createActionBar(e,t){if(!t.length)return;const n=re(e),i=new Ls(n);return i.push(t,{icon:!1,label:!0}),i}_onWidgetClosed(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e)}},u(xx,"ActionWidgetService"),xx);ef=$9e([BH(0,qd),BH(1,Re),BH(2,Pe)],ef);ct(Af,ef,1);const dE=100+1e3;Sn(class extends $o{constructor(){super({id:"hideCodeActionWidget",title:{value:m("hideCodeActionWidget.title","Hide action widget"),original:"Hide action widget"},precondition:Qg.Visible,keybinding:{weight:dE,primary:9,secondary:[1033]}})}run(o){o.get(Af).hide()}});Sn(class extends $o{constructor(){super({id:"selectPrevCodeAction",title:{value:m("selectPrevCodeAction.title","Select previous action"),original:"Select previous action"},precondition:Qg.Visible,keybinding:{weight:dE,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(o){const e=o.get(Af);e instanceof ef&&e.focusPrevious()}});Sn(class extends $o{constructor(){super({id:"selectNextCodeAction",title:{value:m("selectNextCodeAction.title","Select next action"),original:"Select next action"},precondition:Qg.Visible,keybinding:{weight:dE,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(o){const e=o.get(Af);e instanceof ef&&e.focusNext()}});Sn(class extends $o{constructor(){super({id:BLe,title:{value:m("acceptSelected.title","Accept selected action"),original:"Accept selected action"},precondition:Qg.Visible,keybinding:{weight:dE,primary:3,secondary:[2137]}})}run(o){const e=o.get(Af);e instanceof ef&&e.acceptSelected()}});Sn(class extends $o{constructor(){super({id:ULe,title:{value:m("previewSelected.title","Preview selected action"),original:"Preview selected action"},precondition:Qg.Visible,keybinding:{weight:dE,primary:2051}})}run(o){const e=o.get(Af);e instanceof ef&&e.acceptSelected(!0)}});const GLe=new _e("supportedCodeAction",""),Jhe=class Jhe extends G{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new bo),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>UZ(n,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:yo.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:s}=n.getPosition(),r=t.getLineContent(i);if(r.length===0)return;if(s===1){if(/\s/.test(r[0]))return}else if(s===t.getLineMaxColumn(i)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[s-2])&&/\s/.test(r[s-1]))return}return n}};u(Jhe,"CodeActionOracle");let JG=Jhe;var Th;(function(o){o.Empty={type:0};const t=class t{constructor(i,s,r){this.trigger=i,this.position=s,this._cancellablePromise=r,this.type=1,this.actions=r.catch(a=>{if(Ca(a))return q9e;throw a})}cancel(){this._cancellablePromise.cancel()}};u(t,"Triggered");let e=t;o.Triggered=e})(Th||(Th={}));const q9e=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1}),Qhe=class Qhe extends G{constructor(e,t,n,i,s){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=s,this._codeActionOracle=this._register(new si),this._state=Th.Empty,this._onDidChangeState=this._register(new V),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=GLe.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(Th.Empty,!0))}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(Th.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(89)){const t=this._registry.all(e).flatMap(n=>{var i;return(i=n.providedCodeActionKinds)!==null&&i!==void 0?i:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new JG(this._editor,this._markerService,n=>{var i;if(!n){this.setState(Th.Empty);return}const s=Fn(r=>PJ(this._registry,e,n.selection,n.trigger,Bd.None,r));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(s,250)),this.setState(new Th.Triggered(n.trigger,n.selection.getStartPosition(),s))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:yo.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}};u(Qhe,"CodeActionModel");let QG=Qhe;var Y9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Vl=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ek=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},ej,Tx;let tf=ej=(Tx=class extends G{static get(e){return e.getContribution(ej.ID)}constructor(e,t,n,i,s,r,a,l,d,c){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=d,this._instantiationService=c,this._activeCodeActions=this._register(new si),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new QG(this._editor,s.codeActionProvider,t,n,r)),this._register(this._model.onDidChangeState(h=>this.update(h))),this._lightBulbWidget=new dl(()=>{const h=this._editor.getContribution(Jg.ID);return h&&this._register(h.onClick(g=>this.showCodeActionList(g.actions,g,{includeDisabledActions:!1,fromLightbulb:!0}))),h}),this._resolver=i.createInstance(RN),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}showCodeActions(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,i){var s;if(!this._editor.hasModel())return;(s=zs.get(this._editor))===null||s===void 0||s.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t,n){return ek(this,void 0,void 0,function*(){try{yield this._instantiationService.invokeFunction(R9e,e,NN.FromCodeActions,{preview:n,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:yo.QuickFix,filter:{}})}})}update(e){var t,n,i,s,r,a,l;return ek(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let d;try{d=yield e.actions}catch(c){Be(c);return}if(!this._disposed)if((n=this._lightBulbWidget.value)===null||n===void 0||n.update(d,e.trigger,e.position),e.trigger.type===1){if(!((i=e.trigger.filter)===null||i===void 0)&&i.include){const h=this.tryGetValidActionToApply(e.trigger,d);if(h){try{(s=this._lightBulbWidget.value)===null||s===void 0||s.hide(),yield this._applyCodeAction(h,!1,!1)}finally{d.dispose()}return}if(e.trigger.context){const g=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,d);if(g&&g.action.disabled){(r=zs.get(this._editor))===null||r===void 0||r.showMessage(g.action.disabled,e.trigger.context.position),d.dispose();return}}}const c=!!(!((a=e.trigger.filter)===null||a===void 0)&&a.include);if(e.trigger.context&&(!d.allActions.length||!c&&!d.validActions.length)){(l=zs.get(this._editor))===null||l===void 0||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=d,d.dispose();return}this._activeCodeActions.value=d,this.showCodeActionList(d,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?d.dispose():this._activeCodeActions.value=d})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n){return ek(this,void 0,void 0,function*(){const i=this._editor.getDomNode();if(!i)return;const s=n.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!s.length)return;const r=W.isIPosition(t)?this.toCoords(t):t,a={onSelect:(l,d)=>ek(this,void 0,void 0,function*(){this._applyCodeAction(l,!0,!!d),this._actionWidgetService.hide()}),onHide:()=>{var l;(l=this._editor)===null||l===void 0||l.focus()}};this._actionWidgetService.show("codeActionWidget",!0,V9e(s,this._shouldShowHeaders(),this._resolver.getResolver()),a,r,i,this._getActionBarActions(e,t,n))})}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Cn(this._editor.getDomNode()),i=n.left+t.left,s=n.top+t.top+t.height;return{x:i,y:s}}_shouldShowHeaders(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:t?.uri})}_getActionBarActions(e,t,n){if(n.fromLightbulb)return[];const i=e.documentation.map(s=>{var r;return{id:s.id,label:s.title,tooltip:(r=s.tooltip)!==null&&r!==void 0?r:"",class:void 0,enabled:!0,run:()=>{var a;return this._commandService.executeCommand(s.id,...(a=s.arguments)!==null&&a!==void 0?a:[])}}});return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:m("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,n))}:{id:"showMoreActions",label:m("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,n))}),i}},u(Tx,"CodeActionController"),Tx);tf.ID="editor.contrib.codeActionController";tf=ej=Y9e([Vl(1,Nl),Vl(2,Re),Vl(3,Pe),Vl(4,we),Vl(5,Il),Vl(6,un),Vl(7,at),Vl(8,Af),Vl(9,Pe)],tf);function cE(o){return ne.regex(GLe.keys()[0],new RegExp("(\\s|^)"+po(o.value)+"\\b"))}u(cE,"contextKeyForSupportedActions");const FJ={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:m("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:m("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[m("args.schema.apply.first","Always apply the first returned code action."),m("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),m("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:m("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function If(o,e,t,n,i=yo.Default){if(o.hasModel()){const s=tf.get(o);s?.manualTriggerAtCurrentPosition(e,i,t,n)}}u(If,"triggerCodeActionsForEditorSelection");const ege=class ege extends ye{constructor(){super({id:IJ,label:m("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:ne.and(M.writable,M.hasCodeActionsProvider),kbOpts:{kbExpr:M.textInputFocus,primary:2137,weight:100}})}run(e,t){return If(t,m("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,yo.QuickFix)}};u(ege,"QuickFixAction");let tj=ege;const tge=class tge extends hi{constructor(){super({id:NLe,precondition:ne.and(M.writable,M.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:FJ}]}})}runEditorCommand(e,t,n){const i=Gb.fromUser(n,{kind:We.Empty,apply:"ifSingle"});return If(t,typeof n?.kind=="string"?i.preferred?m("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):m("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?m("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):m("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}};u(tge,"CodeActionCommand");let nj=tge;const nge=class nge extends ye{constructor(){super({id:PLe,label:m("refactor.label","Refactor..."),alias:"Refactor...",precondition:ne.and(M.writable,M.hasCodeActionsProvider),kbOpts:{kbExpr:M.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:ne.and(M.writable,cE(We.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:FJ}]}})}run(e,t,n){const i=Gb.fromUser(n,{kind:We.Refactor,apply:"never"});return If(t,typeof n?.kind=="string"?i.preferred?m("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):m("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?m("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):m("editor.action.refactor.noneMessage","No refactorings available"),{include:We.Refactor.contains(i.kind)?i.kind:We.None,onlyIncludePreferredActions:i.preferred},i.apply,yo.Refactor)}};u(nge,"RefactorAction");let ij=nge;const ige=class ige extends ye{constructor(){super({id:FLe,label:m("source.label","Source Action..."),alias:"Source Action...",precondition:ne.and(M.writable,M.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:ne.and(M.writable,cE(We.Source))},description:{description:"Source Action...",args:[{name:"args",schema:FJ}]}})}run(e,t,n){const i=Gb.fromUser(n,{kind:We.Source,apply:"never"});return If(t,typeof n?.kind=="string"?i.preferred?m("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):m("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?m("editor.action.source.noneMessage.preferred","No preferred source actions available"):m("editor.action.source.noneMessage","No source actions available"),{include:We.Source.contains(i.kind)?i.kind:We.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,yo.SourceAction)}};u(ige,"SourceAction");let sj=ige;const sge=class sge extends ye{constructor(){super({id:NJ,label:m("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:ne.and(M.writable,cE(We.SourceOrganizeImports)),kbOpts:{kbExpr:M.textInputFocus,primary:1581,weight:100}})}run(e,t){return If(t,m("editor.action.organize.noneMessage","No organize imports action available"),{include:We.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",yo.OrganizeImports)}};u(sge,"OrganizeImportsAction");let oj=sge;const oge=class oge extends ye{constructor(){super({id:RJ,label:m("fixAll.label","Fix All"),alias:"Fix All",precondition:ne.and(M.writable,cE(We.SourceFixAll))})}run(e,t){return If(t,m("fixAll.noneMessage","No fix all action available"),{include:We.SourceFixAll,includeSourceActions:!0},"ifSingle",yo.FixAll)}};u(oge,"FixAllAction");let rj=oge;const rge=class rge extends ye{constructor(){super({id:RLe,label:m("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:ne.and(M.writable,cE(We.QuickFix)),kbOpts:{kbExpr:M.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return If(t,m("editor.action.autoFix.noneMessage","No auto fixes available"),{include:We.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",yo.AutoFix)}};u(rge,"AutoFixAction");let aj=rge;ft(tf.ID,tf,3);ft(Jg.ID,Jg,4);ae(tj);ae(ij);ae(sj);ae(oj);ae(aj);ae(rj);he(new nj);on.as(kl.Configuration).registerConfiguration(Object.assign(Object.assign({},aJ),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:m("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}));var oCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const age=class age{constructor(){this.lenses=[],this._disposables=new ie}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}};u(age,"CodeLensModel");let xC=age;function jLe(o,e,t){return oCe(this,void 0,void 0,function*(){const n=o.ordered(e),i=new Map,s=new xC,r=n.map((a,l)=>oCe(this,void 0,void 0,function*(){i.set(a,l);try{const d=yield Promise.resolve(a.provideCodeLenses(e,t));d&&s.add(d,a)}catch(d){Ln(d)}}));return yield Promise.all(r),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s})}u(jLe,"getCodeLensModel");lt.registerCommand("_executeCodeLensProvider",function(o,...e){let[t,n]=e;Lt(Ae.isUri(t)),Lt(typeof n=="number"||!n);const{codeLensProvider:i}=o.get(we),s=o.get(Xt).getModel(t);if(!s)throw Ho();const r=[],a=new ie;return jLe(i,s,Ze.None).then(l=>{a.add(l);const d=[];for(const c of l.lenses)n==null||c.symbol.command?r.push(c.symbol):n-- >0&&c.provider.resolveCodeLens&&d.push(Promise.resolve(c.provider.resolveCodeLens(s,c.symbol,Ze.None)).then(h=>r.push(h||c.symbol)));return Promise.all(d)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var X9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Z9e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const KLe=nt("ICodeLensCache"),lge=class lge{constructor(e,t){this.lineCount=e,this.data=t}};u(lge,"CacheItem");let FN=lge;var Lx;let lj=(Lx=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new pl(20,.75);const t="codelens/cache";fd(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),ll(e.onWillSaveState)(s=>{s.reason===vI.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new xC;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const s=new FN(e.getLineCount(),i);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const s of n.data.lenses)i.add(s.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],s=[];for(const a of i.lines)s.push({range:new L(a,1,a,11)});const r=new xC;r.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(n,new FN(i.lineCount,r))}}catch{}}},u(Lx,"CodeLensCache"),Lx);lj=X9e([Z9e(0,Rr)],lj);ct(KLe,lj,1);const dge=class dge{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}};u(dge,"CodeLensViewZone");let dj=dge;const _F=class _F{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${_F._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const n=[];let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(r&&(i=!0,r.command)){const a=iu(r.command.title.trim());r.command.id?(n.push(re("a",{id:String(s),title:r.command.tooltip,role:"button"},...a)),this._commands.set(String(s),r.command)):n.push(re("span",{title:r.command.tooltip},...a)),s+1<e.length&&n.push(re("span",void 0," | "))}}i?(wi(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):wi(this._domNode,re("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};u(_F,"CodeLensContentWidget");let ON=_F;ON._idPool=0;const cge=class cge{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}};u(cge,"CodeLensHelper");let a0=cge;const rCe=Fe.register({collapseOnReplaceEdit:!0,description:"codelens"}),uge=class uge{constructor(e,t,n,i,s,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((d,c)=>{d.symbol.command&&l.push(d.symbol),n.addDecoration({range:d.symbol.range,options:rCe},h=>this._decorationIds[c]=h),a?a=L.plusRange(a,d.symbol.range):a=L.lift(d.symbol.range)}),this._viewZone=new dj(a.startLineNumber-1,s,r),this._viewZoneId=i.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new ON(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&L.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:rCe},s=>this._decorationIds[i]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}};u(uge,"CodeLensWidget");let HN=uge;var J9e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},q_=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Q9e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Ex;let jb=(Ex=class{constructor(e,t,n,i,s,r){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=s,this._codeLensCache=r,this._disposables=new ie,this._localToDispose=new ie,this._lenses=[],this._oldCodeLensModels=new ie,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Et(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(49)||a.hasChanged(18)||a.hasChanged(17))&&this._updateLensStyle(),a.hasChanged(16)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(65)/this._editor.getOption(51));let t=this._editor.getOption(18);return(!t||t<5)&&(t=this._editor.getOption(51)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(17),i=this._editor.getOption(49),{style:s}=this._editor.getContainerDomNode();s.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),s.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),n&&(s.setProperty("--vscode-editorCodeLens-fontFamily",n),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Us.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(16))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(pu(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){const s=i.onDidChange(()=>n.schedule());this._localToDispose.add(s)}const n=new Et(()=>{var i;const s=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=Fn(r=>jLe(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);n.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Be)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(He(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var i;this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(c=>{!c.isValid()||l===c.getLineNumber()?a.push(c):(c.update(r),l=c.getLineNumber())});const d=new a0;a.forEach(c=>{c.dispose(d,r),this._lenses.splice(this._lenses.indexOf(c),1)}),d.commit(s)})}),n.schedule(),this._resolveCodeLensesScheduler.cancel(),(i=this._resolveCodeLensesPromise)===null||i===void 0||i.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(He(()=>{if(this._editor.getModel()){const i=ba.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(s,r)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let s=i.target.element;if(s?.tagName==="SPAN"&&(s=s.parentElement),s?.tagName==="A")for(const r of this._lenses){const a=r.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new a0;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let i;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}if(!n.length&&!this._lenses.length)return;const s=ba.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const d=new a0;let c=0,h=0;for(;h<n.length&&c<this._lenses.length;){const g=n[h][0].symbol.range.startLineNumber,f=this._lenses[c].getLineNumber();f<g?(this._lenses[c].dispose(d,l),this._lenses.splice(c,1)):f===g?(this._lenses[c].updateCodeLensSymbols(n[h],d),h++,c++):(this._lenses.splice(c,0,new HN(n[h],this._editor,d,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),c++,h++)}for(;c<this._lenses.length;)this._lenses[c].dispose(d,l),this._lenses.splice(c,1);for(;h<n.length;)this._lenses.push(new HN(n[h],this._editor,d,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;d.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const s=Date.now(),r=Fn(a=>{const l=n.map((d,c)=>{const h=new Array(d.length),g=d.map((f,p)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(t,f.symbol,a)).then(b=>{h[p]=b},Ln):(h[p]=f.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!i[c].isDisposed()&&i[c].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Be(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}},u(Ex,"CodeLensContribution"),Ex);jb.ID="css.editor.codeLens";jb=J9e([q_(1,we),q_(2,Jo),q_(3,un),q_(4,_n),q_(5,KLe)],jb);ft(jb.ID,jb,1);var kx;ae((kx=class extends ye{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:M.hasCodeLensProvider,label:m("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return Q9e(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(xa),i=e.get(un),s=e.get(_n),r=t.getSelection().positionLineNumber,a=t.getContribution(jb.ID);if(!a)return;const l=a.getModel();if(!l)return;const d=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===r&&d.push({label:h.symbol.command.title,command:h.symbol.command});if(d.length===0)return;const c=yield n.pick(d,{canPickMany:!1});if(c){if(l.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(c.command.id,...c.command.arguments||[])}catch(h){s.error(h)}}})}},u(kx,"ShowLensesInCurrentLine"),kx));var e7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},UH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},t7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const hge=class hge{constructor(e,t){this._editorWorkerClient=new aw(e,!1,"editorWorkerService",t)}provideDocumentColors(e,t){return t7e(this,void 0,void 0,function*(){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)})}provideColorPresentations(e,t,n){const i=t.range,s=t.color,r=s.alpha,a=new K(new tt(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),l=r?K.Format.CSS.formatRGB(a):K.Format.CSS.formatRGBA(a),d=r?K.Format.CSS.formatHSL(a):K.Format.CSS.formatHSLA(a),c=r?K.Format.CSS.formatHex(a):K.Format.CSS.formatHexA(a),h=[];return h.push({label:l,textEdit:{range:i,text:l}}),h.push({label:d,textEdit:{range:i,text:d}}),h.push({label:c,textEdit:{range:i,text:c}}),h}};u(hge,"DefaultDocumentColorProvider");let TC=hge;var Dx;let cj=(Dx=class extends G{constructor(e,t,n){super(),this._register(n.colorProvider.register("*",new TC(e,t)))}},u(Dx,"DefaultDocumentColorProviderFeature"),Dx);cj=e7e([UH(0,Xt),UH(1,Pt),UH(2,we)],cj);qO(cj);var uE=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function $Le(o,e,t,n=!0){return uE(this,void 0,void 0,function*(){return OJ(new uj,o,e,t,n)})}u($Le,"getColors");function qLe(o,e,t,n){return Promise.resolve(t.provideColorPresentations(o,e,n))}u(qLe,"getColorPresentations");const gge=class gge{constructor(){}compute(e,t,n,i){return uE(this,void 0,void 0,function*(){const s=yield e.provideDocumentColors(t,n);if(Array.isArray(s))for(const r of s)i.push({colorInfo:r,provider:e});return Array.isArray(s)})}};u(gge,"ColorDataCollector");let uj=gge;const fge=class fge{constructor(){}compute(e,t,n,i){return uE(this,void 0,void 0,function*(){const s=yield e.provideDocumentColors(t,n);if(Array.isArray(s))for(const r of s)i.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(s)})}};u(fge,"ExtColorDataCollector");let hj=fge;const pge=class pge{constructor(e){this.colorInfo=e}compute(e,t,n,i){return uE(this,void 0,void 0,function*(){const s=yield e.provideColorPresentations(t,this.colorInfo,Ze.None);return Array.isArray(s)&&i.push(...s),Array.isArray(s)})}};u(pge,"ColorPresentationsCollector");let gj=pge;function OJ(o,e,t,n,i){return uE(this,void 0,void 0,function*(){let s=!1,r;const a=[],l=e.ordered(t);for(let d=l.length-1;d>=0;d--){const c=l[d];if(c instanceof TC)r=c;else try{(yield o.compute(c,t,n,a))&&(s=!0)}catch(h){Ln(h)}}return s?a:r&&i?(yield o.compute(r,t,n,a),a):[]})}u(OJ,"_findColorData");function YLe(o,e){const{colorProvider:t}=o.get(we),n=o.get(Xt).getModel(e);if(!n)throw Ho();const i=o.get(at).getValue("editor.defaultColorDecorators",{resource:e});return{model:n,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:i}}u(YLe,"_setupColorCommand");lt.registerCommand("_executeDocumentColorProvider",function(o,...e){const[t]=e;if(!(t instanceof Ae))throw Ho();const{model:n,colorProviderRegistry:i,isDefaultColorDecoratorsEnabled:s}=YLe(o,t);return OJ(new hj,i,n,Ze.None,s)});lt.registerCommand("_executeColorPresentationProvider",function(o,...e){const[t,n]=e,{uri:i,range:s}=n;if(!(i instanceof Ae)||!Array.isArray(t)||t.length!==4||!L.isIRange(s))throw Ho();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=YLe(o,i),[d,c,h,g]=t;return OJ(new gj({range:s,color:{red:d,green:c,blue:h,alpha:g}}),a,r,Ze.None,l)});var n7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},zH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},aCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},fj;const XLe=Object.create({});var Mx;let Au=fj=(Mx=class extends G{constructor(e,t,n,i){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new ie),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new _w(this._editor),this._decoratorLimitReporter=new pj,this._colorDecorationClassRefs=this._register(new ie),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:fj.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(n.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(s=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(144);const a=r!==this._isColorDecoratorsEnabled||s.hasChanged(20),l=s.hasChanged(144);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(144),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(19)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new bo,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){return aCe(this,void 0,void 0,function*(){this._computePromise=Fn(e=>aCe(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return[];const n=new Fi(!1),i=yield $Le(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,n.elapsed()),i}));try{const e=yield this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){Be(e)}})}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Fe.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,s)=>this._colorDatas.set(i,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],n=this._editor.getOption(20);for(let s=0;s<e.length&&t.length<n;s++){const{red:r,green:a,blue:l,alpha:d}=e[s].colorInfo.color,c=new tt(Math.round(r*255),Math.round(a*255),Math.round(l*255),d),h=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,g=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:h}));t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:sSe,inlineClassName:`${g.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:XLe}}})}const i=n<e.length?n:!1;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(L.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},u(Mx,"ColorDetector"),Mx);Au.ID="editor.contrib.colorDetector";Au.RECOMPUTE_TIME=1e3;Au=fj=n7e([zH(1,at),zH(2,we),zH(3,Jo)],Au);const mge=class mge{constructor(){this._onDidChange=new V,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}};u(mge,"DecoratorLimitReporter");let pj=mge;ft(Au.ID,Au,1);const bge=class bge{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new V,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new V,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new V,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let n=-1;for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){n=i;break}if(n===-1){const i=t.split("(")[0].toLowerCase();for(let s=0;s<this.colorPresentations.length;s++)if(this.colorPresentations[s].label.toLowerCase().startsWith(i)){n=s;break}}n!==-1&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}};u(bge,"ColorPickerModel");let mj=bge;const so=re,_ge=class _ge extends G{constructor(e,t,n,i=!1){super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=so(".colorpicker-header"),Q(e,this._domNode),this._pickedColorNode=Q(this._domNode,so(".picked-color")),Q(this._pickedColorNode,so("span.codicon.codicon-color-mode")),this._pickedColorPresentation=Q(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const s=m("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",s),this._originalColorNode=Q(this._domNode,so(".original-color")),this._originalColorNode.style.backgroundColor=K.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(_M)||K.white,this._register(n.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(_M)||K.white})),this._register(q(this._pickedColorNode,pe.CLICK,()=>this.model.selectNextColorPresentation())),this._register(q(this._originalColorNode,pe.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=K.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new _j(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=K.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}};u(_ge,"ColorPickerHeader");let bj=_ge;const vge=class vge extends G{constructor(e){super(),this._onClicked=this._register(new V),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),Q(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),Q(this._button,t),Q(t,so(".button"+Te.asCSSSelector(Yt("color-picker-close",ue.close,m("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}};u(vge,"CloseButton");let _j=vge;const yge=class yge extends G{constructor(e,t,n,i=!1){super(),this.model=t,this.pixelRatio=n,this._insertButton=null,this._domNode=so(".colorpicker-body"),Q(e,this._domNode),this._saturationBox=new yj(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new wj(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new Cj(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new Sj(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new K(new Ka(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new K(new Ka(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new K(new Ka(n===360?0:n,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}};u(yge,"ColorPickerBody");let vj=yge;const wge=class wge extends G{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new V,this.onColorFlushed=this._onColorFlushed.event,this._domNode=so(".saturation-wrap"),Q(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",Q(this._domNode,this._canvas),this.selection=so(".saturation-selection"),Q(this._domNode,this.selection),this.layout(),this._register(q(this._domNode,pe.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new wu);const t=Cn(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>this.onDidChangePosition(i.pageX-t.left,i.pageY-t.top),()=>null);const n=q(document,pe.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new K(new Ka(e.h,1,1,1)),n=this._canvas.getContext("2d"),i=n.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const s=n.createLinearGradient(0,0,0,this._canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=K.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=s,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}};u(wge,"SaturationBox");let yj=wge;const Cge=class Cge extends G{constructor(e,t,n=!1){super(),this.model=t,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new V,this.onColorFlushed=this._onColorFlushed.event,n?(this.domNode=Q(e,so(".standalone-strip")),this.overlay=Q(this.domNode,so(".standalone-overlay"))):(this.domNode=Q(e,so(".strip")),this.overlay=Q(this.domNode,so(".overlay"))),this.slider=Q(this.domNode,so(".slider")),this.slider.style.top="0px",this._register(q(this.domNode,pe.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new wu),n=Cn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-n.top),()=>null);const i=q(document,pe.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}};u(Cge,"Strip");let VN=Cge;const Sge=class Sge extends VN{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:n,b:i}=e.rgba,s=new K(new tt(t,n,i,1)),r=new K(new tt(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}};u(Sge,"OpacityStrip");let wj=Sge;const xge=class xge extends VN{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}};u(xge,"HueStrip");let Cj=xge;const Tge=class Tge extends G{constructor(e){super(),this._onClicked=this._register(new V),this.onClicked=this._onClicked.event,this._button=Q(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=t=>{this._onClicked.fire()}}get button(){return this._button}};u(Tge,"InsertButton");let Sj=Tge;const Lge=class Lge extends Ar{constructor(e,t,n,i,s=!1){super(),this.model=t,this.pixelRatio=n,this._register(Yy.onDidChange(()=>this.layout()));const r=so(".colorpicker-widget");e.appendChild(r),this.header=this._register(new bj(r,this.model,i,s)),this.body=this._register(new vj(r,this.model,this.pixelRatio,s))}layout(){this.body.layout()}};u(Lge,"ColorPickerWidget");let xj=Lge;var ZLe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JLe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Kb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Ege=class Ege{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};u(Ege,"ColorHover");let Tj=Ege;var Ax;let WN=(Ax=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,n){return Ss.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return Kb(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=Au.get(this._editor);if(!i)return[];for(const s of t){if(!i.isColorDecoration(s))continue;const r=i.getColorData(s.range.getStartPosition());if(r)return[yield QLe(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}renderHoverParts(e,t){return eEe(this,this._editor,this._themeService,t,e)}},u(Ax,"ColorHoverParticipant"),Ax);WN=ZLe([JLe(1,On)],WN);const kge=class kge{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i}};u(kge,"StandaloneColorPickerHover");let Lj=kge;var Ix;let LC=(Ix=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}createColorHover(e,t,n){return Kb(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!Au.get(this._editor))return null;const s=yield $Le(n,this._editor.getModel(),Ze.None);let r=null,a=null;for(const h of s){const g=h.colorInfo;L.containsRange(g.range,e.range)&&(r=g,a=h.provider)}const l=r??e,d=a??t,c=!!r;return{colorHover:yield QLe(this,this._editor.getModel(),l,d),foundInEditor:c}})}updateEditorModel(e){return Kb(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=e.model;let n=new L(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(yield Yk(this._editor.getModel(),t,this._color,n,e),n=tEe(this._editor,n,t))})}renderHoverParts(e,t){return eEe(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}},u(Ix,"StandaloneColorPickerParticipant"),Ix);LC=ZLe([JLe(1,On)],LC);function QLe(o,e,t,n){return Kb(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:s,green:r,blue:a,alpha:l}=t.color,d=new tt(Math.round(s*255),Math.round(r*255),Math.round(a*255),l),c=new K(d),h=yield qLe(e,t,n,Ze.None),g=new mj(c,[],0);return g.colorPresentations=h||[],g.guessColorPresentation(c,i),o instanceof WN?new Tj(o,L.lift(t.range),g,n):new Lj(o,L.lift(t.range),g,n)})}u(QLe,"_createColorHover");function eEe(o,e,t,n,i){if(n.length===0||!e.hasModel())return G.None;if(i.setMinimumDimensions){const g=e.getOption(65)+8;i.setMinimumDimensions(new _t(302,g))}const s=new ie,r=n[0],a=e.getModel(),l=r.model,d=s.add(new xj(i.fragment,l,e.getOption(140),t,o instanceof LC));i.setColorPicker(d);let c=!1,h=new L(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(o instanceof LC){const g=n[0].model.color;o.color=g,Yk(a,l,g,h,r),s.add(l.onColorFlushed(f=>{o.color=f}))}else s.add(l.onColorFlushed(g=>Kb(this,void 0,void 0,function*(){yield Yk(a,l,g,h,r),c=!0,h=tEe(e,h,l,i)})));return s.add(l.onDidChangeColor(g=>{Yk(a,l,g,h,r)})),s.add(e.onDidChangeModelContent(g=>{c?c=!1:(i.hide(),e.focus())})),s}u(eEe,"renderHoverParts");function tEe(o,e,t,n){let i,s;if(t.presentation.textEdit){i=[t.presentation.textEdit],s=new L(t.presentation.textEdit.range.startLineNumber,t.presentation.textEdit.range.startColumn,t.presentation.textEdit.range.endLineNumber,t.presentation.textEdit.range.endColumn);const r=o.getModel()._setTrackedRange(null,s,3);o.pushUndoStop(),o.executeEdits("colorpicker",i),s=o.getModel()._getTrackedRange(r)||s}else i=[{range:e,text:t.presentation.label,forceMoveMarkers:!1}],s=e.setEndPosition(e.endLineNumber,e.startColumn+t.presentation.label.length),o.pushUndoStop(),o.executeEdits("colorpicker",i);return t.presentation.additionalTextEdits&&(i=[...t.presentation.additionalTextEdits],o.executeEdits("colorpicker",i),n&&n.hide()),o.pushUndoStop(),s}u(tEe,"_updateEditorModel");function Yk(o,e,t,n,i){return Kb(this,void 0,void 0,function*(){const s=yield qLe(o,{range:n,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},i.provider,Ze.None);e.colorPresentations=s||[]})}u(Yk,"_updateColorPresentations");function Ej(o,e){return!!o[e]}u(Ej,"hasModifier");const Dge=class Dge{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=Ej(e.event,t.triggerModifier),this.hasSideBySideModifier=Ej(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}};u(Dge,"ClickLinkMouseEvent");let l0=Dge;const Mge=class Mge{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=Ej(e,t.triggerModifier)}};u(Mge,"ClickLinkKeyboardEvent");let BN=Mge;const Age=class Age{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}};u(Age,"ClickLinkOptions");let Hp=Age;function lCe(o){return o==="altKey"?ot?new Hp(57,"metaKey",6,"altKey"):new Hp(5,"ctrlKey",6,"altKey"):ot?new Hp(6,"altKey",57,"metaKey"):new Hp(6,"altKey",5,"ctrlKey")}u(lCe,"createOptions");const Ige=class Ige extends G{constructor(e,t){var n;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new V),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new V),this.onExecute=this._onExecute.event,this._onCancel=this._register(new V),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(n=t?.extractLineNumberFromMouseEvent)!==null&&n!==void 0?n:i=>i.target.position?i.target.position.lineNumber:0,this._opts=lCe(this._editor.getOption(76)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(76)){const s=lCe(this._editor.getOption(76));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new l0(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new l0(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new l0(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new BN(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new BN(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}};u(Ige,"ClickLinkGesture");let $b=Ige;var i7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wl=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Nx;let Iu=(Nx=class extends Bg{constructor(e,t,n,i,s,r,a,l,d,c,h,g,f){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),n,s,r,a,l,d,c,h,g,f),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(p=>this._onParentConfigurationChanged(p)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){$L(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}},u(Nx,"EmbeddedCodeEditorWidget"),Nx);Iu=i7e([Wl(4,Pe),Wl(5,gt),Wl(6,un),Wl(7,Re),Wl(8,On),Wl(9,_n),Wl(10,El),Wl(11,Pt),Wl(12,we)],Iu);const dCe=new K(new tt(0,122,204)),s7e={showArrow:!0,showFrame:!0,className:"",frameColor:dCe,arrowColor:dCe,keepEditorSelection:!1},o7e="vs.editor.contrib.zoneWidget",Nge=class Nge{constructor(e,t,n,i,s,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=s,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}};u(Nge,"ViewZoneDelegate");let kj=Nge;const Rge=class Rge{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}};u(Rge,"OverlayWidgetDelegate");let Dj=Rge;const vF=class vF{constructor(e){this._editor=e,this._ruleName=vF._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),D0e(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){D0e(this._ruleName),M9(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:L.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};u(vF,"Arrow");let UN=vF;UN._IdGenerator=new qw(".arrow-decoration-");const Pge=class Pge{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new ie,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=td(t),$L(this.options,s7e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new UN(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const n=e-this._decoratingElementsHeight();this.container.style.height=`${n}px`;const i=this.editor.getLayoutInfo();this._doLayout(n,this._getWidth(i))}(t=this._resizeSash)===null||t===void 0||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=L.isIRange(e)?L.lift(e):L.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:Fe.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)===null||e===void 0||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(65);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),s=this._getWidth(i);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(i)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(65);if(!this.options.allowUnlimitedHeight){const g=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,g)}let l=0,d=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(g=>{this._viewZone&&g.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new kj(r,n.lineNumber,n.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=g.addZone(this._viewZone),this._overlayWidget=new Dj(o7e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const g=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=g+"px",this.container.style.borderBottomWidth=g+"px"}const c=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=c+"px",this.container.style.overflow="hidden"),this._doLayout(c,s),this.options.keepEditorSelection||this.editor.setSelection(e);const h=this.editor.getModel();if(h){const g=h.validateRange(new L(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(g,g.startLineNumber===h.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new mr(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(65),i=n<0?Math.ceil(n):Math.floor(n),s=e.heightInLines+i;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}};u(Pge,"ZoneWidget");let Mj=Pge;var nEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iEe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const sEe=nt("IPeekViewService");ct(sEe,class{constructor(){this._widgets=new Map}addExclusiveWidget(o,e){const t=this._widgets.get(o);t&&(t.listener.dispose(),t.widget.dispose());const n=u(()=>{const i=this._widgets.get(o);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(o))},"remove");this._widgets.set(o,{widget:e,listener:e.onDidClose(n)})}},1);var Es;(function(o){o.inPeekEditor=new _e("inReferenceSearchEditor",!0,m("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),o.notInPeekEditor=o.inPeekEditor.toNegated()})(Es||(Es={}));var Rx;let EC=(Rx=class{constructor(e,t){e instanceof Iu&&Es.inPeekEditor.bindTo(t)}dispose(){}},u(Rx,"PeekContextController"),Rx);EC.ID="editor.contrib.referenceController";EC=nEe([iEe(1,Re)],EC);ft(EC.ID,EC,0);function r7e(o){const e=o.get(gt).getFocusedCodeEditor();return e instanceof Iu?e.getParentEditor():e}u(r7e,"getOuterEditor");const a7e={headerBackgroundColor:K.white,primaryHeadingColor:K.fromHex("#333333"),secondaryHeadingColor:K.fromHex("#6c6c6cb3")};var Px;let zN=(Px=class extends Mj{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new V,this.onDidClose=this._onDidClose.event,$L(this.options,a7e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=re(".head"),this._bodyElement=re(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=re(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Jt(this._titleElement,"click",s=>this._onTitleClick(s))),Q(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=re("span.filename"),this._secondaryHeading=re("span.dirname"),this._metaHeading=re("span.meta"),Q(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=re(".peekview-actions");Q(this._headElement,n);const i=this._getActionBarOptions();this._actionbarWidget=new Ls(n,i),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new qn("peekview.close",m("label.close","Close"),Te.asClassName(ue.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:J4e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:$n(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Os(this._metaHeading)):ts(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(65)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}},u(Px,"PeekViewWidget"),Px);zN=nEe([iEe(2,Pe)],zN);const l7e=I("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:K.black,hcLight:K.white},m("peekViewTitleBackground","Background color of the peek view title area.")),oEe=I("peekViewTitleLabel.foreground",{dark:K.white,light:K.black,hcDark:K.white,hcLight:gr},m("peekViewTitleForeground","Color of the peek view title.")),rEe=I("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m("peekViewTitleInfoForeground","Color of the peek view title info.")),d7e=I("peekView.border",{dark:lo,light:lo,hcDark:st,hcLight:st},m("peekViewBorder","Color of the peek view borders and arrow.")),c7e=I("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:K.black,hcLight:K.white},m("peekViewResultsBackground","Background color of the peek view result list."));I("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:K.white,hcLight:gr},m("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));I("peekViewResult.fileForeground",{dark:K.white,light:"#1E1E1E",hcDark:K.white,hcLight:gr},m("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));I("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));I("peekViewResult.selectionForeground",{dark:K.white,light:"#6C6C6C",hcDark:K.white,hcLight:gr},m("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const zc=I("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:K.black,hcLight:K.white},m("peekViewEditorBackground","Background color of the peek view editor."));I("peekViewEditorGutter.background",{dark:zc,light:zc,hcDark:zc,hcLight:zc},m("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));I("peekViewEditorStickyScroll.background",{dark:zc,light:zc,hcDark:zc,hcLight:zc},m("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));I("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));I("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));I("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Gt,hcLight:Gt},m("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var u7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Fge=class Fge{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=FB.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?m({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,qo(this.uri),this.range.startLineNumber,this.range.startColumn):m("aria.oneReference","in {0} on line {1} at column {2}",qo(this.uri),this.range.startLineNumber,this.range.startColumn)}};u(Fge,"OneReference");let Cl=Fge;const Oge=class Oge{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:s,endLineNumber:r,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:s-t}),d=new L(i,l.startColumn,i,s),c=new L(r,a,r,1073741824),h=n.getValueInRange(d).replace(/^\s+/,""),g=n.getValueInRange(e),f=n.getValueInRange(c).replace(/\s+$/,"");return{value:h+g+f,highlight:{start:h.length,end:h.length+g.length}}}};u(Oge,"FilePreview");let Aj=Oge;const Hge=class Hge{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new ws}dispose(){wt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?m("aria.fileReferences.1","1 symbol in {0}, full path {1}",qo(this.uri),this.uri.fsPath):m("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,qo(this.uri),this.uri.fsPath)}resolve(e){return u7e(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new Aj(n))}catch(n){Be(n)}return this})}};u(Hge,"FileReferences");let nf=Hge;const hm=class hm{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new V,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(hm._compareReferences);let i;for(const s of e)if((!i||!jt.isEqual(i.uri,s.uri,!0))&&(i=new nf(this,s.uri),this.groups.push(i)),i.children.length===0||hm._compareReferences(s,i.children[i.children.length-1])!==0){const r=new Cl(n===s,i,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),i.children.push(r)}}dispose(){wt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new hm(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?m("aria.result.0","No results found"):this.references.length===1?m("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?m("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):m("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let i=n.children.indexOf(e);const s=n.children.length,r=n.parent.groups.length;return r===1||t&&i+1<s||!t&&i>0?(t?i=(i+1)%s:i=(i+s-1)%s,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,s)=>({idx:s,prefixLen:xg(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,s)=>i.prefixLen>s.prefixLen?-1:i.prefixLen<s.prefixLen?1:i.offsetDist<s.offsetDist?-1:i.offsetDist>s.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&L.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return jt.compare(e.uri,t.uri)||L.compareRangesUsingStarts(e.range,t.range)}};u(hm,"ReferencesModel");let Xo=hm;var o4=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},r4=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ij,Fx;let Nj=(Fx=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Xo||e instanceof nf}getChildren(e){if(e instanceof Xo)return e.groups;if(e instanceof nf)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}},u(Fx,"DataSource"),Fx);Nj=o4([r4(0,Ds)],Nj);const Vge=class Vge{getHeight(){return 23}getTemplateId(e){return e instanceof nf?kC.id:DC.id}};u(Vge,"Delegate");let Rj=Vge;var Ox;let Pj=(Ox=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Cl){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return qo(e.uri)}},u(Ox,"StringRepresentationProvider"),Ox);Pj=o4([r4(0,At)],Pj);const Wge=class Wge{getId(e){return e instanceof Cl?e.id:e.uri}};u(Wge,"IdentityProvider");let Fj=Wge;var Hx;let Oj=(Hx=class extends G{constructor(e,t){super(),this._labelService=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new Pb(n,{supportHighlights:!0})),this.badge=new gC(Q(n,re(".count")),{},MTe),e.appendChild(n)}set(e,t){const n=RO(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(m("referencesCount","{0} references",i)):this.badge.setTitleFormat(m("referenceCount","{0} reference",i))}},u(Hx,"FileReferencesTemplate"),Hx);Oj=o4([r4(1,Ib)],Oj);var Vx;let kC=Ij=(Vx=class{constructor(e){this._instantiationService=e,this.templateId=Ij.id}renderTemplate(e){return this._instantiationService.createInstance(Oj,e)}renderElement(e,t,n){n.set(e.element,iE(e.filterData))}disposeTemplate(e){e.dispose()}},u(Vx,"FileReferencesRenderer"),Vx);kC.id="FileReferencesRenderer";kC=Ij=o4([r4(0,Pe)],kC);const Bge=class Bge{constructor(e){this.label=new ou(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${qo(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:r}=i;t&&!fa.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,iE(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[r]))}}};u(Bge,"OneReferenceTemplate");let Hj=Bge;const yF=class yF{constructor(){this.templateId=yF.id}renderTemplate(e){return new Hj(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}};u(yF,"OneReferenceRenderer");let DC=yF;DC.id="OneReferenceRenderer";const Uge=class Uge{getWidgetAriaLabel(){return m("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}};u(Uge,"AccessibilityProvider");let Vj=Uge;var h7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bl=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},cCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const wF=class wF{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ie,this._callOnModelChange=new ie,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let i=0,s=e.children.length;i<s;i++){const r=e.children[i];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:wF.DecorationOptions}),n.push(i))}this._editor.changeDecorations(i=>{const s=i.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,i]of this._decorations){const s=t.getDecorationRange(n);if(!s)continue;let r=!1;if(!L.equalsRange(s,i.range)){if(L.spansMultipleLines(s))r=!0;else{const a=i.range.endColumn-i.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=s}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};u(wF,"DecorationsManager");let GN=wF;GN.DecorationOptions=Fe.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});const zge=class zge{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}};u(zge,"LayoutData");let Wj=zge;const Gge=class Gge extends WU{};u(Gge,"ReferencesTree");let Bj=Gge;var Wx;let Uj=(Wx=class extends zN{constructor(e,t,n,i,s,r,a,l,d,c,h,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=s,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=d,this._keybindingService=c,this._languageService=h,this._languageConfigurationService=g,this._disposeOnNewModel=new ie,this._callOnDispose=new ie,this._onDidSelectReference=new V,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new _t(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),wt(this._preview),wt(this._previewNotAvailableMessage),wt(this._tree),wt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(d7e)||K.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(l7e)||K.transparent,primaryHeadingColor:e.getColor(oEe),secondaryHeadingColor:e.getColor(rEe)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Q(e,re("div.messages")),ts(this._messageContainer),this._splitView=new RI(e,{orientation:1}),this._previewContainer=Q(e,re("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Iu,this._previewContainer,t,{},this.editor),ts(this._previewContainer),this._previewNotAvailableMessage=new Wd(m("missingPreviewMessage","no preview available"),go,Wd.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=Q(e,re("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Vj,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Pj),identityProvider:new Fj,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:c7e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Jt(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Bj,"ReferencesWidget",this._treeContainer,new Rj,[this._instantiationService.createInstance(kC),this._instantiationService.createInstance(DC)],this._instantiationService.createInstance(Nj),n),this._splitView.addView({onDidChange:Ce.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},NI.Distribute),this._splitView.addView({onDidChange:Ce.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},NI.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const i=u((s,r)=>{s instanceof Cl&&(r==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:r,source:"tree"}))},"onEvent");this._tree.onDidOpen(s=>{s.sideBySide?i(s.element,"side"):s.editorOptions.pinned?i(s.element,"goto"):i(s.element,"show")}),ts(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new _t(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=m("noResults","No results"),Os(this._messageContainer),Promise.resolve(void 0)):(ts(this._messageContainer),this._decorationsManager=new GN(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Os(this._treeContainer),Os(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Cl)return e;if(e instanceof nf&&e.children.length>0)return e.children[0]}revealReference(e){return cCe(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return cCe(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==qe.inMemory?this.setTitle(_Pe(e.uri),this._uriLabel.getUriLabel(RO(e.uri))):this.setTitle(m("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}wt(this._previewModelReference);const s=i.object;if(s){const r=this._preview.getModel()===s.textEditorModel?0:1,a=L.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}},u(Wx,"ReferenceWidget"),Wx);Uj=h7e([Bl(3,On),Bl(4,Ds),Bl(5,Pe),Bl(6,sEe),Bl(7,Ib),Bl(8,PO),Bl(9,At),Bl(10,Kt),Bl(11,Pt)],Uj);var g7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Gf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},uCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Xk;const Nf=new _e("referenceSearchVisible",!1,m("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var Bx;let Nu=Xk=(Bx=class{static get(e){return e.getContribution(Xk.ID)}constructor(e,t,n,i,s,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=s,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new ie,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Nf.bindTo(n)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=Wj.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(Uj,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(m("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:d,kind:c}=l;if(d)switch(c){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(d,!1,!1);break;case"side":this.openReference(d,!0,!1);break;case"goto":n?this._gotoReference(d,!0):this.openReference(d,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var d;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(d=this._model)===null||d===void 0||d.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(m("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const c=this._editor.getModel().uri,h=new W(e.startLineNumber,e.startColumn),g=this._model.nearestReference(c,h);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(85)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return uCe(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),s=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i,!1),s?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()})}revealReference(e){return uCe(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var n;(n=this._widget)===null||n===void 0||n.hide(),this._ignoreModelChangeEvent=!0;const i=L.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{var r;if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(i),this._widget.focusOnReferenceTree();else{const a=Xk.get(s),l=this._model.clone();this.closeWidget(),s.focus(),a?.toggleWidget(i,Fn(d=>Promise.resolve(l)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},s=>{this._ignoreModelChangeEvent=!1,Be(s)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:s}=e;this._editorService.openCodeEditor({resource:i,options:{selection:s,selectionSource:"code.jump",pinned:n}},this._editor,t)}},u(Bx,"ReferencesController"),Bx);Nu.ID="editor.contrib.referencesController";Nu=Xk=g7e([Gf(2,Re),Gf(3,gt),Gf(4,_n),Gf(5,Pe),Gf(6,Rr),Gf(7,at)],Nu);function Rf(o,e){const t=r7e(o);if(!t)return;const n=Nu.get(t);n&&e(n)}u(Rf,"withController");Ts.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:In(2089,60),when:ne.or(Nf,Es.inPeekEditor),handler(o){Rf(o,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Ts.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:ne.or(Nf,Es.inPeekEditor),handler(o){Rf(o,e=>{e.goToNextOrPreviousReference(!0)})}});Ts.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:ne.or(Nf,Es.inPeekEditor),handler(o){Rf(o,e=>{e.goToNextOrPreviousReference(!1)})}});lt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");lt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");lt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");lt.registerCommand("closeReferenceSearch",o=>Rf(o,e=>e.closeWidget()));Ts.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:ne.and(Es.inPeekEditor,ne.not("config.editor.stablePeek"))});Ts.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:ne.and(Nf,ne.not("config.editor.stablePeek"))});Ts.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:ne.and(Nf,VTe,pJ.negate(),mJ.negate()),handler(o){var e;const n=(e=o.get(Qo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Cl&&Rf(o,i=>i.revealReference(n[0]))}});Ts.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:ne.and(Nf,VTe,pJ.negate(),mJ.negate()),handler(o){var e;const n=(e=o.get(Qo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Cl&&Rf(o,i=>i.openReference(n[0],!0,!0))}});lt.registerCommand("openReference",o=>{var e;const n=(e=o.get(Qo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Cl&&Rf(o,i=>i.openReference(n[0],!1,!0))});var aEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const HJ=new _e("hasSymbols",!1,m("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),a4=nt("ISymbolNavigationService");var Ux;let zj=(Ux=class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=HJ.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new Gj(this._editorService),i=n.onDidChange(s=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let d=!1,c=!1;for(const h of t.references)if(UZ(h.uri,a.uri))d=!0,c=c||L.containsPosition(h.range,l);else if(d)break;(!d||!c)&&this.reset()});this._currentState=yr(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:L.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?m("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):m("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}},u(Ux,"SymbolNavigationService"),Ux);zj=aEe([Cv(0,Re),Cv(1,gt),Cv(2,_n),Cv(3,At)],zj);ct(a4,zj,1);he(new class extends hi{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:HJ,kbOpts:{weight:100,primary:70}})}runEditorCommand(o,e){return o.get(a4).revealNext(e)}});Ts.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:HJ,primary:9,handler(o){o.get(a4).reset()}});var zx;let Gj=(zx=class{constructor(e){this._listener=new Map,this._disposables=new ie,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),wt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,yr(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}},u(zx,"EditorState"),zx);Gj=aEe([Cv(0,gt)],Gj);var VJ=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function hE(o,e,t,n){return VJ(this,void 0,void 0,function*(){const s=t.ordered(o).map(a=>Promise.resolve(n(a,o,e)).then(void 0,l=>{Ln(l)})),r=yield Promise.all(s);return ol(r.flat())})}u(hE,"getLocationLinks");function l4(o,e,t,n){return hE(e,t,o,(i,s,r)=>i.provideDefinition(s,r,n))}u(l4,"getDefinitionsAtPosition");function lEe(o,e,t,n){return hE(e,t,o,(i,s,r)=>i.provideDeclaration(s,r,n))}u(lEe,"getDeclarationsAtPosition");function dEe(o,e,t,n){return hE(e,t,o,(i,s,r)=>i.provideImplementation(s,r,n))}u(dEe,"getImplementationsAtPosition");function cEe(o,e,t,n){return hE(e,t,o,(i,s,r)=>i.provideTypeDefinition(s,r,n))}u(cEe,"getTypeDefinitionsAtPosition");function d4(o,e,t,n,i){return hE(e,t,o,(s,r,a)=>VJ(this,void 0,void 0,function*(){const l=yield s.provideReferences(r,a,{includeDeclaration:!0},i);if(!n||!l||l.length!==2)return l;const d=yield s.provideReferences(r,a,{includeDeclaration:!1},i);return d&&d.length===1?d:l}))}u(d4,"getReferencesAtPosition");function gE(o){return VJ(this,void 0,void 0,function*(){const e=yield o(),t=new Xo(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}u(gE,"_sortedAndDeduped");Al("_executeDefinitionProvider",(o,e,t)=>{const n=o.get(we),i=l4(n.definitionProvider,e,t,Ze.None);return gE(()=>i)});Al("_executeTypeDefinitionProvider",(o,e,t)=>{const n=o.get(we),i=cEe(n.typeDefinitionProvider,e,t,Ze.None);return gE(()=>i)});Al("_executeDeclarationProvider",(o,e,t)=>{const n=o.get(we),i=lEe(n.declarationProvider,e,t,Ze.None);return gE(()=>i)});Al("_executeReferenceProvider",(o,e,t)=>{const n=o.get(we),i=d4(n.referenceProvider,e,t,!1,Ze.None);return gE(()=>i)});Al("_executeImplementationProvider",(o,e,t)=>{const n=o.get(we),i=dEe(n.implementationProvider,e,t,Ze.None);return gE(()=>i)});var wr=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Y_,X_,Z_,tk,nk,ik,sk,ok;Ni.appendMenuItem(A.EditorContext,{submenu:A.EditorContextPeek,title:m("peek.submenu","Peek"),group:"navigation",order:100});const CF=class CF{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof CF||W.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}};u(CF,"SymbolNavigationAnchor");let qb=CF;const Xr=class Xr extends Hd{static all(){return Xr._allSymbolNavigationCommands.values()}static _patchConfig(e){const t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu)for(const n of et.wrap(t.menu))(n.id===A.EditorContext||n.id===A.EditorContextPeek)&&(n.when=ne.and(e.precondition,n.when));return t}constructor(e,t){super(Xr._patchConfig(t)),this.configuration=e,Xr._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,n,i){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(_n),r=e.get(gt),a=e.get(Il),l=e.get(a4),d=e.get(we),c=e.get(Pe),h=t.getModel(),g=t.getPosition(),f=qb.is(n)?n:new qb(h,g),p=new vl(t,5),b=EO(this._getLocationModel(d,f.model,f.position,p.token),p.token).then(_=>wr(this,void 0,void 0,function*(){var v;if(!_||p.token.isCancellationRequested)return;Ii(_.ariaMessage);let y;if(_.referenceAt(h.uri,g)){const C=this._getAlternativeCommand(t);!Xr._activeAlternativeCommands.has(C)&&Xr._allSymbolNavigationCommands.has(C)&&(y=Xr._allSymbolNavigationCommands.get(C))}const w=_.references.length;if(w===0){if(!this.configuration.muteMessage){const C=h.getWordAtPosition(g);(v=zs.get(t))===null||v===void 0||v.showMessage(this._getNoResultFoundMessage(C),g)}}else if(w===1&&y)Xr._activeAlternativeCommands.add(this.desc.id),c.invokeFunction(C=>y.runEditorCommand(C,t,n,i).finally(()=>{Xr._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,_,i)}),_=>{s.error(_)}).finally(()=>{p.dispose()});return a.showWhile(b,250),b}_onResult(e,t,n,i,s){return wr(this,void 0,void 0,function*(){const r=this._getGoToPreference(n);if(!(n instanceof Iu)&&(this.configuration.openInPeek||r==="peek"&&i.references.length>1))this._openInPeek(n,i,s);else{const a=i.firstReference(),l=i.references.length>1&&r==="gotoAndPeek",d=yield this._openReference(n,e,a,this.configuration.openToSide,!l);l&&d?this._openInPeek(d,i,s):i.dispose(),r==="goto"&&t.put(a)}})}_openReference(e,t,n,i,s){return wr(this,void 0,void 0,function*(){let r;if(KDe(n)&&(r=n.targetSelectionRange),r||(r=n.range),!r)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:L.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(a){if(s){const l=a.getModel(),d=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&d.clear()},350)}return a}})}_openInPeek(e,t,n){const i=Nu.get(e);i&&e.hasModel()?i.toggleWidget(n??e.getSelection(),Fn(s=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};u(Xr,"SymbolNavigationAction");let wa=Xr;wa._allSymbolNavigationCommands=new Map;wa._activeAlternativeCommands=new Set;const jge=class jge extends wa{_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield l4(e.definitionProvider,t,n,i),m("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("noResultWord","No definition found for '{0}'",e.word):m("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(57).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(57).multipleDefinitions}};u(jge,"DefinitionAction");let sf=jge;var Gx;Sn((Y_=(Gx=class extends sf{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Y_.id,title:{value:m("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:m({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:ne.and(M.hasDefinitionProvider,M.isInWalkThroughSnippet.toNegated()),keybinding:[{when:M.editorTextFocus,primary:70,weight:100},{when:ne.and(M.editorTextFocus,FTe),primary:2118,weight:100}],menu:[{id:A.EditorContext,group:"navigation",order:1.1},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),lt.registerCommandAlias("editor.action.goToDeclaration",Y_.id)}},u(Gx,"GoToDefinitionAction"),Gx),Y_.id="editor.action.revealDefinition",Y_));var jx;Sn((X_=(jx=class extends sf{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:X_.id,title:{value:m("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:ne.and(M.hasDefinitionProvider,M.isInWalkThroughSnippet.toNegated()),keybinding:[{when:M.editorTextFocus,primary:In(2089,70),weight:100},{when:ne.and(M.editorTextFocus,FTe),primary:In(2089,2118),weight:100}]}),lt.registerCommandAlias("editor.action.openDeclarationToTheSide",X_.id)}},u(jx,"OpenDefinitionToSideAction"),jx),X_.id="editor.action.revealDefinitionAside",X_));var Kx;Sn((Z_=(Kx=class extends sf{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Z_.id,title:{value:m("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:ne.and(M.hasDefinitionProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:A.EditorContextPeek,group:"peek",order:2}}),lt.registerCommandAlias("editor.action.previewDeclaration",Z_.id)}},u(Kx,"PeekDefinitionAction"),Kx),Z_.id="editor.action.peekDefinition",Z_));const Kge=class Kge extends wa{_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield lEe(e.declarationProvider,t,n,i),m("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(57).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(57).multipleDeclarations}};u(Kge,"DeclarationAction");let jN=Kge;var $x;Sn((tk=($x=class extends jN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:tk.id,title:{value:m("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:m({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:ne.and(M.hasDeclarationProvider,M.isInWalkThroughSnippet.toNegated()),menu:[{id:A.EditorContext,group:"navigation",order:1.3},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}},u($x,"GoToDeclarationAction"),$x),tk.id="editor.action.revealDeclaration",tk));var qx;Sn((qx=class extends jN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:m("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:ne.and(M.hasDeclarationProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:3}})}},u(qx,"PeekDeclarationAction"),qx));const $ge=class $ge extends wa{_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield cEe(e.typeDefinitionProvider,t,n,i),m("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):m("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(57).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(57).multipleTypeDefinitions}};u($ge,"TypeDefinitionAction");let KN=$ge;var Yx;Sn((nk=(Yx=class extends KN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:nk.ID,title:{value:m("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:m({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:ne.and(M.hasTypeDefinitionProvider,M.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.editorTextFocus,primary:0,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.4},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},u(Yx,"GoToTypeDefinitionAction"),Yx),nk.ID="editor.action.goToTypeDefinition",nk));var Xx;Sn((ik=(Xx=class extends KN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:ik.ID,title:{value:m("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:ne.and(M.hasTypeDefinitionProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:4}})}},u(Xx,"PeekTypeDefinitionAction"),Xx),ik.ID="editor.action.peekTypeDefinition",ik));const qge=class qge extends wa{_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield dEe(e.implementationProvider,t,n,i),m("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?m("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):m("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(57).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(57).multipleImplementations}};u(qge,"ImplementationAction");let $N=qge;var Zx;Sn((sk=(Zx=class extends $N{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:sk.ID,title:{value:m("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:m({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:ne.and(M.hasImplementationProvider,M.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.editorTextFocus,primary:2118,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.45},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},u(Zx,"GoToImplementationAction"),Zx),sk.ID="editor.action.goToImplementation",sk));var Jx;Sn((ok=(Jx=class extends $N{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:ok.ID,title:{value:m("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:ne.and(M.hasImplementationProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.editorTextFocus,primary:3142,weight:100},menu:{id:A.EditorContextPeek,group:"peek",order:5}})}},u(Jx,"PeekImplementationAction"),Jx),ok.ID="editor.action.peekImplementation",ok));const Yge=class Yge extends wa{_getNoResultFoundMessage(e){return e?m("references.no","No references found for '{0}'",e.word):m("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(57).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(57).multipleReferences}};u(Yge,"ReferencesAction");let qN=Yge;var Qx;Sn((Qx=class extends qN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:m("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:m({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:ne.and(M.hasReferenceProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.editorTextFocus,primary:1094,weight:100},menu:[{id:A.EditorContext,group:"navigation",order:1.45},{id:A.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield d4(e.referenceProvider,t,n,!0,i),m("ref.title","References"))})}},u(Qx,"GoToReferencesAction"),Qx));var eT;Sn((eT=class extends qN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:m("references.action.label","Peek References"),original:"Peek References"},precondition:ne.and(M.hasReferenceProvider,Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated()),menu:{id:A.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(yield d4(e.referenceProvider,t,n,!1,i),m("ref.title","References"))})}},u(eT,"PeekReferencesAction"),eT));const Xge=class Xge extends wa{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",title:{value:m("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:ne.and(Es.notInPeekEditor,M.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,i){return wr(this,void 0,void 0,function*(){return new Xo(this._references,m("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&m("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(57).multipleReferences}_getAlternativeCommand(){return""}};u(Xge,"GenericGoToLocationAction");let jj=Xge;lt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ae},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(o,e,t,n,i,s,r)=>wr(void 0,void 0,void 0,function*(){Lt(Ae.isUri(e)),Lt(W.isIPosition(t)),Lt(Array.isArray(n)),Lt(typeof i>"u"||typeof i=="string"),Lt(typeof r>"u"||typeof r=="boolean");const a=o.get(gt),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(yl(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(d=>{const c=new class extends jj{_getNoResultFoundMessage(h){return s||super._getNoResultFoundMessage(h)}}({muteMessage:!s,openInPeek:!!r,openToSide:!1},n,i);d.get(Pe).invokeFunction(c.run.bind(c),l)})})});lt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ae},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(o,e,t,n,i)=>wr(void 0,void 0,void 0,function*(){o.get(un).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});lt.registerCommand({id:"editor.action.findReferences",handler:(o,e,t)=>{Lt(Ae.isUri(e)),Lt(W.isIPosition(t));const n=o.get(we),i=o.get(gt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(s=>{if(!yl(s)||!s.hasModel())return;const r=Nu.get(s);if(!r)return;const a=Fn(d=>d4(n.referenceProvider,s.getModel(),W.lift(t),!1,d).then(c=>new Xo(c,m("ref.title","References")))),l=new L(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});lt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var f7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},GH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},hCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Sv,tT;let of=Sv=(tT=class{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new ie,this.toUnhookForKeyboard=new ie,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new $b(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{Be(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Sv.ID)}startFindDefinitionFromCursor(e){return hCe(this,void 0,void 0,function*(){yield this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;return hCe(this,void 0,void 0,function*(){this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return;this.currentWordAtPosition=n;const i=new rLe(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Fn(a=>this.findDefinition(e,a));let s;try{s=yield this.previousPromise}catch(a){Be(a);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const r=s[0].originSelectionRange?L.lift(s[0].originSelectionRange):new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);if(s.length>1){let a=r;for(const{originSelectionRange:l}of s)l&&(a=L.plusRange(a,l));this.addDecoration(a,new zn().appendText(m("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:d}}=l,{startLineNumber:c}=a.range;if(c<1||c>d.getLineCount()){l.dispose();return}const h=this.getPreviewValue(d,c,a),g=this.languageService.guessLanguageIdByFilepathOrFirstLine(d.uri);this.addDecoration(r,h?new zn().appendCodeblock(g||"",h):void 0),l.dispose()})}})}getPreviewValue(e,t,n){let i=n.range;return i.endLineNumber-i.startLineNumber>=Sv.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+Sv.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<i;s++){const r=e.getLineFirstNonWhitespaceColumn(s);if(n===r)break}return new L(t,1,s+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((n=e.target.detail.injectedText)===null||n===void 0?void 0:n.options)instanceof Vg)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?l4(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(86)&&!this.isInPeekEditor(n);return new sf({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(n)})}isInPeekEditor(e){const t=e.get(Re);return Es.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},u(tT,"GotoDefinitionAtPositionEditorContribution"),tT);of.ID="editor.contrib.gotodefinitionatposition";of.MAX_SOURCE_PREVIEW_LINES=8;of=Sv=f7e([GH(1,Ds),GH(2,Kt),GH(3,we)],of);ft(of.ID,of,2);const rk=re,Zge=class Zge extends G{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new Cu(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};u(Zge,"HoverWidget");let YN=Zge;const SF=class SF extends G{static render(e,t,n){return new SF(e,t,n)}constructor(e,t,n){super(),this.actionContainer=Q(e,rk("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Q(this.actionContainer,rk("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Q(this.action,rk(`span.icon.${t.iconClass}`));const i=Q(this.action,rk("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(q(this.actionContainer,pe.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register(q(this.actionContainer,pe.KEY_DOWN,s=>{const r=new Mt(s);(r.equals(3)||r.equals(10))&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}};u(SF,"HoverAction");let Kj=SF;function p7e(o,e){return o&&e?m("acessibleViewHint","Inspect this in the accessible view with {0}.",e):o?m("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}u(p7e,"getHoverAccessibleViewHint");var m7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},b7e=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(d){s({value:d,done:a})},r)}},nT;let _7e=(nT=class{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}},u(nT,"HoverResult"),nT);const Jge=class Jge extends G{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new V),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Et(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new Et(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new Et(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(59).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=iAe(e=>this._computer.computeAsync(e)),m7e(this,void 0,void 0,function*(){var e,t,n,i;try{try{for(var s=!0,r=b7e(this._asyncIterable),a;a=yield r.next(),e=a.done,!e;s=!0){i=a.value,s=!1;const l=i;l&&(this._result.push(l),this._fireResult())}}catch(l){t={error:l}}finally{try{!s&&!e&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(l){Be(l)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new _7e(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}};u(Jge,"HoverOperation");let XN=Jge;const Qge=class Qge{constructor(e,t,n,i){this.priority=e,this.range=t,this.initialMousePosX=n,this.initialMousePosY=i,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}};u(Qge,"HoverRangeAnchor");let d0=Qge;const efe=class efe{constructor(e,t,n,i,s,r){this.priority=e,this.owner=t,this.range=n,this.initialMousePosX=i,this.initialMousePosY=s,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}};u(efe,"HoverForeignElementAnchor");let Km=efe;var iT;const Pf=new(iT=class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}},u(iT,"HoverParticipantRegistry"),iT),tfe=class tfe{constructor(){this._onDidWillResize=new V,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new V,this.onDidResize=this._onDidResize.event,this._sashListener=new ie,this._size=new _t(0,0),this._minSize=new _t(0,0),this._maxSize=new _t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new mr(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new mr(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new mr(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:FA.North}),this._southSash=new mr(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:FA.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Ce.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Ce.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Ce.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Ce.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:s,width:r}=this._maxSize;e=Math.max(n,Math.min(s,e)),t=Math.max(i,Math.min(r,t));const a=new _t(t,e);_t.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}};u(tfe,"ResizableHTMLElement");let MC=tfe;const v7e=30,y7e=24,nfe=class nfe extends G{constructor(e,t=new _t(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new MC),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=_t.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(n=>{this._resize(new _t(n.dimension.width,n.dimension.height)),n.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return!((e=this._contentPosition)===null||e===void 0)&&e.position?W.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);return!t||!n?void 0:Cn(t).top+n.top-v7e}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(!t||!n)return;const i=Cn(t),s=w_(document.body),r=i.top+n.top+n.height;return s.height-r-y7e}_findPositionPreference(e,t){var n,i;const s=Math.min((n=this._availableVerticalSpaceBelow(t))!==null&&n!==void 0?n:1/0,e),r=Math.min((i=this._availableVerticalSpaceAbove(t))!==null&&i!==void 0?i:1/0,e),a=Math.min(Math.max(r,s),e),l=Math.min(e,a);let d;return this._editor.getOption(59).above?d=l<=r?1:2:d=l<=s?2:1,d===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),d}_resize(e){this._resizableNode.layout(e.height,e.width)}};u(nfe,"ResizableContentWidget");let $j=nfe;var WJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Zk,Na;const gCe=re;var sT;let ZN=Zk=(sT=class extends G{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(au,this._editor)),this._participants=[];for(const i of Pf.getAll())this._participants.push(this._instantiationService.createInstance(i,this._editor));this._participants.sort((i,s)=>i.hoverOrdinal-s.hoverOrdinal),this._computer=new Xj(this._editor,this._participants),this._hoverOperation=this._register(new XN(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{if(!this._computer.anchor)return;const s=i.hasLoadingMessage?this._addLoadingMessage(i.value):i.value;this._withResult(new JN(this._computer.anchor,s,i.isComplete))})),this._register(Jt(this._widget.getDomNode(),"keydown",i=>{i.equals(9)&&this.hide()})),this._register(en.onDidChange(()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}get widget(){return this._widget}maybeShowAt(e){if(this._widget.isResizing)return!0;const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const s=i.suggestHoverAnchor(e);s&&t.push(s)}const n=e.target;if(n.type===6&&t.push(new d0(0,n.range,e.event.posx,e.event.posy)),n.type===7){const i=this._editor.getOption(49).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i&&t.push(new d0(0,n.range,e.event.posx,e.event.posy))}return t.length===0?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((i,s)=>s.priority-i.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,n,i){this._startShowingOrUpdateHover(new d0(0,e,void 0,void 0),t,n,i,null)}_startShowingOrUpdateHover(e,t,n,i,s){return!this._widget.position||!this._currentResult?e?(this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):!1:this._editor.getOption(59).sticky&&s&&this._widget.isMouseGettingCloser(s.event.posx,s.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,n,i,!0),!0):e?e&&this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,n,i,s){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=i,this._computer.source=n,this._computer.insistOnKeepingHoverVisible=s,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&e.messages.length===0&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}containsNode(e){return e?this._widget.getDomNode().contains(e):!1}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&e.messages.length===0)||this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:n,showAtSecondaryPosition:i,highlightRange:s}=Zk.computeHoverRanges(this._editor,e.range,t),r=new ie,a=r.add(new QN(this._keybindingService)),l=document.createDocumentFragment();let d=null;const c={fragment:l,statusBar:a,setColorPicker:g=>d=g,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:g=>this._widget.setMinimumDimensions(g),hide:()=>this.hide()};for(const g of this._participants){const f=t.filter(p=>p.owner===g);f.length>0&&r.add(g.renderHoverParts(c,f))}const h=t.some(g=>g.isBeforeContent);if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const g=this._editor.createDecorationsCollection();g.set([{range:s,options:Zk._DECORATION_OPTIONS}]),r.add(He(()=>{g.clear()}))}this._widget.showAt(l,new Yj(d,n,i,this._editor.getOption(59).above,this._computer.shouldFocus,this._computer.source,h,e.initialMousePosX,e.initialMousePosY,r))}else r.dispose()}static computeHoverRanges(e,t,n){let i=1;if(e.hasModel()){const d=e._getViewModel(),c=d.coordinatesConverter,h=c.convertModelRangeToViewRange(t),g=new W(h.startLineNumber,d.getLineMinColumn(h.startLineNumber));i=c.convertViewPositionToModelPosition(g).column}const s=t.startLineNumber;let r=t.startColumn,a=n[0].range,l=null;for(const d of n)a=L.plusRange(a,d.range),d.range.startLineNumber===s&&d.range.endLineNumber===s&&(r=Math.max(Math.min(r,d.range.startColumn),i)),d.forceShowAtRange&&(l=d.range);return{showAtPosition:l?l.getStartPosition():new W(s,t.startColumn),showAtSecondaryPosition:l?l.getStartPosition():new W(s,r),highlightRange:a}}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}},u(sT,"ContentHoverController"),sT);ZN._DECORATION_OPTIONS=Fe.register({description:"content-hover-highlight",className:"hoverHighlight"});ZN=Zk=WJ([Zh(1,Pe),Zh(2,At)],ZN);const ife=class ife{constructor(e,t,n){this.anchor=e,this.messages=t,this.isComplete=n}filter(e){const t=this.messages.filter(n=>n.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new qj(this,this.anchor,t,this.isComplete)}};u(ife,"HoverResult");let JN=ife;const sfe=class sfe extends JN{constructor(e,t,n,i){super(t,n,i),this.original=e}filter(e){return this.original.filter(e)}};u(sfe,"FilteredHoverResult");let qj=sfe;const ofe=class ofe{constructor(e,t,n,i,s,r,a,l,d,c){this.colorPicker=e,this.showAtPosition=t,this.showAtSecondaryPosition=n,this.preferAbove=i,this.stoleFocus=s,this.source=r,this.isBeforeContent=a,this.initialMousePosX=l,this.initialMousePosY=d,this.disposables=c,this.closestMouseDistance=void 0}};u(ofe,"ContentHoverVisibleData");let Yj=ofe;const fCe=30,jH=10,w7e=6;var oT;let au=Na=(oT=class extends $j{get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}get isVisibleFromKeyboard(){var e;return((e=this._visibleData)===null||e===void 0?void 0:e.source)===1}get isVisible(){var e;return(e=this._hoverVisibleKey.get())!==null&&e!==void 0?e:!1}get isFocused(){var e;return(e=this._hoverFocusedKey.get())!==null&&e!==void 0?e:!1}constructor(e,t,n,i,s){const r=e.getOption(65)+8,a=150,l=new _t(a,r);super(e,l),this._configurationService=n,this._accessibilityService=i,this._keybindingService=s,this._hover=this._register(new YN),this._minimumSize=l,this._hoverVisibleKey=M.hoverVisible.bindTo(t),this._hoverFocusedKey=M.hoverFocused.bindTo(t),Q(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(c=>{c.hasChanged(49)&&this._updateFont()}));const d=this._register(ul(this._resizableNode.domNode));this._register(d.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(d.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setHoverData(void 0),this._layout(),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._visibleData)===null||e===void 0||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return Na.ID}static _applyDimensions(e,t,n){const i=typeof t=="number"?`${t}px`:t,s=typeof n=="number"?`${n}px`:n;e.style.width=i,e.style.height=s}_setContentsDomNodeDimensions(e,t){const n=this._hover.contentsDomNode;return Na._applyDimensions(n,e,t)}_setContainerDomNodeDimensions(e,t){const n=this._hover.containerDomNode;return Na._applyDimensions(n,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,n){const i=typeof t=="number"?`${t}px`:t,s=typeof n=="number"?`${n}px`:n;e.style.maxWidth=i,e.style.maxHeight=s}_setHoverWidgetMaxDimensions(e,t){Na._applyMaxDimensions(this._hover.contentsDomNode,e,t),Na._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_hasHorizontalScrollbar(){const e=this._hover.scrollbar.getScrollDimensions();return e.scrollWidth>e.width}_adjustContentsBottomPadding(){const e=this._hover.contentsDomNode,t=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;e.style.paddingBottom!==t&&(e.style.paddingBottom=t)}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,n=e.height;this._setHoverWidgetDimensions(t,n),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(t,n-jH))}_updateResizableNodeMaxDimensions(){var e,t;const n=(e=this._findMaximumRenderingWidth())!==null&&e!==void 0?e:1/0,i=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._resizableNode.maxSize=new _t(n,i),this._setHoverWidgetMaxDimensions(n,i)}_resize(e){var t,n;Na._lastDimensions=new _t(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(n=(t=this._visibleData)===null||t===void 0?void 0:t.colorPicker)===null||n===void 0||n.layout()}_findAvailableSpaceVertically(){var e;const t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition;if(t)return this._positionPreference===1?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=w7e;return Array.from(this._hover.contentsDomNode.children).forEach(n=>{t+=n.clientHeight}),this._hasHorizontalScrollbar()&&(t+=jH),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?w_(document.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(typeof this._visibleData.initialMousePosX>"u"||typeof this._visibleData.initialMousePosY>"u")return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const n=Cn(this.getDomNode());typeof this._visibleData.closestMouseDistance>"u"&&(this._visibleData.closestMouseDistance=pCe(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,n.left,n.top,n.width,n.height));const i=pCe(e,t,n.left,n.top,n.width,n.height);return i>this._visibleData.closestMouseDistance+4?!1:(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,i),!0)}_setHoverData(e){var t;(t=this._visibleData)===null||t===void 0||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_layout(){const{fontSize:e,lineHeight:t}=this._editor.getOption(49),n=this._hover.contentsDomNode;n.style.fontSize=`${e}px`,n.style.lineHeight=`${t/e}`,this._updateMaxDimensions()}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,Na._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,Na._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(e=this._positionPreference)!==null&&e!==void 0?e:1]}:null}showAt(e,t){var n,i,s,r;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);const a=zh(this._hover.containerDomNode),l=t.showAtPosition;this._positionPreference=(n=this._findPositionPreference(a,l))!==null&&n!==void 0?n:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),(i=t.colorPicker)===null||i===void 0||i.layout();const d=p7e(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(r=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||s===void 0?void 0:s.getAriaLabel())!==null&&r!==void 0?r:"");d&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+d)}hide(){if(!this._visibleData)return;const e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new _t(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}_adjustHoverHeightForScrollbar(e){var t;const n=this._hover.containerDomNode,i=this._hover.contentsDomNode,s=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._setContainerDomNodeDimensions(bs(n),Math.min(s,e)),this._setContentsDomNodeDimensions(bs(i),Math.min(s,e-jH))}setMinimumDimensions(e){this._minimumSize=new _t(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new _t(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();const t=this._hover.containerDomNode;let n=zh(t),i=bs(t);if(this._resizableNode.layout(n,i),this._setHoverWidgetDimensions(i,n),n=zh(t),i=bs(t),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(n,i),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(n)),!((e=this._visibleData)===null||e===void 0)&&e.showAtPosition){const s=zh(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(s,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(49);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(49);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-fCe})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+fCe})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},u(oT,"ContentHoverWidget"),oT);au.ID="editor.contrib.resizableContentHoverWidget";au._lastDimensions=new _t(0,0);au=Na=WJ([Zh(1,Re),Zh(2,at),Zh(3,El),Zh(4,At)],au);var rT;let QN=(rT=class extends G{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=gCe("div.hover-row.status-bar"),this.actionsElement=Q(this.hoverElement,gCe("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(Kj.render(this.actionsElement,e,n))}append(e){const t=Q(this.actionsElement,e);return this._hasContent=!0,t}},u(rT,"EditorHoverStatusBar"),rT);QN=WJ([Zh(0,At)],QN);const Cy=class Cy{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const s=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===i?r.range.startColumn:1,l=r.range.endLineNumber===i?r.range.endColumn:s;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Ss.EMPTY;const n=Cy._getLineDecorations(this._editor,t);return Ss.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):Ss.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Cy._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return ol(t)}};u(Cy,"ContentHoverComputer");let Xj=Cy;function pCe(o,e,t,n,i,s){const r=t+i/2,a=n+s/2,l=Math.max(Math.abs(o-r)-i/2,0),d=Math.max(Math.abs(e-a)-s/2,0);return Math.sqrt(l*l+d*d)}u(pCe,"computeDistanceFromPointToRectangle");const mCe=re,xF=class xF extends G{constructor(e,t,n){super(),this._renderDisposeables=this._register(new ie),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new YN),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new zd({editor:this._editor},t,n)),this._computer=new Zj(this._editor),this._hoverOperation=this._register(new XN(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(49)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return xF.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const s=mCe("div.hover-row.markdown-hover"),r=Q(s,mCe("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));r.appendChild(a.element),n.appendChild(s)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),s=this._editor.getOption(65),r=this._hover.containerDomNode.clientHeight,a=n-i-(r-s)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}};u(xF,"MarginHoverWidget");let $m=xF;$m.ID="editor.contrib.modesGlyphHoverWidget";const rfe=class rfe{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}constructor(e){this._editor=e,this._lineNumber=-1}computeSync(){const e=u(i=>({value:i}),"toHoverMessage"),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const s=i.options.glyphMarginHoverMessage;!s||Db(s)||n.push(...dZ(s).map(e))}return n}};u(rfe,"MarginHoverComputer");let Zj=rfe;var C7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const afe=class afe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}};u(afe,"HoverProviderResult");let Jj=afe;function S7e(o,e,t,n,i){return C7e(this,void 0,void 0,function*(){try{const s=yield Promise.resolve(o.provideHover(t,n,i));if(s&&T7e(s))return new Jj(o,s,e)}catch(s){Ln(s)}})}u(S7e,"executeProvider");function BJ(o,e,t,n){const s=o.ordered(e).map((r,a)=>S7e(r,a,e,t,n));return Ss.fromPromises(s).coalesce()}u(BJ,"getHover");function x7e(o,e,t,n){return BJ(o,e,t,n).map(i=>i.hover).toPromise()}u(x7e,"getHoverPromise");Al("_executeHoverProvider",(o,e,t)=>{const n=o.get(we);return x7e(n.hoverProvider,e,t,Ze.None)});function T7e(o){const e=typeof o.range<"u",t=typeof o.contents<"u"&&o.contents&&o.contents.length>0;return e&&t}u(T7e,"isValid");var L7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ak=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const bCe=re,lfe=class lfe{constructor(e,t,n,i,s){this.owner=e,this.range=t,this.contents=n,this.isBeforeContent=i,this.ordinal=s}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};u(lfe,"MarkdownHover");let Fo=lfe;var aT;let eR=(aT=class{constructor(e,t,n,i,s){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=s,this.hoverOrdinal=3}createLoadingMessage(e){return new Fo(this,e.range,[new zn().appendText(m("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];let a=1e3;const l=n.getLineLength(i),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._editor.getOption(115),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});let g=!1;c>=0&&l>c&&e.range.startColumn>=c&&(g=!0,r.push(new Fo(this,e.range,[{value:m("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!g&&typeof h=="number"&&l>=h&&r.push(new Fo(this,e.range,[{value:m("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const p of t){const b=p.range.startLineNumber===i?p.range.startColumn:1,_=p.range.endLineNumber===i?p.range.endColumn:s,v=p.options.hoverMessage;if(!v||Db(v))continue;p.options.beforeContentClassName&&(f=!0);const y=new L(e.range.startLineNumber,b,e.range.startLineNumber,_);r.push(new Fo(this,y,dZ(v),f,a++))}return r}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Ss.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return Ss.EMPTY;const s=new W(e.range.startLineNumber,e.range.startColumn);return BJ(this._languageFeaturesService.hoverProvider,i,s,n).filter(r=>!Db(r.hover.contents)).map(r=>{const a=r.hover.range?L.lift(r.hover.range):e.range;return new Fo(this,a,r.hover.contents,!1,r.ordinal)})}renderHoverParts(e,t){return uEe(e,t,this._editor,this._languageService,this._openerService)}},u(aT,"MarkdownHoverParticipant"),aT);eR=L7e([ak(1,Kt),ak(2,Ks),ak(3,at),ak(4,we)],eR);function uEe(o,e,t,n,i){e.sort((r,a)=>r.ordinal-a.ordinal);const s=new ie;for(const r of e)for(const a of r.contents){if(Db(a))continue;const l=bCe("div.hover-row.markdown-hover"),d=Q(l,bCe("div.hover-contents")),c=s.add(new zd({editor:t},n,i));s.add(c.onDidRenderAsync(()=>{d.className="hover-contents code-hover-contents",o.onContentsChanged()}));const h=s.add(c.render(a));d.appendChild(h.element),o.fragment.appendChild(l)}return s}u(uEe,"renderMarkdownHovers");var hEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const dfe=class dfe{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}};u(dfe,"MarkerCoordinate");let nR=dfe;var lT;let Qj=(lT=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new V,this.onDidChange=this._onDidChange.event,this._dispoables=new ie,this._markers=[],this._nextIdx=-1,Ae.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),s=u((a,l)=>{let d=jy(a.resource.toString(),l.resource.toString());return d===0&&(i==="position"?d=L.compareRangesUsingStarts(a,l)||sn.compare(a.severity,l.severity):d=sn.compare(a.severity,l.severity)||L.compareRangesUsingStarts(a,l)),d},"compareMarker"),r=u(()=>{this._markers=this._markerService.read({resource:Ae.isUri(e)?e:void 0,severities:sn.Error|sn.Warning|sn.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)},"updateMarker");r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new nR(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,s=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());s<0&&(s=Iy(this._markers,{resource:e.uri},(r,a)=>jy(r.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let r=s;r<this._markers.length;r++){let a=L.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new L(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,i=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(L.containsPosition(this._markers[n],t))return new nR(this._markers[n],n+1,this._markers.length)}}},u(lT,"MarkerList"),lT);Qj=hEe([tR(1,Nl),tR(2,at)],Qj);const gEe=nt("IMarkerNavigationService");var dT;let eK=(dT=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Ai}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new Qj(e,this._markerService,this._configService)}},u(dT,"MarkerNavigationService"),dT);eK=hEe([tR(0,Nl),tR(1,at)],eK);ct(gEe,eK,1);var tK;(function(o){function e(t){switch(t){case mn.Ignore:return"severity-ignore "+Te.asClassName(ue.info);case mn.Info:return Te.asClassName(ue.info);case mn.Warning:return Te.asClassName(ue.warning);case mn.Error:return Te.asClassName(ue.error);default:return""}}u(e,"className"),o.className=e})(tK||(tK={}));var E7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},nK;const cfe=class cfe{constructor(e,t,n,i,s){this._openerService=i,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ie,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Jt(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new IM(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){wt(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:s}=e;let r=(t?.length||0)+2;s&&(typeof s=="string"?r+=s.length:r+=s.value.length);const a=cl(n);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);$n(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),g.appendChild(f)}if(s)if(typeof s=="string"){const f=document.createElement("span");f.innerText=`(${s})`,f.classList.add("code"),g.appendChild(f)}else{this._codeLink=re("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=p=>{this._openerService.open(s.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()};const f=Q(this._codeLink,re("span"));f.innerText=s.value,g.appendChild(this._codeLink)}}if($n(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Ri(i)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(65)*.66)}px`,this._lines+=1;for(const f of i){const p=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,b.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(b,f);const _=document.createElement("span");_.innerText=f.message,p.appendChild(b),p.appendChild(_),this._lines+=1,g.appendChild(p)}}const d=this._editor.getOption(49),c=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case sn.Error:t=m("Error","Error");break;case sn.Warning:t=m("Warning","Warning");break;case sn.Info:t=m("Info","Info");break;case sn.Hint:t=m("Hint","Hint");break}let n=m("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}};u(cfe,"MessageWidget");let iK=cfe;var cT;let Yb=nK=(cT=class extends zN{constructor(e,t,n,i,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new ie,this._onDidSelectRelatedInformation=new V,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=sn.Warning,this._backgroundColor=K.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(A7e);let t=sK,n=k7e;this._severity===sn.Warning?(t=Jk,n=D7e):this._severity===sn.Info&&(t=oK,n=M7e);const i=e.getColor(t),s=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:s,primaryHeadingColor:e.getColor(oEe),secondaryHeadingColor:e.getColor(rEe)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(nK.TitleMenu,this._contextKeyService);ITe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=Q(e,re(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new iK(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const i=L.lift(e),s=this.editor.getPosition(),r=s&&i.containsPosition(s)?s:i.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?m("problems","{0} of {1} problems",t,n):m("change","{0} of {1} problem",t,n);this.setTitle(qo(a.uri),l)}this._icon.className=`codicon ${tK.className(sn.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},u(cT,"MarkerNavigationWidget"),cT);Yb.TitleMenu=new A("gotoErrorTitleMenu");Yb=nK=E7e([jf(1,On),jf(2,Ks),jf(3,Ml),jf(4,Pe),jf(5,Re),jf(6,Ib)],Yb);const _Ce=bw(Ya,VNe),vCe=bw(ao,mw),yCe=bw(lo,z9),sK=I("editorMarkerNavigationError.background",{dark:_Ce,light:_Ce,hcDark:st,hcLight:st},m("editorMarkerNavigationError","Editor marker navigation widget error color.")),k7e=I("editorMarkerNavigationError.headerBackground",{dark:ke(sK,.1),light:ke(sK,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Jk=I("editorMarkerNavigationWarning.background",{dark:vCe,light:vCe,hcDark:st,hcLight:st},m("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),D7e=I("editorMarkerNavigationWarning.headerBackground",{dark:ke(Jk,.1),light:ke(Jk,.1),hcDark:"#0C141F",hcLight:ke(Jk,.2)},m("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),oK=I("editorMarkerNavigationInfo.background",{dark:yCe,light:yCe,hcDark:st,hcLight:st},m("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),M7e=I("editorMarkerNavigationInfo.headerBackground",{dark:ke(oK,.1),light:ke(oK,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),A7e=I("editorMarkerNavigation.background",{dark:Gn,light:Gn,hcDark:Gn,hcLight:Gn},m("editorMarkerNavigationBackground","Editor marker navigation widget background."));var I7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lk=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},fEe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},xv,uT;let Ru=xv=(uT=class{static get(e){return e.getContribution(xv.ID)}constructor(e,t,n,i,s){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=s,this._sessionDispoables=new ie,this._editor=e,this._widgetVisible=pEe.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Yb,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,s,r;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!L.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,n.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:L.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new W(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,i;return fEe(this,void 0,void 0,function*(){if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);r&&((n=xv.get(r))===null||n===void 0||n.close(),(i=xv.get(r))===null||i===void 0||i.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}})}},u(uT,"MarkerController"),uT);Ru.ID="editor.contrib.markerController";Ru=xv=I7e([lk(1,gEe),lk(2,Re),lk(3,gt),lk(4,Pe)],Ru);const ufe=class ufe extends ye{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){var n;return fEe(this,void 0,void 0,function*(){t.hasModel()&&((n=Ru.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}};u(ufe,"MarkerNavigationAction");let Xb=ufe;const gm=class gm extends Xb{constructor(){super(!0,!1,{id:gm.ID,label:gm.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:578,weight:100},menuOpts:{menuId:Yb.TitleMenu,title:gm.LABEL,icon:Yt("marker-navigation-next",ue.arrowDown,m("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};u(gm,"NextMarkerAction");let Zb=gm;Zb.ID="editor.action.marker.next";Zb.LABEL=m("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");const fm=class fm extends Xb{constructor(){super(!1,!1,{id:fm.ID,label:fm.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:1602,weight:100},menuOpts:{menuId:Yb.TitleMenu,title:fm.LABEL,icon:Yt("marker-navigation-previous",ue.arrowUp,m("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};u(fm,"PrevMarkerAction");let AC=fm;AC.ID="editor.action.marker.prev";AC.LABEL=m("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");const hfe=class hfe extends Xb{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:m("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:66,weight:100},menuOpts:{menuId:A.MenubarGoMenu,title:m({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}};u(hfe,"NextMarkerInFilesAction");let rK=hfe;const gfe=class gfe extends Xb{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:m("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:1090,weight:100},menuOpts:{menuId:A.MenubarGoMenu,title:m({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}};u(gfe,"PrevMarkerInFilesAction");let aK=gfe;ft(Ru.ID,Ru,4);ae(Zb);ae(AC);ae(rK);ae(aK);const pEe=new _e("markersNavigationVisible",!1),N7e=hi.bindToContribution(Ru.get);he(new N7e({id:"closeMarkersNavigation",precondition:pEe,handler:o=>o.close(),kbOpts:{weight:100+50,kbExpr:M.focus,primary:9,secondary:[1033]}}));var R7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},KH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const sr=re,ffe=class ffe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};u(ffe,"MarkerHover");let lK=ffe;const wCe={type:1,filter:{include:We.QuickFix},triggerAction:yo.QuickFixHover};var hT;let dK=(hT=class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),r=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,d=a.range.endLineNumber===i?a.range.endColumn:s,c=this._markerDecorationsService.getMarker(n.uri,a);if(!c)continue;const h=new L(e.range.startLineNumber,l,e.range.startLineNumber,d);r.push(new lK(this,h,c))}return r}renderHoverParts(e,t){if(!t.length)return G.None;const n=new ie;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,n)));const i=t.length===1?t[0]:t.sort((s,r)=>sn.compare(s.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=sr("div.hover-row"),i=Q(n,sr("div.marker.hover-contents")),{source:s,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const d=Q(i,sr("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=r,s||a)if(a&&typeof a!="string"){const c=sr("span");if(s){const p=Q(c,sr("span"));p.innerText=s}const h=Q(c,sr("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(q(h,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));const g=Q(h,sr("span"));g.innerText=a.value;const f=Q(i,c);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const c=Q(i,sr("span"));c.style.opacity="0.6",c.style.paddingLeft="6px",c.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(Ri(l))for(const{message:c,resource:h,startLineNumber:g,startColumn:f}of l){const p=Q(i,sr("div"));p.style.marginTop="8px";const b=Q(p,sr("a"));b.innerText=`${qo(h)}(${g}, ${f}): `,b.style.cursor="pointer",t.add(q(b,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:g,startColumn:f}}}).catch(Be)}));const _=Q(p,sr("span"));_.innerText=c,this._editor.applyFontInfo(_)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===sn.Error||t.marker.severity===sn.Warning||t.marker.severity===sn.Info)&&e.statusBar.addAction({label:m("view problem","View Problem"),commandId:Zb.ID,run:()=>{var i;e.hide(),(i=Ru.get(this._editor))===null||i===void 0||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(89)){const i=e.statusBar.append(sr("div"));this.recentMarkerCodeActionsInfo&&(MI.makeKey(this.recentMarkerCodeActionsInfo.marker)===MI.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=m("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?G.None:n.add(pu(()=>i.textContent=m("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);n.add(He(()=>r.cancel())),r.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=m("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(He(()=>{l||a.dispose()})),e.statusBar.addAction({label:m("quick fixes","Quick Fix..."),commandId:IJ,run:d=>{l=!0;const c=tf.get(this._editor),h=Cn(d);e.hide(),c?.showCodeActions(wCe,a,{x:h.left,y:h.top,width:h.width,height:h.height})}})},Be)}}getCodeActions(e){return Fn(t=>PJ(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),wCe,Bd.None,t))}},u(hT,"MarkerHoverParticipant"),hT);dK=R7e([KH(1,IZ),KH(2,Ks),KH(3,we)],dK);const mEe="editor.action.inlineSuggest.commit",bEe="editor.action.inlineSuggest.showPrevious",_Ee="editor.action.inlineSuggest.showNext";var P7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const pfe=class pfe extends G{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new QV),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new ie),this.options=n,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new IC(()=>{var i;return(i=this.toggleMenuActionViewItem)===null||i===void 0?void 0:i.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Ls(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,actionViewItemProvider:(i,s)=>{var r;if(i.id===IC.ID)return this.toggleMenuActionViewItem=new Rb(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Te.asClassNameArray((r=n.moreIcon)!==null&&r!==void 0?r:ue.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const a=n.actionViewItemProvider(i,s);if(a)return a}if(i instanceof vu){const a=new Rb(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry});return a.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(a),this.disposables.add(this._onDidChangeDropdownVisibility.add(a.onDidChangeVisibility)),a}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(i)})})}getKeybindingLabel(e){var t,n,i;const s=this.lookupKeybindings?(n=(t=this.options).getKeyBinding)===null||n===void 0?void 0:n.call(t,e):void 0;return(i=s?.getLabel())!==null&&i!==void 0?i:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),super.dispose()}};u(pfe,"ToolBar");let cK=pfe;const TF=class TF extends qn{constructor(e,t){t=t||m("moreActions","More Actions..."),super(TF.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}run(){return P7e(this,void 0,void 0,function*(){this.toggleDropdownMenu()})}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};u(TF,"ToggleMenuAction");let IC=TF;IC.ID="toolbar.toggle.more";var F7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},J_=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gT;let uK=(gT=class extends cK{constructor(e,t,n,i,s,r,a){super(e,s,Object.assign(Object.assign({getKeyBinding:d=>{var c;return(c=r.lookupKeybinding(d.id))!==null&&c!==void 0?c:void 0}},t),{allowContextMenu:!0,skipTelemetry:typeof t?.telemetrySource=="string"})),this._options=t,this._menuService=n,this._contextKeyService=i,this._contextMenuService=s,this._sessionDisposables=this._store.add(new ie);const l=t?.telemetrySource;l&&this._store.add(this.actionBar.onDidRun(d=>a.publicLog2("workbenchActionExecuted",{id:d.action.id,from:l})))}setActions(e,t=[],n){var i,s,r;this._sessionDisposables.clear();const a=e.slice(),l=t.slice(),d=[];let c=0;const h=[];let g=!1;if(((i=this._options)===null||i===void 0?void 0:i.hiddenItemStrategy)!==-1)for(let f=0;f<a.length;f++){const p=a[f];!(p instanceof Er)&&!(p instanceof Pg)||p.hideActions&&(d.push(p.hideActions.toggle),p.hideActions.toggle.checked&&c++,p.hideActions.isHidden&&(g=!0,a[f]=void 0,((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==0&&(h[f]=p)))}if(((r=this._options)===null||r===void 0?void 0:r.maxNumberOfItems)!==void 0){let f=0;for(let p=0;p<a.length;p++){const b=a[p];b&&++f>=this._options.maxNumberOfItems&&(a[p]=void 0,h[p]=b)}}Lve(a),Lve(h),super.setActions(a,ui.join(h,l)),d.length>0&&this._sessionDisposables.add(q(this.getElement(),"contextmenu",f=>{var p,b,_,v,y;const w=new Bs(f),C=this.getItemAction(w.target);if(!C)return;w.preventDefault(),w.stopPropagation();let S=!1;if(c===1&&((p=this._options)===null||p===void 0?void 0:p.hiddenItemStrategy)===0){S=!0;for(let E=0;E<d.length;E++)if(d[E].checked){d[E]=Am({id:C.id,label:C.label,checked:!0,enabled:!1,run(){}});break}}let k;if(!S&&(C instanceof Er||C instanceof Pg)){if(!C.hideActions)return;k=C.hideActions.hide}else k=Am({id:"label",label:m("hide","Hide"),enabled:!1,run(){}});const T=ui.join([k],d);!((b=this._options)===null||b===void 0)&&b.resetMenu&&!n&&(n=[this._options.resetMenu]),g&&n&&(T.push(new ui),T.push(Am({id:"resetThisMenu",label:m("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),this._contextMenuService.showContextMenu({getAnchor:()=>w,getActions:()=>T,menuId:(_=this._options)===null||_===void 0?void 0:_.contextMenu,menuActionOptions:Object.assign({renderShortTitle:!0},(v=this._options)===null||v===void 0?void 0:v.menuOptions),skipTelemetry:typeof((y=this._options)===null||y===void 0?void 0:y.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}},u(gT,"WorkbenchToolBar"),gT);uK=F7e([J_(2,Ml),J_(3,Re),J_(4,To),J_(5,At),J_(6,xo)],uK);var UJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},aa=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Qk,fT;let hK=(fT=class extends G{constructor(e,t,n){super(),this.editor=e,this.model=t,this.instantiationService=n,this.alwaysShowToolbar=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(61).showToolbar==="always"),this.sessionPosition=void 0,this.position=dt(i=>{var s,r,a;const l=(s=this.model.read(i))===null||s===void 0?void 0:s.ghostText.read(i);if(!this.alwaysShowToolbar.read(i)||!l||l.parts.length===0)return this.sessionPosition=void 0,null;const d=l.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==l.lineNumber&&(this.sessionPosition=void 0);const c=new W(l.lineNumber,Math.min(d,(a=(r=this.sessionPosition)===null||r===void 0?void 0:r.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=c,c}),this._register(Fs((i,s)=>{const r=this.model.read(i);if(!r||!this.alwaysShowToolbar.read(i))return;const a=s.add(this.instantiationService.createInstance(Pu,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.selectedInlineCompletion.map(l=>{var d;return(d=l?.inlineCompletion.source.inlineCompletions.commands)!==null&&d!==void 0?d:[]})));e.addContentWidget(a),s.add(He(()=>e.removeContentWidget(a))),s.add(Rt(l=>{this.position.read(l)&&r.lastTriggerKind.read(l)!==Ld.Explicit&&r.triggerExplicitly()}))}))}},u(fT,"InlineCompletionsHintsWidget"),fT);hK=UJ([aa(2,Pe)],hK);const O7e=Yt("inline-suggestion-hints-next",ue.chevronRight,m("parameterHintsNextIcon","Icon for show next parameter hint.")),H7e=Yt("inline-suggestion-hints-previous",ue.chevronLeft,m("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var pT;let Pu=Qk=(pT=class extends G{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,n){const i=new qn(e,t,n,!0,()=>this._commandService.executeCommand(e)),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return s&&(r=m({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),i.tooltip=r,i}constructor(e,t,n,i,s,r,a,l,d,c,h){super(),this.editor=e,this.withBorder=t,this._position=n,this._currentSuggestionIdx=i,this._suggestionCount=s,this._extraCommands=r,this._commandService=a,this.keybindingService=d,this._contextKeyService=c,this._menuService=h,this.id=`InlineSuggestionHintsContentWidget${Qk.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=ai("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[ai("div@toolBar")]),this.previousAction=this.createCommandAction(bEe,m("previous","Previous"),Te.asClassName(H7e)),this.availableSuggestionCountAction=new qn("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(_Ee,m("next","Next"),Te.asClassName(O7e)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(A.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new Et(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new Et(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCommands=[],this.toolBar=this._register(l.createInstance(fK,this.nodes.toolBar,A.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:g=>g.startsWith("primary")},actionViewItemProvider:(g,f)=>{if(g instanceof Er)return l.createInstance(V7e,g,void 0);if(g===this.availableSuggestionCountAction){const p=new gK(void 0,g,{label:!0,icon:!1});return p.setClass("availableSuggestionCount"),p}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(g=>{Qk._dropDownVisible=g})),this._register(Rt(g=>{this._position.read(g),this.editor.layoutContentWidget(this)})),this._register(Rt(g=>{const f=this._suggestionCount.read(g),p=this._currentSuggestionIdx.read(g);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${p+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Rt(g=>{const f=this._extraCommands.read(g);if(jn(this.lastCommands,f))return;this.lastCommands=f;const p=f.map(b=>({class:void 0,id:b.id,enabled:!0,tooltip:b.tooltip||"",label:b.title,run:_=>this._commandService.executeCommand(b.id)}));for(const[b,_]of this.inlineCompletionsActionsMenus.getActions())for(const v of _)v instanceof Er&&p.push(v);p.length>0&&p.unshift(new ui),this.toolBar.setAdditionalSecondaryActions(p)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},u(pT,"InlineSuggestionHintsContentWidget"),pT);Pu._dropDownVisible=!1;Pu.id=0;Pu=Qk=UJ([aa(6,un),aa(7,Pe),aa(8,At),aa(9,Re),aa(10,Ml)],Pu);const mfe=class mfe extends Eu{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}};u(mfe,"ActionViewItemWithClassName");let gK=mfe;var mT;let V7e=(mT=class extends Kg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=ai("div.keybinding").root;new fC(t,oo,Object.assign({disableTitle:!0},RHe)).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}},u(mT,"StatusBarViewItem"),mT);var bT;let fK=(bT=class extends uK{constructor(e,t,n,i,s,r,a,l){super(e,Object.assign({resetMenu:t},n),i,s,r,a,l),this.menuId=t,this.options2=n,this.menuService=i,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,n,i,s,r,a;const l=[],d=[];ITe(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:l,secondary:d},(n=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||n===void 0?void 0:n.primaryGroup,(s=(i=this.options2)===null||i===void 0?void 0:i.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(a=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),d.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,d)}setPrependedPrimaryActions(e){jn(this.prependedPrimaryActions,e,(t,n)=>t===n)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){jn(this.additionalActions,e,(t,n)=>t===n)||(this.additionalActions=e,this.updateToolbar())}},u(bT,"CustomizedMenuWorkbenchToolBar"),bT);fK=UJ([aa(3,Ml),aa(4,Re),aa(5,To),aa(6,At),aa(7,xo)],fK);var W7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dk=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},pK;const B7e=!1;var _T;let ks=pK=(_T=class{static get(e){return e.getContribution(pK.ID)}constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._keybindingService=s,this._toUnhook=new ie,this._hoverActivatedByColorDecoratorClick=!1,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(r=>{r.hasChanged(59)&&(this._unhookEvents(),this._hookEvents())})}_hookEvents(){const e=u(()=>this._hideWidgets(),"hideWidgetsEventHandler"),t=this._editor.getOption(59);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(n=>this._onEditorMouseLeave(n))),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){var t;this._isMouseDown=!0;const n=e.target;if(n.type===9&&n.detail===au.ID){this._hoverClicked=!0;return}n.type===12&&n.detail===$m.ID||(n.type!==12&&(this._hoverClicked=!1),!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing||this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t,n;const i=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing||!((n=this._contentWidget)===null||n===void 0)&&n.containsNode(i)||this._hideWidgets()}_onEditorMouseMove(e){var t,n,i,s,r,a,l,d,c,h,g;const f=e.target;if(!((t=this._contentWidget)===null||t===void 0)&&t.isFocused||!((n=this._contentWidget)===null||n===void 0)&&n.isResizing||this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&f.type===9&&f.detail===au.ID||this._isHoverSticky&&(!((i=this._contentWidget)===null||i===void 0)&&i.containsNode((s=e.event.browserEvent.view)===null||s===void 0?void 0:s.document.activeElement))&&!(!((a=(r=e.event.browserEvent.view)===null||r===void 0?void 0:r.getSelection())===null||a===void 0)&&a.isCollapsed)||!this._isHoverSticky&&f.type===9&&f.detail===au.ID&&(!((l=this._contentWidget)===null||l===void 0)&&l.isColorPickerVisible)||this._isHoverSticky&&f.type===12&&f.detail===$m.ID||this._isHoverSticky&&(!((d=this._contentWidget)===null||d===void 0)&&d.isVisibleFromKeyboard))return;const p=(c=f.element)===null||c===void 0?void 0:c.classList.contains("colorpicker-color-decoration"),b=this._editor.getOption(145);if(p&&(b==="click"&&!this._hoverActivatedByColorDecoratorClick||b==="hover"&&!this._isHoverEnabled&&!B7e||b==="clickAndHover"&&!this._isHoverEnabled&&!this._hoverActivatedByColorDecoratorClick)||!p&&!this._isHoverEnabled&&!this._hoverActivatedByColorDecoratorClick){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(h=this._glyphWidget)===null||h===void 0||h.hide();return}if(f.type===2&&f.position){(g=this._contentWidget)===null||g===void 0||g.hide(),this._glyphWidget||(this._glyphWidget=new $m(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(f.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const n=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=n.kind===1||n.kind===2&&n.commandId==="editor.action.showHover"&&((t=this._contentWidget)===null||t===void 0?void 0:t.isVisible);e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&!i&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible)||Pu.dropDownVisible||(this._hoverActivatedByColorDecoratorClick=!1,this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(ZN,this._editor)),this._contentWidget}showContentHover(e,t,n,i,s=!1){this._hoverActivatedByColorDecoratorClick=s,this._getOrCreateContentWidget().startShowingAtRange(e,t,n,i)}focus(){var e;(e=this._contentWidget)===null||e===void 0||e.focus()}scrollUp(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)===null||e===void 0||e.pageUp()}pageDown(){var e;(e=this._contentWidget)===null||e===void 0||e.pageDown()}goToTop(){var e;(e=this._contentWidget)===null||e===void 0||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)===null||e===void 0||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isVisible}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}},u(_T,"ModesHoverController"),_T);ks.ID="editor.contrib.hover";ks=pK=W7e([dk(1,Pe),dk(2,Ks),dk(3,Kt),dk(4,At)],ks);const bfe=class bfe extends ye{constructor(){super({id:"editor.action.showHover",label:m({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse.","If the hover is already visible, it will take focus."]},"Show or Focus Hover"),description:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if when triggered with the keyboard, the hover should take focus immediately.",type:"boolean",default:!1}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2087),weight:100}})}run(e,t,n){if(!t.hasModel())return;const i=ks.get(t);if(!i)return;const s=t.getPosition(),r=new L(s.lineNumber,s.column,s.lineNumber,s.column),a=t.getOption(2)===2||!!n?.focus;i.isHoverVisible?i.focus():i.showContentHover(r,1,1,a)}};u(bfe,"ShowOrFocusHoverAction");let mK=bfe;const _fe=class _fe extends ye{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:m({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=ks.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const s=new L(i.lineNumber,i.column,i.lineNumber,i.column),r=of.get(t);if(!r)return;r.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(s,1,1,!0)})}};u(_fe,"ShowDefinitionPreviewHoverAction");let bK=_fe;const vfe=class vfe extends ye{constructor(){super({id:"editor.action.scrollUpHover",label:m({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:16,weight:100}})}run(e,t){const n=ks.get(t);n&&n.scrollUp()}};u(vfe,"ScrollUpHoverAction");let _K=vfe;const yfe=class yfe extends ye{constructor(){super({id:"editor.action.scrollDownHover",label:m({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:18,weight:100}})}run(e,t){const n=ks.get(t);n&&n.scrollDown()}};u(yfe,"ScrollDownHoverAction");let vK=yfe;const wfe=class wfe extends ye{constructor(){super({id:"editor.action.scrollLeftHover",label:m({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:15,weight:100}})}run(e,t){const n=ks.get(t);n&&n.scrollLeft()}};u(wfe,"ScrollLeftHoverAction");let yK=wfe;const Cfe=class Cfe extends ye{constructor(){super({id:"editor.action.scrollRightHover",label:m({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:17,weight:100}})}run(e,t){const n=ks.get(t);n&&n.scrollRight()}};u(Cfe,"ScrollRightHoverAction");let wK=Cfe;const Sfe=class Sfe extends ye{constructor(){super({id:"editor.action.pageUpHover",label:m({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){const n=ks.get(t);n&&n.pageUp()}};u(Sfe,"PageUpHoverAction");let CK=Sfe;const xfe=class xfe extends ye{constructor(){super({id:"editor.action.pageDownHover",label:m({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){const n=ks.get(t);n&&n.pageDown()}};u(xfe,"PageDownHoverAction");let SK=xfe;const Tfe=class Tfe extends ye{constructor(){super({id:"editor.action.goToTopHover",label:m({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){const n=ks.get(t);n&&n.goToTop()}};u(Tfe,"GoToTopHoverAction");let xK=Tfe;const Lfe=class Lfe extends ye{constructor(){super({id:"editor.action.goToBottomHover",label:m({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:M.hoverFocused,kbOpts:{kbExpr:M.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){const n=ks.get(t);n&&n.goToBottom()}};u(Lfe,"GoToBottomHoverAction");let TK=Lfe;ft(ks.ID,ks,2);ae(mK);ae(bK);ae(_K);ae(vK);ae(yK);ae(wK);ae(CK);ae(SK);ae(xK);ae(TK);Pf.register(eR);Pf.register(dK);Ir((o,e)=>{const t=o.getColor(eRe);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});const Efe=class Efe extends G{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(145);if(t!=="click"&&t!=="clickAndHover")return;const n=e.target;if(n.type!==6||!n.detail.injectedText||n.detail.injectedText.options.attachedData!==XLe||!n.range)return;const i=this._editor.getContribution(ks.ID);if(i&&!i.isColorPickerVisible){const s=new L(n.range.startLineNumber,n.range.startColumn+1,n.range.endLineNumber,n.range.endColumn+1);i.showContentHover(s,1,0,!1,!0)}}};u(Efe,"ColorContribution");let NC=Efe;NC.ID="editor.contrib.colorContribution";ft(NC.ID,NC,2);Pf.register(WN);var vEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ra=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},CCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},LK,EK,vT;let Fu=LK=(vT=class extends G{constructor(e,t,n,i,s,r,a){super(),this._editor=e,this._modelService=n,this._keybindingService=i,this._instantiationService=s,this._languageFeatureService=r,this._languageConfigurationService=a,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=M.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=M.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)===null||e===void 0||e.focus():this._standaloneColorPickerWidget=new iR(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)===null||e===void 0||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)===null||e===void 0||e.updateEditor(),this.hide()}static get(e){return e.getContribution(LK.ID)}},u(vT,"StandaloneColorPickerController"),vT);Fu.ID="editor.contrib.standaloneColorPickerController";Fu=LK=vEe([ra(1,Re),ra(2,Xt),ra(3,At),ra(4,Pe),ra(5,we),ra(6,Pt)],Fu);ft(Fu.ID,Fu,1);const SCe=8,U7e=22;var yT;let iR=EK=(yT=class extends G{constructor(e,t,n,i,s,r,a,l){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=n,this._modelService=s,this._keybindingService=r,this._languageFeaturesService=a,this._languageConfigurationService=l,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new V),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance(LC,this._editor),this._position=(d=this._editor._getViewModel())===null||d===void 0?void 0:d.getPrimaryCursorState().modelState.position;const c=this._editor.getSelection(),h=c?{startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(ul(this._body));this._register(g.onDidBlur(f=>{this.hide()})),this._register(g.onDidFocus(f=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(f=>{var p;const b=(p=f.target.element)===null||p===void 0?void 0:p.classList;b&&b.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(f=>{this._render(f.value,f.foundInEditor)})),this._start(h),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return EK.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(59).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}_start(e){return CCe(this,void 0,void 0,function*(){const t=yield this._computeAsync(e);t&&this._onResult.fire(new kK(t.result,t.foundInEditor))})}_computeAsync(e){return CCe(this,void 0,void 0,function*(){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},n=yield this._standaloneColorPickerParticipant.createColorHover(t,new TC(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return n?{result:n.colorHover,foundInEditor:n.foundInEditor}:null})}_render(e,t){const n=document.createDocumentFragment(),i=this._register(new QN(this._keybindingService));let s;const r={fragment:n,statusBar:i,setColorPicker:b=>s=b,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(r,[e])),s===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(n),s.layout();const a=s.body,l=a.saturationBox.domNode.clientWidth,d=a.domNode.clientWidth-l-U7e-SCe,c=s.body.enterButton;c?.onClicked(()=>{this.updateEditor(),this.hide()});const h=s.header,g=h.pickedColorNode;g.style.width=l+SCe+"px";const f=h.originalColorNode;f.style.width=d+"px";const p=s.header.closeButton;p?.onClicked(()=>{this.hide()}),t&&(c&&(c.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},u(yT,"StandaloneColorPickerWidget"),yT);iR.ID="editor.contrib.standaloneColorPickerWidget";iR=EK=vEe([ra(3,Pe),ra(4,Xt),ra(5,At),ra(6,we),ra(7,Pt)],iR);const kfe=class kfe{constructor(e,t){this.value=e,this.foundInEditor=t}};u(kfe,"StandaloneColorPickerResult");let kK=kfe;const Dfe=class Dfe extends Hd{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:m("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:m({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:A.CommandPalette}]})}runEditorCommand(e,t){var n;(n=Fu.get(t))===null||n===void 0||n.showOrFocus()}};u(Dfe,"ShowOrFocusStandaloneColorPicker");let DK=Dfe;const Mfe=class Mfe extends ye{constructor(){super({id:"editor.action.hideColorPicker",label:m({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:M.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var n;(n=Fu.get(t))===null||n===void 0||n.hide()}};u(Mfe,"HideStandaloneColorPicker");let MK=Mfe;const Afe=class Afe extends ye{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:m({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:M.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var n;(n=Fu.get(t))===null||n===void 0||n.insertColor()}};u(Afe,"InsertColorWithStandaloneColorPicker");let AK=Afe;ae(MK);ae(AK);Sn(DK);const Sy=class Sy{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,s=e.length;if(n+i>s)return!1;for(let r=0;r<i;r++){const a=e.charCodeAt(n+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,s,r){const a=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,c=e.endColumn,h=s.getLineContent(a),g=s.getLineContent(d);let f=h.lastIndexOf(t,l-1+t.length),p=g.indexOf(n,c-1-n.length);if(f!==-1&&p!==-1)if(a===d)h.substring(f+t.length,p).indexOf(n)>=0&&(f=-1,p=-1);else{const _=h.substring(f+t.length),v=g.substring(0,p);(_.indexOf(n)>=0||v.indexOf(n)>=0)&&(f=-1,p=-1)}let b;f!==-1&&p!==-1?(i&&f+t.length<h.length&&h.charCodeAt(f+t.length)===32&&(t=t+" "),i&&p>0&&g.charCodeAt(p-1)===32&&(n=" "+n,p-=1),b=Sy._createRemoveBlockCommentOperations(new L(a,f+t.length+1,d,p+1),t,n)):(b=Sy._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const _ of b)r.addTrackedEditOperation(_.range,_.text)}static _createRemoveBlockCommentOperations(e,t,n){const i=[];return L.isEmpty(e)?i.push(zt.delete(new L(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(zt.delete(new L(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(zt.delete(new L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){const s=[];return L.isEmpty(e)?s.push(zt.replace(new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(s.push(zt.insert(new W(e.startLineNumber,e.startColumn),t+(i?" ":""))),s.push(zt.insert(new W(e.endLineNumber,e.endColumn),(i?" ":"")+n))),s}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const s=e.getLanguageIdAtPosition(n,i),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],s=n[1];return new xe(i.range.endLineNumber,i.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const i=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new xe(i.endLineNumber,i.endColumn+s,i.endLineNumber,i.endColumn+s)}}};u(Sy,"BlockCommentCommand");let Jh=Sy;const Pa=class Pa{constructor(e,t,n,i,s,r,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(s).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let d=0,c=n-t+1;d<c;d++)l[d]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,s,r,a,l){let d=!0,c;e===0?c=!0:e===1?c=!1:c=!0;for(let h=0,g=i.length;h<g;h++){const f=i[h],p=s+h;if(p===s&&a){f.ignore=!0;continue}const b=n.getLineContent(p),_=$i(b);if(_===-1){f.ignore=r,f.commentStrOffset=b.length;continue}if(d=!1,f.ignore=!1,f.commentStrOffset=_,c&&!Jh._haystackHasNeedleAtOffset(b,f.commentStr,_)&&(e===0?c=!1:e===1||(f.ignore=!0)),c&&t){const v=_+f.commentStrLength;v<b.length&&b.charCodeAt(v)===32&&(f.commentStrLength+=1)}}if(e===0&&d){c=!1;for(let h=0,g=i.length;h<g;h++)i[h].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:i}}static _gatherPreflightData(e,t,n,i,s,r,a,l){const d=Pa._gatherPreflightCommentStrings(n,i,s,l);return d===null?{supported:!1}:Pa._analyzeLines(e,t,n,d,i,r,a,l)}_executeLineComments(e,t,n,i){let s;n.shouldRemoveComments?s=Pa._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(Pa._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),s=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const r=new W(i.positionLineNumber,i.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),L.isEmpty(s[a].range)&&L.getStartPosition(s[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let s=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(n,a-1),d=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return l!==-1&&d===-1&&(d=e.getLineContent(s).indexOf(i,l+n.length),r=s),l===-1&&d!==-1&&(l=e.getLineContent(r).lastIndexOf(n,d),s=r),t.isEmpty()&&(l===-1||d===-1)&&(l=e.getLineContent(s).indexOf(n),l!==-1&&(d=e.getLineContent(s).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+n.length)===32&&(n+=" "),d!==-1&&e.getLineContent(r).charCodeAt(d-1)===32&&(i=" "+i,d-=1),l!==-1&&d!==-1?Jh._createRemoveBlockCommentOperations(new L(s,l+n.length+1,r,d+1),n,i):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const i=e.getLanguageIdAtPosition(n.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const r=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,r,a);if(!l){if(n.isEmpty()){const d=e.getLineContent(n.startLineNumber);let c=$i(d);c===-1&&(c=d.length),l=Jh._createAddBlockCommentOperations(new L(n.startLineNumber,c+1,n.startLineNumber,d.length+1),r,a,this._insertSpace)}else l=Jh._createAddBlockCommentOperations(new L(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(const d of l)t.addEditOperation(d.range,d.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new L(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=Pa._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new xe(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];r.ignore||n.push(zt.delete(new L(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],i=this._insertSpace?" ":"";for(let s=0,r=e.length;s<r;s++){const a=e[s];a.ignore||n.push(zt.insert(new W(t+s,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let s=1073741824,r,a;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;const c=e.getLineContent(n+l);let h=0;for(let g=0,f=t[l].commentStrOffset;h<s&&g<f;g++)h=Pa.nextVisibleColumn(h,i,c.charCodeAt(g)===9,1);h<s&&(s=h)}s=Math.floor(s/i)*i;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;const c=e.getLineContent(n+l);let h=0;for(r=0,a=t[l].commentStrOffset;h<s&&r<a;r++)h=Pa.nextVisibleColumn(h,i,c.charCodeAt(r)===9,1);h>s?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}};u(Pa,"LineCommentCommand");let IK=Pa;const Ife=class Ife extends ye{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(Pt);if(!t.hasModel())return;const i=t.getModel(),s=[],r=i.getOptions(),a=t.getOption(22),l=t.getSelections().map((c,h)=>({selection:c,index:h,ignoreFirstLine:!1}));l.sort((c,h)=>L.compareRangesUsingStarts(c.selection,h.selection));let d=l[0];for(let c=1;c<l.length;c++){const h=l[c];d.selection.endLineNumber===h.selection.startLineNumber&&(d.index<h.index?h.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=h))}for(const c of l)s.push(new IK(n,c.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,c.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};u(Ife,"CommentLineAction");let RC=Ife;const Nfe=class Nfe extends RC{constructor(){super(0,{id:"editor.action.commentLine",label:m("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}};u(Nfe,"ToggleCommentLineAction");let NK=Nfe;const Rfe=class Rfe extends RC{constructor(){super(1,{id:"editor.action.addCommentLine",label:m("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2081),weight:100}})}};u(Rfe,"AddLineCommentAction");let RK=Rfe;const Pfe=class Pfe extends RC{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2099),weight:100}})}};u(Pfe,"RemoveLineCommentAction");let PK=Pfe;const Ffe=class Ffe extends ye{constructor(){super({id:"editor.action.blockComment",label:m("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(Pt);if(!t.hasModel())return;const i=t.getOption(22),s=[],r=t.getSelections();for(const a of r)s.push(new Jh(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};u(Ffe,"BlockCommentAction");let FK=Ffe;ae(NK);ae(RK);ae(PK);ae(FK);var z7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},lh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},OK,wT;let Jb=OK=(wT=class{static get(e){return e.getContribution(OK.ID)}constructor(e,t,n,i,s,r,a,l){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=s,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new ie,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(d=>this._onContextMenu(d))),this._toDispose.add(this._editor.onMouseWheel(d=>{if(this._contextMenuIsBeingShownCount>0){const c=this._contextViewService.getContextViewElement(),h=d.srcElement;h.shadowRoot&&Ng(c)===h.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(d=>{this._editor.getOption(23)&&d.keyCode===58&&(d.preventDefault(),d.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(23)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(23)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?A.SimpleEditorContext:A.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),s=i.getActions({arg:e.uri});i.dispose();for(const r of s){const[,a]=r;let l=0;for(const d of a)if(d instanceof Pg){const c=this._getMenuActions(e,d.item.submenu);c.length>0&&(n.push(new vu(d.id,d.label,c)),l++)}else n.push(d),l++;l&&n.push(new ui)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(59);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Cn(this._editor.getDomNode()),l=a.left+r.left,d=a.top+r.top+r.height;i={x:l,y:d}}const s=this._editor.getOption(125)&&!Cr;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new Eu(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new Eu(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||A4e(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(71);let n=0;const i=u(d=>({id:`menu-action-${++n}`,label:d.label,tooltip:"",class:void 0,enabled:typeof d.enabled>"u"?!0:d.enabled,checked:d.checked,run:d.run}),"createAction"),s=u((d,c)=>new vu(`menu-action-${++n}`,d,c,void 0),"createSubmenuAction"),r=u((d,c,h,g,f)=>{if(!c)return i({label:d,enabled:c,run:()=>{}});const p=u(_=>()=>{this._configurationService.updateValue(h,_)},"createRunner"),b=[];for(const _ of f)b.push(i({label:_.label,checked:g===_.value,run:p(_.value)}));return s(d,b)},"createEnumAction"),a=[];a.push(i({label:m("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new ui),a.push(i({label:m("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(m("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:m("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:m("context.minimap.size.fill","Fill"),value:"fill"},{label:m("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(m("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:m("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:m("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(125)&&!Cr;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:d=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},u(wT,"ContextMenuController"),wT);Jb.ID="editor.contrib.contextmenu";Jb=OK=z7e([lh(1,To),lh(2,qd),lh(3,Re),lh(4,At),lh(5,Ml),lh(6,at),lh(7,jg)],Jb);const Ofe=class Ofe extends ye{constructor(){super({id:"editor.action.showContextMenu",label:m("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=Jb.get(t))===null||n===void 0||n.showContextMenu()}};u(Ofe,"ShowContextMenu");let HK=Ofe;ft(Jb.ID,Jb,2);ae(HK);const Hfe=class Hfe{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}};u(Hfe,"CursorState");let c0=Hfe;const Vfe=class Vfe{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}};u(Vfe,"StackElement");let u0=Vfe;const LF=class LF extends G{static get(e){return e.getContribution(LF.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new c0(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new u0(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new u0(new c0(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new u0(new c0(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};u(LF,"CursorUndoRedoController");let rf=LF;rf.ID="editor.contrib.cursorUndoRedoController";const Wfe=class Wfe extends ye{constructor(){super({id:"cursorUndo",label:m("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=rf.get(t))===null||i===void 0||i.cursorUndo()}};u(Wfe,"CursorUndo");let VK=Wfe;const Bfe=class Bfe extends ye{constructor(){super({id:"cursorRedo",label:m("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=rf.get(t))===null||i===void 0||i.cursorRedo()}};u(Bfe,"CursorRedo");let WK=Bfe;ft(rf.ID,rf,0);ae(VK);ae(WK);const Ufe=class Ufe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new xe(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new xe(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}};u(Ufe,"DragAndDropCommand");let BK=Ufe;function Kf(o){return ot?o.altKey:o.ctrlKey}u(Kf,"hasTriggerModifier");const pm=class pm extends G{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(34)||this._editor.getOption(21)||(Kf(e)&&(this._modifierPressed=!0),this._mouseDown&&Kf(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(34)||this._editor.getOption(21)||(Kf(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===pm.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const i=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}Kf(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new W(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const i=this._editor.getSelection();if(i){const{selectionStartLineNumber:s,selectionStartColumn:r}=i;n=[new xe(s,r,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new xe(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(Kf(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(pm.ID,new BK(this._dragSelection,t,Kf(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:pm._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};u(pm,"DragAndDropController");let af=pm;af.ID="editor.contrib.dragAndDrop";af.TRIGGER_KEY_VALUE=ot?6:5;af._DECORATION_OPTIONS=Fe.register({description:"dnd-target",className:"dnd-target"});ft(af.ID,af,2);const c4=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=u(function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n},"getRandomValues");const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return u(function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,s="";return s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+="-",s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s+=t[e[i++]],s},"generateUuid")}();var yEe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function zJ(o){return{asString:()=>yEe(this,void 0,void 0,function*(){return o}),asFile:()=>{},value:typeof o=="string"?o:void 0}}u(zJ,"createStringDataTransferItem");function G7e(o,e,t){const n={id:c4(),name:o,uri:e,data:t};return{asString:()=>yEe(this,void 0,void 0,function*(){return""}),asFile:()=>n,value:void 0}}u(G7e,"createFileDataTransferItem");const zfe=class zfe{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return et.some(this,([n,i])=>i.asFile())&&t.push("files"),CEe(oR(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const n of t)yield[e,n]}toKey(e){return oR(e)}};u(zfe,"VSDataTransfer");let sR=zfe;function oR(o){return o.toLowerCase()}u(oR,"normalizeMimeType");function wEe(o,e){return CEe(oR(o),e.map(oR))}u(wEe,"matchesMimeType");function CEe(o,e){if(o==="*/*")return e.length>0;if(e.includes(o))return!0;const t=o.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[n,i,s]=t;return s==="*"?e.some(r=>r.startsWith(i+"/")):!1}u(CEe,"matchesMimeType_normalized");const u4=Object.freeze({create:o=>du(o.map(e=>e.toString())).join(`\r
`),split:o=>o.split(`\r
`),parse:o=>u4.split(o).filter(e=>!e.startsWith("#"))}),xCe={EDITORS:"CodeEditors",FILES:"CodeFiles"},Gfe=class Gfe{};u(Gfe,"DragAndDropContributionRegistry");let UK=Gfe;const j7e={DragAndDropContribution:"workbench.contributions.dragAndDrop"};on.add(j7e.DragAndDropContribution,new UK);const EF=class EF{constructor(){}static getInstance(){return EF.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};u(EF,"LocalSelectionTransfer");let PC=EF;PC.INSTANCE=new PC;var K7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function SEe(o){const e=new sR;for(const t of o.items){const n=t.type;if(t.kind==="string"){const i=new Promise(s=>t.getAsString(s));e.append(n,zJ(i))}else if(t.kind==="file"){const i=t.getAsFile();i&&e.append(n,$7e(i))}}return e}u(SEe,"toVSDataTransfer");function $7e(o){const e=o.path?Ae.parse(o.path):void 0;return G7e(o.name,e,()=>K7e(this,void 0,void 0,function*(){return new Uint8Array(yield o.arrayBuffer())}))}u($7e,"createFileDataTransferItemFromFile");const q7e=Object.freeze([xCe.EDITORS,xCe.FILES,$w.RESOURCES,$w.INTERNAL_URI_LIST]);function xEe(o,e=!1){const t=SEe(o),n=t.get($w.INTERNAL_URI_LIST);if(n)t.replace(bn.uriList,n);else if(e||!t.has(bn.uriList)){const i=[];for(const s of o.items){const r=s.getAsFile();if(r){const a=r.path;try{a?i.push(Ae.file(a).toString()):i.push(Ae.parse(r.name,!0).toString())}catch{}}}i.length&&t.replace(bn.uriList,zJ(u4.create(i)))}for(const i of q7e)t.delete(i);return t}u(xEe,"toExternalVSDataTransfer");function Y7e(o,e,t){var n,i;return{edits:[...e.map(s=>new Gg(o,typeof t.insertText=="string"?{range:s,text:t.insertText,insertAsSnippet:!1}:{range:s,text:t.insertText.snippet,insertAsSnippet:!0})),...(i=(n=t.additionalEdit)===null||n===void 0?void 0:n.edits)!==null&&i!==void 0?i:[]]}}u(Y7e,"createCombinedWorkspaceEdit");function TEe(o){var e;function t(a,l){return"providerId"in a&&a.providerId===l.providerId||"mimeType"in a&&a.mimeType===l.handledMimeType}u(t,"yieldsTo");const n=new Map;for(const a of o)for(const l of(e=a.yieldTo)!==null&&e!==void 0?e:[])for(const d of o)if(d!==a&&t(l,d)){let c=n.get(a);c||(c=[],n.set(a,c)),c.push(d)}if(!n.size)return Array.from(o);const i=new Set,s=[];function r(a){if(!a.length)return[];const l=a[0];if(s.includes(l))return console.warn(`Yield to cycle detected for ${l.providerId}`),a;if(i.has(l))return r(a.slice(1));let d=[];const c=n.get(l);return c&&(s.push(l),d=r(c),s.pop()),i.add(l),[...d,l,...r(a.slice(1))]}return u(r,"visit"),r(Array.from(o))}u(TEe,"sortEditsByYieldTo");var X7e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Z7e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},J7e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Q7e=Fe.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:sSe,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),kF=class kF extends G{constructor(e,t,n,i,s){super(),this.typeId=e,this.editor=t,this.range=n,this.delegate=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(i),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=re(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=re("span.icon");this.domNode.append(t),t.classList.add(...Te.asClassNameArray(ue.loading),"codicon-modifier-spin");const n=u(()=>{const i=this.editor.getOption(65);this.domNode.style.height=`${i}px`,this.domNode.style.width=`${Math.ceil(.8*i)}px`},"updateSize");n(),this._register(this.editor.onDidChangeConfiguration(i=>{(i.hasChanged(51)||i.hasChanged(65))&&n()})),this._register(q(this.domNode,pe.CLICK,i=>{this.delegate.cancel()}))}getId(){return kF.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};u(kF,"InlineProgressWidget");let rR=kF;rR.baseId="editor.widget.inlineProgressWidget";var CT;let aR=(CT=class extends G{constructor(e,t,n){super(),this.id=e,this._editor=t,this._instantiationService=n,this._showDelay=500,this._showPromise=this._register(new si),this._currentWidget=new si,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}showWhile(e,t,n){return J7e(this,void 0,void 0,function*(){const i=this._operationIdPool++;this._currentOperation=i,this.clear(),this._showPromise.value=pu(()=>{const s=L.fromPositions(e);this._currentDecorations.set([{range:s,options:Q7e}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(rR,this.id,this._editor,s,t,n))},this._showDelay);try{return yield n}finally{this._currentOperation===i&&(this.clear(),this._currentOperation=void 0)}})}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}},u(CT,"InlineProgressManager"),CT);aR=X7e([Z7e(2,Pe)],aR);var LEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},h0=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},TCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},zK,ST;let lR=zK=(ST=class extends G{constructor(e,t,n,i,s,r,a,l,d,c){super(),this.typeId=e,this.editor=t,this.showCommand=i,this.range=s,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=c,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=n.bindTo(d),this.visibleContext.set(!0),this._register(He(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(He(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(h=>{s.containsPosition(h.position)||this.dispose()})),this._register(Ce.runAndSubscribe(c.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;const t=(e=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||e===void 0?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=re(".post-edit-widget"),this.button=this._register(new hC(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(q(this.domNode,pe.CLICK,()=>this.showSelector()))}getId(){return zK.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Cn(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>Am({id:"",label:e.label,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},u(ST,"PostEditWidget"),ST);lR.baseId="editor.widget.postEditWidget";lR=zK=LEe([h0(7,To),h0(8,Re),h0(9,At)],lR);var xT;let dR=(xT=class extends G{constructor(e,t,n,i,s,r){super(),this._id=e,this._editor=t,this._visibleContext=n,this._showCommand=i,this._instantiationService=s,this._bulkEditService=r,this._currentWidget=this._register(new si),this._register(Ce.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}applyEditAndShowIfNeeded(e,t,n,i){var s,r;return TCe(this,void 0,void 0,function*(){const a=this._editor.getModel();if(!a||!e.length)return;const l=t.allEdits[t.activeEditIndex];if(!l)return;let d=[];(typeof l.insertText=="string"?l.insertText==="":l.insertText.snippet==="")?d=[]:d=e.map(_=>new Gg(a.uri,typeof l.insertText=="string"?{range:_,text:l.insertText,insertAsSnippet:!1}:{range:_,text:l.insertText.snippet,insertAsSnippet:!0}));const h={edits:[...d,...(r=(s=l.additionalEdit)===null||s===void 0?void 0:s.edits)!==null&&r!==void 0?r:[]]},g=e[0],f=a.deltaDecorations([],[{range:g,options:{description:"paste-line-suffix",stickiness:0}}]);let p,b;try{p=yield this._bulkEditService.apply(h,{editor:this._editor,token:i}),b=a.getDecorationRange(f[0])}finally{a.deltaDecorations(f,[])}n&&p.isApplied&&t.allEdits.length>1&&this.show(b??g,t,_=>TCe(this,void 0,void 0,function*(){const v=this._editor.getModel();v&&(yield v.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:_,allEdits:t.allEdits},n,i))}))})}show(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(lR,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)===null||e===void 0||e.showSelector()}},u(xT,"PostEditWidgetManager"),xT);dR=LEe([h0(4,Pe),h0(5,oE)],dR);var eWe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},$f=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ul=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},GK;const EEe="editor.changePasteType",kEe=new _e("pasteWidgetVisible",!1,m("pasteWidgetVisible","Whether the paste widget is showing")),$H="application/vnd.code.copyMetadata";var TT;let lf=GK=(TT=class extends G{static get(e){return e.getContribution(GK.ID)}constructor(e,t,n,i,s,r,a){super(),this._bulkEditService=n,this._clipboardService=i,this._languageFeaturesService=s,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(q(l,"copy",d=>this.handleCopy(d))),this._register(q(l,"cut",d=>this.handleCopy(d))),this._register(q(l,"paste",d=>this.handlePaste(d),!0)),this._pasteProgressManager=this._register(new aR("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(dR,"pasteIntoEditor",e,kEe,{id:EEe,label:m("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},document.execCommand("paste")}finally{this._pasteAsActionContext=void 0}}isPasteAsEnabled(){return this._editor.getOption(83).enabled&&!this._editor.getOption(89)}handleCopy(e){var t,n;if(!this._editor.hasTextFocus()||(Ku&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;const i=this._editor.getModel(),s=this._editor.getSelections();if(!i||!s?.length)return;const r=this._editor.getOption(36);let a=s;const l=s.length===1&&s[0].isEmpty();if(l){if(!r)return;a=[new L(a[0].startLineNumber,1,a[0].startLineNumber,1+i.getLineLength(a[0].startLineNumber))]}const d=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getPlainTextToCopy(s,r,Si),h={multicursorText:Array.isArray(d)?d:null,pasteOnNewLine:l,mode:null},g=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter(v=>!!v.prepareDocumentPaste);if(!g.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:h});return}const f=SEe(e.clipboardData),p=g.flatMap(v=>{var y;return(y=v.copyMimeTypes)!==null&&y!==void 0?y:[]}),b=c4();this.setCopyMetadata(e.clipboardData,{id:b,providerCopyMimeTypes:p,defaultPastePayload:h});const _=Fn(v=>Ul(this,void 0,void 0,function*(){const y=ol(yield Promise.all(g.map(w=>Ul(this,void 0,void 0,function*(){try{return yield w.prepareDocumentPaste(i,a,f,v)}catch(C){console.error(C);return}}))));y.reverse();for(const w of y)for(const[C,S]of w)f.replace(C,S);return f}));(n=this._currentCopyOperation)===null||n===void 0||n.dataTransferPromise.cancel(),this._currentCopyOperation={handle:b,dataTransferPromise:_}}handlePaste(e){var t,n;return Ul(this,void 0,void 0,function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;(t=this._currentPasteOperation)===null||t===void 0||t.cancel(),this._currentPasteOperation=void 0;const i=this._editor.getModel(),s=this._editor.getSelections();if(!s?.length||!i||!this.isPasteAsEnabled())return;const r=this.fetchCopyMetadata(e),a=xEe(e.clipboardData);a.delete($H);const l=[...e.clipboardData.types,...(n=r?.providerCopyMimeTypes)!==null&&n!==void 0?n:[],bn.uriList],d=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter(c=>{var h;return(h=c.pasteMimeTypes)===null||h===void 0?void 0:h.some(g=>wEe(g,l))});d.length&&(e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,d,s,a,r):this.doPasteInline(d,s,a,r))})}doPasteInline(e,t,n,i){const s=Fn(r=>Ul(this,void 0,void 0,function*(){const a=this._editor;if(!a.hasModel())return;const l=a.getModel(),d=new vl(a,3,void 0,r);try{if(yield this.mergeInDataFromCopy(n,i,d.token),d.token.isCancellationRequested)return;const c=e.filter(g=>LCe(g,n));if(!c.length||c.length===1&&c[0].id==="text"){yield this.applyDefaultPasteHandler(n,i,d.token);return}const h=yield this.getPasteEdits(c,n,l,t,d.token);if(d.token.isCancellationRequested)return;if(h.length===1&&h[0].providerId==="text"){yield this.applyDefaultPasteHandler(n,i,d.token);return}if(h.length){const g=a.getOption(83).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:h},g,d.token)}yield this.applyDefaultPasteHandler(n,i,d.token)}finally{d.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),m("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),s),this._currentPasteOperation=s}showPasteAsPick(e,t,n,i,s){const r=Fn(a=>Ul(this,void 0,void 0,function*(){const l=this._editor;if(!l.hasModel())return;const d=l.getModel(),c=new vl(l,3,void 0,a);try{if(yield this.mergeInDataFromCopy(i,s,c.token),c.token.isCancellationRequested)return;let h=t.filter(b=>LCe(b,i));e&&(h=h.filter(b=>b.id===e));const g=yield this.getPasteEdits(h,i,d,n,c.token);if(c.token.isCancellationRequested||!g.length)return;let f;if(e)f=g.at(0);else{const b=yield this._quickInputService.pick(g.map(_=>({label:_.label,description:_.providerId,detail:_.detail,edit:_})),{placeHolder:m("pasteAsPickerPlaceholder","Select Paste Action")});f=b?.edit}if(!f)return;const p=Y7e(d.uri,n,f);yield this._bulkEditService.apply(p,{editor:this._editor})}finally{c.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}}));this._progressService.withProgress({location:10,title:m("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData($H,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const n=e.clipboardData.getData($H);if(n)try{return JSON.parse(n)}catch{return}const[i,s]=_7.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:(t=s.multicursorText)!==null&&t!==void 0?t:null,pasteOnNewLine:!!s.isFromEmptySelection}}}mergeInDataFromCopy(e,t,n){var i;return Ul(this,void 0,void 0,function*(){if(t?.id&&((i=this._currentCopyOperation)===null||i===void 0?void 0:i.handle)===t.id){const s=yield this._currentCopyOperation.dataTransferPromise;if(n.isCancellationRequested)return;for(const[r,a]of s)e.replace(r,a)}if(!e.has(bn.uriList)){const s=yield this._clipboardService.readResources();if(n.isCancellationRequested)return;s.length&&e.append(bn.uriList,zJ(u4.create(s)))}})}getPasteEdits(e,t,n,i,s){return Ul(this,void 0,void 0,function*(){const r=yield EO(Promise.all(e.map(l=>Ul(this,void 0,void 0,function*(){var d;try{const c=yield(d=l.provideDocumentPasteEdits)===null||d===void 0?void 0:d.call(l,n,i,t,s);if(c)return Object.assign(Object.assign({},c),{providerId:l.id})}catch(c){console.error(c)}}))),s),a=ol(r??[]);return TEe(a),a})}applyDefaultPasteHandler(e,t,n){var i,s,r;return Ul(this,void 0,void 0,function*(){const a=(i=e.get(bn.text))!==null&&i!==void 0?i:e.get("text");if(!a)return;const l=yield a.asString();if(n.isCancellationRequested)return;const d={text:l,pasteOnNewLine:(s=t?.defaultPastePayload.pasteOnNewLine)!==null&&s!==void 0?s:!1,multicursorText:(r=t?.defaultPastePayload.multicursorText)!==null&&r!==void 0?r:null,mode:null};this._editor.trigger("keyboard","paste",d)})}},u(TT,"CopyPasteController"),TT);lf.ID="editor.contrib.copyPasteActionController";lf=GK=eWe([$f(1,Pe),$f(2,oE),$f(3,Sa),$f(4,we),$f(5,xa),$f(6,uTe)],lf);function LCe(o,e){var t;return!!(!((t=o.pasteMimeTypes)===null||t===void 0)&&t.some(n=>e.matches(n)))}u(LCe,"isSupportedPasteProvider");var GJ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},FC=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Qb=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const jJ=m("builtIn","Built-in"),jfe=class jfe{provideDocumentPasteEdits(e,t,n,i){return Qb(this,void 0,void 0,function*(){const s=yield this.getEdit(n,i);return s?{insertText:s.insertText,label:s.label,detail:s.detail,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}:void 0})}provideDocumentOnDropEdits(e,t,n,i){return Qb(this,void 0,void 0,function*(){const s=yield this.getEdit(n,i);return s?{insertText:s.insertText,label:s.label,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}:void 0})}};u(jfe,"SimplePasteAndDropProvider");let OC=jfe;const Kfe=class Kfe extends OC{constructor(){super(...arguments),this.id="text",this.dropMimeTypes=[bn.text],this.pasteMimeTypes=[bn.text]}getEdit(e,t){return Qb(this,void 0,void 0,function*(){const n=e.get(bn.text);if(!n||e.has(bn.uriList))return;const i=yield n.asString();return{handledMimeType:bn.text,label:m("text.label","Insert Plain Text"),detail:jJ,insertText:i}})}};u(Kfe,"DefaultTextProvider");let cR=Kfe;const $fe=class $fe extends OC{constructor(){super(...arguments),this.id="uri",this.dropMimeTypes=[bn.uriList],this.pasteMimeTypes=[bn.uriList]}getEdit(e,t){return Qb(this,void 0,void 0,function*(){const n=yield DEe(e);if(!n.length||t.isCancellationRequested)return;let i=0;const s=n.map(({uri:a,originalText:l})=>a.scheme===qe.file?a.fsPath:(i++,l)).join(" ");let r;return i>0?r=n.length>1?m("defaultDropProvider.uriList.uris","Insert Uris"):m("defaultDropProvider.uriList.uri","Insert Uri"):r=n.length>1?m("defaultDropProvider.uriList.paths","Insert Paths"):m("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:bn.uriList,insertText:s,label:r,detail:jJ}})}};u($fe,"PathProvider");let uR=$fe;var LT;let hR=(LT=class extends OC{constructor(e){super(),this._workspaceContextService=e,this.id="relativePath",this.dropMimeTypes=[bn.uriList],this.pasteMimeTypes=[bn.uriList]}getEdit(e,t){return Qb(this,void 0,void 0,function*(){const n=yield DEe(e);if(!n.length||t.isCancellationRequested)return;const i=ol(n.map(({uri:s})=>{const r=this._workspaceContextService.getWorkspaceFolder(s);return r?CPe(r.uri,s):void 0}));if(i.length)return{handledMimeType:bn.uriList,insertText:i.join(" "),label:n.length>1?m("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):m("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:jJ}})}},u(LT,"RelativePathProvider"),LT);hR=GJ([FC(0,jg)],hR);function DEe(o){return Qb(this,void 0,void 0,function*(){const e=o.get(bn.uriList);if(!e)return[];const t=yield e.asString(),n=[];for(const i of u4.parse(t))try{n.push({uri:Ae.parse(i),originalText:i})}catch{}return n})}u(DEe,"extractUriList");var ET;let jK=(ET=class extends G{constructor(e,t){super(),this._register(e.documentOnDropEditProvider.register("*",new cR)),this._register(e.documentOnDropEditProvider.register("*",new uR)),this._register(e.documentOnDropEditProvider.register("*",new hR(t)))}},u(ET,"DefaultDropProvidersFeature"),ET);jK=GJ([FC(0,we),FC(1,jg)],jK);var kT;let KK=(kT=class extends G{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new cR)),this._register(e.documentPasteEditProvider.register("*",new uR)),this._register(e.documentPasteEditProvider.register("*",new hR(t)))}},u(kT,"DefaultPasteProvidersFeature"),kT);KK=GJ([FC(0,we),FC(1,jg)],KK);ft(lf.ID,lf,0);qO(KK);he(new class extends hi{constructor(){super({id:EEe,precondition:kEe,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e,t){var n;return(n=lf.get(e))===null||n===void 0?void 0:n.changePasteType()}});ae(class extends ye{constructor(){super({id:"editor.action.pasteAs",label:m("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:m("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}run(o,e,t){var n;const i=typeof t?.id=="string"?t.id:void 0;return(n=lf.get(e))===null||n===void 0?void 0:n.pasteAs(i)}});const qfe=class qfe{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}};u(qfe,"TreeViewsDnDService");let $K=qfe;const Yfe=class Yfe{constructor(e){this.identifier=e}};u(Yfe,"DraggedTreeItemsIdentifier");let gR=Yfe;const MEe=nt("treeViewsDndService");ct(MEe,$K,1);var tWe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ck=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Q_=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},qK;const AEe="editor.experimental.dropIntoEditor.defaultProvider",IEe="editor.changeDropType",NEe=new _e("dropWidgetVisible",!1,m("dropWidgetVisible","Whether the drop widget is showing"));var DT;let e_=qK=(DT=class extends G{static get(e){return e.getContribution(qK.ID)}constructor(e,t,n,i,s){super(),this._configService=n,this._languageFeaturesService=i,this._treeViewsDragAndDropService=s,this.treeItemsTransfer=PC.getInstance(),this._dropProgressManager=this._register(t.createInstance(aR,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(dR,"dropIntoEditor",e,NEe,{id:IEe,label:m("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}changeDropType(){this._postDropWidgetManager.tryShowSelector()}onDropIntoEditor(e,t,n){var i;return Q_(this,void 0,void 0,function*(){if(!n.dataTransfer||!e.hasModel())return;(i=this._currentOperation)===null||i===void 0||i.cancel(),e.focus(),e.setPosition(t);const s=Fn(r=>Q_(this,void 0,void 0,function*(){const a=new vl(e,1,void 0,r);try{const l=yield this.extractDataTransferData(n);if(l.size===0||a.token.isCancellationRequested)return;const d=e.getModel();if(!d)return;const c=this._languageFeaturesService.documentOnDropEditProvider.ordered(d).filter(g=>g.dropMimeTypes?g.dropMimeTypes.some(f=>l.matches(f)):!0),h=yield this.getDropEdits(c,d,t,l,a);if(a.token.isCancellationRequested)return;if(h.length){const g=this.getInitialActiveEditIndex(d,h),f=e.getOption(35).showDropSelector==="afterDrop";yield this._postDropWidgetManager.applyEditAndShowIfNeeded([L.fromPositions(t)],{activeEditIndex:g,allEdits:h},f,r)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}}));this._dropProgressManager.showWhile(t,m("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s),this._currentOperation=s})}getDropEdits(e,t,n,i,s){return Q_(this,void 0,void 0,function*(){const r=yield EO(Promise.all(e.map(l=>Q_(this,void 0,void 0,function*(){try{const d=yield l.provideDocumentOnDropEdits(t,n,i,s.token);if(d)return Object.assign(Object.assign({},d),{providerId:l.id})}catch(d){console.error(d)}}))),s.token),a=ol(r??[]);return TEe(a)})}getInitialActiveEditIndex(e,t){const n=this._configService.getValue(AEe,{resource:e.uri});for(const[i,s]of Object.entries(n)){const r=t.findIndex(a=>s===a.providerId&&a.handledMimeType&&wEe(i,[a.handledMimeType]));if(r>=0)return r}return 0}extractDataTransferData(e){return Q_(this,void 0,void 0,function*(){if(!e.dataTransfer)return new sR;const t=xEe(e.dataTransfer);if(this.treeItemsTransfer.hasData(gR.prototype)){const n=this.treeItemsTransfer.getData(gR.prototype);if(Array.isArray(n))for(const i of n){const s=yield this._treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(s)for(const[r,a]of s)t.replace(r,a)}}return t})}},u(DT,"DropIntoEditorController"),DT);e_.ID="editor.contrib.dropIntoEditorController";e_=qK=tWe([ck(1,Pe),ck(2,at),ck(3,we),ck(4,MEe)],e_);ft(e_.ID,e_,2);he(new class extends hi{constructor(){super({id:IEe,precondition:NEe,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e,t){var n;(n=e_.get(e))===null||n===void 0||n.changeDropType()}});qO(jK);on.as(kl.Configuration).registerConfiguration(Object.assign(Object.assign({},aJ),{properties:{[AEe]:{type:"object",scope:5,description:m("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}}));const Do=class Do{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===Do._FIND_MATCH_DECORATION||i===Do._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,s=this._decorations.length;i<s;i++){const r=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(r)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,Do._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,Do._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const r=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);s=new L(s.startLineNumber,s.startColumn,r,a)}this._rangeHighlightDecorationId=i.addDecoration(s,Do._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=Do._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){i=Do._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),d=this._editor.getLayoutInfo().height/a,c=Math.max(2,Math.ceil(3/d));let h=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let f=1,p=e.length;f<p;f++){const b=e[f].range;g+c>=b.startLineNumber?b.endLineNumber>g&&(g=b.endLineNumber):(s.push({range:new L(h,1,g,1),options:Do._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=b.startLineNumber,g=b.endLineNumber)}s.push({range:new L(h,1,g,1),options:Do._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Do._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};u(Do,"FindDecorations");let Gd=Do;Gd._CURRENT_FIND_MATCH_DECORATION=Fe.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:ln(HZ),position:mo.Center},minimap:{color:ln(yp),position:ho.Inline}});Gd._FIND_MATCH_DECORATION=Fe.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:ln(HZ),position:mo.Center},minimap:{color:ln(yp),position:ho.Inline}});Gd._FIND_MATCH_NO_OVERVIEW_DECORATION=Fe.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Gd._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Fe.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:ln(HZ),position:mo.Center}});Gd._RANGE_HIGHLIGHT_DECORATION=Fe.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Gd._FIND_SCOPE_DECORATION=Fe.register({description:"find-scope",className:"findScope",isWholeLine:!0});const Xfe=class Xfe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let r=0;r<this._ranges.length;r++)n.push({range:this._ranges[r],text:this._replaceStrings[r]});n.sort((r,a)=>L.compareRangesUsingStarts(r.range,a.range));const i=[];let s=n[0];for(let r=1;r<n.length;r++)s.range.endLineNumber===n[r].range.startLineNumber&&s.range.endColumn===n[r].range.startColumn?(s.range=s.range.plusRange(n[r].range),s.text=s.text+n[r].text):(i.push(s),s=n[r]);i.push(s);for(const r of i)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}};u(Xfe,"ReplaceAllCommand");let YK=Xfe;function REe(o,e){if(o&&o[0]!==""){const t=ECe(o,e,"-"),n=ECe(o,e,"_");return t&&!n?kCe(o,e,"-"):!t&&n?kCe(o,e,"_"):o[0].toUpperCase()===o[0]?e.toUpperCase():o[0].toLowerCase()===o[0]?e.toLowerCase():oMe(o[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):o[0][0].toUpperCase()!==o[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}u(REe,"buildReplaceStringWithCasePreserved");function ECe(o,e,t){return o[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&o[0].split(t).length===e.split(t).length}u(ECe,"validateSpecificSpecialCharacter");function kCe(o,e,t){const n=e.split(t),i=o[0].split(t);let s="";return n.forEach((r,a)=>{s+=REe([i[a]],r)+t}),s.slice(0,-1)}u(kCe,"buildReplaceStringForSpecificSpecialCharacter");const Zfe=class Zfe{constructor(e){this.staticValue=e,this.kind=0}};u(Zfe,"StaticValueReplacePattern");let fR=Zfe;const Jfe=class Jfe{constructor(e){this.pieces=e,this.kind=1}};u(Jfe,"DynamicPiecesReplacePattern");let XK=Jfe;const xy=class xy{static fromStaticValue(e){return new xy([qm.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new fR(""):e.length===1&&e[0].staticValue!==null?this._state=new fR(e[0].staticValue):this._state=new XK(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?REe(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,s=this._state.pieces.length;i<s;i++){const r=this._state.pieces[i];if(r.staticValue!==null){n+=r.staticValue;continue}let a=xy._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],d=r.caseOps.length;let c=0;for(let h=0,g=a.length;h<g;h++){if(c>=d){l.push(a.slice(h));break}switch(r.caseOps[c]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),c++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),c++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}};u(xy,"ReplacePattern");let HC=xy;const Ty=class Ty{static staticValue(e){return new Ty(e,-1,null)}static caseOps(e,t){return new Ty(null,e,t)}constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}};u(Ty,"ReplacePiece");let qm=Ty;const Qfe=class Qfe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=qm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=qm.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=qm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new HC(this._result)}};u(Qfe,"ReplacePieceBuilder");let ZK=Qfe;function nWe(o){if(!o||o.length===0)return new HC(null);const e=[],t=new ZK(o);for(let n=0,i=o.length;n<i;n++){const s=o.charCodeAt(n);if(s===92){if(n++,n>=i)break;const r=o.charCodeAt(n);switch(r){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(r));break}continue}if(s===36){if(n++,n>=i)break;const r=o.charCodeAt(n);if(r===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(r===48||r===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(n+1<i){const l=o.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}u(nWe,"parseReplaceString");const Xd=new _e("findWidgetVisible",!1);Xd.toNegated();const h4=new _e("findInputFocussed",!1),KJ=new _e("replaceInputFocussed",!1),uk={primary:545,mac:{primary:2593}},hk={primary:565,mac:{primary:2613}},gk={primary:560,mac:{primary:2608}},fk={primary:554,mac:{primary:2602}},pk={primary:558,mac:{primary:2606}},Ot={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Gc=19999,iWe=240,mm=class mm{constructor(e,t){this._toDispose=new ie,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new bo,this._decorations=new Gd(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Et(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,wt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},iWe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new L(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const i=this._findMatches(n,!1,Gc);this._decorations.set(i,n);const s=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(s);if(r===0&&i.length>0){const a=w1e(i.map(l=>l.range),l=>L.compareRangesUsingStarts(l,s)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(40).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===1?(n===1?n=s.getLineCount():n--,i=s.getLineMaxColumn(n)):i--,new W(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const c=this._decorations.matchAfterPosition(e);c&&this._setCurrentFindMatch(c);return}if(this._decorations.getCount()<Gc){let c=this._decorations.matchBeforePosition(e);c&&c.isEmpty()&&c.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),c=this._decorations.matchBeforePosition(e)),c&&this._setCurrentFindMatch(c);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),i=mm._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());const{lineNumber:s,column:r}=e,a=this._editor.getModel();let l=new W(s,r),d=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),d=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null,!1)),!!d){if(!t&&!i.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const s=this._editor.getModel();return t||i===s.getLineMaxColumn(n)?(n===s.getLineCount()?n=1:n++,i=1):i++,new W(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Gc){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),r=mm._getSearchRange(this._editor.getModel(),s);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,d=this._editor.getModel();let c=new W(a,l),h=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),h=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null,t)),h?!i&&!r.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?nWe(this._state.replaceString):HC.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const i=e.buildReplaceString(n.matches,this._state.preserveCase),s=new ni(t,i);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new W(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(s=>mm._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Gc?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new id(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(128):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),s=i.getValue(1),r=i.getFullModelRange(),a=this._getReplacePattern();let l;const d=this._state.preserveCase;a.hasReplacementPatterns||d?l=s.replace(n,function(){return a.buildReplaceString(arguments,d)}):l=s.replace(n,a.buildReplaceString(null,d));const c=new Lw(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let r=0,a=n.length;r<a;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);const s=new YK(this._editor.getSelection(),n.map(r=>r.range),i);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(s=>new xe(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const i=this._editor.getSelection();for(let s=0,r=n.length;s<r;s++)if(n[s].equalsRange(i)){n=[i].concat(n.slice(0,s)).concat(n.slice(s+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}};u(mm,"FindModelBoundToEditorModel");let JK=mm;const DF=class DF extends Ar{constructor(e,t,n){super(),this._hideSoon=this._register(new Et(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const i={inputActiveOptionBorder:be(PZ),inputActiveOptionForeground:be(FZ),inputActiveOptionBackground:be(Gh)};this.caseSensitive=this._register(new FI(Object.assign({appendTitle:this._keybindingLabelFor(Ot.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase},i))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new OI(Object.assign({appendTitle:this._keybindingLabelFor(Ot.ToggleWholeWordCommand),isChecked:this._state.wholeWord},i))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new HI(Object.assign({appendTitle:this._keybindingLabelFor(Ot.ToggleRegexCommand),isChecked:this._state.isRegex},i))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(s=>{let r=!1;s.isRegex&&(this.regex.checked=this._state.isRegex,r=!0),s.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,r=!0),s.matchCase&&(this.caseSensitive.checked=this._state.matchCase,r=!0),!this._state.isRevealed&&r&&this._revealTemporarily()})),this._register(q(this._domNode,pe.MOUSE_LEAVE,s=>this._onMouseLeave())),this._register(q(this._domNode,"mouseover",s=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return DF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};u(DF,"FindOptionsWidget");let pR=DF;pR.ID="editor.contrib.findOptionsWidget";function mk(o,e){return o===1?!0:o===2?!1:e}u(mk,"effectiveOptionValue");const epe=class epe extends G{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return mk(this._isRegexOverride,this._isRegex)}get wholeWord(){return mk(this._wholeWordOverride,this._wholeWord)}get matchCase(){return mk(this._matchCaseOverride,this._matchCase)}get preserveCase(){return mk(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new V),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,n){const i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,s=!0),typeof n<"u"&&(L.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;const s={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const a=this.isRegex,l=this.wholeWord,d=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(h=>{var g;return(g=this._searchScope)===null||g===void 0?void 0:g.some(f=>!L.equalsRange(f,h))})||(this._searchScope=e.searchScope,s.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,s.isRegex=!0),l!==this.wholeWord&&(r=!0,s.wholeWord=!0),d!==this.matchCase&&(r=!0,s.matchCase=!0),c!==this.preserveCase&&(r=!0,s.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Gc}};u(epe,"FindReplaceState");let QK=epe;const sWe=m("defaultLabel","input"),oWe=m("label.preserveCaseToggle","Preserve Case"),tpe=class tpe extends Du{constructor(e){super({icon:ue.preserveCase,title:oWe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};u(tpe,"PreserveCaseToggle");let e$=tpe;const npe=class npe extends Ar{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new V),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new V),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new V),this._onInput=this._register(new V),this._onKeyUp=this._register(new V),this._onPreserveCaseKeyDown=this._register(new V),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||sWe;const s=i.appendPreserveCaseLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new VI(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles})),this.preserveCase=this._register(new e$(Object.assign({appendTitle:s,isChecked:!1},i.toggleStyles))),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const c=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const f=c.indexOf(document.activeElement);if(f>=0){let p=-1;g.equals(17)?p=(f+1)%c.length:g.equals(15)&&(f===0?p=c.length-1:p=f-1),g.equals(9)?(c[f].blur(),this.inputBox.focus()):p>=0&&c[p].focus(),Ke.stop(g,!0)}}});const h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}};u(npe,"ReplaceInput");let t$=npe;var PEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},FEe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const $J=new _e("suggestWidgetVisible",!1,m("suggestWidgetVisible","Whether suggestion are visible")),qJ="historyNavigationWidgetFocus",OEe="historyNavigationForwardsEnabled",HEe="historyNavigationBackwardsEnabled";let Ad;const bk=[];function VEe(o,e){if(bk.includes(e))throw new Error("Cannot register the same widget multiple times");bk.push(e);const t=new ie,n=new _e(qJ,!1).bindTo(o),i=new _e(OEe,!0).bindTo(o),s=new _e(HEe,!0).bindTo(o),r=u(()=>{n.set(!0),Ad=e},"onDidFocus"),a=u(()=>{n.set(!1),Ad===e&&(Ad=void 0)},"onDidBlur");return e.element===document.activeElement&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(He(()=>{bk.splice(bk.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}u(VEe,"registerAndCreateHistoryNavigationContext");var MT;let n$=(MT=class extends WI{constructor(e,t,n,i){super(e,t,n);const s=this._register(i.createScoped(this.inputBox.element));this._register(VEe(s,this.inputBox))}},u(MT,"ContextScopedFindInput"),MT);n$=PEe([FEe(3,Re)],n$);var AT;let i$=(AT=class extends t${constructor(e,t,n,i,s=!1){super(e,t,s,n);const r=this._register(i.createScoped(this.inputBox.element));this._register(VEe(r,this.inputBox))}},u(AT,"ContextScopedReplaceInput"),AT);i$=PEe([FEe(3,Re)],i$);Ts.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:ne.and(ne.has(qJ),ne.equals(HEe,!0),ne.not("isComposing"),$J.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{Ad?.showPreviousValue()}});Ts.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:ne.and(ne.has(qJ),ne.equals(OEe,!0),ne.not("isComposing"),$J.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{Ad?.showNextValue()}});function DCe(o){var e,t;return((e=o.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=o.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}u(DCe,"showHistoryKeybindingHint");var rWe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const aWe=Yt("find-selection",ue.selection,m("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),MCe=Yt("find-collapsed",ue.chevronRight,m("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),ACe=Yt("find-expanded",ue.chevronDown,m("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),lWe=Yt("find-replace",ue.replace,m("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),dWe=Yt("find-replace-all",ue.replaceAll,m("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),cWe=Yt("find-previous-match",ue.arrowUp,m("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),uWe=Yt("find-next-match",ue.arrowDown,m("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),hWe=m("label.findDialog","Find / Replace"),gWe=m("label.find","Find"),fWe=m("placeholder.find","Find"),pWe=m("label.previousMatchButton","Previous Match"),mWe=m("label.nextMatchButton","Next Match"),bWe=m("label.toggleSelectionFind","Find in Selection"),_We=m("label.closeButton","Close"),vWe=m("label.replace","Replace"),yWe=m("placeholder.replace","Replace"),wWe=m("label.replaceButton","Replace"),CWe=m("label.replaceAllButton","Replace All"),SWe=m("label.toggleReplaceButton","Toggle Replace"),xWe=m("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Gc),TWe=m("label.matchesLocation","{0} of {1}"),ICe=m("label.noResults","No results"),Da=419,LWe=275,EWe=LWe-54;let ev=69;const kWe=33,NCe="ctrlEnterReplaceAll.windows.donotask",RCe=ot?256:2048,ipe=class ipe{constructor(e){this.afterLineNumber=e,this.heightInPx=kWe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}};u(ipe,"FindWidgetViewZone");let g0=ipe;function PCe(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){o.stopPropagation();return}}u(PCe,"stopPropagationForMultiLineUpwards");function FCe(o,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){o.stopPropagation();return}}u(FCe,"stopPropagationForMultiLineDownwards");const MF=class MF extends Ar{constructor(e,t,n,i,s,r,a,l,d){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=s,this._contextKeyService=r,this._storageService=l,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(NCe,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Uo(500),this._register(He(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(c=>this._onStateChanged(c))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(c=>{if(c.hasChanged(89)&&(this._codeEditor.getOption(89)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),c.hasChanged(142)&&this._tryUpdateWidgetWidth(),c.hasChanged(2)&&this.updateAccessibilitySupport(),c.hasChanged(40)){const h=this._codeEditor.getOption(40).loop;this._state.change({loop:h},!1);const g=this._codeEditor.getOption(40).addExtraSpaceOnTop;g&&!this._viewZone&&(this._viewZone=new g0(0),this._showViewZone()),!g&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>rWe(this,void 0,void 0,function*(){if(this._isVisible){const c=yield this._controller.getGlobalBufferTerm();c&&c!==this._state.searchString&&(this._state.change({searchString:c},!1),this._findInput.select())}}))),this._findInputFocused=h4.bindTo(r),this._findFocusTracker=this._register(ul(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=KJ.bindTo(r),this._replaceFocusTracker=this._register(ul(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(40).addExtraSpaceOnTop&&(this._viewZone=new g0(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(c=>{if(c.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return MF.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(89)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=bs(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Be)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=ev+"px",this._state.matchesCount>=Gc?this._matchesCount.title=xWe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Gc&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=Sg(TWe,n,t)}else e=ICe;this._matchesCount.appendChild(document.createTextNode(e)),Ii(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),ev=Math.max(ev,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===ICe)return n===""?m("ariaSearchNoResultEmpty","{0} found",e):m("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=m("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${i}`:i}return m("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(89);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(40).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(40).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=Cn(n),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=i.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=zSe(this._domNode).left;r>l&&(t=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(d?d.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(40).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(40).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new g0(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===n.heightInPx)return;const r=s-n.heightInPx;n.heightInPx=s,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(82).top,s<=0)return;n.heightInPx=s,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!AZ(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let s=!1,r=!1,a=!1;if(this._resized&&bs(this._domNode)>Da){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=bs(this._findInput.domNode);return}if(Da+28+i>=n&&(r=!0),Da+28+i-ev>=n&&(a=!0),Da+28+i-ev>=n+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!s&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=bs(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!L.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(RCe|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return PCe(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return FCe(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(RCe|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Si&&ca&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(m("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(NCe,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return PCe(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return FCe(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new n$(null,this._contextViewProvider,{width:EWe,label:gWe,placeholder:fWe,appendCaseSensitiveLabel:this._keybindingLabelFor(Ot.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ot.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ot.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(d){return{content:d.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>DCe(this._keybindingService),inputBoxStyles:CI,toggleStyles:wI},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),qi&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new _c({label:pWe+this._keybindingLabelFor(Ot.PreviousMatchFindAction),icon:cWe,onTrigger:()=>{Uh(this._codeEditor.getAction(Ot.PreviousMatchFindAction)).run().then(void 0,Be)}})),this._nextBtn=this._register(new _c({label:mWe+this._keybindingLabelFor(Ot.NextMatchFindAction),icon:uWe,onTrigger:()=>{Uh(this._codeEditor.getAction(Ot.NextMatchFindAction)).run().then(void 0,Be)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Du({icon:aWe,title:bWe+this._keybindingLabelFor(Ot.ToggleSearchScopeCommand),isChecked:!1,inputActiveOptionBackground:be(Gh),inputActiveOptionBorder:be(PZ),inputActiveOptionForeground:be(FZ)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const l=this._codeEditor.getSelections();l.map(d=>(d.endColumn===1&&d.endLineNumber>d.startLineNumber&&(d=d.setEndPosition(d.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(d.endLineNumber-1))),d.isEmpty()?null:d)).filter(d=>!!d),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new _c({label:_We+this._keybindingLabelFor(Ot.CloseFindWidgetCommand),icon:cTe,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),this._replaceInput=this._register(new i$(null,void 0,{label:vWe,placeholder:yWe,appendPreserveCaseLabel:this._keybindingLabelFor(Ot.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>DCe(this._keybindingService),inputBoxStyles:CI,toggleStyles:wI},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new _c({label:wWe+this._keybindingLabelFor(Ot.ReplaceOneAction),icon:lWe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new _c({label:CWe+this._keybindingLabelFor(Ot.ReplaceAllAction),icon:dWe,onTrigger:()=>{this._controller.replaceAll()}}));const s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);const r=document.createElement("div");r.className="replace-actions",s.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new _c({label:SWe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=bs(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=hWe,this._domNode.role="dialog",this._domNode.style.width=`${Da}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(s),this._resizeSash=new mr(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Da;this._register(this._resizeSash.onDidStart(()=>{a=bs(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;const d=a+l.startX-l.currentX;if(d<Da)return;const c=parseFloat(DO(this._domNode).maxWidth)||0;d>c||(this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=bs(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=bs(this._domNode);if(l<Da)return;let d=Da;if(!this._resized||l===Da){const c=this._codeEditor.getLayoutInfo();d=c.width-28-c.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=bs(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};u(MF,"FindWidget");let mR=MF;mR.ID="editor.contrib.findWidget";const spe=class spe extends Ar{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Te.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var i,s;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(s=(i=this._opts).onKeyDown)===null||s===void 0||s.call(i,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Te.asClassNameArray(MCe)),this._domNode.classList.add(...Te.asClassNameArray(ACe))):(this._domNode.classList.remove(...Te.asClassNameArray(ACe)),this._domNode.classList.add(...Te.asClassNameArray(MCe)))}};u(spe,"SimpleButton");let _c=spe;Ir((o,e)=>{const t=u((b,_)=>{_&&e.addRule(`.monaco-editor ${b} { background-color: ${_}; }`)},"addBackgroundColorRule");t(".findMatch",o.getColor(bd)),t(".currentFindMatch",o.getColor(XNe)),t(".findScope",o.getColor(ZNe));const n=o.getColor(cn);t(".find-widget",n);const i=o.getColor($a);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const s=o.getColor(RZ);s&&e.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${s}; border-right: 1px solid ${s}; border-bottom: 1px solid ${s}; }`);const r=o.getColor(jh);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${tl(o.type)?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const a=o.getColor(JNe);a&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${a}; padding: 1px; box-sizing: border-box; }`);const l=o.getColor(QNe);l&&e.addRule(`.monaco-editor .findScope { border: 1px ${tl(o.type)?"dashed":"solid"} ${l}; }`);const d=o.getColor(st);d&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${d}; }`);const c=o.getColor(Xa);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const h=o.getColor(vNe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const g=o.getColor(BNe);if(g)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`);else{const b=o.getColor(Za);b&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${b}; }`)}const f=o.getColor(G9);f&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${f} !important;
		}
	`);const p=o.getColor(ro);p&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${p}; }`)});var WEe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ha=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},df=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},s$;const DWe=524288;function o$(o,e="single",t=!1){if(!o.hasModel())return null;const n=o.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=o.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(o.getModel().getValueLengthInRange(n)<DWe)return o.getModel().getValueInRange(n)}return null}u(o$,"getSelectionSearchString");var IT;let ds=s$=(IT=class extends G{get editor(){return this._editor}static get(e){return e.getContribution(s$.ID)}constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=Xd.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new Uo(500),this._state=this._register(new QK),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(s=>this._onStateChanged(s))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const s=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),s&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(40).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!h4.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=po(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return df(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;const n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){const i=o$(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=po(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const i=o$(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const i=this._editor.getSelections();i.some(s=>!s.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new JK(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return df(this,void 0,void 0,function*(){return this._editor.getOption(40).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(40).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},u(IT,"CommonFindController"),IT);ds.ID="editor.contrib.findController";ds=s$=WEe([Ha(1,Re),Ha(2,Rr),Ha(3,Sa)],ds);var NT;let r$=(NT=class extends ds{constructor(e,t,n,i,s,r,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=s,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return df(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(40).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new mR(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new pR(this._editor,this._state,this._keybindingService))}},u(NT,"FindController"),NT);r$=WEe([Ha(1,qd),Ha(2,Re),Ha(3,At),Ha(4,On),Ha(5,_n),Ha(6,Rr),Ha(7,Sa)],r$);const MWe=ZSe(new bM({id:Ot.StartFindAction,label:m("startFindAction","Find"),alias:"Find",precondition:ne.or(M.focus,ne.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"3_find",title:m({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));MWe.addImplementation(0,(o,e,t)=>{const n=ds.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(40).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(40).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(40).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(40).loop}):!1});const AWe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:m("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:m("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:m("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:m("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]},ope=class ope extends ye{constructor(){super({id:Ot.StartFindWithArgs,label:m("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:AWe})}run(e,t,n){return df(this,void 0,void 0,function*(){const i=ds.get(t);if(i){const s=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(40).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(40).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(40).loop},s),i.setGlobalBufferTerm(i.getState().searchString)}})}};u(ope,"StartFindWithArgsAction");let a$=ope;const rpe=class rpe extends ye{constructor(){super({id:Ot.StartFindWithSelection,label:m("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return df(this,void 0,void 0,function*(){const n=ds.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(40).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}};u(rpe,"StartFindWithSelectionAction");let l$=rpe;const ape=class ape extends ye{run(e,t){return df(this,void 0,void 0,function*(){const n=ds.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(40).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(40).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(40).loop}),this._run(n))})}};u(ape,"MatchFindAction");let bR=ape;const lpe=class lpe extends bR{constructor(){super({id:Ot.NextMatchFindAction,label:m("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:M.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:ne.and(M.focus,h4),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}};u(lpe,"NextMatchFindAction");let d$=lpe;const dpe=class dpe extends bR{constructor(){super({id:Ot.PreviousMatchFindAction,label:m("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:M.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:ne.and(M.focus,h4),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}};u(dpe,"PreviousMatchFindAction");let c$=dpe;const cpe=class cpe extends ye{constructor(){super({id:Ot.GoToMatchFindAction,label:m("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Xd}),this._highlightDecorations=[]}run(e,t,n){const i=ds.get(t);if(!i)return;const s=i.getState().matchesCount;if(s<1){e.get(_n).notify({severity:FO.Warning,message:m("findMatchAction.noResults","No matches. Try searching for something else.")});return}const a=e.get(xa).createInputBox();a.placeholder=m("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",s);const l=u(c=>{const h=parseInt(c);if(isNaN(h))return;const g=i.getState().matchesCount;if(h>0&&h<=g)return h-1;if(h<0&&h>=-g)return g+h},"toFindMatchIndex"),d=u(c=>{const h=l(c);if(typeof h=="number"){a.validationMessage=void 0,i.goToMatch(h);const g=i.getState().currentMatch;g&&this.addDecorations(t,g)}else a.validationMessage=m("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount),this.clearDecorations(t)},"updatePickerAndEditor");a.onDidChangeValue(c=>{d(c)}),a.onDidAccept(()=>{const c=l(a.value);typeof c=="number"?(i.goToMatch(c),a.hide()):a.validationMessage=m("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount)}),a.onDidHide(()=>{this.clearDecorations(t),a.dispose()}),a.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(n=>{this._highlightDecorations=n.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:ln(yxe),position:mo.Full}}}])})}};u(cpe,"MoveToMatchFindAction");let u$=cpe;const upe=class upe extends ye{run(e,t){return df(this,void 0,void 0,function*(){const n=ds.get(t);if(!n)return;const i=o$(t,"single",!1);i&&n.setSearchString(i),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(40).loop}),this._run(n))})}};u(upe,"SelectionMatchFindAction");let _R=upe;const hpe=class hpe extends _R{constructor(){super({id:Ot.NextSelectionMatchFindAction,label:m("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}};u(hpe,"NextSelectionMatchFindAction");let h$=hpe;const gpe=class gpe extends _R{constructor(){super({id:Ot.PreviousSelectionMatchFindAction,label:m("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}};u(gpe,"PreviousSelectionMatchFindAction");let g$=gpe;const IWe=ZSe(new bM({id:Ot.StartFindReplaceAction,label:m("startReplace","Replace"),alias:"Replace",precondition:ne.or(M.focus,ne.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:A.MenubarEditMenu,group:"3_find",title:m({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));IWe.addImplementation(0,(o,e,t)=>{if(!e.hasModel()||e.getOption(89))return!1;const n=ds.get(e);if(!n)return!1;const i=e.getSelection(),s=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(40).seedSearchStringFromSelection!=="never"&&!s,a=s||r?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(40).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(40).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(40).loop})});ft(ds.ID,r$,0);ae(a$);ae(l$);ae(d$);ae(c$);ae(u$);ae(h$);ae(g$);const Ta=hi.bindToContribution(ds.get);he(new Ta({id:Ot.CloseFindWidgetCommand,precondition:Xd,handler:o=>o.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:ne.and(M.focus,ne.not("isComposing")),primary:9,secondary:[1033]}}));he(new Ta({id:Ot.ToggleCaseSensitiveCommand,precondition:void 0,handler:o=>o.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:uk.primary,mac:uk.mac,win:uk.win,linux:uk.linux}}));he(new Ta({id:Ot.ToggleWholeWordCommand,precondition:void 0,handler:o=>o.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:hk.primary,mac:hk.mac,win:hk.win,linux:hk.linux}}));he(new Ta({id:Ot.ToggleRegexCommand,precondition:void 0,handler:o=>o.toggleRegex(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:gk.primary,mac:gk.mac,win:gk.win,linux:gk.linux}}));he(new Ta({id:Ot.ToggleSearchScopeCommand,precondition:void 0,handler:o=>o.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:fk.primary,mac:fk.mac,win:fk.win,linux:fk.linux}}));he(new Ta({id:Ot.TogglePreserveCaseCommand,precondition:void 0,handler:o=>o.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:pk.primary,mac:pk.mac,win:pk.win,linux:pk.linux}}));he(new Ta({id:Ot.ReplaceOneAction,precondition:Xd,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:3094}}));he(new Ta({id:Ot.ReplaceOneAction,precondition:Xd,handler:o=>o.replace(),kbOpts:{weight:100+5,kbExpr:ne.and(M.focus,KJ),primary:3}}));he(new Ta({id:Ot.ReplaceAllAction,precondition:Xd,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:2563}}));he(new Ta({id:Ot.ReplaceAllAction,precondition:Xd,handler:o=>o.replaceAll(),kbOpts:{weight:100+5,kbExpr:ne.and(M.focus,KJ),primary:void 0,mac:{primary:2051}}}));he(new Ta({id:Ot.SelectAllMatchesAction,precondition:Xd,handler:o=>o.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:M.focus,primary:515}}));const NWe={0:" ",1:"u",2:"r"},OCe=65535,ea=16777215,HCe=4278190080,fpe=class fpe{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,i=e%32,s=this._states[n];t?this._states[n]=s|1<<i:this._states[n]=s&~(1<<i)}};u(fpe,"BitField");let f0=fpe;const AF=class AF{constructor(e,t,n){if(e.length!==t.length||e.length>OCe)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new f0(e.length),this._userDefinedStates=new f0(e.length),this._recoveredStates=new f0(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=u((n,i)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){const s=this._startIndexes[n],r=this._endIndexes[n];if(s>ea||r>ea)throw new Error("startLineNumber or endLineNumber must not exceed "+ea);for(;e.length>0&&!t(s,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((a&255)<<24),this._endIndexes[n]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&ea}getEndLineNumber(e){return this._endIndexes[e]&ea}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new f$(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&HCe)>>>24)+((this._endIndexes[e]&HCe)>>>16);return t===OCe?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${NWe[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&ea,endLineNumber:this._endIndexes[e]&ea,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let s=[],r=!1;for(let l=0;l<t;l++){const d=e[l];n[l]=d.startLineNumber,i[l]=d.endLineNumber,s.push(d.type),d.type&&(r=!0)}r||(s=void 0);const a=new AF(n,i,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n){n=n??Number.MAX_VALUE;const i=u((b,_)=>Array.isArray(b)?v=>v<_?b[v]:void 0:v=>v<_?b.toFoldRange(v):void 0,"getIndexedFunction"),s=i(e,e.length),r=i(t,t.length);let a=0,l=0,d=s(0),c=r(0);const h=[];let g,f=0;const p=[];for(;d||c;){let b;if(c&&(!d||d.startLineNumber>=c.startLineNumber))d&&d.startLineNumber===c.startLineNumber?(c.source===1?b=c:(b=d,b.isCollapsed=c.isCollapsed&&d.endLineNumber===c.endLineNumber,b.source=0),d=s(++a)):(b=c,c.isCollapsed&&c.source===0&&(b.source=2)),c=r(++l);else{let _=l,v=c;for(;;){if(!v||v.startLineNumber>d.endLineNumber){b=d;break}if(v.source===1&&v.endLineNumber>d.endLineNumber)break;v=r(++_)}d=s(++a)}if(b){for(;g&&g.endLineNumber<b.startLineNumber;)g=h.pop();b.endLineNumber>b.startLineNumber&&b.startLineNumber>f&&b.endLineNumber<=n&&(!g||g.endLineNumber>=b.endLineNumber)&&(p.push(b),f=b.startLineNumber,g&&h.push(g),g=b)}}return p}};u(AF,"FoldingRegions");let to=AF;const ppe=class ppe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}};u(ppe,"FoldingRegion");let f$=ppe;const mpe=class mpe{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new V,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new to(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,s=-1,r=-1;const a=u(l=>{for(;i<l;){const d=this._regions.getEndLineNumber(i),c=this._regions.isCollapsed(i);if(d<=s){const h=this.regions.getSource(i)!==0;n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(c,d<=r,h))}c&&d>r&&(r=d),i++}},"updateDecorationsUntil");for(const l of e){const d=l.regionIndex,c=this._editorDecorationIds[d];if(c&&!t[c]){t[c]=!0,a(d);const h=!this._regions.isCollapsed(d);this._regions.setCollapsed(d,h),s=Math.max(s,this._regions.getEndLineNumber(d))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=u(i=>{for(const s of e)if(!(s.startLineNumber>i.endLineNumber||i.startLineNumber>s.endLineNumber))return!0;return!1},"intersects");for(let i=0;i<this._regions.length;i++){const s=this._regions.toFoldRange(i);(s.source===0||!n(s))&&t.push(s)}this.updatePost(to.fromFoldRanges(t))}update(e,t=[]){const n=this._currentFoldedOrManualRanges(t),i=to.sanitizeAndMerge(e,n,this._textModel.getLineCount());this.updatePost(to.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,s=e.length;i<s;i++){const r=e.getStartLineNumber(i),a=e.getEndLineNumber(i),l=e.isCollapsed(i),d=e.getSource(i)!==0,c={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:c,options:this._decorationProvider.getDecorationOption(l,a<=n,d)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(i=>this._editorDecorationIds=i.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=u((i,s)=>{for(const r of e)if(i<r&&r<=s)return!0;return!1},"isBlocked"),n=[];for(let i=0,s=this._regions.length;i<s;i++){let r=this.regions.isCollapsed(i);const a=this.regions.getSource(i);if(r||a!==0){const l=this._regions.toFoldRange(i),d=this._textModel.getDecorationRange(this._editorDecorationIds[i]);d&&(r&&t(d.startLineNumber,d.endLineNumber)&&(r=!1),n.push({startLineNumber:d.startLineNumber,endLineNumber:d.endLineNumber,type:l.type,isCollapsed:r,source:a}))}}return n}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>n)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,n;if(!Array.isArray(e))return;const i=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&i.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(n=a.source)!==null&&n!==void 0?n:0})}const r=to.sanitizeAndMerge(this._regions,i,s);this.updatePost(to.fromFoldRanges(r))}_getLinesChecksum(e,t){return TSe(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),s=1;for(;i>=0;){const r=this._regions.toRegion(i);(!t||t(r,s))&&n.push(r),s++,i=r.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=i,l=this._regions.length;a<l;a++){const d=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;r.length>0&&!d.containedBy(r[r.length-1]);)r.pop();r.push(d),t(d,r.length)&&n.push(d)}else break}}else for(let r=i,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<s)(!t||t(l))&&n.push(l);else break}return n}};u(mpe,"FoldingModel");let p$=mpe;function BEe(o,e,t){const n=[];for(const i of t){const s=o.getRegionAtLine(i);if(s){const r=!s.isCollapsed;if(n.push(s),e>1){const a=o.getRegionsInside(s,(l,d)=>l.isCollapsed!==r&&d<e);n.push(...a)}}}o.toggleCollapseState(n)}u(BEe,"toggleCollapseState");function k_(o,e,t=Number.MAX_VALUE,n){const i=[];if(n&&n.length>0)for(const s of n){const r=o.getRegionAtLine(s);if(r&&(r.isCollapsed!==e&&i.push(r),t>1)){const a=o.getRegionsInside(r,(l,d)=>l.isCollapsed!==e&&d<t);i.push(...a)}}else{const s=o.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);i.push(...s)}o.toggleCollapseState(i)}u(k_,"setCollapseStateLevelsDown");function UEe(o,e,t,n){const i=[];for(const s of n){const r=o.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...r)}o.toggleCollapseState(i)}u(UEe,"setCollapseStateLevelsUp");function RWe(o,e,t){const n=[];for(const i of t){const s=o.getAllRegionsAtLine(i,r=>r.isCollapsed!==e);s.length>0&&n.push(s[0])}o.toggleCollapseState(n)}u(RWe,"setCollapseStateUp");function PWe(o,e,t,n){const i=u((r,a)=>a===e&&r.isCollapsed!==t&&!n.some(l=>r.containsLine(l)),"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(PWe,"setCollapseStateAtLevel");function zEe(o,e,t){const n=[];for(const r of t){const a=o.getAllRegionsAtLine(r,void 0);a.length>0&&n.push(a[0])}const i=u(r=>n.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,"filter"),s=o.getRegionsInside(null,i);o.toggleCollapseState(s)}u(zEe,"setCollapseStateForRest");function YJ(o,e,t){const n=o.textModel,i=o.regions,s=[];for(let r=i.length-1;r>=0;r--)if(t!==i.isCollapsed(r)){const a=i.getStartLineNumber(r);e.test(n.getLineContent(a))&&s.push(i.toRegion(r))}o.toggleCollapseState(s)}u(YJ,"setCollapseStateForMatchingLines");function XJ(o,e,t){const n=o.regions,i=[];for(let s=n.length-1;s>=0;s--)t!==n.isCollapsed(s)&&e===n.getType(s)&&i.push(n.toRegion(s));o.toggleCollapseState(i)}u(XJ,"setCollapseStateForType");function FWe(o,e){let t=null;const n=e.getRegionAtLine(o);if(n!==null&&(t=n.startLineNumber,o===t)){const i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}u(FWe,"getParentFoldLine");function OWe(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){if(o!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<o)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}u(OWe,"getPreviousFoldLine");function HWe(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){const n=t.parentIndex;let i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>o)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}u(HWe,"getNextFoldLine");const bpe=class bpe{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new V,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||xu(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,s=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,d=a.getEndLineNumber(n);s<=l&&d<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===d?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new L(l,1,d,1))),s=l,r=d)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return VCe(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const s=u(r=>((!i||!VWe(r,i))&&(i=VCe(this._hiddenRanges,r)),i?i.startLineNumber-1:null),"adjustLine");for(let r=0,a=e.length;r<a;r++){let l=e[r];const d=s(l.startLineNumber);d&&(l=l.setStartPosition(d,n.getLineMaxColumn(d)),t=!0);const c=s(l.endLineNumber);c&&(l=l.setEndPosition(c,n.getLineMaxColumn(c)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}};u(bpe,"HiddenRangeModel");let m$=bpe;function VWe(o,e){return o>=e.startLineNumber&&o<=e.endLineNumber}u(VWe,"isInside");function VCe(o,e){const t=w1e(o,n=>e<n.startLineNumber)-1;return t>=0&&o[t].endLineNumber>=e?o[t]:null}u(VCe,"findRange");const WWe=5e3,BWe="indent",_pe=class _pe{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id=BWe}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(GWe(this.editorModel,n,i,this.foldingRangesLimit))}};u(_pe,"IndentRangeProvider");let VC=_pe;var RT;let UWe=(RT=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>ea||t>ea)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)n[r]=this._startIndexes[s],i[r]=this._endIndexes[s];return new to(n,i)}else{this._foldingRangesLimit.update(this._length,t);let n=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const d=this._indentOccurrences[l];if(d){if(d+n>t){i=l;break}n+=d}}const s=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,d=0;l>=0;l--){const c=this._startIndexes[l],h=e.getLineContent(c),g=NO(h,s);(g<i||g===i&&n++<t)&&(r[d]=c,a[d]=this._endIndexes[l],d++)}return new to(r,a)}}},u(RT,"RangesCollector"),RT);const zWe={limit:WWe,update:()=>{}};function GWe(o,e,t,n=zWe){const i=o.getOptions().tabSize,s=new UWe(n);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=o.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let d=o.getLineCount();d>0;d--){const c=o.getLineContent(d),h=NO(c,i);let g=a[a.length-1];if(h===-1){e&&(g.endAbove=d);continue}let f;if(r&&(f=c.match(r)))if(f[1]){let p=a.length-1;for(;p>0&&a[p].indent!==-2;)p--;if(p>0){a.length=p+1,g=a[p],s.insertFirst(d,g.line,h),g.line=d,g.indent=h,g.endAbove=d;continue}}else{a.push({indent:-2,endAbove:d,line:d});continue}if(g.indent>h){do a.pop(),g=a[a.length-1];while(g.indent>h);const p=g.endAbove-1;p-d>=1&&s.insertFirst(d,p,h)}g.indent===h?g.endAbove=d:a.push({indent:h,endAbove:d,line:d})}return s.toIndentRanges(o)}u(GWe,"computeRanges");const jWe=I("editor.foldBackground",{light:ke(Oc,.3),dark:ke(Oc,.3),hcDark:null,hcLight:null},m("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);I("editorGutter.foldingControlForeground",{dark:Fc,light:Fc,hcDark:Fc,hcLight:Fc},m("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const g4=Yt("folding-expanded",ue.chevronDown,m("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),f4=Yt("folding-collapsed",ue.chevronRight,m("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),GEe=Yt("folding-manual-collapsed",f4,m("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),jEe=Yt("folding-manual-expanded",g4,m("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),ZJ={color:ln(jWe),position:ho.Inline},Is=class Is{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t?Is.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?Is.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:Is.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:Is.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?n?this.showFoldingHighlights?Is.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Is.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?Is.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Is.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?Is.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Is.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?Is.MANUALLY_EXPANDED_VISUAL_DECORATION:Is.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};u(Is,"FoldingDecorationProvider");let js=Is;js.COLLAPSED_VISUAL_DECORATION=Fe.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(f4)});js.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Fe.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ZJ,isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(f4)});js.MANUALLY_COLLAPSED_VISUAL_DECORATION=Fe.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(GEe)});js.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Fe.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ZJ,isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(GEe)});js.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Fe.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0});js.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Fe.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ZJ,isWholeLine:!0});js.EXPANDED_VISUAL_DECORATION=Fe.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Te.asClassName(g4)});js.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Fe.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(g4)});js.MANUALLY_EXPANDED_VISUAL_DECORATION=Fe.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Te.asClassName(jEe)});js.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Fe.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Te.asClassName(jEe)});js.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Fe.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});js.HIDDEN_RANGE_DECORATION=Fe.register({description:"folding-hidden-range-decoration",stickiness:1});const KWe={},$We="syntax",vpe=class vpe{constructor(e,t,n,i,s){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=i,this.fallbackRangeProvider=s,this.id=$We,this.disposables=new ie,s&&this.disposables.add(s);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(n))}compute(e){return qWe(this.providers,this.editorModel,e).then(t=>{var n,i;return t?YWe(t,this.foldingRangesLimit):(i=(n=this.fallbackRangeProvider)===null||n===void 0?void 0:n.compute(e))!==null&&i!==void 0?i:null})}dispose(){this.disposables.dispose()}};u(vpe,"SyntaxRangeProvider");let WC=vpe;function qWe(o,e,t){let n=null;const i=o.map((s,r)=>Promise.resolve(s.provideFoldingRanges(e,KWe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const d of a)d.start>0&&d.end>d.start&&d.end<=l&&n.push({start:d.start,end:d.end,rank:r,kind:d.kind})}},Ln));return Promise.all(i).then(s=>n)}u(qWe,"collectSyntaxRanges");const ype=class ype{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>ea||t>ea)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=i,this._types[s]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new to(t,n,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){n=a;break}t+=l}}const i=new Uint32Array(e),s=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const d=this._nestingLevels[a];(d<n||d===n&&t++<e)&&(i[l]=this._startIndexes[a],s[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new to(i,s,r)}}};u(ype,"RangesCollector");let b$=ype;function YWe(o,e){const t=o.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),n=new b$(e);let i;const s=[];for(const r of t)if(!i)i=r,n.add(r.start,r.end,r.kind&&r.kind.value,s.length);else if(r.start>i.start)if(r.end<=i.end)s.push(i),i=r,n.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>i.end){do i=s.pop();while(i&&r.start>i.end);i&&s.push(i),i=r}n.add(r.start,r.end,r.kind&&r.kind.value,s.length)}return n.toIndentRanges()}u(YWe,"sanitizeRanges");var XWe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ZWe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},sp;const Vi=new _e("foldingEnabled",!1);var PT;let Sl=sp=(PT=class extends G{static get(e){return e.getContribution(sp.ID)}static getFoldingRangeProviders(e,t){var n,i;const s=e.foldingRangeProvider.ordered(t);return(i=(n=sp._foldingRangeSelector)===null||n===void 0?void 0:n.call(sp,s,t))!==null&&i!==void 0?i:s}constructor(e,t,n,i,s,r){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=r,this.localToDispose=this._register(new ie),this.editor=e,this._foldingLimitReporter=new vR(e);const a=this.editor.getOptions();this._isEnabled=a.get(42),this._useFoldingProviders=a.get(43)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(47),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(45),this.updateDebounceInfo=s.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new js(e),this.foldingDecorationProvider.showFoldingControls=a.get(108),this.foldingDecorationProvider.showFoldingHighlights=a.get(44),this.foldingEnabled=Vi.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(42)&&(this._isEnabled=this.editor.getOptions().get(42),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(46)&&this.onModelChanged(),l.hasChanged(108)||l.hasChanged(44)){const d=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=d.get(108),this.foldingDecorationProvider.showFoldingHighlights=d.get(44),this.triggerFoldingModelChanged()}l.hasChanged(43)&&(this._useFoldingProviders=this.editor.getOptions().get(43)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(47)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(47)),l.hasChanged(45)&&(this._foldingImportsByDefault=this.editor.getOptions().get(45))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new p$(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new m$(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Uo(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new Et(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,n;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(n=this.rangeProvider)===null||n===void 0||n.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new VC(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const n=sp.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new WC(e,n,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new Fi,n=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=Fn(s=>n.compute(s));return i.then(s=>{if(s&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=s.setCollapsedAllOfType(fo.Imports.value,!0);c&&(r=ba.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections(),l=a?a.map(c=>c.startLineNumber):[];e.update(s,l),r?.restore(this.editor);const d=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=d)}return e})}).then(void 0,e=>(Be(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const i=[];for(const s of n){const r=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&i.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,Be)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,s=e.target.element.offsetLeft;if(i.offsetX-s<4)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==n)return;if(i){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(n))return}const r=t.getRegionAtLine(n);if(r&&r.startLineNumber===n){const a=r.isCollapsed;if(i||a){const l=e.event.altKey;let d=[];if(l){const c=u(g=>!g.containedBy(r)&&!r.containedBy(g),"filter"),h=t.getRegionsInside(null,c);for(const g of h)g.isCollapsed&&d.push(g);d.length===0&&(d=h)}else{const c=e.event.middleButton||e.event.shiftKey;if(c)for(const h of t.getRegionsInside(r))h.isCollapsed===a&&d.push(h);(a||!c||d.length===0)&&d.push(r)}t.toggleCollapseState(d),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},u(PT,"FoldingController"),PT);Sl.ID="editor.contrib.folding";Sl=sp=XWe([tv(1,Re),tv(2,Pt),tv(3,_n),tv(4,Jo),tv(5,we)],Sl);const wpe=class wpe{constructor(e){this.editor=e,this._onDidChange=new V,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(46)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}};u(wpe,"RangesLimitReporter");let vR=wpe;const Cpe=class Cpe extends ye{runEditorCommand(e,t,n){const i=e.get(Pt),s=Sl.get(t);if(!s)return;const r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(s,a,t,n,i);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}};u(Cpe,"FoldingAction");let Ti=Cpe;function KEe(o){if(!Vs(o)){if(!ss(o))return!1;const e=o;if(!Vs(e.levels)&&!cu(e.levels)||!Vs(e.direction)&&!rs(e.direction)||!Vs(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(cu)))return!1}return!0}u(KEe,"foldingArgumentsConstraint");const Spe=class Spe extends Ti{constructor(){super({id:"editor.unfold",label:m("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:KEe,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&i.direction==="up"?UEe(t,!1,s,r):k_(t,!1,s,r)}};u(Spe,"UnfoldAction");let _$=Spe;const xpe=class xpe extends Ti{constructor(){super({id:"editor.unfoldRecursively",label:m("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2142),weight:100}})}invoke(e,t,n,i){k_(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}};u(xpe,"UnFoldRecursivelyAction");let v$=xpe;const Tpe=class Tpe extends Ti{constructor(){super({id:"editor.fold",label:m("foldAction.label","Fold"),alias:"Fold",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:KEe,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const s=this.getLineNumbers(i,n),r=i&&i.levels,a=i&&i.direction;typeof r!="number"&&typeof a!="string"?RWe(t,!0,s):a==="up"?UEe(t,!0,r||1,s):k_(t,!0,r||1,s)}};u(Tpe,"FoldAction");let y$=Tpe;const Lpe=class Lpe extends Ti{constructor(){super({id:"editor.toggleFold",label:m("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);BEe(t,1,i)}};u(Lpe,"ToggleFoldAction");let w$=Lpe;const Epe=class Epe extends Ti{constructor(){super({id:"editor.foldRecursively",label:m("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2140),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);k_(t,!0,Number.MAX_VALUE,i)}};u(Epe,"FoldRecursivelyAction");let C$=Epe;const kpe=class kpe extends Ti{constructor(){super({id:"editor.foldAllBlockComments",label:m("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2138),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())XJ(t,fo.Comment.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+po(a.blockCommentStartToken));YJ(t,l,!0)}}}};u(kpe,"FoldAllBlockCommentsAction");let S$=kpe;const Dpe=class Dpe extends Ti{constructor(){super({id:"editor.foldAllMarkerRegions",label:m("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2077),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())XJ(t,fo.Region.value,!0);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);YJ(t,l,!0)}}}};u(Dpe,"FoldAllRegionsAction");let x$=Dpe;const Mpe=class Mpe extends Ti{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:m("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2078),weight:100}})}invoke(e,t,n,i,s){if(t.regions.hasTypes())XJ(t,fo.Region.value,!1);else{const r=n.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);YJ(t,l,!1)}}}};u(Mpe,"UnfoldAllRegionsAction");let T$=Mpe;const Ape=class Ape extends Ti{constructor(){super({id:"editor.foldAllExcept",label:m("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2136),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);zEe(t,!0,i)}};u(Ape,"FoldAllExceptAction");let L$=Ape;const Ipe=class Ipe extends Ti{constructor(){super({id:"editor.unfoldAllExcept",label:m("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2134),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);zEe(t,!1,i)}};u(Ipe,"UnfoldAllExceptAction");let E$=Ipe;const Npe=class Npe extends Ti{constructor(){super({id:"editor.foldAll",label:m("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2069),weight:100}})}invoke(e,t,n){k_(t,!0)}};u(Npe,"FoldAllAction");let k$=Npe;const Rpe=class Rpe extends Ti{constructor(){super({id:"editor.unfoldAll",label:m("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2088),weight:100}})}invoke(e,t,n){k_(t,!1)}};u(Rpe,"UnfoldAllAction");let D$=Rpe;const IF=class IF extends Ti{getFoldingLevel(){return parseInt(this.id.substr(IF.ID_PREFIX.length))}invoke(e,t,n){PWe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}};u(IF,"FoldLevelAction");let cf=IF;cf.ID_PREFIX="editor.foldLevel";cf.ID=o=>cf.ID_PREFIX+o;const Ppe=class Ppe extends Ti{constructor(){super({id:"editor.gotoParentFold",label:m("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=FWe(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}};u(Ppe,"GotoParentFoldAction");let M$=Ppe;const Fpe=class Fpe extends Ti{constructor(){super({id:"editor.gotoPreviousFold",label:m("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=OWe(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}};u(Fpe,"GotoPreviousFoldAction");let A$=Fpe;const Ope=class Ope extends Ti{constructor(){super({id:"editor.gotoNextFold",label:m("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const s=HWe(i[0],t);s!==null&&n.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}};u(Ope,"GotoNextFoldAction");let I$=Ope;const Hpe=class Hpe extends Ti{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:m("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2135),weight:100}})}invoke(e,t,n){var i;const s=[],r=n.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,d)=>l.startLineNumber-d.startLineNumber);const a=to.sanitizeAndMerge(t.regions,s,(i=n.getModel())===null||i===void 0?void 0:i.getLineCount());t.updatePost(to.fromFoldRanges(a))}}}};u(Hpe,"FoldRangeFromSelectionAction");let N$=Hpe;const Vpe=class Vpe extends Ti{constructor(){super({id:"editor.removeManualFoldingRanges",label:m("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2137),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const s=[];for(const r of i){const{startLineNumber:a,endLineNumber:l}=r;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}};u(Vpe,"RemoveFoldRangeFromSelectionAction");let R$=Vpe;ft(Sl.ID,Sl,0);ae(_$);ae(v$);ae(y$);ae(C$);ae(k$);ae(D$);ae(S$);ae(x$);ae(T$);ae(L$);ae(E$);ae(w$);ae(M$);ae(A$);ae(I$);ae(N$);ae(R$);for(let o=1;o<=7;o++)rNe(new cf({id:cf.ID(o),label:m("foldLevelAction.label","Fold Level {0}",o),alias:`Fold Level ${o}`,precondition:Vi,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2048|21+o),weight:100}}));lt.registerCommand("_executeFoldingRangeProvider",function(o,...e){return ZWe(this,void 0,void 0,function*(){const[t]=e;if(!(t instanceof Ae))throw Ho();const n=o.get(we),i=o.get(Xt).getModel(t);if(!i)throw Ho();const s=o.get(at);if(!s.getValue("editor.folding",{resource:t}))return[];const r=o.get(Pt),a=s.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return s.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,p)=>{}},d=new VC(i,r,l);let c=d;if(a!=="indentation"){const f=Sl.getFoldingRangeProviders(n,i);f.length&&(c=new WC(i,f,()=>{},l,d))}const h=yield c.compute(Ze.None),g=[];try{if(h)for(let f=0;f<h.length;f++){const p=h.getType(f);g.push({start:h.getStartLineNumber(f),end:h.getEndLineNumber(f),kind:p?fo.fromValue(p):void 0})}return g}finally{c.dispose()}})});const Wpe=class Wpe extends ye{constructor(){super({id:"editor.action.fontZoomIn",label:m("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){No.setZoomLevel(No.getZoomLevel()+1)}};u(Wpe,"EditorFontZoomIn");let P$=Wpe;const Bpe=class Bpe extends ye{constructor(){super({id:"editor.action.fontZoomOut",label:m("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){No.setZoomLevel(No.getZoomLevel()-1)}};u(Bpe,"EditorFontZoomOut");let F$=Bpe;const Upe=class Upe extends ye{constructor(){super({id:"editor.action.fontZoomReset",label:m("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){No.setZoomLevel(0)}};u(Upe,"EditorFontZoomReset");let O$=Upe;ae(P$);ae(F$);ae(O$);var $Ee=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yR=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},JJ=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},FT;let BC=(FT=class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new ie,this._sessionDisposables=new ie,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(55)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(55)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new ab;for(const i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{const s=i.charCodeAt(i.length-1);n.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new En,s=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){i.cancel(),s.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),s.dispose();return}});uLe(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(r=>{i.token.isCancellationRequested||Ri(r)&&(SC.execute(this._editor,r,!0),LJ(r))}).finally(()=>{s.dispose()})}},u(FT,"FormatOnType"),FT);BC.ID="editor.contrib.autoFormat";BC=$Ee([yR(1,we),yR(2,Nr)],BC);var OT;let UC=(OT=class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new ie,this._callOnModel=new ie,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(54)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(cLe,this.editor,e,2,Bd.None,Ze.None).catch(Be))}},u(OT,"FormatOnPaste"),OT);UC.ID="editor.contrib.formatOnPaste";UC=$Ee([yR(1,we),yR(2,Pe)],UC);const zpe=class zpe extends ye{constructor(){super({id:"editor.action.formatDocument",label:m("formatDocument.label","Format Document"),alias:"Format Document",precondition:ne.and(M.notInCompositeEditor,M.writable,M.hasDocumentFormattingProvider),kbOpts:{kbExpr:M.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return JJ(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Pe);yield e.get(Il).showWhile(n.invokeFunction(y3e,t,1,Bd.None,Ze.None),250)}})}};u(zpe,"FormatDocumentAction");let H$=zpe;const Gpe=class Gpe extends ye{constructor(){super({id:"editor.action.formatSelection",label:m("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:ne.and(M.writable,M.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2084),weight:100},contextMenuOpts:{when:M.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return JJ(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Pe),i=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new L(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Il).showWhile(n.invokeFunction(cLe,t,s,1,Bd.None,Ze.None),250)})}};u(Gpe,"FormatSelectionAction");let V$=Gpe;ft(BC.ID,BC,2);ft(UC.ID,UC,2);ae(H$);ae(V$);lt.registerCommand("editor.action.format",o=>JJ(void 0,void 0,void 0,function*(){const e=o.get(gt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=o.get(un);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var JWe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},QWe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const jpe=class jpe{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let s=0;t.children.get(i)!==void 0;s++)i=`${n}_${s}`;return i}static empty(e){return e.children.size===0}};u(jpe,"TreeElement");let jc=jpe;const Kpe=class Kpe extends jc{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}};u(Kpe,"OutlineElement");let zC=Kpe;const $pe=class $pe extends jc{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}};u($pe,"OutlineGroup");let wR=$pe;const Ql=class Ql extends jc{static create(e,t,n){const i=new En(n),s=new Ql(t.uri),r=e.ordered(t),a=r.map((d,c)=>{var h;const g=jc.findId(`provider_${c}`,s),f=new wR(g,s,(h=d.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",c);return Promise.resolve(d.provideDocumentSymbols(t,i.token)).then(p=>{for(const b of p||[])Ql._makeOutlineElement(b,f);return f},p=>(Ln(p),f)).then(p=>{jc.empty(p)?p.remove():s._groups.set(g,p)})}),l=e.onDidChange(()=>{const d=e.ordered(t);jn(d,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?Ql.create(e,t,n):s._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const n=jc.findId(e,t),i=new zC(n,t,e);if(e.children)for(const s of e.children)Ql._makeOutlineElement(s,i);t.children.set(i.id,i)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=et.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof zC?e.push(t.symbol):e.push(...et.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Ql._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>W.compare(L.getStartPosition(n.range),L.getStartPosition(i.range))||W.compare(L.getEndPosition(i.range),L.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&Ql._flattenDocumentSymbols(e,i.children,i.name)}};u(Ql,"OutlineModel");let CR=Ql;const p4=nt("IOutlineModelService");var HT;let W$=(HT=class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new ie,this._cache=new pl(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return QWe(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!jn(s.provider,i)){const a=new En;s={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:CR.create(n,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(d=>{s.model=d,this._debounceInformation.update(e,Date.now()-l)}).catch(d=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return yield s.promise}finally{r.dispose()}})}},u(HT,"OutlineModelService"),HT);W$=JWe([qH(0,we),qH(1,Jo),qH(2,Xt)],W$);ct(p4,W$,1);var e8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};lt.registerCommand("_executeDocumentSymbolProvider",function(o,...e){return e8e(this,void 0,void 0,function*(){const[t]=e;Lt(Ae.isUri(t));const n=o.get(p4),s=yield o.get(Ds).createModelReference(t);try{return(yield n.getOrCreate(s.object.textEditorModel,Ze.None)).getTopLevelSymbols()}finally{s.dispose()}})});const Wh=class Wh extends G{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=Wh.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Wh.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Wh.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=Wh.suppressSuggestions.bindTo(this.contextKeyService),this._register(Rt(n=>{const i=this.model.read(n),s=i?.state.read(n),r=!!s?.inlineCompletion&&s?.ghostText!==void 0&&!s?.ghostText.isEmpty();this.inlineCompletionVisible.set(r),s?.ghostText&&s?.inlineCompletion&&this.suppressSuggestions.set(s.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Rt(n=>{const i=this.model.read(n);let s=!1,r=!0;const a=i?.ghostText.read(n);if(i?.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:d}=a.parts[0],c=d[0],h=i.textModel.getLineIndentColumn(a.lineNumber);if(l<=h){let f=$i(c);f===-1&&(f=c.length-1),s=f>0;const p=i.textModel.getOptions().tabSize;r=Rn.visibleColumnFromColumn(c,f+1,p)<p}}this.inlineCompletionSuggestsIndentation.set(s),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}};u(Wh,"InlineCompletionContextKeys");let Pi=Wh;Pi.inlineSuggestionVisible=new _e("inlineSuggestionVisible",!1,m("inlineSuggestionVisible","Whether an inline suggestion is visible"));Pi.inlineSuggestionHasIndentation=new _e("inlineSuggestionHasIndentation",!1,m("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Pi.inlineSuggestionHasIndentationLessThanTabSize=new _e("inlineSuggestionHasIndentationLessThanTabSize",!0,m("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Pi.suppressSuggestions=new _e("inlineSuggestionSuppressSuggestions",void 0,m("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));function t8e(o,e){const t=new B$(o),n=e.map(i=>{const s=L.lift(i.range);return{startOffset:t.getOffset(s.getStartPosition()),endOffset:t.getOffset(s.getEndPosition()),text:i.text}});n.sort((i,s)=>s.startOffset-i.startOffset);for(const i of n)o=o.substring(0,i.startOffset)+i.text+o.substring(i.endOffset);return o}u(t8e,"applyEdits");const qpe=class qpe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}};u(qpe,"PositionOffsetTransformer");let B$=qpe;const n8e=[];function i8e(){return n8e}u(i8e,"getReadonlyEmptyArray");const Ype=class Ype{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new An(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new L(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}};u(Ype,"ColumnRange");let U$=Ype;function s8e(o,e){const t=new ie,n=o.createDecorationsCollection();return t.add(wJ({debugName:()=>`Apply decorations from ${e.debugName}`},i=>{const s=e.read(i);n.set(s)})),t.add({dispose:()=>{n.clear()}}),t}u(s8e,"applyObservableDecorations");function z$(o,e){return new W(o.lineNumber+e.lineNumber-1,e.lineNumber===1?o.column+e.column-1:e.column)}u(z$,"addPositions");function G$(o){let e=1,t=1;for(const n of o)n===`
`?(e++,t=1):t++;return new W(e,t)}u(G$,"lengthOfText");const Xpe=class Xpe{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,n)=>t.equals(e.parts[n]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return t8e(n,this.parts.map(s=>({range:{startLineNumber:1,endLineNumber:1,startColumn:s.column,endColumn:s.column},text:s.lines.join(`
`)}))).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}};u(Xpe,"GhostText");let t_=Xpe;const Zpe=class Zpe{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,n)=>t===e.lines[n])}};u(Zpe,"GhostTextPart");let GC=Zpe;const Jpe=class Jpe{constructor(e,t,n,i=0){this.lineNumber=e,this.columnRange=t,this.newLines=n,this.additionalReservedLineCount=i,this.parts=[new GC(this.columnRange.endColumnExclusive,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,n)=>t===e.newLines[n])&&this.additionalReservedLineCount===e.additionalReservedLineCount}};u(Jpe,"GhostTextReplacement");let jC=Jpe;function WCe(o,e){return o===e?!0:!o||!e?!1:o instanceof t_&&e instanceof t_||o instanceof jC&&e instanceof jC?o.equals(e):!1}u(WCe,"ghostTextOrReplacementEquals");var o8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},r8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},VT;let j$=(VT=class extends G{constructor(e,t,n){super(),this.editor=e,this.model=t,this.languageService=n,this.isDisposed=Vt("isDisposed",!1),this.currentTextModel=ci(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=dt(i=>{if(this.isDisposed.read(i))return;const s=this.currentTextModel.read(i);if(s!==this.model.targetTextModel.read(i))return;const r=this.model.ghostText.read(i);if(!r)return;const a=r instanceof jC?r.columnRange:void 0,l=[],d=[];function c(b,_){if(d.length>0){const v=d[d.length-1];_&&v.decorations.push(new _o(v.content.length+1,v.content.length+1+b[0].length,_,0)),v.content+=b[0],b=b.slice(1)}for(const v of b)d.push({content:v,decorations:_?[new _o(1,v.length+1,_,0)]:[]})}u(c,"addToAdditionalLines");const h=s.getLineContent(r.lineNumber);let g,f=0;for(const b of r.parts){let _=b.lines;g===void 0?(l.push({column:b.column,text:_[0],preview:b.preview}),_=_.slice(1)):c([h.substring(f,b.column-1)],void 0),_.length>0&&(c(_,"ghost-text"),g===void 0&&b.column<=h.length&&(g=b.column)),f=b.column-1}g!==void 0&&c([h.substring(f)],void 0);const p=g!==void 0?new U$(g,h.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:d,hiddenRange:p,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(i),targetTextModel:s}}),this.decorations=dt(i=>{const s=this.uiState.read(i);if(!s)return[];const r=[];s.replacedRange&&r.push({range:s.replacedRange.toRange(s.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),s.hiddenRange&&r.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of s.inlineTexts)r.push({range:L.fromPositions(new W(s.lineNumber,a.column)),options:{description:"ghost-text",after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:da.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new K$(this.editor,this.languageService.languageIdCodec,dt(i=>{const s=this.uiState.read(i);return s?{lineNumber:s.lineNumber,additionalLines:s.additionalLines,minReservedLineCount:s.additionalReservedLineCount,targetTextModel:s.targetTextModel}:void 0}))),this._register(He(()=>{this.isDisposed.set(!0,void 0)})),this._register(s8e(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}},u(VT,"GhostTextWidget"),VT);j$=o8e([r8e(2,Kt)],j$);const Qpe=class Qpe extends G{get viewZoneId(){return this._viewZoneId}constructor(e,t,n){super(),this.editor=e,this.languageIdCodec=t,this.lines=n,this._viewZoneId=void 0,this.editorOptionsChanged=io("editorOptionChanged",Ce.filter(this.editor.onDidChangeConfiguration,i=>i.hasChanged(32)||i.hasChanged(115)||i.hasChanged(97)||i.hasChanged(92)||i.hasChanged(50)||i.hasChanged(49)||i.hasChanged(65))),this._register(Rt(i=>{const s=this.lines.read(i);this.editorOptionsChanged.read(i),s?this.updateLines(s.lineNumber,s.additionalLines,s.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:s}=i.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");a8e(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}};u(Qpe,"AdditionalLinesWidget");let K$=Qpe;function a8e(o,e,t,n,i){const s=n.get(32),r=n.get(115),a="none",l=n.get(92),d=n.get(50),c=n.get(49),h=n.get(65),g=new Pd(1e4);g.appendString('<div class="suggest-preview-text">');for(let b=0,_=t.length;b<_;b++){const v=t[b],y=v.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(b*h)),g.appendString('px;width:1000000px;">');const w=ZL(y),C=tb(y),S=xi.createEmpty(y,i);y_(new Tr(c.isMonospace&&!s,c.canUseHalfwidthRightwardsArrow,y,!1,w,C,0,S,v.decorations,e,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,r,a,l,d!==Sr.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),Kn(o,c);const f=g.build(),p=BCe?BCe.createHTML(f):f;o.innerHTML=p}u(a8e,"renderLines");const BCe=Kd("editorGhostText",{createHTML:o=>o});function l8e(o,e){const t=new dA,n=new fA(t,d=>e.getLanguageConfiguration(d)),i=new gA(new $$([o]),n),s=PW(i,[],void 0,!0);let r="";const a=o.getLineContent();function l(d,c){if(d.kind===2)if(l(d.openingBracket,c),c=nn(c,d.openingBracket.length),d.child&&(l(d.child,c),c=nn(c,d.child.length)),d.closingBracket)l(d.closingBracket,c),c=nn(c,d.closingBracket.length);else{const g=n.getSingleLanguageBracketTokens(d.openingBracket.languageId).findClosingTokenText(d.openingBracket.bracketIds);r+=g}else if(d.kind!==3){if(d.kind===0||d.kind===1)r+=a.substring(c,nn(c,d.length));else if(d.kind===4)for(const h of d.children)l(h,c),c=nn(c,h.length)}}return u(l,"processNode"),l(s,os),r}u(l8e,"fixBracketsInLine");const eme=class eme{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}};u(eme,"StaticTokenizerSource");let $$=eme;const ar=class ar{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),i;if(i=ar._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(ar.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(ar.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(ar.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(ar.isVariableCharacter(n)||ar.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof ar._table[n]>"u"&&!ar.isDigitCharacter(n)&&!ar.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}};u(ar,"Scanner");let SR=ar;SR._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};const tme=class tme{constructor(){this._children=[]}appendChild(e){return e instanceof is&&this._children[this._children.length-1]instanceof is?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),s=n.children.slice(0);s.splice(i,1,...t),n._children=s,u(function r(a,l){for(const d of a)d.parent=l,r(d.children,d)},"_fixParent")(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof $C)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}};u(tme,"Marker");let Ou=tme;const NF=class NF extends Ou{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new NF(this.value)}};u(NF,"Text");let is=NF;const nme=class nme extends Ou{};u(nme,"TransformableMarker");let xR=nme;const RF=class RF extends xR{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof n_?this._children[0]:void 0}clone(){const e=new RF(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}};u(RF,"Placeholder");let Io=RF;const PF=class PF extends Ou{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof is&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new PF;return this.options.forEach(e.appendChild,e),e}};u(PF,"Choice");let n_=PF;const FF=class FF extends Ou{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(s=>s instanceof ta&&!!s.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof ta){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){const e=new FF;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}};u(FF,"Transform");let q$=FF;const OF=class OF extends Ou{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new OF(this.index,this.shorthandName,this.ifValue,this.elseValue)}};u(OF,"FormatString");let ta=OF;const HF=class HF extends xR{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new is(t)],!0):!1}clone(){const e=new HF(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}};u(HF,"Variable");let KC=HF;function UCe(o,e){const t=[...o];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}u(UCe,"walk");const VF=class VF extends Ou{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof Io&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return UCe([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof Io&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof KC&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new VF;return this._children=this.children.map(t=>t.clone()),e}walk(e){UCe(this.children,e)}};u(VF,"TextmateSnippet");let $C=VF;const ime=class ime{constructor(){this._scanner=new SR,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const i=new $C;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const i=new Map,s=[];t.walk(l=>(l instanceof Io&&(l.isFinalTabstop?i.set(0,void 0):!i.has(l.index)&&l.children.length>0?i.set(l.index,l.children):s.push(l)),!0));const r=u((l,d)=>{const c=i.get(l.index);if(!c)return;const h=new Io(l.index);h.transform=l.transform;for(const g of c){const f=g.clone();h.appendChild(f),f instanceof Io&&i.has(f.index)&&!d.has(f.index)&&(d.add(f.index),r(f,d),d.delete(f.index))}t.replace(l,[h])},"fillInIncompletePlaceholder"),a=new Set;for(const l of s)r(l,a);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new Io(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new is(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Io(Number(t)):new KC(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const s=new Io(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new is("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const r=new n_;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(r),this._accept(4)))return e.appendChild(s),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new is(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const s=new KC(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new is("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(n)}_parseTransform(e){const t=new q$;let n="",i="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,n+=s;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new is(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new ta(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new ta(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new ta(Number(i),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new ta(Number(i),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new ta(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const r=this._until(4);if(r)return e.appendChild(new ta(Number(i),void 0,s,r)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new ta(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new is(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};u(ime,"SnippetParser");let Hu=ime;var YH=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function d8e(o,e,t,n,i=Ze.None,s){return YH(this,void 0,void 0,function*(){const r=c8e(e,t),a=o.all(t),l=new rw;for(const v of a)v.groupId&&l.add(v.groupId,v);function d(v){if(!v.yieldsToGroupIds)return[];const y=[];for(const w of v.yieldsToGroupIds||[]){const C=l.get(w);for(const S of C)y.push(S)}return y}u(d,"getPreferredProviders");const c=new Map,h=new Set;function g(v,y){if(y=[...y,v],h.has(v))return y;h.add(v);try{const w=d(v);for(const C of w){const S=g(C,y);if(S)return S}}finally{h.delete(v)}}u(g,"findPreferredProviderCircle");function f(v){const y=c.get(v);if(y)return y;const w=g(v,[]);w&&Ln(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${w.map(S=>S.toString?S.toString():""+S).join(" -> ")}`));const C=new sb;return c.set(v,C.p),(()=>YH(this,void 0,void 0,function*(){if(!w){const S=d(v);for(const k of S){const T=yield f(k);if(T&&T.items.length>0)return}}try{return yield v.provideInlineCompletions(t,e,n,i)}catch(S){Ln(S);return}}))().then(S=>C.complete(S),S=>C.error(S)),C.p}u(f,"processProvider");const p=yield Promise.all(a.map(v=>YH(this,void 0,void 0,function*(){return{provider:v,completions:yield f(v)}}))),b=new Map,_=[];for(const v of p){const y=v.completions;if(!y)continue;const w=new X$(y,v.provider);_.push(w);for(const C of y.items){const S=Z$.from(C,w,r,t,s);b.set(S.hash(),S)}}return new Y$(Array.from(b.values()),new Set(b.keys()),_)})}u(d8e,"provideInlineCompletions");const sme=class sme{constructor(e,t,n){this.completions=e,this.hashs=t,this.providerResults=n}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}};u(sme,"InlineCompletionProviderResult");let Y$=sme;const ome=class ome{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}};u(ome,"InlineCompletionList");let X$=ome;const Ly=class Ly{static from(e,t,n,i,s){let r,a,l=e.range?L.lift(e.range):n;if(typeof e.insertText=="string"){if(r=e.insertText,s&&e.completeBracketPairs){r=zCe(r,l.getStartPosition(),i,s);const d=r.length-e.insertText.length;d!==0&&(l=new L(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+d))}a=void 0}else if("snippet"in e.insertText){const d=e.insertText.snippet.length;if(s&&e.completeBracketPairs){e.insertText.snippet=zCe(e.insertText.snippet,l.getStartPosition(),i,s);const h=e.insertText.snippet.length-d;h!==0&&(l=new L(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+h))}const c=new Hu().parse(e.insertText.snippet);c.children.length===1&&c.children[0]instanceof is?(r=c.children[0].value,a=void 0):(r=c.toString(),a={snippet:e.insertText.snippet,range:l})}else yO(e.insertText);return new Ly(r,e.command,l,r,a,e.additionalTextEdits||i8e(),e,t)}constructor(e,t,n,i,s,r,a,l){this.filterText=e,this.command=t,this.range=n,this.insertText=i,this.snippetInfo=s,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),i=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new Ly(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}};u(Ly,"InlineCompletionItem");let Z$=Ly;function c8e(o,e){const t=e.getWordAtPosition(o),n=e.getLineMaxColumn(o.lineNumber);return t?new L(o.lineNumber,t.startColumn,o.lineNumber,n):L.fromPositions(o,o.with(void 0,n))}u(c8e,"getDefaultRange");function zCe(o,e,t,n){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+o,r=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),o),a=r?.sliceAndInflate(e.column-1,s.length,0);return a?l8e(a,n):o}u(zCe,"closeBrackets");const Ey=class Ey{constructor(e,t){this.range=e,this.text=t}removeCommonPrefix(e,t){const n=t?this.range.intersectRanges(t):this.range;if(!n)return this;const i=e.getValueInRange(n,1),s=xg(i,this.text),r=z$(this.range.getStartPosition(),G$(i.substring(0,s))),a=this.text.substring(s),l=L.fromPositions(r,this.range.getEndPosition());return new Ey(l,a)}augments(e){return this.text.startsWith(e.text)&&u8e(this.range,e.range)}computeGhostText(e,t,n,i=0){let s=this.removeCommonPrefix(e);if(s.range.endLineNumber!==s.range.startLineNumber)return;const r=e.getLineContent(s.range.startLineNumber),a=Dt(r).length;if(s.range.startColumn-1<=a){const p=Dt(s.text).length,b=r.substring(s.range.startColumn-1,a),[_,v]=[s.range.getStartPosition(),s.range.getEndPosition()],y=_.column+b.length<=v.column?_.delta(0,b.length):v,w=L.fromPositions(y,v),C=s.text.startsWith(b)?s.text.substring(b.length):s.text.substring(p);s=new Ey(w,C)}const d=e.getValueInRange(s.range),c=h8e(d,s.text);if(!c)return;const h=s.range.startLineNumber,g=new Array;if(t==="prefix"){const p=c.filter(b=>b.originalLength===0);if(p.length>1||p.length===1&&p[0].originalStart!==d.length)return}const f=s.text.length-i;for(const p of c){const b=s.range.startColumn+p.originalStart+p.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===s.range.startLineNumber&&b<n.column||p.originalLength>0)return;if(p.modifiedLength===0)continue;const _=p.modifiedStart+p.modifiedLength,v=Math.max(p.modifiedStart,Math.min(_,f)),y=s.text.substring(p.modifiedStart,v),w=s.text.substring(v,Math.max(p.modifiedStart,_));if(y.length>0){const C=cl(y);g.push(new GC(b,C,!1))}if(w.length>0){const C=cl(w);g.push(new GC(b,C,!0))}}return new t_(h,g)}};u(Ey,"SingleTextEdit");let qC=Ey;function u8e(o,e){return e.getStartPosition().equals(o.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(o.getEndPosition())}u(u8e,"rangeExtends");let Ma;function h8e(o,e){if(Ma?.originalValue===o&&Ma?.newValue===e)return Ma?.changes;{let t=jCe(o,e,!0);if(t){const n=GCe(t);if(n>0){const i=jCe(o,e,!1);i&&GCe(i)<n&&(t=i)}}return Ma={originalValue:o,newValue:e,changes:t},t}}u(h8e,"cachingDiff");function GCe(o){let e=0;for(const t of o)e+=t.originalLength;return e}u(GCe,"deletedCharacters");function jCe(o,e,t){if(o.length>5e3||e.length>5e3)return;function n(d){let c=0;for(let h=0,g=d.length;h<g;h++){const f=d.charCodeAt(h);f>c&&(c=f)}return c}u(n,"getMaxCharCode");const i=Math.max(n(o),n(e));function s(d){if(d<0)throw new Error("unexpected");return i+d+1}u(s,"getUniqueCharCode");function r(d){let c=0,h=0;const g=new Int32Array(d.length);for(let f=0,p=d.length;f<p;f++)if(t&&d[f]==="("){const b=h*100+c;g[f]=s(2*b),c++}else if(t&&d[f]===")"){c=Math.max(c-1,0);const b=h*100+c;g[f]=s(2*b+1),c===0&&h++}else g[f]=d.charCodeAt(f);return g}u(r,"getElements");const a=r(o),l=r(e);return new ob({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}u(jCe,"smartDiff");var g8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},KCe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},f8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},WT;let J$=(WT=class extends G{constructor(e,t,n,i,s){super(),this.textModel=e,this.versionId=t,this._debounceValue=n,this.languageFeaturesService=i,this.languageConfigurationService=s,this._updateOperation=this._register(new si),this.inlineCompletions=bN("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=bN("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,n){var i,s;const r=new Q$(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((i=this._updateOperation.value)===null||i===void 0)&&i.request.satisfies(r))return this._updateOperation.value.promise;if(!((s=a.get())===null||s===void 0)&&s.request.satisfies(r))return Promise.resolve(!0);const l=!!this._updateOperation.value;this._updateOperation.clear();const d=new En,c=(()=>f8e(this,void 0,void 0,function*(){if((l||t.triggerKind===Ld.Automatic)&&(yield p8e(this._debounceValue.get(this.textModel))),d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const f=new Date,p=yield d8e(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,d.token,this.languageConfigurationService);if(d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const b=new Date;this._debounceValue.update(this.textModel,b.getTime()-f.getTime());const _=new tq(p,r,this.textModel,this.versionId);if(n){const v=n.toInlineCompletion(void 0);n.canBeReused(this.textModel,e)&&!p.has(v)&&_.prepend(n.inlineCompletion,v.range,!0)}return this._updateOperation.clear(),tn(v=>{a.set(_,v)}),!0}))(),h=new eq(r,d,c);return this._updateOperation.value=h,c}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;!((t=this._updateOperation.value)===null||t===void 0)&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}},u(WT,"InlineCompletionsSource"),WT);J$=g8e([KCe(3,we),KCe(4,Pt)],J$);function p8e(o,e){return new Promise(t=>{let n;const i=setTimeout(()=>{n&&n.dispose(),t()},o);e&&(n=e.onCancellationRequested(()=>{clearTimeout(i),n&&n.dispose(),t()}))})}u(p8e,"wait");const rme=class rme{constructor(e,t,n){this.position=e,this.context=t,this.versionId=n}satisfies(e){return this.position.equals(e.position)&&m8e(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(t,n)=>t.equals(n))&&(e.context.triggerKind===Ld.Automatic||this.context.triggerKind===Ld.Explicit)&&this.versionId===e.versionId}};u(rme,"UpdateRequest");let Q$=rme;function m8e(o,e,t){return!o||!e?o===e:t(o,e)}u(m8e,"equals");const ame=class ame{constructor(e,t,n){this.request=e,this.cancellationTokenSource=t,this.promise=n}dispose(){this.cancellationTokenSource.cancel()}};u(ame,"UpdateOperation");let eq=ame;const lme=class lme{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,n,i){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=n,this.versionId=i,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=dt(r=>{this.versionId.read(r);let a=!1;for(const l of this._inlineCompletions)a=a||l._updateRange(this.textModel);return a&&this._rangeVersionIdValue++,this._rangeVersionIdValue});const s=n.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new TR(r,s[a],this._rangeVersionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,n){n&&e.source.addRef();const i=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new TR(e,i,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}};u(lme,"UpToDateInlineCompletions");let tq=lme;const dme=class dme{get forwardStable(){var e;return(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&e!==void 0?e:!1}constructor(e,t,n,i){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=n,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=i??e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new qC(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,n){const i=this._toFilterTextReplacement(n).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(n).getStartPosition())||t.lineNumber!==i.range.startLineNumber)return!1;const s=e.getValueInRange(i.range,1).toLowerCase(),r=i.text.toLowerCase(),a=Math.max(0,t.column-i.range.startColumn);let l=r.substring(0,a),d=r.substring(a),c=s.substring(0,a),h=s.substring(a);const g=e.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=g&&(c=c.trimStart(),c.length===0&&(h=h.trimStart()),l=l.trimStart(),l.length===0&&(d=d.trimStart())),l.startsWith(c)&&!!Kxe(h,d)}canBeReused(e,t){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0)}_toFilterTextReplacement(e){return new qC(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return $Ce(this._getUpdatedRange(e)).isBefore($Ce(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){const t=e.getDecorationRange(this.decorationId);return t?this._updatedRange.equalsRange(t)?!1:(this._updatedRange=t,!0):(this._isValid=!1,!0)}};u(dme,"InlineCompletionWithUpdatedRange");let TR=dme;function $Ce(o){return o.startLineNumber===o.endLineNumber?new W(1,1+o.endColumn-o.startColumn):new W(1+o.endLineNumber-o.startLineNumber,o.endColumn)}u($Ce,"length");var p0=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const je={Visible:$J,HasFocusedSuggestion:new _e("suggestWidgetHasFocusedSuggestion",!1,m("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new _e("suggestWidgetDetailsVisible",!1,m("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new _e("suggestWidgetMultipleSuggestions",!1,m("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new _e("suggestionMakesTextEdit",!0,m("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new _e("acceptSuggestionOnEnter",!0,m("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new _e("suggestionHasInsertAndReplaceRange",!1,m("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new _e("suggestionInsertMode",void 0,{type:"string",description:m("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new _e("suggestionCanResolve",!1,m("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},lu=new A("suggestWidgetStatusBar"),cme=class cme{constructor(e,t,n,i){var s;this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=fa.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(s=t.label)===null||s===void 0?void 0:s.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,L.isIRange(t.range)?(this.editStart=new W(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new W(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new W(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new W(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new W(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new W(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range.insert)||L.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}resolve(e){return p0(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),n=new Fi(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._resolveDuration=n.elapsed(),t.dispose()},i=>{Ca(i)&&(this._resolveCache=void 0,this._resolveDuration=void 0)})}return this._resolveCache})}};u(cme,"CompletionItem");let nq=cme;const ume=class ume{constructor(e=2,t=new Set,n=new Set,i=new Map,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.providerItemsToReuse=i,this.showDeprecated=s}};u(ume,"CompletionOptions");let uf=ume;uf.default=new uf;let b8e;function _8e(){return b8e}u(_8e,"getSnippetSuggestSupport");const hme=class hme{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}};u(hme,"CompletionItemModel");let iq=hme;function QJ(o,e,t,n=uf.default,i={triggerKind:0},s=Ze.None){return p0(this,void 0,void 0,function*(){const r=new Fi;t=t.clone();const a=e.getWordAtPosition(t),l=a?new L(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):L.fromPositions(t),d={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},c=[],h=new ie,g=[];let f=!1;const p=u((_,v,y)=>{var w,C,S;let k=!1;if(!v)return k;for(const T of v.suggestions)if(!n.kindFilter.has(T.kind)){if(!n.showDeprecated&&(!((w=T?.tags)===null||w===void 0)&&w.includes(1)))continue;T.range||(T.range=d),T.sortText||(T.sortText=typeof T.label=="string"?T.label:T.label.label),!f&&T.insertTextRules&&T.insertTextRules&4&&(f=Hu.guessNeedsClipboard(T.insertText)),c.push(new nq(t,T,v,_)),k=!0}return pZ(v)&&h.add(v),g.push({providerName:(C=_._debugDisplayName)!==null&&C!==void 0?C:"unknown_provider",elapsedProvider:(S=v.duration)!==null&&S!==void 0?S:-1,elapsedOverall:y.elapsed()}),k},"onCompletionList"),b=(()=>p0(this,void 0,void 0,function*(){}))();for(const _ of o.orderedGroups(e)){let v=!1;if(yield Promise.all(_.map(y=>p0(this,void 0,void 0,function*(){if(n.providerItemsToReuse.has(y)){const w=n.providerItemsToReuse.get(y);w.forEach(C=>c.push(C)),v=v||w.length>0;return}if(!(n.providerFilter.size>0&&!n.providerFilter.has(y)))try{const w=new Fi,C=yield y.provideCompletionItems(e,t,i,s);v=p(y,C,w)||v}catch(w){Ln(w)}}))),v||s.isCancellationRequested)break}return yield b,s.isCancellationRequested?(h.dispose(),Promise.reject(new al)):new iq(c.sort(w8e(n.snippetSortOrder)),f,{entries:g,elapsed:r.elapsed()},h)})}u(QJ,"provideSuggestionItems");function eQ(o,e){if(o.sortTextLow&&e.sortTextLow){if(o.sortTextLow<e.sortTextLow)return-1;if(o.sortTextLow>e.sortTextLow)return 1}return o.textLabel<e.textLabel?-1:o.textLabel>e.textLabel?1:o.completion.kind-e.completion.kind}u(eQ,"defaultComparator");function v8e(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return eQ(o,e)}u(v8e,"snippetUpComparator");function y8e(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return eQ(o,e)}u(y8e,"snippetDownComparator");const m4=new Map;m4.set(0,v8e);m4.set(2,y8e);m4.set(1,eQ);function w8e(o){return m4.get(o)}u(w8e,"getSuggestionComparator");lt.registerCommand("_executeCompletionItemProvider",(o,...e)=>p0(void 0,void 0,void 0,function*(){const[t,n,i,s]=e;Lt(Ae.isUri(t)),Lt(W.isIPosition(n)),Lt(typeof i=="string"||!i),Lt(typeof s=="number"||!s);const{completionProvider:r}=o.get(we),a=yield o.get(Ds).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},d=[],c=a.object.textEditorModel.validatePosition(n),h=yield QJ(r,a.object.textEditorModel,c,void 0,{triggerCharacter:i??void 0,triggerKind:i?1:0});for(const g of h.items)d.length<(s??0)&&d.push(g.resolve(Ze.None)),l.incomplete=l.incomplete||g.container.incomplete,l.suggestions.push(g.completion);try{return yield Promise.all(d),l}finally{setTimeout(()=>h.disposable.dispose(),100)}}finally{a.dispose()}}));function C8e(o,e){var t;(t=o.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}u(C8e,"showSimpleSuggestions");const gme=class gme{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}};u(gme,"QuickSuggestionsOptions");let Kc=gme;function qCe(o,e=Si){return bPe(o,e)?o.charAt(0).toUpperCase()+o.slice(1):o}u(qCe,"normalizeDriveLetter");var S8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},x8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const fme=class fme{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}};u(fme,"CompositeSnippetVariableResolver");let LR=fme;const pme=class pme{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(n=s.value,i=s.multiline)}if(n&&i&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),r=Dt(s,0,this._selection.startColumn-1);let a=r;e.snippet.walk(d=>d===e?!1:(d instanceof is&&(a=Dt(cl(d.value).pop())),!0));const l=xg(a,r);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,c,h)=>`${c}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}};u(pme,"SelectionBasedVariableResolver");let ER=pme;const mme=class mme{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Yc(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Yc(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return j1e(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(RO(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}};u(mme,"ModelBasedVariableResolver");let kR=mme;const bme=class bme{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!Z1e(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}};u(bme,"ClipboardBasedVariableResolver");let DR=bme;var BT;let MR=(BT=class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}},u(BT,"CommentBasedVariableResolver"),BT);MR=S8e([x8e(2,Pt)],MR);const Bh=class Bh{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Bh.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Bh.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Bh.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Bh.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const n=this._date.getTimezoneOffset(),i=n>0?"-":"+",s=Math.trunc(Math.abs(n/60)),r=s<10?"0"+s:s,a=Math.abs(n)-s*60,l=a<10?"0"+a:a;return i+r+":"+l}}};u(Bh,"TimeBasedVariableResolver");let Vu=Bh;Vu.dayNames=[m("Sunday","Sunday"),m("Monday","Monday"),m("Tuesday","Tuesday"),m("Wednesday","Wednesday"),m("Thursday","Thursday"),m("Friday","Friday"),m("Saturday","Saturday")];Vu.dayNamesShort=[m("SundayShort","Sun"),m("MondayShort","Mon"),m("TuesdayShort","Tue"),m("WednesdayShort","Wed"),m("ThursdayShort","Thu"),m("FridayShort","Fri"),m("SaturdayShort","Sat")];Vu.monthNames=[m("January","January"),m("February","February"),m("March","March"),m("April","April"),m("May","May"),m("June","June"),m("July","July"),m("August","August"),m("September","September"),m("October","October"),m("November","November"),m("December","December")];Vu.monthNamesShort=[m("JanuaryShort","Jan"),m("FebruaryShort","Feb"),m("MarchShort","Mar"),m("AprilShort","Apr"),m("MayShort","May"),m("JuneShort","Jun"),m("JulyShort","Jul"),m("AugustShort","Aug"),m("SeptemberShort","Sep"),m("OctoberShort","Oct"),m("NovemberShort","Nov"),m("DecemberShort","Dec")];const _me=class _me{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=D4e(this._workspaceService.getWorkspace());if(!L4e(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(R6(e))return Yc(e.uri.path);let t=Yc(e.configPath.path);return t.endsWith(F6)&&(t=t.substr(0,t.length-F6.length-1)),t}_resoveWorkspacePath(e){if(R6(e))return qCe(e.uri.fsPath);const t=Yc(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?qCe(n):"/"}};u(_me,"WorkspaceBasedVariableResolver");let AR=_me;const vme=class vme{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return c4()}};u(vme,"RandomBasedVariableResolver");let IR=vme;var T8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},L8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zr;const lr=class lr{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=Tve(t.placeholders,Io.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),s=this._snippet.fullLen(n),r=L.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+s)),a=n.isFinalTabstop?lr._decor.inactiveFinal:lr._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const i=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const r=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),d=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let c=1;c<d.length;c++)d[c]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[c]);i.push(zt.replace(a,d.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const s=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(l);r.push(new xe(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?lr._decor.activeFinal:lr._decor.active),s.add(a);for(const c of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(c);i.changeDecorationOptions(h,c.isFinalTabstop?lr._decor.activeFinal:lr._decor.active),s.add(c)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?lr._decor.inactiveFinal:lr._decor.inactive);return r});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Io){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const s=this._placeholderDecorations.get(i),r=this._editor.getModel().getDecorationRange(s);if(!r){e.delete(i.index);break}n.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof n_,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const r=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(r+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,s._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of s._snippet.placeholders){const d=s._snippet.offset(l),c=s._snippet.fullLen(l),h=L.fromPositions(t.getPositionAt(s._offset+d),t.getPositionAt(s._offset+d+c)),g=n.addDecoration(h,lr._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=Tve(this._snippet.placeholders,Io.compareByIndex)})}};u(lr,"OneSnippet");let YC=lr;YC._decor={active:Fe.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Fe.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Fe.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Fe.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const YCe={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var UT;let NR=zr=(UT=class{static adjustWhitespace(e,t,n,i,s){const r=e.getLineContent(t.lineNumber),a=Dt(r,0,t.column-1);let l;return i.walk(d=>{if(!(d instanceof is)||d.parent instanceof n_||s&&!s.has(d))return!0;const c=d.value.split(/\r\n|\r|\n/);if(n){const g=i.offset(d);if(g===0)c[0]=e.normalizeIndentation(c[0]);else{l=l??i.toString();const f=l.charCodeAt(g-1);(f===10||f===13)&&(c[0]=e.normalizeIndentation(a+c[0]))}for(let f=1;f<c.length;f++)c[f]=e.normalizeIndentation(a+c[f])}const h=c.join(e.getEOL());return h!==d.value&&(d.parent.replace(d,[new is(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:s,positionColumn:r}=t,a=r-n,l=r+i,d=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=xe.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,s,r,a,l,d){const c=[],h=[];if(!e.hasModel())return{edits:c,snippets:h};const g=e.getModel(),f=e.invokeWithinContext(C=>C.get(jg)),p=e.invokeWithinContext(C=>new kR(C.get(Ib),g)),b=u(()=>a,"readClipboardText"),_=g.getValueInRange(zr.adjustSelection(g,e.getSelection(),n,0)),v=g.getValueInRange(zr.adjustSelection(g,e.getSelection(),0,i)),y=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),w=e.getSelections().map((C,S)=>({selection:C,idx:S})).sort((C,S)=>L.compareRangesUsingStarts(C.selection,S.selection));for(const{selection:C,idx:S}of w){let k=zr.adjustSelection(g,C,n,0),T=zr.adjustSelection(g,C,0,i);_!==g.getValueInRange(k)&&(k=C),v!==g.getValueInRange(T)&&(T=C);const E=C.setStartPosition(k.startLineNumber,k.startColumn).setEndPosition(T.endLineNumber,T.endColumn),D=new Hu().parse(t,!0,s),O=E.getStartPosition(),B=zr.adjustWhitespace(g,O,r||S>0&&y!==g.getLineFirstNonWhitespaceColumn(C.positionLineNumber),D);D.resolveVariables(new LR([p,new DR(b,S,w.length,e.getOption(77)==="spread"),new ER(g,C,S,l),new MR(g,C,d),new Vu,new AR(f),new IR])),c[S]=zt.replace(E,D.toString()),c[S].identifier={major:S,minor:0},c[S]._isTracked=!0,h[S]=new YC(e,D,B)}return{edits:c,snippets:h}}static createEditsAndSnippetsFromEdits(e,t,n,i,s,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],d=e.getModel(),c=new Hu,h=new $C,g=new LR([e.invokeWithinContext(p=>new kR(p.get(Ib),d)),new DR(()=>s,0,e.getSelections().length,e.getOption(77)==="spread"),new ER(d,e.getSelection(),0,r),new MR(d,e.getSelection(),a),new Vu,new AR(e.invokeWithinContext(p=>p.get(jg))),new IR]);t=t.sort((p,b)=>L.compareRangesUsingStarts(p.range,b.range));let f=0;for(let p=0;p<t.length;p++){const{range:b,template:_}=t[p];if(p>0){const S=t[p-1].range,k=L.fromPositions(S.getEndPosition(),b.getStartPosition()),T=new is(d.getValueInRange(k));h.appendChild(T),f+=T.value.length}const v=c.parseFragment(_,h);zr.adjustWhitespace(d,b.getStartPosition(),!0,h,new Set(v)),h.resolveVariables(g);const y=h.toString(),w=y.slice(f);f=y.length;const C=zt.replace(b,w);C.identifier={major:p,minor:0},C._isTracked=!0,l.push(C)}return c.ensureFinalTabstop(h,n,!0),{edits:l,snippets:[new YC(e,h,"")]}}constructor(e,t,n=YCe,i){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=i,this._templateMerges=[],this._snippets=[]}dispose(){wt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?zr.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):zr.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const i=n.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(i[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(s=>xe.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=YCe){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=zr.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,s=>{const r=s.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(r[l].textChange);const a=i[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>xe.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[s,r]of i){r.sort(L.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,r)=>{s.push(...i.get(r))})}e.sort(L.compareRangesUsingStarts);for(const[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(L.compareRangesUsingStarts);for(let s=0;s<i.length;s++)if(!i[s].containsRange(e[s])){t.delete(n);continue}}return t.size>0}},u(UT,"SnippetSession"),UT);NR=zr=T8e([L8e(3,Pt)],NR);var E8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},_k=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},op;const XCe={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var zT;let gi=op=(zT=class{static get(e){return e.getContribution(op.ID)}constructor(e,t,n,i,s){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=s,this._snippetListener=new ie,this._modelVersionId=-1,this._inSnippet=op.InSnippetMode.bindTo(i),this._hasNextTabstop=op.HasNextTabstop.bindTo(i),this._hasPrevTabstop=op.HasPrevTabstop.bindTo(i)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?XCe:Object.assign(Object.assign({},XCe),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(Lt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new NR(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((n=this._session)===null||n===void 0)&&n.hasChoice){const i={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(c,h)=>{if(!this._session||c!==this._editor.getModel()||!W.equals(this._editor.getPosition(),h))return;const{activeChoice:g}=this._session;if(!g||g.choice.options.length===0)return;const f=c.getValueInRange(g.range),p=!!g.choice.options.find(_=>_.value===f),b=[];for(let _=0;_<g.choice.options.length;_++){const v=g.choice.options[_];b.push({kind:13,label:v.value,insertText:v.value,sortText:"a".repeat(_+1),range:g.range,filterText:p?`${f}_${v.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:m("next","Go to next placeholder...")}})}return{suggestions:b}}},s=this._editor.getModel();let r,a=!1;const l=u(()=>{r?.dispose(),a=!1},"disable"),d=u(()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:s.getLanguageId(),pattern:s.uri.fsPath,scheme:s.uri.scheme,exclusive:!0},i),this._snippetListener.add(r),a=!0)},"enable");this._choiceCompletions={provider:i,enable:d,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var e;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:t}=this._session;if(!t||!this._choiceCompletions){(e=this._choiceCompletions)===null||e===void 0||e.disable(),this._currentChoice=void 0;return}this._currentChoice!==t.choice&&(this._currentChoice=t.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{C8e(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)===null||e===void 0||e.prev(),this._updateState()}next(){var e;(e=this._session)===null||e===void 0||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},u(zT,"SnippetController2"),zT);gi.ID="snippetController2";gi.InSnippetMode=new _e("inSnippetMode",!1,m("inSnippetMode","Whether the editor in current in snippet mode"));gi.HasNextTabstop=new _e("hasNextTabstop",!1,m("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));gi.HasPrevTabstop=new _e("hasPrevTabstop",!1,m("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));gi=op=E8e([_k(1,So),_k(2,we),_k(3,Re),_k(4,Pt)],gi);ft(gi.ID,gi,4);const b4=hi.bindToContribution(gi.get);he(new b4({id:"jumpToNextSnippetPlaceholder",precondition:ne.and(gi.InSnippetMode,gi.HasNextTabstop),handler:o=>o.next(),kbOpts:{weight:100+30,kbExpr:M.editorTextFocus,primary:2}}));he(new b4({id:"jumpToPrevSnippetPlaceholder",precondition:ne.and(gi.InSnippetMode,gi.HasPrevTabstop),handler:o=>o.prev(),kbOpts:{weight:100+30,kbExpr:M.editorTextFocus,primary:1026}}));he(new b4({id:"leaveSnippet",precondition:gi.InSnippetMode,handler:o=>o.cancel(!0),kbOpts:{weight:100+30,kbExpr:M.editorTextFocus,primary:9,secondary:[1033]}}));he(new b4({id:"acceptSnippet",precondition:gi.InSnippetMode,handler:o=>o.finish()}));var k8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},XH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},zl=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},eo;(function(o){o[o.Undo=0]="Undo",o[o.Redo=1]="Redo",o[o.AcceptWord=2]="AcceptWord",o[o.Other=3]="Other"})(eo||(eo={}));var GT;let sq=(GT=class extends G{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,n,i,s,r,a,l,d,c,h,g){super(),this.textModel=e,this.selectedSuggestItem=t,this.cursorPosition=n,this.textModelVersionId=i,this._debounceValue=s,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=d,this._instantiationService=c,this._commandService=h,this._languageConfigurationService=g,this._source=this._register(this._instantiationService.createInstance(J$,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=Vt("isActive",!1),this._forceUpdate=YTe("forceUpdate"),this._selectedInlineCompletionId=Vt("selectedInlineCompletionId",void 0),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([eo.Redo,eo.Undo,eo.AcceptWord]),this._fetchInlineCompletions=yVe("fetch inline completions",{createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Ld.Automatic}),handleChange:(p,b)=>(p.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(p.change)?b.preserveCurrentCompletion=!0:p.didChange(this._forceUpdate)&&(b.inlineCompletionTriggerKind=p.change),!0)},(p,b)=>{if(this._forceUpdate.read(p),!(this._enabled.read(p)&&this.selectedSuggestItem.read(p)||this._isActive.read(p))){this._source.cancelUpdate();return}this.textModelVersionId.read(p);const v=this.selectedInlineCompletion.get(),y=b.preserveCurrentCompletion||v?.forwardStable?v:void 0,w=this._source.suggestWidgetInlineCompletions.get(),C=this.selectedSuggestItem.read(p);if(w&&!C){const T=this._source.inlineCompletions.get();tn(E=>{T&&w.request.versionId>T.request.versionId&&this._source.inlineCompletions.set(w.clone(),E),this._source.clearSuggestWidgetInlineCompletions(E)})}const S=this.cursorPosition.read(p),k={triggerKind:b.inlineCompletionTriggerKind,selectedSuggestionInfo:C?.toSelectedSuggestionInfo()};return this._source.fetch(S,k,y)}),this._filteredInlineCompletionItems=dt(p=>{const b=this._source.inlineCompletions.read(p);if(!b)return[];const _=this.cursorPosition.read(p);return b.inlineCompletions.filter(y=>y.isVisible(this.textModel,_,p))}),this.selectedInlineCompletionIndex=dt(p=>{const b=this._selectedInlineCompletionId.read(p),_=this._filteredInlineCompletionItems.read(p),v=this._selectedInlineCompletionId===void 0?-1:_.findIndex(y=>y.semanticId===b);return v===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):v}),this.selectedInlineCompletion=dt(p=>{const b=this._filteredInlineCompletionItems.read(p),_=this.selectedInlineCompletionIndex.read(p);return b[_]}),this.lastTriggerKind=this._source.inlineCompletions.map(p=>p?.request.context.triggerKind),this.inlineCompletionsCount=dt(p=>{if(this.lastTriggerKind.read(p)===Ld.Explicit)return this._filteredInlineCompletionItems.read(p).length}),this.state=kwe({equalityComparer:(p,b)=>!p||!b?p===b:WCe(p.ghostText,b.ghostText)&&p.inlineCompletion===b.inlineCompletion&&p.suggestItem===b.suggestItem},p=>{var b;const _=this.textModel,v=this.selectedSuggestItem.read(p);if(v){const y=v.toSingleTextEdit().removeCommonPrefix(_),w=this._computeAugmentedCompletion(y,p);if(!this._suggestPreviewEnabled.read(p)&&!w)return;const S=(b=w?.edit)!==null&&b!==void 0?b:y,k=w?w.edit.text.length-y.text.length:0,T=this._suggestPreviewMode.read(p),E=this.cursorPosition.read(p),D=S.computeGhostText(_,T,E,k);return{ghostText:D??new t_(S.range.endLineNumber,[]),inlineCompletion:w?.completion,suggestItem:v}}else{if(!this._isActive.read(p))return;const y=this.selectedInlineCompletion.read(p);if(!y)return;const w=y.toSingleTextEdit(p),C=this._inlineSuggestMode.read(p),S=this.cursorPosition.read(p),k=w.computeGhostText(_,C,S);return k?{ghostText:k,inlineCompletion:y,suggestItem:void 0}:void 0}}),this.ghostText=kwe({equalityComparer:WCe},p=>{const b=this.state.read(p);if(b)return b.ghostText}),this._register(yC(this._fetchInlineCompletions,!0));let f;this._register(Rt(p=>{var b,_;const v=this.state.read(p),y=v?.inlineCompletion;if(y?.semanticId!==f?.semanticId&&(f=y,y)){const w=y.inlineCompletion,C=w.source;(_=(b=C.provider).handleItemDidShow)===null||_===void 0||_.call(b,C.inlineCompletions,w.sourceInlineCompletion,w.insertText)}}))}trigger(e){return zl(this,void 0,void 0,function*(){this._isActive.set(!0,e),yield this._fetchInlineCompletions.get()})}triggerExplicitly(e){return zl(this,void 0,void 0,function*(){Bz(e,t=>{this._isActive.set(!0,t),this._forceUpdate.trigger(t,Ld.Explicit)}),yield this._fetchInlineCompletions.get()})}stop(e){Bz(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentedCompletion(e,t){const n=this.textModel,i=this._source.suggestWidgetInlineCompletions.read(t),s=i?i.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(Ny);return Oke(s,a=>{let l=a.toSingleTextEdit(t);return l=l.removeCommonPrefix(n,L.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),l.augments(e)?{edit:l,completion:a}:void 0})}_deltaSelectedInlineCompletionIndex(e){return zl(this,void 0,void 0,function*(){yield this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const n=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[n].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)})}next(){return zl(this,void 0,void 0,function*(){yield this._deltaSelectedInlineCompletionIndex(1)})}previous(){return zl(this,void 0,void 0,function*(){yield this._deltaSelectedInlineCompletionIndex(-1)})}accept(e){var t;return zl(this,void 0,void 0,function*(){if(e.getModel()!==this.textModel)throw new An;const n=this.state.get();if(!n||n.ghostText.isEmpty()||!n.inlineCompletion)return;const i=n.inlineCompletion.toInlineCompletion(void 0);e.pushUndoStop(),i.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[zt.replaceMove(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition()),(t=gi.get(e))===null||t===void 0||t.insert(i.snippetInfo.snippet,{undoStopBefore:!1})):e.executeEdits("inlineSuggestion.accept",[zt.replaceMove(i.range,i.insertText),...i.additionalTextEdits]),i.command&&i.source.addRef(),tn(s=>{this._source.clear(s),this._isActive.set(!1,s)}),i.command&&(yield this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,Ln),i.source.removeRef())})}acceptNextWord(e){return zl(this,void 0,void 0,function*(){yield this._acceptNext(e,(t,n)=>{const i=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),s=this._languageConfigurationService.getLanguageConfiguration(i),r=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),a=n.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=n.length;const c=/\s+/g.exec(n);return c&&c.index!==void 0&&c.index+c[0].length<l&&(l=c.index+c[0].length),l})})}acceptNextLine(e){return zl(this,void 0,void 0,function*(){yield this._acceptNext(e,(t,n)=>{const i=n.match(/\n/);return i&&i.index!==void 0?i.index+1:n.length})})}_acceptNext(e,t){return zl(this,void 0,void 0,function*(){if(e.getModel()!==this.textModel)throw new An;const n=this.state.get();if(!n||n.ghostText.isEmpty()||!n.inlineCompletion)return;const i=n.ghostText,s=n.inlineCompletion.toInlineCompletion(void 0);if(s.snippetInfo||s.filterText!==s.insertText){yield this.accept(e);return}const r=i.parts[0],a=new W(i.lineNumber,r.column),l=r.lines.join(`
`),d=t(a,l);if(d===l.length&&i.parts.length===1){this.accept(e);return}const c=l.substring(0,d);this._isAcceptingPartially=!0;try{e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[zt.replace(L.fromPositions(a),c)]);const h=G$(c);e.setPosition(z$(a,h))}finally{this._isAcceptingPartially=!1}if(s.source.provider.handlePartialAccept){const h=L.fromPositions(s.range.getStartPosition(),z$(a,G$(c))),g=e.getModel().getValueInRange(h,1);s.source.provider.handlePartialAccept(s.source.inlineCompletions,s.sourceInlineCompletion,g.length)}})}handleSuggestAccepted(e){var t,n;const i=e.toSingleTextEdit().removeCommonPrefix(this.textModel),s=this._computeAugmentedCompletion(i,void 0);if(!s)return;const r=s.completion.inlineCompletion;(n=(t=r.source.provider).handlePartialAccept)===null||n===void 0||n.call(t,r.source.inlineCompletions,r.sourceInlineCompletion,i.text.length)}},u(GT,"InlineCompletionsModel"),GT);sq=k8e([XH(9,Pe),XH(10,un),XH(11,Pt)],sq);var D8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZCe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Tv;const yme=class yme{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const i=n[0].score[0];for(let s=0;s<n.length;s++){const{score:r,completion:a}=n[s];if(r[0]!==i)break;if(a.preselect)return s}return 0}};u(yme,"Memory");let XC=yme;const wme=class wme extends XC{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}};u(wme,"NoMemory");let RR=wme;const Cme=class Cme extends XC{constructor(){super("recentlyUsed"),this._cache=new pl(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);const s=n[0].score[0];let r=-1,a=-1,l=-1;for(let d=0;d<n.length&&n[d].score[0]===s;d++){const c=`${e.getLanguageId()}/${n[d].textLabel}`,h=this._cache.peek(c);if(h&&h.touch>l&&h.type===n[d].completion.kind&&h.insertText===n[d].completion.insertText&&(l=h.touch,a=d),n[d].completion.preselect&&r===-1)return r=d}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:zy.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}};u(Cme,"LRUMemory");let oq=Cme;const Sme=class Sme extends XC{constructor(){super("recentlyUsedByPrefix"),this._trie=hI.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${i}`;this._trie.set(s,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);const s=`${e.getLanguageId()}/${i}`;let r=this._trie.get(s);if(r||(r=this._trie.findSubstr(s)),r)for(let a=0;a<n.length;a++){const{kind:l,insertText:d}=n[a].completion;if(l===r.type&&d===r.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:zy.fromString(n.type),this._trie.set(t,n)}}};u(Sme,"PrefixMemory");let rq=Sme;var jT;let ZC=Tv=(jT=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ie,this._persistSoon=new Et(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===vI.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const s=Tv._strategyCtors.get(i)||RR;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${Tv._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${Tv._storagePrefix}/${this._strategy.name}`,n,t,1)}}},u(jT,"SuggestMemoryService"),jT);ZC._strategyCtors=new Map([["recentlyUsedByPrefix",rq],["recentlyUsed",oq],["first",RR]]);ZC._storagePrefix="suggest/memories";ZC=Tv=D8e([ZCe(0,Rr),ZCe(1,at)],ZC);const _4=nt("ISuggestMemories");ct(_4,ZC,1);var M8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},A8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},aq,KT;let JC=aq=(KT=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=aq.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(121)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(121)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=u(()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),s=n.getWordAtPosition(i.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===i.getStartPosition().column)},"checkForWordEnd");this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},u(KT,"WordContextKey"),KT);JC.AtEnd=new _e("atEndOfWord",!1);JC=aq=M8e([A8e(1,Re)],JC);var I8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},N8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Lv,$T;let hf=Lv=($T=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Lv.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(Lv._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(let s=t.items.length;s>0&&(i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits));s--);return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=Lv._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},u($T,"SuggestAlternatives"),$T);hf.OtherSuggestions=new _e("hasOtherSuggestions",!1);hf=Lv=I8e([N8e(1,Re)],hf);const xme=class xme{constructor(e,t,n,i){this._disposables=new ie,this._disposables.add(n.onDidSuggest(s=>{s.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(s=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()&&n.state!==0){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!Ri(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new ab;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}};u(xme,"CommitCharacterController");let lq=xme;var R8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const dr=class dr{provideSelectionRanges(e,t){return R8e(this,void 0,void 0,function*(){const n=[];for(const i of t){const s=[];n.push(s);const r=new Map;yield new Promise(a=>dr._bracketsRightYield(a,0,e,i,r)),yield new Promise(a=>dr._bracketsLeftYield(a,0,e,i,r,s))}return n})}static _bracketsRightYield(e,t,n,i,s){const r=new Map,a=Date.now();for(;;){if(t>=dr._maxRounds){e();break}if(!i){e();break}const l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>dr._maxDuration){setTimeout(()=>dr._bracketsRightYield(e,t+1,n,i,s));break}if(l.bracketInfo.isOpeningBracket){const c=l.bracketInfo.bracketText,h=r.has(c)?r.get(c):0;r.set(c,h+1)}else{const c=l.bracketInfo.getOpeningBrackets()[0].bracketText;let h=r.has(c)?r.get(c):0;if(h-=1,r.set(c,Math.max(0,h)),h<0){let g=s.get(c);g||(g=new Ai,s.set(c,g)),g.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,s,r){const a=new Map,l=Date.now();for(;;){if(t>=dr._maxRounds&&s.size===0){e();break}if(!i){e();break}const d=n.bracketPairs.findPrevBracket(i);if(!d){e();break}if(Date.now()-l>dr._maxDuration){setTimeout(()=>dr._bracketsLeftYield(e,t+1,n,i,s,r));break}if(d.bracketInfo.isOpeningBracket){const h=d.bracketInfo.bracketText;let g=a.has(h)?a.get(h):0;if(g-=1,a.set(h,Math.max(0,g)),g<0){const f=s.get(h);if(f){const p=f.shift();f.size===0&&s.delete(h);const b=L.fromPositions(d.range.getEndPosition(),p.getStartPosition()),_=L.fromPositions(d.range.getStartPosition(),p.getEndPosition());r.push({range:b}),r.push({range:_}),dr._addBracketLeading(n,_,r)}}}else{const h=d.bracketInfo.getOpeningBrackets()[0].bracketText,g=a.has(h)?a.get(h):0;a.set(h,g+1)}i=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(i);s!==0&&s!==t.startColumn&&(n.push({range:L.fromPositions(new W(i,s),t.getEndPosition())}),n.push({range:L.fromPositions(new W(i,1),t.getEndPosition())}));const r=i-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:L.fromPositions(new W(r,a),t.getEndPosition())}),n.push({range:L.fromPositions(new W(r,1),t.getEndPosition())}))}}};u(dr,"BracketSelectionRangeProvider");let i_=dr;i_._maxDuration=30;i_._maxRounds=2;var P8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const ed=class ed{static create(e,t){return P8e(this,void 0,void 0,function*(){if(!t.getOption(116).localityBonus||!t.hasModel())return ed.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return ed.None;const[s]=yield new i_().provideSelectionRanges(n,[i]);if(s.length===0)return ed.None;const r=yield e.computeWordRanges(n.uri,s[0].range);if(!r)return ed.None;const a=n.getWordUntilPosition(i);return delete r[a.word],new class extends ed{distance(l,d){if(!i.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;const c=typeof d.label=="string"?d.label:d.label.label,h=r[c];if(C1e(h))return 2<<20;const g=Iy(h,L.fromPositions(l),L.compareRangesUsingStarts),f=g>=0?h[g]:h[Math.max(0,~g-1)];let p=s.length;for(const b of s){if(!L.containsRange(b.range,f))break;p-=1}return p}}})}};u(ed,"WordDistance");let s_=ed;s_.None=new class extends s_{distance(){return 0}};var qT;let JCe=(qT=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}},u(qT,"LineContext"),qT);const Mc=class Mc{constructor(e,t,n,i,s,r,a=kb.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=Mc._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=s,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=Mc._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=Mc._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",s="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?Ug:NFe;for(let d=0;d<r.length;d++){const c=r[d];if(c.isInvalid)continue;const h=this._itemsByProvider.get(c.provider);h?h.push(c):this._itemsByProvider.set(c.provider,[c]);const g=c.position.column-c.editStart.column,f=g+n-(c.position.column-this._column);if(i.length!==f&&(i=f===0?"":t.slice(-f),s=i.toLowerCase()),c.word=i,f===0)c.score=fa.Default;else{let p=0;for(;p<g;){const b=i.charCodeAt(p);if(b===32||b===9)p+=1;else break}if(p>=f)c.score=fa.Default;else if(typeof c.completion.filterText=="string"){const b=l(i,s,p,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!b)continue;Y5(c.completion.filterText,c.textLabel)===0?c.score=b:(c.score=DFe(i,s,p,c.textLabel,c.labelLow,0),c.score[0]=b[0])}else{const b=l(i,s,p,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;c.score=b}}c.idx=d,c.distance=this._wordDistance.distance(c.position,c.completion),a.push(c),e.push(c.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?cV(e.length-.85,e,(d,c)=>d-c):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Mc._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Mc._compareCompletionItems(e,t)}};u(Mc,"CompletionModel");let PR=Mc;var F8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sc=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},O8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},dq;const Tme=class Tme{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column&&i.startColumn+1!==n.column||!isNaN(Number(i.word)))}constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}};u(Tme,"LineContext");let Yl=Tme;function H8e(o,e,t){if(!e.getContextKeyValue(Pi.inlineSuggestionVisible.key))return!0;const n=e.getContextKeyValue(Pi.suppressSuggestions.key);return n!==void 0?!n:!o.getOption(61).suppressSuggestions}u(H8e,"canShowQuickSuggest");function V8e(o,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=e.getContextKeyValue(Pi.suppressSuggestions.key);return n!==void 0?!n:!o.getOption(61).suppressSuggestions}u(V8e,"canShowSuggestOnTriggerCharacters");var YT;let cq=dq=(YT=class{constructor(e,t,n,i,s,r,a,l,d){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=s,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=d,this._toDispose=new ie,this._triggerCharacterListener=new ie,this._triggerQuickSuggest=new bo,this._triggerState=void 0,this._completionDisposables=new ie,this._onDidCancel=new V,this._onDidTrigger=new V,this._onDidSuggest=new V,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new xe(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(h=>{c||this._onCursorChange(h)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!c&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){wt(this._triggerCharacterListener),wt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(89)||!this._editor.hasModel()||!this._editor.getOption(119))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add(_8e()),e.set(i,s)),s.add(n)}const t=u(n=>{var i;if(!V8e(this._editor,this._contextKeyService,this._configurationService)||Yl.shouldAutoTrigger(this._editor))return;if(!n){const a=this._editor.getPosition();n=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";Tg(n.charCodeAt(n.length-1))?Un(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const r=e.get(s);if(r){const a=new Map;if(this._completionModel)for(const[l,d]of this._completionModel.getItemsByProvider())r.has(l)||a.set(l,d);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(i=this._completionModel)===null||i===void 0?void 0:i.clipboardText,completionOptions:{providerFilter:r,providerItemsToReuse:a}})}},"checkTriggerCharacter");this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Kc.isAllOff(this._editor.getOption(87))||this._editor.getOption(116).snippetsPreventQuickSuggestions&&(!((e=gi.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Yl.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=this._editor.getOption(87);if(!Kc.isAllOff(i)){if(!Kc.isAllOn(i)){t.tokenization.tokenizeIfCheap(n.lineNumber);const s=t.tokenization.getLineTokens(n.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(Kc.valueFor(i,r)!=="on")return}H8e(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(88)))}_refilterCompletionItems(){Lt(this._editor.hasModel()),Lt(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),n=new Yl(e,t,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(n)}trigger(e){var t,n,i,s,r,a;if(!this._editor.hasModel())return;const l=this._editor.getModel(),d=new Yl(l,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:(t=e.shy)!==null&&t!==void 0?t:!1,position:this._editor.getPosition()}),this._context=d;let c={triggerKind:(n=e.triggerKind)!==null&&n!==void 0?n:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new En;const h=this._editor.getOption(110);let g=1;switch(h){case"top":g=0;break;case"bottom":g=2;break}const{itemKind:f,showDeprecated:p}=dq._createSuggestFilter(this._editor),b=new uf(g,(s=(i=e.completionOptions)===null||i===void 0?void 0:i.kindFilter)!==null&&s!==void 0?s:f,(r=e.completionOptions)===null||r===void 0?void 0:r.providerFilter,(a=e.completionOptions)===null||a===void 0?void 0:a.providerItemsToReuse,p),_=s_.create(this._editorWorkerService,this._editor),v=QJ(this._languageFeaturesService.completionProvider,l,this._editor.getPosition(),b,c,this._requestToken.token);Promise.all([v,_]).then(([y,w])=>O8e(this,void 0,void 0,function*(){var C;if((C=this._requestToken)===null||C===void 0||C.dispose(),!this._editor.hasModel())return;let S=e?.clipboardText;if(!S&&y.needsClipboard&&(S=yield this._clipboardService.readText()),this._triggerState===void 0)return;const k=this._editor.getModel(),T=new Yl(k,this._editor.getPosition(),e),E=Object.assign(Object.assign({},kb.default),{firstMatchCanBeWeak:!this._editor.getOption(116).matchOnWordStartOnly});if(this._completionModel=new PR(y.items,this._context.column,{leadingLineContent:T.leadingLineContent,characterCountDelta:T.column-this._context.column},w,this._editor.getOption(116),this._editor.getOption(110),E,S),this._completionDisposables.add(y.disposable),this._onNewContext(T),this._reportDurationsTelemetry(y.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const D of y.items)D.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${D.provider._debugDisplayName}`,D.completion)})).catch(Be)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(110)==="none"&&t.add(27);const i=e.getOption(116);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Dt(e.leadingLineContent)!==Dt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Yl.shouldAutoTrigger(this._editor)&&this._context){const n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,n=new Set;for(const[i,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?n.add(i):t.set(i,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const i=Yl.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(i&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}},u(YT,"SuggestModel"),YT);cq=dq=F8e([sc(1,Nr),sc(2,Sa),sc(3,xo),sc(4,So),sc(5,Re),sc(6,at),sc(7,we),sc(8,sJ)],cq);const WF=class WF{constructor(e,t){this._disposables=new ie,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const n=e.getSelections(),i=n.length;let s=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(r.getValueLengthInRange(l)>WF._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(n=>{this._locked=!0})),this._disposables.add(t.onDidCancel(n=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};u(WF,"OvertypingCapturer");let FR=WF;FR._maxSelectionLength=51200;var W8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const BF=class BF extends Kg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=m({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,BF.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}};u(BF,"StatusBarViewItem");let uq=BF;var XT;let hq=(XT=class{constructor(e,t,n,i,s){this._menuId=t,this._menuService=i,this._contextKeyService=s,this._menuDisposables=new ie,this.element=Q(e,re(".suggest-status-bar"));const r=u(a=>a instanceof Er?n.createInstance(uq,a,void 0):void 0,"actionViewItemProvider");this._leftActions=new Ls(this.element,{actionViewItemProvider:r}),this._rightActions=new Ls(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=u(()=>{const n=[],i=[];for(const[s,r]of e.getActions())s==="left"?n.push(...r):i.push(...r);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)},"renderMenu");this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}},u(XT,"SuggestWidgetStatus"),XT);hq=W8e([ZH(2,Pe),ZH(3,Ml),ZH(4,Re)],hq);var B8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},U8e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function tQ(o){return!!o&&!!(o.completion.documentation||o.completion.detail&&o.completion.detail!==o.completion.label)}u(tQ,"canExpandCompletionItem");var ZT;let gq=(ZT=class{constructor(e,t){this._editor=e,this._onDidClose=new V,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new V,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ie,this._renderDisposeable=new ie,this._borderWidth=1,this._size=new _t(330,0),this.domNode=re(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(zd,{editor:e}),this._body=re(".body"),this._scrollbar=new Cu(this._body,{alwaysConsumeMouseWheel:!0}),Q(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Q(this._body,re(".header")),this._close=Q(this._header,re("span"+Te.asCSSSelector(ue.close))),this._close.title=m("details.close","Close"),this._type=Q(this._header,re("p.type")),this._docs=Q(this._body,re("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(49)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(49),n=t.getMassagedFontFamily(),i=e.get(117)||t.fontSize,s=e.get(118)||t.lineHeight,r=t.fontWeight,a=`${i}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/i}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(118)||this._editor.getOption(49).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=m("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:s,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,r=new zn().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!tQ(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}…`:s;this._type.textContent=a,this._type.title=a,Os(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else $n(this._type),this._type.title="",ts(this._type),this.domNode.classList.add("no-type");if($n(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),$n(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new _t(e,t);_t.equals(n,this._size)||(this._size=n,BIe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}},u(ZT,"SuggestDetailsWidget"),ZT);gq=B8e([U8e(1,Pe)],gq);const Lme=class Lme{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new ie,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new MC,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,s=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=i.width-a.dimension.width,l=!0),a.north&&(s=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+s,left:n.left+r})}a.done&&(n=void 0,i=void 0,s=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const s=w_(document.body),r=this.widget.getLayoutInfo(),a=new _t(220,2*r.lineHeight),l=e.top,d=function(){const w=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),C=-r.borderWidth+e.left+e.width,S=new _t(w,s.height-e.top-r.borderHeight-r.verticalPadding),k=S.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:C,fit:w-t.width,maxSizeTop:S,maxSizeBottom:k,minSize:a.with(Math.min(w,a.width))}}(),c=function(){const w=e.left-r.borderWidth-r.horizontalPadding,C=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),S=new _t(w,s.height-e.top-r.borderHeight-r.verticalPadding),k=S.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:C,fit:w-t.width,maxSizeTop:S,maxSizeBottom:k,minSize:a.with(Math.min(w,a.width))}}(),h=function(){const w=e.left,C=-r.borderWidth+e.top+e.height,S=new _t(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:C,left:w,fit:S.height-t.height,maxSizeBottom:S,maxSizeTop:S,minSize:a.with(S.width)}}(),g=[d,c,h],f=(i=g.find(w=>w.fit>=0))!==null&&i!==void 0?i:g.sort((w,C)=>C.fit-w.fit)[0],p=e.top+e.height-r.borderHeight;let b,_=t.height;const v=Math.max(f.maxSizeTop.height,f.maxSizeBottom.height);_>v&&(_=v);let y;n?_<=f.maxSizeTop.height?(b=!0,y=f.maxSizeTop):(b=!1,y=f.maxSizeBottom):_<=f.maxSizeBottom.height?(b=!1,y=f.maxSizeBottom):(b=!0,y=f.maxSizeTop),this._applyTopLeft({left:f.left,top:b?f.top:p-_}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,f===d,b,f!==d),this._resizable.minSize=f.minSize,this._resizable.maxSize=y,this._resizable.layout(_,Math.min(y.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}};u(Lme,"SuggestDetailsOverlay");let fq=Lme;var xd;(function(o){o[o.FILE=0]="FILE",o[o.FOLDER=1]="FOLDER",o[o.ROOT_FOLDER=2]="ROOT_FOLDER"})(xd||(xd={}));const z8e=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function vk(o,e,t,n){const i=n===xd.ROOT_FOLDER?["rootfolder-icon"]:n===xd.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===qe.data)s=Tu.parseMetaData(t).get(Tu.META_DATA_LABEL);else{const r=t.path.match(z8e);r?(s=yk(r[2].toLowerCase()),r[1]&&i.push(`${yk(r[1].toLowerCase())}-name-dir-icon`)):s=yk(t.authority.toLowerCase())}if(n===xd.FOLDER)i.push(`${s}-name-folder-icon`);else{if(s){if(i.push(`${s}-name-file-icon`),i.push("name-file-icon"),s.length<=255){const a=s.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const r=G8e(o,e,t);r&&i.push(`${yk(r)}-lang-file-icon`)}}return i}u(vk,"getIconClasses");function G8e(o,e,t){if(!t)return null;let n=null;if(t.scheme===qe.data){const s=Tu.parseMetaData(t).get(Tu.META_DATA_MIME);s&&(n=e.getLanguageIdByMimeType(s))}else{const i=o.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==go?n:e.guessLanguageIdByFilepathOrFirstLine(t)}u(G8e,"detectLanguageId");function yk(o){return o.replace(/[\11\12\14\15\40]/g,"/")}u(yk,"cssEscape");var j8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JH=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},oc;function qEe(o){return`suggest-aria-id:${o}`}u(qEe,"getAriaId");const K8e=Yt("suggest-more-info",ue.chevronRight,m("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var JT;const $8e=new(oc=(JT=class{extract(e,t){if(e.textLabel.match(oc._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(oc._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=oc._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},u(JT,"ColorExtractor"),JT),oc._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,oc._regexStrict=new RegExp(`^${oc._regexRelaxed.source}$`,"i"),oc);var QT;let pq=(QT=class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new V,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new ie,n=e;n.classList.add("show-file-icons");const i=Q(e,re(".icon")),s=Q(i,re("span.colorspan")),r=Q(e,re(".contents")),a=Q(r,re(".main")),l=Q(a,re(".icon-label.codicon")),d=Q(a,re("span.left")),c=Q(a,re("span.right")),h=new Pb(d,{supportHighlights:!0,supportIcons:!0});t.add(h);const g=Q(d,re("span.signature-label")),f=Q(d,re("span.qualifier-label")),p=Q(c,re("span.details-label")),b=Q(c,re("span.readMore"+Te.asCSSSelector(K8e)));b.title=m("readMore","Read More");const _=u(()=>{const v=this._editor.getOptions(),y=v.get(49),w=y.getMassagedFontFamily(),C=y.fontFeatureSettings,S=v.get(117)||y.fontSize,k=v.get(118)||y.lineHeight,T=y.fontWeight,E=y.letterSpacing,D=`${S}px`,O=`${k}px`,B=`${E}px`;n.style.fontSize=D,n.style.fontWeight=T,n.style.letterSpacing=B,a.style.fontFamily=w,a.style.fontFeatureSettings=C,a.style.lineHeight=O,i.style.height=O,i.style.width=O,b.style.height=O,b.style.width=O},"configureFont");return _(),t.add(this._editor.onDidChangeConfiguration(v=>{(v.hasChanged(49)||v.hasChanged(117)||v.hasChanged(118))&&_()})),{root:n,left:d,right:c,icon:i,colorspan:s,iconLabel:h,iconContainer:l,parametersLabel:g,qualifierLabel:f,detailsLabel:p,readMore:b,disposables:t}}renderElement(e,t,n){const{completion:i}=e;n.root.id=qEe(t),n.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:iE(e.score)},r=[];if(i.kind===19&&$8e.extract(e,r))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=r[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=vk(this._modelService,this._languageService,Ae.from({scheme:"fake",path:e.textLabel}),xd.FILE),l=vk(this._modelService,this._languageService,Ae.from({scheme:"fake",path:i.detail}),xd.FILE);s.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",s.extraClasses=[vk(this._modelService,this._languageService,Ae.from({scheme:"fake",path:e.textLabel}),xd.FOLDER),vk(this._modelService,this._languageService,Ae.from({scheme:"fake",path:i.detail}),xd.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Te.asClassNameArray(zy.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,s),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=QH(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=QH(i.label.detail||""),n.detailsLabel.textContent=QH(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(116).showInlineDetails?Os(n.detailsLabel):ts(n.detailsLabel),tQ(e)?(n.right.classList.add("can-expand-details"),Os(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),ts(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}},u(QT,"ItemRenderer"),QT);pq=j8e([JH(1,Xt),JH(2,Kt),JH(3,On)],pq);function QH(o){return o.replace(/\r\n|\r|\n/g,"")}u(QH,"stripNewLines");var q8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},wk=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Y8e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},rp;I("editorSuggestWidget.background",{dark:cn,light:cn,hcDark:cn,hcLight:cn},m("editorSuggestWidgetBackground","Background color of the suggest widget."));I("editorSuggestWidget.border",{dark:Za,light:Za,hcDark:Za,hcLight:Za},m("editorSuggestWidgetBorder","Border color of the suggest widget."));const Ck=I("editorSuggestWidget.foreground",{dark:gr,light:gr,hcDark:gr,hcLight:gr},m("editorSuggestWidgetForeground","Foreground color of the suggest widget."));I("editorSuggestWidget.selectedForeground",{dark:Kh,light:Kh,hcDark:Kh,hcLight:Kh},m("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));I("editorSuggestWidget.selectedIconForeground",{dark:mp,light:mp,hcDark:mp,hcLight:mp},m("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const X8e=I("editorSuggestWidget.selectedBackground",{dark:$h,light:$h,hcDark:$h,hcLight:$h},m("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));I("editorSuggestWidget.highlightForeground",{dark:fr,light:fr,hcDark:fr,hcLight:fr},m("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));I("editorSuggestWidget.focusHighlightForeground",{dark:EE,light:EE,hcDark:EE,hcLight:EE},m("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));I("editorSuggestWidgetStatus.foreground",{dark:ke(Ck,.5),light:ke(Ck,.5),hcDark:ke(Ck,.5),hcLight:ke(Ck,.5)},m("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));const Eme=class Eme{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Iu}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(_t.is(n))return _t.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}};u(Eme,"PersistedWidgetSize");let mq=Eme;var eL;let QC=rp=(eL=class{constructor(e,t,n,i,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new si,this._pendingShowDetails=new si,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new bo,this._disposables=new ie,this._onDidSelect=new Id,this._onDidFocus=new Id,this._onDidHide=new V,this._onDidShow=new V,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new V,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new MC,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new bq(this,e),this._persistedSize=new mq(t,e);const g=class g{constructor(p,b,_=!1,v=!1){this.persistedSize=p,this.currentSize=b,this.persistHeight=_,this.persistWidth=v}};u(g,"ResizeState");let r=g,a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(f=>{var p,b,_,v;if(this._resize(f.dimension.width,f.dimension.height),a&&(a.persistHeight=a.persistHeight||!!f.north||!!f.south,a.persistWidth=a.persistWidth||!!f.east||!!f.west),!!f.done){if(a){const{itemHeight:y,defaultSize:w}=this.getLayoutInfo(),C=Math.round(y/2);let{width:S,height:k}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-k)<=C)&&(k=(b=(p=a.persistedSize)===null||p===void 0?void 0:p.height)!==null&&b!==void 0?b:w.height),(!a.persistWidth||Math.abs(a.currentSize.width-S)<=C)&&(S=(v=(_=a.persistedSize)===null||_===void 0?void 0:_.width)!==null&&v!==void 0?v:w.width),this._persistedSize.store(new _t(S,k))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Q(this.element.domNode,re(".message")),this._listElement=Q(this.element.domNode,re(".tree"));const l=s.createInstance(gq,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new fq(l,this.editor);const d=u(()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(116).showIcons),"applyIconStyle");d();const c=s.createInstance(pq,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails(()=>this.toggleDetails())),this._list=new vo("SuggestWidget",this._listElement,{getHeight:f=>this.getLayoutInfo().itemHeight,getTemplateId:f=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>m("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:f=>{let p=f.textLabel;if(typeof f.completion.label!="string"){const{detail:y,description:w}=f.completion.label;y&&w?p=m("label.full","{0} {1}, {2}",p,y,w):y?p=m("label.detail","{0} {1}",p,y):w&&(p=m("label.desc","{0}, {1}",p,w))}if(!f.isResolved||!this._isDetailsVisible())return p;const{documentation:b,detail:_}=f.completion,v=Sg("{0}{1}",_||"",b?typeof b=="string"?b:b.value:"");return m("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p,v)}}}),this._list.style(T_({listInactiveFocusBackground:X8e,listInactiveFocusOutline:Gt})),this._status=s.createInstance(hq,this.element.domNode,lu);const h=u(()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(116).showStatusBar),"applyStatusBarStyle");h(),this._disposables.add(i.onDidColorThemeChange(f=>this._onThemeChange(f))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onTap(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onDidChangeSelection(f=>this._onListSelection(f))),this._disposables.add(this._list.onDidChangeFocus(f=>this._onListFocus(f))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(f=>{f.hasChanged(116)&&(h(),d())})),this._ctxSuggestWidgetVisible=je.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=je.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=je.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=je.HasFocusedSuggestion.bindTo(n),this._disposables.add(Jt(this._details.widget.domNode,"keydown",f=>{this._onDetailsKeydown.fire(f)})),this._disposables.add(this.editor.onMouseDown(f=>this._onEditorMouseDown(f)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=tl(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=Fn(s=>Y8e(this,void 0,void 0,function*(){const r=pu(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>r.dispose()),l=yield n.resolve(s);return r.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:qEe(i)}))}).catch(Be)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:ts(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=rp.LOADING_MESSAGE,ts(this._listElement,this._status.element),Os(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Rg(rp.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=rp.NO_SUGGESTIONS_MESSAGE,ts(this._listElement,this._status.element),Os(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Rg(rp.NO_SUGGESTIONS_MESSAGE);break;case 3:ts(this._messageElement),Os(this._listElement,this._status.element),this._show();break;case 4:ts(this._messageElement),Os(this._listElement,this._status.element),this._show();break;case 5:ts(this._messageElement),Os(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=pu(()=>this._setState(1),t)))}showSuggestions(e,t,n,i,s){var r,a;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(a=this._currentSuggestionDetails)===null||a===void 0||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const l=this._completionModel.items.length,d=l===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),d){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(s?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=hM(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(tQ(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=hM(()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=w_(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.height=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new _t(l,a),this._contentWidget.setPreference(2);else{const d=s.width-r.borderHeight-2*r.horizontalPadding;l>d&&(l=d);const c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,h=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,f=Cn(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=f.top+p.top+p.height,_=Math.min(s.height-b-r.verticalPadding,h),v=f.top+p.top-r.verticalPadding,y=Math.min(v,h);let w=Math.min(Math.max(y,_)+r.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<g&&(a=g),a>w&&(a=w);const C=150;a>_||this._forceRenderingAbove&&v>C?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=y):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=_),this.element.preferredSize=new _t(c,r.defaultSize.height),this.element.maxSize=new _t(d,w),this.element.minSize=new _t(220,g),this._cappedHeight=a===h?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(49),t=Rs(this.editor.getOption(118)||e.lineHeight,8,1e3),n=!this.editor.getOption(116).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,s=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new _t(430,n+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},u(eL,"SuggestWidget"),eL);QC.LOADING_MESSAGE=m("suggestWidget.loading","Loading...");QC.NO_SUGGESTIONS_MESSAGE=m("suggestWidget.noSuggestions","No suggestions.");QC=rp=q8e([wk(1,Rr),wk(2,Re),wk(3,On),wk(4,Pe)],QC);const kme=class kme{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new _t(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}};u(kme,"SuggestContentWidget");let bq=kme;var Z8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},_q;const Dme=class Dme{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:L.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}};u(Dme,"LineSuffix");let vq=Dme;var tL;let br=_q=(tL=class{static get(e){return e.getContribution(_q.ID)}constructor(e,t,n,i,s,r,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=s,this._logService=r,this._telemetryService=a,this._lineSuffix=new si,this._toDispose=new ie,this._selectors=new yq(h=>h.priority),this._onWillInsertSuggestItem=new V,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=s.createInstance(cq,this.editor),this._selectors.register({priority:0,select:(h,g,f)=>this._memoryService.select(h,g,f)});const l=je.InsertMode.bindTo(i);l.set(e.getOption(116).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(116).insertMode))),this.widget=this._toDispose.add(new Em(()=>{const h=this._instantiationService.createInstance(QC,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(_=>this._insertSuggestion(_,0),this));const g=new lq(this.editor,h,this.model,_=>this._insertSuggestion(_,2));this._toDispose.add(g);const f=je.MakesTextEdit.bindTo(this._contextKeyService),p=je.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=je.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(He(()=>{f.reset(),p.reset(),b.reset()})),this._toDispose.add(h.onDidFocus(({item:_})=>{const v=this.editor.getPosition(),y=_.editStart.column,w=v.column;let C=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&w-y===_.completion.insertText.length&&(C=this.editor.getModel().getValueInRange({startLineNumber:v.lineNumber,startColumn:y,endLineNumber:v.lineNumber,endColumn:w})!==_.completion.insertText),f.set(C),p.set(!W.equals(_.editInsertEnd,_.editReplaceEnd)),b.set(!!_.provider.resolveCompletionItem||!!_.completion.documentation||_.completion.detail!==_.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(_=>{if(_.toKeyCodeChord().equals(new Fd(!0,!1,!1,!1,33))||ot&&_.toKeyCodeChord().equals(new Fd(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeyCodeChord().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new Em(()=>this._toDispose.add(new FR(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Em(()=>this._toDispose.add(new hf(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(JC,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new vq(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(h.triggerOptions.shy)return;let g=-1;for(const p of this._selectors.itemsOrderedByPriorityDesc)if(g=p.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),g!==-1)break;g===-1&&(g=0);let f=!1;if(h.triggerOptions.auto){const p=this.editor.getOption(116);p.selectionMode==="never"||p.selectionMode==="always"?f=p.selectionMode==="never":p.selectionMode==="whenTriggerCharacter"?f=h.triggerOptions.triggerKind!==1:p.selectionMode==="whenQuickSuggestion"&&(f=h.triggerOptions.triggerKind===1&&!h.triggerOptions.refilter)}this.widget.value.showSuggestions(h.completionModel,g,h.isFrozen,h.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const d=je.AcceptSuggestionsOnEnter.bindTo(i),c=u(()=>{const h=this.editor.getOption(1);d.set(h==="on"||h==="smart")},"updateFromConfig");this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=gi.get(this.editor);if(!n)return;this._onWillInsertSuggestItem.fire({item:e.item});const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:r}=e,a=[],l=new En;t&1||this.editor.pushUndoStop();const d=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(i,this.editor.getPosition(),r);const c=r.isResolved;let h=-1,g=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const p=ba.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(b=>zt.replaceMove(L.lift(b.range),b.text))),p.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!c){const p=new Fi;let b;const _=i.onDidChangeContent(C=>{if(C.isFlush){l.cancel(),_.dispose();return}for(const S of C.changes){const k=L.getEndPosition(S.range);(!b||W.isBefore(k,b))&&(b=k)}}),v=t;t|=2;let y=!1;const w=this.editor.onWillType(()=>{w.dispose(),y=!0,v&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(b&&r.completion.additionalTextEdits.some(S=>W.isBefore(b,L.getStartPosition(S.range))))return!1;y&&this.editor.pushUndoStop();const C=ba.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(S=>zt.replaceMove(L.lift(S.range),S.text))),C.restoreRelativeVerticalPositionOfCursor(this.editor),(y||!(v&2))&&this.editor.pushUndoStop(),!0}).then(C=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",p.elapsed(),C),g=C===!0?1:C===!1?0:-2}).finally(()=>{_.dispose(),w.dispose()}))}let{insertText:f}=r.completion;if(r.completion.insertTextRules&4||(f=Hu.escape(f)),this.model.cancel(),n.insert(f,{overwriteBefore:d.overwriteBefore,overwriteAfter:d.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===e1.id)this.model.trigger({auto:!0,retrigger:!0});else{const p=new Fi;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(b=>{r.completion.extensionId?Ln(b):Be(b)}).finally(()=>{h=p.elapsed()}))}t&4&&this._alternatives.value.set(e,p=>{for(l.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(p,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,i,c,h,g),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n,i,s){var r,a,l;Math.floor(Math.random()*100)!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(a=(r=e.extensionId)===null||r===void 0?void 0:r.value)!==null&&a!==void 0?a:"unknown",providerId:(l=e.provider._debugDisplayName)!==null&&l!==void 0?l:"unknown",kind:e.completion.kind,basenameHash:TSe(qo(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:vPe(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:i,additionalEditsAsync:s})}getOverwriteInfo(e,t){Lt(this.editor.hasModel());let n=this.editor.getOption(116).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,s=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+r,overwriteAfter:s+a}}_alertCompletionItem(e){if(Ri(e.completion.additionalTextEdits)){const t=m("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Ii(t)}}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=u(()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},"fallback"),i=u(s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=s.editStart.column,l=r.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==s.completion.insertText},"makesTextEdit");Ce.once(this.model.onDidTrigger)(s=>{const r=[];Ce.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{wt(r),n()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(wt(r),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[l];if(!i(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:d,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},u(tL,"SuggestController"),tL);br.ID="editor.contrib.suggestController";br=_q=Z8e([qf(1,_4),qf(2,un),qf(3,Re),qf(4,Pe),qf(5,So),qf(6,xo)],br);const Mme=class Mme{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}};u(Mme,"PriorityRegistry");let yq=Mme;const UF=class UF extends ye{constructor(){super({id:UF.id,label:m("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:ne.and(M.writable,M.hasCompletionItemProvider,je.Visible.toNegated()),kbOpts:{kbExpr:M.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=br.get(t);if(!i)return;let s;n&&typeof n=="object"&&n.auto===!0&&(s=!0),i.triggerSuggest(void 0,s,void 0)}};u(UF,"TriggerSuggestAction");let e1=UF;e1.id="editor.action.triggerSuggest";ft(br.ID,br,2);ae(e1);const wo=100+90,hs=hi.bindToContribution(br.get);he(new hs({id:"acceptSelectedSuggestion",precondition:ne.and(je.Visible,je.HasFocusedSuggestion),handler(o){o.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:ne.and(je.Visible,M.textInputFocus),weight:wo},{primary:3,kbExpr:ne.and(je.Visible,M.textInputFocus,je.AcceptSuggestionsOnEnter,je.MakesTextEdit),weight:wo}],menuOpts:[{menuId:lu,title:m("accept.insert","Insert"),group:"left",order:1,when:je.HasInsertAndReplaceRange.toNegated()},{menuId:lu,title:m("accept.insert","Insert"),group:"left",order:1,when:ne.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("insert"))},{menuId:lu,title:m("accept.replace","Replace"),group:"left",order:1,when:ne.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("replace"))}]}));he(new hs({id:"acceptAlternativeSelectedSuggestion",precondition:ne.and(je.Visible,M.textInputFocus,je.HasFocusedSuggestion),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:1027,secondary:[1026]},handler(o){o.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:lu,group:"left",order:2,when:ne.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("insert")),title:m("accept.replace","Replace")},{menuId:lu,group:"left",order:2,when:ne.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("replace")),title:m("accept.insert","Insert")}]}));lt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");he(new hs({id:"hideSuggestWidget",precondition:je.Visible,handler:o=>o.cancelSuggestWidget(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:9,secondary:[1033]}}));he(new hs({id:"selectNextSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectNextSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));he(new hs({id:"selectNextPageSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectNextPageSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:12,secondary:[2060]}}));he(new hs({id:"selectLastSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectLastSuggestion()}));he(new hs({id:"selectPrevSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));he(new hs({id:"selectPrevPageSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevPageSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:11,secondary:[2059]}}));he(new hs({id:"selectFirstSuggestion",precondition:ne.and(je.Visible,ne.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:o=>o.selectFirstSuggestion()}));he(new hs({id:"focusSuggestion",precondition:ne.and(je.Visible,je.HasFocusedSuggestion.negate()),handler:o=>o.focusSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));he(new hs({id:"focusAndAcceptSuggestion",precondition:ne.and(je.Visible,je.HasFocusedSuggestion.negate()),handler:o=>{o.focusSuggestion(),o.acceptSelectedSuggestion(!0,!1)}}));he(new hs({id:"toggleSuggestionDetails",precondition:ne.and(je.Visible,je.HasFocusedSuggestion),handler:o=>o.toggleSuggestionDetails(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:lu,group:"right",order:1,when:ne.and(je.DetailsVisible,je.CanResolve),title:m("detail.more","show less")},{menuId:lu,group:"right",order:1,when:ne.and(je.DetailsVisible.toNegated(),je.CanResolve),title:m("detail.less","show more")}]}));he(new hs({id:"toggleExplainMode",precondition:je.Visible,handler:o=>o.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));he(new hs({id:"toggleSuggestionFocus",precondition:je.Visible,handler:o=>o.toggleSuggestionFocus(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:2570,mac:{primary:778}}}));he(new hs({id:"insertBestCompletion",precondition:ne.and(M.textInputFocus,ne.equals("config.editor.tabCompletion","on"),JC.AtEnd,je.Visible.toNegated(),hf.OtherSuggestions.toNegated(),gi.InSnippetMode.toNegated()),handler:(o,e)=>{o.triggerSuggestAndAcceptBest(ss(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:wo,primary:2}}));he(new hs({id:"insertNextSuggestion",precondition:ne.and(M.textInputFocus,ne.equals("config.editor.tabCompletion","on"),hf.OtherSuggestions,je.Visible.toNegated(),gi.InSnippetMode.toNegated()),handler:o=>o.acceptNextSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:2}}));he(new hs({id:"insertPrevSuggestion",precondition:ne.and(M.textInputFocus,ne.equals("config.editor.tabCompletion","on"),hf.OtherSuggestions,je.Visible.toNegated(),gi.InSnippetMode.toNegated()),handler:o=>o.acceptPrevSuggestion(),kbOpts:{weight:wo,kbExpr:M.textInputFocus,primary:1026}}));ae(class extends ye{constructor(){super({id:"editor.action.resetSuggestSize",label:m("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(o,e){var t;(t=br.get(e))===null||t===void 0||t.resetWidgetSize()}});const Ame=class Ame extends G{get selectedItem(){return this._selectedItem}constructor(e,t,n,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=n,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=Vt("suggestWidgetInlineCompletionProvider.selectedItem",void 0),this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=br.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(l,d,c)=>{var h;tn(v=>this.checkModelVersion(v));const g=this.editor.getModel();if(!g)return-1;const f=(h=this.suggestControllerPreselector())===null||h===void 0?void 0:h.removeCommonPrefix(g);if(!f)return-1;const p=W.lift(d),b=c.map((v,y)=>{const C=m0.fromSuggestion(s,g,p,v,this.isShiftKeyPressed).toSingleTextEdit().removeCommonPrefix(g),S=f.augments(C);return{index:y,valid:S,prefixLength:C.text.length,suggestItem:v}}).filter(v=>v&&v.valid&&v.prefixLength>0),_=E1e(b,_r(v=>v.prefixLength,gd));return _?_.index:-1}}));let r=!1;const a=u(()=>{r||(r=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))},"bindToSuggestWidget");this._register(Ce.once(s.model.onDidTrigger)(l=>{a()})),this._register(s.onWillInsertSuggestItem(l=>{const d=this.editor.getPosition(),c=this.editor.getModel();if(!d||!c)return;const h=m0.fromSuggestion(s,c,d,l.item,this.isShiftKeyPressed);this.onWillAccept(h)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!J8e(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,tn(n=>{this.checkModelVersion(n),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,n)}))}getSuggestItemInfo(){const e=br.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),i=this.editor.getModel();if(!(!t||!n||!i))return m0.fromSuggestion(e,i,n,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=br.get(this.editor);e?.stopForceRenderingAbove()}forceRenderingAbove(){const e=br.get(this.editor);e?.forceRenderingAbove()}};u(Ame,"SuggestWidgetAdaptor");let wq=Ame;const zF=class zF{static fromSuggestion(e,t,n,i,s){let{insertText:r}=i.completion,a=!1;if(i.completion.insertTextRules&4){const d=new Hu().parse(r);d.children.length<100&&NR.adjustWhitespace(t,n,!0,d),r=d.toString(),a=!0}const l=e.getOverwriteInfo(i,s);return new zF(L.fromPositions(n.delta(0,-l.overwriteBefore),n.delta(0,Math.max(l.overwriteAfter,0))),r,i.completion.kind,a)}constructor(e,t,n,i){this.range=e,this.insertText=t,this.completionItemKind=n,this.isSnippetText=i}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new bD(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new qC(this.range,this.insertText)}};u(zF,"SuggestItemInfo");let m0=zF;function J8e(o,e){return o===e?!0:!o||!e?!1:o.equals(e)}u(J8e,"suggestItemInfoEquals");var Q8e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rc=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Cq,nL;let Co=Cq=(nL=class extends G{static get(e){return e.getContribution(Cq.ID)}constructor(e,t,n,i,s,r,a,l,d){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.configurationService=i,this.commandService=s,this.debounceService=r,this.languageFeaturesService=a,this.audioCueService=l,this._keybindingService=d,this.model=bN("inlineCompletionModel",void 0),this.textModelVersionId=Vt("textModelVersionId",-1),this.cursorPosition=Vt("cursorPosition",new W(1,1)),this.suggestWidgetAdaptor=this._register(new wq(this.editor,()=>{var g,f;return(f=(g=this.model.get())===null||g===void 0?void 0:g.selectedInlineCompletion.get())===null||f===void 0?void 0:f.toSingleTextEdit(void 0)},g=>this.updateObservables(g,eo.Other),g=>{tn(f=>{var p;this.updateObservables(f,eo.Other),(p=this.model.get())===null||p===void 0||p.handleSuggestAccepted(g)})})),this._enabled=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(61).enabled),this.ghostTextWidget=this._register(this.instantiationService.createInstance(j$,this.editor,{ghostText:this.model.map((g,f)=>g?.ghostText.read(f)),minReservedLineCount:_N(0),targetTextModel:this.model.map(g=>g?.textModel)})),this._debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(new Pi(this.contextKeyService,this.model)),this._register(Ce.runAndSubscribe(e.onDidChangeModel,()=>tn(g=>{this.model.set(void 0,g),this.updateObservables(g,eo.Other);const f=e.getModel();if(f){const p=t.createInstance(sq,f,this.suggestWidgetAdaptor.selectedItem,this.cursorPosition,this.textModelVersionId,this._debounceValue,ci(e.onDidChangeConfiguration,()=>e.getOption(116).preview),ci(e.onDidChangeConfiguration,()=>e.getOption(116).previewMode),ci(e.onDidChangeConfiguration,()=>e.getOption(61).mode),this._enabled);this.model.set(p,g)}})));const c=u(g=>{var f;return g.isUndoing?eo.Undo:g.isRedoing?eo.Redo:!((f=this.model.get())===null||f===void 0)&&f.isAcceptingPartially?eo.AcceptWord:eo.Other},"getReason");this._register(e.onDidChangeModelContent(g=>tn(f=>this.updateObservables(f,c(g))))),this._register(e.onDidChangeCursorPosition(g=>tn(f=>{var p;this.updateObservables(f,eo.Other),(g.reason===3||g.source==="api")&&((p=this.model.get())===null||p===void 0||p.stop(f))}))),this._register(e.onDidType(()=>tn(g=>{var f;this.updateObservables(g,eo.Other),this._enabled.get()&&((f=this.model.get())===null||f===void 0||f.trigger(g))}))),this._register(this.commandService.onDidExecuteCommand(g=>{new Set([Fm.Tab.id,Fm.DeleteLeft.id,Fm.DeleteRight.id,mEe,"acceptSelectedSuggestion"]).has(g.commandId)&&e.hasTextFocus()&&this._enabled.get()&&tn(p=>{var b;(b=this.model.get())===null||b===void 0||b.trigger(p)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.contextKeyService.getContextKeyValue("accessibleViewIsShown")||this.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(61).keepOnBlur||Pu.dropDownVisible||tn(g=>{var f;(f=this.model.get())===null||f===void 0||f.stop(g)})})),this._register(Rt(g=>{var f;const p=(f=this.model.read(g))===null||f===void 0?void 0:f.state.read(g);p?.suggestItem?p.ghostText.lineCount>=2&&this.suggestWidgetAdaptor.forceRenderingAbove():this.suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(He(()=>{this.suggestWidgetAdaptor.stopForceRenderingAbove()}));let h;this._register(Rt(g=>{const f=this.model.read(g),p=f?.state.read(g);if(!f||!p||!p.inlineCompletion){h=void 0;return}if(p.inlineCompletion.semanticId!==h){h=p.inlineCompletion.semanticId;const b=f.textModel.getLineContent(p.ghostText.lineNumber);this.audioCueService.playAudioCue(rt.inlineSuggestion).then(()=>{this.editor.getOption(7)&&this.provideScreenReaderUpdate(p.ghostText.renderForScreenReader(b))})}})),this._register(new hK(this.editor,this.model,this.instantiationService)),this._register(this.configurationService.onDidChangeConfiguration(g=>{g.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})}provideScreenReaderUpdate(e){const t=this.contextKeyService.getContextKeyValue("accessibleViewIsShown"),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let i;!t&&n&&this.editor.getOption(146)&&(i=m("showAccessibleViewHint","Inspect this in the accessible view ({0})",n.getAriaLabel())),Ii(i?e+", "+i:e)}updateObservables(e,t){var n,i;const s=this.editor.getModel();this.textModelVersionId.set((n=s?.getVersionId())!==null&&n!==void 0?n:-1,e,t),this.cursorPosition.set((i=this.editor.getPosition())!==null&&i!==void 0?i:new W(1,1),e)}shouldShowHoverAt(e){var t;const n=(t=this.model.get())===null||t===void 0?void 0:t.ghostText.get();return n?n.parts.some(i=>e.containsPosition(new W(n.lineNumber,i.column))):!1}shouldShowHoverAtViewZone(e){return this.ghostTextWidget.ownsViewZone(e)}},u(nL,"InlineCompletionsController"),nL);Co.ID="editor.contrib.inlineCompletionsController";Co=Cq=Q8e([rc(1,Pe),rc(2,Re),rc(3,at),rc(4,un),rc(5,Jo),rc(6,we),rc(7,wf),rc(8,At)],Co);var Xu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const GF=class GF extends ye{constructor(){super({id:GF.ID,label:m("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:ne.and(M.writable,Pi.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);(n=i?.model.get())===null||n===void 0||n.next()})}};u(GF,"ShowNextInlineSuggestionAction");let OR=GF;OR.ID=_Ee;const jF=class jF extends ye{constructor(){super({id:jF.ID,label:m("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:ne.and(M.writable,Pi.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);(n=i?.model.get())===null||n===void 0||n.previous()})}};u(jF,"ShowPreviousInlineSuggestionAction");let HR=jF;HR.ID=bEe;const Ime=class Ime extends ye{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:m("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:M.writable})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);(n=i?.model.get())===null||n===void 0||n.triggerExplicitly()})}};u(Ime,"TriggerInlineSuggestionAction");let Sq=Ime;const Nme=class Nme extends ye{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:m("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:ne.and(M.writable,Pi.inlineSuggestionVisible),kbOpts:{weight:100+1,primary:2065,kbExpr:ne.and(M.writable,Pi.inlineSuggestionVisible)},menuOpts:[{menuId:A.InlineSuggestionToolbar,title:m("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);yield(n=i?.model.get())===null||n===void 0?void 0:n.acceptNextWord(i.editor)})}};u(Nme,"AcceptNextWordOfInlineCompletion");let xq=Nme;const Rme=class Rme extends ye{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:m("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:ne.and(M.writable,Pi.inlineSuggestionVisible),kbOpts:{weight:100+1},menuOpts:[{menuId:A.InlineSuggestionToolbar,title:m("acceptLine","Accept Line"),group:"secondary",order:2}]})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);yield(n=i?.model.get())===null||n===void 0?void 0:n.acceptNextLine(i.editor)})}};u(Rme,"AcceptNextLineOfInlineCompletion");let Tq=Rme;const Pme=class Pme extends ye{constructor(){super({id:mEe,label:m("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:Pi.inlineSuggestionVisible,menuOpts:[{menuId:A.InlineSuggestionToolbar,title:m("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:ne.and(Pi.inlineSuggestionVisible,M.tabMovesFocus.toNegated(),Pi.inlineSuggestionHasIndentationLessThanTabSize,je.Visible.toNegated(),M.hoverFocused.toNegated())}})}run(e,t){var n;return Xu(this,void 0,void 0,function*(){const i=Co.get(t);i&&((n=i.model.get())===null||n===void 0||n.accept(i.editor),i.editor.focus())})}};u(Pme,"AcceptInlineCompletion");let Lq=Pme;const KF=class KF extends ye{constructor(){super({id:KF.ID,label:m("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:Pi.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return Xu(this,void 0,void 0,function*(){const n=Co.get(t);tn(i=>{var s;(s=n?.model.get())===null||s===void 0||s.stop(i)})})}};u(KF,"HideInlineCompletion");let VR=KF;VR.ID="editor.action.inlineSuggest.hide";const $F=class $F extends $o{constructor(){super({id:$F.ID,title:m("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:A.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:ne.equals("config.editor.inlineSuggest.showToolbar","always")})}run(e,t){return Xu(this,void 0,void 0,function*(){const n=e.get(at),s=n.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";n.updateValue("editor.inlineSuggest.showToolbar",s)})}};u($F,"ToggleAlwaysShowInlineSuggestionToolbar");let WR=$F;WR.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var eBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const Fme=class Fme{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};u(Fme,"InlineCompletionsHover");let Eq=Fme;var iL;let kq=(iL=class{constructor(e,t,n,i,s,r){this._editor=e,this._languageService=t,this._openerService=n,this.accessibilityService=i,this._instantiationService=s,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Co.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new Km(1e3,this,L.fromPositions(this._editor.getModel().validatePosition(i.positionBefore||i.position)),e.event.posx,e.event.posy,!1)}return n.type===7&&t.shouldShowHoverAt(n.range)?new Km(1e3,this,n.range,e.event.posx,e.event.posy,!1):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new Km(1e3,this,n.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(61).showToolbar==="always")return[];const n=Co.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Eq(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new ie,i=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(7)&&this.renderScreenReaderText(e,i,n);const s=i.controller.model.get(),r=this._instantiationService.createInstance(Pu,this._editor,!1,_N(null),s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.selectedInlineCompletion.map(a=>{var l;return(l=a?.inlineCompletion.source.inlineCompletions.commands)!==null&&l!==void 0?l:[]}));return e.fragment.appendChild(r.getDomNode()),s.triggerExplicitly(),n.add(r),n}renderScreenReaderText(e,t,n){const i=re,s=i("div.hover-row.markdown-hover"),r=Q(s,i("div.hover-contents",{"aria-live":"assertive"})),a=n.add(new zd({editor:this._editor},this._languageService,this._openerService)),l=u(d=>{n.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const c=m("inlineSuggestionFollows","Suggestion:"),h=n.add(a.render(new zn().appendText(c).appendCodeblock("text",d)));r.replaceChildren(h.element)},"render");n.add(Rt(d=>{var c;const h=(c=t.controller.model.read(d))===null||c===void 0?void 0:c.ghostText.read(d);if(h){const g=this._editor.getModel().getLineContent(h.lineNumber);l(h.renderForScreenReader(g))}else wi(r)})),e.fragment.appendChild(s)}},u(iL,"InlineCompletionsHoverParticipant"),iL);kq=eBe([nv(1,Kt),nv(2,Ks),nv(3,El),nv(4,Pe),nv(5,xo)],kq);ft(Co.ID,Co,3);ae(Sq);ae(OR);ae(HR);ae(xq);ae(Tq);ae(Lq);ae(VR);Sn(WR);Pf.register(kq);function Ns(o,e){let t=0;for(let n=0;n<o.length;n++)o.charAt(n)==="	"?t+=e:t++;return t}u(Ns,"getSpaceCnt");function b0(o,e,t){o=o<0?0:o;let n="";if(!t){const i=Math.floor(o/e);o=o%e;for(let s=0;s<i;s++)n+="	"}for(let i=0;i<o;i++)n+=" ";return n}u(b0,"generateIndent");var tBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},nBe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};function YEe(o,e,t,n,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(o.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,o.getLineCount());t<=n&&s.unIndentedLinePattern;){const _=o.getLineContent(t);if(!s.unIndentedLinePattern.test(_))break;t++}if(t>n-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=o.getOptions(),d=u((_,v)=>(v=v||1,Ro.shiftIndent(_,_.length+v,r,a,l)),"shiftIndent"),c=u((_,v)=>(v=v||1,Ro.unshiftIndent(_,_.length+v,r,a,l)),"unshiftIndent"),h=[];let g;const f=o.getLineContent(t);let p=f;if(i!=null){g=i;const _=Dt(f);p=g+f.substring(_.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(p)&&(g=c(g),p=g+f.substring(_.length)),f!==p&&h.push(zt.replaceMove(new xe(t,1,t,_.length+1),FM(g,a,l)))}else g=Dt(f);let b=g;s.increaseIndentPattern&&s.increaseIndentPattern.test(p)?(b=d(b),g=d(g)):s.indentNextLinePattern&&s.indentNextLinePattern.test(p)&&(b=d(b)),t++;for(let _=t;_<=n;_++){const v=o.getLineContent(_),y=Dt(v),w=b+v.substring(y.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(w)&&(b=c(b),g=c(g)),y!==b&&h.push(zt.replaceMove(new xe(_,1,_,y.length+1),FM(b,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(v))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(w)?(g=d(g),b=g):s.indentNextLinePattern&&s.indentNextLinePattern.test(w)?b=d(b):b=g)}return h}u(YEe,"getReindentEditOperations");const qF=class qF extends ye{constructor(){super({id:qF.ID,label:m("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:M.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new Iq(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}};u(qF,"IndentationToSpacesAction");let BR=qF;BR.ID="editor.action.indentationToSpaces";const YF=class YF extends ye{constructor(){super({id:YF.ID,label:m("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:M.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),s=t.getSelection();if(!s)return;const r=new Nq(s,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}};u(YF,"IndentationToTabsAction");let UR=YF;UR.ID="editor.action.indentationToTabs";const Ome=class Ome extends ye{constructor(e,t,n){super(n),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const n=e.get(xa),i=e.get(Xt),s=t.getModel();if(!s)return;const r=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=s.getOptions(),l=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===r.tabSize&&c===a.tabSize?m("configuredTabSize","Configured Tab Size"):c===r.tabSize?m("defaultTabSize","Default Tab Size"):c===a.tabSize?m("currentTabSize","Current Tab Size"):void 0})),d=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(l,{placeHolder:m({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[d]}).then(c=>{if(c&&s&&!s.isDisposed()){const h=parseInt(c.label,10);this.displaySizeOnly?s.updateOptions({tabSize:h}):s.updateOptions({tabSize:h,indentSize:h,insertSpaces:this.insertSpaces})}})},50)}};u(Ome,"ChangeIndentationSizeAction");let t1=Ome;const XF=class XF extends t1{constructor(){super(!1,!1,{id:XF.ID,label:m("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}};u(XF,"IndentUsingTabs");let zR=XF;zR.ID="editor.action.indentUsingTabs";const ZF=class ZF extends t1{constructor(){super(!0,!1,{id:ZF.ID,label:m("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}};u(ZF,"IndentUsingSpaces");let GR=ZF;GR.ID="editor.action.indentUsingSpaces";const JF=class JF extends t1{constructor(){super(!0,!0,{id:JF.ID,label:m("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}};u(JF,"ChangeTabDisplaySize");let jR=JF;jR.ID="editor.action.changeTabDisplaySize";const QF=class QF extends ye{constructor(){super({id:QF.ID,label:m("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(Xt),i=t.getModel();if(!i)return;const s=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(s.insertSpaces,s.tabSize)}};u(QF,"DetectIndentation");let KR=QF;KR.ID="editor.action.detectIndentation";const Hme=class Hme extends ye{constructor(){super({id:"editor.action.reindentlines",label:m("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:M.writable})}run(e,t){const n=e.get(Pt),i=t.getModel();if(!i)return;const s=YEe(i,n,1,i.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}};u(Hme,"ReindentLinesAction");let Dq=Hme;const Vme=class Vme extends ye{constructor(){super({id:"editor.action.reindentselectedlines",label:m("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:M.writable})}run(e,t){const n=e.get(Pt),i=t.getModel();if(!i)return;const s=t.getSelections();if(s===null)return;const r=[];for(const a of s){let l=a.startLineNumber,d=a.endLineNumber;if(l!==d&&a.endColumn===1&&d--,l===1){if(l===d)continue}else l--;const c=YEe(i,n,l,d);r.push(...c)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}};u(Vme,"ReindentSelectedLinesAction");let Mq=Vme;const Wme=class Wme{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const i of this._edits)t.addEditOperation(L.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};u(Wme,"AutoIndentOnPasteCommand");let Aq=Wme;var sL;let n1=(sL=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new ie,this.callOnModel=new ie,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(11)<4||this.editor.getOption(54))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(11),{tabSize:s,indentSize:r,insertSpaces:a}=n.getOptions(),l=[],d={shiftIndent:f=>Ro.shiftIndent(f,f.length+1,s,r,a),unshiftIndent:f=>Ro.unshiftIndent(f,f.length+1,s,r,a)};let c=e.startLineNumber;for(;c<=e.endLineNumber;){if(this.shouldIgnoreLine(n,c)){c++;continue}break}if(c>e.endLineNumber)return;let h=n.getLineContent(c);if(!/\S/.test(h.substring(0,e.startColumn-1))){const f=zv(i,n,n.getLanguageId(),c,d,this._languageConfigurationService);if(f!==null){const p=Dt(h),b=Ns(f,s),_=Ns(p,s);if(b!==_){const v=b0(b,s,a);l.push({range:new L(c,1,c,p.length+1),text:v}),h=v+h.substr(p.length)}else{const v=Exe(n,c,this._languageConfigurationService);if(v===0||v===8)return}}}const g=c;for(;c<e.endLineNumber;){if(!/\S/.test(n.getLineContent(c+1))){c++;continue}break}if(c!==e.endLineNumber){const p=zv(i,{tokenization:{getLineTokens:b=>n.tokenization.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,_)=>n.getLanguageIdAtPosition(b,_)},getLineContent:b=>b===g?h:n.getLineContent(b)},n.getLanguageId(),c+1,d,this._languageConfigurationService);if(p!==null){const b=Ns(p,s),_=Ns(Dt(n.getLineContent(c+1)),s);if(b!==_){const v=b-_;for(let y=c+1;y<=e.endLineNumber;y++){const w=n.getLineContent(y),C=Dt(w),k=Ns(C,s)+v,T=b0(k,s,a);T!==C&&l.push({range:new L(y,1,y,C.length+1),text:T})}}}}if(l.length>0){this.editor.pushUndoStop();const f=new Aq(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",f),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const s=i.findTokenIndexAtOffset(n);if(s>=0&&i.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},u(sL,"AutoIndentOnPaste"),sL);n1.ID="editor.contrib.autoIndentOnPaste";n1=tBe([nBe(1,Pt)],n1);function XEe(o,e,t,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let i="";for(let r=0;r<t;r++)i+=" ";const s=new RegExp(i,"gi");for(let r=1,a=o.getLineCount();r<=a;r++){let l=o.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=o.getLineMaxColumn(r)),l===1)continue;const d=new L(r,1,r,l),c=o.getValueInRange(d),h=n?c.replace(/\t/ig,i):c.replace(s,"	");e.addEditOperation(d,h)}}u(XEe,"getIndentationEditOperations");const Bme=class Bme{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),XEe(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};u(Bme,"IndentationToSpacesCommand");let Iq=Bme;const Ume=class Ume{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),XEe(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};u(Ume,"IndentationToTabsCommand");let Nq=Ume;ft(n1.ID,n1,2);ae(BR);ae(UR);ae(zR);ae(GR);ae(jR);ae(KR);ae(Dq);ae(Mq);var $R=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const zme=class zme{constructor(e,t){this.range=e,this.direction=t}};u(zme,"InlayHintAnchor");let qR=zme;const eO=class eO{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new eO(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return $R(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return $R(this,void 0,void 0,function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=i?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=i?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(i){Ln(i),this._isResolved=!1}})}};u(eO,"InlayHintItem");let Rq=eO;const ky=class ky{static create(e,t,n,i){return $R(this,void 0,void 0,function*(){const s=[],r=e.ordered(t).reverse().map(a=>n.map(l=>$R(this,void 0,void 0,function*(){try{const d=yield a.provideInlayHints(t,l,i);d?.hints.length&&s.push([d,a])}catch(d){Ln(d)}})));if(yield Promise.all(r.flat()),i.isCancellationRequested||t.isDisposed())throw new al;return new ky(n,s,t)})}constructor(e,t,n){this._disposables=new ie,this.ranges=e,this.provider=new Set;const i=[];for(const[s,r]of t){this._disposables.add(s),this.provider.add(r);for(const a of s.hints){const l=n.validatePosition(a.position);let d="before";const c=ky._getRangeAtPosition(n,l);let h;c.getStartPosition().isBefore(l)?(h=L.fromPositions(c.getStartPosition(),l),d="after"):(h=L.fromPositions(l,c.getEndPosition()),d="before"),i.push(new Rq(a,new qR(h,d),r))}}this.items=i.sort((s,r)=>W.compare(s.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new L(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);const s=e.tokenization.getLineTokens(n),r=t.column-1,a=s.findTokenIndexAtOffset(r);let l=s.getStartOffset(a),d=s.getEndOffset(a);return d-l===1&&(l===r&&a>1?(l=s.getStartOffset(a-1),d=s.getEndOffset(a-1)):d===r&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),d=s.getEndOffset(a+1))),new L(n,l+1,n,d+1)}};u(ky,"InlayHintsFragments");let YR=ky;function iBe(o){return Ae.from({scheme:qe.command,path:o.id,query:o.arguments&&encodeURIComponent(JSON.stringify(o.arguments))}).toString()}u(iBe,"asCommandLink");var _0=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function sBe(o,e,t,n){var i;return _0(this,void 0,void 0,function*(){const s=o.get(Ds),r=o.get(To),a=o.get(un),l=o.get(Pe),d=o.get(_n);if(yield n.item.resolve(Ze.None),!n.part.location)return;const c=n.part.location,h=[],g=new Set(Ni.getMenuItems(A.EditorContext).map(p=>fp(p)?p.command.id:c4()));for(const p of wa.all())g.has(p.desc.id)&&h.push(new qn(p.desc.id,Er.label(p.desc,{renderShortTitle:!0}),void 0,!0,()=>_0(this,void 0,void 0,function*(){const b=yield s.createModelReference(c.uri);try{const _=new qb(b.object.textEditorModel,L.getStartPosition(c.range)),v=n.item.anchor.range;yield l.invokeFunction(p.runEditorCommand.bind(p),e,_,v)}finally{b.dispose()}})));if(n.part.command){const{command:p}=n.part;h.push(new ui),h.push(new qn(p.id,p.title,void 0,!0,()=>_0(this,void 0,void 0,function*(){var b;try{yield a.executeCommand(p.id,...(b=p.arguments)!==null&&b!==void 0?b:[])}catch(_){d.notify({severity:FO.Error,source:n.item.provider.displayName,message:_})}})))}const f=e.getOption(125);r.showContextMenu({domForShadowRoot:f&&(i=e.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:()=>{const p=Cn(t);return{x:p.left,y:p.top+p.height+8}},getActions:()=>h,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}u(sBe,"showGoToContextMenu");function ZEe(o,e,t,n){return _0(this,void 0,void 0,function*(){const s=yield o.get(Ds).createModelReference(n.uri);yield t.invokeWithinContext(r=>_0(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=r.get(Re),d=Es.inPeekEditor.getValue(l),c=!a&&t.getOption(86)&&!d;return new sf({openToSide:a,openInPeek:c,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new qb(s.object.textEditorModel,L.getStartPosition(n.range)),L.lift(n.range))})),s.dispose()})}u(ZEe,"goToDefinitionWithLocation");var oBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ap=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},eD;const Dy=class Dy{constructor(){this._entries=new pl(50)}get(e){const t=Dy._key(e);return this._entries.get(t)}set(e,t){const n=Dy._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}};u(Dy,"InlayHintsCache");let Pq=Dy;const JEe=nt("IInlayHintsCache");ct(JEe,Pq,1);const Gme=class Gme{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}};u(Gme,"RenderedInlayHintLabelPart");let i1=Gme;const jme=class jme{constructor(e,t){this.part=e,this.hasTriggerModifier=t}};u(jme,"ActiveInlayHintInfo");let Fq=jme;var oL;let gf=eD=(oL=class{static get(e){var t;return(t=e.getContribution(eD.ID))!==null&&t!==void 0?t:void 0}constructor(e,t,n,i,s,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=s,this._notificationService=r,this._instaService=a,this._disposables=new ie,this._sessionDisposables=new ie,this._decorationsMetadata=new Map,this._ruleFactory=new _w(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(138)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(138);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(He(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let i;const s=new Set,r=new Et(()=>ap(this,void 0,void 0,function*(){const a=Date.now();i?.dispose(!0),i=new En;const l=t.onWillDispose(()=>i?.cancel());try{const d=i.token,c=yield YR.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),d);if(r.delay=this._debounceInfo.update(t,Date.now()-a),d.isCancellationRequested){c.dispose();return}for(const h of c.provider)typeof h.onDidChangeInlayHints=="function"&&!s.has(h)&&(s.add(h),this._sessionDisposables.add(h.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(c),this._updateHintsDecorators(c.ranges,c.items),this._cacheHintsForFastRestore(t)}catch(d){Be(d)}finally{i.dispose(),l.dispose()}}),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add(He(()=>i?.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{const l=Math.max(r.delay,1250);r.schedule(l)})),e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(db.getInstance().event(d=>{if(!this._editor.hasModel())return;const c=d.altKey&&d.ctrlKey&&!(d.shiftKey||d.metaKey)?l:a;if(c!==this._activeRenderMode){this._activeRenderMode=c;const h=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(h);this._updateHintsDecorators([h.getFullModelRange()],g),r.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new ie,t=e.add(new $b(this._editor)),n=new ie;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[s]=i,r=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!r||!a){n.clear();return}const l=new En;n.add(He(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new Fq(r,s.hasTriggerModifier):void 0;const d=a.validatePosition(r.item.hint.position).lineNumber,c=new L(d,1,d,a.getLineMaxColumn(d)),h=this._getInlineHintsForRange(c);this._updateHintsDecorators([c],h),n.add(He(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([c],h)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(i=>ap(this,void 0,void 0,function*(){const s=this._getInlayHintLabelPart(i);if(s){const r=s.part;r.location?this._instaService.invokeFunction(ZEe,i,this._editor,r.location):a5.is(r.command)&&(yield this._invokeCommand(r.command,s.item))}}))),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(t=>ap(this,void 0,void 0,function*(){if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),yield n.item.resolve(Ze.None),Ri(n.item.hint.textEdits))){const i=n.item.hint.textEdits.map(s=>zt.replace(L.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",i),e()}}))}_installContextMenu(){return this._editor.onContextMenu(e=>ap(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(sBe,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof Vg&&n?.attachedData instanceof i1)return n.attachedData}_invokeCommand(e,t){var n;return ap(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(i){this._notificationService.notify({severity:FO.Error,source:t.provider.displayName,message:i})}})}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;const s=e.getDecorationRange(n);if(s){const r=new qR(s,i.item.anchor.direction),a=i.item.with({anchor:r});t.set(i.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const s of n.sort(L.compareRangesUsingStarts)){const r=t.validateRange(new L(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));i.length===0||!L.areIntersectingOrTouching(i[i.length-1],r)?i.push(r):i[i.length-1]=L.plusRange(i[i.length-1],r)}return i}_updateHintsDecorators(e,t){var n,i;const s=[],r=u((b,_,v,y,w)=>{const C={content:v,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:_.className,cursorStops:y,attachedData:w};s.push({item:b,classNameRef:_,decoration:{range:b.anchor.range,options:{description:"InlayHint",showIfCollapsed:b.anchor.range.isEmpty(),collapseOnReplaceEdit:!b.anchor.range.isEmpty(),stickiness:0,[b.anchor.direction]:this._activeRenderMode===0?C:void 0}}})},"addInjectedText"),a=u((b,_)=>{const v=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(b,v," ",_?da.Right:da.None)},"addInjectedWhitespace"),{fontSize:l,fontFamily:d,padding:c,isUniform:h}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,d);for(const b of t){b.hint.paddingLeft&&a(b,!1);const _=typeof b.hint.label=="string"?[{label:b.hint.label}]:b.hint.label;for(let v=0;v<_.length;v++){const y=_[v],w=v===0,C=v===_.length-1,S={fontSize:`${l}px`,fontFamily:`var(${g}), ${Us.fontFamily}`,verticalAlign:h?"baseline":"middle",unicodeBidi:"isolate"};Ri(b.hint.textEdits)&&(S.cursor="default"),this._fillInColors(S,b.hint),(y.command||y.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===b&&this._activeInlayHintPart.part.index===v&&(S.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(S.color=ln(tRe),S.cursor="pointer")),c&&(w&&C?(S.padding=`1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px`):w?(S.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,S.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):C?(S.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,S.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):S.padding="1px 0 1px 0"),r(b,this._ruleFactory.createClassNameRef(S),rBe(y.label),C&&!b.hint.paddingRight?da.Right:da.None,new i1(b,v))}if(b.hint.paddingRight&&a(b,!0),s.length>eD._MAX_DECORATORS)break}const f=[];for(const b of e)for(const{id:_}of(i=this._editor.getDecorationsInRange(b))!==null&&i!==void 0?i:[]){const v=this._decorationsMetadata.get(_);v&&(f.push(_),v.classNameRef.dispose(),this._decorationsMetadata.delete(_))}const p=ba.capture(this._editor);this._editor.changeDecorations(b=>{const _=b.deltaDecorations(f,s.map(v=>v.decoration));for(let v=0;v<_.length;v++){const y=s[v];this._decorationsMetadata.set(_[v],y)}}),p.restore(this._editor)}_fillInColors(e,t){t.kind===vD.Parameter?(e.backgroundColor=ln(oRe),e.color=ln(sRe)):t.kind===vD.Type?(e.backgroundColor=ln(iRe),e.color=ln(nRe)):(e.backgroundColor=ln(vd),e.color=ln(_d))}_getLayoutInfo(){const e=this._editor.getOption(138),t=e.padding,n=this._editor.getOption(51),i=this._editor.getOption(48);let s=e.fontSize;(!s||s<5||s>n)&&(s=n);const r=e.fontFamily||i;return{fontSize:s,fontFamily:r,padding:t,isUniform:!t&&r===i&&s===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},u(oL,"InlayHintsController"),oL);gf.ID="editor.contrib.InlayHints";gf._MAX_DECORATORS=1500;gf=eD=oBe([Yf(1,we),Yf(2,Jo),Yf(3,JEe),Yf(4,un),Yf(5,_n),Yf(6,Pe)],gf);function rBe(o){const e=" ";return o.replace(/[ \t]/g,e)}u(rBe,"fixSpace");lt.registerCommand("_executeInlayHintProvider",(o,...e)=>ap(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(Ae.isUri(t)),Lt(L.isIRange(n));const{inlayHintsProvider:i}=o.get(we),s=yield o.get(Ds).createModelReference(t);try{const r=yield YR.create(i,s.object.textEditorModel,[L.lift(n)],Ze.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{s.dispose()}}));var aBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},iv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},QCe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},lBe=globalThis&&globalThis.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=o[s]&&function(r){return new Promise(function(a,l){r=o[s](r),i(a,l,r.done,r.value)})}}function i(s,r,a,l){Promise.resolve(l).then(function(d){s({value:d,done:a})},r)}};const Kme=class Kme extends Km{constructor(e,t,n,i){super(10,t,e.item.anchor.range,n,i,!0),this.part=e}};u(Kme,"InlayHintsHoverAnchor");let XR=Kme;var rL;let Oq=(rL=class extends eR{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!gf.get(this._editor)||e.target.type!==6)return null;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return i instanceof Vg&&i.attachedData instanceof i1?new XR(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof XR?new Ss(i=>QCe(this,void 0,void 0,function*(){var s,r,a,l;const{part:d}=e;if(yield d.item.resolve(n),n.isCancellationRequested)return;let c;typeof d.item.hint.tooltip=="string"?c=new zn().appendText(d.item.hint.tooltip):d.item.hint.tooltip&&(c=d.item.hint.tooltip),c&&i.emitOne(new Fo(this,e.range,[c],!1,0)),Ri(d.item.hint.textEdits)&&i.emitOne(new Fo(this,e.range,[new zn().appendText(m("hint.dbl","Double-click to insert"))],!1,10001));let h;if(typeof d.part.tooltip=="string"?h=new zn().appendText(d.part.tooltip):d.part.tooltip&&(h=d.part.tooltip),h&&i.emitOne(new Fo(this,e.range,[h],!1,1)),d.part.location||d.part.command){let _;const y=this._editor.getOption(76)==="altKey"?ot?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):ot?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");d.part.location&&d.part.command?_=new zn().appendText(m("hint.defAndCommand","Go to Definition ({0}), right click for more",y)):d.part.location?_=new zn().appendText(m("hint.def","Go to Definition ({0})",y)):d.part.command&&(_=new zn(`[${m("hint.cmd","Execute Command")}](${iBe(d.part.command)} "${d.part.command.title}") (${y})`,{isTrusted:!0})),_&&i.emitOne(new Fo(this,e.range,[_],!1,1e4))}const g=yield this._resolveInlayHintLabelPartHover(d,n);try{for(var f=!0,p=lBe(g),b;b=yield p.next(),s=b.done,!s;f=!0){l=b.value,f=!1;const _=l;i.emitOne(_)}}catch(_){r={error:_}}finally{try{!f&&!s&&(a=p.return)&&(yield a.call(p))}finally{if(r)throw r.error}}})):Ss.EMPTY}_resolveInlayHintLabelPartHover(e,t){return QCe(this,void 0,void 0,function*(){if(!e.part.location)return Ss.EMPTY;const{uri:n,range:i}=e.part.location,s=yield this._resolverService.createModelReference(n);try{const r=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?BJ(this._languageFeaturesService.hoverProvider,r,new W(i.startLineNumber,i.startColumn),t).filter(a=>!Db(a.hover.contents)).map(a=>new Fo(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):Ss.EMPTY}finally{s.dispose()}})}},u(rL,"InlayHintsHover"),rL);Oq=aBe([iv(1,Kt),iv(2,Ks),iv(3,at),iv(4,Ds),iv(5,we)],Oq);ft(gf.ID,gf,1);Pf.register(Oq);const $me=class $me{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new xe(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new xe(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}};u($me,"InPlaceReplaceCommand");let Hq=$me;var dBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cBe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},tD,aL;let Wu=tD=(aL=class{static get(e){return e.getContribution(tD.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var n;(n=this.currentRequest)===null||n===void 0||n.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let r=i;if(r.startLineNumber!==r.endLineNumber)return;const a=new rLe(this.editor,5),l=s.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=Fn(d=>this.editorWorkerService.navigateValueSet(l,r,t)),this.currentRequest.then(d=>{var c;if(!d||!d.range||!d.value||!a.validate(this.editor))return;const h=L.lift(d.range);let g=d.range;const f=d.value.length-(r.endColumn-r.startColumn);g={startLineNumber:g.startLineNumber,startColumn:g.startColumn,endLineNumber:g.endLineNumber,endColumn:g.startColumn+d.value.length},f>1&&(r=new xe(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+f-1));const p=new Hq(h,r,d.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorations.set([{range:g,options:tD.DECORATION}]),(c=this.decorationRemover)===null||c===void 0||c.cancel(),this.decorationRemover=fu(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Be)}).catch(Be)):Promise.resolve(void 0)}},u(aL,"InPlaceReplaceController"),aL);Wu.ID="editor.contrib.inPlaceReplaceController";Wu.DECORATION=Fe.register({description:"in-place-replace",className:"valueSetReplacement"});Wu=tD=dBe([cBe(1,Nr)],Wu);const qme=class qme extends ye{constructor(){super({id:"editor.action.inPlaceReplace.up",label:m("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:3159,weight:100}})}run(e,t){const n=Wu.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}};u(qme,"InPlaceReplaceUp");let Vq=qme;const Yme=class Yme extends ye{constructor(){super({id:"editor.action.inPlaceReplace.down",label:m("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:3161,weight:100}})}run(e,t){const n=Wu.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}};u(Yme,"InPlaceReplaceDown");let Wq=Yme;ft(Wu.ID,Wu,4);ae(Vq);ae(Wq);const Xme=class Xme extends ye{constructor(){super({id:"expandLineSelection",label:m("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:M.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,Bn.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}};u(Xme,"ExpandLineSelectionAction");let Bq=Xme;ae(Bq);const Zme=class Zme{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=uBe(e,this._cursors);for(let i=0,s=n.length;i<s;i++){const r=n[i];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};u(Zme,"TrimTrailingWhitespaceCommand");let Uq=Zme;function uBe(o,e){e.sort((r,a)=>r.lineNumber===a.lineNumber?r.column-a.column:r.lineNumber-a.lineNumber);for(let r=e.length-2;r>=0;r--)e[r].lineNumber===e[r+1].lineNumber&&e.splice(r,1);const t=[];let n=0,i=0;const s=e.length;for(let r=1,a=o.getLineCount();r<=a;r++){const l=o.getLineContent(r),d=l.length+1;let c=0;if(i<s&&e[i].lineNumber===r&&(c=e[i].column,i++,c===d)||l.length===0)continue;const h=ha(l);let g=0;if(h===-1)g=1;else if(h!==l.length-1)g=h+2;else continue;g=Math.max(c,g),t[n++]=zt.delete(new L(r,g,r,d))}return t}u(uBe,"trimTrailingWhitespace");const Jme=class Jme{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));const s=i.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new L(n.startLineNumber,1,n.startLineNumber,1),s+`
`):t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,s=n.startColumn,r=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),n=xe.createWithDirection(i,s,r,a,this._selectionDirection)}return n}};u(Jme,"CopyLinesCommand");let ZR=Jme;var hBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gBe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},lL;let zq=(lL=class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:s,indentSize:r,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,r,a),d={tokenization:{getLineTokens:c=>e.tokenization.getLineTokens(c),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(c,h)=>e.getLanguageIdAtPosition(c,h)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){const c=i.startLineNumber,h=this._isMovingDown?c+1:c-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new L(1,1,1,1),null):(t.addEditOperation(new L(c,1,c,1),e.getLineContent(h)),t.addEditOperation(new L(h,1,h,e.getLineMaxColumn(h)),null)),i=new xe(h,1,h,1)}else{let c,h;if(this._isMovingDown){c=i.endLineNumber+1,h=e.getLineContent(c),t.addEditOperation(new L(c-1,e.getLineMaxColumn(c-1),c,e.getLineMaxColumn(c)),null);let g=h;if(this.shouldAutoIndent(e,i)){const f=this.matchEnterRule(e,l,s,c,i.startLineNumber-1);if(f!==null){const b=Dt(e.getLineContent(c)),_=f+Ns(b,s);g=b0(_,s,a)+this.trimStart(h)}else{d.getLineContent=_=>_===i.startLineNumber?e.getLineContent(c):e.getLineContent(_);const b=zv(this._autoIndent,d,e.getLanguageIdAtPosition(c,1),i.startLineNumber,l,this._languageConfigurationService);if(b!==null){const _=Dt(e.getLineContent(c)),v=Ns(b,s),y=Ns(_,s);v!==y&&(g=b0(v,s,a)+this.trimStart(h))}}t.addEditOperation(new L(i.startLineNumber,1,i.startLineNumber,1),g+`
`);const p=this.matchEnterRuleMovingDown(e,l,s,i.startLineNumber,c,g);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,p);else{d.getLineContent=_=>_===i.startLineNumber?g:_>=i.startLineNumber+1&&_<=i.endLineNumber+1?e.getLineContent(_-1):e.getLineContent(_);const b=zv(this._autoIndent,d,e.getLanguageIdAtPosition(c,1),i.startLineNumber+1,l,this._languageConfigurationService);if(b!==null){const _=Dt(e.getLineContent(i.startLineNumber)),v=Ns(b,s),y=Ns(_,s);if(v!==y){const w=v-y;this.getIndentEditsOfMovingBlock(e,t,i,s,a,w)}}}}else t.addEditOperation(new L(i.startLineNumber,1,i.startLineNumber,1),g+`
`)}else if(c=i.startLineNumber-1,h=e.getLineContent(c),t.addEditOperation(new L(c,1,c+1,1),null),t.addEditOperation(new L(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+h),this.shouldAutoIndent(e,i)){d.getLineContent=f=>f===c?e.getLineContent(i.startLineNumber):e.getLineContent(f);const g=this.matchEnterRule(e,l,s,i.startLineNumber,i.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,i,s,a,g);else{const f=zv(this._autoIndent,d,e.getLanguageIdAtPosition(i.startLineNumber,1),c,l,this._languageConfigurationService);if(f!==null){const p=Dt(e.getLineContent(i.startLineNumber)),b=Ns(f,s),_=Ns(p,s);if(b!==_){const v=b-_;this.getIndentEditsOfMovingBlock(e,t,i,s,a,v)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Ro.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Ro.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,s){if(s){let r=s.indentation;s.indentAction===Tn.None||s.indentAction===Tn.Indent?r=s.indentation+s.appendText:s.indentAction===Tn.IndentOutdent?r=s.indentation:s.indentAction===Tn.Outdent&&(r=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(i);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=Dt(e.getLineContent(i));let d=Dt(r);const c=Exe(e,i,this._languageConfigurationService);c!==null&&c&2&&(d=t.unshiftIndent(d));const h=Ns(d,n),g=Ns(l,n);return h-g}}return null}matchEnterRuleMovingDown(e,t,n,i,s,r){if(ha(r)>=0){const a=e.getLineMaxColumn(s),l=Pm(this._autoIndent,e,new L(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){const c=e.getLineContent(a);if(ha(c)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),d=Pm(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}}matchEnterRule(e,t,n,i,s,r){let a=s;for(;a>=1;){let c;if(a===s&&r!==void 0?c=r:c=e.getLineContent(a),ha(c)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),d=Pm(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,s,r){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),d=Dt(l),h=Ns(d,i)+r,g=b0(h,i,s);g!==d&&(t.addEditOperation(new L(a,1,a,d.length+1),g),a===n.endLineNumber&&n.endColumn<=d.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}},u(lL,"MoveLinesCommand"),lL);zq=hBe([gBe(3,Pt)],zq);const bm=class bm{static getCollator(){return bm._COLLATOR||(bm._COLLATOR=new Intl.Collator),bm._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const n=fBe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const i=QEe(e,t,n);if(!i)return!1;for(let s=0,r=i.before.length;s<r;s++)if(i.before[s]!==i.after[s])return!0;return!1}};u(bm,"SortLinesCommand");let o_=bm;o_._COLLATOR=null;function QEe(o,e,t){const n=e.startLineNumber;let i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;const s=[];for(let a=n;a<=i;a++)s.push(o.getLineContent(a));let r=s.slice(0);return r.sort(o_.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:n,endLineNumber:i,before:s,after:r}}u(QEe,"getSortData");function fBe(o,e,t){const n=QEe(o,e,t);return n?zt.replace(new L(n.startLineNumber,1,n.endLineNumber,o.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}u(fBe,"sortLines");const Qme=class Qme extends ye{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));n.sort((r,a)=>L.compareRangesUsingStarts(r.selection,a.selection));let i=n[0];for(let r=1;r<n.length;r++){const a=n[r];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const s=[];for(const r of n)s.push(new ZR(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};u(Qme,"AbstractCopyLinesAction");let JR=Qme;const ebe=class ebe extends JR{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:m("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}};u(ebe,"CopyLinesUpAction");let Gq=ebe;const tbe=class tbe extends JR{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:m("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}};u(tbe,"CopyLinesDownAction");let jq=tbe;const nbe=class nbe extends ye{constructor(){super({id:"editor.action.duplicateSelection",label:m("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:M.writable,menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:m({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],s=t.getSelections(),r=t.getModel();for(const a of s)if(a.isEmpty())i.push(new ZR(a,!0));else{const l=new xe(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new M7(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}};u(nbe,"DuplicateSelectionAction");let Kq=nbe;const ibe=class ibe extends ye{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(Pt),i=[],s=t.getSelections()||[],r=t.getOption(11);for(const a of s)i.push(new zq(a,this.down,r,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}};u(ibe,"AbstractMoveLinesAction");let QR=ibe;const sbe=class sbe extends QR{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:m("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}};u(sbe,"MoveLinesUpAction");let $q=sbe;const obe=class obe extends QR{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:m("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}};u(obe,"MoveLinesDownAction");let qq=obe;const rbe=class rbe extends ye{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const s of n)if(!o_.canRun(t.getModel(),s,this.descending))return;const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new o_(n[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}};u(rbe,"AbstractSortLinesAction");let e2=rbe;const abe=class abe extends e2{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:m("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:M.writable})}};u(abe,"SortLinesAscendingAction");let Yq=abe;const lbe=class lbe extends e2{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:m("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:M.writable})}};u(lbe,"SortLinesDescendingAction");let Xq=lbe;const dbe=class dbe extends ye{constructor(){super({id:"editor.action.removeDuplicateLines",label:m("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:M.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const i=[],s=[];let r=0;for(const a of t.getSelections()){const l=new Set,d=[];for(let f=a.startLineNumber;f<=a.endLineNumber;f++){const p=n.getLineContent(f);l.has(p)||(d.push(p),l.add(p))}const c=new xe(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-r,g=new xe(h,1,h+d.length-1,d[d.length-1].length);i.push(zt.replace(c,d.join(`
`))),s.push(g),r+=a.endLineNumber-a.startLineNumber+1-d.length}t.pushUndoStop(),t.executeEdits(this.id,i,s),t.pushUndoStop()}};u(dbe,"DeleteDuplicateLinesAction");let Zq=dbe;const tO=class tO extends ye{constructor(){super({id:tO.ID,label:m("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:In(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new W(a.positionLineNumber,a.positionColumn)));const s=t.getSelection();if(s===null)return;const r=new Uq(s,i);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}};u(tO,"TrimTrailingWhitespaceAction");let t2=tO;t2.ID="editor.action.trimTrailingWhitespace";const cbe=class cbe extends ye{constructor(){super({id:"editor.action.deleteLines",label:m("lines.delete","Delete Line"),alias:"Delete Line",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let s=0;const r=[],a=[];for(let l=0,d=n.length;l<d;l++){const c=n[l];let h=c.startLineNumber,g=c.endLineNumber,f=1,p=i.getLineMaxColumn(g);g<i.getLineCount()?(g+=1,p=1):h>1&&(h-=1,f=i.getLineMaxColumn(h)),r.push(zt.replace(new xe(h,f,g,p),"")),a.push(new xe(h-s,c.positionColumn,h-s,c.positionColumn)),s+=c.endLineNumber-c.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let r=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(r-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:r,positionColumn:s.positionColumn}});t.sort((s,r)=>s.startLineNumber===r.startLineNumber?s.endLineNumber-r.endLineNumber:s.startLineNumber-r.startLineNumber);const n=[];let i=t[0];for(let s=1;s<t.length;s++)i.endLineNumber+1>=t[s].startLineNumber?i.endLineNumber=t[s].endLineNumber:(n.push(i),i=t[s]);return n.push(i),n}};u(cbe,"DeleteLinesAction");let Jq=cbe;const ube=class ube extends ye{constructor(){super({id:"editor.action.indentLines",label:m("lines.indent","Indent Line"),alias:"Indent Line",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:2142,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Po.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}};u(ube,"IndentLinesAction");let Qq=ube;const hbe=class hbe extends ye{constructor(){super({id:"editor.action.outdentLines",label:m("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:2140,weight:100}})}run(e,t){Fm.Outdent.runEditorCommand(e,t,null)}};u(hbe,"OutdentLinesAction");let eY=hbe;const gbe=class gbe extends ye{constructor(){super({id:"editor.action.insertLineBefore",label:m("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Po.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}};u(gbe,"InsertLineBeforeAction");let tY=gbe;const fbe=class fbe extends ye{constructor(){super({id:"editor.action.insertLineAfter",label:m("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Po.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}};u(fbe,"InsertLineAfterAction");let nY=fbe;const pbe=class pbe extends ye{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),s=[];for(let l=0,d=i.length-1;l<d;l++){const c=i[l],h=i[l+1];L.intersectRanges(c,h)===null?s.push(c):i[l+1]=L.plusRange(c,h)}s.push(i[i.length-1]);const r=this._getEndCursorState(n,s),a=s.map(l=>zt.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}};u(pbe,"AbstractDeleteAllToBoundaryAction");let n2=pbe;const mbe=class mbe extends n2{constructor(){super({id:"deleteAllLeft",label:m("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let s=0;return t.forEach(r=>{let a;if(r.endColumn===1&&s>0){const l=r.startLineNumber-s;a=new xe(l,r.startColumn,l,r.startColumn)}else a=new xe(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);s+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const i=e.getModel();return i===null?[]:(n.sort(L.compareRangesUsingStarts),n=n.map(s=>{if(s.isEmpty())if(s.startColumn===1){const r=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:i.getLineContent(r).length+1;return new L(r,a,s.startLineNumber,1)}else return new L(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new L(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),n)}};u(mbe,"DeleteAllLeftAction");let iY=mbe;const bbe=class bbe extends n2{constructor(){super({id:"deleteAllRight",label:m("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let s=0,r=t.length,a=0;s<r;s++){const l=t[s],d=new xe(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=d:i.push(d)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const i=n.map(s=>{if(s.isEmpty()){const r=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===r?new L(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new L(s.startLineNumber,s.startColumn,s.startLineNumber,r)}return s});return i.sort(L.compareRangesUsingStarts),i}};u(bbe,"DeleteAllRightAction");let sY=bbe;const _be=class _be extends ye{constructor(){super({id:"editor.action.joinLines",label:m("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:M.writable,kbOpts:{kbExpr:M.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(L.compareRangesUsingStarts);const s=[],r=n.reduce((g,f)=>g.isEmpty()?g.endLineNumber===f.startLineNumber?(i.equalsSelection(g)&&(i=f),f):f.startLineNumber>g.endLineNumber+1?(s.push(g),f):new xe(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>g.endLineNumber?(s.push(g),f):new xe(g.startLineNumber,g.startColumn,f.endLineNumber,f.endColumn));s.push(r);const a=t.getModel();if(a===null)return;const l=[],d=[];let c=i,h=0;for(let g=0,f=s.length;g<f;g++){const p=s[g],b=p.startLineNumber,_=1;let v=0,y,w;const C=a.getLineContent(p.endLineNumber).length-p.endColumn;if(p.isEmpty()||p.startLineNumber===p.endLineNumber){const T=p.getStartPosition();T.lineNumber<a.getLineCount()?(y=b+1,w=a.getLineMaxColumn(y)):(y=T.lineNumber,w=a.getLineMaxColumn(T.lineNumber))}else y=p.endLineNumber,w=a.getLineMaxColumn(y);let S=a.getLineContent(b);for(let T=b+1;T<=y;T++){const E=a.getLineContent(T),D=a.getLineFirstNonWhitespaceColumn(T);if(D>=1){let O=!0;S===""&&(O=!1),O&&(S.charAt(S.length-1)===" "||S.charAt(S.length-1)==="	")&&(O=!1,S=S.replace(/[\s\uFEFF\xA0]+$/g," "));const B=E.substr(D-1);S+=(O?" ":"")+B,O?v=B.length+1:v=B.length}else v=0}const k=new L(b,_,y,w);if(!k.isEmpty()){let T;p.isEmpty()?(l.push(zt.replace(k,S)),T=new xe(k.startLineNumber-h,S.length-v+1,b-h,S.length-v+1)):p.startLineNumber===p.endLineNumber?(l.push(zt.replace(k,S)),T=new xe(p.startLineNumber-h,p.startColumn,p.endLineNumber-h,p.endColumn)):(l.push(zt.replace(k,S)),T=new xe(p.startLineNumber-h,p.startColumn,p.startLineNumber-h,S.length-C)),L.intersectRanges(k,i)!==null?c=T:d.push(T)}h+=k.endLineNumber-k.startLineNumber}d.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,l,d),t.pushUndoStop()}};u(_be,"JoinLinesAction");let oY=_be;const vbe=class vbe extends ye{constructor(){super({id:"editor.action.transpose",label:m("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:M.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=[];for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())continue;const d=l.getStartPosition(),c=i.getLineMaxColumn(d.lineNumber);if(d.column>=c){if(d.lineNumber===i.getLineCount())continue;const h=new L(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new ni(new xe(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),g))}else{const h=new L(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),g=i.getValueInRange(h).split("").reverse().join("");s.push(new Lw(h,g,new xe(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};u(vbe,"TransposeAction");let rY=vbe;const ybe=class ybe extends ye{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const s=t.getOption(128),r=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),d=t.getConfiguredWordAtPosition(l);if(!d)continue;const c=new L(l.lineNumber,d.startColumn,l.lineNumber,d.endColumn),h=i.getValueInRange(c);r.push(zt.replace(c,this._modifyText(h,s)))}else{const l=i.getValueInRange(a);r.push(zt.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}};u(ybe,"AbstractCaseAction");let Bu=ybe;const wbe=class wbe extends Bu{constructor(){super({id:"editor.action.transformToUppercase",label:m("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:M.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}};u(wbe,"UpperCaseAction");let aY=wbe;const Cbe=class Cbe extends Bu{constructor(){super({id:"editor.action.transformToLowercase",label:m("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:M.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}};u(Cbe,"LowerCaseAction");let lY=Cbe;const Sbe=class Sbe{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}};u(Sbe,"BackwardsCompatibleRegExp");let jd=Sbe;const nO=class nO extends Bu{constructor(){super({id:"editor.action.transformToTitlecase",label:m("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:M.writable})}_modifyText(e,t){const n=nO.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}};u(nO,"TitleCaseAction");let s1=nO;s1.titleBoundary=new jd("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");const My=class My extends Bu{constructor(){super({id:"editor.action.transformToSnakecase",label:m("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:M.writable})}_modifyText(e,t){const n=My.caseBoundary.get(),i=My.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}};u(My,"SnakeCaseAction");let hg=My;hg.caseBoundary=new jd("(\\p{Ll})(\\p{Lu})","gmu");hg.singleLetters=new jd("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");const iO=class iO extends Bu{constructor(){super({id:"editor.action.transformToCamelcase",label:m("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:M.writable})}_modifyText(e,t){const n=iO.wordBoundary.get();if(!n)return e;const i=e.split(n);return i.shift()+i.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}};u(iO,"CamelCaseAction");let o1=iO;o1.wordBoundary=new jd("[_\\s-]","gm");const _m=class _m extends Bu{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:m("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:M.writable})}_modifyText(e,t){const n=_m.caseBoundary.get(),i=_m.singleLetters.get(),s=_m.underscoreBoundary.get();return!n||!i||!s?e:e.replace(s,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}};u(_m,"KebabCaseAction");let ff=_m;ff.caseBoundary=new jd("(\\p{Ll})(\\p{Lu})","gmu");ff.singleLetters=new jd("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");ff.underscoreBoundary=new jd("(\\S)(_)(\\S)","gm");ae(Gq);ae(jq);ae(Kq);ae($q);ae(qq);ae(Yq);ae(Xq);ae(Zq);ae(t2);ae(Jq);ae(Qq);ae(eY);ae(tY);ae(nY);ae(iY);ae(sY);ae(oY);ae(rY);ae(aY);ae(lY);hg.caseBoundary.isSupported()&&hg.singleLetters.isSupported()&&ae(hg);o1.wordBoundary.isSupported()&&ae(o1);s1.titleBoundary.isSupported()&&ae(s1);ff.isSupported()&&ae(ff);var pBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Sk=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},dY=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},nD;const eke=new _e("LinkedEditingInputVisible",!1),mBe="linked-editing-decoration";var dL;let Uu=nD=(dL=class extends G{static get(e){return e.getContribution(nD.ID)}constructor(e,t,n,i,s){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new ie),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=eke.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new ie),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(68)||r.hasChanged(91))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(68)||this._editor.getOption(91))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(Ce.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new Uo(this._debounceInformation.get(t)),s=u(()=>{var l;this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},"triggerRangeUpdate"),r=new Uo(0),a=u(l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))},"triggerRangeSync");this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const d=this._currentDecorations.getRange(0);if(d&&l.changes.every(c=>d.intersectRanges(c.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{i.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}const s=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:i});else{let d=t.getValueInRange(l),c=i,h=l.startColumn,g=l.endColumn;const f=xg(d,c);h+=f,d=d.substr(f),c=c.substr(f);const p=CD(d,c);g-=p,d=d.substr(0,d.length-p),c=c.substr(0,c.length-p),(h!==g||c.length!==0)&&s.push({range:new L(l.startLineNumber,h,l.endLineNumber,g),text:c})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return dY(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=i;const s=Fn(r=>dY(this,void 0,void 0,function*(){try{const a=new Fi(!1),l=yield tke(this._providers,n,t,r);if(this._debounceInformation.update(n,a.elapsed()),s!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let d=[];l?.ranges&&(d=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let c=!1;for(let g=0,f=d.length;g<f;g++)if(L.containsPosition(d[g],t)){if(c=!0,g!==0){const p=d[g];d.splice(g,1),d.unshift(p)}break}if(!c){this.clearRanges();return}const h=d.map(g=>({range:g,options:nD.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(h),this._syncRangesToken++}catch(a){Ca(a)||Be(a),(this._currentRequest===s||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=s,s})}},u(dL,"LinkedEditingContribution"),dL);Uu.ID="editor.contrib.linkedEditing";Uu.DECORATION=Fe.register({description:"linked-editing",stickiness:0,className:mBe});Uu=nD=pBe([Sk(1,Re),Sk(2,we),Sk(3,Pt),Sk(4,Jo)],Uu);const xbe=class xbe extends ye{constructor(){super({id:"editor.action.linkedEditing",label:m("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:ne.and(M.writable,M.hasRenameProvider),kbOpts:{kbExpr:M.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(gt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return Ae.isUri(i)&&W.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Be):super.runCommand(e,t)}run(e,t){const n=Uu.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}};u(xbe,"LinkedEditingAction");let cY=xbe;const bBe=hi.bindToContribution(Uu.get);he(new bBe({id:"cancelLinkedEditingInput",precondition:eke,handler:o=>o.clearRanges(),kbOpts:{kbExpr:M.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function tke(o,e,t,n){const i=o.ordered(e);return CSe(i.map(s=>()=>dY(this,void 0,void 0,function*(){try{return yield s.provideLinkedEditingRanges(e,t,n)}catch(r){Ln(r);return}})),s=>!!s&&Ri(s?.ranges))}u(tke,"getLinkedEditingRanges");I("editor.linkedEditingBackground",{dark:K.fromHex("#f00").transparent(.3),light:K.fromHex("#f00").transparent(.3),hcDark:K.fromHex("#f00").transparent(.3),hcLight:K.white},m("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Al("_executeLinkedEditingProvider",(o,e,t)=>{const{linkedEditingRangeProvider:n}=o.get(we);return tke(n,e,t,Ze.None)});ft(Uu.ID,Uu,1);ae(cY);var nke=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},cL;let _Be=(cL=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return nke(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}},u(cL,"Link"),cL);const sO=class sO{constructor(e){this._disposables=new ie;let t=[];for(const[n,i]of e){const s=n.links.map(r=>new _Be(r,i));t=sO._union(t,s),pZ(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let i,s,r,a;for(i=0,r=0,s=e.length,a=t.length;i<s&&r<a;){const l=e[i],d=t[r];if(L.areIntersectingOrTouching(l.range,d.range)){i++;continue}L.compareRangesUsingStarts(l.range,d.range)<0?(n.push(l),i++):(n.push(d),r++)}for(;i<s;i++)n.push(e[i]);for(;r<a;r++)n.push(t[r]);return n}};u(sO,"LinksList");let i2=sO;function ike(o,e,t){const n=[],i=o.ordered(e).reverse().map((s,r)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(n[r]=[a,s])},Ln));return Promise.all(i).then(()=>{const s=new i2(ol(n));return t.isCancellationRequested?(s.dispose(),new i2([])):s})}u(ike,"getLinks");lt.registerCommand("_executeLinkProvider",(o,...e)=>nke(void 0,void 0,void 0,function*(){let[t,n]=e;Lt(t instanceof Ae),typeof n!="number"&&(n=0);const{linkProvider:i}=o.get(we),s=o.get(Xt).getModel(t);if(!s)return[];const r=yield ike(i,s,Ze.None);if(!r)return[];for(let l=0;l<Math.min(n,r.links.length);l++)yield r.links[l].resolve(Ze.None);const a=r.links.slice(0);return r.dispose(),a}));var vBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xk=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},yBe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},uY,uL;let r_=uY=(uL=class extends G{static get(e){return e.getContribution(uY.ID)}constructor(e,t,n,i,s){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Et(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new $b(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(69)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}computeLinksNow(){return yBe(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(69))return;const e=this.editor.getModel();if(this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Fn(t=>ike(this.providers,e,t));try{const t=new Fi(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Be(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(76)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const r of i){const a=this.currentOccurrences[r];n.push(a.decorationId)}const s=[];if(e)for(const r of e)s.push(s2.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(n,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,d=a.length;l<d;l++){const c=new s2(e[l],a[l]);this.currentOccurrences[c.decorationId]=c}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(76)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(s=>{i.activate(s,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(76)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(Ze.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===qe.file&&s.startsWith(`${qe.file}:`)){const a=Ae.parse(s);if(a.scheme===qe.file){const l=Ia(a);let d=null;l.startsWith("/./")?d=`.${l.substr(1)}`:l.startsWith("//./")&&(d=`.${l.substr(2)}`),d&&(s=yPe(r,d))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const r=s instanceof Error?s.message:s;r==="invalid"?this.notificationService.warn(m("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):r==="missing"?this.notificationService.warn(m("missing.url","Failed to open this link because its target is missing.")):Be(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},u(uL,"LinkDetector"),uL);r_.ID="editor.linkDetector";r_=uY=vBe([xk(1,Ks),xk(2,_n),xk(3,we),xk(4,Jo)],r_);const e1e={general:Fe.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Fe.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},vm=class vm{static decoration(e,t){return{range:e.range,options:vm._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?e1e.active:e1e.general);return i.hoverMessage=wBe(e,t),i}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,vm._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,vm._getOptions(this.link,t,!1))}};u(vm,"LinkOccurrence");let s2=vm;function wBe(o,e){const t=o.url&&/^command:/i.test(o.url.toString()),n=o.tooltip?o.tooltip:t?m("links.navigate.executeCmd","Execute command"):m("links.navigate.follow","Follow link"),i=e?ot?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):ot?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");if(o.url){let s="";if(/^command:/i.test(o.url.toString())){const a=o.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=m("tooltip.explanation","Execute command {0}",l)}}return new zn("",!0).appendLink(o.url.toString(!0).replace(/ /g,"%20"),n,s).appendMarkdown(` (${i})`)}else return new zn().appendText(`${n} (${i})`)}u(wBe,"getHoverMessage");const Tbe=class Tbe extends ye{constructor(){super({id:"editor.action.openLink",label:m("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=r_.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const s of i){const r=n.getLinkOccurrence(s.getEndPosition());r&&n.openLinkOccurrence(r,!1)}}};u(Tbe,"OpenLinkAction");let hY=Tbe;ft(r_.ID,r_,1);ae(hY);const Lbe=class Lbe extends G{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const n=this._editor.getOption(115);n>=0&&t.target.type===6&&t.target.position.column>=n&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};u(Lbe,"LongLinesHelper");let r1=Lbe;r1.ID="editor.contrib.longLinesHelper";ft(r1.ID,r1,2);const Tk=I("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},m("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);I("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},m("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);I("editor.wordHighlightTextBackground",{light:Tk,dark:Tk,hcDark:Tk,hcLight:Tk},m("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const Lk=I("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Gt,hcLight:Gt},m("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));I("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Gt,hcLight:Gt},m("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));I("editor.wordHighlightTextBorder",{light:Lk,dark:Lk,hcDark:Lk,hcLight:Lk},m("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const CBe=I("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),SBe=I("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},m("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),xBe=I("editorOverviewRuler.wordHighlightTextForeground",{dark:pv,light:pv,hcDark:pv,hcLight:pv},m("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),TBe=Fe.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:ln(SBe),position:mo.Center},minimap:{color:ln(AO),position:ho.Inline}}),LBe=Fe.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:ln(xBe),position:mo.Center},minimap:{color:ln(AO),position:ho.Inline}}),EBe=Fe.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:ln(pv),position:mo.Center},minimap:{color:ln(AO),position:ho.Inline}}),kBe=Fe.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),DBe=Fe.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:ln(CBe),position:mo.Center},minimap:{color:ln(AO),position:ho.Inline}});function MBe(o){return o===Gy.Write?TBe:o===Gy.Text?LBe:DBe}u(MBe,"getHighlightDecorationOptions");function ABe(o){return o?kBe:EBe}u(ABe,"getSelectionHighlightDecorationOptions");Ir((o,e)=>{const t=o.getColor(OZ);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var IBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NBe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gY;function Zu(o,e){const t=e.filter(n=>!o.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),i=t.length===1?m("cursorAdded","Cursor added: {0}",n):m("cursorsAdded","Cursors added: {0}",n);Rg(i)}}u(Zu,"announceCursorChange");const Ebe=class Ebe extends ye{constructor(){super({id:"editor.action.insertCursorAbove",label:m("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,Bn.addCursorUp(s,r,i)),s.revealTopMostCursor(n.source),Zu(r,s.getCursorStates())}};u(Ebe,"InsertCursorAbove");let fY=Ebe;const kbe=class kbe extends ye{constructor(){super({id:"editor.action.insertCursorBelow",label:m("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(n.source,3,Bn.addCursorDown(s,r,i)),s.revealBottomMostCursor(n.source),Zu(r,s.getCursorStates())}};u(kbe,"InsertCursorBelow");let pY=kbe;const Dbe=class Dbe extends ye{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const s=t.getLineMaxColumn(i);n.push(new xe(i,s,i,s))}e.endColumn>1&&n.push(new xe(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),s=t._getViewModel(),r=s.getCursorStates(),a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),Zu(r,s.getCursorStates())}};u(Dbe,"InsertCursorAtEndOfEachLineSelected");let mY=Dbe;const Mbe=class Mbe extends ye{constructor(){super({id:"editor.action.addCursorsToBottom",label:m("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount(),s=[];for(let l=n[0].startLineNumber;l<=i;l++)s.push(new xe(l,n[0].startColumn,l,n[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();s.length>0&&t.setSelections(s),Zu(a,r.getCursorStates())}};u(Mbe,"InsertCursorAtEndOfLineSelected");let bY=Mbe;const Abe=class Abe extends ye{constructor(){super({id:"editor.action.addCursorsToTop",label:m("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new xe(a,n[0].startColumn,a,n[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();i.length>0&&t.setSelections(i),Zu(r,s.getCursorStates())}};u(Abe,"InsertCursorAtTopOfLineSelected");let _Y=Abe;const Ibe=class Ibe{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}};u(Ibe,"MultiCursorSessionResult");let Vp=Ibe;const Ay=class Ay{static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new Ay(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,s,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,s=!0,r=!0):(s=n.wholeWord,r=n.matchCase);const l=e.getSelection();let d,c=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;d=h.word,c=new xe(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else d=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new Ay(e,t,i,d,s,r,c)}constructor(e,t,n,i,s,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=s,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Vp(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Vp(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(128):null,!1);return n?new xe(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Vp(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Vp(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(128):null,!1);return n?new xe(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(128):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(128):null,!1,1073741824)}};u(Ay,"MultiCursorSession");let o2=Ay;const oO=class oO extends G{static get(e){return e.getContribution(oO.ID)}constructor(e){super(),this._sessionDispose=this._register(new ie),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=o2.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new xe(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!ske(this._editor.getModel(),t,i)){const r=this._editor.getModel(),a=[];for(let l=0,d=t.length;l<d;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const i=this._editor.getModel();n.searchScope?t=i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(128):null,!1,1073741824):t=i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(128):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const i=this._editor.getSelection();for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.range.intersectRanges(i)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new xe(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}};u(oO,"MultiCursorSelectionController");let pf=oO;pf.ID="editor.contrib.multiCursorController";const Nbe=class Nbe extends ye{run(e,t){const n=pf.get(t);if(!n)return;const i=t._getViewModel();if(i){const s=i.getCursorStates(),r=ds.get(t);if(r)this._run(n,r);else{const a=e.get(Pe).createInstance(ds,t);this._run(n,a),a.dispose()}Zu(s,i.getCursorStates())}}};u(Nbe,"MultiCursorSelectionControllerAction");let zu=Nbe;const Rbe=class Rbe extends zu{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:2082,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}};u(Rbe,"AddSelectionToNextFindMatchAction");let vY=Rbe;const Pbe=class Pbe extends zu{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}};u(Pbe,"AddSelectionToPreviousFindMatchAction");let yY=Pbe;const Fbe=class Fbe extends zu{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:In(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}};u(Fbe,"MoveSelectionToNextFindMatchAction");let wY=Fbe;const Obe=class Obe extends zu{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}};u(Obe,"MoveSelectionToPreviousFindMatchAction");let CY=Obe;const Hbe=class Hbe extends zu{constructor(){super({id:"editor.action.selectHighlights",label:m("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:3114,weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"3_multi",title:m({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}};u(Hbe,"SelectHighlightsAction");let SY=Hbe;const Vbe=class Vbe extends zu{constructor(){super({id:"editor.action.changeAll",label:m("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:ne.and(M.writable,M.editorTextFocus),kbOpts:{kbExpr:M.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}};u(Vbe,"CompatChangeAll");let xY=Vbe;const Wbe=class Wbe{constructor(e,t,n,i,s){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(L.compareRangesUsingStarts)),this._cachedFindMatches}};u(Wbe,"SelectionHighlighterState");let TY=Wbe;var hL;let a1=gY=(hL=class extends G{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(106),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new Et(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(106)})),this._register(e.onDidChangeCursorSelection(i=>{this._isEnabled&&(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=ds.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(gY._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const s=pf.get(n);if(!s)return null;const r=ds.get(n);if(!r)return null;let a=s.getSession(r);if(!a){const c=n.getSelections();if(c.length>1){const g=r.getState().matchCase;if(!ske(n.getModel(),c,g))return null}a=o2.create(n,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),d=l.matchCase;if(l.isRevealed){let c=l.searchString;d||(c=c.toLowerCase());let h=a.searchText;if(d||(h=h.toLowerCase()),c===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new TY(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(128):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(L.compareRangesUsingStarts);const s=[];for(let l=0,d=0,c=n.length,h=i.length;l<c;){const g=n[l];if(d>=h)s.push(g),l++;else{const f=L.compareRangesUsingStarts(g,i[d]);f<0?((i[d].isEmpty()||!L.areIntersecting(g,i[d]))&&s.push(g),l++):(f>0||l++,d++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(79),a=s.map(l=>({range:l,options:ABe(r)}));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}},u(hL,"SelectionHighlighter"),hL);a1.ID="editor.contrib.selectionHighlighter";a1=gY=IBe([NBe(1,we)],a1);function ske(o,e,t){const n=t1e(o,e[0],!t);for(let i=1,s=e.length;i<s;i++){const r=e[i];if(r.isEmpty())return!1;const a=t1e(o,r,!t);if(n!==a)return!1}return!0}u(ske,"modelRangesContainSameText");function t1e(o,e,t){const n=o.getValueInRange(e);return t?n.toLowerCase():n}u(t1e,"getValueInRange");const Bbe=class Bbe extends ye{constructor(){super({id:"editor.action.focusNextCursor",label:m("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:m("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.shift();r&&(s.push(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),Zu(s,i.getCursorStates()))}};u(Bbe,"FocusNextCursor");let LY=Bbe;const Ube=class Ube extends ye{constructor(){super({id:"editor.action.focusPreviousCursor",label:m("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:m("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const s=Array.from(i.getCursorStates()),r=s.pop();r&&(s.unshift(r),i.setCursorStates(n.source,3,s),i.revealPrimaryCursor(n.source,!0),Zu(s,i.getCursorStates()))}};u(Ube,"FocusPreviousCursor");let EY=Ube;ft(pf.ID,pf,4);ft(a1.ID,a1,1);ae(fY);ae(pY);ae(mY);ae(vY);ae(yY);ae(wY);ae(CY);ae(SY);ae(xY);ae(bY);ae(_Y);ae(LY);ae(EY);var oke=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const mf={Visible:new _e("parameterHintsVisible",!1),MultipleSignatures:new _e("parameterHintsMultipleSignatures",!1)};function rke(o,e,t,n,i){return oke(this,void 0,void 0,function*(){const s=o.ordered(e);for(const r of s)try{const a=yield r.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){Ln(a)}})}u(rke,"provideSignatureHelp");lt.registerCommand("_executeSignatureHelpProvider",(o,...e)=>oke(void 0,void 0,void 0,function*(){const[t,n,i]=e;Lt(Ae.isUri(t)),Lt(W.isIPosition(n)),Lt(typeof i=="string"||!i);const s=o.get(we),r=yield o.get(Ds).createModelReference(t);try{const a=yield rke(s.signatureHelpProvider,r.object.textEditorModel,W.lift(n),{triggerKind:el.Invoke,isRetrigger:!1,triggerCharacter:i},Ze.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}}));var RBe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},vc;(function(o){o.Default={type:0};const n=class n{constructor(r,a){this.request=r,this.previouslyActiveHints=a,this.type=2}};u(n,"Pending");let e=n;o.Pending=e;const i=class i{constructor(r){this.hints=r,this.type=1}};u(i,"Active");let t=i;o.Active=t})(vc||(vc={}));const rO=class rO extends G{constructor(e,t,n=rO.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new V),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=vc.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new si),this.triggerChars=new ab,this.retriggerChars=new ab,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Uo(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=vc.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(Be)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(84).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(84).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new vc.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return RBe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(PBe);this._pendingTriggers=[];const s={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new vc.Pending(Fn(l=>rke(this.providers,r,a,s,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new vc.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=vc.Default),Be(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])if(n.length){const i=n.charCodeAt(0);this.triggerChars.add(i),this.retriggerChars.add(i)}for(const n of t.signatureHelpRetriggerCharacters||[])n.length&&this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:el.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:el.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:el.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(84).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};u(rO,"ParameterHintsModel");let r2=rO;r2.DEFAULT_DELAY=120;function PBe(o,e){switch(e.triggerKind){case el.Invoke:return e;case el.ContentChange:return o;case el.TriggerCharacter:default:return e}}u(PBe,"mergeTriggerContexts");var FBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eV=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},kY;const qs=re,OBe=Yt("parameter-hints-next",ue.chevronDown,m("parameterHintsNextIcon","Icon for show next parameter hint.")),HBe=Yt("parameter-hints-previous",ue.chevronUp,m("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var gL;let a2=kY=(gL=class extends G{constructor(e,t,n,i,s){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new ie),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new zd({editor:e},s,i)),this.keyVisible=mf.Visible.bindTo(n),this.keyMultipleSignatures=mf.MultipleSignatures.bindTo(n)}createParameterHintDOMNodes(){const e=qs(".editor-widget.parameter-hints-widget"),t=Q(e,qs(".phwrapper"));t.tabIndex=-1;const n=Q(t,qs(".controls")),i=Q(n,qs(".button"+Te.asCSSSelector(HBe))),s=Q(n,qs(".overloads")),r=Q(n,qs(".button"+Te.asCSSSelector(OBe)));this._register(q(i,"click",g=>{Ke.stop(g),this.previous()})),this._register(q(r,"click",g=>{Ke.stop(g),this.next()}));const a=qs(".body"),l=new Cu(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const d=Q(a,qs(".signature")),c=Q(a,qs(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:s,docs:c,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=u(()=>{if(!this.domNodes)return;const g=this.editor.getOption(49);this.domNodes.element.style.fontSize=`${g.fontSize}px`,this.domNodes.element.style.lineHeight=`${g.lineHeight/g.fontSize}`},"updateFont");h(),this._register(Ce.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(g=>g.hasChanged(49)).on(h,null)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=Q(this.domNodes.signature,qs(".code")),r=this.editor.getOption(49);s.style.fontSize=`${r.fontSize}px`,s.style.fontFamily=r.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,i,l);else{const h=Q(s,qs("span"));h.textContent=i.label}const d=i.parameters[l];if(d?.documentation){const h=qs("span.documentation");if(typeof d.documentation=="string")h.textContent=d.documentation;else{const g=this.renderMarkdownDocs(d.documentation);h.appendChild(g.element)}Q(this.domNodes.docs,qs("p",{},h))}if(i.documentation!==void 0)if(typeof i.documentation=="string")Q(this.domNodes.docs,qs("p",{},i.documentation));else{const h=this.renderMarkdownDocs(i.documentation);Q(this.domNodes.docs,h.element)}const c=this.hasDocs(i,d);if(this.domNodes.signature.classList.toggle("has-docs",c),this.domNodes.docs.classList.toggle("empty",!c),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let h="";const g=i.parameters[l];Array.isArray(g.label)?h=i.label.substring(g.label[0],g.label[1]):h=g.label,g.documentation&&(h+=typeof g.documentation=="string"?`, ${g.documentation}`:`, ${g.documentation.value}`),i.documentation&&(h+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==h&&(Ii(m("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Uh(t.documentation).length>0||t&&typeof t.documentation=="object"&&Uh(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Uh(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Uh(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,s]=this.getParameterLabelOffsets(t,n),r=document.createElement("span");r.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),Q(e,r,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${po(n.label)}(?=\\W|$)`,"g");i.test(e.label);const s=i.lastIndex-n.label.length;return s>=0?[s,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return kY.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}},u(gL,"ParameterHintsWidget"),gL);a2.ID="editor.widget.parameterHintsWidget";a2=kY=FBe([eV(2,Re),eV(3,Ks),eV(4,Kt)],a2);I("editorHoverWidget.highlightForeground",{dark:fr,light:fr,hcDark:fr,hcLight:fr},m("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var VBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},n1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},DY,fL;let bf=DY=(fL=class extends G{static get(e){return e.getContribution(DY.ID)}constructor(e,t,n){super(),this.editor=e,this.model=this._register(new r2(e,n.signatureHelpProvider)),this._register(this.model.onChangedHints(i=>{var s;i?(this.widget.value.show(),this.widget.value.render(i)):(s=this.widget.rawValue)===null||s===void 0||s.hide()})),this.widget=new dl(()=>this._register(t.createInstance(a2,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)===null||e===void 0||e.previous()}next(){var e;(e=this.widget.rawValue)===null||e===void 0||e.next()}trigger(e){this.model.trigger(e,0)}},u(fL,"ParameterHintsController"),fL);bf.ID="editor.controller.parameterHints";bf=DY=VBe([n1e(1,Pe),n1e(2,we)],bf);const zbe=class zbe extends ye{constructor(){super({id:"editor.action.triggerParameterHints",label:m("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:M.hasSignatureHelpProvider,kbOpts:{kbExpr:M.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=bf.get(t);n?.trigger({triggerKind:el.Invoke})}};u(zbe,"TriggerParameterHintsAction");let MY=zbe;ft(bf.ID,bf,2);ae(MY);const nQ=100+75,iQ=hi.bindToContribution(bf.get);he(new iQ({id:"closeParameterHints",precondition:mf.Visible,handler:o=>o.cancel(),kbOpts:{weight:nQ,kbExpr:M.focus,primary:9,secondary:[1033]}}));he(new iQ({id:"showPrevParameterHint",precondition:ne.and(mf.Visible,mf.MultipleSignatures),handler:o=>o.previous(),kbOpts:{weight:nQ,kbExpr:M.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));he(new iQ({id:"showNextParameterHint",precondition:ne.and(mf.Visible,mf.MultipleSignatures),handler:o=>o.next(),kbOpts:{weight:nQ,kbExpr:M.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var WBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},tV=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const v4=new _e("renameInputVisible",!1,m("renameInputVisible","Whether the rename input widget is visible"));var pL;let AY=(pL=class{constructor(e,t,n,i,s){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new ie,this.allowEditorOverflow=!0,this._visibleContextKey=v4.bindTo(s),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(49)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",m("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,n,i,s;if(!this._input||!this._domNode)return;const r=e.getColor($a),a=e.getColor(RZ);this._domNode.style.backgroundColor=String((t=e.getColor(cn))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.border=a?`1px solid ${a}`:"",this._domNode.style.color=String((n=e.getColor(nxe))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(txe))!==null&&i!==void 0?i:"");const l=e.getColor(ixe);this._input.style.borderWidth=l?"1px":"0px",this._input.style.borderStyle=l?"solid":"none",this._input.style.borderColor=(s=l?.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(49);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}beforeRender(){var e,t;const[n,i]=this._acceptKeybindings;return this._label.innerText=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(n))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel()),null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e){var t;(t=this._currentCancelInput)===null||t===void 0||t.call(this,e)}getInput(e,t,n,i,s,r){this._domNode.classList.toggle("preview",s),this._position=new W(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new ie;return new Promise(l=>{this._currentCancelInput=d=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(d),!0),this._currentAcceptInput=d=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:s&&d})},a.add(r.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!document.hasFocus()))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}},u(pL,"RenameInputField"),pL);AY=WBe([tV(2,On),tV(3,At),tV(4,Re)],AY);var BBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},gg=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},IY;const Gbe=class Gbe{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return gg(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}const n=this.model.getWordAtPosition(this.position);return n?{range:new L(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:L.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return gg(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return gg(this,void 0,void 0,function*(){const s=this._providers[t];if(!s)return{edits:[],rejectReason:n.join(`
`)};const r=yield s.provideRenameEdits(this.model,this.position,e,i);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(m("no result","No result.")),i);return r})}};u(Gbe,"RenameSkeleton");let l1=Gbe;function UBe(o,e,t,n){return gg(this,void 0,void 0,function*(){const i=new l1(e,t,o),s=yield i.resolveRenameLocation(Ze.None);return s?.rejectReason?{edits:[],rejectReason:s.rejectReason}:i.provideRenameEdits(n,Ze.None)})}u(UBe,"rename");var mL;let _f=IY=(mL=class{static get(e){return e.getContribution(IY.ID)}constructor(e,t,n,i,s,r,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._disposableStore=new ie,this._cts=new En,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(AY,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return gg(this,void 0,void 0,function*(){if(this._cts.dispose(!0),this._cts=new En,!this.editor.hasModel())return;const n=this.editor.getPosition(),i=new l1(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!i.hasProvider())return;const s=new vl(this.editor,5,void 0,this._cts.token);let r;try{const p=i.resolveRenameLocation(s.token);this._progressService.showWhile(p,250),r=yield p}catch(p){(e=zs.get(this.editor))===null||e===void 0||e.showMessage(p||m("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}finally{s.dispose()}if(!r)return;if(r.rejectReason){(t=zs.get(this.editor))===null||t===void 0||t.showMessage(r.rejectReason,n);return}if(s.token.isCancellationRequested)return;const a=new vl(this.editor,5,r.range,this._cts.token),l=this.editor.getSelection();let d=0,c=r.text.length;!L.isEmpty(l)&&!L.spansMultipleLines(l)&&L.containsRange(r.range,l)&&(d=Math.max(0,l.startColumn-r.range.startColumn),c=Math.min(r.range.endColumn,l.endColumn)-r.range.startColumn);const h=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),g=yield this._renameInputField.getInput(r.range,r.text,d,c,h,a.token);if(typeof g=="boolean"){g&&this.editor.focus(),a.dispose();return}this.editor.focus();const f=EO(i.provideRenameEdits(g.newName,a.token),a.token).then(p=>gg(this,void 0,void 0,function*(){if(!(!p||!this.editor.hasModel())){if(p.rejectReason){this._notificationService.info(p.rejectReason);return}this.editor.setSelection(L.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(p,{editor:this.editor,showPreview:g.wantsPreview,label:m("label","Renaming '{0}' to '{1}'",r?.text,g.newName),code:"undoredo.rename",quotableLabel:m("quotableLabel","Renaming {0} to {1}",r?.text,g.newName),respectAutoSaveConfig:!0}).then(b=>{b.ariaSummary&&Ii(m("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",r.text,g.newName,b.ariaSummary))}).catch(b=>{this._notificationService.error(m("rename.failedApply","Rename failed to apply edits")),this._logService.error(b)})}}),p=>{this._notificationService.error(m("rename.failed","Rename failed to compute edits")),this._logService.error(p)}).finally(()=>{a.dispose()});return this._progressService.showWhile(f,250),f})}acceptRenameInput(e){this._renameInputField.acceptInput(e)}cancelRenameInput(){this._renameInputField.cancelInput(!0)}},u(mL,"RenameController"),mL);_f.ID="editor.contrib.renameController";_f=IY=BBe([dh(1,Pe),dh(2,_n),dh(3,oE),dh(4,Il),dh(5,So),dh(6,DZ),dh(7,we)],_f);const jbe=class jbe extends ye{constructor(){super({id:"editor.action.rename",label:m("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:ne.and(M.writable,M.hasRenameProvider),kbOpts:{kbExpr:M.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(gt),[i,s]=Array.isArray(t)&&t||[void 0,void 0];return Ae.isUri(i)&&W.isIPosition(s)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Be):super.runCommand(e,t)}run(e,t){const n=_f.get(t);return n?n.run():Promise.resolve()}};u(jbe,"RenameAction");let NY=jbe;ft(_f.ID,_f,4);ae(NY);const sQ=hi.bindToContribution(_f.get);he(new sQ({id:"acceptRenameInput",precondition:v4,handler:o=>o.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:ne.and(M.focus,ne.not("isComposing")),primary:3}}));he(new sQ({id:"acceptRenameInputWithPreview",precondition:ne.and(v4,ne.has("config.editor.rename.enablePreview")),handler:o=>o.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:ne.and(M.focus,ne.not("isComposing")),primary:1024+3}}));he(new sQ({id:"cancelRenameInput",precondition:v4,handler:o=>o.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:M.focus,primary:9,secondary:[1033]}}));Al("_executeDocumentRenameProvider",function(o,e,t,...n){const[i]=n;Lt(typeof i=="string");const{renameProvider:s}=o.get(we);return UBe(s,e,t,i)});Al("_executePrepareRename",function(o,e,t){return gg(this,void 0,void 0,function*(){const{renameProvider:n}=o.get(we),s=yield new l1(e,t,n).resolveRenameLocation(Ze.None);if(s?.rejectReason)throw new Error(s.rejectReason);return s})});on.as(kl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:m("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});function zBe(o){for(let e=0,t=o.length;e<t;e+=4){const n=o[e+0],i=o[e+1],s=o[e+2],r=o[e+3];o[e+0]=r,o[e+1]=s,o[e+2]=i,o[e+3]=n}}u(zBe,"reverseEndianness");function GBe(o){const e=new Uint8Array(o.buffer,o.byteOffset,o.length*4);return R1e()||zBe(e),PD.wrap(e)}u(GBe,"toLittleEndianBuffer");function ake(o){const e=new Uint32Array(jBe(o));let t=0;if(e[t++]=o.id,o.type==="full")e[t++]=1,e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length;else{e[t++]=2,e[t++]=o.deltas.length;for(const n of o.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return GBe(e)}u(ake,"encodeSemanticTokensDto");function jBe(o){let e=0;if(e+=1+1,o.type==="full")e+=1+o.data.length;else{e+=1,e+=(1+1+1)*o.deltas.length;for(const t of o.deltas)t.data&&(e+=t.data.length)}return e}u(jBe,"encodeSemanticTokensDtoSize");var Gu=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};function y4(o){return o&&!!o.data}u(y4,"isSemanticTokens");function lke(o){return o&&Array.isArray(o.edits)}u(lke,"isSemanticTokensEdits");const Kbe=class Kbe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}};u(Kbe,"DocumentSemanticTokensResult");let RY=Kbe;function dke(o,e){return o.has(e)}u(dke,"hasDocumentSemanticTokensProvider");function KBe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(KBe,"getDocumentSemanticTokensProviders");function cke(o,e,t,n,i){return Gu(this,void 0,void 0,function*(){const s=KBe(o,e),r=yield Promise.all(s.map(a=>Gu(this,void 0,void 0,function*(){let l,d=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(c){d=c,l=null}return(!l||!y4(l)&&!lke(l))&&(l=null),new RY(a,l,d)})));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null})}u(cke,"getDocumentSemanticTokens");function $Be(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:null}u($Be,"_getDocumentSemanticTokensProviderHighestGroup");const $be=class $be{constructor(e,t){this.provider=e,this.tokens=t}};u($be,"DocumentRangeSemanticTokensResult");let PY=$be;function qBe(o,e){return o.has(e)}u(qBe,"hasDocumentRangeSemanticTokensProvider");function uke(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}u(uke,"getDocumentRangeSemanticTokensProviders");function oQ(o,e,t,n){return Gu(this,void 0,void 0,function*(){const i=uke(o,e),s=yield Promise.all(i.map(r=>Gu(this,void 0,void 0,function*(){let a;try{a=yield r.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Ln(l),a=null}return(!a||!y4(a))&&(a=null),new PY(r,a)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}u(oQ,"getDocumentRangeSemanticTokens");lt.registerCommand("_provideDocumentSemanticTokensLegend",(o,...e)=>Gu(void 0,void 0,void 0,function*(){const[t]=e;Lt(t instanceof Ae);const n=o.get(Xt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(we),s=$Be(i,n);return s?s[0].getLegend():o.get(un).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));lt.registerCommand("_provideDocumentSemanticTokens",(o,...e)=>Gu(void 0,void 0,void 0,function*(){const[t]=e;Lt(t instanceof Ae);const n=o.get(Xt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=o.get(we);if(!dke(i,n))return o.get(un).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield cke(i,n,null,null,Ze.None);if(!s)return;const{provider:r,tokens:a}=s;if(!a||!y4(a))return;const l=ake({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l}));lt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(o,...e)=>Gu(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(t instanceof Ae);const i=o.get(Xt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(we),r=uke(s,i);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!L.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=yield oQ(s,i,L.lift(n),Ze.None);if(a)return a.provider.getLegend()}));lt.registerCommand("_provideDocumentRangeSemanticTokens",(o,...e)=>Gu(void 0,void 0,void 0,function*(){const[t,n]=e;Lt(t instanceof Ae),Lt(L.isIRange(n));const i=o.get(Xt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:s}=o.get(we),r=yield oQ(s,i,L.lift(n),Ze.None);if(!(!r||!r.tokens))return ake({id:0,type:"full",data:r.tokens.data})}));const rQ="editor.semanticHighlighting";function FY(o,e,t){var n;const i=(n=t.getValue(rQ,{overrideIdentifier:o.getLanguageId(),resource:o.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}u(FY,"isSemanticColoringEnabled");var hke=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Wa=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},hc,bL;let OY=(bL=class extends G{constructor(e,t,n,i,s,r){super(),this._watchers=Object.create(null);const a=u(c=>{this._watchers[c.uri.toString()]=new d1(c,e,n,s,r)},"register"),l=u((c,h)=>{h.dispose(),delete this._watchers[c.uri.toString()]},"deregister"),d=u(()=>{for(const c of t.getModels()){const h=this._watchers[c.uri.toString()];FY(c,n,i)?h||a(c):h&&l(c,h)}},"handleSettingOrThemeChange");this._register(t.onModelAdded(c=>{FY(c,n,i)&&a(c)})),this._register(t.onModelRemoved(c=>{const h=this._watchers[c.uri.toString()];h&&l(c,h)})),this._register(i.onDidChangeConfiguration(c=>{c.affectsConfiguration(rQ)&&d()})),this._register(n.onDidColorThemeChange(d))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}},u(bL,"DocumentSemanticTokensFeature"),bL);OY=hke([Wa(0,VO),Wa(1,Xt),Wa(2,On),Wa(3,at),Wa(4,Jo),Wa(5,we)],OY);var _L;let d1=hc=(_L=class extends G{constructor(e,t,n,i,s){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:hc.REQUEST_MIN_DELAY,max:hc.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Et(()=>this._fetchDocumentSemanticTokensNow(),hc.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=u(()=>{wt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))},"bindDocumentChangeListeners");r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),wt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!dke(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new En,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=cke(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const s=[],r=this._model.onDidChangeContent(l=>{s.push(l)}),a=new Fi(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:d,tokens:c}=l,h=this._semanticTokensStylingService.getStyling(d);this._setDocumentSemanticTokens(d,c||null,h,s)}},l=>{l&&(Ca(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Be(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(s.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,s){s=Math.min(s,n.length-i,e.length-t);for(let r=0;r<s;r++)n[i+r]=e[t+r]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,r=u(()=>{(i.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))},"rescheduleIfNeeded");if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(lke(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=s.data,d=new Uint32Array(l.length+a);let c=l.length,h=d.length;for(let g=t.edits.length-1;g>=0;g--){const f=t.edits[g];if(f.start>l.length){n.warnInvalidEditStart(s.resultId,t.resultId,g,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const p=c-(f.start+f.deleteCount);p>0&&(hc._copy(l,c-p,d,h-p,p),h-=p),f.data&&(hc._copy(f.data,0,d,h-f.data.length,f.data.length),h-=f.data.length),c=f.start}c>0&&hc._copy(l,0,d,0,c),t={resultId:t.resultId,data:d}}}if(y4(t)){this._currentDocumentResponse=new HY(e,t.resultId,t.data);const a=yTe(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const d of a)for(const c of l.changes)d.applyEdit(c.range,c.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},u(_L,"ModelSemanticColoring"),_L);d1.REQUEST_MIN_DELAY=300;d1.REQUEST_MAX_DELAY=2e3;d1=hc=hke([Wa(1,VO),Wa(2,On),Wa(3,Jo),Wa(4,we)],d1);const qbe=class qbe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}};u(qbe,"SemanticTokensResponse");let HY=qbe;qO(OY);var YBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sv=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},vL;let c1=(vL=class extends G{constructor(e,t,n,i,s,r){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Et(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=u(()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))},"scheduleTokenizeViewport");this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(rQ)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!FY(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!qBe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=Fn(r=>Promise.resolve(oQ(this._provider,e,t,r))),s=new Fi(!1);return i.then(r=>{if(this._debounceInformation.update(e,s.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=r,d=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,yTe(l,d,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}},u(vL,"ViewportSemanticTokensContribution"),vL);c1.ID="editor.contrib.viewportSemanticTokens";c1=YBe([sv(1,VO),sv(2,On),sv(3,at),sv(4,Jo),sv(5,we)],c1);ft(c1.ID,c1,1);const Ybe=class Ybe{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const n=[];for(const i of t){const s=[];n.push(s),this.selectSubwords&&this._addInWordRanges(s,e,i),this._addWordRanges(s,e,i),this._addWhitespaceLine(s,e,i),s.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;const{word:s,startColumn:r}=i,a=n.column-r;let l=a,d=a,c=0;for(;l>=0;l--){const h=s.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(Rc(h)&&Va(c))break;c=h}for(l+=1;d<s.length;d++){const h=s.charCodeAt(d);if(Va(h)&&Rc(c))break;if(h===95||h===45)break;c=h}l<d&&e.push({range:new L(n.lineNumber,r+l,n.lineNumber,r+d)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new L(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new L(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}};u(Ybe,"WordSelectionRangeProvider");let VY=Ybe;var XBe=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZBe=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},w4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},WY;const aO=class aO{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new aO(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}};u(aO,"SelectionRanges");let BY=aO;var yL;let a_=WY=(yL=class{static get(e){return e.getContribution(WY.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return w4(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield gke(this._languageFeaturesService.selectionRangeProvider,n,t.map(s=>s.getPosition()),this._editor.getOption(111),Ze.None).then(s=>{var r;if(!(!Ri(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!jn(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new BY(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(s=>s.mov(e));const i=this._state.map(s=>xe.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}},u(yL,"SmartSelectController"),yL);a_.ID="editor.contrib.smartSelectController";a_=WY=XBe([ZBe(1,we)],a_);const Xbe=class Xbe extends ye{constructor(e,t){super(t),this._forward=e}run(e,t){return w4(this,void 0,void 0,function*(){const n=a_.get(t);n&&(yield n.run(this._forward))})}};u(Xbe,"AbstractSmartSelect");let l2=Xbe;const Zbe=class Zbe extends l2{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:m("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}};u(Zbe,"GrowSelectionAction");let UY=Zbe;lt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");const Jbe=class Jbe extends l2{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:m("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:M.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:A.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}};u(Jbe,"ShrinkSelectionAction");let zY=Jbe;ft(a_.ID,a_,4);ae(UY);ae(zY);function gke(o,e,t,n,i){return w4(this,void 0,void 0,function*(){const s=o.all(e).concat(new VY(n.selectSubwords));s.length===1&&s.unshift(new i_);const r=[],a=[];for(const l of s)r.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(d=>{if(Ri(d)&&d.length===t.length)for(let c=0;c<t.length;c++){a[c]||(a[c]=[]);for(const h of d[c])L.isIRange(h.range)&&L.containsPosition(h.range,t[c])&&a[c].push(L.lift(h.range))}},Ln));return yield Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,f)=>W.isBefore(g.getStartPosition(),f.getStartPosition())?1:W.isBefore(f.getStartPosition(),g.getStartPosition())||W.isBefore(g.getEndPosition(),f.getEndPosition())?-1:W.isBefore(f.getEndPosition(),g.getEndPosition())?1:0);const d=[];let c;for(const g of l)(!c||L.containsRange(g,c)&&!L.equalsRange(g,c))&&(d.push(g),c=g);if(!n.selectLeadingAndTrailingWhitespace)return d;const h=[d[0]];for(let g=1;g<d.length;g++){const f=d[g-1],p=d[g];if(p.startLineNumber!==f.startLineNumber||p.endLineNumber!==f.endLineNumber){const b=new L(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));b.containsRange(f)&&!b.equalsRange(f)&&p.containsRange(b)&&!p.equalsRange(b)&&h.push(b);const _=new L(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(b)&&p.containsRange(_)&&!p.equalsRange(_)&&h.push(_)}h.push(p)}return h})})}u(gke,"provideSelectionRanges");lt.registerCommand("_executeSelectionRangeProvider",function(o,...e){return w4(this,void 0,void 0,function*(){const[t,n]=e;Lt(Ae.isUri(t));const i=o.get(we).selectionRangeProvider,s=yield o.get(Ds).createModelReference(t);try{return gke(i,s.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Ze.None)}finally{s.dispose()}})});const JBe=Object.freeze({View:{value:m("view","View"),original:"View"},Help:{value:m("help","Help"),original:"Help"},Test:{value:m("test","Test"),original:"Test"},File:{value:m("file","File"),original:"File"},Preferences:{value:m("preferences","Preferences"),original:"Preferences"},Developer:{value:m({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}});var QBe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const Qbe=class Qbe{constructor(e,t,n,i=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=n,this.showEndForLine=i}};u(Qbe,"StickyScrollWidgetState");let d2=Qbe;const i1e=Kd("stickyScrollViewLayer",{createHTML:o=>o}),s1e="data-sticky-line-index",e_e=class e_e extends G{constructor(e){super(),this._editor=e,this._foldingIconStore=new ie,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(65),this._stickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof Iu),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=u(()=>{this._linesDomNode.style.left=this._editor.getOption(113).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"},"updateScrollLeftPosition");this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(113)&&t(),n.hasChanged(65)&&(this._lineHeight=this._editor.getOption(65))})),this._register(this._editor.onDidScrollChange(n=>{n.scrollLeftChanged&&t(),n.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(n=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getCurrentLines(){return this._lineNumbers}setState(e){if(this._clearStickyWidget(),!e||!this._editor._getViewModel())return;if(e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const n=[...e.startLineNumbers];e.showEndForLine!==null&&(n[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=n}else this._lastLineRelativePosition=0,this._lineNumbers=[];this._renderRootNode()}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),n=this._editor.getOption(71).side==="left"?e.contentLeft-e.minimap.minimapCanvasOuterWidth:e.contentLeft;this._lineNumbersDomNode.style.width=`${n}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.minimap.minimapCanvasOuterWidth-e.verticalScrollbarWidth}px`}_clearStickyWidget(){this._stickyLines=[],this._foldingIconStore.clear(),$n(this._lineNumbersDomNode),$n(this._linesDomNode),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._stickyLines){const n=t.foldingIcon;n&&n.setVisible(e?!0:n.isCollapsed)}}_renderRootNode(){var e;return QBe(this,void 0,void 0,function*(){const t=yield(e=Sl.get(this._editor))===null||e===void 0?void 0:e.getFoldingModel(),n=this._editor.getLayoutInfo();for(const[r,a]of this._lineNumbers.entries()){const l=this._renderChildNode(r,a,n,t);this._linesDomNode.appendChild(l.lineDomNode),this._lineNumbersDomNode.appendChild(l.lineNumberDomNode),this._stickyLines.push(l)}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const i=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;if(i===0){this._clearStickyWidget();return}this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${i}px`,this._linesDomNodeScrollable.style.height=`${i}px`,this._rootDomNode.style.height=`${i}px`,this._editor.getOption(71).side==="left"?this._rootDomNode.style.marginLeft=n.minimap.minimapCanvasOuterWidth+"px":this._rootDomNode.style.marginLeft="0px",this._updateMinContentWidth(),this._editor.layoutOverlayWidget(this)})}_setFoldingHoverListeners(){this._editor.getOption(108)==="mouseover"&&(this._foldingIconStore.add(q(this._lineNumbersDomNode,pe.MOUSE_ENTER,t=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(q(this._lineNumbersDomNode,pe.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,n,i){const s=this._editor._getViewModel(),r=s.coordinatesConverter.convertModelPositionToViewPosition(new W(t,1)).lineNumber,a=s.getViewLineRenderingData(r),l=this._editor.getOption(71).side,d=this._editor.getOption(66);let c;try{c=_o.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const h=new Tr(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),g=new Pd(2e3),f=y_(h,g);let p;i1e?p=i1e.createHTML(g.build()):p=g.build();const b=document.createElement("span");b.className="sticky-line-content",b.classList.add(`stickyLine${t}`),b.style.lineHeight=`${this._lineHeight}px`,b.innerHTML=p;const _=document.createElement("span");_.className="sticky-line-number",_.style.lineHeight=`${this._lineHeight}px`;const v=l==="left"?n.contentLeft-n.minimap.minimapCanvasOuterWidth:n.contentLeft;_.style.width=`${v}px`;const y=document.createElement("span");d.renderType===1||d.renderType===3&&t%10===0?y.innerText=t.toString():d.renderType===2&&(y.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),y.className="sticky-line-number-inner",y.style.lineHeight=`${this._lineHeight}px`,y.style.width=`${n.lineNumbersWidth}px`,y.style.float="left",l==="left"?y.style.paddingLeft=`${n.lineNumbersLeft-n.minimap.minimapCanvasOuterWidth}px`:l==="right"&&(y.style.paddingLeft=`${n.lineNumbersLeft}px`),_.appendChild(y);const w=this._renderFoldingIconForLine(_,i,e,t);this._editor.applyFontInfo(b),this._editor.applyFontInfo(y),b.setAttribute("role","listitem"),b.setAttribute(s1e,String(e)),b.tabIndex=0,_.style.lineHeight=`${this._lineHeight}px`,b.style.lineHeight=`${this._lineHeight}px`,_.style.height=`${this._lineHeight}px`,b.style.height=`${this._lineHeight}px`;const C=e===this._lineNumbers.length-1,S="0",k="1";b.style.zIndex=C?S:k,_.style.zIndex=C?S:k;const T=`${e*this._lineHeight+this._lastLineRelativePosition+(w?.isCollapsed?1:0)}px`,E=`${e*this._lineHeight}px`;return b.style.top=C?T:E,_.style.top=C?T:E,new jY(t,b,_,w,f.characterMapping)}_renderFoldingIconForLine(e,t,n,i){const s=this._editor.getOption(108);if(!t||s==="never")return;const r=t.regions,a=r.findRange(i),l=r.getStartLineNumber(a);if(!(i===l))return;const c=r.isCollapsed(a),h=new KY(c,this._lineHeight);return e.append(h.domNode),h.setVisible(this._isOnGlyphMargin?!0:c||s==="always"),this._foldingIconStore.add(q(h.domNode,pe.CLICK,()=>{BEe(t,Number.MAX_VALUE,[i]),h.isCollapsed=!c;const g=(c?this._editor.getTopForLineNumber(l):this._editor.getTopForLineNumber(r.getEndLineNumber(a)))-this._lineHeight*n+1;this._editor.setScrollTop(g)})),h}_updateMinContentWidth(){this._minContentWidthInPx=0;for(const e of this._stickyLines)e.lineDomNode.scrollWidth>this._minContentWidthInPx&&(this._minContentWidthInPx=e.lineDomNode.scrollWidth);this._minContentWidthInPx+=this._editor.getLayoutInfo().verticalScrollbarWidth}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._stickyLines.length&&this._stickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const n=BZ(t.characterMapping,e,0);return new W(t.lineNumber,n)}getLineNumberFromChildDomNode(e){var t,n;return(n=(t=this._getRenderedStickyLineFromChildDomNode(e))===null||t===void 0?void 0:t.lineNumber)!==null&&n!==void 0?n:null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getStickyLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._stickyLines.length?null:this._stickyLines[t]}getStickyLineIndexFromChildDomNode(e){for(;e&&e!==this._rootDomNode;){const t=e.getAttribute(s1e);if(t)return parseInt(t,10);e=e.parentElement}return null}};u(e_e,"StickyScrollWidget");let GY=e_e;const t_e=class t_e{constructor(e,t,n,i,s){this.lineNumber=e,this.lineDomNode=t,this.lineNumberDomNode=n,this.foldingIcon=i,this.characterMapping=s}};u(t_e,"RenderedStickyLine");let jY=t_e;const n_e=class n_e{constructor(e,t){this.isCollapsed=e,this.dimension=t,this.domNode=document.createElement("div"),this.domNode.style.width=`${t}px`,this.domNode.style.height=`${t}px`,this.domNode.className=Te.asClassName(e?f4:g4)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}};u(n_e,"StickyFoldingIcon");let KY=n_e;const i_e=class i_e{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}};u(i_e,"StickyRange");let fg=i_e;const s_e=class s_e{constructor(e,t,n){this.range=e,this.children=t,this.parent=n}};u(s_e,"StickyElement");let l_=s_e;const o_e=class o_e{constructor(e,t,n,i){this.uri=e,this.version=t,this.element=n,this.outlineProviderId=i}};u(o_e,"StickyModel");let c2=o_e;var C4=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},u1=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},o1e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},v0;(function(o){o.OUTLINE_MODEL="outlineModel",o.FOLDING_PROVIDER_MODEL="foldingProviderModel",o.INDENTATION_MODEL="indentationModel"})(v0||(v0={}));var $c;(function(o){o[o.VALID=0]="VALID",o[o.INVALID=1]="INVALID",o[o.CANCELED=2]="CANCELED"})($c||($c={}));var wL;let $Y=(wL=class extends G{constructor(e,t,n,i){super(),this._editor=e,this._languageConfigurationService=t,this._languageFeaturesService=n,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Uo(300)),this._updateOperation=this._register(new ie);const s=new qY(n),r=new XY(this._editor,n),a=new YY(this._editor,t);switch(i){case v0.OUTLINE_MODEL:this._modelProviders.push(s),this._modelProviders.push(r),this._modelProviders.push(a);break;case v0.FOLDING_PROVIDER_MODEL:this._modelProviders.push(r),this._modelProviders.push(a);break;case v0.INDENTATION_MODEL:this._modelProviders.push(a);break}}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}update(e,t,n){return o1e(this,void 0,void 0,function*(){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),yield this._updateScheduler.trigger(()=>o1e(this,void 0,void 0,function*(){for(const i of this._modelProviders){const{statusPromise:s,modelPromise:r}=i.computeStickyModel(e,t,n);this._modelPromise=r;const a=yield s;if(this._modelPromise!==r)return null;switch(a){case $c.CANCELED:return this._updateOperation.clear(),null;case $c.VALID:return i.stickyModel}}return null})).catch(i=>(Be(i),null))})}},u(wL,"StickyModelProvider"),wL);$Y=C4([u1(1,Pt),u1(2,we)],$Y);const r_e=class r_e{constructor(){this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,$c.INVALID}computeStickyModel(e,t,n){if(n.isCancellationRequested||!this.isProviderValid(e))return{statusPromise:this._invalid(),modelPromise:null};const i=Fn(s=>this.createModelFromProvider(e,t,s));return{statusPromise:i.then(s=>this.isModelValid(s)?n.isCancellationRequested?$c.CANCELED:(this._stickyModel=this.createStickyModel(e,t,n,s),$c.VALID):this._invalid()).then(void 0,s=>(Be(s),$c.CANCELED)),modelPromise:i}}isModelValid(e){return!0}isProviderValid(e){return!0}};u(r_e,"StickyModelCandidateProvider");let u2=r_e;var CL;let qY=(CL=class extends u2{constructor(e){super(),this._languageFeaturesService=e}createModelFromProvider(e,t,n){return CR.create(this._languageFeaturesService.documentSymbolProvider,e,n)}createStickyModel(e,t,n,i){var s;const{stickyOutlineElement:r,providerID:a}=this._stickyModelFromOutlineModel(i,(s=this._stickyModel)===null||s===void 0?void 0:s.outlineProviderId);return new c2(e.uri,t,r,a)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let n;if(et.first(e.children.values())instanceof wR){const a=et.find(e.children.values(),l=>l.id===t);if(a)n=a.children;else{let l="",d=-1,c;for(const[h,g]of e.children.entries()){const f=this._findSumOfRangesOfGroup(g);f>d&&(c=g,d=f,l=g.id)}t=l,n=c.children}}else n=e.children;const i=[],s=Array.from(n.values()).sort((a,l)=>{const d=new fg(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),c=new fg(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(d,c)});for(const a of s)i.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new l_(void 0,i,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const n=[];for(const s of e.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)n.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const r of s.children.values())n.push(this._stickyModelFromOutlineElement(r,s.symbol.selectionRange.startLineNumber));n.sort((s,r)=>this._comparator(s.range,r.range));const i=new fg(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new l_(i,n,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const n of e.children.values())t+=this._findSumOfRangesOfGroup(n);return e instanceof zC?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}},u(CL,"StickyModelFromCandidateOutlineProvider"),CL);qY=C4([u1(0,we)],qY);const a_e=class a_e extends u2{constructor(e){super(),this._foldingLimitReporter=new vR(e)}createStickyModel(e,t,n,i){const s=this._fromFoldingRegions(i);return new c2(e.uri,t,s,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,n=[],i=new l_(void 0,[],void 0);for(let s=0;s<t;s++){const r=e.getParentIndex(s);let a;r!==-1?a=n[r]:a=i;const l=new l_(new fg(e.getStartLineNumber(s),e.getEndLineNumber(s)+1),[],a);a.children.push(l),n.push(l)}return i}};u(a_e,"StickyModelFromCandidateFoldingProvider");let h2=a_e;var SL;let YY=(SL=class extends h2{constructor(e,t){super(e),this._languageConfigurationService=t}createModelFromProvider(e,t,n){return new VC(e,this._languageConfigurationService,this._foldingLimitReporter).compute(n)}},u(SL,"StickyModelFromCandidateIndentationFoldingProvider"),SL);YY=C4([u1(1,Pt)],YY);var xL;let XY=(xL=class extends h2{constructor(e,t){super(e),this._languageFeaturesService=t}isProviderValid(e){return Sl.getFoldingRangeProviders(this._languageFeaturesService,e).length>0}createModelFromProvider(e,t,n){const i=Sl.getFoldingRangeProviders(this._languageFeaturesService,e);return new WC(e,i,()=>this.createModelFromProvider(e,t,n),this._foldingLimitReporter,void 0).compute(n)}},u(xL,"StickyModelFromCandidateSyntaxFoldingProvider"),xL);XY=C4([u1(1,we)],XY);var e6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},r1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},a1e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const l_e=class l_e{constructor(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=n}};u(l_e,"StickyLineCandidate");let ZY=l_e;var TL;let JY=(TL=class extends G{constructor(e,t,n){super(),this._languageFeaturesService=t,this._languageConfigurationService=n,this._onDidChangeStickyScroll=this._register(new V),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._options=null,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new ie),this._updateSoon=this._register(new Et(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(113)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._stickyModelProvider=null,this._sessionStore.clear(),this._options=this._editor.getOption(113),this._options.enabled&&(this._stickyModelProvider=this._sessionStore.add(new $Y(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel)),this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this.update())}getVersionId(){var e;return(e=this._model)===null||e===void 0?void 0:e.version}update(){var e;return a1e(this,void 0,void 0,function*(){(e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new En,yield this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()})}updateStickyModel(e){return a1e(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._stickyModelProvider){this._model=null;return}const t=this._editor.getModel(),n=t.getVersionId(),i=yield this._stickyModelProvider.update(t,n,e);e.isCancellationRequested||(this._model=i)})}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,n,i,s){if(t.children.length===0)return;let r=s;const a=[];for(let c=0;c<t.children.length;c++){const h=t.children[c];h.range&&a.push(h.range.startLineNumber)}const l=this.updateIndex(Iy(a,e.startLineNumber,(c,h)=>c-h)),d=this.updateIndex(Iy(a,e.startLineNumber+i,(c,h)=>c-h));for(let c=l;c<=d;c++){const h=t.children[c];if(!h)return;if(h.range){const g=h.range.startLineNumber,f=h.range.endLineNumber;e.startLineNumber<=f+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,n.push(new ZY(g,f-1,i+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i+1,g))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i,s)}}getCandidateStickyLinesIntersecting(e){var t,n;if(!(!((t=this._model)===null||t===void 0)&&t.element))return[];let i=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,i,0,-1);const s=(n=this._editor._getViewModel())===null||n===void 0?void 0:n.getHiddenAreas();if(s)for(const r of s)i=i.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return i}},u(TL,"StickyLineCandidateProvider"),TL);JY=e6e([r1e(1,we),r1e(2,Pt)],JY);var t6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},l1e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},QY,LL;let xl=QY=(LL=class extends G{constructor(e,t,n,i,s,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=n,this._instaService=i,this._contextKeyService=a,this._sessionStore=new ie,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new GY(this._editor),this._stickyLineCandidateProvider=new JY(this._editor,n,s),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new d2([],[],0),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(c=>{(c.hasChanged(113)||c.hasChanged(71)||c.hasChanged(65)||c.hasChanged(108))&&this._readConfiguration()})),this._register(q(l,pe.CONTEXT_MENU,c=>l1e(this,void 0,void 0,function*(){this._onContextMenu(c)}))),this._stickyScrollFocusedContextKey=M.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=M.stickyScrollVisible.bindTo(this._contextKeyService);const d=this._register(ul(l));this._register(d.onDidBlur(c=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(d.onDidFocus(c=>{this.focus()})),this._registerMouseListeners(),this._register(q(l,pe.MOUSE_DOWN,c=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(QY.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)===null||e===void 0||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new ie,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(L.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new ie),t=this._register(new $b(this._editor,{extractLineNumberFromMouseEvent:s=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);return r?r.lineNumber:0}})),n=u(s=>{if(!this._editor.hasModel()||s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return null;const r=s.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new L(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},"getMouseEventTarget"),i=this._stickyScrollWidget.getDomNode();this._register(Jt(i,pe.CLICK,s=>{if(s.ctrlKey||s.altKey||s.metaKey||!s.leftButton)return;if(s.shiftKey){const a=this._stickyScrollWidget.getStickyLineIndexFromChildDomNode(s.target);if(a===null)return;const l=new W(this._endLineNumbers[a],1);this._revealLineInCenterIfOutsideViewport(l);return}let r=this._stickyScrollWidget.getEditorPositionFromNode(s.target);if(!r){const a=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);if(a===null)return;r=new W(a,1)}this._revealPosition(r)})),this._register(Jt(i,pe.MOUSE_MOVE,s=>{if(s.shiftKey){const r=this._stickyScrollWidget.getStickyLineIndexFromChildDomNode(s.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(q(i,pe.MOUSE_LEAVE,s=>{this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([s,r])=>{const a=n(s);if(!a||!s.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:d}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(d.style.textDecoration==="underline")return;const c=new En;e.add(He(()=>c.dispose(!0)));let h;l4(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new W(l.startLineNumber,l.startColumn+1),c.token).then(g=>{if(!c.token.isCancellationRequested)if(g.length!==0){this._candidateDefinitionsLength=g.length;const f=d;h!==f?(e.clear(),h=f,h.style.textDecoration="underline",e.add(He(()=>{h.style.textDecoration="none"}))):h||(h=f,h.style.textDecoration="underline",e.add(He(()=>{h.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(s=>l1e(this,void 0,void 0,function*(){if(s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);r&&(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(ZEe,s,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor}))})))}_onContextMenu(e){const t=new Bs(e);this._contextMenuService.showContextMenu({menuId:A.StickyScrollContext,getAnchor:()=>t})}_readConfiguration(){const e=this._editor.getOption(113);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(n=>this._onTokensChange(n))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=null,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(66).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=null,this._renderStickyScroll()}))}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const n of t)for(const i of e.ranges)if(n>=i.fromLineNumber&&n<=i.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll()}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(65);this._maxStickyLines=Math.round(t*.25)}_renderStickyScroll(){const e=this._editor.getModel();if(!e||e.isTooLargeForTokenization()){this._stickyScrollWidget.setState(void 0);return}const t=this._stickyLineCandidateProvider.getVersionId();if(t===void 0||t===e.getVersionId())if(this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),!this._focused)this._stickyScrollWidget.setState(this._widgetState);else if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const n=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(n)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}findScrollWidgetState(){const e=this._editor.getOption(65),t=Math.min(this._maxStickyLines,this._editor.getOption(113).maxLineCount),n=this._editor.getScrollTop();let i=0;const s=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new fg(a[0].startLineNumber,a[a.length-1].endLineNumber),d=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const c of d){const h=c.startLineNumber,g=c.endLineNumber,f=c.nestingDepth;if(g-h>0){const p=(f-1)*e,b=f*e,_=this._editor.getBottomForLineNumber(h)-n,v=this._editor.getTopForLineNumber(g)-n,y=this._editor.getBottomForLineNumber(g)-n;if(p>v&&p<=y){s.push(h),r.push(g+1),i=y-b;break}else b>_&&b<=y&&(s.push(h),r.push(g+1));if(s.length===t)break}}}return this._endLineNumbers=r,new d2(s,r,i,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},u(LL,"StickyScrollController"),LL);xl.ID="store.contrib.stickyScrollController";xl=QY=t6e([Xf(1,To),Xf(2,we),Xf(3,Pe),Xf(4,Pt),Xf(5,Jo),Xf(6,Re)],xl);var n6e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const d_e=class d_e extends $o{constructor(){super({id:"editor.action.toggleStickyScroll",title:{value:m("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:m({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:JBe.View,toggled:{condition:ne.equals("config.editor.stickyScroll.enabled",!0),title:m("stickyScroll","Sticky Scroll"),mnemonicTitle:m({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:A.CommandPalette},{id:A.MenubarAppearanceMenu,group:"4_editor",order:3},{id:A.StickyScrollContext}]})}run(e){return n6e(this,void 0,void 0,function*(){const t=e.get(at),n=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",n)})}};u(d_e,"ToggleStickyScroll");let eX=d_e;const S4=100,c_e=class c_e extends Hd{constructor(){super({id:"editor.action.focusStickyScroll",title:{value:m("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:m({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll"),original:"Focus Sticky Scroll"},precondition:ne.and(ne.has("config.editor.stickyScroll.enabled"),M.stickyScrollVisible),menu:[{id:A.CommandPalette}]})}runEditorCommand(e,t){var n;(n=xl.get(t))===null||n===void 0||n.focus()}};u(c_e,"FocusStickyScroll");let tX=c_e;const u_e=class u_e extends Hd{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:{value:m("selectNextStickyScrollLine.title","Select next sticky scroll line"),original:"Select next sticky scroll line"},precondition:M.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:S4,primary:18}})}runEditorCommand(e,t){var n;(n=xl.get(t))===null||n===void 0||n.focusNext()}};u(u_e,"SelectNextStickyScrollLine");let nX=u_e;const h_e=class h_e extends Hd{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:{value:m("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),original:"Select previous sticky scroll line"},precondition:M.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:S4,primary:16}})}runEditorCommand(e,t){var n;(n=xl.get(t))===null||n===void 0||n.focusPrevious()}};u(h_e,"SelectPreviousStickyScrollLine");let iX=h_e;const g_e=class g_e extends Hd{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:{value:m("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),original:"Go to focused sticky scroll line"},precondition:M.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:S4,primary:3}})}runEditorCommand(e,t){var n;(n=xl.get(t))===null||n===void 0||n.goToFocused()}};u(g_e,"GoToStickyScrollLine");let sX=g_e;const f_e=class f_e extends Hd{constructor(){super({id:"editor.action.selectEditor",title:{value:m("selectEditor.title","Select Editor"),original:"Select Editor"},precondition:M.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:S4,primary:9}})}runEditorCommand(e,t){var n;(n=xl.get(t))===null||n===void 0||n.selectEditor()}};u(f_e,"SelectEditor");let oX=f_e;ft(xl.ID,xl,1);Sn(eX);Sn(tX);Sn(iX);Sn(nX);Sn(sX);Sn(oX);var aQ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pg=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},i6e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},gh;const p_e=class p_e{constructor(e,t,n,i,s,r){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=i,this.command=s,this.completion=r}};u(p_e,"SuggestInlineCompletion");let rX=p_e;var EL;let aX=(EL=class extends qV{constructor(e,t,n,i,s,r){super(s.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=i,this._suggestMemoryService=r}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var e;const t=[],{items:n}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=et.slice(n,i),r=et.slice(n,0,i);let a=5;for(const l of et.concat(s,r)){if(l.score===fa.Default)continue;const d=new L(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=l.completion.insertTextRules&&l.completion.insertTextRules&4?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new rX(d,c,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(Ze.None)}return t}},u(EL,"InlineCompletionResults"),EL);aX=aQ([pg(5,_4)],aX);var kL;let lX=(kL=class{constructor(e,t,n,i){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=n,this._suggestMemoryService=i}provideInlineCompletions(e,t,n,i){var s;return i6e(this,void 0,void 0,function*(){if(n.selectedSuggestionInfo)return;const r=this._getEditorOption(87,e);if(Kc.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Kc.valueFor(r,l)!=="inline")return;let d=e.getWordAtPosition(t),c;if(d?.word||(c=this._getTriggerCharacterInfo(e,t)),!d?.word&&!c||(d||(d=e.getWordUntilPosition(t)),d.endColumn!==t.column))return;let h;const g=e.getValueInRange(new L(t.lineNumber,1,t.lineNumber,t.column));if(!c&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,d))){const f=new JCe(g,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),h=this._lastResult}else{const f=yield QJ(this._languageFeatureService.completionProvider,e,t,new uf(void 0,void 0,c?.providers),c&&{triggerKind:1,triggerCharacter:c.ch},i);let p;f.needsClipboard&&(p=yield this._clipboardService.readText());const b=new PR(f.items,t.column,new JCe(g,0),s_.None,this._getEditorOption(116,e),this._getEditorOption(110,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);h=new aX(e,t.lineNumber,d,b,f,this._suggestMemoryService)}return this._lastResult=h,h})}handleItemDidShow(e,t){t.completion.resolve(Ze.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var n;const i=e.getValueInRange(L.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))!((n=r.triggerCharacters)===null||n===void 0)&&n.includes(i)&&s.add(r);if(s.size!==0)return{providers:s,ch:i}}},u(kL,"SuggestInlineCompletions"),kL);lX=aQ([pg(1,we),pg(2,Sa),pg(3,_4)],lX);var DL;let g2=gh=(DL=class{constructor(e,t,n,i){if(++gh._counter===1){const s=i.createInstance(lX,(r,a)=>{var l;return((l=n.listCodeEditors().find(c=>c.getModel()===a))!==null&&l!==void 0?l:e).getOption(r)});gh._disposable=t.inlineCompletionsProvider.register("*",s)}}dispose(){var e;--gh._counter===0&&((e=gh._disposable)===null||e===void 0||e.dispose(),gh._disposable=void 0)}},u(DL,"EditorContribution"),DL);g2._counter=0;g2=gh=aQ([pg(1,we),pg(2,gt),pg(3,Pe)],g2);ft("suggest.inlineCompletionsProvider",g2,0);const m_e=class m_e extends ye{constructor(){super({id:"editor.action.forceRetokenize",label:m("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const i=new Fi;n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}};u(m_e,"ForceRetokenizeAction");let dX=m_e;ae(dX);const lO=class lO extends $o{constructor(){super({id:lO.ID,title:{value:m({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),original:"Toggle Tab Key Moves Focus"},precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(e){const t=e.get(Re).getContextKeyValue("focusedView")==="terminal"?"terminalFocus":"editorFocus",i=!ig.getTabFocusMode(t);ig.setTabFocusMode(i,t),Ii(i?m("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):m("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};u(lO,"ToggleTabFocusModeAction");let f2=lO;f2.ID="editor.action.toggleTabFocusMode";Sn(f2);var s6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},o6e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ML;let cX=(ML=class extends G{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,n={},i){var s;super(),this._link=t,this._enabled=!0,this.el=Q(e,re("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const r=this._register(new Qe(this.el,"click")),a=this._register(new Qe(this.el,"keypress")),l=Ce.chain(a.event).map(h=>new Mt(h)).filter(h=>h.keyCode===3).event,d=this._register(new Qe(this.el,Nt.Tap)).event;this._register(oi.addTarget(this.el));const c=Ce.any(r.event,l,d);this._register(c(h=>{this.enabled&&(Ke.stop(h,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}},u(ML,"Link"),ML);cX=s6e([o6e(3,Ks)],cX);var fke=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pke=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}};const r6e=26;var AL;let uX=(AL=class extends G{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(hX))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,r6e)}},u(AL,"BannerController"),AL);uX=fke([pke(1,Pe)],uX);var IL;let hX=(IL=class extends G{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(zd,{}),this.element=re("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=re("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){$n(this.element)}show(e){$n(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=Q(this.element,re("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(re(`div${Te.asCSSSelector(e.icon)}`));const i=Q(this.element,re("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Q(this.element,re("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(cX,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));const s=Q(this.element,re("div.action-container"));this.actionBar=this._register(new Ls(s)),this.actionBar.push(this._register(new qn("banner.close","Close Banner",Te.asClassName(cTe),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}},u(IL,"Banner"),IL);hX=fke([pke(0,Pe)],hX);var lQ=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Ym=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ki=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const a6e=Yt("extensions-warning-message",ue.warning,m("warningIcon","Icon shown with a warning message in the extensions editor."));var NL;let d_=(NL=class extends G{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const r=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new h_};else if(s.ambiguousCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new ju};else if(s.invisibleCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new u_};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:a6e,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(uX,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(123),this._register(n.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(123)&&(this._options=e.getOption(123),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=l6e(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?iDe:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new gX(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new fX(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},u(NL,"UnicodeHighlighter"),NL);d_.ID="editor.contrib.unicodeHighlighter";d_=lQ([Ym(1,Nr),Ym(2,kTe),Ym(3,Pe)],d_);function l6e(o,e){return{nonBasicASCII:e.nonBasicASCII===Js?!o:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Js?!o:e.includeComments,includeStrings:e.includeStrings===Js?!o:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}u(l6e,"resolveOptions");var RL;let gX=(RL=class extends G{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Et(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:c_.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!KZ(t,e))return null;const n=t.getValueInRange(e.range);return{reason:mke(n,this._options),inComment:$Z(t,e),inString:qZ(t,e)}}},u(RL,"DocumentUnicodeHighlighter"),RL);gX=lQ([Ym(3,Nr)],gX);const b_e=class b_e extends G{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Et(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const s=sw.computeUnicodeHighlights(this._model,this._options,i);for(const r of s.ranges)n.ranges.push(r);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||s.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:c_.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return KZ(t,e)?{reason:mke(n,this._options),inComment:$Z(t,e),inString:qZ(t,e)}:null}};u(b_e,"ViewportUnicodeHighlighter");let fX=b_e;var PL;let pX=(PL=class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(d_.ID);if(!i)return[];const s=[],r=new Set;let a=300;for(const l of t){const d=i.getDecorationInfo(l);if(!d)continue;const h=n.getValueInRange(l.range).codePointAt(0),g=nV(h);let f;switch(d.reason.kind){case 0:{ZL(d.reason.confusableWith)?f=m("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",g,nV(d.reason.confusableWith.codePointAt(0))):f=m("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",g,nV(d.reason.confusableWith.codePointAt(0)));break}case 1:f=m("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",g);break;case 2:f=m("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",g);break}if(r.has(f))continue;r.add(f);const p={codePoint:h,reason:d.reason,inComment:d.inComment,inString:d.inString},b=m("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${h1.ID}?${encodeURIComponent(JSON.stringify(p))}`,v=new zn("",!0).appendMarkdown(f).appendText(" ").appendLink(_,b);s.push(new Fo(this,l.range,[v],!1,a++))}return s}renderHoverParts(e,t){return uEe(e,t,this._editor,this._languageService,this._openerService)}},u(PL,"UnicodeHighlighterHoverParticipant"),PL);pX=lQ([Ym(1,Kt),Ym(2,Ks)],pX);function mX(o){return`U+${o.toString(16).padStart(4,"0")}`}u(mX,"codePointToHex");function nV(o){let e=`\`${mX(o)}\``;return Xc.isInvisibleCharacter(o)||(e+=` "${`${d6e(o)}`}"`),e}u(nV,"formatCodePointMarkdown");function d6e(o){return o===96?"`` ` ``":"`"+String.fromCodePoint(o)+"`"}u(d6e,"renderCodePointAsInlineCode");function mke(o,e){return sw.computeUnicodeHighlightReason(o,e)}u(mke,"computeReason");const __e=class __e{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Fe.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}};u(__e,"Decorations");let c_=__e;c_.instance=new c_;const v_e=class v_e extends ye{constructor(){super({id:ju.ID,label:m("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return ki(this,void 0,void 0,function*(){const i=e?.get(at);i&&this.runAction(i)})}runAction(e){return ki(this,void 0,void 0,function*(){yield e.updateValue(_s.includeComments,!1,2)})}};u(v_e,"DisableHighlightingInCommentsAction");let bX=v_e;const y_e=class y_e extends ye{constructor(){super({id:ju.ID,label:m("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return ki(this,void 0,void 0,function*(){const i=e?.get(at);i&&this.runAction(i)})}runAction(e){return ki(this,void 0,void 0,function*(){yield e.updateValue(_s.includeStrings,!1,2)})}};u(y_e,"DisableHighlightingInStringsAction");let _X=y_e;const dO=class dO extends ye{constructor(){super({id:dO.ID,label:m("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return ki(this,void 0,void 0,function*(){const i=e?.get(at);i&&this.runAction(i)})}runAction(e){return ki(this,void 0,void 0,function*(){yield e.updateValue(_s.ambiguousCharacters,!1,2)})}};u(dO,"DisableHighlightingOfAmbiguousCharactersAction");let ju=dO;ju.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";const cO=class cO extends ye{constructor(){super({id:cO.ID,label:m("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return ki(this,void 0,void 0,function*(){const i=e?.get(at);i&&this.runAction(i)})}runAction(e){return ki(this,void 0,void 0,function*(){yield e.updateValue(_s.invisibleCharacters,!1,2)})}};u(cO,"DisableHighlightingOfInvisibleCharactersAction");let u_=cO;u_.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";const uO=class uO extends ye{constructor(){super({id:uO.ID,label:m("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return ki(this,void 0,void 0,function*(){const i=e?.get(at);i&&this.runAction(i)})}runAction(e){return ki(this,void 0,void 0,function*(){yield e.updateValue(_s.nonBasicASCII,!1,2)})}};u(uO,"DisableHighlightingOfNonBasicAsciiCharactersAction");let h_=uO;h_.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";const hO=class hO extends ye{constructor(){super({id:hO.ID,label:m("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return ki(this,void 0,void 0,function*(){const{codePoint:i,reason:s,inString:r,inComment:a}=n,l=String.fromCodePoint(i),d=e.get(xa),c=e.get(at);function h(p){return Xc.isInvisibleCharacter(p)?m("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",mX(p)):m("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${mX(p)} "${l}"`)}u(h,"getExcludeCharFromBeingHighlightedLabel");const g=[];if(s.kind===0)for(const p of s.notAmbiguousInLocales)g.push({label:m("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',p),run:()=>ki(this,void 0,void 0,function*(){u6e(c,[p])})});if(g.push({label:h(i),run:()=>c6e(c,[i])}),a){const p=new bX;g.push({label:p.label,run:()=>ki(this,void 0,void 0,function*(){return p.runAction(c)})})}else if(r){const p=new _X;g.push({label:p.label,run:()=>ki(this,void 0,void 0,function*(){return p.runAction(c)})})}if(s.kind===0){const p=new ju;g.push({label:p.label,run:()=>ki(this,void 0,void 0,function*(){return p.runAction(c)})})}else if(s.kind===1){const p=new u_;g.push({label:p.label,run:()=>ki(this,void 0,void 0,function*(){return p.runAction(c)})})}else if(s.kind===2){const p=new h_;g.push({label:p.label,run:()=>ki(this,void 0,void 0,function*(){return p.runAction(c)})})}else h6e(s);const f=yield d.pick(g,{title:m("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}};u(hO,"ShowExcludeOptions");let h1=hO;h1.ID="editor.action.unicodeHighlight.showExcludeOptions";function c6e(o,e){return ki(this,void 0,void 0,function*(){const t=o.getValue(_s.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield o.updateValue(_s.allowedCharacters,n,2)})}u(c6e,"excludeCharFromBeingHighlighted");function u6e(o,e){var t;return ki(this,void 0,void 0,function*(){const n=(t=o.inspect(_s.allowedLocales).user)===null||t===void 0?void 0:t.value;let i;typeof n=="object"&&n?i=Object.assign({},n):i={};for(const s of e)i[s]=!0;yield o.updateValue(_s.allowedLocales,i,2)})}u(u6e,"excludeLocaleFromBeingHighlighted");function h6e(o){throw new Error(`Unexpected value: ${o}`)}u(h6e,"expectNever");ae(ju);ae(u_);ae(h_);ae(h1);ft(d_.ID,d_,1);Pf.register(pX);var g6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},d1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},f6e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})};const bke="ignoreUnusualLineTerminators";function p6e(o,e,t){o.setModelProperty(e.uri,bke,t)}u(p6e,"writeIgnoreState");function m6e(o,e){return o.getModelProperty(e.uri,bke)}u(m6e,"readIgnoreState");var FL;let g1=(FL=class extends G{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._isPresentingDialog=!1,this._config=this._editor.getOption(124),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(124)&&(this._config=this._editor.getOption(124),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}_checkForUnusualLineTerminators(){return f6e(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||m6e(this._codeEditorService,e)===!0||this._editor.getOption(89))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let n;try{this._isPresentingDialog=!0,n=yield this._dialogService.confirm({title:m("unusualLineTerminators.title","Unusual Line Terminators"),message:m("unusualLineTerminators.message","Detected unusual line terminators"),detail:m("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",qo(e.uri)),primaryButton:m({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:m("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!n.confirmed){p6e(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}},u(FL,"UnusualLineTerminatorsDetector"),FL);g1.ID="editor.contrib.unusualLineTerminatorsDetector";g1=g6e([d1e(1,sE),d1e(2,gt)],g1);ft(g1.ID,g1,1);var b6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},c1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},vX;const x4=new _e("hasWordHighlights",!1);function _ke(o,e,t,n){const i=o.ordered(e);return CSe(i.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,n)).then(void 0,Ln)),Ri)}u(_ke,"getOccurrencesAtPosition");const w_e=class w_e{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Fn(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new L(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,s=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let d=0,c=n.length;!l&&d<c;d++){const h=n.getRange(d);h&&h.startLineNumber===i&&h.startColumn<=s&&h.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}};u(w_e,"OccurenceAtPositionRequest");let p2=w_e;const C_e=class C_e extends p2{constructor(e,t,n,i){super(e,t,n),this._providers=i}_compute(e,t,n,i){return _ke(this._providers,e,t.getPosition(),i).then(s=>s||[])}};u(C_e,"SemanticOccurenceAtPositionRequest");let yX=C_e;const S_e=class S_e extends p2{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return fu(250,i).then(()=>{if(!t.isEmpty())return[];const s=e.getWordAtPosition(t.getPosition());return!s||s.word.length>1e3?[]:e.findMatches(s.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:Gy.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}};u(S_e,"TextualOccurenceAtPositionRequest");let wX=S_e;function _6e(o,e,t,n){return o.has(e)?new yX(e,t,n,o):new wX(e,t,n)}u(_6e,"computeOccurencesAtPosition");Al("_executeDocumentHighlights",(o,e,t)=>{const n=o.get(we);return _ke(n.documentHighlightProvider,e,t,Ze.None)});const x_e=class x_e{constructor(e,t,n,i){this.toUnhook=new ie,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.linkedHighlighters=n,this._hasWordHighlights=x4.bindTo(i),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(79),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(s=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(s)})),this.toUnhook.add(e.onDidChangeModelContent(s=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(s=>{const r=this.editor.getOption(79);this.occurrencesHighlight!==r&&(this.occurrencesHighlight=r,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(L.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);Ii(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(i.startLineNumber);Ii(`${r}, ${n+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){const e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}const t=e.startColumn,n=e.endColumn,i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),s)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=_6e(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(128)),this.workerRequest.result.then(a=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Be)}}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;const e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:MBe(t.kind)});this.decorations.set(e),this._hasWordHighlights.set(this.hasDecorations());for(const t of this.linkedHighlighters())t?.editor.getModel()===this.editor.getModel()&&(t._stopAll(),t.decorations.set(e),t._hasWordHighlights.set(t.hasDecorations()))}dispose(){this._stopAll(),this.toUnhook.dispose()}};u(x_e,"WordHighlighter");let CX=x_e;var OL;let vf=vX=(OL=class extends G{static get(e){return e.getContribution(vX.ID)}constructor(e,t,n){super(),this.wordHighlighter=null,this.linkedContributions=new Set;const i=u(()=>{e.hasModel()&&(this.wordHighlighter=new CX(e,n.documentHighlightProvider,()=>et.map(this.linkedContributions,s=>s.wordHighlighter),t))},"createWordHighlighterIfPossible");this._register(e.onDidChangeModel(s=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this.wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}},u(OL,"WordHighlighterContribution"),OL);vf.ID="editor.contrib.wordHighlighter";vf=vX=b6e([c1e(1,Re),c1e(2,we)],vf);const T_e=class T_e extends ye{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=vf.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}};u(T_e,"WordHighlightNavigationAction");let m2=T_e;const L_e=class L_e extends m2{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:m("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:x4,kbOpts:{kbExpr:M.editorTextFocus,primary:65,weight:100}})}};u(L_e,"NextWordHighlightAction");let SX=L_e;const E_e=class E_e extends m2{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:m("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:x4,kbOpts:{kbExpr:M.editorTextFocus,primary:1089,weight:100}})}};u(E_e,"PrevWordHighlightAction");let xX=E_e;const k_e=class k_e extends ye{constructor(){super({id:"editor.action.wordHighlight.trigger",label:m("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:x4.toNegated(),kbOpts:{kbExpr:M.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=vf.get(t);i&&i.restoreViewState(!0)}};u(k_e,"TriggerWordHighlightAction");let TX=k_e;ft(vf.ID,vf,0);ae(SX);ae(xX);ae(TX);const D_e=class D_e extends hi{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=zo(t.getOption(128)),s=t.getModel(),a=t.getSelections().map(l=>{const d=new W(l.positionLineNumber,l.positionColumn),c=this._move(i,s,d,this._wordNavigationType);return this._moveTo(l,c,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>ut.fromModelSelection(l))),a.length===1){const l=new W(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new xe(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new xe(t.lineNumber,t.column,t.lineNumber,t.column)}};u(D_e,"MoveWordCommand");let g_=D_e;const M_e=class M_e extends g_{_move(e,t,n,i){return Qn.moveWordLeft(e,t,n,i)}};u(M_e,"WordLeftCommand");let Tl=M_e;const A_e=class A_e extends g_{_move(e,t,n,i){return Qn.moveWordRight(e,t,n,i)}};u(A_e,"WordRightCommand");let Ll=A_e;const I_e=class I_e extends Tl{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}};u(I_e,"CursorWordStartLeft");let LX=I_e;const N_e=class N_e extends Tl{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}};u(N_e,"CursorWordEndLeft");let EX=N_e;const R_e=class R_e extends Tl{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:ne.and(M.textInputFocus,(e=ne.and(JL,BO))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}};u(R_e,"CursorWordLeft");let kX=R_e;const P_e=class P_e extends Tl{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}};u(P_e,"CursorWordStartLeftSelect");let DX=P_e;const F_e=class F_e extends Tl{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}};u(F_e,"CursorWordEndLeftSelect");let MX=F_e;const O_e=class O_e extends Tl{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:ne.and(M.textInputFocus,(e=ne.and(JL,BO))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}};u(O_e,"CursorWordLeftSelect");let AX=O_e;const H_e=class H_e extends Tl{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(zo(Mr.wordSeparators.defaultValue),t,n,i)}};u(H_e,"CursorWordAccessibilityLeft");let IX=H_e;const V_e=class V_e extends Tl{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(zo(Mr.wordSeparators.defaultValue),t,n,i)}};u(V_e,"CursorWordAccessibilityLeftSelect");let NX=V_e;const W_e=class W_e extends Ll{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}};u(W_e,"CursorWordStartRight");let RX=W_e;const B_e=class B_e extends Ll{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:ne.and(M.textInputFocus,(e=ne.and(JL,BO))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}};u(B_e,"CursorWordEndRight");let PX=B_e;const U_e=class U_e extends Ll{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}};u(U_e,"CursorWordRight");let FX=U_e;const z_e=class z_e extends Ll{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}};u(z_e,"CursorWordStartRightSelect");let OX=z_e;const G_e=class G_e extends Ll{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:ne.and(M.textInputFocus,(e=ne.and(JL,BO))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}};u(G_e,"CursorWordEndRightSelect");let HX=G_e;const j_e=class j_e extends Ll{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}};u(j_e,"CursorWordRightSelect");let VX=j_e;const K_e=class K_e extends Ll{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(zo(Mr.wordSeparators.defaultValue),t,n,i)}};u(K_e,"CursorWordAccessibilityRight");let WX=K_e;const $_e=class $_e extends Ll{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(zo(Mr.wordSeparators.defaultValue),t,n,i)}};u($_e,"CursorWordAccessibilityRightSelect");let BX=$_e;const q_e=class q_e extends hi{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(Pt);if(!t.hasModel())return;const s=zo(t.getOption(128)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),d=t.getOption(10),c=i.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),h=t._getViewModel(),g=a.map(f=>{const p=this._delete({wordSeparators:s,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(8),autoClosingBrackets:l,autoClosingQuotes:d,autoClosingPairs:c,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new ni(p,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}};u(q_e,"DeleteWordCommand");let f_=q_e;const Y_e=class Y_e extends f_{_delete(e,t){const n=Qn.deleteWordLeft(e,t);return n||new L(1,1,1,1)}};u(Y_e,"DeleteWordLeftCommand");let f1=Y_e;const X_e=class X_e extends f_{_delete(e,t){const n=Qn.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new L(i,s,i,s)}};u(X_e,"DeleteWordRightCommand");let p1=X_e;const Z_e=class Z_e extends f1{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:M.writable})}};u(Z_e,"DeleteWordStartLeft");let UX=Z_e;const J_e=class J_e extends f1{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:M.writable})}};u(J_e,"DeleteWordEndLeft");let zX=J_e;const Q_e=class Q_e extends f1{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}};u(Q_e,"DeleteWordLeft");let GX=Q_e;const eve=class eve extends p1{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:M.writable})}};u(eve,"DeleteWordStartRight");let jX=eve;const tve=class tve extends p1{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:M.writable})}};u(tve,"DeleteWordEndRight");let KX=tve;const nve=class nve extends p1{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}};u(nve,"DeleteWordRight");let $X=nve;const ive=class ive extends ye{constructor(){super({id:"deleteInsideWord",precondition:M.writable,label:m("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=zo(t.getOption(128)),s=t.getModel(),a=t.getSelections().map(l=>{const d=Qn.deleteInsideWord(i,s,l);return new ni(d,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}};u(ive,"DeleteInsideWord");let qX=ive;he(new LX);he(new EX);he(new kX);he(new DX);he(new MX);he(new AX);he(new RX);he(new PX);he(new FX);he(new OX);he(new HX);he(new VX);he(new IX);he(new NX);he(new WX);he(new BX);he(new UX);he(new zX);he(new GX);he(new jX);he(new KX);he(new $X);ae(qX);const sve=class sve extends f_{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=wb.deleteWordPartLeft(e);return n||new L(1,1,1,1)}};u(sve,"DeleteWordPartLeft");let YX=sve;const ove=class ove extends f_{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:M.writable,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=wb.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return new L(i,s,i,s)}};u(ove,"DeleteWordPartRight");let XX=ove;const rve=class rve extends g_{_move(e,t,n,i){return wb.moveWordPartLeft(e,t,n)}};u(rve,"WordPartLeftCommand");let b2=rve;const ave=class ave extends b2{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:783},weight:100}})}};u(ave,"CursorWordPartLeft");let ZX=ave;lt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");const lve=class lve extends b2{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}};u(lve,"CursorWordPartLeftSelect");let JX=lve;lt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");const dve=class dve extends g_{_move(e,t,n,i){return wb.moveWordPartRight(e,t,n)}};u(dve,"WordPartRightCommand");let _2=dve;const cve=class cve extends _2{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:785},weight:100}})}};u(cve,"CursorWordPartRight");let QX=cve;const uve=class uve extends _2{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:M.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}};u(uve,"CursorWordPartRightSelect");let eZ=uve;he(new YX);he(new XX);he(new ZX);he(new JX);he(new QX);he(new eZ);const hve=class hve extends G{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=zs.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(90);t||(this.editor.isSimpleWidget?t=new zn(m("editor.simple.readonly","Cannot edit in read-only input")):t=new zn(m("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};u(hve,"ReadOnlyMessageController");let m1=hve;m1.ID="editor.contrib.readOnlyMessageController";ft(m1.ID,m1,2);const gve=class gve extends G{constructor(e){super(),this.editor=e,this.widget=null,Cr&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(89);!this.widget&&e?this.widget=new v2(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};u(gve,"IPadShowKeyboard");let b1=gve;b1.ID="editor.contrib.iPadShowKeyboard";const gO=class gO extends G{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(q(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(q(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return gO.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};u(gO,"ShowKeyboardWidget");let v2=gO;v2.ID="editor.contrib.ShowKeyboardWidget";ft(b1.ID,b1,3);var v6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},u1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},tZ,HL;let p_=tZ=(HL=class extends G{static get(e){return e.getContribution(tZ.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(en.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new y2(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},u(HL,"InspectTokensController"),HL);p_.ID="editor.contrib.inspectTokens";p_=tZ=v6e([u1e(1,$s),u1e(2,Kt)],p_);const fve=class fve extends ye{constructor(){super({id:"editor.action.inspectTokens",label:O6.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=p_.get(t);n?.launch()}};u(fve,"InspectTokens");let nZ=fve;function y6e(o){let e="";for(let t=0,n=o.length;t<n;t++){const i=o.charCodeAt(t);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}u(y6e,"renderTokenText");function w6e(o,e){const t=en.get(e);if(t)return t;const n=o.encodeLanguageId(e);return{getInitialState:()=>ib,tokenize:(i,s,r)=>TZ(e,r),tokenizeEncoded:(i,s,r)=>LO(n,r)}}u(w6e,"getSafeTokenizationSupport");const fO=class fO extends G{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=w6e(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return fO._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const d=t.tokens1[l];if(e.column-1>=d.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const s=this._model.getLineContent(e.lineNumber);let r="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,d=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;r=s.substring(l,d)}wi(this._domNode,re("h2.tm-token",void 0,y6e(r),re("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),Q(this._domNode,re("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;Q(this._domNode,re("table.tm-metadata-table",void 0,re("tbody",void 0,re("tr",void 0,re("td.tm-metadata-key",void 0,"language"),re("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),re("tr",void 0,re("td.tm-metadata-key",void 0,"token type"),re("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),re("tr",void 0,re("td.tm-metadata-key",void 0,"font style"),re("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),re("tr",void 0,re("td.tm-metadata-key",void 0,"foreground"),re("td.tm-metadata-value",void 0,`${a?K.Format.CSS.formatHex(a.foreground):"-?-"}`)),re("tr",void 0,re("td.tm-metadata-key",void 0,"background"),re("td.tm-metadata-value",void 0,`${a?K.Format.CSS.formatHex(a.background):"-?-"}`))))),Q(this._domNode,re("hr.tokens-inspect-separator")),n<t.tokens1.length&&Q(this._domNode,re("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=en.getColorMap(),n=ii.getLanguageId(e),i=ii.getTokenType(e),s=ii.getFontStyle(e),r=ii.getForeground(e),a=ii.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:s,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};u(fO,"InspectTokensWidget");let y2=fO;y2._ID="editor.contrib.inspectTokensWidget";ft(p_.ID,p_,4);ae(nZ);var C6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},h1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},Ev,VL;let w2=Ev=(VL=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=on.as(Mf.Quickaccess)}provide(e){const t=new ie;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const i=this.registry.getQuickAccessProvider(n.substr(Ev.PREFIX.length));i&&i.prefix&&i.prefix!==Ev.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(n=>n.prefix!==Ev.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,n)=>t.prefix.localeCompare(n.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const n=t.prefix||e.prefix,i=n||"…";return{prefix:n,label:i,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:m("helpPickAriaLabel","{0}, {1}",i,t.description),description:t.description}})}},u(VL,"HelpQuickAccessProvider"),VL);w2.PREFIX="?";w2=Ev=C6e([h1e(0,xa),h1e(1,At)],w2);on.as(Mf.Quickaccess).registerQuickAccessProvider({ctor:w2,prefix:"",helpEntries:[{description:H6.helpQuickAccessActionLabel}]});const pve=class pve{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new ie;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=i.add(new si);return s.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),i}doProvide(e,t){var n;const i=new ie,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){const r={editor:s},a=lLe(s);if(a){let l=(n=s.saveViewState())!==null&&n!==void 0?n:void 0;i.add(a.onDidChangeCursorPosition(()=>{var d;l=(d=s.saveViewState())!==null&&d!==void 0?d:void 0})),r.restoreViewState=()=>{l&&s===this.activeTextEditorControl&&s.restoreViewState(l)},i.add(ll(t.onCancellationRequested)(()=>{var d;return(d=r.restoreViewState)===null||d===void 0?void 0:d.call(r)}))}i.add(He(()=>this.clearDecorations(s))),i.add(this.provideWithTextEditor(r,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const n=e.getModel();n&&"getLineContent"in n&&Rg(`${n.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return aLe(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:ln(yxe),position:mo.Full}}}],[r,a]=n.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}};u(pve,"AbstractEditorNavigationQuickAccessProvider");let C2=pve;const pO=class pO extends C2{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=m("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,G.None}provideWithTextEditor(e,t,n){const i=e.editor,s=new ie;s.add(t.onDidAccept(l=>{const[d]=t.selectedItems;if(d){if(!this.isValidLineNumber(i,d.lineNumber))return;this.gotoLocation(e,{range:this.toRange(d.lineNumber,d.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=u(()=>{const l=this.parsePosition(i,t.value.trim().substr(pO.PREFIX.length)),d=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:d}],t.ariaLabel=d,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const c=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(c,0),this.addDecorations(i,c)},"updatePickerAndEditor");r(),s.add(t.onDidChangeValue(()=>r()));const a=lLe(i);return a&&a.getOptions().get(66).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(He(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?m("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):m("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?m("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,s):m("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const s={lineNumber:t,column:n};return i.validatePosition(s).equals(s)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}};u(pO,"AbstractGotoLineQuickAccessProvider");let S2=pO;S2.PREFIX=":";var S6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},x6e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},WL;let _1=(WL=class extends S2{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Ce.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}},u(WL,"StandaloneGotoLineQuickAccessProvider"),WL);_1=S6e([x6e(0,gt)],_1);var b_;let dQ=(b_=class extends ye{constructor(){super({id:b_.ID,label:gI.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(xa).quickAccess.show(_1.PREFIX)}},u(b_,"GotoLineAction"),b_);dQ.ID="editor.action.gotoLine";ae(dQ);on.as(Mf.Quickaccess).registerQuickAccessProvider({ctor:_1,prefix:_1.PREFIX,helpEntries:[{description:gI.gotoLineActionLabel,commandId:dQ.ID}]});const vke=[void 0,[]];function iV(o,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?T6e(o,i.values,t,n):yke(o,e,t,n)}u(iV,"scoreFuzzy2");function T6e(o,e,t,n){let i=0;const s=[];for(const r of e){const[a,l]=yke(o,r,t,n);if(typeof a!="number")return vke;i+=a,s.push(...l)}return[i,L6e(s)]}u(T6e,"doScoreFuzzy2Multiple");function yke(o,e,t,n){const i=Ug(e.original,e.originalLowercase,t,o,o.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],iE(i)]:vke}u(yke,"doScoreFuzzy2Single");function L6e(o){const e=o.sort((i,s)=>i.start-s.start),t=[];let n;for(const i of e)!n||!E6e(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}u(L6e,"normalizeMatches");function E6e(o,e){return!(o.end<e.start||e.end<o.start)}u(E6e,"matchOverlaps");function g1e(o){return o.startsWith('"')&&o.endsWith('"')}u(g1e,"queryExpectsExactMatch");const wke=" ";function iZ(o){typeof o!="string"&&(o="");const e=o.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=f1e(o),s=t.indexOf(ua)>=0,r=g1e(o);let a;const l=o.split(wke);if(l.length>1)for(const d of l){const c=g1e(d),{pathNormalized:h,normalized:g,normalizedLowercase:f}=f1e(d);g&&(a||(a=[]),a.push({original:d,originalLowercase:d.toLowerCase(),pathNormalized:h,normalized:g,normalizedLowercase:f,expectContiguousMatch:c}))}return{original:o,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:s,expectContiguousMatch:r}}u(iZ,"prepareQuery");function f1e(o){let e;Si?e=o.replace(/\//g,ua):e=o.replace(/\\/g,ua);const t=JDe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}u(f1e,"normalizeQuery");function p1e(o){return Array.isArray(o)?iZ(o.map(e=>e.original).join(wke)):iZ(o.original)}u(p1e,"pieceToQuery");var k6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},m1e=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},ov=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Xm,BL;let sl=Xm=(BL=class extends C2{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,m("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),G.None}provideWithTextEditor(e,t,n){const i=e.editor,s=this.getModel(i);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,n):this.doProvideWithoutEditorSymbols(e,s,t,n):G.None}doProvideWithoutEditorSymbols(e,t,n,i){const s=new ie;return this.provideLabelPick(n,m("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),ov(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,s))||i.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,n,i))}),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return ov(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new sb,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(He(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){var s;const r=e.editor,a=new ie;a.add(n.onDidAccept(h=>{const[g]=n.selectedItems;g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:n.keyMods,preserveFocus:h.inBackground}),h.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,i);let d;const c=u(h=>ov(this,void 0,void 0,function*(){d?.dispose(!0),n.busy=!1,d=new En(i),n.busy=!0;try{const g=iZ(n.value.substr(Xm.PREFIX.length).trim()),f=yield this.doGetSymbolPicks(l,g,void 0,d.token);if(i.isCancellationRequested)return;if(f.length>0){if(n.items=f,h&&g.original.length===0){const p=S1e(f,b=>!!(b.type!=="separator"&&b.range&&L.containsPosition(b.range.decoration,h)));p&&(n.activeItems=[p])}}else g.original.length>0?this.provideLabelPick(n,m("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,m("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}}),"updatePickerItems");return a.add(n.onDidChangeValue(()=>c(void 0))),c((s=r.getSelection())===null||s===void 0?void 0:s.getPosition()),a.add(n.onDidChangeActive(()=>{const[h]=n.activeItems;h&&h.range&&(r.revealRangeInCenter(h.range.selection,0),this.addDecorations(r,h.range.decoration))})),a}doGetSymbolPicks(e,t,n,i){var s,r;return ov(this,void 0,void 0,function*(){const a=yield e;if(i.isCancellationRequested)return[];const l=t.original.indexOf(Xm.SCOPE_PREFIX)===0,d=l?1:0;let c,h;t.values&&t.values.length>1?(c=p1e(t.values[0]),h=p1e(t.values.slice(1))):c=t;let g;const f=(r=(s=this.options)===null||s===void 0?void 0:s.openSideBySideDirection)===null||r===void 0?void 0:r.call(s);f&&(g=[{iconClass:f==="right"?Te.asClassName(ue.splitHorizontal):Te.asClassName(ue.splitVertical),tooltip:f==="right"?m("openToSide","Open to the Side"):m("openToBottom","Open to the Bottom")}]);const p=[];for(let v=0;v<a.length;v++){const y=a[v],w=XDe(y.name),C=`$(${_D.toIcon(y.kind).id}) ${w}`,S=C.length-w.length;let k=y.containerName;n?.extraContainerLabel&&(k?k=`${n.extraContainerLabel} • ${k}`:k=n.extraContainerLabel);let T,E,D,O;if(t.original.length>d){let H=!1;if(c!==t&&([T,E]=iV(C,Object.assign(Object.assign({},t),{values:void 0}),d,S),typeof T=="number"&&(H=!0)),typeof T!="number"&&([T,E]=iV(C,c,d,S),typeof T!="number"))continue;if(!H&&h){if(k&&h.original.length>0&&([D,O]=iV(k,h)),typeof D!="number")continue;typeof T=="number"&&(T+=D)}}const B=y.tags&&y.tags.indexOf(1)>=0;p.push({index:v,kind:y.kind,score:T,label:C,ariaLabel:qDe(y.name,y.kind),description:k,highlights:B?void 0:{label:E,description:O},range:{selection:L.collapseToStart(y.selectionRange),decoration:y.range},strikethrough:B,buttons:g})}const b=p.sort((v,y)=>l?this.compareByKindAndScore(v,y):this.compareByScore(v,y));let _=[];if(l){let C=function(){y&&typeof v=="number"&&w>0&&(y.label=Sg(oV[v]||sV,w))};u(C,"updateLastSeparatorLabel");let v,y,w=0;for(const S of b)v!==S.kind?(C(),v=S.kind,w=1,y={type:"separator"},_.push(y)):w++,_.push(S);C()}else b.length>0&&(_=[{label:m("symbols","symbols ({0})",p.length),type:"separator"},...b]);return _})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=oV[e.kind]||sV,i=oV[t.kind]||sV,s=n.localeCompare(i);return s===0?this.compareByScore(e,t):s}getDocumentSymbols(e,t){return ov(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}},u(BL,"AbstractGotoSymbolQuickAccessProvider"),BL);sl.PREFIX="@";sl.SCOPE_PREFIX=":";sl.PREFIX_BY_CATEGORY=`${Xm.PREFIX}${Xm.SCOPE_PREFIX}`;sl=Xm=k6e([m1e(0,we),m1e(1,p4)],sl);const sV=m("property","properties ({0})"),oV={5:m("method","methods ({0})"),11:m("function","functions ({0})"),8:m("_constructor","constructors ({0})"),12:m("variable","variables ({0})"),4:m("class","classes ({0})"),22:m("struct","structs ({0})"),23:m("event","events ({0})"),24:m("operator","operators ({0})"),10:m("interface","interfaces ({0})"),2:m("namespace","namespaces ({0})"),3:m("package","packages ({0})"),25:m("typeParameter","type parameters ({0})"),1:m("modules","modules ({0})"),6:m("property","properties ({0})"),9:m("enum","enumerations ({0})"),21:m("enumMember","enumeration members ({0})"),14:m("string","strings ({0})"),0:m("file","files ({0})"),17:m("array","arrays ({0})"),15:m("number","numbers ({0})"),16:m("boolean","booleans ({0})"),18:m("object","objects ({0})"),19:m("key","keys ({0})"),7:m("field","fields ({0})"),13:m("constant","constants ({0})")};var D6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rV=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},UL;let sZ=(UL=class extends sl{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=Ce.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}},u(UL,"StandaloneGotoSymbolQuickAccessProvider"),UL);sZ=D6e([rV(0,gt),rV(1,we),rV(2,p4)],sZ);const mO=class mO extends ye{constructor(){super({id:mO.ID,label:Qw.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:M.hasDocumentSymbolProvider,kbOpts:{kbExpr:M.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(xa).quickAccess.show(sl.PREFIX,{itemActivation:Qr.NONE})}};u(mO,"GotoSymbolAction");let v1=mO;v1.ID="editor.action.quickOutline";ae(v1);on.as(Mf.Quickaccess).registerQuickAccessProvider({ctor:sZ,prefix:sl.PREFIX,helpEntries:[{description:Qw.quickOutlineActionLabel,prefix:sl.PREFIX,commandId:v1.ID},{description:Qw.quickOutlineByCategoryActionLabel,prefix:sl.PREFIX_BY_CATEGORY}]});function aV(o,e){return e&&(o.stack||o.stacktrace)?m("stackTrace.format","{0}: {1}",_1e(o),b1e(o.stack)||b1e(o.stacktrace)):_1e(o)}u(aV,"exceptionToErrorMessage");function b1e(o){return Array.isArray(o)?o.join(`
`):o}u(b1e,"stackToString");function _1e(o){return o.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${o.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?m("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u(_1e,"detectSystemErrorMessage");function Cke(o=null,e=!1){if(!o)return m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){const t=ol(o),n=Cke(t[0],e);return t.length>1?m("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(rs(o))return o;if(o.detail){const t=o.detail;if(t.error)return aV(t.error,e);if(t.exception)return aV(t.exception,e)}return o.stack?aV(o,e):o.message?o.message:m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}u(Cke,"toErrorMessage");var rv=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},Wp;(function(o){o[o.NO_ACTION=0]="NO_ACTION",o[o.CLOSE_PICKER=1]="CLOSE_PICKER",o[o.REFRESH_PICKER=2]="REFRESH_PICKER",o[o.REMOVE_ITEM=3]="REMOVE_ITEM"})(Wp||(Wp={}));function lV(o){const e=o;return Array.isArray(e.items)}u(lV,"isPicksWithActive");function v1e(o){const e=o;return!!e.picks&&e.additionalPicks instanceof Promise}u(v1e,"isFastAndSlowPicks");const mve=class mve extends G{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,n){var i;const s=new ie;e.canAcceptInBackground=!!(!((i=this.options)===null||i===void 0)&&i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r;const a=s.add(new si),l=u(()=>rv(this,void 0,void 0,function*(){const d=a.value=new ie;r?.dispose(!0),e.busy=!1,r=new En(t);const c=r.token,h=e.value.substr(this.prefix.length).trim(),g=this._getPicks(h,d,c,n),f=u((b,_)=>{var v;let y,w;if(lV(b)?(y=b.items,w=b.active):y=b,y.length===0){if(_)return!1;(h.length>0||e.hideInput)&&(!((v=this.options)===null||v===void 0)&&v.noResultsPick)&&(Ry(this.options.noResultsPick)?y=[this.options.noResultsPick(h)]:y=[this.options.noResultsPick])}return e.items=y,w&&(e.activeItems=[w]),!0},"applyPicks"),p=u(b=>rv(this,void 0,void 0,function*(){let _=!1,v=!1;yield Promise.all([(()=>rv(this,void 0,void 0,function*(){typeof b.mergeDelay=="number"&&(yield fu(b.mergeDelay),c.isCancellationRequested)||v||(_=f(b.picks,!0))}))(),(()=>rv(this,void 0,void 0,function*(){e.busy=!0;try{const y=yield b.additionalPicks;if(c.isCancellationRequested)return;let w,C;lV(b.picks)?(w=b.picks.items,C=b.picks.active):w=b.picks;let S,k;if(lV(y)?(S=y.items,k=y.active):S=y,S.length>0||!_){let T;if(!C&&!k){const E=e.activeItems[0];E&&w.indexOf(E)!==-1&&(T=E)}f({items:[...w,...S],active:C||k||T})}}finally{c.isCancellationRequested||(e.busy=!1),v=!0}}))()])}),"applyFastAndSlowPicks");if(g!==null)if(v1e(g))yield p(g);else if(!(g instanceof Promise))f(g);else{e.busy=!0;try{const b=yield g;if(c.isCancellationRequested)return;v1e(b)?yield p(b):f(b)}finally{c.isCancellationRequested||(e.busy=!1)}}}),"updatePickerItems");return s.add(e.onDidChangeValue(()=>l())),l(),s.add(e.onDidAccept(d=>{const[c]=e.selectedItems;typeof c?.accept=="function"&&(d.inBackground||e.hide(),c.accept(e.keyMods,d))})),s.add(e.onDidTriggerItemButton(({button:d,item:c})=>rv(this,void 0,void 0,function*(){var h,g;if(typeof c.trigger=="function"){const f=(g=(h=c.buttons)===null||h===void 0?void 0:h.indexOf(d))!==null&&g!==void 0?g:-1;if(f>=0){const p=c.trigger(f,e.keyMods),b=typeof p=="number"?p:yield p;if(t.isCancellationRequested)return;switch(b){case Wp.NO_ACTION:break;case Wp.CLOSE_PICKER:e.hide();break;case Wp.REFRESH_PICKER:l();break;case Wp.REMOVE_ITEM:{const _=e.items.indexOf(c);if(_!==-1){const v=e.items.slice(),y=v.splice(_,1),w=e.activeItems.filter(S=>S!==y[0]),C=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=v,w&&(e.activeItems=w),e.keepScrollPosition=C}break}}}}}))),s}};u(mve,"PickerQuickAccessProvider");let oZ=mve;var Ske=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Lh=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},dV=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},kv,Wn,zL;let y1=kv=(zL=class extends oZ{constructor(e,t,n,i,s,r){super(kv.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=s,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(yf)),this.options=e}_getPicks(e,t,n,i){var s,r,a,l;return dV(this,void 0,void 0,function*(){const d=yield this.getCommandPicks(n);if(n.isCancellationRequested)return[];const c=[];for(const b of d){const _=(s=kv.WORD_FILTER(e,b.label))!==null&&s!==void 0?s:void 0,v=b.commandAlias&&(r=kv.WORD_FILTER(e,b.commandAlias))!==null&&r!==void 0?r:void 0;_||v?(b.highlights={label:_,detail:this.options.showAlias?v:void 0},c.push(b)):e===b.commandId&&c.push(b)}const h=new Map;for(const b of c){const _=h.get(b.label);_?(b.description=b.commandId,_.description=_.commandId):h.set(b.label,b)}c.sort((b,_)=>{const v=this.commandsHistory.peek(b.commandId),y=this.commandsHistory.peek(_.commandId);if(v&&y)return v>y?-1:1;if(v)return-1;if(y)return 1;if(this.options.suggestedCommandIds){const w=this.options.suggestedCommandIds.has(b.commandId),C=this.options.suggestedCommandIds.has(_.commandId);if(w&&C)return 0;if(w)return-1;if(C)return 1}return b.label.localeCompare(_.label)});const g=[];let f=!1,p=!!this.options.suggestedCommandIds;for(let b=0;b<c.length;b++){const _=c[b];b===0&&this.commandsHistory.peek(_.commandId)&&(g.push({type:"separator",label:m("recentlyUsed","recently used")}),f=!0),p&&!this.commandsHistory.peek(_.commandId)&&(!((a=this.options.suggestedCommandIds)===null||a===void 0)&&a.has(_.commandId))&&(g.push({type:"separator",label:m("commonlyUsed","commonly used")}),f=!0,p=!1),f&&!this.commandsHistory.peek(_.commandId)&&!(!((l=this.options.suggestedCommandIds)===null||l===void 0)&&l.has(_.commandId))&&(g.push({type:"separator",label:m("morecCommands","other commands")}),f=!1),g.push(this.toCommandPick(_,i))}return this.hasAdditionalCommandPicks(e,n)?{picks:g,additionalPicks:(()=>dV(this,void 0,void 0,function*(){const b=yield this.getAdditionalCommandPicks(d,c,e,n);return n.isCancellationRequested?[]:b.map(_=>this.toCommandPick(_,i))}))()}:g})}toCommandPick(e,t){if(e.type==="separator")return e;const n=this.keybindingService.lookupKeybinding(e.commandId),i=n?m("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,n.getAriaLabel()):e.label;return Object.assign(Object.assign({},e),{ariaLabel:i,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:n,accept:()=>dV(this,void 0,void 0,function*(){var s,r;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(s=t?.from)!==null&&s!==void 0?s:"quick open"});try{!((r=e.args)===null||r===void 0)&&r.length?yield this.commandService.executeCommand(e.commandId,...e.args):yield this.commandService.executeCommand(e.commandId)}catch(a){Ca(a)||this.dialogService.error(m("canNotRun","Command '{0}' resulted in an error",e.label),Cke(a))}})})}},u(zL,"AbstractCommandsQuickAccessProvider"),zL);y1.PREFIX=">";y1.WORD_FILTER=YZ(Kw,TFe,jxe);y1=kv=Ske([Lh(1,Pe),Lh(2,At),Lh(3,un),Lh(4,xo),Lh(5,sE)],y1);var GL;let yf=Wn=(GL=class extends G{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e)))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Wn.getConfiguredCommandHistoryLength(this.configurationService),Wn.cache&&Wn.cache.limit!==this.configuredCommandsHistoryLength&&(Wn.cache.limit=this.configuredCommandsHistoryLength,Wn.saveState(this.storageService)))}load(){const e=this.storageService.get(Wn.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Wn.cache=new pl(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((s,r)=>s.value-r.value),i.forEach(s=>n.set(s.key,s.value))}Wn.counter=this.storageService.getNumber(Wn.PREF_KEY_COUNTER,0,Wn.counter)}push(e){Wn.cache&&(Wn.cache.set(e,Wn.counter++),Wn.saveState(this.storageService))}peek(e){var t;return(t=Wn.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Wn.cache)return;const t={usesLRU:!0,entries:[]};Wn.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(Wn.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Wn.PREF_KEY_COUNTER,Wn.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const s=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof s=="number"?s:Wn.DEFAULT_COMMANDS_HISTORY_LENGTH}},u(GL,"CommandsHistory"),GL);yf.DEFAULT_COMMANDS_HISTORY_LENGTH=50;yf.PREF_KEY_CACHE="commandPalette.mru.cache";yf.PREF_KEY_COUNTER="commandPalette.mru.counter";yf.counter=1;yf=Wn=Ske([Lh(0,Rr),Lh(1,at)],yf);const bve=class bve extends y1{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:tJ(n.label)||n.id});return t}};u(bve,"AbstractEditorCommandsQuickAccessProvider");let rZ=bve;var M6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},y1e=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(r){r(s)})}return u(i,"adopt"),new(t||(t=Promise))(function(s,r){function a(c){try{d(n.next(c))}catch(h){r(h)}}u(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(h){r(h)}}u(l,"rejected");function d(c){c.done?s(c.value):i(c.value).then(a,l)}u(d,"step"),d((n=n.apply(o,e||[])).next())})},jL;let w1=(jL=class extends rZ{get activeTextEditorControl(){var e;return(e=this.codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}constructor(e,t,n,i,s,r){super({showAlias:!1},e,n,i,s,r),this.codeEditorService=t}getCommandPicks(){return y1e(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}hasAdditionalCommandPicks(){return!1}getAdditionalCommandPicks(){return y1e(this,void 0,void 0,function*(){return[]})}},u(jL,"StandaloneCommandsQuickAccessProvider"),jL);w1=M6e([Zf(0,Pe),Zf(1,gt),Zf(2,At),Zf(3,un),Zf(4,xo),Zf(5,sE)],w1);const bO=class bO extends ye{constructor(){super({id:bO.ID,label:fI.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:M.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(xa).quickAccess.show(w1.PREFIX)}};u(bO,"GotoLineAction");let C1=bO;C1.ID="editor.action.quickCommand";ae(C1);on.as(Mf.Quickaccess).registerQuickAccessProvider({ctor:w1,prefix:w1.PREFIX,helpEntries:[{description:fI.quickCommandHelp,commandId:C1.ID}]});var A6e=globalThis&&globalThis.__decorate||function(o,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(i<3?r(s):i>3?r(e,t,s):r(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jf=globalThis&&globalThis.__param||function(o,e){return function(t,n){e(t,n,o)}},KL;let aZ=(KL=class extends Nu{constructor(e,t,n,i,s,r,a){super(!0,e,t,n,i,s,r,a)}},u(KL,"StandaloneReferencesController"),KL);aZ=A6e([Jf(1,Re),Jf(2,gt),Jf(3,_n),Jf(4,Pe),Jf(5,Rr),Jf(6,at)],aZ);ft(Nu.ID,aZ,4);const _ve=class _ve extends ye{constructor(){super({id:"editor.action.toggleHighContrast",label:V6.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get($s),i=n.getColorTheme();tl(i.type)?(n.setTheme(this._originalThemeName||(mb(i.type)?zm:ud)),this._originalThemeName=null):(n.setTheme(mb(i.type)?dg:cg),this._originalThemeName=i.themeName)}};u(_ve,"ToggleHighContrast");let lZ=_ve;ae(lZ);function I6e(){return new Worker("/assets/editor.worker-8f6874b7.js")}u(I6e,"WorkerWrapper$1");function N6e(){return new Worker("/assets/ts.worker-1065134e.js")}u(N6e,"WorkerWrapper");function R6e(){const o=globalThis;if(o.MonacoEnvironment)return;o.MonacoEnvironment={getWorker(t,n){return n==="typescript"||n==="javascript"?new N6e:new I6e}},ip.typescript.typescriptDefaults.setCompilerOptions({strict:!0,target:ip.typescript.ScriptTarget.ESNext,module:ip.typescript.ModuleKind.ESNext,moduleResolution:ip.typescript.ModuleResolutionKind.NodeJs,forceConsistentCasingInFileNames:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,jsx:ip.typescript.JsxEmit.Preserve,jsxImportSource:"solid-js",allowNonTsExtensions:!0});for(const t in{"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.7.12",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/solid.js",
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/solid.js",
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./store/types/index.d.ts",
          "import": "./store/dist/dev.js",
          "require": "./store/dist/dev.cjs"
        },
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/store.js",
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/dev.js",
        "require": "./store/dist/dev.cjs"
      },
      "types": "./store/types/index.d.ts",
      "import": "./store/dist/store.js",
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./web/types/index.d.ts",
          "import": "./web/dist/dev.js",
          "require": "./web/dist/dev.cjs"
        },
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/web.js",
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/dev.js",
        "require": "./web/dist/dev.cjs"
      },
      "types": "./web/types/index.d.ts",
      "import": "./web/dist/web.js",
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "types": "./universal/types/index.d.ts",
        "import": "./universal/dist/dev.js",
        "require": "./universal/dist/dev.cjs"
      },
      "types": "./universal/types/index.d.ts",
      "import": "./universal/dist/universal.js",
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "types": "./h/types/index.d.ts",
      "import": "./h/dist/h.js",
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "types": "./h/jsx-runtime/types/index.d.ts",
      "import": "./h/jsx-runtime/dist/jsx.js",
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "types": "./h/jsx-runtime/types/index.d.ts",
      "import": "./h/jsx-runtime/dist/jsx.js",
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "types": "./html/types/index.d.ts",
      "import": "./html/dist/html.js",
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*",
    "./package.json": "./package.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0",
    "seroval": "^0.5.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "vitest run",
    "coverage": "vitest run --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/store.js",
        "require": "./dist/store.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/store.js",
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, catchError, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, ContextProviderComponent, EffectFunction, EffectOptions, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, OnOptions, Owner, ResolvedChildren, ResolvedJSXElement, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { registerGraph, writeSignal } from "./reactive/signal.js";
export declare const DEV: {
    readonly hooks: {
        afterUpdate: (() => void) | null;
        afterCreateOwner: ((owner: import("./reactive/signal.js").Owner) => void) | null;
    };
    readonly writeSignal: typeof writeSignal;
    readonly registerGraph: typeof registerGraph;
} | undefined;
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element = Node | ArrayElement | (string & {}) | number | boolean | null | undefined;
  interface ArrayElement extends Array<Element> {}
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;

  interface InputEventHandler<T, E extends InputEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundInputEventHandler<T, E extends InputEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type InputEventHandlerUnion<T, E extends InputEvent> =
    | InputEventHandler<T, E>
    | BoundInputEventHandler<T, E>;

  interface ChangeEventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundChangeEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type ChangeEventHandlerUnion<T, E extends Event> =
    | ChangeEventHandler<T, E>
    | BoundChangeEventHandler<T, E>;

  interface FocusEventHandler<T, E extends FocusEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundFocusEventHandler<T, E extends FocusEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type FocusEventHandlerUnion<T, E extends FocusEvent> =
    | FocusEventHandler<T, E>
    | BoundFocusEventHandler<T, E>;

  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: DOMElement, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: FocusEventHandlerUnion<T, FocusEvent>;
    onFocusIn?: FocusEventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: FocusEventHandlerUnion<T, FocusEvent>;
    onfocusin?: FocusEventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: InputEventHandlerUnion<T, InputEvent>;
    onBlur?: FocusEventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: ChangeEventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: FocusEventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: InputEventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, Event>;
    onScrollEnd?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionStart?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionRun?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionCancel?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: InputEventHandlerUnion<T, InputEvent>;
    onblur?: FocusEventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: ChangeEventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: FocusEventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: InputEventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, Event>;
    onscrollend?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionstart?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionrun?: EventHandlerUnion<T, TransitionEvent>;
    ontransitioncancel?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation"
    | "allow-top-navigation-to-custom-protocols";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean | "false" | "true";
    hidden?: boolean | "hidden" | "until-found";
    id?: string;
    inert?: boolean;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    "accept-charset"?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    loading?: "eager" | "lazy";
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    elementtiming?: string;
    fetchpriority?: "high" | "low" | "auto";
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autocorrect?: "on" | "off";
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    incremental?: boolean;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    results?: number;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    fetchpriority?: "high" | "low" | "auto";
    href?: string;
    hreflang?: string;
    imagesizes?: string;
    imagesrcset?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    "http-equiv"?: string;
    name?: string;
    media?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: "col" | "row" | "rowgroup" | "colgroup";
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    pathLength?: string | number;
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
    href?: string;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/universal.js",
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/web.js",
        "require": "./dist/web.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/web.js",
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
type ExpandableNode = Node & {
    [key: string]: any;
};
export type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`import type { HyperScript } from "./hyperscript";
declare const h: HyperScript;
export default h;
`,"html/types/index.d.ts":`import type { HTMLTag } from "./lit";
declare const html: HTMLTag;
export default html;
`,"html/types/lit.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    getPropAlias(prop: string, tagName: string): string | undefined;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents, functionBuilder }?: {
    delegateEvents?: boolean;
    functionBuilder?: (...args: string[]) => Function;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { $RAW, createStore, unwrap } from "./store.js";
export type { ArrayFilterFn, DeepMutable, DeepReadonly, NotWrappable, Part, SetStoreFunction, SolidStore, Store, StoreNode, StorePathRange, StoreSetter } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
    readonly hooks: {
        onStoreNodeUpdate: import("./store.js").OnStoreNodeUpdate | null;
    };
} | undefined;
`,"store/types/modifiers.d.ts":`export type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U extends object>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol, $HAS: unique symbol, $SELF: unique symbol;
export declare const DevHooks: {
    onStoreNodeUpdate: OnStoreNodeUpdate | null;
};
type DataNode = {
    (): any;
    $(value?: any): void;
};
type DataNodes = Record<PropertyKey, DataNode | undefined>;
export type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getNodes(target: StoreNode, symbol: typeof $NODE | typeof $HAS): DataNodes;
export declare function getNode(nodes: DataNodes, property: PropertyKey, value?: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): TypedPropertyDescriptor<any> | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
type W<T> = Exclude<T, NotWrappable>;
type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [never] ? never : [
    T
] extends [readonly unknown[]] ? number : keyof T : keyof T;
type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = [T] extends [never] ? never : K extends MutableKeyOf<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<T> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<W<T>, U>;
type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends MutableKeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
interface Observable<T> {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): Observable<T>;
}
export type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): Observable<T>;
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
export {};
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
/** Object storing callbacks for debugging during development */
export declare const DevHooks: {
    afterUpdate: (() => void) | null;
    afterCreateOwner: ((owner: Owner) => void) | null;
};
export type ComputationState = 0 | 1 | 2;
export interface SourceMapValue {
    value: unknown;
    name?: string;
    graph?: Owner;
}
export interface SignalState<T> extends SourceMapValue {
    value: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: SourceMapValue[];
    name?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: typeof Owner): T;
export type Accessor<T> = () => T;
export type Setter<in out T> = {
    <U extends T>(...args: undefined extends T ? [] : [value: (prev: T) => U]): undefined extends T ? undefined : U;
    <U extends T>(value: (prev: T) => U): U;
    <U extends T>(value: Exclude<U, Function>): U;
    <U extends T>(value: Exclude<U, Function> | ((prev: T) => U)): U;
};
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions & {
    render?: boolean;
}): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    value: Next;
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U = T>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions | {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @returns the same {@link fn} function that was passed in
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup<T extends () => any>(fn: T): T;
/**
 * catchError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn boundary for the error
 * @param handler an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#catcherror
 */
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<unknown> {
    props: T;
    name: string;
    component: (props: T) => unknown;
}
export declare function devComponent<P, V>(Comp: (props: P) => V, props: P): V;
export declare function registerGraph(value: SourceMapValue): void;
export type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement>;
export type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
type SuspenseContext = Context<SuspenseContextType | undefined> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: Error) => void): void;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#suspenselist-experimental
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#suspense
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export type PropsWithChildren<P = {}> = ParentProps<P>;
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
type DistributeOverride<T, F> = T extends undefined ? F : T;
type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#for
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): JSX.Element;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#index
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): JSX.Element;
type RequiredParameter<T> = T extends () => unknown ? never : T;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Show<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
export type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Match<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Match<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#errorboundary
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): JSX.Element;
export {};
`,"types/render/hydration.d.ts":`import { Computation } from "../reactive/signal";
export type HydrationContext = {
    id: string;
    count: number;
};
type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
    count?: number;
    effects?: Computation<any, any>[];
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { catchError, createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: undefined;
export type Accessor<T> = () => T;
export type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare function castError(err: unknown): Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
    owned: Owner[] | null;
    cleanups: (() => void)[] | null;
}
export declare function createOwner(): Owner;
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: typeof Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: Owner): void;
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 */
export declare function onError(fn: (err: Error) => void): void;
export {};
`,"types/server/rendering.d.ts":`import { Accessor, Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export type Component<P = {}> = (props: P) => JSX.Element;
export type VoidProps<P = {}> = P & {
    children?: never;
};
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export type Ref<T> = T | ((val: T) => void);
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    lazy: Record<string, Promise<any>>;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
  use<A, T>(fn: (element: NodeType, arg: A) => T, element: NodeType, arg: A): T;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;
export function getPropAlias(prop: string, tagName: string): string | undefined;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, isCE?: boolean, isSVG?: boolean): () => Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer: boolean;
export declare const isDev: boolean;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#portal
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
export type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#dynamic
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): JSX.Element;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => Promise<void>;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
declare function jsx(type: any, props: any): () => (Node & {
    [key: string]: any;
}) | (Node & {
    [key: string]: any;
})[];
export { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = { (): T } | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, Event>;
    onScrollEnd?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionStart?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionRun?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionCancel?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, Event>;
    onscrollend?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionstart?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionrun?: EventHandlerUnion<T, TransitionEvent>;
    ontransitioncancel?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem"
    >;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<
      "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search"
    >;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<
      "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search"
    >;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    "accept-charset"?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    fetchpriority?: FunctionMaybe<"high" | "low" | "auto">;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    imagesizes?: FunctionMaybe<string>;
    imagesrcset?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    "http-equiv"?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<"col" | "row" | "rowgroup" | "colgroup">;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    pathLength?: FunctionMaybe<string | number>;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit"
    >;
    "shape-rendering"?: FunctionMaybe<
      "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit"
    >;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<
      "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit"
    >;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<
      "none" | "underline" | "overline" | "line-through" | "blink" | "inherit"
    >;
    "text-rendering"?: FunctionMaybe<
      "auto" | "optimizeSpeed" | "optimizeLegibility" | "geometricPrecision" | "inherit"
    >;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
    href?: FunctionMaybe<string>;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`})jm.createModel({"jsx-runtime.d.ts":`export * from "./types/jsx";
`,"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.7.12",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "store/package.json",
    "web/dist",
    "web/types",
    "web/package.json",
    "h/dist",
    "h/types",
    "h/package.json",
    "h/jsx-runtime/dist",
    "h/jsx-runtime/types",
    "h/jsx-runtime/package.json",
    "h/jsx-dev-runtime/package.json",
    "html/dist",
    "html/types",
    "html/package.json",
    "universal/dist",
    "universal/types",
    "universal/package.json",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/solid.js",
        "require": "./dist/solid.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/solid.js",
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./jsx-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./jsx-dev-runtime": {
      "types": "./types/jsx.d.ts",
      "default": "./dist/solid.js"
    },
    "./store": {
      "worker": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./store/types/index.d.ts",
          "import": "./store/dist/dev.js",
          "require": "./store/dist/dev.cjs"
        },
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/store.js",
        "require": "./store/dist/store.cjs"
      },
      "deno": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "node": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "types": "./store/types/index.d.ts",
        "import": "./store/dist/dev.js",
        "require": "./store/dist/dev.cjs"
      },
      "types": "./store/types/index.d.ts",
      "import": "./store/dist/store.js",
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "worker": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./web/types/index.d.ts",
          "import": "./web/dist/dev.js",
          "require": "./web/dist/dev.cjs"
        },
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/web.js",
        "require": "./web/dist/web.cjs"
      },
      "deno": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "node": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "types": "./web/types/index.d.ts",
        "import": "./web/dist/dev.js",
        "require": "./web/dist/dev.cjs"
      },
      "types": "./web/types/index.d.ts",
      "import": "./web/dist/web.js",
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "types": "./universal/types/index.d.ts",
        "import": "./universal/dist/dev.js",
        "require": "./universal/dist/dev.cjs"
      },
      "types": "./universal/types/index.d.ts",
      "import": "./universal/dist/universal.js",
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "types": "./h/types/index.d.ts",
      "import": "./h/dist/h.js",
      "require": "./h/dist/h.cjs"
    },
    "./h/jsx-runtime": {
      "types": "./h/jsx-runtime/types/index.d.ts",
      "import": "./h/jsx-runtime/dist/jsx.js",
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/jsx-dev-runtime": {
      "types": "./h/jsx-runtime/types/index.d.ts",
      "import": "./h/jsx-runtime/dist/jsx.js",
      "require": "./h/jsx-runtime/dist/jsx.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "types": "./html/types/index.d.ts",
      "import": "./html/dist/html.js",
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*",
    "./package.json": "./package.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "dependencies": {
    "csstype": "^3.1.0",
    "seroval": "^0.5.0"
  },
  "scripts": {
    "build": "npm-run-all -nl build:*",
    "build:clean": "rimraf dist/ coverage/ store/dist/ web/dist/ h/dist/ h/jsx-runtime/dist html/dist/",
    "build:js": "rollup -c",
    "types": "npm-run-all -nl types:*",
    "types:clean": "rimraf types/ store/types/ web/types/ h/types/ h/jsx-runtime/types html/types/",
    "types:copy": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/src/jsx.d.ts",
    "types:src": "tsc --project ./tsconfig.build.json && ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./types/jsx.d.ts",
    "types:web": "tsc --project ./web/tsconfig.build.json",
    "types:copy-web": "ncp ../../node_modules/dom-expressions/src/client.d.ts ./web/types/client.d.ts && ncp ../../node_modules/dom-expressions/src/server.d.ts ./web/types/server.d.ts",
    "types:store": "tsc --project ./store/tsconfig.build.json",
    "types:html": "tsc --project ./html/tsconfig.json && ncp ../../node_modules/lit-dom-expressions/types/index.d.ts ./html/types/lit.d.ts",
    "types:h": "tsc --project ./h/tsconfig.json && ncp ../../node_modules/hyper-dom-expressions/types/index.d.ts ./h/types/hyperscript.d.ts",
    "types:jsx": "rimraf ./h/jsx-runtime/types && tsc --project ./h/jsx-runtime/tsconfig.json && ncp ../../node_modules/dom-expressions/src/jsx-h.d.ts ./h/jsx-runtime/types/jsx.d.ts",
    "types:universal": "tsc --project ./universal/tsconfig.json && ncp ../../node_modules/dom-expressions/src/universal.d.ts ./universal/types/universal.d.ts",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "link": "symlink-dir . node_modules/solid-js",
    "test": "vitest run",
    "coverage": "vitest run --coverage",
    "test-types": "tsc --project tsconfig.test.json"
  }
}`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/store.js",
        "require": "./dist/store.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/store.js",
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { $DEVCOMP, $PROXY, $TRACK, batch, catchError, children, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, enableExternalSource, enableScheduling, equalFn, getListener, getOwner, on, onCleanup, onError, onMount, runWithOwner, startTransition, untrack, useContext, useTransition } from "./reactive/signal.js";
export type { Accessor, AccessorArray, ChildrenReturn, Context, ContextProviderComponent, EffectFunction, EffectOptions, InitializedResource, InitializedResourceOptions, InitializedResourceReturn, MemoOptions, NoInfer, OnEffectFunction, OnOptions, Owner, ResolvedChildren, ResolvedJSXElement, Resource, ResourceActions, ResourceFetcher, ResourceFetcherInfo, ResourceOptions, ResourceReturn, ResourceSource, ReturnTypes, Setter, Signal, SignalOptions } from "./reactive/signal.js";
export * from "./reactive/observable.js";
export * from "./reactive/scheduler.js";
export * from "./reactive/array.js";
export * from "./render/index.js";
import type { JSX } from "./jsx.js";
type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { registerGraph, writeSignal } from "./reactive/signal.js";
export declare const DEV: {
    readonly hooks: {
        afterUpdate: (() => void) | null;
        afterCreateOwner: ((owner: import("./reactive/signal.js").Owner) => void) | null;
    };
    readonly writeSignal: typeof writeSignal;
    readonly registerGraph: typeof registerGraph;
} | undefined;
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element = Node | ArrayElement | (string & {}) | number | boolean | null | undefined;
  interface ArrayElement extends Array<Element> {}
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;

  interface InputEventHandler<T, E extends InputEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundInputEventHandler<T, E extends InputEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type InputEventHandlerUnion<T, E extends InputEvent> =
    | InputEventHandler<T, E>
    | BoundInputEventHandler<T, E>;

  interface ChangeEventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundChangeEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type ChangeEventHandlerUnion<T, E extends Event> =
    | ChangeEventHandler<T, E>
    | BoundChangeEventHandler<T, E>;

  interface FocusEventHandler<T, E extends FocusEvent> {
    (
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ): void;
  }
  interface BoundFocusEventHandler<T, E extends FocusEvent> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: T extends HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement
          ? T
          : DOMElement;
      }
    ) => void;
    1: any;
  }
  type FocusEventHandlerUnion<T, E extends FocusEvent> =
    | FocusEventHandler<T, E>
    | BoundFocusEventHandler<T, E>;

  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: DOMElement, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: FocusEventHandlerUnion<T, FocusEvent>;
    onFocusIn?: FocusEventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: FocusEventHandlerUnion<T, FocusEvent>;
    onfocusin?: FocusEventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: InputEventHandlerUnion<T, InputEvent>;
    onBlur?: FocusEventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: ChangeEventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: FocusEventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: InputEventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, Event>;
    onScrollEnd?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionStart?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionRun?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionCancel?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: InputEventHandlerUnion<T, InputEvent>;
    onblur?: FocusEventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: ChangeEventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: FocusEventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: InputEventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, Event>;
    onscrollend?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionstart?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionrun?: EventHandlerUnion<T, TransitionEvent>;
    ontransitioncancel?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation"
    | "allow-top-navigation-to-custom-protocols";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
  }

  // TODO: Should we allow this?
  // type ClassKeys = \`class:\${string}\`;
  // type CSSKeys = Exclude<keyof csstype.PropertiesHyphen, \`-\${string}\`>;

  // type CSSAttributes = {
  //   [key in CSSKeys as \`style:\${key}\`]: csstype.PropertiesHyphen[key];
  // };

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    // [key: ClassKeys]: boolean;
    accessKey?: string;
    class?: string | undefined;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean | "false" | "true";
    hidden?: boolean | "hidden" | "until-found";
    id?: string;
    inert?: boolean;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onClose?: EventHandlerUnion<T, Event>;
    onCancel?: EventHandlerUnion<T, Event>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    "accept-charset"?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    loading?: "eager" | "lazy";
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    elementtiming?: string;
    fetchpriority?: "high" | "low" | "auto";
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autocorrect?: "on" | "off";
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    incremental?: boolean;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    results?: number;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    fetchpriority?: "high" | "low" | "auto";
    href?: string;
    hreflang?: string;
    imagesizes?: string;
    imagesrcset?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    "http-equiv"?: string;
    name?: string;
    media?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: DocumentFragment;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    enterkeyhint?: "enter" | "done" | "go" | "next" | "previous" | "search" | "send";
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: "col" | "row" | "rowgroup" | "colgroup";
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string | undefined;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    pathLength?: string | number;
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
    href?: string;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/universal.js",
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "worker": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "browser": {
        "development": {
          "types": "./types/index.d.ts",
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "types": "./types/index.d.ts",
        "import": "./dist/web.js",
        "require": "./dist/web.cjs"
      },
      "deno": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "node": {
        "types": "./types/index.d.ts",
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "types": "./types/index.d.ts",
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "types": "./types/index.d.ts",
      "import": "./dist/web.js",
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/jsx-dev-runtime/package.json":`{
  "name": "solid-js/h/jsx-dev-runtime",
  "main": "../jsx-runtime/dist/jsx.cjs",
  "module": "../jsx-runtime/dist/jsx.js",
  "types": "../jsx-runtime/types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/jsx-runtime/package.json":`{
  "name": "solid-js/h/jsx-runtime",
  "main": "./dist/jsx.cjs",
  "module": "./dist/jsx.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"h/types/hyperscript.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread(node: Element, accessor: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    dynamicProperty(props: any, key: string): any;
    SVGElements: Set<string>;
}
type ExpandableNode = Node & {
    [key: string]: any;
};
export type HyperScript = {
    (...args: any[]): () => ExpandableNode | ExpandableNode[];
    Fragment: (props: {
        children: (() => ExpandableNode) | (() => ExpandableNode)[];
    }) => ExpandableNode[];
};
export declare function createHyperScript(r: Runtime): HyperScript;
export {};
`,"h/types/index.d.ts":`import type { HyperScript } from "./hyperscript";
declare const h: HyperScript;
export default h;
`,"html/types/index.d.ts":`import type { HTMLTag } from "./lit";
declare const html: HTMLTag;
export default html;
`,"html/types/lit.d.ts":`type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
interface Runtime {
    effect<T>(fn: (prev?: T) => T, init?: T): any;
    untrack<T>(fn: () => T): T;
    insert(parent: MountableElement, accessor: any, marker?: Node | null, init?: any): any;
    spread<T>(node: Element, accessor: (() => T) | T, isSVG?: Boolean, skipChildren?: Boolean): void;
    createComponent(Comp: (props: any) => any, props: any): any;
    addEventListener(node: Element, name: string, handler: () => void, delegate: boolean): void;
    delegateEvents(eventNames: string[]): void;
    classList(node: Element, value: {
        [k: string]: boolean;
    }, prev?: {
        [k: string]: boolean;
    }): void;
    style(node: Element, value: {
        [k: string]: string;
    }, prev?: {
        [k: string]: string;
    }): void;
    mergeProps(...sources: unknown[]): unknown;
    dynamicProperty(props: any, key: string): any;
    setAttribute(node: Element, name: string, value: any): void;
    setAttributeNS(node: Element, namespace: string, name: string, value: any): void;
    Aliases: Record<string, string>;
    getPropAlias(prop: string, tagName: string): string | undefined;
    Properties: Set<string>;
    ChildProperties: Set<string>;
    DelegatedEvents: Set<string>;
    SVGElements: Set<string>;
    SVGNamespace: Record<string, string>;
}
export type HTMLTag = {
    (statics: TemplateStringsArray, ...args: unknown[]): Node | Node[];
};
export declare function createHTML(r: Runtime, { delegateEvents, functionBuilder }?: {
    delegateEvents?: boolean;
    functionBuilder?: (...args: string[]) => Function;
}): HTMLTag;
export {};
`,"store/types/index.d.ts":`export { $RAW, createStore, unwrap } from "./store.js";
export type { ArrayFilterFn, DeepMutable, DeepReadonly, NotWrappable, Part, SetStoreFunction, SolidStore, Store, StoreNode, StorePathRange, StoreSetter } from "./store.js";
export * from "./mutable.js";
export * from "./modifiers.js";
import { $NODE, isWrappable } from "./store.js";
export declare const DEV: {
    readonly $NODE: typeof $NODE;
    readonly isWrappable: typeof isWrappable;
    readonly hooks: {
        onStoreNodeUpdate: import("./store.js").OnStoreNodeUpdate | null;
    };
} | undefined;
`,"store/types/modifiers.d.ts":`export type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store.js";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
export declare function modifyMutable<T>(state: T, modifier: (state: T) => T): void;
`,"store/types/server.d.ts":`import type { SetStoreFunction, Store } from "./store.js";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: T): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U extends object>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: T) => void): (state: T) => T;
export declare const DEV: undefined;
export {};
`,"store/types/store.d.ts":`export declare const $RAW: unique symbol, $NODE: unique symbol, $HAS: unique symbol, $SELF: unique symbol;
export declare const DevHooks: {
    onStoreNodeUpdate: OnStoreNodeUpdate | null;
};
type DataNode = {
    (): any;
    $(value?: any): void;
};
type DataNodes = Record<PropertyKey, DataNode | undefined>;
export type OnStoreNodeUpdate = (state: StoreNode, property: PropertyKey, value: StoreNode | NotWrappable, prev: StoreNode | NotWrappable) => void;
export interface StoreNode {
    [$NODE]?: DataNodes;
    [key: PropertyKey]: any;
}
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export type Store<T> = T;
export declare function isWrappable<T>(obj: T | NotWrappable): obj is T;
/**
 * Returns the underlying data in the store without a proxy.
 * @param item store proxy object
 * @example
 * \`\`\`js
 * const initial = {z...};
 * const [state, setState] = createStore(initial);
 * initial === state; // => false
 * initial === unwrap(state); // => true
 * \`\`\`
 */
export declare function unwrap<T>(item: T, set?: Set<unknown>): T;
export declare function getNodes(target: StoreNode, symbol: typeof $NODE | typeof $HAS): DataNodes;
export declare function getNode(nodes: DataNodes, property: PropertyKey, value?: any): DataNode;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): TypedPropertyDescriptor<any> | undefined;
export declare function trackSelf(target: StoreNode): void;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any, deleting?: boolean): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
/** @deprecated */
export type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
/** @deprecated */
export type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export type CustomPartial<T> = T extends readonly unknown[] ? "0" extends keyof T ? {
    [K in Extract<keyof T, \`\${number}\`>]?: T[K];
} : {
    [x: number]: T[number];
} : Partial<T>;
export type PickMutable<T> = {
    [K in keyof T as (<U>() => U extends {
        [V in K]: T[V];
    } ? 1 : 2) extends <U>() => U extends {
        -readonly [V in K]: T[V];
    } ? 1 : 2 ? K : never]: T[K];
};
export type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export type ArrayFilterFn<T> = (item: T, index: number) => boolean;
export type StoreSetter<T, U extends PropertyKey[] = []> = T | CustomPartial<T> | ((prevState: T, traversed: U) => T | CustomPartial<T>);
export type Part<T, K extends KeyOf<T> = KeyOf<T>> = K | ([K] extends [never] ? never : readonly K[]) | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
type W<T> = Exclude<T, NotWrappable>;
type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [never] ? never : [
    T
] extends [readonly unknown[]] ? number : keyof T : keyof T;
type MutableKeyOf<T> = KeyOf<T> & keyof PickMutable<T>;
type Rest<T, U extends PropertyKey[], K extends KeyOf<T> = KeyOf<T>> = [T] extends [never] ? never : K extends MutableKeyOf<T> ? [Part<T, K>, ...RestSetterOrContinue<T[K], [K, ...U]>] : K extends KeyOf<T> ? [Part<T, K>, ...RestContinue<T[K], [K, ...U]>] : never;
type RestContinue<T, U extends PropertyKey[]> = 0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : Rest<W<T>, U>;
type RestSetterOrContinue<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | RestContinue<T, U>;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends MutableKeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, setter: StoreSetter<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [
        K7,
        K6,
        K5,
        K4,
        K3,
        K2,
        K1
    ]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends MutableKeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends MutableKeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends MutableKeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends MutableKeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends MutableKeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends MutableKeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends object = {}>(...[store, options]: {} extends T ? [store?: T | Store<T>, options?: {
    name?: string;
}] : [store: T | Store<T>, options?: {
    name?: string;
}]): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal.js";
/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal.js";
declare global {
    interface SymbolConstructor {
        readonly observable: symbol;
    }
}
interface Observable<T> {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): Observable<T>;
}
export type ObservableObserver<T> = ((v: T) => void) | {
    next?: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): Observable<T>;
export declare function from<T>(producer: ((setter: Setter<T | undefined>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T | undefined>;
export {};
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`/**
The MIT License (MIT)

Copyright (c) 2017 Adam Haile

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
import { requestCallback } from "./scheduler.js";
import type { JSX } from "../jsx.js";
import type { FlowComponent } from "../render/index.js";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
/** Object storing callbacks for debugging during development */
export declare const DevHooks: {
    afterUpdate: (() => void) | null;
    afterCreateOwner: ((owner: Owner) => void) | null;
};
export type ComputationState = 0 | 1 | 2;
export interface SourceMapValue {
    value: unknown;
    name?: string;
    graph?: Owner;
}
export interface SignalState<T> extends SourceMapValue {
    value: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: SourceMapValue[];
    name?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: ComputationState;
    tState?: ComputationState;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: typeof Owner): T;
export type Accessor<T> = () => T;
export type Setter<in out T> = {
    <U extends T>(...args: undefined extends T ? [] : [value: (prev: T) => U]): undefined extends T ? undefined : U;
    <U extends T>(value: (prev: T) => U): U;
    <U extends T>(value: Exclude<U, Function>): U;
    <U extends T>(value: Exclude<U, Function> | ((prev: T) => U)): U;
};
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next>(fn: EffectFunction<undefined | NoInfer<Next>, Next>): void;
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions & {
    render?: boolean;
}): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
export interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    value: Next;
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends Prev, Prev = Next>(fn: EffectFunction<undefined | NoInfer<Prev>, Next>): Accessor<Next>;
export declare function createMemo<Next extends Prev, Init = Next, Prev = Next>(fn: EffectFunction<Init | Prev, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
interface Unresolved {
    state: "unresolved";
    loading: false;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Pending {
    state: "pending";
    loading: true;
    error: undefined;
    latest: undefined;
    (): undefined;
}
interface Ready<T> {
    state: "ready";
    loading: false;
    error: undefined;
    latest: T;
    (): T;
}
interface Refreshing<T> {
    state: "refreshing";
    loading: true;
    error: undefined;
    latest: T;
    (): T;
}
interface Errored {
    state: "errored";
    loading: false;
    error: any;
    latest: never;
    (): never;
}
export type Resource<T> = Unresolved | Pending | Ready<T> | Refreshing<T> | Errored;
export type InitializedResource<T> = Ready<T> | Refreshing<T> | Errored;
export type ResourceActions<T, R = unknown> = {
    mutate: Setter<T>;
    refetch: (info?: R) => T | Promise<T> | undefined | null;
};
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T, R = unknown> = (k: S, info: ResourceFetcherInfo<T, R>) => T | Promise<T>;
export type ResourceFetcherInfo<T, R = unknown> = {
    value: T | undefined;
    refetching: R | boolean;
};
export type ResourceOptions<T, S = unknown> = {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (init: T | undefined) => [Accessor<T | undefined>, Setter<T | undefined>];
    onHydrated?: (k: S | undefined, info: {
        value: T | undefined;
    }) => void;
};
export type InitializedResourceOptions<T, S = unknown> = ResourceOptions<T, S> & {
    initialValue: T;
};
export type ResourceReturn<T, R = unknown> = [Resource<T>, ResourceActions<T | undefined, R>];
export type InitializedResourceReturn<T, R = unknown> = [
    InitializedResource<T>,
    ResourceActions<T, R>
];
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * // Without source
 * const [resource, { mutate, refetch }] = createResource(fetcher, options);
 * // With source
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function which has its non-nullish and non-false values passed to the fetcher, optional
 * @param fetcher - function that receives the source (true if source not provided), the last or initial value, and whether the resource is being refetched, and returns a value or a Promise:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, R> = (
 *   sourceOutput: S,
 *   info: { value: T | undefined, refetching: R | boolean }
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes); see {@link ResourceOptions}
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source, and if called with a value, that value will be passed to the fetcher via the \`refetching\` property on the fetcher's second parameter
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options: InitializedResourceOptions<NoInfer<T>, true>): InitializedResourceReturn<T, R>;
export declare function createResource<T, R = unknown>(fetcher: ResourceFetcher<true, T, R>, options?: ResourceOptions<NoInfer<T>, true>): ResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options: InitializedResourceOptions<NoInfer<T>, S>): InitializedResourceReturn<T, R>;
export declare function createResource<T, S, R = unknown>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T, R>, options?: ResourceOptions<NoInfer<T>, S>): ResourceReturn<T, R>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U = T>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
/** @deprecated */
export type ReturnTypes<T> = T extends readonly Accessor<unknown>[] ? {
    [K in keyof T]: T[K] extends Accessor<infer I> ? I : never;
} : T extends Accessor<infer I> ? I : never;
export type AccessorArray<T> = [...Extract<{
    [K in keyof T]: Accessor<T[K]>;
}, readonly unknown[]>];
export type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: S, prevInput: S | undefined, prev: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<S, U>(
 *   deps: Accessor<S> | AccessorArray<S>,
 *   fn: (input: S, prevInput: S | undefined, prevValue: U | undefined) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue: U | undefined) => U;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options?: OnOptions & {
    defer?: false;
}): EffectFunction<undefined | NoInfer<Next>, NoInfer<Next>>;
export declare function on<S, Next extends Prev, Prev = Next>(deps: AccessorArray<S> | Accessor<S>, fn: OnEffectFunction<S, undefined | NoInfer<Prev>, Next>, options: OnOptions | {
    defer: true;
}): EffectFunction<undefined | NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @returns the same {@link fn} function that was passed in
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup<T extends () => any>(fn: T): T;
/**
 * catchError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn boundary for the error
 * @param handler an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#catcherror
 */
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export interface DevComponent<T> extends Memo<unknown> {
    props: T;
    name: string;
    component: (props: T) => unknown;
}
export declare function devComponent<P, V>(Comp: (props: P) => V, props: P): V;
export declare function registerGraph(value: SourceMapValue): void;
export type ContextProviderComponent<T> = FlowComponent<{
    value: T;
}>;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: FlowComponent<{ value: T }>;
 *   defaultValue: T;
 * }
 * export function createContext<T>(
 *   defaultValue?: T,
 *   options?: { name?: string }
 * ): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @param options allows to set a name in dev mode for debugging purposes
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(defaultValue?: undefined, options?: EffectOptions): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T, options?: EffectOptions): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement>;
export type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
export type ChildrenReturn = Accessor<ResolvedChildren> & {
    toArray: () => ResolvedJSXElement[];
};
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): ChildrenReturn;
export type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
type SuspenseContext = Context<SuspenseContextType | undefined> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: Error) => void): void;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx.js";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#suspenselist-experimental
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#suspense
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx.js";
export declare function enableHydration(): void;
/**
 * A general \`Component\` has no implicit \`children\` prop.  If desired, you can
 * specify one as in \`Component<{name: String, children: JSX.Element}>\`.
 */
export type Component<P = {}> = (props: P) => JSX.Element;
/**
 * Extend props to forbid the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidProps<P = {}> = P & {
    children?: never;
};
/**
 * \`VoidComponent\` forbids the \`children\` prop.
 * Use this to prevent accidentally passing \`children\` to components that
 * would silently throw them away.
 */
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
/**
 * Extend props to allow an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
/**
 * \`ParentComponent\` allows an optional \`children\` prop with the usual
 * type in JSX, \`JSX.Element\` (which allows elements, arrays, functions, etc.).
 * Use this for components that you want to accept children.
 */
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
/**
 * Extend props to require a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
/**
 * \`FlowComponent\` requires a \`children\` prop with the specified type.
 * Use this for components where you need a specific child type,
 * typically a function that receives specific argument types.
 * Note that all JSX <Elements> are of the type \`JSX.Element\`.
 */
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
/** @deprecated: use \`ParentProps\` instead */
export type PropsWithChildren<P = {}> = ParentProps<P>;
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
/**
 * Type of \`props.ref\`, for use in \`Component\` or \`props\` typing.
 *
 * @example Component<{ref: Ref<Element>}>
 */
export type Ref<T> = T | ((val: T) => void);
export declare function createComponent<T>(Comp: Component<T>, props: T): JSX.Element;
type DistributeOverride<T, F> = T extends undefined ? F : T;
type Override<T, U> = T extends any ? U extends any ? {
    [K in keyof T]: K extends keyof U ? DistributeOverride<U[K], T[K]> : T[K];
} & {
    [K in keyof U]: K extends keyof T ? DistributeOverride<U[K], T[K]> : U[K];
} : T & U : T & U;
type OverrideSpread<T, U> = T extends any ? {
    [K in keyof ({
        [K in keyof T]: any;
    } & {
        [K in keyof U]?: any;
    } & {
        [K in U extends any ? keyof U : keyof U]?: any;
    })]: K extends keyof T ? Exclude<U extends any ? U[K & keyof U] : never, undefined> | T[K] : U extends any ? U[K & keyof U] : never;
} : T & U;
type Simplify<T> = T extends any ? {
    [K in keyof T]: T[K];
} : T;
type _MergeProps<T extends unknown[], Curr = {}> = T extends [
    infer Next | (() => infer Next),
    ...infer Rest
] ? _MergeProps<Rest, Override<Curr, Next>> : T extends [...infer Rest, infer Next | (() => infer Next)] ? Override<_MergeProps<Rest, Curr>, Next> : T extends [] ? Curr : T extends (infer I | (() => infer I))[] ? OverrideSpread<Curr, I> : Curr;
export type MergeProps<T extends unknown[]> = Simplify<_MergeProps<T>>;
export declare function mergeProps<T extends unknown[]>(...sources: T): MergeProps<T>;
export type SplitProps<T, K extends (readonly (keyof T)[])[]> = [
    ...{
        [P in keyof K]: P extends \`\${number}\` ? Pick<T, Extract<K[P], readonly (keyof T)[]>[number]> : never;
    },
    Omit<T, K[number][number]>
];
export declare function splitProps<T extends Record<any, any>, K extends [readonly (keyof T)[], ...(readonly (keyof T)[])[]]>(props: T, ...keys: K): SplitProps<T, K>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal.js";
import type { JSX } from "../jsx.js";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#for
 */
export declare function For<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T[number], index: Accessor<number>) => U;
}): JSX.Element;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#index
 */
export declare function Index<T extends readonly any[], U extends JSX.Element>(props: {
    each: T | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T[number]>, index: number) => U;
}): JSX.Element;
type RequiredParameter<T> = T extends () => unknown ? never : T;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Show<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    fallback?: JSX.Element;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
export type MatchProps<T> = {
    when: T | undefined | null | false;
    keyed?: boolean;
    children: JSX.Element | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#switchmatch
 */
export declare function Match<T, TRenderFunction extends (item: Accessor<NonNullable<T>>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed?: false;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function Match<T, TRenderFunction extends (item: NonNullable<T>) => JSX.Element>(props: {
    when: T | undefined | null | false;
    keyed: true;
    children: JSX.Element | RequiredParameter<TRenderFunction>;
}): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#errorboundary
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): JSX.Element;
export {};
`,"types/render/hydration.d.ts":`import { Computation } from "../reactive/signal";
export type HydrationContext = {
    id: string;
    count: number;
};
type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | any | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
    count?: number;
    effects?: Computation<any, any>[];
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component.js";
export * from "./flow.js";
export * from "./Suspense.js";
export { sharedConfig } from "./hydration.js";
`,"types/server/index.d.ts":`export { catchError, createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, $TRACK, DEV, enableExternalSource } from "./reactive.js";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering.js";
export type { Component, Resource } from "./rendering.js";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $TRACK: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: undefined;
export type Accessor<T> = () => T;
export type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export declare function castError(err: unknown): Error;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
    owned: Owner[] | null;
    cleanups: (() => void)[] | null;
}
export declare function createOwner(): Owner;
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: typeof Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): () => void;
export declare function cleanNode(node: Owner): void;
export declare function catchError<T>(fn: () => T, handler: (err: Error) => void): T | undefined;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
type ChildrenReturn = Accessor<any> & {
    toArray: () => any[];
};
export declare function children(fn: () => any): ChildrenReturn;
export declare function runWithOwner<T>(o: typeof Owner, fn: () => T): T | undefined;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
    [Symbol.observable](): any;
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
/**
 * @deprecated since version 1.7.0 and will be removed in next major - use catchError instead
 */
export declare function onError(fn: (err: Error) => void): void;
export {};
`,"types/server/rendering.d.ts":`import { Accessor, Setter, Signal } from "./reactive.js";
import type { JSX } from "../jsx.js";
export type Component<P = {}> = (props: P) => JSX.Element;
export type VoidProps<P = {}> = P & {
    children?: never;
};
export type VoidComponent<P = {}> = Component<VoidProps<P>>;
export type ParentProps<P = {}> = P & {
    children?: JSX.Element;
};
export type ParentComponent<P = {}> = Component<ParentProps<P>>;
export type FlowProps<P = {}, C = JSX.Element> = P & {
    children: C;
};
export type FlowComponent<P = {}, C = JSX.Element> = Component<FlowProps<P, C>>;
export type Ref<T> = T | ((val: T) => void);
export type ValidComponent = keyof JSX.IntrinsicElements | Component<any> | (string & {});
export type ComponentProps<T extends ValidComponent> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : Record<string, unknown>;
type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#show
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    keyed?: boolean;
    fallback?: string;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
type MatchProps<T> = {
    when: T | false;
    keyed?: boolean;
    children: string | ((item: NonNullable<T> | Accessor<NonNullable<T>>) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): string | ((err: any, reset: () => void) => string) | {
    t: string;
};
export interface Resource<T> {
    (): T | undefined;
    state: "unresolved" | "pending" | "ready" | "refreshing" | "errored";
    loading: boolean;
    error: any;
    latest: T | undefined;
}
type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: () => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    deferStream?: boolean;
    ssrLoadFrom?: "initial" | "server";
    storage?: (v?: T) => Signal<T | undefined>;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
type HydrationContext = {
    id: string;
    count: number;
    writeResource: (id: string, v: Promise<any> | any, error?: boolean, deferStream?: boolean) => void;
    replace: (id: string, replacement: () => any) => void;
    block: (p: Promise<any>) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    lazy: Record<string, Promise<any>>;
    async?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): string | number | boolean | Node | JSX.ArrayElement | {
    t: string;
} | null | undefined;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal.js";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType | undefined;
  getFirstChild(node: NodeType): NodeType | undefined;
  getNextSibling(node: NodeType): NodeType | undefined;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
  use<A, T>(fn: (element: NodeType, arg: A) => T, element: NodeType, arg: A): T;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx.js";
export const Aliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;
export function getPropAlias(prop: string, tagName: string): string | undefined;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, isCE?: boolean, isSVG?: boolean): () => Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function untrack<T>(fn: () => T): T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function className(node: Element, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string, owner?: unknown }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function HydrationScript(): JSX.Element;
export function generateHydrationScript(): string;
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;`,"web/types/core.d.ts":`export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, createMemo as memo, sharedConfig, untrack, mergeProps } from "solid-js";
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client.js";
import { JSX, ComponentProps, ValidComponent } from "solid-js";
export * from "./client.js";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "solid-js";
export * from "./server-mock.js";
export declare const isServer: boolean;
export declare const isDev: boolean;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#portal
 */
export declare function Portal<T extends boolean = false, S extends boolean = false>(props: {
    mount?: Node;
    useShadow?: T;
    isSVG?: S;
    ref?: (S extends true ? SVGGElement : HTMLDivElement) | ((el: (T extends true ? {
        readonly shadowRoot: ShadowRoot;
    } : {}) & (S extends true ? SVGGElement : HTMLDivElement)) => void);
    children: JSX.Element;
}): Text;
export type DynamicProps<T extends ValidComponent, P = ComponentProps<T>> = {
    [K in keyof P]: P[K];
} & {
    component: T | undefined;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#dynamic
 */
export declare function Dynamic<T extends ValidComponent>(props: DynamicProps<T>): JSX.Element;
`,"web/types/jsx.d.ts":`export type { JSX } from "../../types/jsx.js";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function ssrElement(name: string, props: any, children: any, needsId: boolean): {
    t: string;
};
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrAttribute(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function resolveSSRNode(node: any): string;
export declare function escape(html: string): string;
/**
 * @deprecated Replaced by ssrElement
 */
export declare function ssrSpread(props: any, isSVG: boolean, skipChildren: boolean): void;
export type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`,"web/types/server.d.ts":`export function renderToString<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
  }
): string;
export function renderToStringAsync<T>(
  fn: () => T,
  options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
  }
): Promise<string>;
export function renderToStream<T>(
  fn: () => T,
  options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: { write: (v: string) => void }) => void;
    onCompleteAll?: (info: { write: (v: string) => void }) => void;
  }
): {
  pipe: (writable: { write: (v: string) => void }) => void;
  pipeTo: (writable: WritableStream) => Promise<void>;
};

export function HydrationScript(props: { nonce?: string; eventNames?: string[] }): JSX.Element;
export function ssr(template: string[] | string, ...nodes: any[]): { t: string };
export function ssrElement(
  name: string,
  props: any,
  children: any,
  needsId: boolean
): { t: string };
export function ssrClassList(value: { [k: string]: boolean }): string;
export function ssrStyle(value: { [k: string]: string }): string;
export function ssrAttribute(key: string, value: any, isBoolean: boolean): string;
export function ssrHydrationKey(): string;
export function resolveSSRNode(node: any): string;
export function escape(html: string): string;
export function useAssets(fn: () => JSX.Element): void;
export function getAssets(): string;
export function getHydrationKey(): string;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function mergeProps(...sources: unknown[]): unknown;
export function getOwner(): unknown;
export function generateHydrationScript(options: { nonce?: string; eventNames?: string[] }): string;
export function stringify(root: unknown): string;

export function Hydration(props: { children?: JSX.Element }): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
export function Assets(props: { children?: JSX.Element }): JSX.Element;

// deprecated
export type LegacyResults = {
  write: (text: string) => void;
  startWriting: () => void;
};
export function pipeToWritable<T>(
  fn: () => T,
  writable: WritableStream,
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
export function pipeToNodeWritable<T>(
  fn: () => T,
  writable: { write: (v: string) => void },
  options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
  }
): void;
`,"h/jsx-runtime/types/index.d.ts":`export type { JSX } from "./jsx";
import type { JSX } from "./jsx";
declare function Fragment(props: {
    children: JSX.Element;
}): JSX.Element;
declare function jsx(type: any, props: any): () => (Node & {
    [key: string]: any;
}) | (Node & {
    [key: string]: any;
})[];
export { jsx, jsx as jsxs, jsx as jsxDEV, Fragment };
`,"h/jsx-runtime/types/jsx.d.ts":`import * as csstype from "csstype";

/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type FunctionMaybe<T = unknown> = { (): T } | T;
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  type Accessor<T> = () => T;
  interface Directives {}
  interface DirectiveFunctions {
    [x: string]: (el: Element, accessor: Accessor<any>) => void;
  }
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type DirectiveFunctionAttributes<T> = {
    [K in keyof DirectiveFunctions as string extends K
      ? never
      : \`use:\${K}\`]?: DirectiveFunctions[K] extends (
      el: infer E, // will be unknown if not provided
      ...rest: infer R // use rest so that we can check whether it's provided or not
    ) => void
      ? T extends E // everything extends unknown if E is unknown
        ? R extends [infer A] // check if has accessor provided
          ? A extends Accessor<infer V>
            ? V // it's an accessor
            : never // it isn't, type error
          : true // no accessor provided
        : never // T is the wrong element
      : never; // it isn't a function
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  };
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<
      T,
      CustomCaptureEvents[Key]
    >;
  };
  interface DOMAttributes<T>
    extends CustomAttributes<T>,
      DirectiveAttributes,
      DirectiveFunctionAttributes<T>,
      PropAttributes,
      AttrAttributes,
      OnAttributes<T>,
      OnCaptureAttributes<T>,
      CustomEventHandlersCamelCase<T>,
      CustomEventHandlersLowerCase<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    // camel case events
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onencrypted?: EventHandlerUnion<T, Event>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
  }
  interface CustomEventHandlersCamelCase<T> {
    onAbort?: EventHandlerUnion<T, Event>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAuxClick?: EventHandlerUnion<T, MouseEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onChange?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onLoad?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onReset?: EventHandlerUnion<T, Event>;
    onScroll?: EventHandlerUnion<T, Event>;
    onScrollEnd?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onTransitionStart?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionRun?: EventHandlerUnion<T, TransitionEvent>;
    onTransitionCancel?: EventHandlerUnion<T, TransitionEvent>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
  }
  /**
   * @type {GlobalEventHandlers}
   */
  interface CustomEventHandlersLowerCase<T> {
    onabort?: EventHandlerUnion<T, Event>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onauxclick?: EventHandlerUnion<T, MouseEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    onchange?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    oninvalid?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    onload?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onreset?: EventHandlerUnion<T, Event>;
    onscroll?: EventHandlerUnion<T, Event>;
    onscrollend?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    ontransitionstart?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
    ontransitionrun?: EventHandlerUnion<T, TransitionEvent>;
    ontransitioncancel?: EventHandlerUnion<T, TransitionEvent>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
  }

  interface CSSProperties extends csstype.PropertiesHyphen {
    // Override
    [key: \`-\${string}\`]: string | number | undefined;
  }

  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
    role?: FunctionMaybe<
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem"
    >;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: FunctionMaybe<string>;
    class?: FunctionMaybe<string> | undefined;
    contenteditable?: FunctionMaybe<boolean | "inherit">;
    contextmenu?: FunctionMaybe<string>;
    dir?: FunctionMaybe<HTMLDir>;
    draggable?: FunctionMaybe<boolean>;
    hidden?: FunctionMaybe<boolean>;
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    spellcheck?: FunctionMaybe<boolean>;
    style?: FunctionMaybe<CSSProperties | string>;
    tabindex?: FunctionMaybe<number | string>;
    title?: FunctionMaybe<string>;
    translate?: FunctionMaybe<"yes" | "no">;
    about?: FunctionMaybe<string>;
    datatype?: FunctionMaybe<string>;
    inlist?: FunctionMaybe<any>;
    prefix?: FunctionMaybe<string>;
    property?: FunctionMaybe<string>;
    resource?: FunctionMaybe<string>;
    typeof?: FunctionMaybe<string>;
    vocab?: FunctionMaybe<string>;
    autocapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    slot?: FunctionMaybe<string>;
    color?: FunctionMaybe<string>;
    itemprop?: FunctionMaybe<string>;
    itemscope?: FunctionMaybe<boolean>;
    itemtype?: FunctionMaybe<string>;
    itemid?: FunctionMaybe<string>;
    itemref?: FunctionMaybe<string>;
    part?: FunctionMaybe<string>;
    exportparts?: FunctionMaybe<string>;
    inputmode?: FunctionMaybe<
      "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search"
    >;
    contentEditable?: FunctionMaybe<boolean | "inherit">;
    contextMenu?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    autoCapitalize?: FunctionMaybe<HTMLAutocapitalize>;
    itemProp?: FunctionMaybe<string>;
    itemScope?: FunctionMaybe<boolean>;
    itemType?: FunctionMaybe<string>;
    itemId?: FunctionMaybe<string>;
    itemRef?: FunctionMaybe<string>;
    exportParts?: FunctionMaybe<string>;
    inputMode?: FunctionMaybe<
      "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search"
    >;
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    coords?: FunctionMaybe<string>;
    download?: FunctionMaybe<any>;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    ping?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    shape?: FunctionMaybe<"rect" | "circle" | "poly" | "default">;
    target?: FunctionMaybe<string>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: FunctionMaybe<string>;
    target?: FunctionMaybe<string>;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<"submit" | "reset" | "button">;
    value?: FunctionMaybe<string>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: FunctionMaybe<number | string>;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: FunctionMaybe<boolean>;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    "accept-charset"?: FunctionMaybe<string>;
    action?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    encoding?: FunctionMaybe<HTMLFormEncType>;
    enctype?: FunctionMaybe<HTMLFormEncType>;
    method?: FunctionMaybe<HTMLFormMethod>;
    name?: FunctionMaybe<string>;
    novalidate?: FunctionMaybe<boolean>;
    target?: FunctionMaybe<string>;
    noValidate?: FunctionMaybe<boolean>;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: FunctionMaybe<string>;
    allowfullscreen?: FunctionMaybe<boolean>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sandbox?: HTMLIframeSandbox | string;
    src?: FunctionMaybe<string>;
    srcdoc?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    decoding?: FunctionMaybe<"sync" | "async" | "auto">;
    height?: FunctionMaybe<number | string>;
    ismap?: FunctionMaybe<boolean>;
    isMap?: FunctionMaybe<boolean>;
    loading?: FunctionMaybe<"eager" | "lazy">;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    srcSet?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    useMap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: FunctionMaybe<string>;
    alt?: FunctionMaybe<string>;
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    capture?: FunctionMaybe<boolean | string>;
    checked?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    formaction?: FunctionMaybe<string>;
    formenctype?: FunctionMaybe<HTMLFormEncType>;
    formmethod?: FunctionMaybe<HTMLFormMethod>;
    formnovalidate?: FunctionMaybe<boolean>;
    formtarget?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    list?: FunctionMaybe<string>;
    max?: FunctionMaybe<number | string>;
    maxlength?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    pattern?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    src?: FunctionMaybe<string>;
    step?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
    width?: FunctionMaybe<number | string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    formAction?: FunctionMaybe<string>;
    formEnctype?: FunctionMaybe<HTMLFormEncType>;
    formMethod?: FunctionMaybe<HTMLFormMethod>;
    formNoValidate?: FunctionMaybe<boolean>;
    formTarget?: FunctionMaybe<string>;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: FunctionMaybe<boolean>;
    challenge?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    keytype?: FunctionMaybe<string>;
    keyparams?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    for?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: FunctionMaybe<number | string>;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: FunctionMaybe<HTMLLinkAs>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    disabled?: FunctionMaybe<boolean>;
    fetchpriority?: FunctionMaybe<"high" | "low" | "auto">;
    href?: FunctionMaybe<string>;
    hreflang?: FunctionMaybe<string>;
    imagesizes?: FunctionMaybe<string>;
    imagesrcset?: FunctionMaybe<string>;
    integrity?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    rel?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: FunctionMaybe<boolean>;
    controls?: FunctionMaybe<boolean>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    loop?: FunctionMaybe<boolean>;
    mediagroup?: FunctionMaybe<string>;
    muted?: FunctionMaybe<boolean>;
    preload?: FunctionMaybe<"none" | "metadata" | "auto" | "">;
    src?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    mediaGroup?: FunctionMaybe<string>;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: FunctionMaybe<string>;
    type?: FunctionMaybe<"context" | "toolbar">;
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: FunctionMaybe<string>;
    content?: FunctionMaybe<string>;
    "http-equiv"?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
    media?: FunctionMaybe<string>;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    high?: FunctionMaybe<number | string>;
    low?: FunctionMaybe<number | string>;
    max?: FunctionMaybe<number | string>;
    min?: FunctionMaybe<number | string>;
    optimum?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: FunctionMaybe<string>;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: FunctionMaybe<string>;
    form?: FunctionMaybe<string>;
    height?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    usemap?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
    useMap?: FunctionMaybe<string>;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: FunctionMaybe<boolean>;
    start?: FunctionMaybe<number | string>;
    type?: FunctionMaybe<"1" | "a" | "A" | "i" | "I">;
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: FunctionMaybe<boolean>;
    label?: FunctionMaybe<string>;
    selected?: FunctionMaybe<boolean>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: FunctionMaybe<string>;
    for?: FunctionMaybe<string>;
    name?: FunctionMaybe<string>;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: FunctionMaybe<boolean>;
    charset?: FunctionMaybe<string>;
    crossorigin?: FunctionMaybe<HTMLCrossorigin>;
    defer?: FunctionMaybe<boolean>;
    integrity?: FunctionMaybe<string>;
    nomodule?: FunctionMaybe<boolean>;
    nonce?: FunctionMaybe<string>;
    referrerpolicy?: FunctionMaybe<HTMLReferrerPolicy>;
    src?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
    crossOrigin?: FunctionMaybe<HTMLCrossorigin>;
    noModule?: FunctionMaybe<boolean>;
    referrerPolicy?: FunctionMaybe<HTMLReferrerPolicy>;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    multiple?: FunctionMaybe<boolean>;
    name?: FunctionMaybe<string>;
    required?: FunctionMaybe<boolean>;
    size?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: FunctionMaybe<string>;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    sizes?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srcset?: FunctionMaybe<string>;
    type?: FunctionMaybe<string>;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: FunctionMaybe<string>;
    nonce?: FunctionMaybe<string>;
    scoped?: FunctionMaybe<boolean>;
    type?: FunctionMaybe<string>;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
  }
  interface TemplateHTMLAttributes<T extends HTMLTemplateElement> extends HTMLAttributes<T> {
    content?: FunctionMaybe<DocumentFragment>;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: FunctionMaybe<string>;
    autofocus?: FunctionMaybe<boolean>;
    cols?: FunctionMaybe<number | string>;
    dirname?: FunctionMaybe<string>;
    disabled?: FunctionMaybe<boolean>;
    form?: FunctionMaybe<string>;
    maxlength?: FunctionMaybe<number | string>;
    minlength?: FunctionMaybe<number | string>;
    name?: FunctionMaybe<string>;
    placeholder?: FunctionMaybe<string>;
    readonly?: FunctionMaybe<boolean>;
    required?: FunctionMaybe<boolean>;
    rows?: FunctionMaybe<number | string>;
    value?: FunctionMaybe<string | string[] | number>;
    wrap?: FunctionMaybe<"hard" | "soft" | "off">;
    maxLength?: FunctionMaybe<number | string>;
    minLength?: FunctionMaybe<number | string>;
    readOnly?: FunctionMaybe<boolean>;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: FunctionMaybe<number | string>;
    headers?: FunctionMaybe<string>;
    rowspan?: FunctionMaybe<number | string>;
    colSpan?: FunctionMaybe<number | string>;
    rowSpan?: FunctionMaybe<number | string>;
    scope?: FunctionMaybe<"col" | "row" | "rowgroup" | "colgroup">;
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: FunctionMaybe<string>;
    dateTime?: FunctionMaybe<string>;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: FunctionMaybe<boolean>;
    kind?: FunctionMaybe<"subtitles" | "captions" | "descriptions" | "chapters" | "metadata">;
    label?: FunctionMaybe<string>;
    src?: FunctionMaybe<string>;
    srclang?: FunctionMaybe<string>;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: FunctionMaybe<number | string>;
    playsinline?: FunctionMaybe<boolean>;
    poster?: FunctionMaybe<string>;
    width?: FunctionMaybe<number | string>;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    id?: FunctionMaybe<string>;
    lang?: FunctionMaybe<string>;
    tabIndex?: FunctionMaybe<number | string>;
    tabindex?: FunctionMaybe<number | string>;
  }
  interface StylableSVGAttributes {
    class?: FunctionMaybe<string> | undefined;
    style?: FunctionMaybe<CSSProperties | string>;
  }
  interface TransformableSVGAttributes {
    transform?: FunctionMaybe<string>;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: FunctionMaybe<string>;
    requiredFeatures?: FunctionMaybe<string>;
    systemLanguage?: FunctionMaybe<string>;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: FunctionMaybe<"true" | "false">;
  }
  interface AnimationTimingSVGAttributes {
    begin?: FunctionMaybe<string>;
    dur?: FunctionMaybe<string>;
    end?: FunctionMaybe<string>;
    min?: FunctionMaybe<string>;
    max?: FunctionMaybe<string>;
    restart?: FunctionMaybe<"always" | "whenNotActive" | "never">;
    repeatCount?: FunctionMaybe<number | "indefinite">;
    repeatDur?: FunctionMaybe<string>;
    fill?: FunctionMaybe<"freeze" | "remove">;
  }
  interface AnimationValueSVGAttributes {
    calcMode?: FunctionMaybe<"discrete" | "linear" | "paced" | "spline">;
    values?: FunctionMaybe<string>;
    keyTimes?: FunctionMaybe<string>;
    keySplines?: FunctionMaybe<string>;
    from?: FunctionMaybe<number | string>;
    to?: FunctionMaybe<number | string>;
    by?: FunctionMaybe<number | string>;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    additive?: FunctionMaybe<"replace" | "sum">;
    accumulate?: FunctionMaybe<"none" | "sum">;
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: FunctionMaybe<string>;
    attributeType?: FunctionMaybe<"CSS" | "XML" | "auto">;
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: FunctionMaybe<number | string>;
    clip?: FunctionMaybe<string>;
    "clip-path"?: FunctionMaybe<string>;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: FunctionMaybe<string>;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: FunctionMaybe<string>;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: FunctionMaybe<string>;
    direction?: "ltr" | "rtl" | "inherit";
    display?: FunctionMaybe<string>;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: FunctionMaybe<string>;
    fill?: FunctionMaybe<string>;
    "fill-opacity"?: FunctionMaybe<number | string | "inherit">;
    "fill-rule"?: FunctionMaybe<"nonzero" | "evenodd" | "inherit">;
    filter?: FunctionMaybe<string>;
    "flood-color"?: FunctionMaybe<string>;
    "flood-opacity"?: FunctionMaybe<number | string | "inherit">;
    "font-family"?: FunctionMaybe<string>;
    "font-size"?: FunctionMaybe<string>;
    "font-size-adjust"?: FunctionMaybe<number | string>;
    "font-stretch"?: FunctionMaybe<string>;
    "font-style"?: FunctionMaybe<"normal" | "italic" | "oblique" | "inherit">;
    "font-variant"?: FunctionMaybe<string>;
    "font-weight"?: FunctionMaybe<number | string>;
    "glyph-orientation-horizontal"?: FunctionMaybe<string>;
    "glyph-orientation-vertical"?: FunctionMaybe<string>;
    "image-rendering"?: FunctionMaybe<"auto" | "optimizeQuality" | "optimizeSpeed" | "inherit">;
    kerning?: FunctionMaybe<string>;
    "letter-spacing"?: FunctionMaybe<number | string>;
    "lighting-color"?: FunctionMaybe<string>;
    "marker-end"?: FunctionMaybe<string>;
    "marker-mid"?: FunctionMaybe<string>;
    "marker-start"?: FunctionMaybe<string>;
    mask?: FunctionMaybe<string>;
    opacity?: FunctionMaybe<number | string | "inherit">;
    overflow?: FunctionMaybe<"visible" | "hidden" | "scroll" | "auto" | "inherit">;
    pathLength?: FunctionMaybe<string | number>;
    "pointer-events"?: FunctionMaybe<
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit"
    >;
    "shape-rendering"?: FunctionMaybe<
      "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit"
    >;
    "stop-color"?: FunctionMaybe<string>;
    "stop-opacity"?: FunctionMaybe<number | string | "inherit">;
    stroke?: FunctionMaybe<string>;
    "stroke-dasharray"?: FunctionMaybe<string>;
    "stroke-dashoffset"?: FunctionMaybe<number | string>;
    "stroke-linecap"?: FunctionMaybe<"butt" | "round" | "square" | "inherit">;
    "stroke-linejoin"?: FunctionMaybe<
      "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit"
    >;
    "stroke-miterlimit"?: FunctionMaybe<number | string | "inherit">;
    "stroke-opacity"?: FunctionMaybe<number | string | "inherit">;
    "stroke-width"?: FunctionMaybe<number | string>;
    "text-anchor"?: FunctionMaybe<"start" | "middle" | "end" | "inherit">;
    "text-decoration"?: FunctionMaybe<
      "none" | "underline" | "overline" | "line-through" | "blink" | "inherit"
    >;
    "text-rendering"?: FunctionMaybe<
      "auto" | "optimizeSpeed" | "optimizeLegibility" | "geometricPrecision" | "inherit"
    >;
    "unicode-bidi"?: FunctionMaybe<string>;
    visibility?: FunctionMaybe<"visible" | "hidden" | "collapse" | "inherit">;
    "word-spacing"?: FunctionMaybe<number | string>;
    "writing-mode"?: FunctionMaybe<"lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit">;
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    result?: FunctionMaybe<string>;
  }
  interface SingleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: FunctionMaybe<string>;
    in2?: FunctionMaybe<string>;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: FunctionMaybe<string>;
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: FunctionMaybe<SVGUnits>;
    gradientTransform?: FunctionMaybe<string>;
    spreadMethod?: FunctionMaybe<"pad" | "reflect" | "repeat">;
    href?: FunctionMaybe<string>;
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: FunctionMaybe<string>;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
        | "pathLength"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: FunctionMaybe<"disable" | "magnify">;
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: FunctionMaybe<string>;
    keyPoints?: FunctionMaybe<string>;
    rotate?: FunctionMaybe<number | string | "auto" | "auto-reverse">;
    origin?: FunctionMaybe<"default">;
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: FunctionMaybe<"translate" | "scale" | "rotate" | "skewX" | "skewY">;
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: FunctionMaybe<SVGUnits>;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: FunctionMaybe<"normal" | "multiply" | "screen" | "darken" | "lighten">;
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: FunctionMaybe<"matrix" | "saturate" | "hueRotate" | "luminanceToAlpha">;
    values?: FunctionMaybe<string>;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"over" | "in" | "out" | "atop" | "xor" | "arithmetic">;
    k1?: FunctionMaybe<number | string>;
    k2?: FunctionMaybe<number | string>;
    k3?: FunctionMaybe<number | string>;
    k4?: FunctionMaybe<number | string>;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: FunctionMaybe<number | string>;
    kernelMatrix?: FunctionMaybe<string>;
    divisor?: FunctionMaybe<number | string>;
    bias?: FunctionMaybe<number | string>;
    targetX?: FunctionMaybe<number | string>;
    targetY?: FunctionMaybe<number | string>;
    edgeMode?: FunctionMaybe<"duplicate" | "wrap" | "none">;
    kernelUnitLength?: FunctionMaybe<number | string>;
    preserveAlpha?: FunctionMaybe<"true" | "false">;
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<number | string>;
    diffuseConstant?: FunctionMaybe<number | string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: FunctionMaybe<number | string>;
    xChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
    yChannelSelector?: FunctionMaybe<"R" | "G" | "B" | "A">;
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: FunctionMaybe<number | string>;
    elevation?: FunctionMaybe<number | string>;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: FunctionMaybe<string>;
    slope?: FunctionMaybe<number | string>;
    intercept?: FunctionMaybe<number | string>;
    amplitude?: FunctionMaybe<number | string>;
    exponent?: FunctionMaybe<number | string>;
    offset?: FunctionMaybe<number | string>;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: FunctionMaybe<number | string>;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: FunctionMaybe<SVGPreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: FunctionMaybe<"erode" | "dilate">;
    radius?: FunctionMaybe<number | string>;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: FunctionMaybe<string>;
    specularConstant?: FunctionMaybe<string>;
    specularExponent?: FunctionMaybe<string>;
    kernelUnitLength?: FunctionMaybe<number | string>;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    z?: FunctionMaybe<number | string>;
    pointsAtX?: FunctionMaybe<number | string>;
    pointsAtY?: FunctionMaybe<number | string>;
    pointsAtZ?: FunctionMaybe<number | string>;
    specularExponent?: FunctionMaybe<number | string>;
    limitingConeAngle?: FunctionMaybe<number | string>;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: FunctionMaybe<number | string>;
    numOctaves?: FunctionMaybe<number | string>;
    seed?: FunctionMaybe<number | string>;
    stitchTiles?: FunctionMaybe<"stitch" | "noStitch">;
    type?: FunctionMaybe<"fractalNoise" | "turbulence">;
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: FunctionMaybe<SVGUnits>;
    primitiveUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    filterRes?: FunctionMaybe<number | string>;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    preserveAspectRatio?: FunctionMaybe<ImagePreserveAspectRatio>;
    href?: FunctionMaybe<string>;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: FunctionMaybe<number | string>;
    x2?: FunctionMaybe<number | string>;
    y1?: FunctionMaybe<number | string>;
    y2?: FunctionMaybe<number | string>;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: FunctionMaybe<"strokeWidth" | "userSpaceOnUse">;
    refX?: FunctionMaybe<number | string>;
    refY?: FunctionMaybe<number | string>;
    markerWidth?: FunctionMaybe<number | string>;
    markerHeight?: FunctionMaybe<number | string>;
    orient?: FunctionMaybe<string>;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: FunctionMaybe<SVGUnits>;
    maskContentUnits?: FunctionMaybe<SVGUnits>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: FunctionMaybe<string>;
    pathLength?: FunctionMaybe<number | string>;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    patternUnits?: FunctionMaybe<SVGUnits>;
    patternContentUnits?: FunctionMaybe<SVGUnits>;
    patternTransform?: FunctionMaybe<string>;
    href?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: FunctionMaybe<string>;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: FunctionMaybe<number | string>;
    cy?: FunctionMaybe<number | string>;
    r?: FunctionMaybe<number | string>;
    fx?: FunctionMaybe<number | string>;
    fy?: FunctionMaybe<number | string>;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    rx?: FunctionMaybe<number | string>;
    ry?: FunctionMaybe<number | string>;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: FunctionMaybe<number | string>;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: FunctionMaybe<string>;
    baseProfile?: FunctionMaybe<string>;
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    contentScriptType?: FunctionMaybe<string>;
    contentStyleType?: FunctionMaybe<string>;
    xmlns?: FunctionMaybe<string>;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: FunctionMaybe<number | string>;
    method?: FunctionMaybe<"align" | "stretch">;
    spacing?: FunctionMaybe<"auto" | "exact">;
    href?: FunctionMaybe<string>;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    dx?: FunctionMaybe<number | string>;
    dy?: FunctionMaybe<number | string>;
    rotate?: FunctionMaybe<number | string>;
    textLength?: FunctionMaybe<number | string>;
    lengthAdjust?: FunctionMaybe<"spacing" | "spacingAndGlyphs">;
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: FunctionMaybe<number | string>;
    y?: FunctionMaybe<number | string>;
    width?: FunctionMaybe<number | string>;
    height?: FunctionMaybe<number | string>;
    href?: FunctionMaybe<string>;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: FunctionMaybe<string>;
  }
  /**
   * @type {HTMLElementTagNameMap}
   */
  interface HTMLElementTags {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLDialogElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableCellElement>;
    template: TemplateHTMLAttributes<HTMLTemplateElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
  }
  /**
   * @type {HTMLElementDeprecatedTagNameMap}
   */
  interface HTMLElementDeprecatedTags {
    big: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
  }
  /**
   * @type {SVGElementTagNameMap}
   */
  interface SVGElementTags {
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feDropShadow: Partial<SVGFEDropShadowElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    mpath: Partial<SVGMPathElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    set: Partial<SVGSetElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
  interface IntrinsicElements extends HTMLElementTags, HTMLElementDeprecatedTags, SVGElementTags {}
}
`}[t],"typescript",MN.parse(`file://root/node_modules/solid-js/${t}`));const e=u((t,n)=>jm.createModel(`declare module '${t}';`,"typescript",MN.parse(`file://root/${n}`)),"createEmptyModuleModel");e("@suid/*","suid-globals.d.ts"),e("@mui/*","mui-globals.d.ts"),e("react","react-globals.d.ts")}u(R6e,"setupEditor");function P6e(o){R6e();const e=o.value!==void 0;let t=!1;const[n,i]=Nke({controlled:()=>o.value,default:()=>String(o.defaultValue),name:"CodeEditor"}),s=Ike(),r=Eke();let a;return kke(()=>{a?.dispose()}),Dke(()=>{const l=MN.parse(`file://root/${o.fileName}`);jm.getModel(l)?.dispose();const d=jm.createModel(o.value??"",o.language??"typescript",l);a=jm.create(s.ref,{model:d,theme:r.darkMode?"vs-dark":"vs-light",minimap:{enabled:!1},automaticLayout:!0}),a.onDidChangeModelContent(()=>{const c=d.getLinesContent().join(`
`);i(c),t||o.onChange?.(c)}),o.onReady?.()}),xve(()=>{a?.updateOptions({theme:r.darkMode?"vs-dark":"vs-light"})}),xve(l=>{if(e||l){const d=n();typeof d=="string"&&(t=l,a?.getModel()?.setValue(d),t=!1)}return!1},!0),Mke(Ake,{get sx(){return{width:"100%",height:"400px",...o.sx||{}}},ref:s})}u(P6e,"CodeEditor");const W6e=Object.freeze(Object.defineProperty({__proto__:null,default:P6e},Symbol.toStringTag,{value:"Module"}));export{W6e as C,aE as m,kLe as t};
